{"version":3,"file":"built-editor.min.js","sources":["requirejs/almond.js","requirejs/i18n.js","orion/editor/nls/messages.js","orion/editor/nls/root/messages.js","orion/editor/eventTarget.js","orion/regex.js","orion/util.js","orion/editor/textModel.js","orion/keyBinding.js","orion/editor/keyModes.js","orion/editor/textTheme.js","orion/editor/util.js","orion/bidiUtils.js","orion/metrics.js","orion/editor/textView.js","orion/editor/projectionTextModel.js","orion/Deferred.js","orion/webui/littlelib.js","orion/editor/tooltip.js","orion/editor/annotations.js","orion/objects.js","orion/editor/editor.js","orion/editor/find.js","orion/editor/findUI.js","orion/editor/actions.js","orion/editor/undoStack.js","orion/editor/rulers.js","orion/editor/textDND.js","orion/editor/linkedMode.js","orion/editor/factories.js","orion/editor/editorFeatures.js","orion/editor/contentAssist.js","orion/editor/textStyler.js","orion/editor/edit.js"],"names":["requirejs","require","define","undef","hasProp","obj","prop","hasOwn","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","foundI","foundStarMap","starI","i","j","part","baseParts","split","map","config","starMap","charAt","slice","length","concat","splice","join","indexOf","substring","makeRequire","relName","forceSync","req","apply","aps","arguments","makeNormalize","makeLoad","depName","value","defined","callDep","waiting","args","defining","main","Error","splitPrefix","prefix","index","makeConfig","makeMap","handlers","Object","prototype","hasOwnProperty","plugin","parts","f","n","pr","p","exports","e","module","id","uri","deps","callback","cjsModule","ret","usingExports","load","alt","setTimeout","cfg","amd","jQuery","addPart","locale","master","needed","toLoad","suffix","push","addIfExists","fullName","_fileExists","toUrl","mixin","target","source","force","nlsRegExp","masterConfig","version","onLoad","masterName","match","exec","current","navigator","language","userLanguage","toLowerCase","isBuild","locales","k","partBundle","root","multipleAnnotations","line","breakpoint","bookmark","task","error","warning","currentSearch","currentLine","matchingBracket","currentBracket","diffAdded","diffDeleted","diffModified","lineUp","lineDown","lineStart","lineEnd","charPrevious","charNext","pageUp","pageDown","scrollPageUp","scrollPageDown","scrollLineUp","scrollLineDown","wordPrevious","wordNext","textStart","textEnd","scrollTextStart","scrollTextEnd","centerLine","selectLineUp","selectLineDown","selectWholeLineUp","selectWholeLineDown","selectLineStart","selectLineEnd","selectCharPrevious","selectCharNext","selectPageUp","selectPageDown","selectWordPrevious","selectWordNext","selectTextStart","selectTextEnd","deletePrevious","deleteNext","deleteWordPrevious","deleteWordNext","deleteLineStart","deleteLineEnd","tab","enter","enterNoCursor","escape","selectAll","copy","cut","paste","uppercase","lowercase","capitalize","reversecase","toggleWrapMode","toggleTabMode","toggleOverwriteMode","committerOnTime","emacs","exchangeMarkPoint","setMarkCommand","clearMark","digitArgument","negativeArgument","Comment","Flat outline","incrementalFindStr","incrementalFindStrNotFound","incrementalFindReverseStr","incrementalFindReverseStrNotFound","findReplace","find","undo","redo","cancelMode","findNext","findPrevious","incrementalFind","incrementalFindReverse","indentLines","unindentLines","moveLinesUp","moveLinesDown","copyLinesUp","copyLinesDown","deleteLines","gotoLine","gotoLinePrompty","nextAnnotation","prevAnnotation","expand","collapse","expandAll","collapseAll","lastEdit","trimTrailingWhitespaces","toggleLineComment","addBlockComment","removeBlockComment","linkedModeEntered","linkedModeExited","syntaxError","contentAssist","noProposals","computingProposals","lineColumn","lineColumnOffset","multiSelections","vi","vimove","viyank","videlete","vichange","viLeft","viRight","viUp","viDown","viw","vib","viW","viB","vie","viE","vi$","vi^_","vi+","vi-","vi|","viH","viM","viL","vi/","vi?","vin","viN","vif","viF","vit","viT","vi,","vi;","viG","viycd","via","viA","vii","viI","viO","vio","viR","vis","viS","viC","vip","viP","viStar","next","previous","replace","replaceAll","findWith","replaceWith","caseInsensitive","regex","wholeWord","caseInsensitiveTooltip","regexTooltip","wholeWordTooltip","closeTooltip","replacingAll","replacedMatches","nothingReplaced","notFound","EventTarget","addMixin","object","proto","addEventListener","type","listener","useCapture","this","_eventTypes","state","level","listeners","dispatchEvent","evt","_dispatchEvent","len","l","handleEvent","compact","isListening","undefined","removeEventListener","str","parse","regexp","pattern","flags","formatMessage","msg","createElement","document","tagName","createElementNS","XHTML","confineDialogTab","firstElement","lastElement","keyCode","shiftKey","preventDefault","focus","userAgent","isIE","documentMode","isFirefox","parseFloat","isOpera","isChrome","isSafari","isWebkit","isAndroid","isIPad","isIPhone","isIOS","isElectron","isMac","platform","isWindows","isLinux","isTouch","platformDelimiter","mEventTarget","mRegex","util","TextModel","text","lineDelimiter","_lastLineIndex","_text","_lineOffsets","setText","setLineDelimiter","destroy","options","string","parsed","skip","reverse","wrap","start","end","isRange","result","lastIndex","offset","s","re","RegExp","hasNext","getCharCount","count","getLine","lineIndex","includeDelimiter","lineCount","getLineCount","getText","c","charCodeAt","getLineAtOffset","charCount","high","low","Math","floor","getLineDelimiter","_lineDelimiter","getLineEnd","max","getLineStart","chunk","firstOffset","firstChunk","lastOffset","lastChunk","beforeText","afterText","onChanging","modelChangingEvent","onChanged","modelChangedEvent","all","lines","Array","startLine","endLine","eventStart","removedCharCount","removedLineCount","addedCharCount","addedLineCount","cr","lf","newLineOffsets","endLineOffset","startLineOffset","changeCount","SPLICE_LIMIT","limit","min","firstText","lastText","params","KeyStroke","mod1","mod2","mod3","mod4","toUpperCase","KeySequence","keys","getKeys","String","fromCharCode","which","charCode","metaKey","ctrlKey","altKey","equals","kb","KeyBinding","mKeyBinding","KeyMode","view","_view","_keyBindings","createKeyBindings","_keyBindingIndex","DefaultKeyMode","getKeyBindings","actionID","keyBindings","keyBinding","getView","isActive","getKeyModes","keyBindingIndex","_matchingKeyBindings","matchingKeyBindings","setKeyBinding","predefined","setView","bindings","isMacChrome","TextTheme","_document","THEME_PREFIX","Themes","getTheme","theme","getThemeClass","_themeClass","setThemeClass","className","styleSheet","self","oldThemeClass","_load","onThemeChanged","oldValue","newValue","themeChangedEvent","buildStyleSheet","themeClass","settings","convertCSSname","_capitalRegEx","bind","parseStyles","ancestors","isTopLevel","localResult","forEach","key","styles","_createStyle","link","node","getElementById","firstChild","data","removeChild","appendChild","createTextNode","rel","href","head","getElementsByTagName","documentElement","extension","test","cssText","handler","capture","attachEvent","detachEvent","contains","topNode","compareDocumentPosition","temp","parentNode","getNodeStyle","defaultValue","style","currentStyle","css","ownerDocument","defaultView","getComputedStyle","getPropertyValue","Animation","play","onFrame","startedAt","Date","getTime","now","percentDone","duration","eased","easing","propertyValue","range","onAnimate","stop","rate","defaultEasing","curve","interval","window","setInterval","clearInterval","onEnd","x","sin","PI","setBrowserLangDirection","lang","dojoConfig","languages","isBidi","htmlElement","setAttribute","bidiEnabled","localStorage","getItem","bidiEnabledStorgae","getBidiLayout","bidiLayout","bidiLayoutStorage","getTextDirection","checkContextual","enforceTextDirWithUcc","trim","dir","LRE","RLE","PDF","fdc","addBidiEventListeners","input","_hasBidiEventListeners","eventTypes","handleInputEvent","event","textContent","initInputField","Metrics","serviceRegistry","refs","getServiceReferences","services","getService","location","protocol","hostname","pathname","search","page","title","_services","pageLoad","registerService","_logTiming","timingCategory","timingVar","timingValue","timingLabel","logTiming","_logEvent","category","action","label","details","logEvent","_logPageLoadTiming","performance","getEntriesByName","mark","timingVars","create","logPageLoadTiming","messages","mTextModel","mKeyModes","mTextTheme","textUtil","bidiUtils","mMetrics","getWindow","doc","parentWindow","newArray","applyStyle","reset","attrs","attributes","specified","removeAttribute","styleClass","properties","a","clone","merge","obj1","obj2","compare","s1","s2","constructor","convertDelimiter","addTextFunc","addDelimiterFunc","getBorder","left","_top","right","bottom","win","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","parseInt","top","getPadding","paddingLeft","paddingTop","paddingRight","paddingBottom","getLineTrim","_trim","border","DOMReady","_parent","insertListener","animationName","__DOMReady","template","props","_frames","classRule","addHandler","insertBefore","Selection","caret","_columnX","DOMSelection","_divs","_clipDiv","_rootDiv","div","_createSelectionDiv","TextRect","rect","TextLine","lineDiv","_lineDiv","TextView","_init","removeHandler","editing","selections","back","_editing","convert","some","selection","sort","b","_docX","extend","tmp","setCaret","getCaret","getAnchor","getOrientedSelection","toString","isEmpty","setPrimary","enabled","primary","update","focused","_hasFocus","visible","_cursorVisible","cursor","_selection","visibility","zIndex","background","setSelection","model","_model","firstNode","_getLineNext","bottomNode","topOffset","bottomOffset","lastNode","_getLinePrevious","_getLineNode","_setDOMSelection","startNode","startOffset","endNode","endOffset","startCaret","_setDOMFullSelection","_line","getNodeOffset","_getWindow","getSelection","sel","createRange","setStart","setEnd","anchorNode","anchorOffset","focusNode","focusOffset","_anchorNode","_anchorOffset","_focusNode","_focusOffset","_ignoreSelect","rangeCount","removeAllRanges","addRange","_cursorDiv","getClientRects","cursorParent","clientRect","getBoundingClientRect","scrollTop","scrollLeft","body","child","createTextRange","moveToElementText","moveStart","endRange","setEndPoint","select","width","height","_fullSelection","viewPad","_getViewPadding","_clientDiv","viewRect","_viewDiv","hd","vd","clipRect","rootpRect","_ignoreDOMSelection","endRect","startRect","r","sel1Div","sel1Left","sel1Top","sel1Right","sel1Bottom","sel3Left","sel3Top","sel3Right","sel3Bottom","sel3Div","abs","sel2Div","_createLine","lineText","textView","onLineStyle","viewStyle","viewLineText","ranges","viewRanges","tabOffset","_createRanges","_metrics","largestFontStyle","ignoreChars","span","oldSpan","oldStyle","oldText","oldEnd","innerHTML","lineWidth","frag","createDocumentFragment","_createSpan","changeStart","_rectsCache","nextSibling","spanEnd","t","styleStart","styleEnd","_createRange","unmergeable","tabSize","_customTabSize","bidiStyle","bidi","unicodeBidi","direction","bidiRange","tabIndex","isBidiEnabled","spacesCount","spaces","isLink","hasLink","_linksVisible","html","ignore","_handleLinkClick","_ensureCreated","_createdDiv","absolute","_getLineBoundingClientRect","lineOffset","lineChild","textNode","nodeLength","_nodeLength","_isRangeRects","fixIE8","moveEnd","_getSelections","_updateDOMSelection","xFactor","screen","logicalXDPI","deviceXDPI","yFactor","logicalYDPI","deviceYDPI","_wrapMode","rects","_getClientRects","element","parentRect","newRects","center","noTrim","lastChild","previousSibling","lastRect","padding","getLineIndex","getOffset","getModelOffset","modelOffset","lineNode","lineNodeOffset","offsetNode","ignored","childText","childOffset","ch","y","hitChild","rangeLeft","rangeTop","rangeRight","rangeBottom","rects1","that","rl","lineRect","mid","move","found","trailing","offsetInLine","newText","q","rangeChild","hitRects","rect1","_lastHitChild","_lastHitOffset","previousOffset","nextOffset","previousChild","nextChild","getNextOffset","unit","_getNextOffset_W3C","_getNextOffset_IE","_isPunctuation","_isWhitespace","lineLength","step","previousPunctuation","previousLetterOrDigit","punctuation","letterOrDigit","updateLinks","replaceChild","addKeyMode","mode","keyModes","_keyModes","_modeAdded","addRuler","ruler","rulers","_rulers","sideIndex","getLocation","_createRuler","_update","computeSize","w","h","clientDiv","clientWidth","_getLine","viewPadding","scrollWidth","from","to","_scroll","_getScroll","_doCopy","_doCut","_destroyView","onDestroy","_theme","_doubleClickSelection","_actions","hasFocus","getActionDescription","actionDescription","getActions","defaultAction","actions","defaultHandler","getBottomIndex","fullyVisible","_getBottomIndex","getBottomPixel","_getClientHeight","getCaretOffset","_getSelection","getClientArea","_getClientWidth","getHorizontalPixel","getLineHeight","_getLineHeight","_getLineIndex","isValidTextPosition","getOffsetAtLocation","bounds","getLinePixel","_getLinePixel","getLocationAtOffset","_doMove","getOptions","_defaultOptions","arg","option","getModel","getRulers","getSelections","getSelectionText","delimiter","_getBaseText","getTopIndex","_getTopIndex","getTopPixel","invokeAction","actionOptions","isDestroyed","onContextMenu","contextMenuEvent","onDragStart","dragEvent","onDrag","onDragEnd","onDragEnter","onDragOver","onDragLeave","onDrop","destroyEvent","onSaving","savingEvent","onInputChanged","inputChangedEvent","lineStyleEvent","onKeyDown","keyEvent","onKeyPress","onKeyUp","onModelChanged","onModelChanging","onModify","modifyEvent","onMouseDown","mouseEvent","onMouseUp","onMouseMove","onMouseOver","onMouseOut","onTouchStart","touchEvent","onTouchMove","onTouchEnd","onOptions","optionsEvent","onSelection","selectionEvent","onScroll","scrollEvent","onVerify","verifyEvent","onFocus","focusEvent","onBlur","blurEvent","_doPaste","redraw","_redrawCount","redrawRulers","redrawLines","divRuler","_getRulerParent","_ruler","rulerChanged","_lineHeight","_resetLineHeight","imeLineIndex","_imeOffset","getOverview","lineChanged","_maxLineIndex","_checkMaxLineIndex","_maxLineWidth","_queueUpdate","redrawRange","removeKeyMode","_modeRemoved","removeRuler","_destroyRuler","resize","_handleResize","setAction","setCaretOffset","show","_setSelection","setHorizontalPixel","pixel","_scrollView","setRedraw","setModel","_modelListener","oldLineCount","oldCharCount","newLineCount","newCharCount","_reset","setOptions","defaultOptions","setSelections","_rangesToSelections","edit","isSingle","_code","_variableLineHeight","_modifyContent","_fixCaret","setTopIndex","topIndex","_scrollViewAnimated","setTopPixel","showSelection","_showCaret","styleChanged","sync","invalid","_updateStyle","_handleRootMouseDown","_cancelCheckSelection","_ignoreEvent","contentEditable","_overlayDiv","draggable","_ignoreBlur","srcElement","stopPropagation","_isW3CEvents","_handleRootMouseUp","_handleBlur","_commitIME","rootDiv","display","_domSelection","domSelection","parentElement","empty","_ignoreFocus","_handleCompositionStart","_imeTimeout","clearTimeout","_imeText","_startIME","_mutationObserver","disconnect","_handleCompositionUpdate","_handleCompositionEnd","_handleContextMenu","_lastMouseButton","_createMouseEvent","screenX","screenY","defaultPrevented","button","_contextMenuOpen","_checkSelectionChange","_pollSelectionChange","_handleCopy","_ignoreCopy","_handleCut","_handleDataModified","_handleDblclick","time","timeStamp","_lastMouseTime","_clickCount","_handleMouse","_handleDragStart","_dragOffset","_isMouseDown","_handleDrag","_handleDragEnd","_dropTarget","dataTransfer","dropEffect","mozUserCancelled","_handleDragEnter","prevent","_handleDragOver","_handleDragLeave","_handleDrop","_handleFocus","_lastTouchOffset","_handleKeyDown","_createKeyEvent","_keyDownPrevented","modifier","_setLinksVisible","_readonly","startIME","_keyDownEvent","_doAction","cancelBubble","returnValue","_handleKeyPress","_doContent","_handleDocKeyUp","_handleKeyUp","block","add","_blockSelection","drag","_setSelectionTo","clientX","clientY","_setGrab","_handleMouseDown","timeDiff","deltaX","_lastMouseX","deltaY","_lastMouseY","sameButton","_clickTime","_clickDist","_handleMouseOver","_animation","_handleMouseOut","_handleMouseMove","inClient","_isClientDiv","changed","_lastMouseMoveX","_lastMouseMoveY","_checkOverlayScroll","leftEdge","topEdge","rightEdge","bottomEdge","_doAutoScroll","_endAutoScroll","pt","clickCount","_createTouchEvent","touches","touchCount","_handleMouseUp","_handleMouseWheel","_noScroll","lineHeight","pixelX","pixelY","wheelDelta","deltaMode","detail","axis","HORIZONTAL_AXIS","denominatorX","denominatorY","deltaTime","_wheelTimeStamp","wheelDeltaX","wheelDeltaY","ceil","linesToScroll","_mouseWheelLine","oldScroll","newScroll","_handlePaste","_ignorePaste","newWidth","newHeight","clientHeight","_rootWidth","_rootHeight","queue","metrics","_calculateMetrics","_handleRulerEvent","divHeight","arrowWidth","contentHeight","trackHeight","onClick","onDblClick","relatedTarget","_handleScroll","_lastScrollTime","oldX","_hScroll","oldY","_vScroll","_handleSelectStart","menuOpen","_getModelOffset","_updateSelectionFromDOM","firstLine","lastLine","_cancelPollSelectionChange","_selPollTimer","retryPoll","_handleSelectionChange","_handleTextInput","getRangeAt","deleteContents","insertNode","nodeText","_getDOMText","lineRemoved","delta","deltaText","deltaStart","deltaEnd","_handleTouchStart","_touchScrollTimer","_vScrollDiv","_hScrollDiv","touch","_touchStartX","_touchStartY","pageY","pageYOffset","pageX","pageXOffset","_touchStartTime","_touching","_handleTouchMove","_touchCurrentX","_touchCurrentY","_touchSpeedX","_touchSpeedY","_handleTouchEnd","removeTab","expandTab","_tabSize","_doBackspace","_expandTab","_doCase","changes","_overwriteMode","_setClipboardText","_doCursorNext","_doCursorPrevious","_doDelete","_doEnd","ctrl","visualIndex","_doEnter","_singleMode","noCursor","_doEscape","_doHome","_doLineDown","wholeLine","lastLineCount","_doLineUp","_doNoop","_doPageDown","pageScroll","caretLine","caretRect","_getBoundsAtOffset","linePixel","scrollLines","verticalMaximum","scrollOffset","_doPageUp","_getClipboardText","_doScroll","_scrollHeight","verticalScrollOffset","selectionHeight","_doSelectAll","_doTab","_tabMode","_doShiftTab","_doOverwriteMode","overwriteMode","_doTabMode","tabMode","_doWrapMode","wrapMode","_autoScroll","_autoScrollDir","_autoScrollX","_autoScrollY","_getBlockSelections","_autoScrollTimer","_autoScrollTimerID","_AUTO_SCROLL_RATE","_calculateLineHeightTimer","calculate","_calculateLHTimer","MAX_TIME","_calculateLineHeight","position","span1","span2","fontStyle","span3","fontWeight","span4","spanRect1","spanRect2","spanRect3","spanRect4","h1","h2","h3","h4","pad","div1","div2","rect2","overflow","w1","w2","wrapWidth","marginWidth","charWidth","_wrapOffset","_marginOffset","lineTrim","_cancelAnimation","_clearSelection","insertText","_scrollDiv","_createActions","noop","shiftTab","_createRulerParent","MozUserSelect","WebkitUserSelect","rulerParent","_marginDiv","rulerWidth","cssFloat","styleFloat","outline","children","sibling","borderWidth","margin","_createView","checkDOMReady","hasChildNodes","WebkitTextSizeAdjust","leftDiv","_leftDiv","viewDiv","rightDiv","_rightDiv","innerRightDiv","_innerRightDiv","scrollDiv","marginDiv","clipDiv","clipScrollDiv","_clipScrollDiv","WebkitTapHighlightColor","_setFullSelection","vScrollDiv","borderColor","borderStyle","borderRadius","backgroundColor","opacity","hScrollDiv","setCapture","overlayDiv","_setWrapMode","_setReadOnly","_setThemeClass","_setTabSize","_setMarginOffset","_hookEvents","parent","scrollAnimation","readonly","fullSelection","singleMode","_setSingleMode","noScroll","_setNoScroll","_setOverwriteMode","blockCursorVisible","_setBlockCursor","marginOffset","wrapOffset","_setWrapOffset","wrappable","undoStack","_setUndoStack","_setTheme","_unhookEvents","_updateTimer","_cursorTimer","_clipboardDiv","blur","getBaseModel","mapOffset","_bottomChild","filter","o1","o2","_getInnerRightWidth","innerRightWidth","innerRightRect","wholeText","clipboardText","clipboardData","getData","__clipboardModule","readText","clipboardDiv","whiteSpace","_getText","noteText","_getTextFromElement","execCommand","ex","childNodes","innerText","newRange","selectNode","oldRanges","_topIndexY","restrictToValidLines","cancelAnimation","isArray","_topChild","_onModelChanging","_onModelChanged","_themeListener","_handlers","grabNode","textModel","deferScroll","deferredHandler","MO","MutationObserver","MozMutationObserver","mutations","observe","subtree","characterData","_hookRulerEvents","_grabControl","_moseMoveClosure","_mouseUpClosure","overlay","_isOverOverlayScroll","pointerEvents","vertical","horizontal","scrollShowing","overlayScrollWidth","_startUndo","_undoStack","_compoundChange","startCompoundChange","_endUndo","endCompoundChange","caretAtEnd","oldStart","owner","_ignoreQueueUpdate","_resetLineWidth","_scrollAnimation","_ensureCaretVisible","writeText","success","setData","setEndBefore","cleanup","releaseCapture","_hadFocus","preserveCursorX","newSelection","oldSelection","down","extent","word","doubleClickLine","init","_blockCursorVisible","_updateBlockCursorVisible","overwrite","cursorDiv","color","readOnly","_updateOverflow","OTabSize","MozTabSize","viewContainerClass","globalThemeClass","_wrappable","wordWrap","allSelection","showOptions","endInclusive","minScroll","hasShowOptions","alwaysScroll","scrollPolicy","flag","viewAnchor","selectionAnchor","viewAnchorOffset","selected","hScrollOnly","needUpdate","hScroll","vScroll","scrollbarWidth","topIndexY","leftWidth","leftRect","scrollHeight","tempLineHeight","totalHeight","totalLineIndex","round","rootWidth","rootHeight","linesPerPage","bottomIndex","bottomHeight","foundBottomIndex","lh","_updateRuler","rightWidth","rightRect","clientHeightNoScroll","clientHeightScroll","oldHScroll","overflowX","clientWidthNoScroll","clientWidthScroll","oldVScroll","overflowY","thumbHeight","trackWidth","thumbWidth","clipLeft","clipTop","clipWidth","clipHeight","clientLeft","clientTop","clipRight","clipBottom","clip","ensureCaretVisible","overview","getRulerStyle","widthDiv","annotation","getWidestAnnotation","annotations","getAnnotations","_oldTrackHeight","_updateStyleSheet","styleText","ProjectionTextModel","baseModel","_projections","_listener","_onChanged","_onChanging","addProjection","projection","projections","_lineIndex","_lineCount","_binarySearch","getProjections","baseOffset","removeProjection","_removeProjection","noEvents","array","projectionLineIndex","lineDelta","projectionOffset","offsetDelta","change","_change","baseStart","baseEnd","rangeStart","rangeEnd","baseText","removed","_expand","modelChangedEvent1","hasChange","modelChangingEvent1","startProjection","endProjection","mapStart","mapEnd","factory","orion","Deferred","run","fn","shift","running","enqueue","runAsync","noReturn","settleDeferred","deferred","listenerResult","listenerThen","then","promise","reject","TypeError","listenerResultCancel","cancel","_parentCancel","resolve","progress","notify","methodName","_reject","_this","_resolve","once","valueThen","valueCancel","thenError","parentCancel","cancelError","onFulfill","onReject","onProgress","process","nextTick","observer","promises","optOnError","onResolve","rejected","when","$","selector","querySelector","$$","querySelectorAll","$$array","either","theNode","Boolean","_getTabIndex","focusableElements","frame","iframe","img","isindex","textarea","nodeName","firstTabbable","lastTabbable","processNodes","nodeType","matches","variableRegEx","nodeValue","pixelValueOf","attrName","intVal","processTextNodes","targetNode","replaceText","processDOMNodes","replaceNodes","replaceNode","addAutoDismiss","excludeNodes","dismissFunction","onclick","autoDismissNodes","autoDismissNode","excludeNodeInDocument","excluded","excludeNode","dismiss","console","message","unhook","removeAutoDismiss","getOffsetParent","offsetParent","setFramesEnabled","enable","frames","keyName","KEY_CODE","createNodes","templateString","newNodes","KEY","BKSPC","TAB","ENTER","SHIFT","CONTROL","ALT","ESCAPE","SPACE","PAGEUP","PAGEDOWN","END","HOME","LEFT","UP","RIGHT","DOWN","INSERT","DEL","COMMAND","mTextView","mProjectionTextModel","lib","Tooltip","editor","_editor","_create","getTooltip","_tooltip","_tooltipDiv","tooltipDiv","_tipShowing","_mouseDownHandler","isVisible","_locked","hide","_scrollHandler","_topPixel","_leftPixel","_mouseMoveHandler","_prevX","_prevY","_isInRect","_outerArea","classList","remove","tooltipInfo","locked","giveFocus","_giveFocus","_processInfo","getTooltipInfo","noContent","_showContents","onHover","_anchorArea","_tooltipArea","clearLock","hover","clearQuickFixes","_tooltipContents","maxWidth","maxHeight","_hoverPromises","info","resolved","_tipRect","newTooltipContents","contents","_renderImmediateInfo","context","computeHoverInfo","hoverPromise","_renderPluginContent","offsetStart","offsetEnd","allowFullWidth","log","stack","newContentsDiv","tooltipArea","_computeAnchorArea","_computeTooltipArea","_computeOuterArea","_setInitialFocus","anchorArea","mappedStart","mappedEnd","_computeRectangleFromOffset","mappedOffset","divBounds","tipRect","image","complete","viewBounds","viewportLeft","viewportTop","viewportWidth","viewportHeight","defWidth","defHeight","spaceBelow","spaceAbove","spaceRight","offsetX","tooltipOffsetX","offsetY","tooltipOffsetY","positionRight","tipRight","positionBottom","tipBottom","activeElement","_isNode","Node","toFocus","xOK","yOK","tv","curLine","maxX","possibleEnd","startPos","endPos","contentsDiv","content","sectionDiv","titleDiv","renderMarkDown","contentDiv","sandbox","srcdoc","_getAnnotationContents","tooltipTheme","contentsView","_contentsView","size","getAnnotationHTML","allAnnotations","inEditor","htmlHolder","renderQuickFixes","newAnnotations","groupAnnotation","newModel","getAnnotationModel","tooltipHTML","em","AnnotationType","FoldingAnnotation","projectionModel","_projectionModel","_expandedHTML","_expandedStyle","expanded","registerType","lineStyling","lastIndexOf","overviewStyle","lineStyle","rangeStyle","AnnotationTypeList","binarySearch","inclusive","AnnotationModel","_annotations","setTextModel","AnnotationStyler","annotationModel","_annotationModel","_onDestroy","_onLineStyle","_onAnnotationModelChanged","_collapsedHTML","_collapsedStyle","_collapse","modifyAnnotation","_collapseImpl","checkOverlaping","_forEachOverlaping","_expandImpl","_recollapse","_projection","ANNOTATION_FOLDING","ANNOTATION_ERROR","ANNOTATION_WARNING","ANNOTATION_TASK","ANNOTATION_BREAKPOINT","ANNOTATION_BOOKMARK","ANNOTATION_CURRENT_BRACKET","ANNOTATION_MATCHING_BRACKET","ANNOTATION_CURRENT_LINE","ANNOTATION_CURRENT_SEARCH","ANNOTATION_MATCHING_SEARCH","ANNOTATION_READ_OCCURRENCE","ANNOTATION_WRITE_OCCURRENCE","ANNOTATION_SELECTED_LINKED_GROUP","ANNOTATION_CURRENT_LINKED_GROUP","ANNOTATION_LINKED_GROUP","ANNOTATION_BLAME","ANNOTATION_CURRENT_BLAME","ANNOTATION_DIFF_ADDED","ANNOTATION_DIFF_DELETED","ANNOTATION_DIFF_MODIFIED","annotationTypes","createAnnotation","getType","addAnnotationType","priority","_annotationTypes","getAnnotationTypePriority","getAnnotationsByType","iter","isAnnotationTypeVisible","removeAnnotationType","addAnnotation","added","getTextModel","_getAnnotationIndex","removeAnnotations","removeAnnotation","replaceAnnotations","startIndex","textModelChangedEvent","_oldStart","_oldEnd","_mergeStyle","_mergeStyleRanges","styleRange","mergedStyle","viewModel","annotationStart","annotationEnd","getPrototypeOf","toArray","o","mTooltip","mAnnotations","objects","BaseEditor","_domNode","domNode","_statusReporter","statusReporter","_title","checkDirty","Editor","_textViewFactory","textViewFactory","_undoStackFactory","undoStackFactory","_textDNDFactory","textDNDFactory","_annotationFactory","annotationFactory","_zoomRulerFactory","zoomRulerFactory","_foldingRulerFactory","foldingRulerFactory","_lineNumberRulerFactory","lineNumberRulerFactory","_contentAssistFactory","contentAssistFactory","_keyBindingFactory","keyBindingFactory","_hoverFactory","hoverFactory","_syntaxHighlighter","syntaxHighlighter","_annotationStyler","_annotationRuler","_lineNumberRuler","_overviewRuler","_zoomRuler","_foldingRuler","_contentAssist","AT","HIGHLIGHT_ERROR_ANNOTATION","uninstall","setDirty","isClean","getTitle","getUndoStack","install","installed","isDirty","_dirty","markClean","onDirtyChanged","dirtyChangedEvent","reportStatus","isAccessible","dirty","_setModelText","setInput","contentsSaved","getAnnotationRuler","getAnnotationRulerVisible","_annotationRulerVisible","getAnnotationStyler","getContentAssist","getFoldingRuler","getFoldingRulerVisible","_foldingRulerVisible","getLineNumberRuler","getLineNumberRulerVisible","_lineNumberRulerVisible","_textView","getZoomRuler","getZoomRulerVisible","_zoomRulerVisible","getOverviewRuler","getTextView","getSourceCodeActions","_sourceCodeActions","getLinkedMode","_linkedMode","getTextActions","_textActions","setAnnotationRulerVisible","setFoldingRulerVisible","textActions","expandAnnotations","setLineNumberRulerVisible","setOverviewRulerVisible","_overviewRulerVisible","setZoomRulerVisible","getStyleAccessor","styleAccessor","styler","getStyler","_expandOffset","caretOffset","moveSelection","_getTooltipInfo","annotationStyler","rangeAnnotations","_highlightCurrentLine","newSelections","oldSelections","getHighlightLines","p1","oldLines","newLines","_currentLineAnnotations","installTextView","createUndoStack","_textDND","createTextDND","contentAssistMode","createContentAssistMode","tooltip","_hover","createHover","mouseDown","lastMouseX","lastMouseY","_hoverTimeout","_updateCursorStatus","linkedMode","sourceCodeActions","addRemoveBookmark","createAnnotationModel","createAnnotationStyler","createAnnotationRulers","annotationRuler","setMultiAnnotationOverlay","overviewRuler","createZoomRuler","createLineNumberRuler","createFoldingRuler","textViewInstalledEvent","uninstallTextView","textViewUninstalledEvent","isStatusActive","_status","languageTools","showAnnotations","types","creatorID","description","showProblems","problems","severity","showOccurrences","occurrences","readAccess","showBlame","blameMarkers","blameRGB","_blameRGB","blameStyle","i1","i2","createGroup","groupType","blame","Message","commitLink","CommitLink","AuthorName","Time","blameMarker","Start","End","blameColor","Shade","groupId","Name","createGroupAnnotation","AuthorImage","showDiffAnnotations","diffs","pos","noFocus","onGotoLine","column","IncrementalFind","_active","_success","_ignoreSelection","_prefix","setActive","_backspace","txt","_forward","Find","_showAll","_visible","_caseInsensitive","_wrap","_wholeWord","_incremental","_regex","_findAfterReplace","_hideAfterFind","_reverse","_start","_end","_timer","_lastString","_listeners","onEditorFocus","_removeCurrentAnnotation","forward","incremental","iterator","findResult","active","tempOptions","getFindString","findString","savedOptions","_startOffset","getStartOffset","_doFind","searchString","showAll","findAfterReplace","hideAfterFind","findCallback","_findCallback","getReplaceString","_savedOptions","pop","_removeAllAnnotations","_processReplaceString","newStr","replaceString","startUndo","_doReplace","endUndo","_replacingAll","_doFindForReplaceAll","_markAllOccurrences","_incrementalDisabled","_findFromModel","noWrap","_find","searchStr","mFind","FindUI","_findInput","_replaceInput","replaceInput","_createContents","findInput","placeholder","_handleInput","group","_createButton","_toggle","close","parentDom","checked","ariaLabel","_checked","handled","ctrlKeyOnly","mFindUI","forEachSelection","compound","noUndo","TextActions","_incrementalFind","_lastEditLocation","SourceCodeActions","contentAssistProposalApplied","_lastEditListener","expandAnnotation","gotoLastEdit","insertOffset","currentOffset","prompt","delimiterLength","lineEndNoDelimiter","delimiterStart","delimiterEnd","list","foundAnnotation","foundAnnotations","spaceTab","removeCount","firstRemoveCount","lastLineStart","autoIndent","autoPairBrackets","handleClosingBracket","autoPairQuotations","indent","prevCharIdx","lineTextBeforeCaret","lineTextAfterCaret","smartIndentation","trimRight","whitespaceBeforeCaret","whitespaceAfterCaret","trimLeft","autoCompleteComments","matchCommentEnd","matchCommentStart","matchCommentDelimiter","prevLine","open","delimiters","getBlockCommentDelimiters","_findEnclosingComment","commentStart","commentEnd","oldLength","newLength","openBracket","closeBracket","autoPairSquareBrackets","autoPairBraces","autoPairParentheses","autoPairAngleBrackets","isClosingBracket","nextChar","quotation","autoPairQuotation","isQuotation","isAlpha","insertQuotation","prevChar","escapePosition","proposal","positions","positionGroups","enterLinkedMode","groups","openPos","closePos","newStart","newEnd","selectedText","comment","getLineCommentDelimiter","uncomment","lineIndices","selStart","selEnd","matchTrailingWhiteSpace","lineStartOffset","matchLength","closingChar","lineNum","setAutoPairParentheses","setAutoPairBraces","setAutoPairSquareBrackets","setAutoPairAngleBrackets","setAutoPairQuotations","setAutoCompleteComments","setSmartIndentation","Change","previousText","CompoundChange","UndoStack","shared","getRedoChanges","getUndoChanges","_doUndoRedo","endSelection","startSelection","compoundChange","_commitUndo","cleanChange","canUndo","canRedo","getSize","_ignoreUndo","_trackUnsavedChanges","_unsavedChanges","_previousChangeType","previousChange","BaseRuler","rulerLocation","rulerOverview","rulerStyle","_location","_overview","_rulerStyle","Ruler","onTextModelChanged","_onTextModelChanged","onAnnotationModelChanged","setAnnotationModel","LineNumberRuler","oddStyle","evenStyle","_oddStyle","_evenStyle","_numOfDigits","_firstLine","AnnotationRuler","OverviewRuler","FoldingRuler","annotationLineStart","annotationLineEnd","visualLineIndex","ls","rulerAnnotation","_mergeAnnotation","_multiAnnotation","_multiAnnotationOverlay","_multiple","setMultiAnnotation","selectionStart","selectionEnd","_findNextAnnotation","annotationType","_currentClickGroup","_setCurrentGroup","_tooltipLineIndex","_curElementBounds","_getAnnotationsAtLineIndex","_getTooltipContents","selectedAnnotation","searchStart","selectedAnnotations","useNextValid","hoverArea","_getOnClickTooltipInfo","annotationLineIndex","currentGroupAnnotation","_currentGroupAnnotation","mapLine","setFirstLine","numOfDigits","fontSize","previousAnnotation","annotationLineCount","mapLineIndex","ZoomRuler","_destroy","rulerTheme","updateWindow","scroll","zoomFactor","zoomView","windowDiv","getProps","zoomPadding","zoomLineHeight","documentHeight","zoomDocumentHeight","zoomClientHeight","windowHeight","toZoom","updateScroll","updateWidth","oldWidth","up","thumbPos","_zoomView","_windowDiv","_scrollListener","_resizeListener","_redrawListener","_optionsListener","_lineListener","TextDND","_dragSelection","_dropOffset","_dropText","_onDragStart","_onDragEnd","_onDragEnter","_onDragOver","_onDrop","effectAllowed","_dropEffect","allowed","LinkedContentAssist","linkedData","_data","LinkedMode","linkedModeModel","exitLinkedMode","selectLinkedGroup","selectedGroupIndex","linkedModeListener","onActivating","_groupContentAssistProvider","setProviders","setProgress","evnt","ignoreVerify","positionChanged","_getPositionChanged","deltaCount","sortedPositions","inside","ansestor","_updateAnnotations","oldOffset","chop","computeProposals","buffer","proposals","linkedstyle","values","val","linkedtitle","unselectable","_sortedPositions","previousModel","parentGroup","nextModel","slf","provider","getPrefix","deactivate","activate","_getModelPositions","_getSortedPositions","mActions","mUndoStack","mRulers","mTextDND","mLinkedMode","KeyBindingsFactory","UndoFactory","LineNumberRulerFactory","FoldingRulerFactory","ZoomRulerFactory","AnnotationFactory","TextDNDFactory","searcher","mFactories","ContentAssist","pageMessage","State","INACTIVE","clearProviders","_textViewListeners","_latestModelChangingEvent","_updateFilterText","isDeactivatingChange","setState","ACTIVE","FILTERING","filterProposals","ContentAssistMode","ContentAssistWidget","widget","selectedIndex","showWidget","autoApply","nextIndex","scrollIndex","setContentAssistMode","createAccessible","textViewListenerAdded","isShowing","_useResizeTimer","_contentAssistMode","_showTooltip","textViewListener","scrollListener","STYLES","hr","emphasis","noemphasis","noemphasis_keyword","noemphasis_title","noemphasis_title_keywords","dfault","_initialCaretOffset","getPrefixStart","proposalText","additionalEdits","providers","autoTriggered","_autoTriggered","isDeactivating","isPriorToInitialCaretOffset","eventType","_mode","onStateChange","setMode","_removeTextViewListeners","_filterText","_computedProposals","_addTextViewListeners","_computeProposals","flatProposalArray","_flatten","handleError","initialize","_providers","providerInfoArray","indentation","_self","providerInfo","ecProvider","editorContext","func","computePrefixFunc","computePrefix","editorContextProvider","getEditorContext","computeContentAssist","getProposals","err","allPromises","foundProposal","setErrorMessage","showWhile","prefixStart","defaultPrefix","prefixText","proposalArray","includedProposals","getRegexp","modifiedFilter","proposalString","activated","_removeExtraUnselectableElements","mappedProposals","keepElement","nextProposal","setEditorContextProvider","_generateProviderId","_idcount","setAutoTriggerEnabled","enableAutoTrigger","_autoTriggerEnabled","_updateAutoTriggerListenerState","setProviderInfoArray","_charTriggersInstalled","charTriggers","getProviders","setStyleAccessor","_styleAccessor","arrayOrObjectArray","reduce","prev","curr","filteredArray","first","last","filteredArrayStyle","firstArrayStyle","_triggerListener","stylesAtOffset","providerInfosToActivate","currentChar","isExcluded","excludedStyles","getStyles","_boundTriggerListener","_triggerListenerInstalled","_textViewListenersAdded","selectNew","newIndex","tipArea","_hideTooltip","newSelected","getProposal","previousCloneNode","preserveCloneThroughScroll","_removeCloneNode","previousSelectedNode","createDiv","itemIndex","_createDisplayNode","contentAssistProposalIndex","simpleName","_createNameNode","nameNode","usingDescription","descriptionNode","tagsNode","_createTagsNode","tags","_stopResizeTimer","_resizeTimer","_startResizeTimer","_cachedResizeBound","bound","tag","cssClass","tagNode","nodeIndex","nodes","offsetTop","offsetHeight","nodeAtIndex","scrollIntoView","_hideTimeout","_fadeTimer","textBounds","parentWidth","parentStyle","nodeStyle","allPadding","parentTop","cloneNode","horizontalOffset","cloneLeft","parentClone","recursiveSetIndex","caretLocation","offsetWidth","leftSide","JSON","stringify","PatternBasedAdapter","grammars","rootId","contentType","_patternManager","PatternManager","_contentType","_unnamedCounter","_patterns","_rootId","grammar","_addRepositoryPatterns","repository","_addPatterns","patterns","Block","typeId","initFn","contentStart","contentEnd","_subBlocks","computeBlocks","TextStylerAccessor","_styler","TextStyler","stylerAdapter","_whitespacesVisible","_highlightCaretLine","_foldingEnabled","_detectTasks","_annotationProviders","_stylerAdapter","setStyler","_accessor","_bracketAnnotations","_onMouseDown","_onSelection","rootBounds","startTime","_rootBlock","createBlock","getContentType","_computeFolding","getBlocks","_computeTasks","createPatternBasedAdapter","blockSpansBeyondEnd","regexEnd","_eolRegex","endIndex","maxBlockCount","results","Infinity","blockPatterns","_findMatch","regexBegin","_updateMatch","resultEnd","endRegex","testPattern","resolvedEndRegex","_substituteCaptureValues","testBlock","subBlocks","computeStyle","fullBlock","contentName","captures","testString","beginCaptures","endCaptures","_getCaptureStyles","newBlock","linePatterns","enclosurePatterns","_initPatterns","languageBlock","_getLanguageBlock","COMMENT_BLOCK","begin","literal","getBlockContentStyleName","getBlockEndStyle","_styles","getBlockFoldBounds","getBlockStartStyle","getBracketMatch","closingName","atStart","_PUNCTUATION_SECTION_BEGIN","_PUNCTUATION_SECTION_END","closingBracket","beginName","endName","COMMENT_LINE","ignoreCaptures","oldLastIndex","substyles","tokenStyle","newStyle","_mergeStyles","verifyBlock","ancestorBlock","parentBlock","searchStartIndex","currentMatch","blocks","testBeforeMatch","initialLastIndex","_linebreakRegex","lineString","indexAdjustment","char","_NEWLINE","_CR","revertIndex","stringIndex","getBlockAtIndex","embeddedNameRegex","getRootBlock","patternManager","getPatterns","initRegex","matchString","_ignoreCaseRegex","_FLAGS","lastBlock","fullStyle","resultStyles","resolvedResult","regexString","_captureReferenceRegex","minimumIndex","regEx","parentId","qualifiedId","_NO_ID","indexCounter","resultObject","include","_processInclude","newPattern","_addPattern","patternId","searchExp","adjustBounds","isRenderingWhitespace","_isRenderingWhitespace","addAnnotationProvider","_findBlock","removeAnnotationProvider","setDetectHyperlinks","setDetectTasks","setFoldingEnabled","setHighlightCaretLine","highlight","setWhitespacesVisible","_add","foldBounds","_createFoldingAnnotation","_findBrackets","bracketMatch","blockStart","blockEnd","_findMatchingBracket","brackets","sign","_getLineStyle","hasCaret","_caretLineStyle","_getStyles","startBlockIndex","startString","endStyles","endString","blockSubstyles","blockStyleName","mergeable","_spliceStyles","_spacePattern","_tabPattern","blockExtended","te","ts","blockCount","tempBlocks","newBlocks","spanningTypeId","tempTe","tempNewBlocks","oldBlocks","eventOldBlocks","eventNewBlocks","redrawStart","redrawEnd","allFolding","doFolding","_updateFolding","providerRemove","providerAdd","bracket","mapBracket","mapCaret","whitespacePattern","rangeIndex","charIndex","endStyle","doNotFold","mProjModel","mEditor","mEditorFeatures","mContentAssist","mTextStyler","getDisplay","getTextFromElement","TEXT_NODE","optionName","character","mergeOptions","attr","item","getParents","getElementsByClassName","getHeight","parents","editors","contentAssistWidget","grammarProvider","loadGrammar","folderName","showFoldingRuler","firstLineIndex","showLinesRuler","showAnnotationRuler","showOverviewRuler","showZoomRuler","noComputeSize","editorNS"],"mappings":"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","sourcesContent":["/**\n * almond 0.2.4 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                //Convert baseName to array, and lop off the last part,\n                //so that . matches that \"directory\" and not name of the baseName's\n                //module. For instance, baseName of \"one/two/three\", maps to\n                //\"one/two/three.js\", but we want the directory, \"one/two\" for\n                //this normalization.\n                baseParts = baseParts.slice(0, baseParts.length - 1);\n\n                name = baseParts.concat(name.split(\"/\"));\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (typeof callback === 'function') {\n\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback.apply(defined[name], args);\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        config = cfg;\n        return req;\n    };\n\n    define = function (name, deps, callback) {\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\ndefine(\"almond\", function(){});\n\n","/**\n * @license RequireJS i18n 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/requirejs/i18n for details\n */\n/*jslint regexp: true */\n/*global require: false, navigator: false, define: false */\n\n/**\n * This plugin handles i18n! prefixed modules. It does the following:\n *\n * 1) A regular module can have a dependency on an i18n bundle, but the regular\n * module does not want to specify what locale to load. So it just specifies\n * the top-level bundle, like \"i18n!nls/colors\".\n *\n * This plugin will load the i18n bundle at nls/colors, see that it is a root/master\n * bundle since it does not have a locale in its name. It will then try to find\n * the best match locale available in that master bundle, then request all the\n * locale pieces for that best match locale. For instance, if the locale is \"en-us\",\n * then the plugin will ask for the \"en-us\", \"en\" and \"root\" bundles to be loaded\n * (but only if they are specified on the master bundle).\n *\n * Once all the bundles for the locale pieces load, then it mixes in all those\n * locale pieces into each other, then finally sets the context.defined value\n * for the nls/colors bundle to be that mixed in locale.\n *\n * 2) A regular module specifies a specific locale to load. For instance,\n * i18n!nls/fr-fr/colors. In this case, the plugin needs to load the master bundle\n * first, at nls/colors, then figure out what the best match locale is for fr-fr,\n * since maybe only fr or just root is defined for that locale. Once that best\n * fit is found, all of its locale pieces need to have their bundles loaded.\n *\n * Once all the bundles for the locale pieces load, then it mixes in all those\n * locale pieces into each other, then finally sets the context.defined value\n * for the nls/fr-fr/colors bundle to be that mixed in locale.\n */\n(function () {\n    'use strict';\n\n    //regexp for reconstructing the master bundle name from parts of the regexp match\n    //nlsRegExp.exec(\"foo/bar/baz/nls/en-ca/foo\") gives:\n    //[\"foo/bar/baz/nls/en-ca/foo\", \"foo/bar/baz/nls/\", \"/\", \"/\", \"en-ca\", \"foo\"]\n    //nlsRegExp.exec(\"foo/bar/baz/nls/foo\") gives:\n    //[\"foo/bar/baz/nls/foo\", \"foo/bar/baz/nls/\", \"/\", \"/\", \"foo\", \"\"]\n    //so, if match[5] is blank, it means this is the top bundle definition.\n    var nlsRegExp = /(^.*(^|\\/)nls(\\/|$))([^\\/]*)\\/?([^\\/]*)/;\n\n    //Helper function to avoid repeating code. Lots of arguments in the\n    //desire to stay functional and support RequireJS contexts without having\n    //to know about the RequireJS contexts.\n    function addPart(locale, master, needed, toLoad, prefix, suffix) {\n        if (master[locale]) {\n            needed.push(locale);\n            if (master[locale] === true || master[locale] === 1) {\n                toLoad.push(prefix + locale + '/' + suffix);\n            }\n        }\n    }\n\n    function addIfExists(req, locale, toLoad, prefix, suffix) {\n        var fullName = prefix + locale + '/' + suffix;\n        if (require._fileExists(req.toUrl(fullName + '.js'))) {\n            toLoad.push(fullName);\n        }\n    }\n\n    /**\n     * Simple function to mix in properties from source into target,\n     * but only if target does not already have a property of the same name.\n     * This is not robust in IE for transferring methods that match\n     * Object.prototype names, but the uses of mixin here seem unlikely to\n     * trigger a problem related to that.\n     */\n    function mixin(target, source, force) {\n        var prop;\n        for (prop in source) {\n            if (source.hasOwnProperty(prop) && (!target.hasOwnProperty(prop) || force)) {\n                target[prop] = source[prop];\n            } else if (typeof source[prop] === 'object') {\n                if (!target[prop] && source[prop]) {\n                    target[prop] = {};\n                }\n                mixin(target[prop], source[prop], force);\n            }\n        }\n    }\n\n    define('i18n',['module'], function (module) {\n        var masterConfig = module.config ? module.config() : {};\n        masterConfig = masterConfig || {};\n\n        return {\n            version: '2.0.4',\n            /**\n             * Called when a dependency needs to be loaded.\n             */\n            load: function (name, req, onLoad, config) {\n                config = config || {};\n\n                if (config.locale) {\n                    masterConfig.locale = config.locale;\n                }\n\n                var masterName,\n                    match = nlsRegExp.exec(name),\n                    prefix = match[1],\n                    locale = match[4],\n                    suffix = match[5],\n                    parts = locale.split(\"-\"),\n                    toLoad = [],\n                    value = {},\n                    i, part, current = \"\";\n\n                //If match[5] is blank, it means this is the top bundle definition,\n                //so it does not have to be handled. Locale-specific requests\n                //will have a match[4] value but no match[5]\n                if (match[5]) {\n                    //locale-specific bundle\n                    prefix = match[1];\n                    masterName = prefix + suffix;\n                } else {\n                    //Top-level bundle.\n                    masterName = name;\n                    suffix = match[4];\n                    locale = masterConfig.locale;\n                    if (!locale) {\n                        locale = masterConfig.locale =\n                            typeof navigator === \"undefined\" ? \"root\" :\n                            (navigator.language ||\n                             navigator.userLanguage || \"root\").toLowerCase();\n                    }\n                    parts = locale.split(\"-\");\n                }\n\n                if (config.isBuild) {\n                    //Check for existence of all locale possible files and\n                    //require them if exist.\n                    toLoad.push(masterName);\n                    addIfExists(req, \"root\", toLoad, prefix, suffix);\n                    for (i = 0; i < parts.length; i++) {\n                        part = parts[i];\n                        current += (current ? \"-\" : \"\") + part;\n                        addIfExists(req, current, toLoad, prefix, suffix);\n                    }\n                                        \n                    if(config.locales) {\n                    \tvar j, k; \n                    \tfor (j = 0; j < config.locales.length; j++) {\n                    \t\tlocale = config.locales[j];\n                    \t\tparts = locale.split(\"-\");\n                    \t\tcurrent = \"\";\n\t                    \tfor (k = 0; k < parts.length; k++) {\n\t\t                        part = parts[k];\n\t\t                        current += (current ? \"-\" : \"\") + part;\n\t\t                        addIfExists(req, current, toLoad, prefix, suffix);\n\t                    \t}\n                    \t}\n                    }\n\n                    req(toLoad, function () {\n                        onLoad();\n                    });\n                } else {\n                    //First, fetch the master bundle, it knows what locales are available.\n                    req([masterName], function (master) {\n                        //Figure out the best fit\n                        var needed = [],\n                            part;\n\n                        //Always allow for root, then do the rest of the locale parts.\n                        addPart(\"root\", master, needed, toLoad, prefix, suffix);\n                        for (i = 0; i < parts.length; i++) {\n                            part = parts[i];\n                            current += (current ? \"-\" : \"\") + part;\n                            addPart(current, master, needed, toLoad, prefix, suffix);\n                        }\n\n                        //Load all the parts missing.\n                        req(toLoad, function () {\n                            var i, partBundle, part;\n                            for (i = needed.length - 1; i > -1 && needed[i]; i--) {\n                                part = needed[i];\n                                partBundle = master[part];\n                                if (partBundle === true || partBundle === 1) {\n                                    partBundle = req(prefix + part + '/' + suffix);\n                                }\n                                mixin(value, partBundle);\n                            }\n\n                            //All done, notify the loader.\n                            onLoad(value);\n                        });\n                    });\n                }\n            }\n        };\n    });\n}());\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/editor/nls/messages',{\n\troot:true\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/editor/nls/root/messages',{//Default message bundle\n\t\"multipleAnnotations\": \"Multiple annotations:\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"line\": \"Line: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"breakpoint\": \"Breakpoint\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"bookmark\": \"Bookmark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"task\": \"Task\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"error\": \"Error\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"warning\": \"Warning\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentSearch\": \"Current Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentLine\": \"Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"matchingBracket\": \"Matching Bracket\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentBracket\": \"Current Bracket\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffAdded\": \"Diff Added Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffDeleted\": \"Diff Deleted Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffModified\": \"Diff Modified Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"lineUp\": \"Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineDown\": \"Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineStart\": \"Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineEnd\": \"Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"charPrevious\": \"Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"charNext\": \"Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"pageUp\": \"Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"pageDown\": \"Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollPageUp\": \"Scroll Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollPageDown\": \"Scroll Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollLineUp\": \"Scroll Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollLineDown\": \"Scroll Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wordPrevious\": \"Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wordNext\": \"Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"textStart\": \"Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"textEnd\": \"Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollTextStart\": \"Scroll Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollTextEnd\": \"Scroll Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"centerLine\": \"Center Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"selectLineUp\": \"Select Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineDown\": \"Select Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWholeLineUp\": \" Select Whole Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWholeLineDown\": \"Select Whole Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineStart\": \"Select Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineEnd\": \"Select Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectCharPrevious\": \"Select Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectCharNext\": \"Select Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectPageUp\": \"Select Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectPageDown\": \"Select Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWordPrevious\": \"Select Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWordNext\": \"Select Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectTextStart\": \"Select Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectTextEnd\": \"Select Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\n\t\"deletePrevious\": \"Delete Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteNext\": \"Delete Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteWordPrevious\": \"Delete Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteWordNext\": \"Delete Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLineStart\": \"Delete Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLineEnd\": \"Delete Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"tab\": \"Insert Tab\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"enter\": \"Insert Line Delimiter\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"enterNoCursor\": \"Insert Line Delimiter\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"escape\": \"Escape\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectAll\": \"Select All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copy\": \"Copy\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"cut\": \"Cut\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"paste\": \"Paste\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"uppercase\": \"To Upper Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lowercase\": \"To Lower Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"capitalize\": \"Capitalize\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"reversecase\" : \"Reverse Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"toggleWrapMode\": \"Toggle Wrap Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleTabMode\": \"Toggle Tab Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleOverwriteMode\": \"Toggle Overwrite Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"committerOnTime\": \"${0} on ${1}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t//Emacs\n\t\"emacs\": \"Emacs\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"exchangeMarkPoint\": \"Exchange Mark and Point\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"setMarkCommand\": \"Set Mark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"clearMark\": \"Clear Mark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"digitArgument\": \"Digit Argument ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"negativeArgument\": \"Negative Argument\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\n\t\"Comment\": \"Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"Flat outline\": \"Flat outline\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindStr\": \"Incremental find: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindStrNotFound\": \"Incremental find: ${0} (not found)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverseStr\": \"Reverse Incremental find: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverseStrNotFound\": \"Reverse Incremental find: ${0} (not found)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findReplace\": \"Find/Replace\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"find\": \"Find...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"undo\": \"Undo\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"redo\": \"Redo\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"cancelMode\": \"Cancel Current Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findNext\": \"Find Next Occurrence\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findPrevious\": \"Find Previous Occurrence\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFind\": \"Incremental Find\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverse\": \"Incremental Find Reverse\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"indentLines\": \"Indent Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"unindentLines\": \"Unindent Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"moveLinesUp\": \"Move Lines Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"moveLinesDown\": \"Move Lines Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copyLinesUp\": \"Copy Lines Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copyLinesDown\": \"Copy Lines Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLines\": \"Delete Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"gotoLine\": \"Goto Line...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"gotoLinePrompty\": \"Goto Line:\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"nextAnnotation\": \"Next Annotation\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"prevAnnotation\": \"Previous Annotation\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"expand\": \"Expand\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"collapse\": \"Collapse\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"expandAll\": \"Expand All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"collapseAll\": \"Collapse All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lastEdit\": \"Last Edit Location\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"trimTrailingWhitespaces\": \"Trim Trailing Whitespaces\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleLineComment\": \"Toggle Line Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"addBlockComment\": \"Add Block Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"removeBlockComment\": \"Remove Block Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"linkedModeEntered\": \"Linked Mode: Enter or ESC to exit\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"linkedModeExited\": \"Linked Mode exited\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"syntaxError\": \"Syntax Error\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"contentAssist\": \"Content Assist\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"noProposals\": \"No proposals found\",\n\t\"computingProposals\": \"Computing content assist proposals...\",\n\t\"lineColumn\": \"Line ${0} : Column ${1}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineColumnOffset\": \"Line ${0} : Column ${1} : Offset ${2}\",\n\t\"multiSelections\": \"${0} selection regions\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t//vi\n\t\"vi\": \"vi\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vimove\": \"(Move)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viyank\": \"(Yank)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"videlete\": \"(Delete)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vichange\": \"(Change)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viLeft\": \"${0} Left\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viRight\": \"${0} Right\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viUp\": \"${0} Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viDown\": \"${0} Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viw\": \"${0} Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vib\": \"${0} Beginning of Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viW\": \"${0} Next Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viB\": \"${0} Beginning of Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vie\": \"${0} End of Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viE\": \"${0} End of Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi$\": \"${0} End of the line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi^_\": \"${0} First non-blank Char Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi+\": \"${0} First Char Next Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi-\": \"${0} First Char Previous Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi|\": \"${0} nth Column in Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viH\": \"${0} Top of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viM\": \"${0} Middle of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viL\": \"${0} Bottom of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi/\": \"${0} Search Forward\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi?\": \"${0} Search Backward\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vin\": \"${0} Next Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viN\": \"${0} Previous Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vif\": \"${0} Search Char Fwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viF\": \"${0} Search Char Bckwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vit\": \"${0} Search Before Char Fwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viT\": \"${0} Search Before Char Bckwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi,\": \"${0} Repeat Reverse Char Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi;\": \"${0} Repeat Char Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viG\": \"${0} Go to Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viycd\": \"${0} Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"via\": \"Append After Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viA\": \"Append to End of Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vii\": \"Insert Before Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viI\": \"Insert at Beginning of Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viO\": \"Insert Line Above\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vio\": \"Insert Line Below\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viR\": \"Begin Overwriting Text\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vis\": \"Substitute a Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viS\": \"Substitute Entire Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viC\": \"Change Text Until Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vip\": \"Paste After Char or Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viP\": \"Paste Before Char or Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viStar\": \"Search Word Under Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"next\": \"Next\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"previous\": \"Previous\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replace\": \"Replace\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replaceAll\": \"Replace All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findWith\": \"Find With\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replaceWith\": \"Replace With\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"caseInsensitive\": \"Aa\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"regex\": \"/.*/\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wholeWord\": \"\\\\b\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"caseInsensitiveTooltip\": \"Toggle Case Insensitive\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"regexTooltip\": \"Toggle Regular Expression\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wholeWordTooltip\": \"Toggle Whole Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"closeTooltip\": \"Close\", //$NON-NLS-1$ //$NON-NLS-0$\n\n\t\"replacingAll\": \"Replacing all...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replacedMatches\": \"Replaced ${0} matches\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"nothingReplaced\": \"Nothing replaced\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"notFound\": \"Not found\" //$NON-NLS-1$ //$NON-NLS-0$\n});\n\n","/*******************************************************************************\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/eventTarget\", [], function() {\n\t/** \n\t * Constructs a new EventTarget object.\n\t * \n\t * @class \n\t * @name orion.editor.EventTarget\n\t */\n\tfunction EventTarget() {\n\t}\n\t/**\n\t * Adds in the event target interface into the specified object.\n\t *\n\t * @param {Object} object The object to add in the event target interface.\n\t */\n\tEventTarget.addMixin = function(object) {\n\t\tvar proto = EventTarget.prototype;\n\t\tfor (var p in proto) {\n\t\t\tif (proto.hasOwnProperty(p)) {\n\t\t\t\tobject[p] = proto[p];\n\t\t\t}\n\t\t}\n\t};\n\tEventTarget.prototype = /** @lends orion.editor.EventTarget.prototype */ {\n\t\t/**\n\t\t * Adds an event listener to this event target.\n\t\t * \n\t\t * @param {String} type The event type.\n\t\t * @param {Function|EventListener} listener The function or the EventListener that will be executed when the event happens. \n\t\t * @param {Boolean} [useCapture=false] <code>true</code> if the listener should be trigged in the capture phase.\n\t\t * \n\t\t * @see orion.editor.EventTarget#removeEventListener\n\t\t */\n\t\taddEventListener: function(type, listener, useCapture) {\n\t\t\tif (!this._eventTypes) { this._eventTypes = {}; }\n\t\t\tvar state = this._eventTypes[type];\n\t\t\tif (!state) {\n\t\t\t\tstate = this._eventTypes[type] = {level: 0, listeners: []};\n\t\t\t}\n\t\t\tvar listeners = state.listeners;\n\t\t\tlisteners.push({listener: listener, useCapture: useCapture});\n\t\t},\n\t\t/**\n\t\t * Dispatches the given event to the listeners added to this event target.\n\t\t * @param {Event} evt The event to dispatch.\n\t\t */\n\t\tdispatchEvent: function(evt) {\n\t\t\tvar type = evt.type;\n\t\t\tthis._dispatchEvent(\"pre\" + type, evt); //$NON-NLS-0$\n\t\t\tthis._dispatchEvent(type, evt);\n\t\t\tthis._dispatchEvent(\"post\" + type, evt); //$NON-NLS-0$\n\t\t},\n\t\t/**\n\t\t * Dispatches the given event to the listeners added to this event target.\n\t\t * @private \n\t\t * @param {String} type The name of the event type to send\n\t\t * @param {Event} evt The event to dispatch.\n\t\t */\n\t\t_dispatchEvent: function(type, evt) {\n\t\t\tvar state = this._eventTypes ? this._eventTypes[type] : null;\n\t\t\tif (state) {\n\t\t\t\tvar listeners = state.listeners;\n\t\t\t\ttry {\n\t\t\t\t\tstate.level++;\n\t\t\t\t\tif (listeners) {\n\t\t\t\t\t\tfor (var i=0, len=listeners.length; i < len; i++) {\n\t\t\t\t\t\t\tif (listeners[i]) {\n\t\t\t\t\t\t\t\tvar l = listeners[i].listener;\n\t\t\t\t\t\t\t\tif (typeof l === \"function\") {\n\t\t\t\t\t\t\t\t\tl.call(this, evt);\n\t\t\t\t\t\t\t\t} else if (l.handleEvent && typeof l.handleEvent === \"function\") {\n\t\t\t\t\t\t\t\t\tl.handleEvent(evt);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tstate.level--;\n\t\t\t\t\tif (state.compact && state.level === 0) {\n\t\t\t\t\t\tfor (var j=listeners.length - 1; j >= 0; j--) {\n\t\t\t\t\t\t\tif (!listeners[j]) {\n\t\t\t\t\t\t\t\tlisteners.splice(j, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (listeners.length === 0) {\n\t\t\t\t\t\t\tdelete this._eventTypes[type];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate.compact = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns whether there is a listener for the specified event type.\n\t\t * \n\t\t * @param {String} type The event type\n\t\t * \n\t\t * @see orion.editor.EventTarget#addEventListener\n\t\t * @see orion.editor.EventTarget#removeEventListener\n\t\t */\n\t\tisListening: function(type) {\n\t\t\tif (!this._eventTypes) { return false; }\n\t\t\treturn this._eventTypes[type] !== undefined;\n\t\t},\t\t\n\t\t/**\n\t\t * Removes an event listener from the event target.\n\t\t * <p>\n\t\t * All the parameters must be the same ones used to add the listener.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} type The event type\n\t\t * @param {Function|EventListener} listener The function or the EventListener that will be executed when the event happens. \n\t\t * @param {Boolean} [useCapture=false] <code>true</code> if the listener should be trigged in the capture phase.\n\t\t * \n\t\t * @see orion.editor.EventTarget#addEventListener\n\t\t */\n\t\tremoveEventListener: function(type, listener, useCapture){\n\t\t\tif (!this._eventTypes) { return; }\n\t\t\tvar state = this._eventTypes[type];\n\t\t\tif (state) {\n\t\t\t\tvar listeners = state.listeners;\n\t\t\t\tfor (var i=0, len=listeners.length; i < len; i++) {\n\t\t\t\t\tvar l = listeners[i];\n\t\t\t\t\tif (l && l.listener === listener && l.useCapture === useCapture) {\n\t\t\t\t\t\tif (state.level !== 0) {\n\t\t\t\t\t\t\tlisteners[i] = null;\n\t\t\t\t\t\t\tstate.compact = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (listeners.length === 0) {\n\t\t\t\t\tdelete this._eventTypes[type];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\treturn {EventTarget: EventTarget};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n *******************************************************************************/\n/*eslint-env browser, amd*/\n/**\n * @name orion.regex\n * @class Utilities for dealing with regular expressions.\n * @description Utilities for dealing with regular expressions.\n */\ndefine(\"orion/regex\", [], function() { //$NON-NLS-0$\n\t/**\n\t * @memberOf orion.regex\n\t * @function\n\t * @static\n\t * @description Escapes regex special characters in the input string.\n\t * @param {String} str The string to escape.\n\t * @returns {String} A copy of <code>str</code> with regex special characters escaped.\n\t */\n\tfunction escape(str) {\n\t\treturn str.replace(/([\\\\$\\^*\\/+?\\.\\(\\)|{}\\[\\]])/g, \"\\\\$&\"); //$NON-NLS-0$\n\t}\n\n\t/**\n\t * @memberOf orion.regex\n\t * @function\n\t * @static\n\t * @description Parses a pattern and flags out of a regex literal string.\n\t * @param {String} str The string to parse. Should look something like <code>\"/ab+c/\"</code> or <code>\"/ab+c/i\"</code>.\n\t * @returns {Object} If <code>str</code> looks like a regex literal, returns an object with properties\n\t * <code><dl>\n\t * <dt>pattern</dt><dd>{String}</dd>\n\t * <dt>flags</dt><dd>{String}</dd>\n\t * </dl></code> otherwise returns <code>null</code>.\n\t */\n\tfunction parse(str) {\n\t\tvar regexp = /^\\s*\\/(.+)\\/([gim]{0,3})\\s*$/.exec(str);\n\t\tif (regexp) {\n\t\t\treturn {\n\t\t\t\tpattern : regexp[1],\n\t\t\t\tflags : regexp[2]\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tescape: escape,\n\t\tparse: parse\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors: IBM Corporation - initial API and implementation\n *******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine('orion/util',[],function() {\n\n\tvar userAgent = navigator.userAgent;\n\tvar isIE = (userAgent.indexOf(\"MSIE\") !== -1 || userAgent.indexOf(\"Trident\") !== -1) ? document.documentMode : undefined; //$NON-NLS-1$ //$NON-NLS-0$\n\tvar isFirefox = parseFloat(userAgent.split(\"Firefox/\")[1] || userAgent.split(\"Minefield/\")[1]) || undefined; //$NON-NLS-1$ //$NON-NLS-0$\n\tvar isOpera = userAgent.indexOf(\"Opera\") !== -1 ? parseFloat(userAgent.split(\"Version/\")[1]) : undefined; //$NON-NLS-0$\n\tvar isChrome = parseFloat(userAgent.split(\"Chrome/\")[1]) || undefined; //$NON-NLS-0$\n\tvar isSafari = userAgent.indexOf(\"Safari\") !== -1 && !isChrome; //$NON-NLS-0$\n\tvar isWebkit = parseFloat(userAgent.split(\"WebKit/\")[1]) || undefined; //$NON-NLS-0$\n\tvar isAndroid = userAgent.indexOf(\"Android\") !== -1; //$NON-NLS-0$\n\tvar isIPad = userAgent.indexOf(\"iPad\") !== -1; //$NON-NLS-0$\n\tvar isIPhone = userAgent.indexOf(\"iPhone\") !== -1; //$NON-NLS-0$\n\tvar isIOS = isIPad || isIPhone;\n\tvar isElectron = userAgent.indexOf(\"Electron\") !== -1; //$NON-NLS-0$\n\tvar isMac = navigator.platform.indexOf(\"Mac\") !== -1; //$NON-NLS-0$\n\tvar isWindows = navigator.platform.indexOf(\"Win\") !== -1; //$NON-NLS-0$\n\tvar isLinux = navigator.platform.indexOf(\"Linux\") !== -1; //$NON-NLS-0$\n\tvar isTouch = typeof document !== \"undefined\" && \"ontouchstart\" in document.createElement(\"input\"); //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\tvar platformDelimiter = isWindows ? \"\\r\\n\" : \"\\n\"; //$NON-NLS-1$ //$NON-NLS-0$\n\n\tfunction formatMessage(msg) {\n\t\tvar args = arguments;\n\t\treturn msg.replace(/\\$\\{([^\\}]+)\\}/g, function(str, index) { return args[(index << 0) + 1]; });\n\t}\n\t\n\tvar XHTML = \"http://www.w3.org/1999/xhtml\"; //$NON-NLS-0$\n\tfunction createElement(document, tagName) {\n\t\tif (document.createElementNS) {\n\t\t\treturn document.createElementNS(XHTML, tagName);\n\t\t}\n\t\treturn document.createElement(tagName);\n\t}\n\tfunction confineDialogTab(firstElement, lastElement) {\n\t\tlastElement.addEventListener(\"keydown\", function(evt) {\n\t\t\tif(evt.keyCode === 9 && !evt.shiftKey) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tfirstElement.focus();\n\t\t\t}\n\t\t});\n\t\tfirstElement.addEventListener(\"keydown\", function(evt) {\n\t\t\tif(evt.keyCode === 9 && evt.shiftKey) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tlastElement.focus();\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tformatMessage: formatMessage,\n\t\t\n\t\tcreateElement: createElement,\n\t\tconfineDialogTab: confineDialogTab,\n\t\t\n\t\t/** Browsers */\n\t\tisIE: isIE,\n\t\tisFirefox: isFirefox,\n\t\tisOpera: isOpera,\n\t\tisChrome: isChrome,\n\t\tisSafari: isSafari,\n\t\tisWebkit: isWebkit,\n\t\tisAndroid: isAndroid,\n\t\tisIPad: isIPad,\n\t\tisIPhone: isIPhone,\n\t\tisIOS: isIOS,\n\t\tisElectron: isElectron,\n\t\t\n\t\t/** OSs */\n\t\tisMac: isMac,\n\t\tisWindows: isWindows,\n\t\tisLinux: isLinux,\n\n\t\t/** Capabilities */\n\t\tisTouch: isTouch,\n\n\t\tplatformDelimiter: platformDelimiter\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textModel\", ['orion/editor/eventTarget', 'orion/regex', 'orion/util'], function(mEventTarget, mRegex, util) {\n\n\t/**\n\t * Constructs a new TextModel with the given text and default line delimiter.\n\t *\n\t * @param {String} [text=\"\"] the text that the model will store\n\t * @param {String} [lineDelimiter=platform delimiter] the line delimiter used when inserting new lines to the model.\n\t *\n\t * @name orion.editor.TextModel\n\t * @class The TextModel is an interface that provides text for the view. Applications may\n\t * implement the TextModel interface to provide a custom store for the view content. The\n\t * view interacts with its text model in order to access and update the text that is being\n\t * displayed and edited in the view. This is the default implementation.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#setModel}\n\t * </p>\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction TextModel(text, lineDelimiter) {\n\t\tthis._lastLineIndex = -1;\n\t\tthis._text = [\"\"];\n\t\tthis._lineOffsets = [0];\n\t\tthis.setText(text);\n\t\tthis.setLineDelimiter(lineDelimiter);\n\t}\n\n\tTextModel.prototype = /** @lends orion.editor.TextModel.prototype */ {\n\t\t/**\n\t\t * Destroys this text model.\n\t\t */\n\t\tdestroy: function() {\n\t\t},\n\t\t/**\n\t\t * @class This object describes the options to use while finding occurrences of a string in a text model.\n\t\t * @name orion.editor.FindOptions\n\t\t *\n\t\t * @property {String} string the search string to be found.\n\t\t * @property {Boolean} [regex=false] whether or not the search string is a regular expression.\n\t\t * @property {Boolean} [wrap=false] whether or not to wrap search.\n\t\t * @property {Boolean} [wholeWord=false] whether or not to search only whole words.\n\t\t * @property {Boolean} [caseInsensitive=false] whether or not search is case insensitive.\n\t\t * @property {Boolean} [reverse=false] whether or not to search backwards.\n\t\t * @property {Number} [start=0] The start offset to start searching\n\t\t * @property {Number} [end=charCount] The end offset of the search. Used to search in a given range.\n\t\t */\n\t\t/**\n\t\t * @class This object represents a find occurrences iterator.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextModel#find}<br/>\n\t\t * </p>\t\t \n\t\t * @name orion.editor.FindIterator\n\t\t * \n\t\t * @property {Function} hasNext Determines whether there are more occurrences in the iterator.\n\t\t * @property {Function} next Returns the next matched range {start,end} in the iterator.\n\t\t */\t\n\t\t/**\n\t\t * Finds occurrences of a string in the text model.\n\t\t *\n\t\t * @param {orion.editor.FindOptions} options the search options\n\t\t * @return {orion.editor.FindIterator} the find occurrences iterator.\n\t\t */\n\t\tfind: function(options) {\n\t\t\tif (this._text.length > 1) {\n\t\t\t\tthis._text = [this._text.join(\"\")];\n\t\t\t}\n\t\t\tvar string = options.string;\n\t\t\tvar regex = options.regex;\n\t\t\tvar pattern = string;\n\t\t\tvar flags = \"\";\n\t\t\tvar caseInsensitive = options.caseInsensitive;\n\t\t\tif (pattern) {\n\t\t\t\tif (regex) {\n\t\t\t\t\tvar parsed = mRegex.parse(pattern);\n\t\t\t\t\tif (parsed) {\n\t\t\t\t\t\tpattern = parsed.pattern;\n\t\t\t\t\t\tflags = parsed.flags;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpattern = string.replace(/([\\\\$\\^*\\/+?\\.\\(\\)|{}\\[\\]])/g, \"\\\\$&\"); //$NON-NLS-0$\n\t\t\t\t\t/*\n\t\t\t\t\t* Bug in JS RegEx. In a Turkish locale, dotless i (u0131) capitalizes to I (u0049) and i (u0069) \n\t\t\t\t\t* capitalizes to dot I (u0130). The JS RegEx does not match correctly the Turkish i's in case\n\t\t\t\t\t* insensitive mode. The fix is to detect the presence of Turkish i's in the search pattern and \n\t\t\t\t\t* to modify the pattern to search for both upper and lower case.\n\t\t\t\t\t*/\n\t\t\t\t\tif (caseInsensitive) {\n\t\t\t\t\t\tpattern = pattern.replace(/[iI\\u0130\\u0131]/g, \"[Ii\\u0130\\u0131]\"); //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar current = null, skip;\n\t\t\tif (pattern) {\n\t\t\t\tvar reverse = options.reverse;\n\t\t\t\tvar wrap = options.wrap;\n\t\t\t\tvar wholeWord = options.wholeWord;\n\t\t\t\tvar start = options.start || 0;\n\t\t\t\tvar end = options.end;\n\t\t\t\tvar isRange = end !== null && end !== undefined;\n\t\t\t\tif (flags.indexOf(\"g\") === -1) { flags += \"g\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (flags.indexOf(\"m\") === -1) { flags += \"m\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (caseInsensitive) {\n\t\t\t\t\tif (flags.indexOf(\"i\") === -1) { flags += \"i\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tif (wholeWord) {\n\t\t\t\t\tpattern = \"\\\\b\" + pattern + \"\\\\b\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tvar text = this._text[0], result, lastIndex, offset = 0;\n\t\t\t\tif (isRange) {\n\t\t\t\t\tvar s = start < end ? start : end;\n\t\t\t\t\tvar e = start < end ? end : start;\n\t\t\t\t\ttext = text.substring(s, e);\n\t\t\t\t\toffset = s;\n\t\t\t\t}\n\t\t\t\tvar re = new RegExp(pattern, flags);\n\t\t\t\tif (reverse) {\n\t\t\t\t\tskip = function() {\n\t\t\t\t\t\tvar match = null;\n\t\t\t\t\t\tre.lastIndex = 0;\n\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\tlastIndex = re.lastIndex;\n\t\t\t\t\t\t\tresult = re.exec(text);\n\t\t\t\t\t\t\tif (lastIndex === re.lastIndex) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\tif (result.index + offset < start) {\n\t\t\t\t\t\t\t\t\tmatch = {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!wrap || match) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstart = text.length + offset;\n\t\t\t\t\t\t\t\t\tmatch = {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (match) { start = match.start; }\n\t\t\t\t\t\treturn match;\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (!isRange) {\n\t\t\t\t\t\tre.lastIndex = start;\n\t\t\t\t\t}\n\t\t\t\t\tskip = function() {\n\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\tlastIndex = re.lastIndex;\n\t\t\t\t\t\t\tresult = re.exec(text);\n\t\t\t\t\t\t\tif (lastIndex === re.lastIndex) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\treturn {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (lastIndex !== 0) {\n\t\t\t\t\t\t\t\tif (wrap) {\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tcurrent = skip();\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t/**\n\t\t\t\t * @callback \n\t\t\t\t */\n\t\t\t\tnext: function() {\n\t\t\t\t\tvar result = current;\n\t\t\t\t\tif (result) { current = skip(); }\n\t\t\t\t\treturn result;\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * @callback \n\t\t\t\t */\n\t\t\t\thasNext: function() {\n\t\t\t\t\treturn current !== null;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Returns the number of characters in the model.\n\t\t *\n\t\t * @returns {Number} the number of characters in the model.\n\t\t */\n\t\tgetCharCount: function() {\n\t\t\tvar count = 0;\n\t\t\tfor (var i = 0; i<this._text.length; i++) {\n\t\t\t\tcount += this._text[i].length;\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * Returns the text of the line at the given index.\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>null</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @param {Boolean} [includeDelimiter=false] whether or not to include the line delimiter. \n\t\t * @returns {String} the line text or <code>null</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineAtOffset\n\t\t */\n\t\tgetLine: function(lineIndex, includeDelimiter) {\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar start = this._lineOffsets[lineIndex];\n\t\t\tif (lineIndex + 1 < lineCount) {\n\t\t\t\tvar text = this.getText(start, this._lineOffsets[lineIndex + 1]);\n\t\t\t\tif (includeDelimiter) {\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\t\t\t\tvar end = text.length, c;\n\t\t\t\twhile (((c = text.charCodeAt(end - 1)) === 10) || (c === 13)) {\n\t\t\t\t\tend--;\n\t\t\t\t}\n\t\t\t\treturn text.substring(0, end);\n\t\t\t} else {\n\t\t\t\treturn this.getText(start); \n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns the line index at the given character offset.\n\t\t * <p>\n\t\t * The valid offsets are 0 to char count inclusive. The line index for\n\t\t * char count is <code>line count - 1</code>. Returns <code>-1</code> if\n\t\t * the offset is out of range.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} offset a character offset.\n\t\t * @returns {Number} the zero based line index or <code>-1</code> if out of range.\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\tvar charCount = this.getCharCount();\n\t\t\tif (!(0 <= offset && offset <= charCount)) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (offset === charCount) {\n\t\t\t\treturn lineCount - 1; \n\t\t\t}\n\t\t\tvar lineStart, lineEnd;\n\t\t\tvar index = this._lastLineIndex;\n\t\t\tif (0 <= index && index < lineCount) {\n\t\t\t\tlineStart = this._lineOffsets[index];\n\t\t\t\tlineEnd = index + 1 < lineCount ? this._lineOffsets[index + 1] : charCount;\n\t\t\t\tif (lineStart <= offset && offset < lineEnd) {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar high = lineCount;\n\t\t\tvar low = -1;\n\t\t\twhile (high - low > 1) {\n\t\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\t\tlineStart = this._lineOffsets[index];\n\t\t\t\tlineEnd = index + 1 < lineCount ? this._lineOffsets[index + 1] : charCount;\n\t\t\t\tif (offset <= lineStart) {\n\t\t\t\t\thigh = index;\n\t\t\t\t} else if (offset < lineEnd) {\n\t\t\t\t\thigh = index;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tlow = index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastLineIndex = high;\n\t\t\treturn high;\n\t\t},\n\t\t/**\n\t\t * Returns the number of lines in the model.\n\t\t * <p>\n\t\t * The model always has at least one line.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the number of lines.\n\t\t */\n\t\tgetLineCount: function() {\n\t\t\treturn this._lineOffsets.length;\n\t\t},\n\t\t/**\n\t\t * Returns the line delimiter that is used by the view\n\t\t * when inserting new lines. New lines entered using key strokes \n\t\t * and paste operations use this line delimiter.\n\t\t *\n\t\t * @return {String} the line delimiter that is used by the view when inserting new lines.\n\t\t */\n\t\tgetLineDelimiter: function() {\n\t\t\treturn this._lineDelimiter;\n\t\t},\n\t\t/**\n\t\t * Returns the end character offset for the given line. \n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that when the line delimiter is included, the \n\t\t * offset is either the start offset of the next line or char count. When the line delimiter is\n\t\t * not included, the offset is the offset of the line delimiter.\n\t\t * </p>\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>-1</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @param {Boolean} [includeDelimiter=false] whether or not to include the line delimiter. \n\t\t * @return {Number} the line end offset or <code>-1</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineStart\n\t\t */\n\t\tgetLineEnd: function(lineIndex, includeDelimiter) {\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (lineIndex + 1 < lineCount) {\n\t\t\t\tvar end = this._lineOffsets[lineIndex + 1];\n\t\t\t\tif (includeDelimiter) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tvar text = this.getText(Math.max(this._lineOffsets[lineIndex], end - 2), end);\n\t\t\t\tvar i = text.length, c;\n\t\t\t\twhile (((c = text.charCodeAt(i - 1)) === 10) || (c === 13)) {\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t\treturn end - (text.length - i);\n\t\t\t} else {\n\t\t\t\treturn this.getCharCount();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns the start character offset for the given line.\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>-1</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @return {Number} the line start offset or <code>-1</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineEnd\n\t\t */\n\t\tgetLineStart: function(lineIndex) {\n\t\t\tif (!(0 <= lineIndex && lineIndex < this.getLineCount())) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn this._lineOffsets[lineIndex];\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that character at the end offset\n\t\t * is not included in the returned text.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the zero based start offset of text range.\n\t\t * @param {Number} [end=char count] the zero based end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextModel#setText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = this.getCharCount(); }\n\t\t\tif (start === end) { return \"\"; }\n\t\t\tvar offset = 0, chunk = 0, length;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (start <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar firstOffset = offset;\n\t\t\tvar firstChunk = chunk;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (end <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar lastOffset = offset;\n\t\t\tvar lastChunk = chunk;\n\n\t\t\t// error check for invalid chunks of text\n\t\t\tif (firstChunk >= this._text.length || lastChunk >= this._text.length || firstChunk > lastChunk) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\t\n\t\t\tif (firstChunk === lastChunk) {\n\t\t\t\treturn this._text[firstChunk].substring(start - firstOffset, end - lastOffset);\n\t\t\t}\n\t\t\tvar beforeText = this._text[firstChunk].substring(start - firstOffset);\n\t\t\tvar afterText = this._text[lastChunk].substring(0, end - lastOffset);\n\t\t\treturn beforeText + this._text.slice(firstChunk+1, lastChunk).join(\"\") + afterText; \n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the text is about to change.\n\t\t * <p>\n\t\t * This notification is intended to be used only by the view. Application clients should\n\t\t * use {@link orion.editor.TextView#event:onModelChanging}.\n\t\t * </p>\n\t\t * <p>\n\t\t * NOTE: This method is not meant to called directly by application code. It is called internally by the TextModel\n\t\t * as part of the implementation of {@link #setText}. This method is included in the public API for documentation\n\t\t * purposes and to allow integration with other toolkit frameworks.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.ModelChangingEvent} modelChangingEvent the changing event\n\t\t */\n\t\tonChanging: function(modelChangingEvent) {\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the text has changed.\n\t\t * <p>\n\t\t * This notification is intended to be used only by the view. Application clients should\n\t\t * use {@link orion.editor.TextView#event:onModelChanged}.\n\t\t * </p>\n\t\t * <p>\n\t\t * NOTE: This method is not meant to called directly by application code. It is called internally by the TextModel\n\t\t * as part of the implementation of {@link #setText}. This method is included in the public API for documentation\n\t\t * purposes and to allow integration with other toolkit frameworks.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.ModelChangedEvent} modelChangedEvent the changed event\n\t\t */\n\t\tonChanged: function(modelChangedEvent) {\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Sets the line delimiter that is used by the view\n\t\t * when new lines are inserted in the model due to key\n\t\t * strokes and paste operations. The line delimiter of\n\t\t * existing lines are unchanged unless the to <code>all</code>\n\t\t * argument is <code>true</code>.\n\t\t * <p>\n\t\t * If lineDelimiter is \"auto\", the delimiter is computed to be\n\t\t * the first delimiter found in the current text. If lineDelimiter\n\t\t * is undefined or if there are no delimiters in the current text, the\n\t\t * platform delimiter is used.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} lineDelimiter the line delimiter that is used by the view when inserting new lines.\n\t\t * @param {Boolean} [all=false] whether or not the delimiter of existing lines are changed.\n\t\t */\n\t\tsetLineDelimiter: function(lineDelimiter, all) {\n\t\t\tif (lineDelimiter === \"auto\") {\n\t\t\t\tlineDelimiter = undefined;\n\t\t\t\tif (this.getLineCount() > 1) {\n\t\t\t\t\tlineDelimiter = this.getText(this.getLineEnd(0), this.getLineEnd(0, true));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lineDelimiter = lineDelimiter ? lineDelimiter : util.platformDelimiter;\n\t\t\tif (all) {\n\t\t\t\tvar lineCount = this.getLineCount();\n\t\t\t\tif (lineCount > 1) {\n\t\t\t\t\tvar lines = new Array(lineCount);\n\t\t\t\t\tfor (var i=0; i<lineCount; i++) {\n\t\t\t\t\t\tlines[i] = this.getLine(i);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setText(lines.join(this._lineDelimiter));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that the character at the \n\t\t * end offset is not replaced.\n\t\t * </p>\n\t\t * <p>\n\t\t * The text model must notify the listeners before and after the\n\t\t * the text is changed by calling {@link #onChanging} and {@link #onChanged}\n\t\t * respectively. \n\t\t * </p>\n\t\t *\n\t\t * @param {String} [text=\"\"] the new text.\n\t\t * @param {Number} [start=0] the zero based start offset of text range.\n\t\t * @param {Number} [end=char count] the zero based end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getText\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tif (text === undefined) { text = \"\"; }\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = this.getCharCount(); }\n\t\t\tif (start === end && text === \"\") { return; }\n\t\t\tvar startLine = this.getLineAtOffset(start);\n\t\t\tvar endLine = this.getLineAtOffset(end);\n\t\t\tvar eventStart = start;\n\t\t\tvar removedCharCount = end - start;\n\t\t\tvar removedLineCount = endLine - startLine;\n\t\t\tvar addedCharCount = text.length;\n\t\t\tvar addedLineCount = 0;\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\t\n\t\t\tvar cr = 0, lf = 0, index = 0;\n\t\t\tvar newLineOffsets = [];\n\t\t\twhile (true) {\n\t\t\t\tif (cr !== -1 && cr <= index) { cr = text.indexOf(\"\\r\", index); } //$NON-NLS-0$\n\t\t\t\tif (lf !== -1 && lf <= index) { lf = text.indexOf(\"\\n\", index); } //$NON-NLS-0$\n\t\t\t\tif (lf === -1 && cr === -1) { break; }\n\t\t\t\tif (cr !== -1 && lf !== -1) {\n\t\t\t\t\tif (cr + 1 === lf) {\n\t\t\t\t\t\tindex = lf + 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindex = (cr < lf ? cr : lf) + 1;\n\t\t\t\t\t}\n\t\t\t\t} else if (cr !== -1) {\n\t\t\t\t\tindex = cr + 1;\n\t\t\t\t} else {\n\t\t\t\t\tindex = lf + 1;\n\t\t\t\t}\n\t\t\t\tnewLineOffsets.push(start + index);\n\t\t\t\taddedLineCount++;\n\t\t\t}\n\t\t\n\t\t\tvar modelChangingEvent = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: text,\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\t\n\t\t\t//TODO this should be done the loops below to avoid getText()\n\t\t\tif (newLineOffsets.length === 0) {\n\t\t\t\tvar startLineOffset = this.getLineStart(startLine), endLineOffset;\n\t\t\t\tif (endLine + 1 < lineCount) {\n\t\t\t\t\tendLineOffset = this.getLineStart(endLine + 1);\n\t\t\t\t} else {\n\t\t\t\t\tendLineOffset = this.getCharCount();\n\t\t\t\t}\n\t\t\t\tif (start !== startLineOffset) {\n\t\t\t\t\ttext = this.getText(startLineOffset, start) + text;\n\t\t\t\t\tstart = startLineOffset;\n\t\t\t\t}\n\t\t\t\tif (end !== endLineOffset) {\n\t\t\t\t\ttext = text + this.getText(end, endLineOffset);\n\t\t\t\t\tend = endLineOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar changeCount = addedCharCount - removedCharCount;\n\t\t\tfor (var j = startLine + removedLineCount + 1; j < lineCount; j++) {\n\t\t\t\tthis._lineOffsets[j] += changeCount;\n\t\t\t}\n\t\t\t\n\t\t\t/*\n\t\t\t* Feature in Chrome.  Chrome exceeds the maximum call stack when calling splice\n\t\t\t* around 62k arguments. The limit seems to be higher on IE (250K) and Firefox (450k).\n\t\t\t* The fix is to break the splice in junks of 50k.\n\t\t\t*/\n\t\t\tvar SPLICE_LIMIT = 50000;\n\t\t\tvar limit = SPLICE_LIMIT, args;\n\t\t\tif (newLineOffsets.length < limit) {\n\t\t\t\targs = [startLine + 1, removedLineCount].concat(newLineOffsets);\n\t\t\t\tArray.prototype.splice.apply(this._lineOffsets, args);\n\t\t\t} else {\n\t\t\t\tindex = startLine + 1;\n\t\t\t\tthis._lineOffsets.splice(index, removedLineCount);\n\t\t\t\tfor (var k = 0; k < newLineOffsets.length; k += limit) {\n\t\t\t\t\targs = [index, 0].concat(newLineOffsets.slice(k, Math.min(newLineOffsets.length, k + limit)));\n\t\t\t\t\tArray.prototype.splice.apply(this._lineOffsets, args);\n\t\t\t\t\tindex += limit;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar offset = 0, chunk = 0, length;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (start <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar firstOffset = offset;\n\t\t\tvar firstChunk = chunk;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (end <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar lastOffset = offset;\n\t\t\tvar lastChunk = chunk;\n\t\t\tvar firstText = this._text[firstChunk];\n\t\t\tvar lastText = this._text[lastChunk];\n\t\t\tvar beforeText = firstText.substring(0, start - firstOffset);\n\t\t\tvar afterText = lastText.substring(end - lastOffset);\n\t\t\tvar params = [firstChunk, lastChunk - firstChunk + 1];\n\t\t\tif (beforeText) { params.push(beforeText); }\n\t\t\tif (text) { params.push(text); }\n\t\t\tif (afterText) { params.push(afterText); }\n\t\t\tArray.prototype.splice.apply(this._text, params);\n\t\t\tif (this._text.length === 0) { this._text = [\"\"]; }\n\t\t\t\n\t\t\tvar modelChangedEvent = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent);\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(TextModel.prototype);\n\t\n\treturn {TextModel: TextModel};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/keyBinding\", ['orion/util'], function(util) { //$NON-NLS-1$ //$NON-NLS-0$\n\n    /**\n\t * @class A KeyBinding is an interface used to define keyboard shortcuts.\n\t * @name orion.KeyBinding\n\t * \n\t * @property {Function} match The function to match events.\n\t * @property {Function} equals The funtion to compare to key bindings.\n\t *\n\t * @see orion.KeyStroke\n\t * @see orion.KeySequence\n\t */\n\n\t/**\n\t * Constructs a new key stroke with the given key code, modifiers and event type.\n\t * \n\t * @param {String|Number} keyCode the key code.\n\t * @param {Boolean} mod1 the primary modifier (usually Command on Mac and Control on other platforms).\n\t * @param {Boolean} mod2 the secondary modifier (usually Shift).\n\t * @param {Boolean} mod3 the third modifier (usually Alt).\n\t * @param {Boolean} mod4 the fourth modifier (usually Control on the Mac).\n\t * @param {String} type the type of event that the keybinding matches; either \"keydown\" or \"keypress\".\n\t * \n\t * @class A KeyStroke represents of a key code and modifier state that can be triggered by the user using the keyboard.\n\t * @name orion.KeyStroke\n\t * \n\t * @property {String|Number} keyCode The key code.\n\t * @property {Boolean} mod1 The primary modifier (usually Command on Mac and Control on other platforms).\n\t * @property {Boolean} mod2 The secondary modifier (usually Shift).\n\t * @property {Boolean} mod3 The third modifier (usually Alt).\n\t * @property {Boolean} mod4 The fourth modifier (usually Control on the Mac).\n\t * @property {String} [type=keydown] The type of event that the keybinding matches; either \"keydown\" or \"keypress\"\n\t *\n\t * @see orion.editor.TextView#setKeyBinding\n\t */\n\tfunction KeyStroke (keyCode, mod1, mod2, mod3, mod4, type) {\n\t\tthis.type = type || \"keydown\"; //$NON-NLS-0$\n\t\tif (typeof(keyCode) === \"string\" && this.type === \"keydown\") { //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\tthis.keyCode = keyCode.toUpperCase().charCodeAt(0);\n\t\t} else {\n\t\t\tthis.keyCode = keyCode;\n\t\t}\n\t\tthis.mod1 = mod1 !== undefined && mod1 !== null ? mod1 : false;\n\t\tthis.mod2 = mod2 !== undefined && mod2 !== null ? mod2 : false;\n\t\tthis.mod3 = mod3 !== undefined && mod3 !== null ? mod3 : false;\n\t\tthis.mod4 = mod4 !== undefined && mod4 !== null ? mod4 : false;\n\t}\n\tKeyStroke.prototype = /** @lends orion.KeyStroke.prototype */ {\n\t\tgetKeys: function() {\n\t\t\treturn [this];\n\t\t},\n\t\t/**\n\t\t * Determines either this key stroke matches the specifed event.  It can match either a\n\t\t * a whole sequence of key events or a single key event at a specified index.\n\t\t * <p>\n\t\t * <code>KeyStroke</code> only matches single key events. <code>KeySequence</code> handles\n\t\t * matching a sequence of events.\n\t\t * </p>\n\t\t * TODO explain this better\n\t\t * \n\t\t * @param {DOMEvent|DOMEvent[]} e the key event or list of events to match.\n\t\t * @param index the key event to match.\n\t\t * @returns {Boolean} <code>true</code> whether the key binding matches the key event.\n\t\t *\n\t\t * @see orion.KeySequence#match\n\t\t */\n\t\tmatch: function (e, index) {\n\t\t\tif (index !== undefined) {\n\t\t\t\tif (index !== 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e instanceof Array) {\n\t\t\t\t\tif (e.length > 1) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\te = e[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.type !== this.type) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (this.keyCode === e.keyCode || this.keyCode === String.fromCharCode(util.isOpera ? e.which : (e.charCode !== undefined ? e.charCode : e.keyCode))) {\n\t\t\t\tvar mod1 = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\t\tif (this.mod1 !== mod1) { return false; }\n\t\t\t\tif (this.type === \"keydown\") { //$NON-NLS-0$\n\t\t\t\t\tif (this.mod2 !== e.shiftKey) { return false; }\n\t\t\t\t}\n\t\t\t\tif (this.mod3 !== e.altKey) { return false; }\n\t\t\t\tif (util.isMac && this.mod4 !== e.ctrlKey) { return false; }\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Returns whether this key stroke is the same as the given parameter.\n\t\t * \n\t\t * @param {orion.KeyBinding} kb the key binding to compare with.\n\t\t * @returns {Boolean} whether or not the parameter and the receiver describe the same key binding.\n\t\t */\n\t\tequals: function(kb) {\n\t\t\tif (!kb) { return false; }\n\t\t\tif (this.keyCode !== kb.keyCode) { return false; }\n\t\t\tif (this.mod1 !== kb.mod1) { return false; }\n\t\t\tif (this.mod2 !== kb.mod2) { return false; }\n\t\t\tif (this.mod3 !== kb.mod3) { return false; }\n\t\t\tif (this.mod4 !== kb.mod4) { return false; }\n\t\t\tif (this.type !== kb.type) { return false; }\n\t\t\treturn true;\n\t\t} \n\t};\n\t\n\t/**\n\t * Constructs a new key sequence with the given key strokes.\n\t * \n\t * @param {orion.KeyStroke[]} keys the key strokes for this sequence.\n\t * \n\t * @class A KeySequence represents of a list of key codes and a modifiers state that can be triggered by the user using the keyboard.\n\t * @name orion.KeySequence\n\t * \n\t * @property {orion.KeyStroke[]} keys the list of key strokes.\n\t *\n\t * @see orion.editor.TextView#setKeyBinding\n\t */\n\tfunction KeySequence (keys) {\n\t\tthis.keys = keys;\n\t}\n\tKeySequence.prototype = /** @lends orion.KeySequence.prototype */ {\n\t\tgetKeys: function() {\n\t\t\treturn this.keys.slice(0);\n\t\t},\n\t\tmatch: function (e, index) {\n\t\t\tvar keys = this.keys;\n\t\t\tif (index !== undefined) {\n\t\t\t\tif (index > keys.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (keys[index].match(e)) {\n\t\t\t\t\tif (index === keys.length - 1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn index + 1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tif (!(e instanceof Array)) {\n\t\t\t\t\te = [e];\n\t\t\t\t}\n\t\t\t\tif (e.length > keys.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar i;\n\t\t\t\tfor (i = 0; i < e.length; i++) {\n\t\t\t\t\tif (!keys[i].match(e[i])) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (i === keys.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns whether this key sequence is the same as the given parameter.\n\t\t * \n\t\t * @param {orion.KeyBinding|orion.KeySequence} kb the key binding to compare with.\n\t\t * @returns {Boolean} whether or not the parameter and the receiver describe the same key binding.\n\t\t */\n\t\tequals: function(kb) {\n\t\t\tif (!kb.keys) { return false; }\n\t\t\tif (kb.keys.length !== this.keys.length) { return false; }\n\t\t\tfor (var i=0; i<kb.keys.length; i++) {\n\t\t\t\tif (!kb.keys[i].equals(this.keys[i])) { return false; }\n\t\t\t}\n\t\t\treturn true;\n\t\t}\t\n\t};\n\t\n\treturn {\n\t\tKeyBinding: KeyStroke, // for backwards compatibility\n\t\tKeyStroke: KeyStroke,\n\t\tKeySequence: KeySequence\n\t};\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/keyModes\", [ //$NON-NLS-0$\r\n\t\t\"orion/keyBinding\", //$NON-NLS-0$\r\n\t\t\"orion/util\" //$NON-NLS-0$\r\n], function(mKeyBinding, util) {\r\n\r\n\tfunction KeyMode(view) {\r\n\t\tif (!view) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._view = view;\r\n\t\tthis._keyBindings = this.createKeyBindings();\r\n\t\tthis._keyBindingIndex = 0;\r\n\t}\r\n\tKeyMode.prototype = /** @lends orion.editor.KeyMode.prototype */ {\r\n\t\tcreateKeyBindings: function () {\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\t/**\r\n\t\t * Returns all the key bindings associated to the given action ID.\r\n\t\t *\r\n\t\t * @param {String} actionID the action ID.\r\n\t\t * @returns {orion.KeyBinding[]} the array of key bindings associated to the given action ID.\r\n\t\t *\r\n\t\t * @see orion.editor.KeyModesetKeyBinding\r\n\t\t * @see orion.editor.KeyModesetAction\r\n\t\t */\r\n\t\tgetKeyBindings: function (actionID) {\r\n\t\t\tvar result = [];\r\n\t\t\tvar keyBindings = this._keyBindings;\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tif (keyBindings[i].actionID === actionID) {\r\n\t\t\t\t\tresult.push(keyBindings[i].keyBinding);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetView: function() {\r\n\t\t\treturn this._view;\r\n\t\t},\r\n\t\tisActive: function () {\r\n\t\t\treturn this._view.getKeyModes().indexOf(this) !== -1;\r\n\t\t},\r\n\t\tmatch: function(e) {\r\n\t\t\tif (e.type === \"keydown\") { //$NON-NLS-0$\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\tcase 16: /* Shift */\r\n\t\t\t\t\tcase 17: /* Control */\r\n\t\t\t\t\tcase 18: /* Alt */\r\n\t\t\t\t\tcase 91: /* Command */\r\n\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar keyBindingIndex = this._keyBindingIndex;\r\n\t\t\tvar keyBindings = this._matchingKeyBindings || this._keyBindings;\r\n\t\t\tvar matchingKeyBindings = [];\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tvar kb = keyBindings[i];\r\n\t\t\t\tvar keyBinding = kb.keyBinding;\r\n\t\t\t\tvar match = keyBinding.match(e, keyBindingIndex);\r\n\t\t\t\tif (match === true) {\r\n\t\t\t\t\tthis._keyBindingIndex = 0;\r\n\t\t\t\t\tthis._matchingKeyBindings = null;\r\n\t\t\t\t\treturn kb.actionID;\r\n\t\t\t\t} else if (typeof match === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t\tmatchingKeyBindings.push(kb);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (matchingKeyBindings.length === 0) {\r\n\t\t\t\tthis._keyBindingIndex = 0;\r\n\t\t\t\tthis._matchingKeyBindings = null;\r\n\t\t\t} else {\r\n\t\t\t\tthis._keyBindingIndex++;\r\n\t\t\t\tthis._matchingKeyBindings = matchingKeyBindings;\r\n\t\t\t\treturn \"noop\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Associates a key binding with the given action ID. Any previous\r\n\t\t * association with the specified key binding is overwriten. If the\r\n\t\t * action ID is <code>null</code>, the association is removed.\r\n\t\t * \r\n\t\t * @param {orion.KeyBinding} keyBinding the key binding\r\n\t\t * @param {String} actionID the action ID\r\n\t\t */\r\n\t\tsetKeyBinding: function(keyBinding, actionID) {\r\n\t\t\tvar keyBindings = this._keyBindings;\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tvar kb = keyBindings[i]; \r\n\t\t\t\tif (kb.keyBinding.equals(keyBinding)) {\r\n\t\t\t\t\tif (actionID) {\r\n\t\t\t\t\t\tkb.actionID = actionID;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (kb.predefined) {\r\n\t\t\t\t\t\t\tkb.actionID = \"noop\"; //$NON-NLS-0$\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tkeyBindings.splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (actionID) {\r\n\t\t\t\tkeyBindings.push({keyBinding: keyBinding, actionID: actionID});\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetView: function(view) {\r\n\t\t\tthis._view = view;\r\n\t\t}\r\n\t};\r\n\t\r\n\tfunction DefaultKeyMode(view) {\r\n\t\tKeyMode.call(this, view);\r\n\t}\r\n\tDefaultKeyMode.prototype = new KeyMode();\r\n\tDefaultKeyMode.prototype.createKeyBindings = function () {\r\n\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t//no duplicate keybindings\r\n\t\tvar bindings = [];\r\n\r\n\t\t// Cursor Navigation\r\n\t\tbindings.push({actionID: \"lineUp\",\t\tkeyBinding: new KeyBinding(38), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"lineDown\",\tkeyBinding: new KeyBinding(40), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"charPrevious\",\tkeyBinding: new KeyBinding(37), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"charNext\",\tkeyBinding: new KeyBinding(39), predefined: true}); //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"scrollPageUp\",\t\tkeyBinding: new KeyBinding(33), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageDown\",\tkeyBinding: new KeyBinding(34), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageUp\",\t\tkeyBinding: new KeyBinding(33, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageDown\",\tkeyBinding: new KeyBinding(34, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(37, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(39, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordPrevious\",\tkeyBinding: new KeyBinding(37, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordNext\",\tkeyBinding: new KeyBinding(39, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollTextStart\",\tkeyBinding: new KeyBinding(36), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollTextEnd\",\t\tkeyBinding: new KeyBinding(35), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textStart\",\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textEnd\",\t\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageUp\",\tkeyBinding: new KeyBinding(38, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageDown\",\t\tkeyBinding: new KeyBinding(40, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(37, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(39, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t//TODO These two actions should be changed to paragraph start and paragraph end  when word wrap is implemented\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(38, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(40, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tbindings.push({actionID: \"pageUp\",\t\tkeyBinding: new KeyBinding(33), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageDown\",\tkeyBinding: new KeyBinding(34), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(36), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(35), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordPrevious\",\tkeyBinding: new KeyBinding(37, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordNext\",\tkeyBinding: new KeyBinding(39, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textStart\",\tkeyBinding: new KeyBinding(36, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textEnd\",\t\tkeyBinding: new KeyBinding(35, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\tif (util.isFirefox && util.isLinux) {\r\n\t\t\tbindings.push({actionID: \"lineUp\",\t\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineDown\",\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\tif (util.isWindows) {\r\n\t\t\tbindings.push({actionID: \"scrollLineUp\",\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollLineDown\",\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t// Select Cursor Navigation\r\n\t\tbindings.push({actionID: \"selectLineUp\",\t\tkeyBinding: new KeyBinding(38, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectLineDown\",\t\tkeyBinding: new KeyBinding(40, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectCharPrevious\",\tkeyBinding: new KeyBinding(37, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectCharNext\",\t\tkeyBinding: new KeyBinding(39, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectPageUp\",\t\tkeyBinding: new KeyBinding(33, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectPageDown\",\t\tkeyBinding: new KeyBinding(34, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(37, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(39, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordPrevious\",\tkeyBinding: new KeyBinding(37, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordNext\",\tkeyBinding: new KeyBinding(39, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\tkeyBinding: new KeyBinding(36, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(35, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\tkeyBinding: new KeyBinding(38, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(40, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(37, null, true, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(39, null, true, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t//TODO These two actions should be changed to select paragraph start and select paragraph end  when word wrap is implemented\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(38, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(40, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tif (util.isLinux) {\r\n\t\t\t\tbindings.push({actionID: \"selectWholeLineUp\",\t\tkeyBinding: new KeyBinding(38, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"selectWholeLineDown\",\t\tkeyBinding: new KeyBinding(40, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\t\tkeyBinding: new KeyBinding(36, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(35, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordPrevious\",\tkeyBinding: new KeyBinding(37, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordNext\",\t\tkeyBinding: new KeyBinding(39, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\t\tkeyBinding: new KeyBinding(36, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(35, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\t\r\n\t\t//Undo stack\r\n\t\tbindings.push({actionID: \"undo\", keyBinding: new mKeyBinding.KeyBinding('z', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"redo\", keyBinding: new mKeyBinding.KeyBinding('z', true, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tbindings.push({actionID: \"redo\", keyBinding: new mKeyBinding.KeyBinding('y', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t//Misc\r\n\t\tbindings.push({actionID: \"deletePrevious\",\t\tkeyBinding: new KeyBinding(8), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deletePrevious\",\t\tkeyBinding: new KeyBinding(8, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteNext\",\t\tkeyBinding: new KeyBinding(46), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordNext\",\t\tkeyBinding: new KeyBinding(46, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"tab\",\t\t\tkeyBinding: new KeyBinding(9), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"shiftTab\",\t\t\tkeyBinding: new KeyBinding(9, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"enter\",\t\t\tkeyBinding: new KeyBinding(13), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"enter\",\t\t\tkeyBinding: new KeyBinding(13, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"escape\",\t\t\tkeyBinding: new KeyBinding(27), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectAll\",\t\tkeyBinding: new KeyBinding('a', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"toggleTabMode\",\tkeyBinding: new KeyBinding('m', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"deleteNext\",\t\tkeyBinding: new KeyBinding(46, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteWordNext\",\t\tkeyBinding: new KeyBinding(46, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\t\r\n\t\tbindings.push({actionID: \"toggleWrapMode\",\t\tkeyBinding: new mKeyBinding.KeyBinding('w', true, false, true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"toggleOverwriteMode\",\t\tkeyBinding: new mKeyBinding.KeyBinding(45)}); //$NON-NLS-0$\r\n\t\t\r\n\t\t/*\r\n\t\t* Feature in IE/Chrome: prevent ctrl+'u', ctrl+'i', and ctrl+'b' from applying styles to the text.\r\n\t\t*\r\n\t\t* Note that Chrome applies the styles on the Mac with Ctrl instead of Cmd.\r\n\t\t*/\r\n\t\tif (!util.isFirefox) {\r\n\t\t\tvar isMacChrome = util.isMac && util.isChrome;\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('u', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('i', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('b', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\tif (util.isFirefox) {\r\n\t\t\tbindings.push({actionID: \"copy\", keyBinding: new KeyBinding(45, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"paste\", keyBinding: new KeyBinding(45, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"cut\", keyBinding: new KeyBinding(46, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t// Add the emacs Control+ ... key bindings.\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"lineStart\", keyBinding: new KeyBinding(\"a\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\", keyBinding: new KeyBinding(\"e\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineUp\", keyBinding: new KeyBinding(\"p\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineDown\", keyBinding: new KeyBinding(\"n\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"charPrevious\", keyBinding: new KeyBinding(\"b\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"charNext\", keyBinding: new KeyBinding(\"f\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deletePrevious\", keyBinding: new KeyBinding(\"h\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteNext\", keyBinding: new KeyBinding(\"d\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteLineEnd\", keyBinding: new KeyBinding(\"k\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tif (util.isFirefox) {\r\n\t\t\t\tbindings.push({actionID: \"scrollPageDown\", keyBinding: new KeyBinding(\"v\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"deleteLineStart\", keyBinding: new KeyBinding(\"u\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"deleteWordPrevious\", keyBinding: new KeyBinding(\"w\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t} else {\r\n\t\t\t\tbindings.push({actionID: \"pageDown\", keyBinding: new KeyBinding(\"v\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"centerLine\", keyBinding: new KeyBinding(\"l\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"enterNoCursor\", keyBinding: new KeyBinding(\"o\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t//TODO implement: y (yank), t (transpose)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bindings;\r\n\t};\r\n\t\r\n\treturn {\r\n\t\tKeyMode: KeyMode,\r\n\t\tDefaultKeyMode: DefaultKeyMode\r\n\t};\r\n});\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013,2014 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/textTheme\", //$NON-NLS-0$\r\n[\r\n\t'require', //$NON-NLS-0$\r\n\t'orion/editor/eventTarget', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(require, mEventTarget, util) {\r\n\tvar THEME_PREFIX = \"orion-theme-\"; //$NON-NLS-0$\r\n\t\r\n\tvar Themes = {};\r\n\r\n\t/**\r\n\t * Constructs a new text theme. \r\n\t * \r\n\t * @class A TextTheme is a class used to specify an editor theme.\r\n\t * @name orion.editor.TextTheme\r\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\r\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\r\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\r\n\t */\r\n\tfunction TextTheme(options) {\r\n\t\toptions = options || {};\r\n\t\tthis._document = options.document || document;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets an instance of <code>orion.editor.TextTheme</code> by name. If the name\r\n\t * paramenter is not speficed the default text theme instance is returned.\r\n\t * Subsequent calls of <code>getTheme</code> with the same name will return\r\n\t * the same instance.\r\n\t */\r\n\tTextTheme.getTheme = function(name) {\r\n\t\tname = name || \"default\"; //$NON-NLS-0$\r\n\t\tvar theme = Themes[name];\r\n\t\tif (!theme) {\r\n\t\t\ttheme = Themes[name] = new TextTheme();\r\n\t\t}\r\n\t\treturn theme;\r\n\t};\r\n\r\n\tTextTheme.prototype = /** @lends orion.editor.TextTheme.prototype */ {\r\n\t\t/**\r\n\t\t * Returns the theme className.\r\n\t\t *\r\n\t\t * @see orion.editor.TextTheme#setThemeClass\r\n\t\t */\r\n\t\tgetThemeClass: function() {\r\n\t\t\treturn this._themeClass;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @class This object represents a style sheet for a theme manager.\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.TextTheme#setThemeClass}\r\n\t\t * </p>\r\n\t\t * @name orion.editor.ThemeStyleSheet\r\n\t\t * \r\n\t\t * @property {String} href The href of the stylesheet\r\n\t\t */\r\n\t\t/**\r\n\t\t * Sets the theme className and style sheet.\r\n\t\t * <p>\r\n\t\t * If the <code>stylesheet</code> parameter is a string, it represents an inline\r\n\t\t * CSS and it will be added to the document as a <i>STYLE</i> tag element.  If the\r\n\t\t * <code>stylesheet</code> parameter is a <code>orion.editor.ThemeStyleSheet</code>,\r\n\t\t * its href property is loaded as either a <i>STYLE</i> tag element or as a <i>LINK</i>\r\n\t\t * tag element.\r\n\t\t * </p>\r\n\t\t * <p>\r\n\t\t * Listeners of the ThemeChanged event are notify once the styled sheet is loaded\r\n\t\t * into the document.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @param {String} className the new theme className.\r\n\t\t * @param {String|orion.editor.ThemeStyleSheet} styleSheet the CSS stylesheet for the new theme className.\r\n\t\t *\r\n\t\t * @see orion.editor.TextTheme#getThemeClass\r\n\t\t * @see orion.editor.TextTheme#onThemeChanged\r\n\t\t */\r\n\t\t setThemeClass: function(className, styleSheet) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar oldThemeClass = self._themeClass;\t\r\n\t\t\tself._themeClass = className;\r\n\t\t\tthis._load(className, styleSheet, function() {\r\n\t\t\t\tself.onThemeChanged({\r\n\t\t\t\t\ttype: \"ThemeChanged\", //$NON-NLS-0$\r\n\t\t\t\t\toldValue: oldThemeClass,\r\n\t\t\t\t\tnewValue: self.getThemeClass()\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * @class This is the event sent when the theme className or style sheet has changed.\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.TextTheme}<br/>\r\n\t\t * {@link orion.editor.TextTheme#event:onThemeChanged}\r\n\t\t * </p>\r\n\t\t * @name orion.editor.ThemeChangedEvent\r\n\t\t * \r\n\t\t * @property {String} oldValue The old theme clasName.\r\n\t\t * @property {String} newValue The new theme className.\r\n\t\t */\r\n\t\t/**\r\n\t\t * This event is sent when the theme clasName has changed and its style sheet has been loaded in the document.\r\n\t\t *\r\n\t\t * @event\r\n\t\t * @param {orion.editor.ThemeChangedEvent} themeChangedEvent the event\r\n\t\t */\r\n\t\tonThemeChanged: function(themeChangedEvent) {\r\n\t\t\treturn this.dispatchEvent(themeChangedEvent);\r\n\t\t},\r\n\t\tbuildStyleSheet: function(themeClass, settings) {\r\n\t\t\tvar convertCSSname = function(name) {\r\n\t\t\t\treturn name.replace(this._capitalRegEx, function(match) {\r\n\t\t\t\t\treturn \"-\" + match; //$NON-NLS-0$\r\n\t\t\t\t}.bind(this)).toLowerCase();\r\n\t\t\t}.bind(this);\r\n\r\n\t\t\tvar parseStyles = function(object, ancestors, className, isTopLevel, result) {\r\n\t\t\t\tvar localResult = [];\r\n\t\t\t\tvar keys = Object.keys(object);\r\n\t\t\t\tkeys.forEach(function(key) {\r\n\t\t\t\t\tvar value = object[key];\r\n\t\t\t\t\tif (typeof(value) === \"string\") { //$NON-NLS-0$\r\n\t\t\t\t\t\tlocalResult.push(\"\\t\" + convertCSSname(key) + \": \" + value + \";\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tparseStyles(\r\n\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t\tclassName === key ? ancestors : ancestors + (isTopLevel ? \" .\" : \".\") + key, //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\tresult);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (localResult.length) {\r\n\t\t\t\t\tresult.push(ancestors + (isTopLevel ? \".textview\" : \"\") + \" {\"); //$NON-NLS-0$\r\n\t\t\t\t\tresult.push.apply(result, localResult);\r\n\t\t\t\t\tresult.push(\"}\"); //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar result = [\"\"];\r\n\t\t\tparseStyles(settings.styles, \".\" + themeClass, settings.className, true, result); //$NON-NLS-0$\r\n\t\t\treturn result.join(\"\\n\"); //$NON-NLS-0$\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\t_createStyle: function(className, styleSheet, callback, link) {\r\n\t\t\tvar document = this._document;\r\n\t\t\tvar id = THEME_PREFIX + className;\r\n\t\t\tvar node = document.getElementById(id);\r\n\t\t\tif (node) {\r\n\t\t\t\tif (link || node.firstChild.data === styleSheet) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnode.removeChild(node.firstChild);\r\n\t\t\t\tnode.appendChild(document.createTextNode(styleSheet));\r\n\t\t\t} else {\r\n\t\t\t\tif (link) {\r\n\t\t\t\t\tnode = util.createElement(document, \"link\"); //$NON-NLS-0$\r\n\t\t\t\t\tnode.rel = \"stylesheet\"; //$NON-NLS-0$\r\n\t\t\t\t\tnode.type = \"text/css\"; //$NON-NLS-0$\r\n\t\t\t\t\tnode.href = styleSheet;\r\n\t\t\t\t\tnode.addEventListener(\"load\", function() { //$NON-NLS-0$\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode = util.createElement(document, \"style\"); //$NON-NLS-0$\r\n\t\t\t\t\tnode.appendChild(document.createTextNode(styleSheet));\r\n\t\t\t\t}\r\n\t\t\t\tnode.id = id;\r\n\t\t\t\tvar head = document.getElementsByTagName(\"head\")[0] || document.documentElement; //$NON-NLS-0$\r\n\t\t\t\thead.appendChild(node);\r\n\t\t\t}\r\n\t\t\tif (!link) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\t_load: function (className, styleSheet, callback) {\r\n\t\t\tif (!className) {\r\n\t\t\t\tcallback();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (typeof styleSheet === \"string\") { //$NON-NLS-0$\r\n\t\t\t\tthis._createStyle(className, styleSheet, callback);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar href = styleSheet.href;\r\n\t\t\tvar extension = \".css\"; //$NON-NLS-0$\r\n\t\t\tif (href.substring(href.length - extension.length) !== extension) {\r\n\t\t\t\thref += extension;\r\n\t\t\t}\r\n\t\t\tif (/^\\//.test(href) || /[a-zA-Z0-9]+:\\/\\//i.test(href) || !require.toUrl /* almond cannot load dynamically */) {\r\n\t\t\t\tthis._createStyle(className, href, callback, true);\r\n\t\t\t} else {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trequire([\"text!\" + href], function(cssText) { //$NON-NLS-0$\r\n\t\t\t\t\tself._createStyle(className, cssText, callback, false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t_capitalRegEx: /[A-Z]/g\r\n\t};\r\n\tmEventTarget.EventTarget.addMixin(TextTheme.prototype);\r\n\t\r\n\treturn {\r\n\t\tTextTheme: TextTheme\r\n\t};\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n * \r\n * Contributors: IBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/util\", [], function() { //$NON-NLS-0$\r\n\t\r\n\t/** @private */\r\n\tfunction addEventListener(node, type, handler, capture) {\r\n\t\tif (typeof node.addEventListener === \"function\") { //$NON-NLS-0$\r\n\t\t\tnode.addEventListener(type, handler, capture === true);\r\n\t\t} else {\r\n\t\t\tnode.attachEvent(\"on\" + type, handler); //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\t/** @private */\r\n\tfunction removeEventListener(node, type, handler, capture) {\r\n\t\tif (typeof node.removeEventListener === \"function\") { //$NON-NLS-0$\r\n\t\t\tnode.removeEventListener(type, handler, capture === true);\r\n\t\t} else {\r\n\t\t\tnode.detachEvent(\"on\" + type, handler); //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\t/** @private */\r\n\tfunction contains(topNode, node) {\r\n\t\tif (!node) { return false; }\r\n\t\tif (!topNode.compareDocumentPosition) {\r\n\t\t\tvar temp = node;\r\n\t\t\twhile (temp) {\r\n\t\t\t\tif (topNode === temp) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\ttemp = temp.parentNode;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn topNode === node || (topNode.compareDocumentPosition(node) & 16) !== 0;\r\n\t}\r\n\t/** @private */\r\n\tfunction getNodeStyle(node, prop, defaultValue) {\r\n\t\tvar value;\r\n\t\tif (node) {\r\n\t\t\tvalue = node.style[prop];\r\n\t\t\tif (!value) {\r\n\t\t\t\tif (node.currentStyle) {\r\n\t\t\t\t\tvar index = 0, p = prop;\r\n\t\t\t\t\twhile ((index = p.indexOf(\"-\", index)) !== -1) { //$NON-NLS-0$\r\n\t\t\t\t\t\tp = p.substring(0, index) + p.substring(index + 1, index + 2).toUpperCase() + p.substring(index + 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue = node.currentStyle[p];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar css = node.ownerDocument.defaultView.getComputedStyle(node, null);\r\n\t\t\t\t\tvalue = css ? css.getPropertyValue(prop) : null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value || defaultValue;\r\n\t}\r\n\r\n\t/**\r\n\t * @class\r\n\t * @private\r\n\t * @name orion.editor.Animation\r\n\t * @description Creates an animation.\r\n\t * @param {Object} options Options controlling the animation.\r\n\t * @param {Array} options.curve Array of 2 values giving the start and end points for the animation.\r\n\t * @param {Number} [options.duration=350] Duration of the animation, in milliseconds.\r\n\t * @param {Function} [options.easing]\r\n\t * @param {Function} [options.onAnimate]\r\n\t * @param {Function} [options.onEnd]\r\n\t * @param {Number} [options.rate=20] The time between frames, in milliseconds.\r\n\t */\r\n\tvar Animation = /** @ignore */ (function() {\r\n\t\tfunction Animation(options) {\r\n\t\t\tthis.options = options;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Plays this animation.\r\n\t\t * @function\r\n\t\t * @memberOf orion.editor.Animation.prototype\r\n\t\t * @name play\r\n\t\t */\r\n\t\tAnimation.prototype.play = function() {\r\n\t\t\tvar duration = (typeof this.options.duration === \"number\") ? this.options.duration : 350, //$NON-NLS-0$\r\n\t\t\t    rate = (typeof this.options.rate === \"number\") ? this.options.rate : 20, //$NON-NLS-0$\r\n\t\t\t    easing = this.options.easing || this.defaultEasing,\r\n\t\t\t    onAnimate = this.options.onAnimate || function() {},\r\n\t\t\t    start = this.options.curve[0],\r\n\t\t\t    end = this.options.curve[1],\r\n\t\t\t    range = (end - start),\r\n\t\t\t    startedAt = -1,\r\n\t\t\t\tpropertyValue,\r\n\t\t\t\tself = this;\r\n\r\n\t\t\tfunction onFrame() {\r\n\t\t\t\tstartedAt = (startedAt === -1) ? new Date().getTime() : startedAt;\r\n\t\t\t\tvar now = new Date().getTime(),\r\n\t\t\t\t    percentDone = (now - startedAt) / duration;\r\n\t\t\t\tif (percentDone < 1) {\r\n\t\t\t\t\tvar eased = easing(percentDone);\r\n\t\t\t\t\tpropertyValue = start + (eased * range);\r\n\t\t\t\t\tonAnimate(propertyValue);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonAnimate(end);\r\n\t\t\t\t\tself.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.interval = this.options.window.setInterval(onFrame, rate);\r\n\t\t};\r\n\t\t/**\r\n\t\t * Stops this animation.\r\n\t\t * @function\r\n\t\t * @memberOf orion.editor.Animation.prototype\r\n\t\t */\r\n\t\tAnimation.prototype.stop = function() {\r\n\t\t\tthis.options.window.clearInterval(this.interval);\r\n\t\t    var onEnd = this.options.onEnd || function () {};\r\n\t\t\tonEnd();\r\n\t\t};\r\n\t\tAnimation.prototype.defaultEasing = function(x) {\r\n\t\t\treturn Math.sin(x * (Math.PI / 2));\r\n\t\t};\r\n\t\treturn Animation;\r\n\t}());\r\n\r\n\treturn {\r\n\t\tcontains: contains,\r\n\t\tgetNodeStyle: getNodeStyle,\r\n\t\taddEventListener: addEventListener,\r\n\t\tremoveEventListener: removeEventListener,\r\n\t\tAnimation: Animation\r\n\t};\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n *******************************************************************************/\ndefine ('orion/bidiUtils',[     \t\n    \t'orion/util'\n        ], \n\t\tfunction(util) { /* BDL */\n\t\n\tfunction setBrowserLangDirection() {\n\t\t\n\t\tvar lang;\n    \tif (window.dojoConfig) {\n      \t\tlang = window.dojoConfig.locale;\n    \t}\n    \tif (!lang) {\n      \t\tlang = navigator.languages ? navigator.languages[0] : (navigator.language || navigator.userLanguage);\n    \t}\n    \tvar isBidi = lang && 'ar iw he'.indexOf((lang).substring(0, 2)) != - 1;\n\t\t\n    \tif (isBidi)\n    \t{\n\t    \tvar htmlElement = document.getElementsByTagName('html')[0];\n\t    \tif (htmlElement){ //should be always true\n\t    \t\thtmlElement.setAttribute (\"dir\", \"rtl\");\n\t    \t}\n    \t}\t\n\t};\n\t\n\tsetBrowserLangDirection();\n\t\n\tvar bidiEnabledStorgae = '/orion/preferences/bidi/bidiEnabled'; //$NON-NLS-0$\n\tvar bidiLayoutStorage = '/orion/preferences/bidi/bidiLayout'; //$NON-NLS-0$\t\n\tvar LRE = '\\u202A';\t//$NON-NLS-0$\n\tvar PDF = '\\u202C'; //$NON-NLS-0$\n\tvar RLE = '\\u202B'; //$NON-NLS-0$\n\t\n\tvar isBidiEnabled = bidiEnabled();\n\tvar bidiLayout = getBidiLayout();\n\n\t/**\n\t * checks if directionality should be applied in Orion.\n\t * @returns {Boolean} true if globalization settings exist and bidi is enabled.\n\t */\t\t\n\tfunction bidiEnabled() {\n\t\tvar bidiEnabled = localStorage.getItem(bidiEnabledStorgae);\n\t\tif (bidiEnabled && bidiEnabled == 'true') {\t\t//$NON-NLS-0$\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t};\n\t\n\t/**\n\t * returns bidiLayout value set in globalization settings.\n\t * @returns {String} text direction.\n\t */\t\n\tfunction getBidiLayout() {\n\t\tvar bidiLayout = localStorage.getItem(bidiLayoutStorage);\n\t\tif (bidiLayout && (bidiLayout == 'rtl' || bidiLayout == 'ltr' || bidiLayout == 'auto')) {\t//$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn bidiLayout;\n\t\t}\n\t\telse {\n\t\t\treturn 'ltr';\t//$NON-NLS-0$\n\t\t}\n\t};\n\t\n\t/**\n\t * returns text direction.\n\t * this method is used for handling direction by adding a dir attribute in an HTML element.\n\t * if bidiLayout is set to ltr > return ltr\n\t * if bidiLayout is set to rtl > return rtl\n\t * if bidiLayout is set to auto > check for first strong character in text and return ltr or rtl accordingly.\n\t * @param {String} the text on which to set directionality\n\t * @returns {String} text direction. rtl or ltr.\n\t */\t\n\tfunction getTextDirection(text) {\n\t\tbidiLayout = getBidiLayout();\n\t\tif (!bidiEnabled()) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (bidiLayout == 'auto' && util.isIE) {\t//$NON-NLS-0$\n\t\t\treturn checkContextual(text);\n\t\t}\n\t\telse {\n\t\t\treturn bidiLayout;\n\t\t}\n\t};\t\n\t\n\t/**\n\t * Wraps text by UCC (Unicode control characters) according to text direction\n\t * In some cases defining the dir attribute in a different direction than the GUI orientation, \n\t * changes the alignment of the text and/or adjacent elements such as icons.\n\t * This doesn't follow the bidi standards (static text should be aligned following GUI direction).\n\t * Therefore the only solution is to use UCC (Unicode control characters) to display the text in a correct orientation.\n\t * (the text is changed for display purposes only. The original text in the repository remains unchanged)\n\t * @param {String} the text to be wrapped\n\t * @returns {String} text after adding ucc characters.\n\t */\t\t\n\tfunction enforceTextDirWithUcc ( text ) {\n\t\tif (bidiEnabled() && text.trim()) {\n\t\t\tbidiLayout = getBidiLayout();\n\t\t\tvar dir = bidiLayout == 'auto' ? checkContextual( text ) : bidiLayout;\t//$NON-NLS-0$\n\t\t\treturn ( dir == 'ltr' ? LRE : RLE ) + text + PDF;\t//$NON-NLS-0$\n\t\t}\n\t\telse {\n\t\t\treturn text;\t\n\t\t}\n\t};\n\t\n\t/**\n\t * Finds the first strong (directional) character.\n\t * If it is Latin, return ltr. If it is bidi, return rtl. Otherwise, return ltr as default. \n\t * @param {String} the text to be examined\n\t * @returns {String} text direction. rtl or ltr.\n\t */\t\t\t\n\tfunction checkContextual ( text ) {\n\t\t// look for strong (directional) characters\n\t\tvar fdc = /[A-Za-z\\u05d0-\\u065f\\u066a-\\u06ef\\u06fa-\\u07ff\\ufb1d-\\ufdff\\ufe70-\\ufefc]/.exec( text );\n\t\t// if found, return the direction that defined by the character, else return ltr as defult.\n\t\treturn fdc ? ( fdc[0] <= 'z' ? 'ltr' : 'rtl' ) : 'ltr';\t//$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\n\t};\n\t\n\tfunction addBidiEventListeners ( input ) {\n\t\tif (!input._hasBidiEventListeners) {\n\t\t\tinput._hasBidiEventListeners = true;\n\n\t\t\tvar eventTypes = ['keyup', 'cut', 'paste'];\n\t\t\tfor (var i = 0; i < eventTypes.length; ++i) {\n\t\t\t\tinput.addEventListener(eventTypes[i], handleInputEvent.bind(this),\n\t\t\t\t\tfalse);\n\t\t\t}\n\t\t}\n\t};\n\t\n\tfunction handleInputEvent ( event ) {\n\t\tvar input = event.target;\n\t\tif (input) {\n\t\t\tinput.dir = getTextDirection(input.value || input.textContent); // resolve dir attribute of the element\n\t\t}\n\t};\n\t\n\tfunction initInputField ( input ) {\n\t\tif (bidiEnabled() && input) {\n\t\t\tinput.dir = getTextDirection(input.value || input.textContent); // resolve dir attribute of the element\n\n\t\t\tif (util.isIE) {\n\t\t\t\taddBidiEventListeners(input);\n\t\t\t}\n\t\t}\n\t};\n\t\t\n\treturn {\n\t\tbidiEnabled: bidiEnabled,\n\t\tgetTextDirection: getTextDirection,\t\t\n\t\tenforceTextDirWithUcc: enforceTextDirWithUcc,\n\t\tinitInputField: initInputField\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2014, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/metrics',[\n], function() {\n\n\tvar _services = [];\n\tvar timingVars = Object.create(null);\n\n\t/**\n\t * @name Metrics\n\t * @description Creates a new instance of the metrics service\n\t * @param {Object} serviceRegistry The backing service registry to register the new service with\n\t * @param {Object} args An object of additional arguments\n\t * @returns {Metrics} A new Metrics instance\n\t * @since 12.0\n\t */\n\tfunction Metrics(serviceRegistry, args) {\n\t\tvar refs = serviceRegistry.getServiceReferences(\"orion.metrics\"); //$NON-NLS-0$\n\t\tvar services = [];\n\t\trefs.forEach(function(current) {\n\t\t\tservices.push(serviceRegistry.getService(current));\n\t\t});\n\t\t/* the following definitions are from https://developers.google.com/analytics/devguides/collection/analyticsjs/pages */\n\t\tvar href = window.location.protocol + '//' + window.location.hostname + window.location.pathname + window.location.search; //$NON-NLS-0$\n\t\tvar page = window.location.pathname + window.location.search;\n\t\tvar title = document.title;\n\n\t\t_services = services;\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.pageLoad(href, page, title, args);\n\t\t});\n\t\tserviceRegistry.registerService(\"orion.core.metrics.client\", this); //$NON-NLS-1$\n\t}\n\t\n\t/** @callback */\n\tfunction _logTiming(timingCategory, timingVar, timingValue, timingLabel) {\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.logTiming(timingCategory, timingVar, timingValue, timingLabel);\n\t\t});\n\t}\n\t/** @callback */\n\tfunction _logEvent(category, action, label, value, details) {\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.logEvent(category, action, label || \"\", value, details);\n\t\t});\n\t}\n\t/** @callback */\n\tfunction _logPageLoadTiming(timingVar, timingLabel) {\n\t\t/* \n\t\t * The level of window.performance implementation varies across the browsers,\n\t\t * so check for the existence of all utilized functions up-front.\n\t\t */\n\t\tif (window.performance) {\n\t\t\t /* ensure that no more timings of this type are logged for this page */\n\t\t\tif (window.performance.getEntriesByName && window.performance.mark) {\n\t\t\t\tif (window.performance.getEntriesByName(timingVar).length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twindow.performance.mark(timingVar);\n\t\t\t} else {\n\t\t\t\tif (timingVars[timingVar]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttimingVars[timingVar] = Date.now();\t\t\t\t\n\t\t\t}\n\t\t\t_logTiming(\"page\", timingVar, window.performance.now(), timingLabel); //$NON-NLS-0$\n\t\t}\n\t}\n\t\n\tMetrics.prototype = {\n\t\t/**\n\t\t * @description Log a timing\n\t\t * @function\n\t\t * @param {String} timingCategory The name of the category to log to\n\t\t * @param {String} timingVar The name of the variable to log to\n\t\t * @param {Number} timingValue The timing to log\n\t\t * @param {String} timingLabel A label for the new timing\n\t\t */\n\t\tlogTiming: function(timingCategory, timingVar, timingValue, timingLabel) {\n\t\t\t_logTiming(timingCategory, timingVar, timingValue, timingLabel);\n\t\t},\n\t\t/**\n\t\t * @description Log an event\n\t\t * @function\n\t\t * @param {String} category The name of the category to log to\n\t\t * @param {String} action The name of the action logged\n\t\t * @param {String} label A label for the event\n\t\t * @param {String} value The event value to log\n\t\t * @param {String} details Additional details about the event being logged\n\t\t */\n\t\tlogEvent: function(category, action, label, value, details) {\n\t\t\t_logEvent(category, action, label, value, details);\n\t\t},\n\t\t/**\n\t\t * @description Log how long it took to load a page\n\t\t * @function\n\t\t * @param {Number} timingVar The timing to log\n\t\t * @param {String} timingLabel A label for the new timing\n\t\t */\n\t\tlogPageLoadTiming: function(timingVar, timingLabel) {\n\t\t\t_logPageLoadTiming(timingVar, timingLabel);\n\t\t}\n\t};\n\t\n\treturn {\n\t\tMetrics: Metrics,\n\t\tlogTiming: _logTiming,\n\t\tlogEvent: _logEvent,\n\t\tlogPageLoadTiming: _logPageLoadTiming\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n *\t\tMihai Sucan (Mozilla Foundation) - fix for Bug#334583 Bug#348471 Bug#349485 Bug#350595 Bug#360726 Bug#361180 Bug#362835 Bug#362428 Bug#362286 Bug#354270 Bug#361474 Bug#363945 Bug#366312 Bug#370584\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textView\", [  //$NON-NLS-1$\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-1$\n\t'orion/editor/textModel', //$NON-NLS-1$\n\t'orion/editor/keyModes', //$NON-NLS-1$\n\t'orion/editor/eventTarget', //$NON-NLS-1$\n\t'orion/editor/textTheme', //$NON-NLS-1$\n\t'orion/editor/util', //$NON-NLS-1$\n\t'orion/util', //$NON-NLS-1$\n\t'orion/bidiUtils', //$NON-NLS-1$\n\t'orion/metrics' //$NON-NLS-1$\n], function(messages, mTextModel, mKeyModes, mEventTarget, mTextTheme, textUtil, util, bidiUtils, mMetrics) {\n\n\t/** @private */\n\tfunction getWindow(doc) {\n\t\treturn doc.defaultView || doc.parentWindow;\n\t}\n\tfunction newArray(len) {\n\t\treturn new Array(len);\n\t}\n\tvar addHandler = textUtil.addEventListener;\n\tvar removeHandler = textUtil.removeEventListener;\n\t/** @private */\n\tfunction applyStyle(style, node, reset) {\n\t\tif (reset) {\n\t\t\tnode.className = \"\";\n\t\t\tvar attrs = node.attributes;\n\t\t\tfor (var i= attrs.length; i-->0;) {\n\t\t\t\tif (!util.isIE || util.isIE >= 9 || (util.isIE < 9 && attrs[i].specified)) {\n\t\t\t\t\tnode.removeAttribute(attrs[i].name); \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!style) {\n\t\t\treturn;\n\t\t}\n\t\tif (style.styleClass) {\n\t\t\tnode.className = style.styleClass;\n\t\t}\n\t\tvar properties = style.style;\n\t\tif (properties) {\n\t\t\tfor (var s in properties) {\n\t\t\t\tif (properties.hasOwnProperty(s)) {\n\t\t\t\t\tnode.style[s] = properties[s];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar attributes = style.attributes;\n\t\tif (attributes) {\n\t\t\tfor (var a in attributes) {\n\t\t\t\tif (attributes.hasOwnProperty(a)) {\n\t\t\t\t\tnode.setAttribute(a, attributes[a]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/** @private */\n\tfunction clone(obj) {\n\t\t/*Note that this code only works because of the limited types used in TextViewOptions */\n\t\tif (obj instanceof Array) {\n\t\t\treturn obj.slice(0);\n\t\t}\n\t\treturn obj;\n\t}\n\t/**\t@private */\n\tfunction merge(obj1, obj2) {\n\t\tif (!obj1) {\n\t\t\treturn obj2;\n\t\t}\n\t\tif (!obj2) {\n\t\t\treturn obj1;\n\t\t}\n\t\tfor (var p in obj2) {\n\t\t\tif (obj2.hasOwnProperty(p)) {\n\t\t\t\tif (!obj1.hasOwnProperty(p)) {\n\t\t\t\t\tobj1[p] = obj2[p];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn obj1;\n\t}\n\t/** @private */\n\tfunction compare(s1, s2) {\n\t\tif (s1 === s2) { return true; }\n\t\tif (s1 && !s2 || !s1 && s2) { return false; }\n\t\tif ((s1 && s1.constructor === String) || (s2 && s2.constructor === String)) { return false; }\n\t\tif (s1 instanceof Array || s2 instanceof Array) {\n\t\t\tif (!(s1 instanceof Array && s2 instanceof Array)) { return false; }\n\t\t\tif (s1.length !== s2.length) { return false; }\n\t\t\tfor (var i = 0; i < s1.length; i++) {\n\t\t\t\tif (!compare(s1[i], s2[i])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tif (!(s1 instanceof Object) || !(s2 instanceof Object)) { return false; }\n\t\tvar p;\n\t\tfor (p in s1) {\n\t\t\tif (s1.hasOwnProperty(p)) {\n\t\t\t\tif (!s2.hasOwnProperty(p)) { return false; }\n\t\t\t\tif (!compare(s1[p], s2[p])) {return false; }\n\t\t\t}\n\t\t}\n\t\tfor (p in s2) {\n\t\t\tif (!s1.hasOwnProperty(p)) { return false; }\n\t\t}\n\t\treturn true;\n\t}\n\t/** @private */\n\tfunction convertDelimiter(text, addTextFunc, addDelimiterFunc) {\n\t\tvar cr = 0, lf = 0, index = 0, len = text.length;\n\t\twhile (index < len) {\n\t\t\tif (cr !== -1 && cr <= index) { cr = text.indexOf(\"\\r\", index); } //$NON-NLS-1$\n\t\t\tif (lf !== -1 && lf <= index) { lf = text.indexOf(\"\\n\", index); } //$NON-NLS-1$\n\t\t\tvar start = index, end;\n\t\t\tif (lf === -1 && cr === -1) {\n\t\t\t\taddTextFunc(text.substring(index));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (cr !== -1 && lf !== -1) {\n\t\t\t\tif (cr + 1 === lf) {\n\t\t\t\t\tend = cr;\n\t\t\t\t\tindex = lf + 1;\n\t\t\t\t} else {\n\t\t\t\t\tend = cr < lf ? cr : lf;\n\t\t\t\t\tindex = (cr < lf ? cr : lf) + 1;\n\t\t\t\t}\n\t\t\t} else if (cr !== -1) {\n\t\t\t\tend = cr;\n\t\t\t\tindex = cr + 1;\n\t\t\t} else {\n\t\t\t\tend = lf;\n\t\t\t\tindex = lf + 1;\n\t\t\t}\n\t\t\taddTextFunc(text.substring(start, end));\n\t\t\tif (addDelimiterFunc) {\n\t\t\t\taddDelimiterFunc();\n\t\t\t} else {\n\t\t\t\tif (index === len) addTextFunc(\"\");\n\t\t\t}\n\t\t}\n\t}\n\t/** @private */\n\tfunction getBorder(node) {\n\t\tvar left,_top,right,bottom;\n\t\tvar win = getWindow(node.ownerDocument);\n\t\tif (win.getComputedStyle) {\n\t\t\tvar style = win.getComputedStyle(node, null);\n\t\t\tleft = style.getPropertyValue(\"border-left-width\"); //$NON-NLS-1$\n\t\t\t_top = style.getPropertyValue(\"border-top-width\"); //$NON-NLS-1$\n\t\t\tright = style.getPropertyValue(\"border-right-width\"); //$NON-NLS-1$\n\t\t\tbottom = style.getPropertyValue(\"border-bottom-width\"); //$NON-NLS-1$\n\t\t} else if (node.currentStyle) {\n\t\t\tleft = node.currentStyle.borderLeftWidth;\n\t\t\t_top = node.currentStyle.borderTopWidth;\n\t\t\tright = node.currentStyle.borderRightWidth;\n\t\t\tbottom = node.currentStyle.borderBottomWidth;\n\t\t}\n\t\treturn {\n\t\t\tleft: parseInt(left, 10) || 0,\n\t\t\ttop: parseInt(_top, 10) || 0,\n\t\t\tright: parseInt(right, 10) || 0,\n\t\t\tbottom: parseInt(bottom, 10) || 0\n\t\t};\n\t}\n\t/** @private */\n\tfunction getPadding(node) {\n\t\tvar left,_top,right,bottom;\n\t\tvar win = getWindow(node.ownerDocument);\n\t\tif (win.getComputedStyle) {\n\t\t\tvar style = win.getComputedStyle(node, null);\n\t\t\tleft = style.getPropertyValue(\"padding-left\"); //$NON-NLS-1$\n\t\t\t_top = style.getPropertyValue(\"padding-top\"); //$NON-NLS-1$\n\t\t\tright = style.getPropertyValue(\"padding-right\"); //$NON-NLS-1$\n\t\t\tbottom = style.getPropertyValue(\"padding-bottom\"); //$NON-NLS-1$\n\t\t} else if (node.currentStyle) {\n\t\t\tleft = node.currentStyle.paddingLeft;\n\t\t\t_top = node.currentStyle.paddingTop;\n\t\t\tright = node.currentStyle.paddingRight;\n\t\t\tbottom = node.currentStyle.paddingBottom;\n\t\t}\n\t\treturn {\n\t\t\tleft: parseInt(left, 10) || 0, \n\t\t\ttop: parseInt(_top, 10) || 0,\n\t\t\tright: parseInt(right, 10) || 0,\n\t\t\tbottom: parseInt(bottom, 10) || 0\n\t\t};\n\t}\n\t/** @private */\n\tfunction getLineTrim(line) {\n\t\tvar trim = line._trim;\n\t\tif (!trim) {\n\t\t\ttrim = getPadding(line);\n\t\t\tvar border = getBorder(line);\n\t\t\ttrim.left += border.left;\n\t\t\ttrim.top += border.top;\n\t\t\ttrim.right += border.right;\n\t\t\ttrim.bottom += border.bottom;\n\t\t\tline._trim = trim;\n\t\t}\n\t\treturn trim;\n\t}\n\t/** @private */\n\tfunction DOMReady(doc, _parent, className, callback) {\n\t\tclassName = \"_\" + className + \"DOMReady\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t_parent.className = _parent.className ? _parent.className + \" \" + className : className; //$NON-NLS-1$\n\t\t_parent.__DOMReady = callback;\n\t\tvar id = className + \"Style\"; //$NON-NLS-1$\n\t\tif (doc.getElementById(id)) { return; }\n\t\tvar animationName = className + \"Animation\"; //$NON-NLS-1$\n\t\tfunction insertListener(evt) {\n\t\t\tif (evt.animationName === animationName) {\n\t\t\t\tvar target = evt.target;\n\t\t\t\tif (typeof target.__DOMReady === \"function\") { //$NON-NLS-1$\n\t\t\t\t\tgetWindow(doc).setTimeout(function() {\n\t\t\t\t\t\ttarget.__DOMReady();\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfunction template(className, animationName) {\n\t\t\tvar props = [\"\", \"-webkit-\", \"-moz-\", \"-ms-\", \"-o-\"]; //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-4$\n\t\t\tvar _frames = \"\", classRule = \"body .\" + className + \" {\\n\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tfor (var i=0; i<props.length; i++) {\n\t\t\t\t_frames +=\n\t\t\t\t\"@\" + props[i] + \"keyframes \" + animationName + \" {\\n\" + //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"from { opacity: 0.99; }\\n\" + //$NON-NLS-1$\n\t\t\t\t\"to { opacity: 1; }\\n\" + //$NON-NLS-1$\n\t\t\t\t\"}\\n\"; //$NON-NLS-1$\n\t\t\t\tclassRule +=\n\t\t\t\tprops[i] + \"animation-duration: 0.001s;\\n\" + //$NON-NLS-1$\n\t\t\t\tprops[i] + \"animation-name: \" + animationName + \";\\n\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tclassRule += \"}\"; //$NON-NLS-1$\n\t\t\treturn _frames + classRule;\n\t\t}\n\t\taddHandler(doc, \"animationstart\", insertListener, false); //$NON-NLS-1$\n\t\taddHandler(doc, \"MSAnimationStart\", insertListener, false);  //$NON-NLS-1$\n\t\taddHandler(doc, \"webkitAnimationStart\", insertListener, false); //$NON-NLS-1$\n\t\tvar style = doc.createElement(\"style\"); //$NON-NLS-1$\n\t\tstyle.id = id;\n\t\tvar head = doc.getElementsByTagName(\"head\")[0] || doc.documentElement; //$NON-NLS-1$\n\t\tstyle.appendChild(doc.createTextNode(template(className, animationName)));\n\t\thead.insertBefore(style, head.firstChild);\n\t}\n\t\n\tvar Animation = textUtil.Animation;\n\t\n\t/** \n\t * Constructs a new Selection object.\n\t * \n\t * @class A Selection represents a range of selected text in the view.\n\t * @name orion.editor.Selection\n\t */\n\tfunction Selection (start, end, caret) {\n\t\t/**\n\t\t * The selection start offset.\n\t\t *\n\t\t * @name orion.editor.Selection#start\n\t\t */\n\t\tthis.start = start;\n\t\t/**\n\t\t * The selection end offset.\n\t\t *\n\t\t * @name orion.editor.Selection#end\n\t\t */\n\t\tthis.end = end;\n\t\t/** @private */\n\t\tthis.caret = caret; //true if the start, false if the caret is at end\n\t\t/** @private */\n\t\tthis._columnX = -1;\n\t}\n\t/** @private */\n\tSelection.compare = function(s1, s2) {\n\t\tif (s1.length !== s2.length) return false;\n\t\tfor (var i = 0; i < s1.length; i++) {\n\t\t\tif (!s1[i].equals(s2[i])) return false;\n\t\t}\n\t\treturn true;\n\t};\n\tSelection.editing = function(selections, back) {\n\t\tvar i;\n\t\tif (back) {\n\t\t\tfor (i = selections.length - 1; i >= 0; i--) {\n\t\t\t\tif (selections[i]._editing) return selections[i];\n\t\t\t}\n\t\t\treturn selections[selections.length - 1];\n\t\t}\n\t\tfor (i = 0; i < selections.length; i++) {\n\t\t\tif (selections[i]._editing) return selections[i];\n\t\t}\n\t\treturn selections[0];\n\t};\n\t/** @private */\n\tSelection.convert = function(selections) {\n\t\tif (selections.length === 1) return selections[0];\n\t\treturn selections;\n\t};\n\t/** @private */\n\tSelection.contains = function(selections, offset) {\n\t\treturn selections.some(function(selection) {\n\t\t\treturn selection.contains(offset);\n\t\t});\n\t};\n\t/** @private */\n\tSelection.merge = function(selections) {\n\t\tif (selections.length <= 1) return selections;\n\t\tselections.sort(function(a, b) {\n\t\t\treturn a.start - b.start;\n\t\t});\n\t\tvar result = [];\n\t\tvar current = selections[0];\n\t\tfor (var i = 1; i < selections.length; i++) {\n\t\t\tif (selections[i].start >= current.end || current._editing || selections[i]._editing) {\n\t\t\t\tresult.push(current);\n\t\t\t\tcurrent = selections[i];\n\t\t\t} else {\n\t\t\t\tcurrent.end = Math.max(current.end, selections[i].end);\n\t\t\t}\n\t\t}\n\t\tresult.push(current);\n\t\treturn result;\n\t};\n\tSelection.prototype = /** @lends orion.editor.Selection.prototype */ {\n\t\t/** @private */\n\t\tclone: function() {\n\t\t\tvar result = new Selection(this.start, this.end, this.caret);\n\t\t\tresult._columnX = this._columnX;\n\t\t\tresult._editing = this._editing;\n\t\t\tresult._docX = this._docX;\n\t\t\treturn result;\n\t\t},\n\t\t/** @private */\n\t\tcontains: function(offset) {\n\t\t\tif (this.start <= offset && offset < this.end) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/** @private */\n\t\tcollapse: function() {\n\t\t\tif (this.caret) {\n\t\t\t\tthis.end = this.start;\n\t\t\t} else {\n\t\t\t\tthis.start = this.end;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\textend: function (offset) {\n\t\t\tif (this.caret) {\n\t\t\t\tthis.start = offset;\n\t\t\t} else {\n\t\t\t\tthis.end = offset;\n\t\t\t}\n\t\t\tif (this.start > this.end) {\n\t\t\t\tvar tmp = this.start;\n\t\t\t\tthis.start = this.end;\n\t\t\t\tthis.end = tmp;\n\t\t\t\tthis.caret = !this.caret;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\tsetCaret: function(offset) {\n\t\t\tthis.start = offset;\n\t\t\tthis.end = offset;\n\t\t\tthis.caret = false;\n\t\t},\n\t\t/** @private */\n\t\tgetCaret: function() {\n\t\t\treturn this.caret ? this.start : this.end;\n\t\t},\n\t\t/** @private */\n\t\tgetAnchor: function() {\n\t\t\treturn this.caret ? this.end : this.start;\n\t\t},\n\t\t/** @private */\n\t\tgetOrientedSelection: function() {\n\t\t\treturn {start: this.getAnchor(), end: this.getCaret()};\n\t\t},\n\t\t/** @private */\n\t\ttoString: function() {\n\t\t\treturn \"start=\" + this.start + \" end=\" + this.end + (this.caret ? \" caret is at start\" : \" caret is at end\"); //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-4$\n\t\t},\n\t\t/** @private */\n\t\tisEmpty: function() {\n\t\t\treturn this.start === this.end;\n\t\t},\n\t\t/** @private */\n\t\tequals: function(object) {\n\t\t\treturn this.caret === object.caret && this.start === object.start && this.end === object.end && this._editing === object._editing;\n\t\t}\n\t};\n\t/** @private */\n\tfunction DOMSelection (view) {\n\t\tthis._view = view;\n\t\tthis._divs = [];\n\t\tvar _parent = view._clipDiv || view._rootDiv;\n\t\tfor (var i=0; i<3; i++) {\n\t\t\tvar div = view._createSelectionDiv();\n\t\t\t_parent.appendChild(div);\n\t\t\tthis._divs.push(div);\n\t\t}\n\t}\n\tDOMSelection.prototype = /** @lends orion.editor.DOMSelection.prototype */ {\n\t\t/** @private */\n\t\tdestroy: function() {\n\t\t\tif (!this._divs) return;\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t});\n\t\t\tthis._divs = null;\n\t\t},\n\t\t/** @private */\n\t\tsetPrimary: function(enabled) {\n\t\t\tthis.primary = enabled;\n\t\t},\n\t\t/** @private */\n\t\tupdate: function() {\n\t\t\tvar view = this._view;\n\t\t\tvar primary = this.primary;\n\t\t\tvar focused = view._hasFocus;\n\t\t\tvar visible = view._cursorVisible;\n\t\t\tvar cursor = !this.primary && this._selection && this._selection.isEmpty();\n\t\t\tvar className;\n\t\t\tif (cursor) {\n\t\t\t\tclassName = \"textviewSelectionCaret\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tclassName = focused ? \"textviewSelection\" : \"textviewSelectionUnfocused\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tthis._divs[0].style.visibility = (cursor && visible && focused) || !cursor ? \"visible\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._divs[0].style.zIndex = visible && cursor ? \"2\" : \"0\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.className = className;\n\t\t\t\tif (util.isWebkit < 537.36 && primary) {\n\t\t\t\t\tdiv.style.background = focused ? \"transparent\" : \"\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/** @private */\n\t\tsetSelection: function (selection) {\n\t\t\tthis._selection = selection;\n\t\t\tthis.update();\n\t\t\tvar view = this._view;\n\t\t\tvar model = view._model;\n\t\t\tvar startLine = model.getLineAtOffset(selection.start);\n\t\t\tvar endLine = model.getLineAtOffset(selection.end);\n\t\t\tvar firstNode = view._getLineNext();\n\t\t\t/*\n\t\t\t* Bug in Firefox. For some reason, after a update page sometimes the \n\t\t\t* firstChild returns null incorrectly. The fix is to ignore show selection.\n\t\t\t*/\n\t\t\tif (!firstNode) { return; }\n\t\t\tvar lastNode = view._getLinePrevious();\n\t\t\t\n\t\t\tvar topNode, bottomNode, topOffset, bottomOffset;\n\t\t\tif (startLine < firstNode.lineIndex) {\n\t\t\t\ttopNode = firstNode;\n\t\t\t\ttopOffset = model.getLineStart(firstNode.lineIndex);\n\t\t\t} else if (startLine > lastNode.lineIndex) {\n\t\t\t\ttopNode = lastNode;\n\t\t\t\ttopOffset = model.getLineStart(lastNode.lineIndex);\n\t\t\t} else {\n\t\t\t\ttopNode = view._getLineNode(startLine);\n\t\t\t\ttopOffset = selection.start;\n\t\t\t}\n\n\t\t\tif (endLine < firstNode.lineIndex) {\n\t\t\t\tbottomNode = firstNode;\n\t\t\t\tbottomOffset = model.getLineStart(firstNode.lineIndex);\n\t\t\t} else if (endLine > lastNode.lineIndex) {\n\t\t\t\tbottomNode = lastNode;\n\t\t\t\tbottomOffset = model.getLineStart(lastNode.lineIndex);\n\t\t\t} else {\n\t\t\t\tbottomNode = view._getLineNode(endLine);\n\t\t\t\tbottomOffset = selection.end;\n\t\t\t}\n\t\t\tthis._setDOMSelection(topNode, topOffset, bottomNode, bottomOffset, selection.caret);\n\t\t},\n\t\t/** @private */\n\t\t_setDOMSelection: function (startNode, startOffset, endNode, endOffset, startCaret) {\n\t\t\tthis._setDOMFullSelection(startNode, startOffset, endNode, endOffset);\n\t\t\tif (!this.primary) { return; }\n\t\t\tvar view = this._view;\n\t\t\tvar start = startNode._line.getNodeOffset(startOffset);\n\t\t\tvar end = endNode._line.getNodeOffset(endOffset);\n\t\t\tif (!start.node || !end.node) return;\n\t\t\tvar range;\n\t\t\tvar win = view._getWindow();\n\t\t\tvar doc = view._parent.ownerDocument;\n\t\t\tif (win.getSelection) {\n\t\t\t\t//W3C\n\t\t\t\tvar sel = win.getSelection();\n\t\t\t\trange = doc.createRange();\n\t\t\t\trange.setStart(start.node, start.offset);\n\t\t\t\trange.setEnd(end.node, end.offset);\n\t\t\t\tif (view._hasFocus && (\n\t\t\t\t\tsel.anchorNode !== start.node || sel.anchorOffset !== start.offset ||\n\t\t\t\t\tsel.focusNode !== end.node || sel.focusOffset !== end.offset ||\n\t\t\t\t\tsel.anchorNode !== end.node || sel.anchorOffset !== end.offset ||\n\t\t\t\t\tsel.focusNode !== start.node || sel.focusOffset !== start.offset))\n\t\t\t\t{\n\t\t\t\t\tview._anchorNode = start.node;\n\t\t\t\t\tview._anchorOffset = start.offset;\n\t\t\t\t\tview._focusNode = end.node;\n\t\t\t\t\tview._focusOffset = end.offset;\n\t\t\t\t\tview._ignoreSelect = false;\n\t\t\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\tview._ignoreSelect = true;\n\t\t\t\t}\n\t\t\t\tif (view._cursorDiv) {\n\t\t\t\t\trange = doc.createRange();\n\t\t\t\t\tif (startCaret) {\n\t\t\t\t\t\trange.setStart(start.node, start.offset);\n\t\t\t\t\t\trange.setEnd(start.node, start.offset);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trange.setStart(end.node, end.offset);\n\t\t\t\t\t\trange.setEnd(end.node, end.offset);\n\t\t\t\t\t}\n\t\t\t\t\tvar rect = range.getClientRects()[0];\n\t\t\t\t\tvar cursorParent = view._cursorDiv.parentNode;\n\t\t\t\t\tvar clientRect = cursorParent.getBoundingClientRect();\n\t\t\t\t\tif (rect && clientRect) {\n\t\t\t\t\t\tview._cursorDiv.style.top = (rect.top - clientRect.top + cursorParent.scrollTop) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\tview._cursorDiv.style.left = (rect.left - clientRect.left + cursorParent.scrollLeft) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (doc.selection) {\n\t\t\t\tif (!view._hasFocus) { return; }\n\t\t\t\t//IE < 9\n\t\t\t\tvar body = doc.body;\n\n\t\t\t\t/*\n\t\t\t\t* Bug in IE. For some reason when text is deselected the overflow\n\t\t\t\t* selection at the end of some lines does not get redrawn.  The\n\t\t\t\t* fix is to create a DOM element in the body to force a redraw.\n\t\t\t\t*/\n\t\t\t\tvar child = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tbody.appendChild(child);\n\t\t\t\tbody.removeChild(child);\n\t\t\t\t\n\t\t\t\trange = body.createTextRange();\n\t\t\t\trange.moveToElementText(start.node.parentNode);\n\t\t\t\trange.moveStart(\"character\", start.offset); //$NON-NLS-1$\n\t\t\t\tvar endRange = body.createTextRange();\n\t\t\t\tendRange.moveToElementText(end.node.parentNode);\n\t\t\t\tendRange.moveStart(\"character\", end.offset); //$NON-NLS-1$\n\t\t\t\trange.setEndPoint(\"EndToStart\", endRange); //$NON-NLS-1$\n\t\t\t\tview._ignoreSelect = false;\n\t\t\t\trange.select();\n\t\t\t\tview._ignoreSelect = true;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\t_setDOMFullSelection: function(startNode, startOffset, endNode, endOffset) {\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.style.width = div.style.height = \"0px\"; //$NON-NLS-1$\n\t\t\t});\n\t\t\tvar view = this._view;\n\t\t\tif (!view._fullSelection) { return; }\n\t\t\tif (util.isIOS) { return; }\n\t\t\tif (startNode === endNode && startOffset === endOffset && this.primary) { return; }\n\t\t\tvar viewPad = view._getViewPadding();\n\t\t\tvar clientRect = view._clientDiv.getBoundingClientRect();\n\t\t\tvar viewRect = view._viewDiv.getBoundingClientRect();\n\t\t\tvar left = viewRect.left + viewPad.left;\n\t\t\tvar right = clientRect.right;\n\t\t\tvar _top = viewRect.top + viewPad.top;\n\t\t\tvar bottom = clientRect.bottom;\n\t\t\tvar hd = 0, vd = 0;\n\t\t\tif (view._clipDiv) {\n\t\t\t\tvar clipRect = view._clipDiv.getBoundingClientRect();\n\t\t\t\thd = clipRect.left - view._clipDiv.scrollLeft;\n\t\t\t\tvd = clipRect.top;\n\t\t\t} else {\n\t\t\t\tvar rootpRect = view._rootDiv.getBoundingClientRect();\n\t\t\t\thd = rootpRect.left;\n\t\t\t\tvd = rootpRect.top;\n\t\t\t}\n\t\t\tview._ignoreDOMSelection = true;\n\t\t\tvar startLine = new TextLine(view, startNode.lineIndex, startNode);\n\t\t\tvar startRect = startLine.getBoundingClientRect(startOffset, false);\n\t\t\tvar l = startRect.left, endLine, endRect;\n\t\t\tif (startNode === endNode && startOffset === endOffset) {\n\t\t\t\tendLine = startLine;\n\t\t\t\tendRect = startRect;\n\t\t\t} else {\n\t\t\t\tendLine = new TextLine(view, endNode.lineIndex, endNode);\n\t\t\t\tendRect = endLine.getBoundingClientRect(endOffset, false);\n\t\t\t}\n\t\t\tvar r = endRect.left;\n\t\t\tview._ignoreDOMSelection = false;\n\t\t\tvar sel1Div = this._divs[0];\n\t\t\tvar sel1Left = Math.min(right, Math.max(left, l));\n\t\t\tvar sel1Top = Math.min(bottom, Math.max(_top, startRect.top));\n\t\t\tvar sel1Right = right;\n\t\t\tvar sel1Bottom = Math.min(bottom, Math.max(_top, startRect.bottom));\n\t\t\tsel1Div.style.left = (sel1Left - hd) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.top = (sel1Top - vd) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.width = Math.max(0, sel1Right - sel1Left) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.height = Math.max(0, sel1Bottom - sel1Top) + \"px\"; //$NON-NLS-1$\n\t\t\tif (startNode.lineIndex === endNode.lineIndex) {\n\t\t\t\tsel1Right = Math.min(r, right);\n\t\t\t\tsel1Div.style.width = Math.max(this.primary ? 0 : 1, sel1Right - sel1Left) + \"px\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tvar sel3Left = left;\n\t\t\t\tvar sel3Top = Math.min(bottom, Math.max(_top, endRect.top));\n\t\t\t\tvar sel3Right = Math.min(right, Math.max(left, r));\n\t\t\t\tvar sel3Bottom = Math.min(bottom, Math.max(_top, endRect.bottom));\n\t\t\t\tvar sel3Div = this._divs[2];\n\t\t\t\tsel3Div.style.left = (sel3Left - hd) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.top = (sel3Top - vd) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.width = Math.max(0, sel3Right - sel3Left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.height = Math.max(0, sel3Bottom - sel3Top) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (Math.abs(startNode.lineIndex - endNode.lineIndex) > 1) {\n\t\t\t\t\tvar sel2Div = this._divs[1];\n\t\t\t\t\tsel2Div.style.left = (left - hd)  + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.top = (sel1Bottom - vd) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.width = Math.max(0, right - left) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.height = Math.max(0, sel3Top - sel1Bottom) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t/** @private */\n\tfunction TextRect (rect) {\n\t\tthis.left = rect.left;\n\t\tthis.top = rect.top;\n\t\tthis.right = rect.right;\n\t\tthis.bottom = rect.bottom;\n\t}\n\tTextRect.prototype = /** @lends orion.editor.TextRect.prototype */ {\n\t\t/** @private */\n\t\ttoString: function() {\n\t\t\treturn \"{l=\" + this.left + \", t=\" + this.top + \", r=\" + this.right + \", b=\" + this.bottom + \"}\"; //$NON-NLS-4$ //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t}\n\t};\n\t/** \n\t * Constructs a new TextLine object.\n\t * \n\t * @class A TextLine represents a line of text in the view.\n\t * @name orion.editor.TextLine\n\t * @private\n\t */\n\tfunction TextLine (view, lineIndex, lineDiv) {\n\t\t/**\n\t\t * The view.\n\t\t *\n\t\t * @name orion.editor.TextLine#view\n\t\t * @private\n\t\t */\n\t\tthis.view = view;\n\t\t/**\n\t\t * The line index.\n\t\t *\n\t\t * @name orion.editor.TextLine#lineIndex\n\t\t * @private\n\t\t */\n\t\tthis.lineIndex = lineIndex;\n\t\t\n\t\tthis._lineDiv = lineDiv;\n\t}\n\tTextLine.prototype = /** @lends orion.editor.TextLine.prototype */ {\n\t\t/** @private */\n\t\tcreate: function(_parent, div) {\n\t\t\tif (this._lineDiv) { return; }\n\t\t\tvar child = this._lineDiv = this._createLine(_parent, div, this.lineIndex);\n\t\t\tchild._line = this;\n\t\t\treturn child;\n\t\t},\n\t\t_createLine: function(_parent, div, lineIndex) {\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar e = {type:\"LineStyle\", textView: view, lineIndex: lineIndex, lineText: lineText, lineStart: lineStart}; //$NON-NLS-1$\n\t\t\tview.onLineStyle(e);\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar lineDiv = div || util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tif (!div || !compare(div.viewStyle, e.style)) {\n\t\t\t\tapplyStyle(e.style, lineDiv, div);\n\t\t\t\tif (div) { div._trim = null; }\n\t\t\t\tlineDiv.viewStyle = e.style;\n\t\t\t}\n\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\n\t\t\tif (div && lineDiv.viewLineText === lineText && compare(e.ranges, lineDiv.viewRanges)) {\n\t\t\t\treturn lineDiv;\n\t\t\t}\n\t\t\tlineDiv.viewRanges = e.ranges;\n\t\t\tlineDiv.viewLineText = lineText;\n\t\t\t\n\t\t\tvar ranges = [];\n\t\t\tvar data = {tabOffset: 0, ranges: ranges};\n\t\t\tthis._createRanges(e.ranges, lineText, 0, lineText.length, lineStart, data);\n\t\t\t\n\t\t\t/*\n\t\t\t* A trailing span with a whitespace is added for three different reasons:\n\t\t\t* 1. Make sure the height of each line is the largest of the default font\n\t\t\t* in normal, italic, bold, and italic-bold.\n\t\t\t* 2. When full selection is off, Firefox, Opera and IE9 do not extend the \n\t\t\t* selection at the end of the line when the line is fully selected. \n\t\t\t* 3. The height of a div with only an empty span is zero.\n\t\t\t*/\n\t\t\tvar c = \" \"; //$NON-NLS-1$\n\t\t\tif (!view._fullSelection && util.isIE < 9) {\n\t\t\t\t/* \n\t\t\t\t* IE8 already selects extra space at end of a line fully selected,\n\t\t\t\t* adding another space at the end of the line causes the selection \n\t\t\t\t* to look too big. The fix is to use a zero-width space (\\uFEFF) instead. \n\t\t\t\t*/\n\t\t\t\tc = \"\\uFEFF\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar range = {text: c, style: view._metrics.largestFontStyle, ignoreChars: 1};\n\t\t\tif (ranges.length === 0 || !ranges[ranges.length - 1].style || ranges[ranges.length - 1].style.tagName !== \"div\") { //$NON-NLS-1$\n\t\t\t\tranges.push(range);\n\t\t\t} else {\n\t\t\t\tranges.splice(ranges.length - 1, 0, range);\n\t\t\t}\n\t\t\n\t\t\tvar span, style, oldSpan, oldStyle, text, oldText, end = 0, oldEnd = 0, next, i;\n\t\t\tif (util.isFirefox && lineText.length > 2000) {\n\t\t\t\tif (div) {\n\t\t\t\t\tlineDiv.innerHTML = \"\";\n\t\t\t\t\tdiv.lineWidth = undefined;\n\t\t\t\t}\n\t\t\t\tvar frag = doc.createDocumentFragment();\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\trange = ranges[i];\n\t\t\t\t\ttext = range.text;\n\t\t\t\t\tstyle = range.style;\n\t\t\t\t\tspan = this._createSpan(lineDiv, text, style, range.ignoreChars);\n\t\t\t\t\tfrag.appendChild(span);\n\t\t\t\t}\n\t\t\t\tlineDiv.appendChild(frag);\n\t\t\t} else {\n\t\t\t\tvar changeCount, changeStart;\n\t\t\t\tif (div) {\n\t\t\t\t\tvar modelChangedEvent = div.modelChangedEvent;\n\t\t\t\t\tif (modelChangedEvent) {\n\t\t\t\t\t\tif (modelChangedEvent.removedLineCount === 0 && modelChangedEvent.addedLineCount === 0) {\n\t\t\t\t\t\t\tchangeStart = modelChangedEvent.start - lineStart;\n\t\t\t\t\t\t\tchangeCount = modelChangedEvent.addedCharCount - modelChangedEvent.removedCharCount;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchangeStart = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiv.modelChangedEvent = undefined;\n\t\t\t\t\t}\n\t\t\t\t\toldSpan = div.firstChild;\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\trange = ranges[i];\n\t\t\t\t\ttext = range.text;\n\t\t\t\t\tend += text.length;\n\t\t\t\t\tstyle = range.style;\n\t\t\t\t\tif (oldSpan) {\n\t\t\t\t\t\toldText = oldSpan.firstChild.data;\n\t\t\t\t\t\toldStyle = oldSpan.viewStyle;\n\t\t\t\t\t\tif (oldText === text && compare(style, oldStyle)) {\n\t\t\t\t\t\t\toldEnd += oldText.length;\n\t\t\t\t\t\t\toldSpan._rectsCache = undefined;\n\t\t\t\t\t\t\tspan = oldSpan = oldSpan.nextSibling;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twhile (oldSpan) {\n\t\t\t\t\t\t\t\tif (changeStart !== -1) {\n\t\t\t\t\t\t\t\t\tvar spanEnd = end;\n\t\t\t\t\t\t\t\t\tif (spanEnd >= changeStart) {\n\t\t\t\t\t\t\t\t\t\tspanEnd -= changeCount;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar t = oldSpan.firstChild.data;\n\t\t\t\t\t\t\t\t\tvar len = t ? t.length : 0;\n\t\t\t\t\t\t\t\t\tif (oldEnd + len > spanEnd) { break; }\n\t\t\t\t\t\t\t\t\toldEnd += len;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnext = oldSpan.nextSibling;\n\t\t\t\t\t\t\t\tlineDiv.removeChild(oldSpan);\n\t\t\t\t\t\t\t\toldSpan = next;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tspan = this._createSpan(lineDiv, text, style, range.ignoreChars);\n\t\t\t\t\tif (oldSpan) {\n\t\t\t\t\t\tlineDiv.insertBefore(span, oldSpan);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineDiv.appendChild(span);\n\t\t\t\t\t}\n\t\t\t\t\tif (div) {\n\t\t\t\t\t\tdiv.lineWidth = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (div) {\n\t\t\t\t\tvar tmp = span ? span.nextSibling : null;\n\t\t\t\t\twhile (tmp) {\n\t\t\t\t\t\tnext = tmp.nextSibling;\n\t\t\t\t\t\tdiv.removeChild(tmp);\n\t\t\t\t\t\ttmp = next;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!lineDiv.parentNode) {\n\t\t\t\t_parent.appendChild(lineDiv);\n\t\t\t}\n\t\t\treturn lineDiv;\n\t\t},\n\t\t_createRanges: function(ranges, text, start, end, lineStart, data) {\n\t\t\tif (start > end) { return; }\n\t\t\tif (ranges) {\n\t\t\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\t\t\tvar range = ranges[i];\n\t\t\t\t\tif (range.end < lineStart + start) { continue; }\n\t\t\t\t\tvar styleStart = Math.max(lineStart + start, range.start) - lineStart;\n\t\t\t\t\tif (styleStart > end) { break; }\n\t\t\t\t\tvar styleEnd = Math.min(lineStart + end, range.end) - lineStart;\n\t\t\t\t\tif (styleStart <= styleEnd) {\n\t\t\t\t\t\tstyleStart = Math.max(start, styleStart);\n\t\t\t\t\t\tstyleEnd = Math.min(end, styleEnd);\n\t\t\t\t\t\tif (start < styleStart) {\n\t\t\t\t\t\t\tthis._createRange(text, start, styleStart, null, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!range.style || !range.style.unmergeable) {\n\t\t\t\t\t\t\twhile (i + 1 < ranges.length && ranges[i + 1].start - lineStart === styleEnd && compare(range.style, ranges[i + 1].style)) {\n\t\t\t\t\t\t\t\trange = ranges[i + 1];\n\t\t\t\t\t\t\t\tstyleEnd = Math.min(lineStart + end, range.end) - lineStart;\n\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._createRange(text, styleStart, styleEnd, range.style, data);\n\t\t\t\t\t\tstart = styleEnd;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\tthis._createRange(text, start, end, null, data);\n\t\t\t}\n\t\t},\n\t\t_createRange: function(text, start, end, style, data) {\n\t\t\tif (start > end) { return; }\n\t\t\tvar tabSize = this.view._customTabSize, range;\n\t\t\tvar bidiStyle = {tagName:\"span\", bidi:true, style:{unicodeBidi:\"embed\", direction:\"ltr\"}};\n\t\t\tvar bidiRange = {text: \"\\u200E\", style: bidiStyle}; // We ensure segments flow from left to right by adding a LRM marker \\u200E\n\t\t\tif (tabSize && tabSize !== 8) {\n\t\t\t\tvar tabIndex = text.indexOf(\"\\t\", start); //$NON-NLS-1$\n\t\t\t\twhile (tabIndex !== -1 && tabIndex < end) {\n\t\t\t\t\tif (start < tabIndex) {\n\t\t\t\t\t\trange = {text: text.substring(start, tabIndex), style: style};\n\t\t\t\t\t\tdata.ranges.push(range);\n\t\t\t\t\t\tif (bidiUtils.isBidiEnabled) {\n\t\t\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t\t\t}\n\t\t\t\t\tvar spacesCount = tabSize - (data.tabOffset % tabSize);\n\t\t\t\t\tif (spacesCount > 0) {\n\t\t\t\t\t\t//TODO hack to preserve tabs in getDOMText()\n\t\t\t\t\t\tvar spaces = \"\\u00A0\"; //$NON-NLS-1$\n\t\t\t\t\t\tfor (var i = 1; i < spacesCount; i++) {\n\t\t\t\t\t\t\tspaces += \" \"; //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trange = {text: spaces, style: style, ignoreChars: spacesCount - 1};\n\t\t\t\t\t\tdata.ranges.push(range);\n\t\t\t\t\t\tif (bidiUtils.isBidiEnabled) {\n\t\t\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t\t\t}\n\t\t\t\t\tstart = tabIndex + 1;\n\t\t\t\t\tif (start === end) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttabIndex = text.indexOf(\"\\t\", start); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (start <= end) {\n\t\t\t\trange = {text: text.substring(start, end), style: style};\n\t\t\t\tdata.ranges.push(range);\n\t\t\t\tif (bidiUtils.isBidiEnabled) {\n\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t}\n\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t}\n\t\t},\n\t\t_createSpan: function(_parent, text, style, ignoreChars) {\n\t\t\tvar view = this.view;\n\t\t\tvar tagName = \"span\"; //$NON-NLS-1$\n\t\t\tif (style && style.tagName) {\n\t\t\t\ttagName = style.tagName.toLowerCase();\n\t\t\t}\n\t\t\tvar isLink = tagName === \"a\"; //$NON-NLS-1$\n\t\t\tif (isLink) { this.hasLink = true; }\n\t\t\tif (isLink && !view._linksVisible) {\n\t\t\t\ttagName = \"span\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar child = util.createElement(_parent.ownerDocument, tagName);\n\t\t\tchild.appendChild(doc.createTextNode(style && style.text ? style.text : text));\n\t\t\tif (style && style.html) {\n\t\t\t\tchild.innerHTML = style.html;\n\t\t\t\tchild.ignore = true;\n\t\t\t} else if (style && style.node) {\n\t\t\t\tchild.appendChild(style.node);\n\t\t\t\tchild.ignore = true;\n\t\t\t} else if (style && style.bidi) {\t\t\t\t\n\t\t\t\tchild.ignore = true;\n\t\t\t}\n\t\t\tapplyStyle(style, child);\n\t\t\tif (tagName === \"a\") { //$NON-NLS-1$\n\t\t\t\tvar win = view._getWindow();\n\t\t\t\taddHandler(child, \"click\", function(e) { return view._handleLinkClick(e ? e : win.event); }, false); //$NON-NLS-1$\n\t\t\t}\n\t\t\tchild.viewStyle = style;\n\t\t\tif (ignoreChars) {\n\t\t\t\tchild.ignoreChars = ignoreChars;\n\t\t\t}\n\t\t\treturn child;\n\t\t},\n\t\t_ensureCreated: function() {\n\t\t\tif (this._lineDiv) { return this._lineDiv; }\n\t\t\treturn (this._createdDiv = this.create(this.view._clientDiv, null));\n\t\t},\n\t\t/** @private */\n\t\tgetBoundingClientRect: function(offset, absolute) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar view = this.view;\n\t\t\tif (offset === undefined) {\n\t\t\t\treturn this._getLineBoundingClientRect(child, true);\n\t\t\t}\n\t\t\tvar model = view._model;\n\t\t\tvar doc = child.ownerDocument;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar result = null;\n\t\t\tif (offset < model.getLineEnd(lineIndex)) {\n\t\t\t\tvar lineOffset = model.getLineStart(lineIndex);\n\t\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\t\tvar nodeLength = this._nodeLength(lineChild); \n\t\t\t\t\tif (lineOffset + nodeLength > offset) {\n\t\t\t\t\t\tvar index = offset - lineOffset;\n\t\t\t\t\t\tvar range;\n\t\t\t\t\t\tif (textNode.length === 1) {\n\t\t\t\t\t\t\tresult = new TextRect(lineChild.getBoundingClientRect());\n\t\t\t\t\t\t} else if (view._isRangeRects) {\n\t\t\t\t\t\t\trange = doc.createRange();\n\t\t\t\t\t\t\trange.setStart(textNode, index);\n\t\t\t\t\t\t\trange.setEnd(textNode, index + 1);\n\t\t\t\t\t\t\tresult = new TextRect(range.getBoundingClientRect());\n\t\t\t\t\t\t} else if (util.isIE) {\n\t\t\t\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.collapse();\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t* Bug in IE8. TextRange.getClientRects() and TextRange.getBoundingClientRect() fails\n\t\t\t\t\t\t\t* if the line child is not the first element in the line and if the start offset is 0. \n\t\t\t\t\t\t\t* The fix is to use Node.getClientRects() left edge instead.\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tvar fixIE8 = index === 0 && util.isIE === 8;\n\t\t\t\t\t\t\tif (fixIE8) { index = 1; }\n\t\t\t\t\t\t\trange.moveEnd(\"character\", index + 1); //$NON-NLS-1$\n\t\t\t\t\t\t\trange.moveStart(\"character\", index); //$NON-NLS-1$\n\t\t\t\t\t\t\tresult = new TextRect(range.getBoundingClientRect());\n\t\t\t\t\t\t\tif (fixIE8) {\n\t\t\t\t\t\t\t\tresult.left = lineChild.getClientRects()[0].left;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar text = textNode.data;\n\t\t\t\t\t\t\tlineChild.removeChild(textNode);\n\t\t\t\t\t\t\tlineChild.appendChild(doc.createTextNode(text.substring(0, index)));\n\t\t\t\t\t\t\tvar span = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tspan.appendChild(doc.createTextNode(text.substring(index, index + 1)));\n\t\t\t\t\t\t\tlineChild.appendChild(span);\n\t\t\t\t\t\t\tlineChild.appendChild(doc.createTextNode(text.substring(index + 1)));\n\t\t\t\t\t\t\tresult = new TextRect(span.getBoundingClientRect());\n\t\t\t\t\t\t\tlineChild.innerHTML = \"\";\n\t\t\t\t\t\t\tlineChild.appendChild(textNode);\n\t\t\t\t\t\t\tif (!this._createdDiv) {\n\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t * Removing the element node that holds the selection start or end\n\t\t\t\t\t\t\t\t * causes the selection to be lost. The fix is to detect this case\n\t\t\t\t\t\t\t\t * and restore the selection. \n\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t\tvar s = view._getSelections()[0];\n\t\t\t\t\t\t\t\tif ((lineOffset <= s.start && s.start < lineOffset + nodeLength) ||  (lineOffset <= s.end && s.end < lineOffset + nodeLength)) {\n\t\t\t\t\t\t\t\t\tview._updateDOMSelection();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (util.isIE < 11) {\n\t\t\t\t\t\t\tvar win = getWindow(child.ownerDocument);\n\t\t\t\t\t\t\tvar xFactor = win.screen.logicalXDPI / win.screen.deviceXDPI;\n\t\t\t\t\t\t\tvar yFactor = win.screen.logicalYDPI / win.screen.deviceYDPI;\n\t\t\t\t\t\t\tresult.left = result.left * xFactor;\n\t\t\t\t\t\t\tresult.right = result.right * xFactor;\n\t\t\t\t\t\t\tresult.top = result.top * yFactor;\n\t\t\t\t\t\t\tresult.bottom = result.bottom * yFactor;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tlineOffset += nodeLength;\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar rect = this.getBoundingClientRect();\n\t\t\tif (!result) {\n\t\t\t\tif (view._wrapMode) {\n\t\t\t\t\tvar rects = this.getClientRects();\n\t\t\t\t\tresult = rects[rects.length - 1];\n\t\t\t\t\tresult.left = result.right;\n\t\t\t\t\tresult.left += rect.left;\n\t\t\t\t\tresult.top += rect.top;\n\t\t\t\t\tresult.right += rect.left;\n\t\t\t\t\tresult.bottom += rect.top;\n\t\t\t\t} else {\n\t\t\t\t\tresult = new TextRect(rect);\n\t\t\t\t\tresult.left = result.right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (absolute || absolute === undefined) {\n\t\t\t\tresult.left -= rect.left;\n\t\t\t\tresult.top -= rect.top;\n\t\t\t\tresult.right -= rect.left;\n\t\t\t\tresult.bottom -= rect.top;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tforEach: function(callback) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar lineChild = child.firstChild;\n\t\t\twhile (lineChild) {\n\t\t\t\tvar next = lineChild.nextSibling;\n\t\t\t\tif (!lineChild.ignore) {\n\t\t\t\t\tif (!callback.call(this, lineChild)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlineChild = next;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\t_getClientRects: function(element, parentRect) {\n\t\t\tvar rects, newRects, rect, i;\n\t\t\tif (!element._rectsCache) {\n\t\t\t\trects = element.getClientRects();\n\t\t\t\tnewRects = newArray(rects.length);\n\t\t\t\tfor (i = 0; i<rects.length; i++) {\n\t\t\t\t\trect = newRects[i] = new TextRect(rects[i]);\n\t\t\t\t\trect.left -= parentRect.left;\n\t\t\t\t\trect.top -= parentRect.top;\n\t\t\t\t\trect.right -= parentRect.left;\n\t\t\t\t\trect.bottom -= parentRect.top;\n\t\t\t\t}\n\t\t\t\telement._rectsCache = newRects;\n\t\t\t}\n\t\t\trects = element._rectsCache;\n\t\t\tnewRects = [rects.length];\n\t\t\tfor (i = 0; i<rects.length; i++) {\n\t\t\t\tnewRects[i] = new TextRect(rects[i]);\n\t\t\t}\n\t\t\treturn newRects;\n\t\t},\n\t\tgetClientRects: function(lineIndex) {\n\t\t\tif (!this.view._wrapMode) { return [this.getBoundingClientRect()]; }\n\t\t\tvar child = this._ensureCreated();\n\t\t\t//TODO [perf] cache rects\n\t\t\tvar result = [];\n\t\t\tvar parentRect = child.getBoundingClientRect();\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar rects = this._getClientRects(lineChild, parentRect);\n\t\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\t\tvar rect = rects[i], j, r;\n\t\t\t\t\tif (rect.top === rect.bottom) { continue; }\n\t\t\t\t\tvar center = rect.top + (rect.bottom - rect.top) / 2;\n\t\t\t\t\tfor (j = 0; j < result.length; j++) {\n\t\t\t\t\t\tr = result[j];\n\t\t\t\t\t\tif ((r.top <= center && center < r.bottom)) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (j === result.length) {\n\t\t\t\t\t\tresult.push(rect);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (rect.left < r.left) { r.left = rect.left; }\n\t\t\t\t\t\tif (rect.top < r.top) { r.top = rect.top; }\n\t\t\t\t\t\tif (rect.right > r.right) { r.right = rect.right; }\n\t\t\t\t\t\tif (rect.bottom > r.bottom) { r.bottom = rect.bottom; }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tif (lineIndex !== undefined) {\n\t\t\t\treturn result[lineIndex];\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/** @private */\n\t\t_getLineBoundingClientRect: function (child, noTrim) {\n\t\t\tvar rect = new TextRect(child.getBoundingClientRect());\n\t\t\tif (this.view._wrapMode) {\n\t\t\t} else {\n\t\t\t\trect.right = rect.left;\n\t\t\t\tvar lastChild = child.lastChild;\n\t\t\t\t//Remove any artificial trailing whitespace in the line\n\t\t\t\twhile (lastChild && lastChild.ignoreChars === lastChild.firstChild.length) {\n\t\t\t\t\tlastChild = lastChild.previousSibling;\n\t\t\t\t}\n\t\t\t\tif (lastChild) {\n\t\t\t\t\tvar lastRect = lastChild.getBoundingClientRect();\n\t\t\t\t\trect.right = lastRect.right + getLineTrim(child).right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (noTrim) {\n\t\t\t\tvar padding = getLineTrim(child);\n\t\t\t\trect.left = rect.left + padding.left;\n\t\t\t\trect.right = rect.right - padding.right;\n\t\t\t}\n\t\t\treturn rect;\n\t\t},\n\t\t/** @private */\n\t\tgetLineCount: function () {\n\t\t\tif (!this.view._wrapMode) { return 1; }\n\t\t\treturn this.getClientRects().length;\n\t\t},\n\t\t/** @private */\n\t\tgetLineIndex: function(offset) {\n\t\t\tif (!this.view._wrapMode) { return 0; }\n\t\t\tvar rects = this.getClientRects();\n\t\t\tvar rect = this.getBoundingClientRect(offset);\n\t\t\tvar center = rect.top + ((rect.bottom - rect.top) / 2);\n\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\tif (rects[i].top <= center && center < rects[i].bottom) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rects.length - 1;\n\t\t},\n\t\t/** @private */\n\t\tgetLineStart: function (lineIndex) {\n\t\t\tif (!this.view._wrapMode || lineIndex === 0) {\n\t\t\t\treturn this.view._model.getLineStart(this.lineIndex);\n\t\t\t}\n\t\t\tvar rects = this.getClientRects();\n\t\t\treturn this.getOffset(rects[lineIndex].left + 1, rects[lineIndex].top + 1);\n\t\t},\n\t\t_nodeLength: function(lineChild) {\n\t\t\tif (!lineChild || lineChild.ignore) return 0;\n\t\t\tvar len = lineChild.firstChild.length; \n\t\t\tif (lineChild.ignoreChars) {\n\t\t\t\tlen -= lineChild.ignoreChars;\n\t\t\t}\n\t\t\treturn len;\n\t\t},\n\t\tgetModelOffset: function(node, offset) {\n\t\t\tif (!node) { return 0; }\n\t\t\tvar lineOffset = 0;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\tif (textNode === node) {\n\t\t\t\t\tif (lineChild.ignoreChars) { lineOffset -= lineChild.ignoreChars; }\n\t\t\t\t\tlineOffset += offset;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (lineChild.ignoreChars) { lineOffset -= lineChild.ignoreChars; }\n\t\t\t\tlineOffset += textNode.data.length;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn Math.max(0, lineOffset) + this.view._model.getLineStart(this.lineIndex);\n\t\t},\n\t\tgetNodeOffset: function(modelOffset) {\n\t\t\tvar offset = 0;\n\t\t\tvar lineNode, lineNodeOffset;\n\t\t\tvar model = this.view._model;\n\t\t\tvar lineStart = model.getLineStart(this.lineIndex);\n\t\t\tvar lineOffset = modelOffset - lineStart;\n\t\t\tvar end = model.getLineEnd(this.lineIndex) - lineStart;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar node = lineChild.firstChild;\n\t\t\t\tvar nodeLength = this._nodeLength(lineChild);\n\t\t\t\tif (nodeLength + offset > lineOffset || offset + nodeLength >= end) {\n\t\t\t\t\tlineNode = node;\n\t\t\t\t\tlineNodeOffset = lineOffset - offset;\n\t\t\t\t\tif (lineChild.ignoreChars && nodeLength > 0 && lineNodeOffset === nodeLength) {\n\t\t\t\t\t\tlineNodeOffset += lineChild.ignoreChars; \n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\toffset += nodeLength;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn {node: lineNode, offset: lineNodeOffset};\n\t\t},\n\t\tgetText: function(offsetNode) {\n\t\t\tvar text = \"\", offset = 0;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar textNode;\n\t\t\t\tif (lineChild.ignoreChars) {\n\t\t\t\t\ttextNode = lineChild.lastChild;\n\t\t\t\t\tvar ignored = 0, childText = [], childOffset = -1;\n\t\t\t\t\twhile (textNode) {\n\t\t\t\t\t\tvar data = textNode.data;\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tfor (var i = data.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\t\tvar ch = data.substring(i, i + 1);\n\t\t\t\t\t\t\t\tif (ignored < lineChild.ignoreChars && (ch === \" \" || ch === \"\\uFEFF\")) { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tignored++;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tchildText.push(ch === \"\\u00A0\" ? \"\\t\" : ch); //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (offsetNode === textNode) {\n\t\t\t\t\t\t\tchildOffset = childText.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttextNode = textNode.previousSibling;\n\t\t\t\t\t}\n\t\t\t\t\tchildText = childText.reverse().join(\"\");\n\t\t\t\t\tif (childOffset !== -1) {\n\t\t\t\t\t\toffset = text.length + childText.length - childOffset;\n\t\t\t\t\t}\n\t\t\t\t\ttext += childText;\n\t\t\t\t} else {\n\t\t\t\t\ttextNode = lineChild.firstChild;\n\t\t\t\t\twhile (textNode) {\n\t\t\t\t\t\tif (offsetNode === textNode) {\n\t\t\t\t\t\t\toffset = text.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext += textNode.data;\n\t\t\t\t\t\ttextNode = textNode.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn {text: text, offset: offset};\n\t\t},\n\t\t/** @private */\n\t\tgetOffset: function(x, y) {\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tif (lineStart === lineEnd) {\n\t\t\t\treturn lineStart;\n\t\t\t}\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar lineRect = this.getBoundingClientRect();\n\t\t\t\n\t\t\tvar that = this;\n\t\t\tfunction hitChild(lineChild, offset, rect) {\n\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\tvar nodeLength = that._nodeLength(lineChild);\n\t\t\t\tvar doc = child.ownerDocument;\n\t\t\t\tvar win = getWindow(doc);\n\t\t\t\tvar xFactor = util.isIE < 11 ? win.screen.logicalXDPI / win.screen.deviceXDPI : 1;\n\t\t\t\tvar yFactor = util.isIE < 11 ? win.screen.logicalYDPI / win.screen.deviceYDPI : 1;\n\t\t\t\tvar rangeLeft, rangeTop, rangeRight, rangeBottom;\n\t\t\t\tvar range, start, end;\n\t\t\t\tvar rl = rect.left + lineRect.left, fixIE8, rects1;\n\t\t\t\tif (util.isIE || view._isRangeRects) {\n\t\t\t\t\trange = view._isRangeRects ? doc.createRange() : doc.body.createTextRange();\n\t\t\t\t\tvar high = nodeLength;\n\t\t\t\t\tvar low = -1;\n\t\t\t\t\twhile ((high - low) > 1) {\n\t\t\t\t\t\tvar mid = Math.floor((high + low) / 2);\n\t\t\t\t\t\tstart = low + 1;\n\t\t\t\t\t\tend = mid === nodeLength - 1 && lineChild.ignoreChars ? textNode.length : mid + 1;\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t* Bug in IE8. TextRange.getClientRects() and TextRange.getBoundingClientRect() fails\n\t\t\t\t\t\t* if the line child is not the first element in the line and if the start offset is 0. \n\t\t\t\t\t\t* The fix is to use Node.getClientRects() left edge instead.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tfixIE8 = start === 0 && util.isIE === 8;\n\t\t\t\t\t\tif (view._isRangeRects) {\n\t\t\t\t\t\t\trange.setStart(textNode, start);\n\t\t\t\t\t\t\trange.setEnd(textNode, end);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (fixIE8) { start = 1; } \n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.move(\"character\", start); //$NON-NLS-1$\n\t\t\t\t\t\t\trange.moveEnd(\"character\", end - start); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trects1 = range.getClientRects();\n\t\t\t\t\t\tvar found = false;\n\t\t\t\t\t\tfor (var k = 0; k < rects1.length; k++) {\n\t\t\t\t\t\t\trect = rects1[k];\n\t\t\t\t\t\t\trangeLeft = (fixIE8 ? rl : rect.left) * xFactor - lineRect.left;\n\t\t\t\t\t\t\trangeRight = rect.right * xFactor - lineRect.left;\n\t\t\t\t\t\t\trangeTop = rect.top * yFactor - lineRect.top;\n\t\t\t\t\t\t\trangeBottom = rect.bottom * yFactor - lineRect.top;\n\t\t\t\t\t\t\tif (rangeLeft <= x && x < rangeRight && (!view._wrapMode || (rangeTop <= y && y <= rangeBottom))) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\thigh = mid;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlow = mid;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\toffset += high;\n\t\t\t\t\tstart = high;\n\t\t\t\t\tend = high === nodeLength - 1 && lineChild.ignoreChars ? textNode.length : Math.min(high + 1, textNode.length);\n\t\t\t\t\tif (view._isRangeRects) {\n\t\t\t\t\t\trange.setStart(textNode, start);\n\t\t\t\t\t\trange.setEnd(textNode, end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\trange.move(\"character\", start); //$NON-NLS-1$\n\t\t\t\t\t\trange.moveEnd(\"character\", end - start); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\trects1 = range.getClientRects();\n\t\t\t\t\tvar trailing = false;\n\t\t\t\t\tif (rects1.length > 0) {\n\t\t\t\t\t\trect = rects1[0];\n\t\t\t\t\t\trangeLeft = (fixIE8 ? rl : rect.left) * xFactor - lineRect.left;\n\t\t\t\t\t\trangeRight = rect.right * xFactor - lineRect.left;\n\t\t\t\t\t\t//TODO test for character trailing (wrong for bidi)\n\t\t\t\t\t\ttrailing = x > (rangeLeft + (rangeRight - rangeLeft) / 2);\n\t\t\t\t\t}\n\t\t\t\t\t// Handle Unicode surrogates\n\t\t\t\t\tvar offsetInLine = offset - lineStart;\n\t\t\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\t\t\tvar c = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF && trailing) {\n\t\t\t\t\t\tif (offsetInLine < lineText.length) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine + 1);\n\t\t\t\t\t\t\tif (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\t\t\t\t\toffset += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (0xDC00 <= c && c <= 0xDFFF && !trailing) {\n\t\t\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\t\t\toffset -= 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (trailing) {\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar newText = [];\n\t\t\t\t\tfor (var q = 0; q < nodeLength; q++) {\n\t\t\t\t\t\tnewText.push(\"<span>\"); //$NON-NLS-1$\n\t\t\t\t\t\tif (q === nodeLength - 1) {\n\t\t\t\t\t\t\tnewText.push(textNode.data.substring(q));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewText.push(textNode.data.substring(q, q + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewText.push(\"</span>\"); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\tlineChild.innerHTML = newText.join(\"\");\n\t\t\t\t\tvar rangeChild = lineChild.firstChild;\n\t\t\t\t\twhile (rangeChild) {\n\t\t\t\t\t\trect = rangeChild.getBoundingClientRect();\n\t\t\t\t\t\trangeLeft = rect.left - lineRect.left;\n\t\t\t\t\t\trangeRight = rect.right - lineRect.left;\n\t\t\t\t\t\tif (rangeLeft <= x && x < rangeRight) {\n\t\t\t\t\t\t\t//TODO test for character trailing (wrong for bidi)\n\t\t\t\t\t\t\tif (x > rangeLeft + (rangeRight - rangeLeft) / 2) {\n\t\t\t\t\t\t\t\toffset++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t\trangeChild = rangeChild.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\tif (!that._createdDiv) {\n\t\t\t\t\t\tlineChild.innerHTML = \"\";\n\t\t\t\t\t\tlineChild.appendChild(textNode);\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * Removing the element node that holds the selection start or end\n\t\t\t\t\t\t * causes the selection to be lost. The fix is to detect this case\n\t\t\t\t\t\t * and restore the selection. \n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar s = view._getSelections()[0];\n\t\t\t\t\t\tif ((offset <= s.start && s.start < offset + nodeLength) || (offset <= s.end && s.end < offset + nodeLength)) {\n\t\t\t\t\t\t\tview._updateDOMSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn offset;\n\t\t\t}\n\t\t\t\n\t\t\tvar rects, rect;\n\t\t\tif (view._wrapMode) {\n\t\t\t\trects = this.getClientRects();\n\t\t\t\tif (y < rects[0].top) {\n\t\t\t\t\ty = rects[0].top;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\t\trect = rects[i];\n\t\t\t\t\tif (rect.top <= y && y < rect.bottom) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (x < rect.left) { x = rect.left; }\n\t\t\t\tif (x > rect.right) { x = rect.right - 1; }\n\t\t\t} else {\n\t\t\t\tif (x < 0) { x = 0; }\n\t\t\t\tif (x > (lineRect.right - lineRect.left)) { x = lineRect.right - lineRect.left; }\n\t\t\t}\n\t\t\t\n\t\t\tfunction hitRects(child) {\n\t\t\t\tif (child.ignore) return null;\n\t\t\t\tvar rects1 = that._getClientRects(child, lineRect);\n\t\t\t\tfor (var j = 0; j < rects1.length; j++) {\n\t\t\t\t\tvar rect1 = rects1[j];\n\t\t\t\t\tif (rect1.left <= x && x < rect1.right && (!view._wrapMode || (rect1.top <= y && y <= rect1.bottom))) {\n\t\t\t\t\t\treturn rect1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\tvar offset, lineChild;\n\t\t\tif (this._lastHitChild && this._lastHitChild.parentNode) {\n\t\t\t\t// Search last hit child first, then search around the last hit child\n\t\t\t\toffset = this._lastHitOffset;\n\t\t\t\tlineChild = this._lastHitChild;\n\t\t\t\trect = hitRects(lineChild);\n\t\t\t\tif (!rect ) {\n\t\t\t\t\tvar previousOffset = offset, nextOffset = offset + this._nodeLength(lineChild);\n\t\t\t\t\tvar previousChild = lineChild.previousSibling, nextChild = lineChild.nextSibling;\n\t\t\t\t\twhile (previousChild || nextChild) {\n\t\t\t\t\t\tif (previousChild) {\n\t\t\t\t\t\t\tpreviousOffset -= this._nodeLength(previousChild);\n\t\t\t\t\t\t\tif ((rect = hitRects(previousChild))) {\n\t\t\t\t\t\t\t\tlineChild = previousChild;\n\t\t\t\t\t\t\t\toffset = previousOffset;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousChild = previousChild.previousSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (nextChild) {\n\t\t\t\t\t\t\tif ((rect = hitRects(nextChild))) {\n\t\t\t\t\t\t\t\tlineChild = nextChild;\n\t\t\t\t\t\t\t\toffset = nextOffset;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnextOffset += this._nodeLength(nextChild);\n\t\t\t\t\t\t\tnextChild = nextChild.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Start searching from the beginning of the line\n\t\t\t\toffset = lineStart;\n\t\t\t\tthis.forEach(function(c) {\n\t\t\t\t\tlineChild = c;\n\t\t\t\t\tif ((rect = hitRects(lineChild))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\toffset += this._nodeLength(lineChild);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif (lineChild && rect) {\n\t\t\t\t// Cache the last hit child\n\t\t\t\tthis._lastHitChild = lineChild;\n\t\t\t\tthis._lastHitOffset = offset;\n\n\t\t\t\toffset = hitChild(lineChild, offset, rect);\n\t\t\t}\n\n\t\t\treturn Math.min(lineEnd, Math.max(lineStart, offset));\n\t\t},\n\t\t/** @private */\n\t\tgetNextOffset: function (offset, data) {\n\t\t\tif (data.unit === \"line\") { //$NON-NLS-1$\n\t\t\t\tvar view = this.view;\n\t\t\t\tvar model = view._model;\n\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\tif (data.count > 0) {\n\t\t\t\t\tdata.count--;\n\t\t\t\t\treturn model.getLineEnd(lineIndex);\n\t\t\t\t}\n\t\t\t\tdata.count++;\n\t\t\t\treturn model.getLineStart(lineIndex);\n\t\t\t}\n\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordWS\" || data.unit === \"wordendWS\") { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\treturn this._getNextOffset_W3C(offset, data);\n\t\t\t}\n\t\t\treturn util.isIE ? this._getNextOffset_IE(offset, data) : this._getNextOffset_W3C(offset, data);\n\t\t},\n\t\t/** @private */\n\t\t_getNextOffset_W3C: function (offset, data) {\n\t\t\tfunction _isPunctuation(c) {\n\t\t\t\treturn (33 <= c && c <= 47) || (58 <= c && c <= 64) || (91 <= c && c <= 94) || c === 96 || (123 <= c && c <= 126);\n\t\t\t}\n\t\t\tfunction _isWhitespace(c) {\n\t\t\t\treturn c === 32 || c === 9;\n\t\t\t}\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tvar lineLength = lineText.length;\n\t\t\tvar offsetInLine = offset - lineStart;\n\t\t\tvar c;\n\t\t\tvar step = data.count < 0 ? -1 : 1;\n\t\t\tif (data.unit === \"word\" || data.unit === \"wordend\" || data.unit === \"wordWS\" || data.unit === \"wordendWS\") { //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tvar previousPunctuation, previousLetterOrDigit, punctuation, letterOrDigit;\n\t\t\t\twhile (data.count !== 0) {\n\t\t\t\t\tif (data.count > 0) {\n\t\t\t\t\t\tif (offsetInLine === lineLength) { return lineEnd; }\n\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\tpreviousPunctuation = _isPunctuation(c); \n\t\t\t\t\t\tpreviousLetterOrDigit = !previousPunctuation && !_isWhitespace(c);\n\t\t\t\t\t\toffsetInLine++;\n\t\t\t\t\t\twhile (offsetInLine < lineLength) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\t\tif (data.unit !== \"wordWS\" && data.unit !== \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tpunctuation = _isPunctuation(c);\n\t\t\t\t\t\t\t\tif (data.unit === \"wordend\") { //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tif (!punctuation && previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (punctuation && !previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletterOrDigit  = !punctuation && !_isWhitespace(c);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tletterOrDigit  = !_isWhitespace(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tif (!letterOrDigit && previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (letterOrDigit && !previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousLetterOrDigit = letterOrDigit;\n\t\t\t\t\t\t\tpreviousPunctuation = punctuation;\n\t\t\t\t\t\t\toffsetInLine++;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (offsetInLine === 0) { return lineStart; }\n\t\t\t\t\t\toffsetInLine--;\n\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\tpreviousPunctuation = _isPunctuation(c); \n\t\t\t\t\t\tpreviousLetterOrDigit = !previousPunctuation && !_isWhitespace(c);\n\t\t\t\t\t\twhile (0 < offsetInLine) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (data.unit !== \"wordWS\" && data.unit !== \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$ \n\t\t\t\t\t\t\t\tpunctuation = _isPunctuation(c);\n\t\t\t\t\t\t\t\tif (data.unit === \"wordend\") { //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tif (punctuation && !previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!punctuation && previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletterOrDigit  = !punctuation && !_isWhitespace(c);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tletterOrDigit  = !_isWhitespace(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tif (letterOrDigit && !previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!letterOrDigit && previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousLetterOrDigit = letterOrDigit;\n\t\t\t\t\t\t\tpreviousPunctuation = punctuation;\n\t\t\t\t\t\t\toffsetInLine--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (offsetInLine === 0) {\n\t\t\t\t\t\t\t//get previous line\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata.count -= step;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (data.count !== 0 && (0 <= offsetInLine + step && offsetInLine + step <= lineLength)) {\n\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t// Handle Unicode surrogates\n\t\t\t\t\tif (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata.count -= step;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lineStart + offsetInLine;\n\t\t},\n\t\t/** @private */\n\t\t_getNextOffset_IE: function (offset, data) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar result = 0, range, len;\n\t\t\tvar lineOffset = model.getLineStart(lineIndex);\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar doc = child.ownerDocument;\n\t\t\tvar lineChild;\n\t\t\tvar step = data.count < 0 ? -1 : 1;\n\t\t\tif (offset === model.getLineEnd(lineIndex)) {\n\t\t\t\tlineChild = child.lastChild;\n\t\t\t\twhile (lineChild && lineChild.ignoreChars === lineChild.firstChild.length) {\n\t\t\t\t\tlineChild = lineChild.previousSibling;\n\t\t\t\t}\n\t\t\t\tif (!lineChild) {\n\t\t\t\t\treturn lineOffset;\n\t\t\t\t}\n\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\tlen = range.text.length;\n\t\t\t\trange.moveEnd(data.unit, step);\n\t\t\t\tresult = offset + range.text.length - len;\n\t\t\t} else if (offset === lineOffset && data.count < 0) {\n\t\t\t\tresult = lineOffset;\n\t\t\t} else {\n\t\t\t\tlineChild = child.firstChild;\n\t\t\t\twhile (lineChild) {\n\t\t\t\t\tvar nodeLength = this._nodeLength(lineChild);\n\t\t\t\t\tif (lineOffset + nodeLength > offset) {\n\t\t\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\t\t\tif (offset === lineOffset && data.count < 0) {\n\t\t\t\t\t\t\tvar temp = lineChild.previousSibling;\n\t\t\t\t\t\t\t// skip empty nodes\n\t\t\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\t\t\tif (temp.firstChild && temp.firstChild.length) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttemp = temp.previousSibling;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trange.moveToElementText(temp ? temp : lineChild.previousSibling);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.collapse();\n\t\t\t\t\t\t\trange.moveEnd(\"character\", offset - lineOffset); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlen = range.text.length;\n\t\t\t\t\t\trange.moveEnd(data.unit, step);\n\t\t\t\t\t\tresult = offset + range.text.length - len;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tlineOffset = nodeLength + lineOffset;\n\t\t\t\t\tlineChild = lineChild.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar offsetInLine = result - lineStart;\n\t\t\tvar c = lineText.charCodeAt(offsetInLine);\n\t\t\t// Handle Unicode surrogates\n\t\t\tif (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult = offsetInLine + lineStart;\n\t\t\tdata.count -= step;\n\t\t\treturn result;\n\t\t},\n\t\tupdateLinks: function() {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tif (!this.hasLink) { return; }\n\t\t\tvar that = this;\n\t\t\tthis.forEach(function(span) {\n\t\t\t\tvar style = span.viewStyle;\n\t\t\t\tif (style && style.tagName && style.tagName.toLowerCase() === \"a\") { //$NON-NLS-1$\n\t\t\t\t\tchild.replaceChild(that._createSpan(child, span.firstChild.data, style), span);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t},\n\t\t/** @private */\n\t\tdestroy: function() {\n\t\t\tvar div = this._createdDiv;\n\t\t\tif (div) {\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t\tthis._createdDiv = null;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * @class This object describes the options for the text view.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#setOptions}\n\t * {@link orion.editor.TextView#getOptions}\t \n\t * </p>\t\t \n\t * @name orion.editor.TextViewOptions\n\t *\n\t * @property {String|DOMElement} parent the parent element for the view, it can be either a DOM element or an ID for a DOM element.\n\t * @property {orion.editor.TextModel} [model] the text model for the view. If it is not set the view creates an empty {@link orion.editor.TextModel}.\n\t * @property {Boolean} [readonly=false] whether or not the view is read-only.\n\t * @property {Boolean} [fullSelection=true] whether or not the view is in full selection mode.\n\t * @property {Boolean} [tabMode=true] whether or not the tab keypress is consumed by the view or is used for focus traversal.\n\t * @property {Boolean} [expandTab=false] whether or not the tab key inserts white spaces.\n\t * @property {orion.editor.TextTheme} [theme=orion.editor.TextTheme.getTheme()] the TextTheme manager. TODO more info on this\n\t * @property {orion.editor.UndoStack} [undoStack] the Undo Stack.\n\t * @property {String} [themeClass] the CSS class for the view theming.\n\t * @property {Number} [tabSize=8] The number of spaces in a tab.\n\t * @property {Boolean} [overwriteMode=false] whether or not the view is in insert/overwrite mode.\n\t * @property {Boolean} [singleMode=false] whether or not the editor is in single line mode.\n\t * @property {Number} [marginOffset=0] the offset in a line where the print margin should be displayed. <code>0</code> means no print margin.\n\t * @property {Number} [wrapOffset=0] the offset in a line where text should wrap. <code>0</code> means wrap at the client area right edge.\n\t * @property {Boolean} [wrapMode=false] whether or not the view wraps lines.\n\t * @property {Boolean} [wrapable=false] whether or not the view is wrappable.\n\t * @property {Number} [scrollAnimation=0] the time duration in miliseconds for scrolling animation. <code>0</code> means no animation.\n\t * @property {Boolean} [blockCursorVisible=false] whether or not to show the block cursor.\n\t */\n\t/**\n\t * Constructs a new text view.\n\t * \n\t * @param {orion.editor.TextViewOptions} options the view options.\n\t * \n\t * @class A TextView is a user interface for editing text.\n\t * @name orion.editor.TextView\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction TextView (options) {\n\t\tthis._init(options || {});\n\t}\n\t\n\tTextView.prototype = /** @lends orion.editor.TextView.prototype */ {\n\t\t/**\n\t\t * Adds a keyMode to the text view at the specified position.\n\t\t *\n\t\t * @param {orion.editor.KeyMode} mode the editor keyMode.\n\t\t * @param {Number} [index=length] the index.\n\t\t */\n\t\taddKeyMode: function(mode, index) {\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tif (index !== undefined) {\n\t\t\t\tkeyModes.splice(index, 0, mode);\n\t\t\t} else {\n\t\t\t\tkeyModes.push(mode);\n\t\t\t}\n\t\t\t//TODO: API needed for this\n\t\t\tif (mode._modeAdded) {\n\t\t\t\tmode._modeAdded();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adds a ruler to the text view at the specified position.\n\t\t * <p>\n\t\t * The position is relative to the ruler location.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.Ruler} ruler the ruler.\n\t\t * @param {Number} [index=length] the ruler index.\n\t\t */\n\t\taddRuler: function (ruler, index) {\n\t\t\tvar rulers = this._rulers;\n\t\t\tif (index !== undefined) {\n\t\t\t\tvar i, sideIndex;\n\t\t\t\tfor (i = 0, sideIndex=0; i < rulers.length && sideIndex < index; i++) {\n\t\t\t\t\tif (ruler.getLocation() === rulers[i].getLocation()) {\n\t\t\t\t\t\tsideIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trulers.splice(sideIndex, 0, ruler);\n\t\t\t\tindex = sideIndex;\n\t\t\t} else {\n\t\t\t\trulers.push(ruler);\n\t\t\t}\n\t\t\tthis._createRuler(ruler, index);\n\t\t\truler.setView(this);\n\t\t\tthis._update();\n\t\t},\n\t\tcomputeSize: function() {\n\t\t\tvar w = 0, h = 0;\n\t\t\tvar model = this._model, clientDiv = this._clientDiv;\n\t\t\tif (!clientDiv) { return {width: w, height: h}; }\n\t\t\tvar clientWidth = clientDiv.style.width;\n\t\t\t/*\n\t\t\t* Feature in WekKit. Webkit limits the width of the lines\n\t\t\t* computed below to the width of the client div.  This causes\n\t\t\t* the lines to be wrapped even though \"pre\" is set.  The fix\n\t\t\t* is to set the width of the client div to a \"0x7fffffffpx\"\n\t\t\t* before computing the lines width.  Note that this value is\n\t\t\t* reset to the appropriate value further down.\n\t\t\t*/\n\t\t\tif (util.isWebkit) {\n\t\t\t\tclientDiv.style.width = \"0x7fffffffpx\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tfor (var lineIndex=0; lineIndex<lineCount; lineIndex++) {\n\t\t\t\tvar line = this._getLine(lineIndex);\n\t\t\t\tvar rect = line.getBoundingClientRect();\n\t\t\t\tw = Math.max(w, rect.right - rect.left);\n\t\t\t\th += rect.bottom - rect.top;\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tif (util.isWebkit) {\n\t\t\t\tclientDiv.style.width = clientWidth;\n\t\t\t}\n\t\t\tvar viewPadding = this._getViewPadding();\n\t\t\tw += viewPadding.right + viewPadding.left + this._metrics.scrollWidth;\n\t\t\th += viewPadding.bottom + viewPadding.top + this._metrics.scrollWidth;\n\t\t\treturn {width: w, height: h};\n\t\t},\n\t\t/**\n\t\t * Converts the given rectangle from one coordinate spaces to another.\n\t\t * <p>The supported coordinate spaces are:\n\t\t * <ul>\n\t\t *   <li>\"document\" - relative to document, the origin is the top-left corner of first line</li>\n\t\t *   <li>\"page\" - relative to html page that contains the text view</li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * <p>All methods in the view that take or return a position are in the document coordinate space.</p>\n\t\t *\n\t\t * @param rect the rectangle to convert.\n\t\t * @param rect.x the x of the rectangle.\n\t\t * @param rect.y the y of the rectangle.\n\t\t * @param rect.width the width of the rectangle.\n\t\t * @param rect.height the height of the rectangle.\n\t\t * @param {String} from the source coordinate space.\n\t\t * @param {String} to the destination coordinate space.\n\t\t *\n\t\t * @see orion.editor.TextView#getLocationAtOffset\n\t\t * @see orion.editor.TextView#getOffsetAtLocation\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t */\n\t\tconvert: function(rect, from, to) {\n\t\t\tif (!this._clientDiv) { return rect; }\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\tif (from === \"document\") { //$NON-NLS-1$\n\t\t\t\tif (rect.x !== undefined) {\n\t\t\t\t\trect.x += - _scroll.x + viewRect.left + viewPad.left;\n\t\t\t\t}\n\t\t\t\tif (rect.y !== undefined) {\n\t\t\t\t\trect.y += - _scroll.y + viewRect.top + viewPad.top;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//At this point rect is in the widget coordinate space\n\t\t\tif (to === \"document\") { //$NON-NLS-1$\n\t\t\t\tif (rect.x !== undefined) {\n\t\t\t\t\trect.x += _scroll.x - viewRect.left - viewPad.left;\n\t\t\t\t}\n\t\t\t\tif (rect.y !== undefined) {\n\t\t\t\t\trect.y += _scroll.y - viewRect.top - viewPad.top;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rect;\n\t\t},\n\t\t/**\n\t\t * Copies the selected text to the clipboard in plain text format.\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tcopy: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doCopy();\n\t\t},\n\t\t/**\n\t\t * Moves the selected text to the clipboard in plain text format.\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tcut: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doCut();\n\t\t},\n\t\t/**\n\t\t * Destroys the text view. \n\t\t * <p>\n\t\t * Removes the view from the page and frees all resources created by the view.\n\t\t * Calling this function causes the \"Destroy\" event to be fire so that all components\n\t\t * attached to view can release their references.\n\t\t * </p>\n\t\t *\n\t\t * @see orion.editor.TextView#onDestroy\n\t\t */\n\t\tdestroy: function() {\n\t\t\t/* Destroy rulers*/\n\t\t\tfor (var i=0; i< this._rulers.length; i++) {\n\t\t\t\tthis._rulers[i].setView(null);\n\t\t\t}\n\t\t\tthis.rulers = null;\n\t\t\t\n\t\t\tthis._destroyView();\n\n\t\t\tvar e = {type: \"Destroy\"}; //$NON-NLS-1$\n\t\t\tthis.onDestroy(e);\n\n\t\t\tthis._parent = null;\n\t\t\tif (this._model && this._model.destroy) {\n\t\t\t\tthis._model.destroy();\n\t\t\t}\n\t\t\tthis._model = null;\n\t\t\tthis._theme = null;\n\t\t\tthis._selection = null;\n\t\t\tthis._doubleClickSelection = null;\n\t\t\tthis._keyModes = null;\n\t\t\tthis._actions = null;\n\t\t},\n\t\t/**\n\t\t * Gives focus to the text view.\n\t\t */\n\t\tfocus: function() {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\t/*\n\t\t\t* Feature in Chrome. When focus is called in the clientDiv without\n\t\t\t* setting selection the browser will set the selection to the first dom \n\t\t\t* element, which can be above the client area. When this happen the \n\t\t\t* browser also scrolls the window to show that element.\n\t\t\t* The fix is to call _updateDOMSelection() before calling focus().\n\t\t\t*/\n\t\t\tthis._updateDOMSelection();\n\t\t\tthis._clientDiv.focus();\n\t\t\t/*\n\t\t\t* Feature in Safari. When focus is called the browser selects the clientDiv\n\t\t\t* itself. The fix is to call _updateDOMSelection() after calling focus().\n\t\t\t*/\n\t\t\tthis._updateDOMSelection();\n\t\t},\n\t\t/**\n\t\t * Check if the text view has focus.\n\t\t *\n\t\t * @returns {Boolean} <code>true</code> if the text view has focus, otherwise <code>false</code>.\n\t\t */\n\t\thasFocus: function() {\n\t\t\treturn this._hasFocus;\n\t\t},\n\t\t/**\n\t\t * Returns the action description for a given action ID.\n\t\t *\n\t\t * @returns {orion.editor.ActionDescrition} the action description\n\t\t */\n\t\tgetActionDescription: function(actionID) {\n\t\t\tvar action = this._actions[actionID];\n\t\t\tif (action) {\n\t\t\t\treturn action.actionDescription;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t\t/**\n\t\t * Returns all action IDs defined in the text view.\n\t\t * <p>\n\t\t * There are two types of actions, the predefined actions of the view \n\t\t * and the actions added by application code.\n\t\t * </p>\n\t\t * <p>\n\t\t * The predefined actions are:\n\t\t * <ul>\n\t\t *   <li>Navigation actions. These actions move the caret collapsing the selection.</li>\n\t\t *     <ul>\n\t\t *       <li>\"lineUp\" - moves the caret up by one line</li>\n\t\t *       <li>\"lineDown\" - moves the caret down by one line</li>\n\t\t *       <li>\"lineStart\" - moves the caret to beginning of the current line</li>\n\t\t *       <li>\"lineEnd\" - moves the caret to end of the current line </li>\n\t\t *       <li>\"charPrevious\" - moves the caret to the previous character</li>\n\t\t *       <li>\"charNext\" - moves the caret to the next character</li>\n\t\t *       <li>\"pageUp\" - moves the caret up by one page</li>\n\t\t *       <li>\"pageDown\" - moves the caret down by one page</li>\n\t\t *       <li>\"wordPrevious\" - moves the caret to the previous word</li>\n\t\t *       <li>\"wordNext\" - moves the caret to the next word</li>\n\t\t *       <li>\"textStart\" - moves the caret to the beginning of the document</li>\n\t\t *       <li>\"textEnd\" - moves the caret to the end of the document</li>\n\t\t *     </ul>\n\t\t *   <li>Selection actions. These actions move the caret extending the selection.</li>\n\t\t *     <ul>\n\t\t *       <li>\"selectLineUp\" - moves the caret up by one line</li>\n\t\t *       <li>\"selectLineDown\" - moves the caret down by one line</li>\n\t\t *       <li>\"selectLineStart\" - moves the caret to beginning of the current line</li>\n\t\t *       <li>\"selectLineEnd\" - moves the caret to end of the current line </li>\n\t\t *       <li>\"selectCharPrevious\" - moves the caret to the previous character</li>\n\t\t *       <li>\"selectCharNext\" - moves the caret to the next character</li>\n\t\t *       <li>\"selectPageUp\" - moves the caret up by one page</li>\n\t\t *       <li>\"selectPageDown\" - moves the caret down by one page</li>\n\t\t *       <li>\"selectWordPrevious\" - moves the caret to the previous word</li>\n\t\t *       <li>\"selectWordNext\" - moves the caret to the next word</li>\n\t\t *       <li>\"selectTextStart\" - moves the caret to the beginning of the document</li>\n\t\t *       <li>\"selectTextEnd\" - moves the caret to the end of the document</li>\n\t\t *       <li>\"selectAll\" - selects the entire document</li>\n\t\t *     </ul>\n\t\t *   <li>Edit actions. These actions modify the text view text</li>\n\t\t *     <ul>\n\t\t *       <li>\"deletePrevious\" - deletes the character preceding the caret</li>\n\t\t *       <li>\"deleteNext\" - deletes the charecter following the caret</li>\n\t\t *       <li>\"deleteWordPrevious\" - deletes the word preceding the caret</li>\n\t\t *       <li>\"deleteWordNext\" - deletes the word following the caret</li>\n\t\t *       <li>\"deleteLineStart\" - deletes characteres to the beginning of the line</li>\n\t\t *       <li>\"deleteLineEnd\" - deletes characteres to the end of the line</li>\n\t\t *       <li>\"tab\" - inserts a tab character at the caret</li>\n\t\t *       <li>\"shiftTab\" - noop</li>\n\t\t *       <li>\"enter\" - inserts a line delimiter at the caret</li>\n\t\t *       <li>\"uppercase\" - upper case the text at the caret</li>\n\t\t *       <li>\"lowercase\" - lower case the text at the caret</li>\n\t\t *       <li>\"capitalize\" - capitilize case the text at the caret</li>\n\t\t *       <li>\"reversecase\" - reverse the case the text at the caret</li>\n\t\t *     </ul>\n\t\t *   <li>Clipboard actions. These actions modify the view text as well</li>\n\t\t *     <ul>\n\t\t *       <li>\"copy\" - copies the selected text to the clipboard</li>\n\t\t *       <li>\"cut\" - copies the selected text to the clipboard and deletes the selection</li>\n\t\t *       <li>\"paste\" - replaces the selected text with the clipboard contents</li>\n\t\t *     </ul>\n\t\t *   <li>Scrolling actions.</li>\n\t\t *     <ul>\n\t\t *       <li>\"scrollLineUp\" - scrolls the view up by one line</li>\n\t\t *       <li>\"scrollLineDown\" - scrolls the view down by one line</li>\n\t\t *       <li>\"scrollPageUp\" - scrolls the view up by one page</li>\n\t\t *       <li>\"scrollPageDown\" - scrolls the view down by one page</li>\n\t\t *       <li>\"scrollTextStart\" - scrolls the view to the beginning of the document</li>\n\t\t *       <li>\"scrollTextEnd\" - scrolls the view to the end of the document</li>\n\t\t *     </ul>\n\t\t *   <li>Mode actions.</li>\n\t\t *     <ul>\n\t\t *       <li>\"toggleTabMode\" - toggles tab mode.</li>\n\t\t *       <li>\"toggleWrapMode\" - toggles wrap mode.</li>\n\t\t *       <li>\"toggleOverwriteMode\" - toggles overwrite mode.</li>\n\t\t *     </ul>\n\t\t * </ul>\n\t\t * </p>\n\t\t * \n\t\t * @param {Boolean} [defaultAction=false] whether or not the predefined actions are included.\n\t\t * @returns {String[]} an array of action IDs defined in the text view.\n\t\t *\n\t\t * @see orion.editor.TextView#invokeAction\n\t\t * @see orion.editor.TextView#setAction\n\t\t * @see orion.editor.TextView#setKeyBinding\n\t\t * @see orion.editor.TextView#getKeyBindings\n\t\t */\n\t\tgetActions: function (defaultAction) {\n\t\t\tvar result = [];\n\t\t\tvar actions = this._actions;\n\t\t\tfor (var i in actions) {\n\t\t\t\tif (actions.hasOwnProperty(i)) {\n\t\t\t\t\tif (!defaultAction && actions[i].defaultHandler) { continue; }\n\t\t\t\t\tresult.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns the bottom index.\n\t\t * <p>\n\t\t * The bottom index is the line that is currently at the bottom of the view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view. The parameter\n\t\t * <code>fullyVisible</code> determines whether to return only fully visible lines. \n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} [fullyVisible=false] if <code>true</code>, returns the index of the last fully visible line. This\n\t\t *    parameter is ignored if the view is not big enough to show one line.\n\t\t * @returns {Number} the index of the bottom line.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopIndex\n\t\t * @see orion.editor.TextView#setTopIndex\n\t\t */\n\t\tgetBottomIndex: function(fullyVisible) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getBottomIndex(fullyVisible);\n\t\t},\n\t\t/**\n\t\t * Returns the bottom pixel.\n\t\t * <p>\n\t\t * The bottom pixel is the pixel position that is currently at\n\t\t * the bottom edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the bottom pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetBottomPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().y + this._getClientHeight();\n\t\t},\n\t\t/**\n\t\t * Returns the caret offset relative to the start of the document.\n\t\t *\n\t\t * @returns {Number} the caret offset relative to the start of the document.\n\t\t *\n\t\t * @see orion.editor.TextView#setCaretOffset\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tgetCaretOffset: function () {\n\t\t\tvar s = this._getSelection();\n\t\t\treturn s.getCaret();\n\t\t},\n\t\t/**\n\t\t * Returns the client area.\n\t\t * <p>\n\t\t * The client area is the portion in pixels of the document that is visible. The\n\t\t * client area position is relative to the beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Object} the client area rectangle {x, y, width, height}.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#getHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetClientArea: function() {\n\t\t\tif (!this._clientDiv) { return {x: 0, y: 0, width: 0, height: 0}; }\n\t\t\tvar _scroll = this._getScroll();\n\t\t\treturn {x: _scroll.x, y: _scroll.y, width: this._getClientWidth(), height: this._getClientHeight()};\n\t\t},\n\t\t/**\n\t\t * Returns the horizontal pixel.\n\t\t * <p>\n\t\t * The horizontal pixel is the pixel position that is currently at\n\t\t * the left edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the horizontal pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#setHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetHorizontalPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().x;\n\t\t},\n\t\t/**\n\t\t * Returns all the key bindings associated to the given action ID.\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @returns {orion.KeyBinding[]} the array of key bindings associated to the given action ID.\n\t\t *\n\t\t * @see orion.editor.TextView#setKeyBinding\n\t\t * @see orion.editor.TextView#setAction\n\t\t */\n\t\tgetKeyBindings: function (actionID) {\n\t\t\tvar result = [];\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (var i = 0; i < keyModes.length; i++) {\n\t\t\t\tresult = result.concat(keyModes[i].getKeyBindings(actionID));\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns all the key modes added to text view.\n\t\t *\n\t\t * @returns {orion.editor.KeyMode[]} the array of key modes.\n\t\t *\n\t\t * @see orion.editor.TextView#addKeyMode\n\t\t * @see orion.editor.TextView#removeKeyMode\n\t\t */\n\t\tgetKeyModes: function() {\n\t\t\treturn this._keyModes.slice(0);\n\t\t},\n\t\t/**\n\t\t * Returns the line height for a given line index.  Returns the default line\n\t\t * height if the line index is not specified.\n\t\t *\n\t\t * @param {Number} [lineIndex] the line index.\n\t\t * @returns {Number} the height of the line in pixels.\n\t\t *\n\t\t * @see orion.editor.TextView#getLinePixel\n\t\t */\n\t\tgetLineHeight: function(lineIndex) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLineHeight(lineIndex);\n\t\t},\n\t\t/**\n\t\t * Returns the line index for a given line pixel position relative to the document.\n\t\t *\n\t\t * @param {Number} [y] the line pixel.\n\t\t * @returns {Number} the line index for the specified pixel position.\n\t\t *\n\t\t * @see orion.editor.TextView#getLinePixel\n\t\t */\n\t\tgetLineIndex: function(y) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLineIndex(y);\n\t\t},\n\t\t/**\n\t\t * @name isValidTextPosition\n\t\t * @description Return whether the given x/y pixel position, relative to the document, is inside of document text. \n\t\t * \t\t\t\tThis tests both whether the y position is below the text lines of the document as we as whether the\n\t\t * \t\t\t\tx position is within the text of the line.\n\t\t * @function\n\t\t * @param x {Number} [x] the x pixel position\n\t\t * @param y {Number} [y] the line pixel position\n\t\t * @returns returns {Boolean} true if the pixel position is over text content\n\t\t */\n\t\tisValidTextPosition: function(x, y){\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\t// Check if we are within a valid line\n\t\t\tvar lineIndex = this._getLineIndex(y, true);\n\t\t\tif (lineIndex < 0){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Get the closest offset to the position\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = this.getOffsetAtLocation(x, y);\n\t\t\t// If the closest offset is to the left of the character's bounds then position is outside the text on the line\n\t\t\tvar bounds = line.getBoundingClientRect(offset);\n\t\t\tline.destroy();\n\t\t\tif (x > bounds.right){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * Returns the top pixel position of a given line index relative to the beginning\n\t\t * of the document.\n\t\t * <p>\n\t\t * Clamps out of range indices.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the line index.\n\t\t * @returns {Number} the pixel position of the line.\n\t\t *\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#getLineIndex\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetLinePixel: function(lineIndex) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLinePixel(lineIndex);\n\t\t},\n\t\t/**\n\t\t * Returns the {x, y} pixel location of the top-left corner of the character\n\t\t * bounding box at the specified offset in the document.  The pixel location\n\t\t * is relative to the document.\n\t\t * <p>\n\t\t * Clamps out of range offsets.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} offset the character offset\n\t\t * @returns {Object} the {x, y} pixel location of the given offset.\n\t\t *\n\t\t * @see orion.editor.TextView#getOffsetAtLocation\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetLocationAtOffset: function(offset) {\n\t\t\tif (!this._clientDiv) { return {x: 0, y: 0}; }\n\t\t\tvar model = this._model;\n\t\t\toffset = Math.min(Math.max(0, offset), model.getCharCount());\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar rect = line.getBoundingClientRect(offset);\n\t\t\tline.destroy();\n\t\t\tvar x = rect.left;\n\t\t\tvar y = this._getLinePixel(lineIndex) + rect.top;\n\t\t\treturn {x: x, y: y};\n\t\t},\n\t\t/**\n\t\t * Returns the next character offset after the given offset and options\n\t\t *\n\t\t * @param {Number} offset the offset to start from\n\t\t * @param {Object} options\n\t\t *   { unit: the type of unit to advance to (eg \"character\", \"word\", \"wordend\", \"wordWS\", \"wordendWS\"),\n\t\t *    count: the number of units to advance (negative to advance backwards) }\n\t\t * @returns {Number} the next character offset\n\t\t */\n\t\tgetNextOffset: function(offset, options) {\n\t\t\tvar selection = new Selection(offset, offset, false);\n\t\t\tthis._doMove(options, selection);\n\t\t\treturn selection.getCaret();\n\t\t},\n\t\t/**\n\t\t * Returns the specified view options.\n\t\t * <p>\n\t\t * The returned value is either a <code>orion.editor.TextViewOptions</code> or an option value. An option value is returned when only one string parameter\n\t\t * is specified. A <code>orion.editor.TextViewOptions</code> is returned when there are no paremeters, or the parameters are a list of options names or a\n\t\t * <code>orion.editor.TextViewOptions</code>. All view options are returned when there no paremeters.\n\t\t * </p>\n\t\t *\n\t\t * @param {String|orion.editor.TextViewOptions} [options] The options to return.\n\t\t * @return {Object|orion.editor.TextViewOptions} The requested options or an option value.\n\t\t *\n\t\t * @see orion.editor.TextView#setOptions\n\t\t */\n\t\tgetOptions: function() {\n\t\t\tvar options;\n\t\t\tif (arguments.length === 0) {\n\t\t\t\toptions = this._defaultOptions();\n\t\t\t} else if (arguments.length === 1) {\n\t\t\t\tvar arg = arguments[0];\n\t\t\t\tif (typeof arg === \"string\") { //$NON-NLS-1$\n\t\t\t\t\treturn clone(this[\"_\" + arg]); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\toptions = arg;\n\t\t\t} else {\n\t\t\t\toptions = {};\n\t\t\t\tfor (var index in arguments) {\n\t\t\t\t\tif (arguments.hasOwnProperty(index)) {\n\t\t\t\t\t\toptions[arguments[index]] = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var option in options) {\n\t\t\t\tif (options.hasOwnProperty(option)) {\n\t\t\t\t\toptions[option] = clone(this[\"_\" + option]); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t},\n\t\t/**\n\t\t * Returns the text model of the text view.\n\t\t *\n\t\t * @returns {orion.editor.TextModel} the text model of the view.\n\t\t */\n\t\tgetModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Returns the character offset nearest to the given pixel location.  The\n\t\t * pixel location is relative to the document.\n\t\t *\n\t\t * @param x the x of the location\n\t\t * @param y the y of the location\n\t\t * @returns {Number} the character offset at the given location.\n\t\t *\n\t\t * @see orion.editor.TextView#getLocationAtOffset\n\t\t */\n\t\tgetOffsetAtLocation: function(x, y) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\tvar lineIndex = this._getLineIndex(y);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = line.getOffset(x, y - this._getLinePixel(lineIndex));\n\t\t\tline.destroy();\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * @name getLineAtOffset\n\t\t * @description Compute the editor line number for the given offset\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} offset The offset into the editor\n\t\t * @returns {Number} Returns the line number in the editor corresponding to the given offset or <code>-1</code> if the offset is \n\t\t * out of range\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\treturn this.getModel().getLineAtOffset(offset);\n\t\t},\n\t\t/**\n\t\t * @name getLineStart\n\t\t * @description Compute the editor start offset of the given line number\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} line The line number in the editor\n\t\t * @returns {Number} Returns the start offset of the given line number in the editor.\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineStart: function(line) {\n\t\t\treturn this.getModel().getLineStart(line);\n\t\t},\n\t\t/**\n\t\t * Get the view rulers.\n\t\t *\n\t\t * @returns {orion.editor.Ruler[]} the view rulers\n\t\t *\n\t\t * @see orion.editor.TextView#addRuler\n\t\t */\n\t\tgetRulers: function() {\n\t\t\treturn this._rulers.slice(0);\n\t\t},\n\t\t/**\n\t\t * Returns the text view selection.\n\t\t * <p>\n\t\t * The selection is defined by a start and end character offset relative to the\n\t\t * document. The character at end offset is not included in the selection.\n\t\t * </p>\n\t\t * \n\t\t * @returns {orion.editor.Selection} the view selection\n\t\t *\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelection: function () {\n\t\t\treturn this._getSelection();\n\t\t},\n\t\tgetSelections: function () {\n\t\t\treturn this._getSelections();\n\t\t},\n\t\t/**\n\t\t * Returns the text view selection text.\n\t\t * <p>\n\t\t * If there are multiple selection ranges, the result is concatenated with the specified delimiter.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} delimiter The offset into the editor\n\t\t * @returns {String} the view selection text\n\t\t * @since 10.0\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelectionText: function(delimiter) {\n\t\t\tvar text = [];\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty()) {\n\t\t\t\t\ttext.push(that._getBaseText(selection.start, selection.end));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn text.join(delimiter !== undefined ? delimiter : this._model.getLineDelimiter());\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The text does not include the character at the end offset.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextView#setText \t\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tvar model = this._model;\n\t\t\treturn model.getText(start, end);\n\t\t},\n\t\t/**\n\t\t * Returns the top index.\n\t\t * <p>\n\t\t * The top index is the line that is currently at the top of the view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view. The parameter\n\t\t * <code>fullyVisible</code> determines whether to return only fully visible lines. \n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} [fullyVisible=false] if <code>true</code>, returns the index of the first fully visible line. This\n\t\t *    parameter is ignored if the view is not big enough to show one line.\n\t\t * @returns {Number} the index of the top line.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomIndex\n\t\t * @see orion.editor.TextView#setTopIndex\n\t\t */\n\t\tgetTopIndex: function(fullyVisible) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getTopIndex(fullyVisible);\n\t\t},\n\t\t/**\n\t\t * Returns the top pixel.\n\t\t * <p>\n\t\t * The top pixel is the pixel position that is currently at\n\t\t * the top edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the top pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetTopPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().y;\n\t\t},\n\t\t/**\n\t\t * Executes the action handler associated with the given action ID.\n\t\t * <p>\n\t\t * The application defined action takes precedence over predefined actions unless\n\t\t * the <code>defaultAction</code> paramater is <code>true</code>.\n\t\t * </p>\n\t\t * <p>\n\t\t * If the application defined action returns <code>false</code>, the text view predefined\n\t\t * action is executed if present.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @param {Boolean} [defaultAction] whether to always execute the predefined action only.\n\t\t * @param {Object} [actionOptions] action specific options to be passed to the action handlers.\n\t\t * @returns {Boolean} <code>true</code> if the action was executed.\n\t\t *\n\t\t * @see orion.editor.TextView#setAction\n\t\t * @see orion.editor.TextView#getActions\n\t\t */\n\t\tinvokeAction: function (actionID, defaultAction, actionOptions) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar action = this._actions[actionID];\n\t\t\tif (action) {\n\t\t\t\tif (action.actionDescription && action.actionDescription.id) {\n\t\t\t\t\tmMetrics.logEvent(\"editor\", \"action\", action.actionDescription.id); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tif (!defaultAction && action.handler) {\n\t\t\t\t\tif (action.handler(actionOptions)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (action.defaultHandler) {\n\t\t\t\t\treturn typeof action.defaultHandler(actionOptions) === \"boolean\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t* Returns if the view is destroyed.\n\t\t* @returns {Boolean} <code>true</code> if the view is destroyed.\n\t\t*/\n\t\tisDestroyed: function () {\n\t\t\treturn !this._clientDiv;\n\t\t},\n\t\t/** \n\t\t * @class This is the event sent when the user right clicks or otherwise invokes the context menu of the view. \n\t\t * <p> \n\t\t * <b>See:</b><br/> \n\t\t * {@link orion.editor.TextView}<br/> \n\t\t * {@link orion.editor.TextView#event:onContextMenu} \n\t\t * </p> \n\t\t * \n\t\t * @name orion.editor.ContextMenuEvent \n\t\t * \n\t\t * @property {Number} x The pointer location on the x axis, relative to the document the user is editing. \n\t\t * @property {Number} y The pointer location on the y axis, relative to the document the user is editing. \n\t\t * @property {Number} screenX The pointer location on the x axis, relative to the screen. This is copied from the DOM contextmenu event.screenX property. \n\t\t * @property {Number} screenY The pointer location on the y axis, relative to the screen. This is copied from the DOM contextmenu event.screenY property. \n\t\t * @property {Boolean} defaultPrevented Determines whether the user agent context menu should be shown. It is shown by default.\n\t\t * @property {Function} preventDefault If called prevents the user agent context menu from showing.\n\t\t */ \n\t\t/** \n\t\t * This event is sent when the user invokes the view context menu. \n\t\t * \n\t\t * @event \n\t\t * @param {orion.editor.ContextMenuEvent} contextMenuEvent the event \n\t\t */ \n\t\tonContextMenu: function(contextMenuEvent) {\n\t\t\treturn this.dispatchEvent(contextMenuEvent); \n\t\t}, \n\t\tonDragStart: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDrag: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragEnd: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragEnter: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragOver: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragLeave: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDrop: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view is destroyed.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onDestroy}\n\t\t * </p>\n\t\t * @name orion.editor.DestroyEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view has been destroyed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.DestroyEvent} destroyEvent the event\n\t\t *\n\t\t * @see orion.editor.TextView#destroy\n\t\t */\n\t\tonDestroy: function(destroyEvent) {\n\t\t\treturn this.dispatchEvent(destroyEvent);\n\t\t},\n\t\t/**\n\t\t * @description This event is sent when the file is being saved\n\t\t * @function\n\t\t * @param {Object} savingEvent the event\n\t\t * @since 8.0\n\t\t */\n\t\tonSaving: function onSaving(savingEvent) {\n\t\t    return this.dispatchEvent(savingEvent);\n\t\t},\n\t\t/**\n\t\t * @description This event is sent when the file has been saved\n\t\t * @function\n\t\t * @param {Object} inputChangedEvent the event\n\t\t * @since 8.0\n\t\t */\n\t\tonInputChanged: function onInputChanged(inputChangedEvent) {\n\t\t    return this.dispatchEvent(inputChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @class This object is used to define style information for the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.Style\n\t\t * \n\t\t * @property {String} styleClass A CSS class name.\n\t\t * @property {Object} style An object with CSS properties.\n\t\t * @property {String} tagName A DOM tag name.\n\t\t * @property {Object} attributes An object with DOM attributes.\n\t\t */\n\t\t/**\n\t\t * @class This object is used to style range.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.StyleRange\n\t\t * \n\t\t * @property {Number} start The start character offset, relative to the document, where the style should be applied.\n\t\t * @property {Number} end The end character offset (exclusive), relative to the document, where the style should be applied.\n\t\t * @property {orion.editor.Style} style The style for the range.\n\t\t */\n\t\t/**\n\t\t * @class This is the event sent when the text view needs the style information for a line.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.LineStyleEvent\n\t\t * \n\t\t * @property {orion.editor.TextView} textView The text view.\t\t \n\t\t * @property {Number} lineIndex The line index.\n\t\t * @property {String} lineText The line text.\n\t\t * @property {Number} lineStart The character offset, relative to document, of the first character in the line.\n\t\t * @property {orion.editor.Style} style The style for the entire line (output argument).\n\t\t * @property {orion.editor.StyleRange[]} ranges An array of style ranges for the line (output argument).\t\t \n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view needs the style information for a line.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.LineStyleEvent} lineStyleEvent the event\n\t\t */\n\t\tonLineStyle: function(lineStyleEvent) {\n\t\t\treturn this.dispatchEvent(lineStyleEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent for all keyboard events.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyDown}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyPress}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyUp}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.KeyEvent\n\t\t * \n\t\t * @property {String} type The type of event.\n\t\t * @property {DOMEvent} event The key DOM event.\n\t\t * @property {Boolean} defaultPrevented Determines whether the user agent context menu should be shown. It is shown by default.\n\t\t * @property {Function} preventDefault If called prevents the user agent context menu from showing.\n\t\t */\n\t\t/**\n\t\t * This event is sent for key down events.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyDown: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * This event is sent for key press events. Key press events are only sent\n\t\t * for printable characters.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyPress: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * This event is sent for key up events.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyUp: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text in the model has changed.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModelChanged}<br/>\n\t\t * {@link orion.editor.TextModel#onChanged}\n\t\t * </p>\n\t\t * @name orion.editor.ModelChangedEvent\n\t\t * \n\t\t * @property {Number} start The character offset in the model where the change has occurred.\n\t\t * @property {Number} removedCharCount The number of characters removed from the model.\n\t\t * @property {Number} addedCharCount The number of characters added to the model.\n\t\t * @property {Number} removedLineCount The number of lines removed from the model.\n\t\t * @property {Number} addedLineCount The number of lines added to the model.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text in the model has changed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModelChangedEvent} modelChangedEvent the event\n\t\t */\n\t\tonModelChanged: function(modelChangedEvent) {\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text in the model is about to change.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModelChanging}<br/>\n\t\t * {@link orion.editor.TextModel#onChanging}\n\t\t * </p>\n\t\t * @name orion.editor.ModelChangingEvent\n\t\t * \n\t\t * @property {String} text The text that is about to be inserted in the model.\n\t\t * @property {Number} start The character offset in the model where the change will occur.\n\t\t * @property {Number} removedCharCount The number of characters being removed from the model.\n\t\t * @property {Number} addedCharCount The number of characters being added to the model.\n\t\t * @property {Number} removedLineCount The number of lines being removed from the model.\n\t\t * @property {Number} addedLineCount The number of lines being added to the model.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text in the model is about to change.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModelChangingEvent} modelChangingEvent the event\n\t\t */\n\t\tonModelChanging: function(modelChangingEvent) {\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text is modified by the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModify}\n\t\t * </p>\n\t\t * @name orion.editor.ModifyEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view has changed text in the model.\n\t\t * <p>\n\t\t * If the text is changed directly through the model API, this event\n\t\t * is not sent.\n\t\t * </p>\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModifyEvent} modifyEvent the event\n\t\t */\n\t\tonModify: function(modifyEvent) {\n\t\t\treturn this.dispatchEvent(modifyEvent);\n\t\t},\n\t\tonMouseDown: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseUp: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseMove: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseOver: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseOut: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonTouchStart: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonTouchMove: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonTouchEnd: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonOptions: function(optionsEvent) {\n\t\t\treturn this.dispatchEvent(optionsEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the selection changes in the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onSelection}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.SelectionEvent\n\t\t * \n\t\t * @property {orion.editor.Selection} oldValue The old selection.\n\t\t * @property {orion.editor.Selection} newValue The new selection.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view selection has changed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.SelectionEvent} selectionEvent the event\n\t\t */\n\t\tonSelection: function(selectionEvent) {\n\t\t\treturn this.dispatchEvent(selectionEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view scrolls.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onScroll}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.ScrollEvent\n\t\t * \n\t\t * @property {Object} oldValue The old scroll {x,y}.\n\t\t * @property {Object} newValue The new scroll {x,y}.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view scrolls vertically or horizontally.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ScrollEvent} scrollEvent the event\n\t\t */\n\t\tonScroll: function(scrollEvent) {\n\t\t\treturn this.dispatchEvent(scrollEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text is about to be modified by the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onVerify}\n\t\t * </p>\n\t\t * @name orion.editor.VerifyEvent\n\t\t * \n\t\t * @property {String} text The text being inserted.\n\t\t * @property {Number} start The start offset of the text range to be replaced.\n\t\t * @property {Number} end The end offset (exclusive) of the text range to be replaced.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view is about to change text in the model.\n\t\t * <p>\n\t\t * If the text is changed directly through the model API, this event\n\t\t * is not sent.\n\t\t * </p>\n\t\t * <p>\n\t\t * Listeners are allowed to change these parameters. Setting text to null\n\t\t * or undefined stops the change.\n\t\t * </p>\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.VerifyEvent} verifyEvent the event\n\t\t */\n\t\tonVerify: function(verifyEvent) {\n\t\t\treturn this.dispatchEvent(verifyEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view is focused.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onFocus}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.FocusEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view is focused.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.FocusEvent} focusEvent the event\n\t\t */\n\t\tonFocus: function(focusEvent) {\n\t\t\treturn this.dispatchEvent(focusEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view goes out of focus.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onBlur}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.BlurEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view goes out of focus.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.BlurEvent} blurEvent the event\n\t\t */\n\t\tonBlur: function(blurEvent) {\n\t\t\treturn this.dispatchEvent(blurEvent);\n\t\t},\n\t\t/**\n\t\t * Replaces the selection with the text on the clipboard or, if there is no selection, inserts the text at the current caret offset.\n\t\t * <p>\n\t\t * If the single mode is on and the clipboard text contains more than one line, all lines will be concatenated.\n\t\t * </p>\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tpaste: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doPaste();\n\t\t},\n\t\t/**\n\t\t * Redraws the entire view, including rulers.\n\t\t *\n\t\t * @see orion.editor.TextView#redrawLines\n\t\t * @see orion.editor.TextView#redrawRange\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredraw: function() {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar lineCount = this._model.getLineCount();\n\t\t\tthis.redrawRulers(0, lineCount);\n\t\t\tthis.redrawLines(0, lineCount); \n\t\t},\n\t\tredrawRulers: function(startLine, endLine) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar rulers = this.getRulers();\n\t\t\tfor (var i = 0; i < rulers.length; i++) {\n\t\t\t\tthis.redrawLines(startLine, endLine, rulers[i]);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Redraws the text in the given line range.\n\t\t * <p>\n\t\t * The line at the end index is not redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [startLine=0] the start line\n\t\t * @param {Number} [endLine=line count] the end line\n\t\t *\n\t\t * @see orion.editor.TextView#redraw\n\t\t * @see orion.editor.TextView#redrawRange\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredrawLines: function(startLine, endLine, ruler) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (startLine === undefined) { startLine = 0; }\n\t\t\tif (endLine === undefined) { endLine = this._model.getLineCount(); }\n\t\t\tif (startLine === endLine) { return; }\n\t\t\tvar div = this._clientDiv;\n\t\t\tif (!div) { return; }\n\t\t\tif (ruler) {\n\t\t\t\tvar divRuler = this._getRulerParent(ruler);\n\t\t\t\tdiv = divRuler.firstChild;\n\t\t\t\twhile (div) {\n\t\t\t\t\tif (div._ruler === ruler) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ruler) {\n\t\t\t\tdiv.rulerChanged = true;\n\t\t\t} else {\n\t\t\t\tif (this._lineHeight) {\n\t\t\t\t\tthis._resetLineHeight(startLine, endLine);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar imeLineIndex = -1;\n\t\t\tif (!ruler && this._imeOffset !== -1) {\n\t\t\t\timeLineIndex = this._model.getLineAtOffset(this._imeOffset);\n\t\t\t}\n\t\t\tif (!ruler || ruler.getOverview() === \"page\") { //$NON-NLS-1$\n\t\t\t\tvar child = div.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tvar lineIndex = child.lineIndex;\n\t\t\t\t\tif (startLine <= lineIndex && lineIndex < endLine && lineIndex !== imeLineIndex) {\n\t\t\t\t\t\tchild.lineChanged = true;\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!ruler) {\n\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\tif (startLine <= this._maxLineIndex && this._maxLineIndex < endLine) {\n\t\t\t\t\t\tthis._checkMaxLineIndex = this._maxLineIndex;\n\t\t\t\t\t\tthis._maxLineIndex = -1;\n\t\t\t\t\t\tthis._maxLineWidth = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dispatchEvent({type: \"Redraw\", startLine: startLine, endLine: endLine, ruler: ruler}); //$NON-NLS-1$\n\t\t\tthis._queueUpdate();\n\t\t},\n\t\t/**\n\t\t * Redraws the text in the given range.\n\t\t * <p>\n\t\t * The character at the end offset is not redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range\n\t\t * @param {Number} [end=char count] the end offset of text range\n\t\t *\n\t\t * @see orion.editor.TextView#redraw\n\t\t * @see orion.editor.TextView#redrawLines\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredrawRange: function(start, end) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar model = this._model;\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = model.getCharCount(); }\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar endLine = model.getLineAtOffset(Math.max(start, end - 1)) + 1;\n\t\t\tthis.redrawLines(startLine, endLine);\n\t\t},\t\n\t\t/**\n\t\t * Removes a key mode from the text view.\n\t\t *\n\t\t * @param {orion.editor.KeyMode} mode the key mode.\n\t\t */\n\t\tremoveKeyMode: function (mode) {\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (var i=0; i<keyModes.length; i++) {\n\t\t\t\tif (keyModes[i] === mode) {\n\t\t\t\t\tkeyModes.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//TODO: API needed for this\n\t\t\tif (mode._modeRemoved) {\n\t\t\t\tmode._modeRemoved();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Removes a ruler from the text view.\n\t\t *\n\t\t * @param {orion.editor.Ruler} ruler the ruler.\n\t\t */\n\t\tremoveRuler: function (ruler) {\n\t\t\tvar rulers = this._rulers;\n\t\t\tfor (var i=0; i<rulers.length; i++) {\n\t\t\t\tif (rulers[i] === ruler) {\n\t\t\t\t\trulers.splice(i, 1);\n\t\t\t\t\truler.setView(null);\n\t\t\t\t\tthis._destroyRuler(ruler);\n\t\t\t\t\tthis._update();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tresize: function() {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._handleResize(null);\n\t\t},\n\t\t/**\n\t\t * @class This object describes an action for the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#setAction}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.ActionDescription\n\t\t *\n\t\t * @property {String} [name] the name to be used when showing the action as text.\n\t\t */\n\t\t/**\n\t\t * Associates an application defined handler to an action ID.\n\t\t * <p>\n\t\t * If the action ID is a predefined action, the given handler executes before\n\t\t * the default action handler.  If the given handler returns <code>true</code>, the\n\t\t * default action handler is not called.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @param {Function} handler the action handler.\n\t\t * @param {orion.editor.ActionDescription} [actionDescription=undefined] the action description.\n\t\t *\n\t\t * @see orion.editor.TextView#getActions\n\t\t * @see orion.editor.TextView#invokeAction\n\t\t */\n\t\tsetAction: function(actionID, handler, actionDescription) {\n\t\t\tif (!actionID) { return; }\n\t\t\tvar actions = this._actions;\n\t\t\tvar action = actions[actionID];\n\t\t\tif (!action) { \n\t\t\t\taction = actions[actionID] = {};\n\t\t\t}\n\t\t\taction.handler = handler;\n\t\t\tif (actionDescription !== undefined) {\n\t\t\t\taction.actionDescription = actionDescription;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Associates a key binding with the given action ID. Any previous\n\t\t * association with the specified key binding is overwriten. If the\n\t\t * action ID is <code>null</code>, the association is removed.\n\t\t * \n\t\t * @param {orion.KeyBinding} keyBinding the key binding\n\t\t * @param {String} actionID the action ID\n\t\t */\n\t\tsetKeyBinding: function(keyBinding, actionID) {\n\t\t\tthis._keyModes[0].setKeyBinding(keyBinding, actionID);\n\t\t},\n\t\t/**\n\t\t * Sets the caret offset relative to the start of the document.\n\t\t *\n\t\t * @param {Number} caret the caret offset relative to the start of the document.\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getCaretOffset\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tsetCaretOffset: function(offset, show, callback) {\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\toffset = Math.max(0, Math.min (offset, charCount));\n\t\t\tvar selection = new Selection(offset, offset, false);\n\t\t\tthis._setSelection (selection, show === undefined || show, true, callback);\n\t\t},\n\t\t/**\n\t\t * Sets the horizontal pixel.\n\t\t * <p>\n\t\t * The horizontal pixel is the pixel position that is currently at\n\t\t * the left edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} pixel the horizontal pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tsetHorizontalPixel: function(pixel) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tpixel = Math.max(0, pixel);\n\t\t\tthis._scrollView(pixel - this._getScroll().x, 0);\n\t\t},\n\t\t/**\n\t\t * Sets whether the view should update the DOM.\n\t\t * <p>\n\t\t * This can be used to improve the performance.\n\t\t * </p><p>\n\t\t * When the flag is set to <code>true</code>,\n\t\t * the entire view is marked as needing to be redrawn. \n\t\t * Nested calls to this method are stacked.\n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} redraw the new redraw state\n\t\t * \n\t\t * @see orion.editor.TextView#redraw\n\t\t */\n\t\tsetRedraw: function(redraw) {\n\t\t\tif (redraw) {\n\t\t\t\tif (--this._redrawCount === 0) {\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._redrawCount++;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the text model of the text view.\n\t\t *\n\t\t * @param {orion.editor.TextModel} model the text model of the view.\n\t\t */\n\t\tsetModel: function(model) {\n\t\t\tif (model === this._model) { return; }\n\t\t\tmodel = model || new mTextModel.TextModel();\n\t\t\tthis._model.removeEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.removeEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tvar oldLineCount = this._model.getLineCount();\n\t\t\tvar oldCharCount = this._model.getCharCount();\n\t\t\tvar newLineCount = model.getLineCount();\n\t\t\tvar newCharCount = model.getCharCount();\n\t\t\tvar newText = model.getText();\n\t\t\tvar e = {\n\t\t\t\ttype: \"ModelChanging\", //$NON-NLS-1$\n\t\t\t\ttext: newText,\n\t\t\t\tstart: 0,\n\t\t\t\tremovedCharCount: oldCharCount,\n\t\t\t\taddedCharCount: newCharCount,\n\t\t\t\tremovedLineCount: oldLineCount,\n\t\t\t\taddedLineCount: newLineCount\n\t\t\t};\n\t\t\tthis.onModelChanging(e);\n\t\t\tthis._model = model;\n\t\t\te = {\n\t\t\t\ttype: \"ModelChanged\", //$NON-NLS-1$\n\t\t\t\tstart: 0,\n\t\t\t\tremovedCharCount: oldCharCount,\n\t\t\t\taddedCharCount: newCharCount,\n\t\t\t\tremovedLineCount: oldLineCount,\n\t\t\t\taddedLineCount: newLineCount\n\t\t\t};\n\t\t\tthis.onModelChanged(e); \n\t\t\tthis._model.addEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.addEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._reset();\n\t\t\tthis._update();\n\t\t},\n\t\t/**\n\t\t * Sets the view options for the view.\n\t\t *\n\t\t * @param {orion.editor.TextViewOptions} options the view options.\n\t\t * \n\t\t * @see orion.editor.TextView#getOptions\n\t\t */\n\t\tsetOptions: function (options) {\n\t\t\tvar defaultOptions = this._defaultOptions();\n\t\t\tfor (var option in options) {\n\t\t\t\tif (options.hasOwnProperty(option)) {\n\t\t\t\t\tvar newValue = options[option], oldValue = this[\"_\" + option]; //$NON-NLS-1$\n\t\t\t\t\tif (compare(oldValue, newValue)) { continue; }\n\t\t\t\t\tvar update = defaultOptions[option] ? defaultOptions[option].update : null;\n\t\t\t\t\tif (update) {\n\t\t\t\t\t\tupdate.call(this, newValue);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis[\"_\" + option] = clone(newValue); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.onOptions({type: \"Options\", options: options}); //$NON-NLS-1$\n\t\t},\n\t\t/**\n\t\t * @class This object describes the selection show options.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView#setSelection}\n\t\t * {@link orion.editor.TextView#setCaretOffset}\t \n\t\t * {@link orion.editor.TextView#showSelection}\t \n\t\t * </p>\t\t \n\t\t * @name orion.editor.TextViewShowOptions\n\t\t *\n\t\t * @property {String} viewAnchor the view anchor.  The view anchor can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"top\" - align the selection to the top of the view client area.</li>\n\t\t *   <li>\"bottom\" - align the selection to the bottom of the view client area.</li>\n\t\t *   <li>\"center\" - align the selection to the center of the view client area.</li>\n\t\t *   <li> by default - align the selection to the top or bottom of the client area depending on whether the caret is above or below the client area respectively. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * @property {Number} [viewAnchorOffset=0] an offset from the view anchor. The offset is a percentage of the client area height and it is clamped to [0-1] range.\n\t\t * @property {String} [selectionAnchor=caret] the selection anchor. The seleciton anchor can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"top\" - align the top of the selection to the view anchor.</li>\n\t\t *   <li>\"bottom\" - align the bottom of the selection to the view anchor.</li>\n\t\t *   <li>\"center\" - align the center of the selection to the view anchor.</li>\n\t\t *   <li> by default - align the top or bottom of the selection to the view anchor depending on whether the caret is at the start or end of the selection. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * @property {String} [scrollPolicy] the scroll policy. The scroll policy can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"always\" - always scroll vertically to the desired pixel offset even if the caret is already visible.</li>\n\t\t *   <li> by default - only scroll if the caret is not visible. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t */\n\t\t/**\n\t\t * Sets the text view selection.\n\t\t * <p>\n\t\t * The selection is defined by a start and end character offset relative to the\n\t\t * document. The character at end offset is not included in the selection.\n\t\t * </p>\n\t\t * <p>\n\t\t * The caret is always placed at the end offset. The start offset can be\n\t\t * greater than the end offset to place the caret at the beginning of the\n\t\t * selection.\n\t\t * </p>\n\t\t * <p>\n\t\t * Clamps out of range offsets.\n\t\t * </p>\n\t\t * \n\t\t * @param {Number} start the start offset of the selection\n\t\t * @param {Number} end the end offset of the selection\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tsetSelection: function (start, end, show, callback) {\n\t\t\tvar caret = start > end;\n\t\t\tif (caret) {\n\t\t\t\tvar tmp = start;\n\t\t\t\tstart = end;\n\t\t\t\tend = tmp;\n\t\t\t}\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\tstart = Math.max(0, Math.min (start, charCount));\n\t\t\tend = Math.max(0, Math.min (end, charCount));\n\t\t\tvar selection = new Selection(start, end, caret);\n\t\t\tthis._setSelection(selection, show === undefined || show, true, callback);\n\t\t},\n\t\tsetSelections: function (ranges, show, callback) {\n\t\t\tvar selections = this._rangesToSelections(ranges);\n\t\t\tthis._setSelection(selections, show === undefined || show, true, callback);\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The character at the end offset is not replaced.\n\t\t * </p>\n\t\t * <p>\n\t\t * When both <code>start</code> and <code>end</code> parameters\n\t\t * are not specified, the text view places the caret at the beginning\n\t\t * of the document and scrolls to make it visible.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} text the new text.\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getText\n\t\t */\n\t\tsetText: function (text, start, end, show, callback) {\n\t\t\tvar isSingle = typeof text === \"string\"; //$NON-NLS-1$\n\t\t\tvar reset = start === undefined && end === undefined && isSingle;\n\t\t\tvar edit;\n\t\t\tif (isSingle) {\n\t\t\t\tif (start === undefined) { start = 0; }\n\t\t\t\tif (end === undefined) { end = this._model.getCharCount(); }\n\t\t\t\tedit = {text: text, selection: [new Selection(start, end, false)]};\n\t\t\t} else {\n\t\t\t\tedit = text;\n\t\t\t\tedit.selection = this._rangesToSelections(edit.selection);\n\t\t\t}\n\t\t\tedit._code = true;\n\t\t\tif (reset) {\n\t\t\t\tthis._variableLineHeight = false;\n\t\t\t}\n\t\t\tthis._modifyContent(edit, !reset, show === undefined || show, callback);\n\t\t\tif (reset) {\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, the caret does not show after the\n\t\t\t\t* view is refreshed.  The fix is to toggle the contentEditable state and\n\t\t\t\t* force the clientDiv to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tif (util.isFirefox < 13) {\n\t\t\t\t\tthis._fixCaret();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the top index.\n\t\t * <p>\n\t\t * The top index is the line that is currently at the top of the text view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} topIndex the index of the top line.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomIndex\n\t\t * @see orion.editor.TextView#getTopIndex\n\t\t */\n\t\tsetTopIndex: function(topIndex, callback) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._scrollViewAnimated(0, this._getLinePixel(Math.max(0, topIndex)) - this._getScroll().y, callback);\n\t\t},\n\t\t/**\n\t\t * Sets the top pixel.\n\t\t * <p>\n\t\t * The top pixel is the pixel position that is currently at\n\t\t * the top edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} pixel the top pixel.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tsetTopPixel: function(pixel, callback) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._scrollViewAnimated(0, Math.max(0, pixel) - this._getScroll().y, callback);\n\t\t},\n\t\t/**\n\t\t * Scrolls the selection into view if needed.\n\t\t *\n \t\t * @param {Number|orion.editor.TextViewShowOptions} [show=0]\n\t\t * \t\t\t\t\tIf <code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  The view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @returns {Boolean} true if the view was scrolled.\n\t\t *\n\t\t * @see orion.editor.TextView#getSelection\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#setCaretOffset\n\t\t */\n\t\tshowSelection: function(show, callback) {\n\t\t\treturn this._showCaret(show ? false : true, callback, show);\n\t\t},\n\t\tupdate: function(styleChanged, sync) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tif (styleChanged || this._metrics.invalid) {\n\t\t\t\tthis._updateStyle();\n\t\t\t}\n\t\t\tif (sync === undefined || sync) {\n\t\t\t\tthis._update();\n\t\t\t} else {\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**************************************** Event handlers *********************************/\n\t\t_handleRootMouseDown: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13 && e.which === 1) {\n\t\t\t\tthis._clientDiv.contentEditable = false;\n\t\t\t\t(this._overlayDiv || this._clientDiv).draggable = true;\n\t\t\t\tthis._ignoreBlur = true;\n\t\t\t}\n\t\t\t\n\t\t\t/* Prevent clicks outside of the client div from taking focus away. */\n\t\t\tvar topNode = this._overlayDiv || this._clientDiv;\n\t\t\t/* Use view div on IE 8 otherwise it is not possible to scroll. */\n\t\t\tif (util.isIE < 9) { topNode = this._viewDiv; }\n\t\t\tvar temp = e.target ? e.target : e.srcElement;\n\t\t\twhile (temp) {\n\t\t\t\tif (topNode === temp) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (temp.className && temp.className.indexOf(\"textViewFind\") !== -1) { //$NON-NLS-1$\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttemp = temp.parentNode;\n\t\t\t}\n\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\tif (e.stopPropagation){ e.stopPropagation(); }\n\t\t\tif (!this._isW3CEvents) {\n\t\t\t\t/*\n\t\t\t\t* In IE 8 is not possible to prevent the default handler from running\n\t\t\t\t* during mouse down event using usual API. The workaround is to give\n\t\t\t\t* focus back to the client div.\n\t\t\t\t*/ \n\t\t\t\tvar that = this;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\tthat._clientDiv.focus();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t},\n\t\t_handleRootMouseUp: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13 && e.which === 1) {\n\t\t\t\tthis._clientDiv.contentEditable = true;\n\t\t\t\t(this._overlayDiv || this._clientDiv).draggable = false;\n\t\t\t}\n\t\t\tif (util.isFirefox && e.which === 1) {\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, Firefox stops showing the caret\n\t\t\t\t* in some cases. For example when the user cancels a drag operation \n\t\t\t\t* by pressing ESC.  The fix is to detect that the drag operation was\n\t\t\t\t* cancelled,  toggle the contentEditable state and force the clientDiv\n\t\t\t\t* to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tthis._fixCaret();\n\t\t\t\tthis._ignoreBlur = false;\n\t\t\t}\n\t\t},\n\t\t_handleBlur: function () {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreBlur) { return; }\n\t\t\tthis._commitIME();\n\t\t\tthis._hasFocus = false;\n\t\t\t/*\n\t\t\t* Bug in IE 8 and earlier. For some reason when text is deselected\n\t\t\t* the overflow selection at the end of some lines does not get redrawn.\n\t\t\t* The fix is to create a DOM element in the body to force a redraw.\n\t\t\t*/\n\t\t\tif (util.isIE < 9) {\n\t\t\t\tif (!this._getSelections()[0].isEmpty()) {\n\t\t\t\t\tvar rootDiv = this._rootDiv;\n\t\t\t\t\tvar child = util.createElement(rootDiv.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\t\t\trootDiv.appendChild(child);\n\t\t\t\t\trootDiv.removeChild(child);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._cursorDiv) {\n\t\t\t\tthis._cursorDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (this._domSelection) {\n\t\t\t\tthis._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t\t/* Clear browser selection if selection is within clientDiv */\n\t\t\t\tvar temp;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\t\tif (win.getSelection) {\n\t\t\t\t\tvar sel = win.getSelection();\n\t\t\t\t\ttemp = sel.anchorNode;\n\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\tif (temp === this._clientDiv) {\n\t\t\t\t\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t\t}\n\t\t\t\t} else if (doc.selection) {\n\t\t\t\t\tthis._ignoreSelect = false;\n\t\t\t\t\ttemp = doc.selection.createRange().parentElement();\n\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\tif (temp === this._clientDiv) {\n\t\t\t\t\t\t\tdoc.selection.empty();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t\t}\n\t\t\t\t\tthis._ignoreSelect = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._ignoreFocus) {\n\t\t\t\tthis.onBlur({type: \"Blur\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleCompositionStart: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._imeTimeout) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._imeTimeout);\n\t\t\t\tthis._imeTimeout = null;\n\t\t\t}\n\t\t\tif (this._imeText) {\n\t\t\t\tthis._commitIME(this._imeText);\n\t\t\t\tthis._imeText = null;\n\t\t\t}\n\t\t\tthis._startIME();\n\t\t\tif (this._mutationObserver) {\n\t\t\t\tthis._mutationObserver.disconnect();\n\t\t\t\tthis._mutationObserver = null;\n\t\t\t}\n\t\t},\n\t\t_handleCompositionUpdate: function(e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._imeText = e.data;\n\t\t},\n\t\t_handleCompositionEnd: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._imeText = e.data;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._imeTimeout = win.setTimeout(function() {\n\t\t\t\tthis._commitIME(this._imeText);\n\t\t\t\tthis._imeText = this._imeTimeout = null;\n\t\t\t}.bind(this), 0);\n\t\t},\n\t\t_handleContextMenu: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isIE && this._lastMouseButton === 3) {\n\t\t\t\t// We need to update the DOM selection, because on\n\t\t\t\t// right-click the caret moves to the mouse location.\n\t\t\t\t// See bug 366312 and 376508.\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t\tvar preventDefault = false;\n\t\t\tif (this.isListening(\"ContextMenu\")) { //$NON-NLS-1$\n\t\t\t\tvar evt = this._createMouseEvent(\"ContextMenu\", e); //$NON-NLS-1$\n\t\t\t\tevt.screenX = e.screenX;\n\t\t\t\tevt.screenY = e.screenY;\n\t\t\t\tthis.onContextMenu(evt);\n\t\t\t\tpreventDefault = evt.defaultPrevented;\n\t\t\t} else if (util.isMac && util.isFirefox && e.button === 0) {\n\t\t\t\t// hack to prevent CTRL+Space from showing the browser context menu\n\t\t\t\tpreventDefault = true;\n\t\t\t}\n\t\t\tif (preventDefault) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthis._contextMenuOpen = true;\n\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\tthis._checkSelectionChange = true;\n\t\t\t\t\tthis._pollSelectionChange(true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleCopy: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._ignoreCopy) { return; }\n\t\t\tif (this._doCopy(e)) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleCut: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._doCut(e)) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDataModified: function(e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._startIME();\n\t\t},\n\t\t_handleDblclick: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar time = e.timeStamp ? e.timeStamp : new Date().getTime();\n\t\t\tthis._lastMouseTime = time;\n\t\t\tif (this._clickCount !== 2) {\n\t\t\t\tthis._clickCount = 2;\n\t\t\t\tthis._handleMouse(e);\n\t\t\t}\n\t\t},\n\t\t_handleDragStart: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13) {\n\t\t\t\tvar that = this;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\tthat._clientDiv.contentEditable = true;\n\t\t\t\t\tthat._clientDiv.draggable = false;\n\t\t\t\t\tthat._ignoreBlur = false;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tif (this.isListening(\"DragStart\") && this._dragOffset !== -1) { //$NON-NLS-1$\n\t\t\t\tthis._isMouseDown = false;\n\t\t\t\tthis.onDragStart(this._createMouseEvent(\"DragStart\", e)); //$NON-NLS-1$\n\t\t\t\tthis._dragOffset = -1;\n\t\t\t} else {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDrag: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this.isListening(\"Drag\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDrag(this._createMouseEvent(\"Drag\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleDragEnd: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tthis._dragOffset = -1;\n\t\t\tif (this.isListening(\"DragEnd\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDragEnd(this._createMouseEvent(\"DragEnd\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (util.isFirefox < 13) {\n\t\t\t\tthis._fixCaret();\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, Firefox stops showing the caret when the \n\t\t\t\t* selection is dropped onto itself. The fix is to detected the case and \n\t\t\t\t* call fixCaret() a second time.\n\t\t\t\t*/\n\t\t\t\tif (e.dataTransfer.dropEffect === \"none\" && !e.dataTransfer.mozUserCancelled) { //$NON-NLS-1$\n\t\t\t\t\tthis._fixCaret();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleDragEnter: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar prevent = true;\n\t\t\tthis._dropTarget = true;\n\t\t\tif (this.isListening(\"DragEnter\")) { //$NON-NLS-1$\n\t\t\t\tprevent = false;\n\t\t\t\tthis.onDragEnter(this._createMouseEvent(\"DragEnter\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* Webkit will not send drop events if this event is not prevented, as spec in HTML5.\n\t\t\t* Firefox and IE do not follow this spec for contentEditable. Note that preventing this \n\t\t\t* event will result is loss of functionality (insertion mark, etc).\n\t\t\t*/\n\t\t\tif (util.isWebkit || prevent) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDragOver: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar prevent = true;\n\t\t\tif (this.isListening(\"DragOver\")) { //$NON-NLS-1$\n\t\t\t\tprevent = false;\n\t\t\t\tthis.onDragOver(this._createMouseEvent(\"DragOver\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* Webkit will not send drop events if this event is not prevented, as spec in HTML5.\n\t\t\t* Firefox and IE do not follow this spec for contentEditable. Note that preventing this \n\t\t\t* event will result is loss of functionality (insertion mark, etc).\n\t\t\t*/\n\t\t\tif (util.isWebkit || prevent) {\n\t\t\t\tif (prevent) { e.dataTransfer.dropEffect = \"none\"; } //$NON-NLS-1$\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDragLeave: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tif (this.isListening(\"DragLeave\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDragLeave(this._createMouseEvent(\"DragLeave\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleDrop: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tif (this.isListening(\"Drop\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDrop(this._createMouseEvent(\"Drop\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* This event must be prevented otherwise the user agent will modify\n\t\t\t* the DOM. Note that preventing the event on some user agents (i.e. IE)\n\t\t\t* indicates that the operation is cancelled. This causes the dropEffect to \n\t\t\t* be set to none  in the dragend event causing the implementor to not execute\n\t\t\t* the code responsible by the move effect.\n\t\t\t*/\n\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\treturn false;\n\t\t},\n\t\t_handleFocus: function () {\n\t\t\tthis._hasFocus = true;\n\t\t\tif (util.isIOS && this._lastTouchOffset !== undefined) {\n\t\t\t\tthis.setCaretOffset(this._lastTouchOffset, true);\n\t\t\t\tthis._lastTouchOffset = undefined;\n\t\t\t} else {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t\tif (this._cursorDiv) {\n\t\t\t\tthis._cursorDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (this._domSelection) {\n\t\t\t\tthis._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t}\n\t\t\tif (!this._ignoreFocus) {\n\t\t\t\tthis.onFocus({type: \"Focus\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleKeyDown: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) {\treturn;\t}\n\t\t\tif (this.isListening(\"KeyDown\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyDown\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyDown(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\t/*\n\t\t\t\t\t* Feature in Firefox. Keypress events still happen even if the keydown event\n\t\t\t\t\t* was prevented. The fix is to remember that keydown was prevented and prevent\n\t\t\t\t\t* the keypress ourselves.\n\t\t\t\t\t*/\n\t\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\t\tthis._keyDownPrevented = true;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar modifier = false;\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 16: /* Shift */\n\t\t\t\tcase 17: /* Control */\n\t\t\t\tcase 18: /* Alt */\n\t\t\t\tcase 91: /* Command */\n\t\t\t\t\tmodifier = true;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis._setLinksVisible(false);\n\t\t\t}\n\t\t\tif (e.keyCode === 229) {\n\t\t\t\tif (this._readonly) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar startIME = true;\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Bug in Safari. Some Control+key combinations send key events\n\t\t\t\t* with keyCode equals to 229. This is unexpected and causes the\n\t\t\t\t* view to start an IME composition. The fix is to ignore these\n\t\t\t\t* events.\n\t\t\t\t*/\n\t\t\t\tif (util.isSafari && util.isMac) {\n\t\t\t\t\tif (e.ctrlKey) {\n\t\t\t\t\t\tstartIME = false;\n\t\t\t\t\t\te.keyCode = 0x81;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (startIME) {\n\t\t\t\t\tthis._startIME();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!modifier) {\n\t\t\t\t\tthis._commitIME();\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*\n\t\t\t* Feature in Firefox. When a key is held down the browser sends \n\t\t\t* right number of keypress events but only one keydown. This is\n\t\t\t* unexpected and causes the view to only execute an action\n\t\t\t* just one time. The fix is to ignore the keydown event and \n\t\t\t* execute the actions from the keypress handler.\n\t\t\t* Note: This only happens on the Mac and Linux (Firefox 3.6).\n\t\t\t*\n\t\t\t* Feature in Opera < 12.16.  Opera sends keypress events even for non-printable\n\t\t\t* keys.  The fix is to handle actions in keypress instead of keydown.\n\t\t\t*/\n\t\t\tif (((util.isMac || util.isLinux) && util.isFirefox < 4) || util.isOpera < 12.16) {\n\t\t\t\tthis._keyDownEvent = e;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._doAction(e)) {\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} else {\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\te.returnValue = false;\n\t\t\t\t\te.keyCode = 0;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleKeyPress: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\t/*\n\t\t\t* Feature in Firefox. Keypress events still happen even if the keydown event\n\t\t\t* was prevented. The fix is to remember that keydown was prevented and prevent\n\t\t\t* the keypress ourselves.\n\t\t\t*/\n\t\t\tif (this._keyDownPrevented) { \n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} \n\t\t\t\tthis._keyDownPrevented = undefined;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t* Feature in Embedded WebKit.  Embedded WekKit on Mac runs in compatibility mode and\n\t\t\t* generates key press events for these Unicode values (Function keys).  This does not\n\t\t\t* happen in Safari or Chrome.  The fix is to ignore these key events.\n\t\t\t*/\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tif ((0xF700 <= e.keyCode && e.keyCode <= 0xF7FF) || e.keyCode === 13 || e.keyCode === 8) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (((util.isMac || util.isLinux) && util.isFirefox < 4) || util.isOpera < 12.16) {\n\t\t\t\tif (this._doAction(this._keyDownEvent)) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (e.charCode !== undefined) {\n\t\t\t\tif (ctrlKey) {\n\t\t\t\t\tswitch (e.charCode) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t* In Firefox and Safari if ctrl+v, ctrl+c ctrl+x is canceled\n\t\t\t\t\t\t* the clipboard events are not sent. The fix to allow\n\t\t\t\t\t\t* the browser to handles these key events.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tcase 99://c\n\t\t\t\t\t\tcase 118://v\n\t\t\t\t\t\tcase 120://x\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.isListening(\"KeyPress\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyPress\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyPress(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._doAction(e)) {\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} else {\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\te.returnValue = false;\n\t\t\t\t\te.keyCode = 0;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar ignore = false;\n\t\t\tif (util.isMac) {\n\t\t\t\tif (e.ctrlKey || e.metaKey) { ignore = true; }\n\t\t\t} else {\n\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\t//Firefox clears the state mask when ALT GR generates input\n\t\t\t\t\tif (e.ctrlKey || e.altKey) { ignore = true; }\n\t\t\t\t} else {\n\t\t\t\t\t//IE and Chrome only send ALT GR when input is generated\n\t\t\t\t\tif (e.ctrlKey ^ e.altKey) { ignore = true; }\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!ignore) {\n\t\t\t\tvar key = util.isOpera ? e.which : (e.charCode !== undefined ? e.charCode : e.keyCode);\n\t\t\t\tif (key > 31) {\n\t\t\t\t\tthis._doContent(String.fromCharCode (key));\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleDocKeyUp: function (e) {\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (!ctrlKey) {\n\t\t\t\tthis._setLinksVisible(false);\n\t\t\t}\n\t\t},\n\t\t_handleKeyUp: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this.isListening(\"KeyUp\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyUp\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyUp(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._handleDocKeyUp(e);\n\t\t\t// don't commit for space (it happens during JP composition)  \n\t\t\tif (e.keyCode === 13) {\n\t\t\t\tthis._commitIME();\n\t\t\t}\n\t\t},\n\t\t_handleLinkClick: function (e) {\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (!ctrlKey) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleMouse: function (e) {\n\t\t\tvar win = this._getWindow();\n\t\t\tvar result = true;\n\t\t\tvar target = win;\n\t\t\tif (util.isIE || (util.isFirefox && !this._overlayDiv)) { target = this._clientDiv; }\n\t\t\tif (this._overlayDiv) {\n\t\t\t\tif (this._hasFocus) {\n\t\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\t}\n\t\t\t\tvar that = this;\n\t\t\t\twin.setTimeout(function () {\n\t\t\t\t\tthat.focus();\n\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tvar extend = e.shiftKey;\n\t\t\tvar block = e.altKey;\n\t\t\tvar add = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tthis._blockSelection = this._doubleClickSelection = null;\n\t\t\tif (this._clickCount === 1) {\n\t\t\t\tvar drag = (!util.isOpera || util.isOpera >= 12.16) && this._hasFocus && this.isListening(\"DragStart\"); //$NON-NLS-1$\n\t\t\t\tresult = this._setSelectionTo(e.clientX, e.clientY, true, extend, add, drag);\n\t\t\t\tif (result) { this._setGrab(target); }\n\t\t\t} else {\n\t\t\t\t/*\n\t\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t\t* for a doule-click is:\n\t\t\t\t*\n\t\t\t\t*\tdown\n\t\t\t\t*\tup\n\t\t\t\t*\tup\n\t\t\t\t*\tdblclick\n\t\t\t\t*\n\t\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t\t*/\n\t\t\t\tif (this._isW3CEvents) { this._setGrab(target); }\n\t\t\t\t\n\t\t\t\tthis._setSelectionTo(e.clientX, e.clientY, true, extend, add, false);\n\t\t\t\tthis._doubleClickSelection = Selection.editing(this._getSelections());\n\t\t\t}\n\t\t\tif (block) {\n\t\t\t\tthis._blockSelection = Selection.editing(this._getSelections());\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_handleMouseDown: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._linksVisible) {\n\t\t\t\tvar target = e.target || e.srcElement;\n\t\t\t\tif (target.tagName !== \"A\") { //$NON-NLS-1$\n\t\t\t\t\tthis._setLinksVisible(false);\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._commitIME();\n\n\t\t\tvar button = e.which; // 1 - left, 2 - middle, 3 - right\n\t\t\tif (!button) { \n\t\t\t\t// if IE 8 or older\n\t\t\t\tif (e.button === 4) { button = 2; }\n\t\t\t\tif (e.button === 2) { button = 3; }\n\t\t\t\tif (e.button === 1) { button = 1; }\n\t\t\t}\n\n\t\t\t// For middle click we always need getTime(). See _getClipboardText().\n\t\t\tvar time = button !== 2 && e.timeStamp ? e.timeStamp : new Date().getTime();\n\t\t\tvar timeDiff = time - this._lastMouseTime;\n\t\t\tvar deltaX = Math.abs(this._lastMouseX - e.clientX);\n\t\t\tvar deltaY = Math.abs(this._lastMouseY - e.clientY);\n\t\t\tvar sameButton = this._lastMouseButton === button;\n\t\t\tthis._lastMouseX = e.clientX;\n\t\t\tthis._lastMouseY = e.clientY;\n\t\t\tthis._lastMouseTime = time;\n\t\t\tthis._lastMouseButton = button;\n\n\t\t\tif (button === 1) {\n\t\t\t\tthis._isMouseDown = true;\n\t\t\t\tif (sameButton && timeDiff <= this._clickTime && deltaX <= this._clickDist && deltaY <= this._clickDist) {\n\t\t\t\t\tthis._clickCount++;\n\t\t\t\t} else {\n\t\t\t\t\tthis._clickCount = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.isListening(\"MouseDown\")) { //$NON-NLS-1$\n\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseDown\", e); //$NON-NLS-1$\n\t\t\t\tthis.onMouseDown(mouseEvent);\n\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (button === 1) {\n\t\t\t\tif (this._handleMouse(e) && (util.isIE >= 9 || util.isOpera || util.isChrome || util.isSafari || (util.isFirefox && !this._overlayDiv))) {\n\t\t\t\t\tif (!this._hasFocus) {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (util.isFirefox && this._lastMouseButton === 3) {\n\t\t\t\t// We need to update the DOM selection, because on\n\t\t\t\t// right-click the caret moves to the mouse location.\n\t\t\t\t// See bug 366312 and 376508.\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t},\n\t\t_handleMouseOver: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._animation) { return; }\n\t\t\tif (this.isListening(\"MouseOver\")) { //$NON-NLS-1$\n\t\t\t\tthis.onMouseOver(this._createMouseEvent(\"MouseOver\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleMouseOut: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._animation) { return; }\n\t\t\tif (this.isListening(\"MouseOut\")) { //$NON-NLS-1$\n\t\t\t\tthis.onMouseOut(this._createMouseEvent(\"MouseOut\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleMouseMove: function (e) {\n\t\t\tif (this._animation) { return; }\n\t\t\tvar inClient = this._isClientDiv(e);\n\t\t\tif (this.isListening(\"MouseMove\")) { //$NON-NLS-1$\n\t\t\t\tif (inClient || this._isMouseDown){\n\t\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseMove\", e); //$NON-NLS-1$\n\t\t\t\t\tthis.onMouseMove(mouseEvent);\n\t\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._dropTarget) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t* Bug in IE9. IE sends one mouse event when the user changes the text by\n\t\t\t* pasting or undo.  These operations usually happen with the Ctrl key\n\t\t\t* down which causes the view to enter link mode.  Link mode does not end\n\t\t\t* because there are no further events.  The fix is to only enter link\n\t\t\t* mode when the coordinates of the mouse move event have changed.\n\t\t\t*/\n\t\t\tvar changed = this._linksVisible || this._lastMouseMoveX !== e.clientX || this._lastMouseMoveY !== e.clientY;\n\t\t\tthis._lastMouseMoveX = e.clientX;\n\t\t\tthis._lastMouseMoveY = e.clientY;\n\t\t\tthis._setLinksVisible(changed && !this._isMouseDown && e.altKey && (util.isMac ? e.metaKey : e.ctrlKey));\n\n\t\t\tthis._checkOverlayScroll();\n\n\t\t\t/*\n\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t* for a doule-click is:\n\t\t\t*\n\t\t\t*\tdown\n\t\t\t*\tup\n\t\t\t*\tup\n\t\t\t*\tdblclick\n\t\t\t*\n\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t*\n\t\t\t* In order to detect double-click and drag gestures, it is necessary to send\n\t\t\t* a mouse down event from mouse move when the button is still down and isMouseDown\n\t\t\t* flag is not set.\n\t\t\t*/\n\t\t\tif (!this._isW3CEvents) {\n\t\t\t\tif (e.button === 0) {\n\t\t\t\t\tthis._setGrab(null);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (!this._isMouseDown && e.button === 1 && (this._clickCount & 1) !== 0 && inClient) {\n\t\t\t\t\tthis._clickCount = 2;\n\t\t\t\t\treturn this._handleMouse(e, this._clickCount);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._isMouseDown || this._dragOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tvar x = e.clientX;\n\t\t\tvar y = e.clientY;\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\tvar width = this._getClientWidth (), height = this._getClientHeight();\n\t\t\tvar leftEdge = viewRect.left + viewPad.left;\n\t\t\tvar topEdge = viewRect.top + viewPad.top;\n\t\t\tvar rightEdge = viewRect.left + viewPad.left + width;\n\t\t\tvar bottomEdge = viewRect.top + viewPad.top + height;\n\t\t\tif (y < topEdge) {\n\t\t\t\tthis._doAutoScroll(\"up\", x, y - topEdge); //$NON-NLS-1$\n\t\t\t} else if (y > bottomEdge) {\n\t\t\t\tthis._doAutoScroll(\"down\", x, y - bottomEdge); //$NON-NLS-1$\n\t\t\t} else if (x < leftEdge && !this._wrapMode) {\n\t\t\t\tthis._doAutoScroll(\"left\", x - leftEdge, y); //$NON-NLS-1$\n\t\t\t} else if (x > rightEdge && !this._wrapMode) {\n\t\t\t\tthis._doAutoScroll(\"right\", x - rightEdge, y); //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tthis._endAutoScroll();\n\t\t\t\tthis._setSelectionTo(x, y, false, true);\n\t\t\t}\n\t\t},\n\t\t_isClientDiv: function(e) {\n\t\t\tvar topNode = this._overlayDiv || this._clientDiv;\n\t\t\tvar temp = e.target ? e.target : e.srcElement;\n\t\t\twhile (temp) {\n\t\t\t\tif (topNode === temp) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\ttemp = temp.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_createKeyEvent: function(type, e) {\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_createMouseEvent: function(type, e) {\n\t\t\tvar pt = this.convert({x: e.clientX, y: e.clientY}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\tclickCount: this._clickCount,\n\t\t\t\tx: pt.x,\n\t\t\t\ty: pt.y,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_createTouchEvent: function(type, e) {\n\t\t\tvar pt = e.touches.length ? this.convert({x: e.touches[0].clientX, y: e.touches[0].clientY}, \"page\", \"document\") : {}; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\ttouchCount: e.touches.length,\n\t\t\t\tx: pt.x,\n\t\t\t\ty: pt.y,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_handleMouseUp: function (e) {\n\t\t\tvar left = e.which ? e.button === 0 : e.button === 1;\n\t\t\tif (this.isListening(\"MouseUp\")) { //$NON-NLS-1$\n\t\t\t\tif (this._isClientDiv(e) || (left && this._isMouseDown)) {\n\t\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseUp\", e); //$NON-NLS-1$\n\t\t\t\t\tthis.onMouseUp(mouseEvent);\n\t\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis._isMouseDown = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._linksVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (left && this._isMouseDown) {\n\t\t\t\tvar selections = this._getSelections();\n\t\t\t\tvar selection = Selection.editing(selections);\n\t\t\t\tselections.forEach(function(sel) {\n\t\t\t\t\tsel._editing = false;\n\t\t\t\t});\n\t\t\t\tif (this._dragOffset !== -1) {\n\t\t\t\t\tselection.extend(this._dragOffset);\n\t\t\t\t\tselection.collapse();\n\t\t\t\t\tselections = selection;\n\t\t\t\t\tthis._dragOffset = -1;\n\t\t\t\t}\n\t\t\t\tthis._setSelection(selections, false);\n\t\t\t\tthis._isMouseDown = false;\n\t\t\t\tthis._endAutoScroll();\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t\t* for a doule-click is:\n\t\t\t\t*\n\t\t\t\t*\tdown\n\t\t\t\t*\tup\n\t\t\t\t*\tup\n\t\t\t\t*\tdblclick\n\t\t\t\t*\n\t\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t\t*/\n\t\t\t\tif (this._isW3CEvents) { this._setGrab(null); }\n\t\t\t}\n\t\t\t/*\n\t\t\t* Note that there cases when Firefox sets the DOM selection in mouse up.\n\t\t\t* This happens for example after a cancelled drag operation.\n\t\t\t*\n\t\t\t* Note that on Chrome and IE, the caret stops blicking if mouse up is\n\t\t\t* prevented.\n\t\t\t*/\n\t\t\tif (left && this._isMouseDown && util.isFirefox) {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\t\t_handleMouseWheel: function (e) {\n\t\t\tif (this._noScroll) return;\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar pixelX = 0, pixelY = 0;\n\t\t\t// Note: On the Mac the correct behaviour is to scroll by pixel.\n\t\t\tif (util.isIE || util.isOpera) {\n\t\t\t\tpixelY = (-e.wheelDelta / 40) * lineHeight;\n\t\t\t} else if (util.isFirefox) {\n\t\t\t\tvar limit = 256;\n\t\t\t\tif (e.type === \"wheel\") { //$NON-NLS-1$\n\t\t\t\t\tif (e.deltaMode) { // page or line\n\t\t\t\t\t\tpixelX = Math.max(-limit, Math.min(limit, e.deltaX)) * lineHeight;\n\t\t\t\t\t\tpixelY = Math.max(-limit, Math.min(limit, e.deltaY)) * lineHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixelX = e.deltaX;\n\t\t\t\t\t\tpixelY = e.deltaY;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar pixel;\n\t\t\t\t\tif (util.isMac) {\n\t\t\t\t\t\tpixel = e.detail * 3;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixel = Math.max(-limit, Math.min(limit, e.detail)) * lineHeight;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.axis === e.HORIZONTAL_AXIS) {\n\t\t\t\t\t\tpixelX = pixel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixelY = pixel;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//Webkit\n\t\t\t\tif (util.isMac) {\n\t\t\t\t\t/*\n\t\t\t\t\t* In Safari, the wheel delta is a multiple of 120. In order to\n\t\t\t\t\t* convert delta to pixel values, it is necessary to divide delta\n\t\t\t\t\t* by 40.\n\t\t\t\t\t*\n\t\t\t\t\t* In Chrome and Safari 5, the wheel delta depends on the type of the\n\t\t\t\t\t* mouse. In general, it is the pixel value for Mac mice and track pads,\n\t\t\t\t\t* but it is a multiple of 120 for other mice. There is no presise\n\t\t\t\t\t* way to determine if it is pixel value or a multiple of 120.\n\t\t\t\t\t* \n\t\t\t\t\t* Note that the current approach does not calculate the correct\n\t\t\t\t\t* pixel value for Mac mice when the delta is a multiple of 120.\n\t\t\t\t\t*\n\t\t\t\t\t* For values that are multiples of 120, the denominator varies on\n\t\t\t\t\t* the time between events.\n\t\t\t\t\t*/\n\t\t\t\t\tvar denominatorX, denominatorY;\n\t\t\t\t\tvar deltaTime = e.timeStamp - this._wheelTimeStamp;\n\t\t\t\t\tthis._wheelTimeStamp = e.timeStamp;\n\t\t\t\t\tif (e.wheelDeltaX % 120 !== 0) { \n\t\t\t\t\t\tdenominatorX = 1; \n\t\t\t\t\t} else {\n\t\t\t\t\t\tdenominatorX = deltaTime < 40 ? 40/(40-deltaTime) : 40;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.wheelDeltaY % 120 !== 0) { \n\t\t\t\t\t\tdenominatorY = 1; \n\t\t\t\t\t} else {\n\t\t\t\t\t\tdenominatorY = deltaTime < 40 ? 40/(40-deltaTime) : 40; \n\t\t\t\t\t}\n\t\t\t\t\tpixelX = Math.ceil(-e.wheelDeltaX / denominatorX);\n\t\t\t\t\tif (-1 < pixelX && pixelX < 0) { pixelX = -1; }\n\t\t\t\t\tif (0 < pixelX && pixelX < 1) { pixelX = 1; }\n\t\t\t\t\tpixelY = Math.ceil(-e.wheelDeltaY / denominatorY);\n\t\t\t\t\tif (-1 < pixelY && pixelY < 0) { pixelY = -1; }\n\t\t\t\t\tif (0 < pixelY && pixelY < 1) { pixelY = 1; }\n\t\t\t\t} else {\n\t\t\t\t\tpixelX = -e.wheelDeltaX;\n\t\t\t\t\tvar linesToScroll = 8;\n\t\t\t\t\tpixelY = (-e.wheelDeltaY / 120 * linesToScroll) * lineHeight;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* \n\t\t\t* Feature in Safari. If the event target is removed from the DOM \n\t\t\t* safari stops smooth scrolling. The fix is keep the element target\n\t\t\t* in the DOM and remove it on a later time. \n\t\t\t*\n\t\t\t* Note: Using a timer is not a solution, because the timeout needs to\n\t\t\t* be at least as long as the gesture (which is too long).\n\t\t\t*/\n\t\t\tif (util.isSafari || (util.isChrome && util.isMac)) {\n\t\t\t\tvar lineDiv = e.target;\n\t\t\t\twhile (lineDiv && lineDiv.lineIndex === undefined) {\n\t\t\t\t\tlineDiv = lineDiv.parentNode;\n\t\t\t\t}\n\t\t\t\tthis._mouseWheelLine = lineDiv;\n\t\t\t}\n\t\t\tvar oldScroll = this._getScroll();\n\t\t\tthis._scrollView(pixelX, pixelY);\n\t\t\tvar newScroll = this._getScroll();\n\t\t\tif (oldScroll.x !== newScroll.x || oldScroll.y !== newScroll.y) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handlePaste: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._ignorePaste) { return; }\n\t\t\tif (this._doPaste(e)) {\n\t\t\t\tif (util.isIE) {\n\t\t\t\t\t/*\n\t\t\t\t\t * Bug in IE,  \n\t\t\t\t\t */\n\t\t\t\t\tvar that = this;\n\t\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\t\tvar win = this._getWindow();\n\t\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\t\tthat._updateDOMSelection();\n\t\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleResize: function () {\n\t\t\tvar newWidth = this._rootDiv.clientWidth;\n\t\t\tvar newHeight = this._rootDiv.clientHeight;\n\t\t\tif (this._rootWidth !== newWidth || this._rootHeight !== newHeight) {\n\t\t\t\tif (this._rootWidth !== newWidth && this._wrapMode) {\n\t\t\t\t\tthis._resetLineHeight();\n\t\t\t\t}\n\t\t\t\tthis._rootWidth = newWidth;\n\t\t\t\tthis._rootHeight = newHeight;\n\t\t\t\t/*\n\t\t\t\t* Feature in IE7. For some reason, sometimes Internet Explorer 7 \n\t\t\t\t* returns incorrect values for element.getBoundingClientRect() when \n\t\t\t\t* inside a resize handler. The fix is to queue the work.\n\t\t\t\t*/\t\t\t\n\t\t\t\tvar queue = util.isIE < 9;\n\n\t\t\t\t/*\n\t\t\t\t* The calculated metrics may be out of date when the zoom level changes.\n\t\t\t\t*/\n\t\t\t\tvar metrics = this._calculateMetrics();\n\t\t\t\tif (!compare(metrics, this._metrics)) {\n\t\t\t\t\tif (this._metrics.invalid && !metrics.invalid) {\n\t\t\t\t\t\tthis._updateStyle(false, metrics);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this._variableLineHeight) {\n\t\t\t\t\t\t\tthis._variableLineHeight = false;\n\t\t\t\t\t\t\tthis._resetLineHeight();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._metrics = metrics;\n\t\t\t\t\t}\n\t\t\t\t\tqueue = true;\n\t\t\t\t}\n\n\t\t\t\tif (queue) {\n\t\t\t\t\tthis._queueUpdate();\n\t\t\t\t} else {\n\t\t\t\t\tthis._update();\n\t\t\t\t}\n\t\t\t\tthis.dispatchEvent({type: \"Resize\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleRulerEvent: function (e) {\n\t\t\tvar target = e.target ? e.target : e.srcElement;\n\t\t\tvar lineIndex = target.lineIndex;\n\t\t\tvar element = target;\n\t\t\twhile (element && !element._ruler) {\n\t\t\t\tif (lineIndex === undefined && element.lineIndex !== undefined) {\n\t\t\t\t\tlineIndex = element.lineIndex;\n\t\t\t\t}\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\t\t\tvar ruler = element ? element._ruler : null;\n\t\t\tif (lineIndex === undefined && ruler && ruler.getOverview() === \"document\") { //$NON-NLS-1$\n\t\t\t\tvar clientHeight = this._getClientHeight ();\n\t\t\t\tvar lineCount = this._model.getLineCount ();\n\t\t\t\tvar viewPad = this._getViewPadding();\n\t\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\t\tvar contentHeight = lineHeight * lineCount;\n\t\t\t\tvar trackHeight = clientHeight + viewPad.top + viewPad.bottom - 2 * this._metrics.scrollWidth;\n\t\t\t\tvar divHeight, arrowWidth;\n\t\t\t\tif (contentHeight < trackHeight) {\n\t\t\t\t\tdivHeight = lineHeight;\n\t\t\t\t\tarrowWidth = viewPad.top;\n\t\t\t\t} else {\n\t\t\t\t\tdivHeight = trackHeight / lineCount;\n\t\t\t\t\tarrowWidth = this._metrics.scrollWidth;\n\t\t\t\t}\n\t\t\t\tlineIndex = Math.floor(((e.clientY - viewRect.top) - arrowWidth) / divHeight);\n\t\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\t\tlineIndex = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ruler) {\n\t\t\t\tswitch (e.type) {\n\t\t\t\t\tcase \"click\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onClick) { ruler.onClick(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"dblclick\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onDblClick) { ruler.onDblClick(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mousemove\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseMove) { ruler.onMouseMove(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mouseover\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseOver) { ruler.onMouseOver(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mouseout\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseOut) { \n\t\t\t\t\t\t\tvar tmp = e.relatedTarget;\n\t\t\t\t\t\t\twhile (tmp && tmp !== this._rootDiv) {\n\t\t\t\t\t\t\t\tif (tmp === element) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttmp = tmp.parentNode;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\truler.onMouseOut(lineIndex, e); \n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleScroll: function () {\n\t\t\tthis._lastScrollTime = new Date().getTime();\n\t\t\tvar _scroll = this._getScroll(false);\n\t\t\tvar oldX = this._hScroll;\n\t\t\tvar oldY = this._vScroll;\n\t\t\tif (oldX !== _scroll.x || oldY !== _scroll.y) {\n\t\t\t\tthis._hScroll = _scroll.x;\n\t\t\t\tthis._vScroll = _scroll.y;\n\t\t\t\tthis._commitIME();\n\t\t\t\tthis._update(oldY === _scroll.y);\n\t\t\t\tvar e = {\n\t\t\t\t\ttype: \"Scroll\", //$NON-NLS-1$\n\t\t\t\t\toldValue: {x: oldX, y: oldY},\n\t\t\t\t\tnewValue: _scroll\n\t\t\t\t};\n\t\t\t\tthis.onScroll(e);\n\t\t\t}\n\t\t},\n\t\t_handleSelectStart: function (e) {\n\t\t\tvar menuOpen = this._contextMenuOpen;\n\t\t\tthis._contextMenuOpen = false;\n\t\t\tif (menuOpen) {\n\t\t\t\tthis._checkSelectionChange = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._ignoreSelect) {\n\t\t\t\tif (e && e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_getModelOffset: function(node, offset) {\n\t\t\tif (!node) { return; }\n\t\t\tvar lineNode;\n\t\t\tif (node.tagName === \"DIV\") { //$NON-NLS-1$\n\t\t\t\tlineNode = node;\n\t\t\t} else {\n\t\t\t\tlineNode = node.parentNode.parentNode;\n\t\t\t}\n\t\t\tif (!lineNode._line) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn lineNode._line.getModelOffset (node, offset);\n\t\t},\n\t\t_updateSelectionFromDOM: function() {\n\t\t\tif (!(util.isIOS || util.isAndroid || this._checkSelectionChange)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tvar selection = win.getSelection();\n\t\t\tvar start = this._getModelOffset(selection.anchorNode, selection.anchorOffset);\n\t\t\tvar end = this._getModelOffset(selection.focusNode, selection.focusOffset);\n\t\t\tvar sel = this._getSelections()[0];\n\t\t\tif (start === undefined || end === undefined || (sel.start === start && sel.end === end)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._checkSelectionChange) {\n\t\t\t\tvar firstLine = this._getLineNext();\n\t\t\t\tvar lastLine = this._getLinePrevious();\n\t\t\t\t\n\t\t\t\t// Selection is unchanged and bigger than the visible buffer region\n\t\t\t\tif (selection.anchorNode === firstLine.firstChild.firstChild && selection.anchorOffset === 0 &&\n\t\t\t\t\tselection.focusNode === lastLine.firstChild.firstChild && selection.focusOffset === 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Detect select all\n\t\t\t\tif (\n\t\t\t\t(selection.anchorNode === firstLine.firstChild.firstChild && selection.anchorOffset === 0 && selection.focusNode === lastLine.lastChild.firstChild)\n\t\t\t\t|| (selection.anchorNode === this._clientDiv && selection.focusNode === this._clientDiv)\n\t\t\t\t) {\n\t\t\t\t\tstart = 0;\n\t\t\t\t\tend = this.getModel().getCharCount();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setSelection(new Selection(start, end), false, false);\n\t\t\tthis._checkSelectionChange = false;\n\t\t\treturn true;\n\t\t},\n\t\t_cancelCheckSelection: function() {\n\t\t\tif (this._checkSelectionChange) {\n\t\t\t\tthis._checkSelectionChange = false;\n\t\t\t\tthis._cancelPollSelectionChange();\n\t\t\t}\n\t\t},\n\t\t_cancelPollSelectionChange: function() {\n\t\t\tif (this._selPollTimer) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._selPollTimer);\n\t\t\t\tthis._selPollTimer = null; \n\t\t\t}\n\t\t},\n\t\t_pollSelectionChange: function(retryPoll) {\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._cancelPollSelectionChange();\n\t\t\tthis._selPollTimer = win.setTimeout(function() {\n\t\t\t\tthat._selPollTimer = null; \n\t\t\t\tif (!that._clientDiv) { return; }\n\t\t\t\tvar changed = that._updateSelectionFromDOM();\n\t\t\t\tif (!changed && retryPoll) {\n\t\t\t\t\tthat._pollSelectionChange(retryPoll);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t},\n\t\t_handleSelectionChange: function () {\n\t\t\tif (this._imeOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t * Feature in Android. The selection handles are hidden when the DOM changes. Sending\n\t\t\t * selection events to the application while the user is moving the selection handles\n\t\t\t * may hide the handles unexpectedly.  The fix is to delay updating the selection and\n\t\t\t * sending the event to the application.\n\t\t\t */\n\t\t\tif (util.isAndroid) {\n\t\t\t\tthis._pollSelectionChange();\n\t\t\t} else {\n\t\t\t\tthis._updateSelectionFromDOM();\n\t\t\t}\n\t\t},\n\t\t_handleTextInput: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._imeOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar selection = this._getWindow().getSelection();\n\t\t\tif (\n\t\t\t\tselection.anchorNode !== this._anchorNode || selection.focusNode !== this._focusNode ||\n\t\t\t\tselection.anchorOffset !== this._anchorOffset || selection.focusOffset !== this._focusOffset\n\t\t\t) {\n\t\t\t\tvar temp = selection.anchorNode;\n\t\t\t\twhile (temp) {\n\t\t\t\t\tif (temp.lineIndex !== undefined) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t}\n\t\t\t\tif (temp) {\n\t\t\t\t\tvar model = this._model;\n\t\t\t\t\tvar lineIndex = temp.lineIndex;\n\t\t\t\t\tvar oldText = model.getLine(lineIndex), text = oldText;\n\t\t\t\t\tvar offset = 0;\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tif (selection.rangeCount > 0) {\n\t\t\t\t\t\tselection.getRangeAt(0).deleteContents();\n\t\t\t\t\t\tvar node = temp.ownerDocument.createTextNode(e.data);\n\t\t\t\t\t\tselection.getRangeAt(0).insertNode(node);\n\t\t\t\t\t\tvar nodeText = this._getDOMText(temp, node);\n\t\t\t\t\t\ttext = nodeText.text;\n\t\t\t\t\t\toffset = nodeText.offset;\n\t\t\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\t\t}\n\t\t\t\t\ttemp.lineRemoved = true;\n\t\t\t\t\t\n\t\t\t\t\tvar start = 0;\n\t\t\t\t\twhile (oldText.charCodeAt(start) === text.charCodeAt(start) && start < offset) {\n\t\t\t\t\t\tstart++;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tvar end = oldText.length - 1, delta = text.length - oldText.length;\n\t\t\t\t\twhile (oldText.charCodeAt(end) === text.charCodeAt(end + delta) && end + delta >= offset + e.data.length) {\n\t\t\t\t\t\tend--;\n\t\t\t\t\t}\n\t\t\t\t\tend++;\n\t\t\t\t\t\n\t\t\t\t\tvar deltaText = text.substring(start, end + delta);\n\t\t\t\t\tstart += lineStart;\n\t\t\t\t\tend += lineStart;\n\t\t\t\t\t\n\t\t\t\t\tvar selections = this._getSelections();\n\t\t\t\t\tvar deltaStart = selections[0].start - start;\n\t\t\t\t\tvar deltaEnd = selections[0].end - end;\n\t\t\t\t\tselections[0].start = start;\n\t\t\t\t\tselections[0].end = end;\n\t\t\t\t\tfor (var i=1; i<selections.length; i++) {\n\t\t\t\t\t\tselections[i].start -= deltaStart;\n\t\t\t\t\t\tselections[i].end -= deltaEnd;\n\t\t\t\t\t}\n\t\t\t\t\tthis._modifyContent({text: deltaText, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._doContent(e.data);\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t},\n\t\t_handleTouchStart: function (e) {\n\t\t\tif (this.isListening(\"TouchStart\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchStart\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchStart(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._commitIME();\n\t\t\tvar win = this._getWindow();\n\t\t\tif (this._touchScrollTimer) {\n\t\t\t\tthis._vScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\twin.clearInterval(this._touchScrollTimer);\n\t\t\t\tthis._touchScrollTimer = null;\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 1) {\n\t\t\t\tvar touch = touches[0];\n\t\t\t\tvar x = touch.clientX, y = touch.clientY;\n\t\t\t\tthis._touchStartX = x;\n\t\t\t\tthis._touchStartY = y;\n\t\t\t\tif (util.isAndroid) {\n\t\t\t\t\t/*\n\t\t\t\t\t* Bug in Android 4.  The clientX/Y coordinates of the touch events\n\t\t\t\t\t* include the page scrolling offsets.\n\t\t\t\t\t*/\n\t\t\t\t    if (y < (touch.pageY - win.pageYOffset) || x < (touch.pageX - win.pageXOffset) ) {\n\t\t\t\t\t\tx = touch.pageX - win.pageXOffset;\n\t\t\t\t\t\ty = touch.pageY - win.pageYOffset;\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t\tvar pt = this.convert({x: x, y: y}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tthis._lastTouchOffset = this.getOffsetAtLocation(pt.x, pt.y);\n\t\t\t\tthis._touchStartTime = e.timeStamp;\n\t\t\t\tthis._touching = true;\n\t\t\t}\n\t\t},\n\t\t_handleTouchMove: function (e) {\n\t\t\tif (this.isListening(\"TouchMove\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchMove\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchMove(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 1) {\n\t\t\t\tvar touch = touches[0];\n\t\t\t\tthis._touchCurrentX = touch.clientX;\n\t\t\t\tthis._touchCurrentY = touch.clientY;\n\t\t\t\tvar interval = 10;\n\t\t\t\tif (!this._touchScrollTimer && (e.timeStamp - this._touchStartTime) < (interval*20)) {\n\t\t\t\t\tthis._vScrollDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\t\tthis._hScrollDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\tvar that = this;\n\t\t\t\t\tvar win = this._getWindow();\n\t\t\t\t\tthis._touchScrollTimer = win.setInterval(function() {\n\t\t\t\t\t\tvar deltaX = 0, deltaY = 0;\n\t\t\t\t\t\tif (that._touching) {\n\t\t\t\t\t\t\tdeltaX = that._touchStartX - that._touchCurrentX;\n\t\t\t\t\t\t\tdeltaY = that._touchStartY - that._touchCurrentY;\n\t\t\t\t\t\t\tthat._touchSpeedX = deltaX / interval;\n\t\t\t\t\t\t\tthat._touchSpeedY = deltaY / interval;\n\t\t\t\t\t\t\tthat._touchStartX = that._touchCurrentX;\n\t\t\t\t\t\t\tthat._touchStartY = that._touchCurrentY;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (Math.abs(that._touchSpeedX) < 0.1 && Math.abs(that._touchSpeedY) < 0.1) {\n\t\t\t\t\t\t\t\tthat._vScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\t\tthat._hScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\t\twin.clearInterval(that._touchScrollTimer);\n\t\t\t\t\t\t\t\tthat._touchScrollTimer = null;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdeltaX = that._touchSpeedX * interval;\n\t\t\t\t\t\t\t\tdeltaY = that._touchSpeedY * interval;\n\t\t\t\t\t\t\t\tthat._touchSpeedX *= 0.95;\n\t\t\t\t\t\t\t\tthat._touchSpeedY *= 0.95;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthat._scrollView(deltaX, deltaY);\n\t\t\t\t\t}, interval);\n\t\t\t\t}\n\t\t\t\tif (this._touchScrollTimer) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleTouchEnd: function (e) {\n\t\t\tif (this.isListening(\"TouchEnd\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchEnd\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchEnd(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 0) {\n\t\t\t\tthis._touching = false;\n\t\t\t}\n\t\t},\n\n\t\t/************************************ Actions ******************************************/\n\t\t_doAction: function (e) {\n\t\t\tvar mode, i;\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (i = keyModes.length - 1 ; i >= 0; i--) {\n\t\t\t\tmode = keyModes[i];\n\t\t\t\tif (typeof mode.match === \"function\") { //$NON-NLS-1$\n\t\t\t\t\tvar actionID = mode.match(e);\n\t\t\t\t\tif (actionID !== undefined) {\n\t\t\t\t\t\treturn this.invokeAction(actionID);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_doMove: function(args, selection) {\n\t\t\tvar model = this._model;\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar lineIndex = model.getLineAtOffset(caret);\n\t\t\tif (!args.count) {\n\t\t\t\targs.count = 1;\n\t\t\t}\n\t\t\twhile (args.count !== 0) {\n\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\tif (args.count < 0 && caret === lineStart) {\n\t\t\t\t\tif (lineIndex > 0) {\n\t\t\t\t\t\tif (args.unit === \"character\") { //$NON-NLS-1$\n\t\t\t\t\t\t\targs.count++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\tselection.extend(model.getLineEnd(lineIndex));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if (args.count > 0 && caret === model.getLineEnd(lineIndex)) {\n\t\t\t\t\tif (lineIndex + 1 < model.getLineCount()) {\n\t\t\t\t\t\tif (args.unit === \"character\") { //$NON-NLS-1$\n\t\t\t\t\t\t\targs.count--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t\tselection.extend(model.getLineStart(lineIndex));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar removeTab = false;\n\t\t\t\t\tif (args.expandTab && args.unit === \"character\" && (caret - lineStart) % this._tabSize === 0) { //$NON-NLS-1$\n\t\t\t\t\t\tvar lineText = model.getText(lineStart, caret);\n\t\t\t\t\t\tremoveTab = !/[^ ]/.test(lineText); // Only spaces between line start and caret.\n\t\t\t\t\t}\n\t\t\t\t\tif (removeTab) {\n\t\t\t\t\t\tselection.extend(caret - this._tabSize);\n\t\t\t\t\t\targs.count += args.count < 0 ? 1 : -1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar line = this._getLine(lineIndex);\n\t\t\t\t\t\tselection.extend(line.getNextOffset(caret, args));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcaret = selection.getCaret();\n\t\t\t}\n\t\t\treturn selection;\n\t\t},\n\t\t_doBackspace: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\tif (!args.count) {\n\t\t\t\t\t\targs.count = 1;\n\t\t\t\t\t}\n\t\t\t\t\targs.count *= -1;\n\t\t\t\t\targs.expandTab = that._expandTab;\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCase: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar changes = [];\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tthat._doMove(args, selection);\n\t\t\t\tvar text = that.getText(selection.start, selection.end);\n\t\t\t\tswitch (args.type) {\n\t\t\t\t\tcase \"lower\": text = text.toLowerCase(); break; //$NON-NLS-1$\n\t\t\t\t\tcase \"capitalize\": text = text.replace(/(?:^|\\s)\\S/g, function(a) { return a.toUpperCase(); }); break; //$NON-NLS-1$\n\t\t\t\t\tcase \"reverse\":  //$NON-NLS-1$\n\t\t\t\t\t\tvar newText = \"\";\n\t\t\t\t\t\tfor (var i=0; i<text.length; i++) {\n\t\t\t\t\t\t\tvar s = text[i];\n\t\t\t\t\t\t\tvar l = s.toLowerCase();\n\t\t\t\t\t\t\tif (l !== s) {\n\t\t\t\t\t\t\t\ts = l;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ts = s.toUpperCase();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnewText += s;\n\t\t\t\t\t\t} \n\t\t\t\t\t\ttext = newText;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault: text = text.toUpperCase(); break;\n\t\t\t\t}\n\t\t\t\tchanges.push(text);\n\t\t\t});\n\t\t\treturn this._modifyContent({text: changes, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doContent: function (text) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (that._overwriteMode && selection.isEmpty()) {\n\t\t\t\t\tvar model = that._model;\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(selection.end);\n\t\t\t\t\tif (selection.end < model.getLineEnd(lineIndex)) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tselection.extend(line.getNextOffset(selection.getCaret(), {unit:\"character\", count:1})); //$NON-NLS-1$\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this._modifyContent({text: text, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doCopy: function (e) {\n\t\t\tvar text = this.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\treturn this._setClipboardText(text, e);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doCursorNext: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty() && !args.select) {\n\t\t\t\t\tselection.start = selection.end;\n\t\t\t\t} else {\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCursorPrevious: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty() && !args.select) {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t} else {\n\t\t\t\t\tif (!args.count) {\n\t\t\t\t\t\targs.count = 1;\n\t\t\t\t\t}\n\t\t\t\t\targs.count *= -1;\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCut: function (e) {\n\t\t\tvar text = this.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\tif (!this._setClipboardText(text, e)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis._doContent(\"\");\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doDelete: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doEnd: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (args.ctrl) {\n\t\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\t\tif (that._wrapMode) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tvar visualIndex = line.getLineIndex(offset);\n\t\t\t\t\t\tif (visualIndex === line.getLineCount() - 1) {\n\t\t\t\t\t\t\toffset = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toffset = line.getLineStart(visualIndex + 1) - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\t\tlineIndex = Math.min (lineIndex  + args.count - 1, model.getLineCount() - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset = model.getLineEnd(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(offset);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, args.ctrl ? function() {} : null);\n\t\t\treturn true;\n\t\t},\n\t\t_doEnter: function (args) {\n\t\t\tif (this._singleMode) return true;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tthis._doContent(model.getLineDelimiter()); \n\t\t\tif (args && args.noCursor) {\n\t\t\t\tselections.forEach(function(selection) {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t});\n\t\t\t\tthis._setSelection(selections, true);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doEscape: function () {\n\t\t\tvar selections = this._getSelections();\n\t\t\tif (selections.length > 1) {\n\t\t\t\tthis._setSelection(selections[0], true);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doHome: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (args.ctrl) {\n\t\t\t\t\tselection.extend(0);\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\t\tif (that._wrapMode) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tvar visualIndex = line.getLineIndex(offset);\n\t\t\t\t\t\toffset = line.getLineStart(visualIndex);\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t} else {\n\t\t\t\t\t\toffset = model.getLineStart(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(offset); \n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, args.ctrl ? function() {} : null);\n\t\t\treturn true;\n\t\t},\n\t\t_doLineDown: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caret), visualIndex;\n\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\tvar x = selection._columnX, y = 1, lastLine = false;\n\t\t\t\tif (x === -1 || args.wholeLine || (args.select && util.isIE)) {\n\t\t\t\t\tvar offset = args.wholeLine ? model.getLineEnd(lineIndex + 1) : caret;\n\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(offset).left;\n\t\t\t\t}\n\t\t\t\tif ((visualIndex = line.getLineIndex(caret)) < line.getLineCount() - 1) {\n\t\t\t\t\ty = line.getClientRects(visualIndex + 1).top + 1;\n\t\t\t\t} else {\n\t\t\t\t\tvar lastLineCount = model.getLineCount() - 1;\n\t\t\t\t\tlastLine = lineIndex === lastLineCount;\n\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\tlineIndex = Math.min (lineIndex + args.count, lastLineCount);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar select = false;\n\t\t\t\tif (lastLine) {\n\t\t\t\t\tif (args.select || (util.isMac || util.isLinux)) {\n\t\t\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t\t\t\tselect = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (line.lineIndex !== lineIndex) {\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(line.getOffset(x, y));\n\t\t\t\t\tselect = true;\n\t\t\t\t}\n\t\t\t\tif (select) {\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t}\n\t\t\t\tline.destroy();\n\t\t\t});\n\t\t\tthat._setSelection(selections, true, true, null, 0, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doLineUp: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caret), visualIndex;\n\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\tvar x = selection._columnX, firstLine = false, y;\n\t\t\t\tif (x === -1 || args.wholeLine || (args.select && util.isIE)) {\n\t\t\t\t\tvar offset = args.wholeLine ? model.getLineStart(lineIndex - 1) : caret;\n\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(offset).left;\n\t\t\t\t}\n\t\t\t\tif ((visualIndex = line.getLineIndex(caret)) > 0) {\n\t\t\t\t\ty = line.getClientRects(visualIndex - 1).top + 1;\n\t\t\t\t} else {\n\t\t\t\t\tfirstLine = lineIndex === 0;\n\t\t\t\t\tif (!firstLine) {\n\t\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\t\tlineIndex = Math.max (lineIndex - args.count, 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ty = that._getLineHeight(lineIndex) - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar select = false;\n\t\t\t\tif (firstLine) {\n\t\t\t\t\tif (args.select || (util.isMac || util.isLinux)) {\n\t\t\t\t\t\tselection.extend(0);\n\t\t\t\t\t\tselect = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (line.lineIndex !== lineIndex) {\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(line.getOffset(x, y));\n\t\t\t\t\tselect = true;\n\t\t\t\t}\n\t\t\t\tif (select) {\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t}\n\t\t\t\tline.destroy();\n\t\t\t});\n\t\t\tthat._setSelection(selections, true, true, null, 0, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doNoop: function () {\n\t\t\treturn true;\n\t\t},\n\t\t_doPageDown: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar lines = Math.floor(clientHeight / lineHeight);\n\t\t\tvar x, line, pageScroll;\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar caretLine = model.getLineAtOffset(caret);\n\t\t\t\tif (that._lineHeight) {\n\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\tvar caretRect = that._getBoundsAtOffset(caret);\n\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\tx = selection._columnX = caretRect.left;\n\t\t\t\t\t}\n\t\t\t\t\tvar lineIndex = that._getLineIndex(caretRect.top + clientHeight);\n\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\tvar linePixel = that._getLinePixel(lineIndex);\n\t\t\t\t\tvar y = caretRect.top + clientHeight - linePixel;\n\t\t\t\t\tcaret = line.getOffset(x, y);\n\t\t\t\t\tvar rect = line.getBoundingClientRect(caret);\n\t\t\t\t\tline.destroy();\n\t\t\t\t\tselection.extend(caret);\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.min(pageScroll, rect.top + linePixel - caretRect.top) : rect.top + linePixel - caretRect.top;\n\t\t\t\t} else {\n\t\t\t\t\tif (caretLine < lineCount - 1) {\n\t\t\t\t\t\tvar scrollLines = Math.min(lineCount - caretLine - 1, lines);\n\t\t\t\t\t\tscrollLines = Math.max(1, scrollLines);\n\t\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\t\tline = that._getLine(caretLine);\n\t\t\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(caret).left;\n\t\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = that._getLine(caretLine + scrollLines);\n\t\t\t\t\t\tselection.extend(line.getOffset(x, 0));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\t\tvar verticalMaximum = lineCount * lineHeight;\n\t\t\t\t\t\tvar scrollOffset = _scroll.y + scrollLines * lineHeight;\n\t\t\t\t\t\tif (scrollOffset + clientHeight > verticalMaximum) {\n\t\t\t\t\t\t\tscrollOffset = verticalMaximum - clientHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.min(pageScroll, scrollOffset - _scroll.y) : scrollOffset - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, function() {}, pageScroll, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doPageUp: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar lines = Math.floor(clientHeight / lineHeight);\n\t\t\tvar x, line, pageScroll;\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar caretLine = model.getLineAtOffset(caret);\n\t\t\t\tif (that._lineHeight) {\n\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\tvar caretRect = that._getBoundsAtOffset(caret);\n\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\tx = selection._columnX = caretRect.left;\n\t\t\t\t\t}\n\t\t\t\t\tvar lineIndex = that._getLineIndex(caretRect.bottom - clientHeight);\n\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\tvar linePixel = that._getLinePixel(lineIndex);\n\t\t\t\t\tvar y = (caretRect.bottom - clientHeight) - linePixel;\n\t\t\t\t\tcaret = line.getOffset(x, y);\n\t\t\t\t\tvar rect = line.getBoundingClientRect(caret);\n\t\t\t\t\tline.destroy();\n\t\t\t\t\tselection.extend(caret);\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.max(pageScroll, rect.top + linePixel - caretRect.top) : rect.top + linePixel - caretRect.top;\n\t\t\t\t} else {\n\t\t\t\t\tif (caretLine > 0) {\n\t\t\t\t\t\tvar scrollLines = Math.max(1, Math.min(caretLine, lines));\n\t\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\t\tline = that._getLine(caretLine);\n\t\t\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(caret).left;\n\t\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = that._getLine(caretLine - scrollLines);\n\t\t\t\t\t\tselection.extend(line.getOffset(x, that._getLineHeight(caretLine - scrollLines) - 1));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\t\tvar scrollOffset = Math.max(0, _scroll.y - scrollLines * lineHeight);\n\t\t\t\t\t\tpageScroll = pageScroll !== undefined  ? Math.max(pageScroll, scrollOffset - _scroll.y) : scrollOffset - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, function() {}, pageScroll, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doPaste: function(e) {\n\t\t\tvar that = this;\n\t\t\tvar result = this._getClipboardText(e, function(text) {\n\t\t\t\tif (text.length) {\n\t\t\t\t\tif (util.isLinux && that._lastMouseButton === 2) {\n\t\t\t\t\t\tvar timeDiff = new Date().getTime() - that._lastMouseTime;\n\t\t\t\t\t\tif (timeDiff <= that._clickTime) {\n\t\t\t\t\t\t\tthat._setSelectionTo(that._lastMouseX, that._lastMouseY, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar selections = that._getSelections();\n\t\t\t\t\tvar delimiter = that._singleMode ? \"\" : that._model.getLineDelimiter();\n\t\t\t\t\tthat._doContent(selections.length > 1 && selections.length === text.length ? text : text.join(delimiter));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result !== null;\n\t\t},\n\t\t_doScroll: function (args) {\n\t\t\tvar type = args.type;\n\t\t\tvar model = this._model;\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar verticalMaximum = this._lineHeight ? this._scrollHeight : lineCount * lineHeight;\n\t\t\tvar verticalScrollOffset = this._getScroll().y;\n\t\t\tvar pixel;\n\t\t\tswitch (type) {\n\t\t\t\tcase \"textStart\": pixel = 0; break; //$NON-NLS-1$\n\t\t\t\tcase \"textEnd\": pixel = verticalMaximum - clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"pageDown\": pixel = verticalScrollOffset + clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"pageUp\": pixel = verticalScrollOffset - clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"lineDown\": pixel = verticalScrollOffset + lineHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"lineUp\": pixel = verticalScrollOffset - lineHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"centerLine\": //$NON-NLS-1$\n\t\t\t\t\tvar selection = this._getSelections()[0];\n\t\t\t\t\tvar lineStart = model.getLineAtOffset(selection.start);\n\t\t\t\t\tvar lineEnd = model.getLineAtOffset(selection.end);\n\t\t\t\t\tvar selectionHeight = (lineEnd - lineStart + 1) * lineHeight;\n\t\t\t\t\tpixel = (lineStart * lineHeight) - (clientHeight / 2) + (selectionHeight / 2);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (pixel !== undefined) {\n\t\t\t\tpixel = Math.min(Math.max(0, pixel), verticalMaximum - clientHeight);\n\t\t\t\tthis._scrollViewAnimated(0, pixel - verticalScrollOffset, function() {});\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doSelectAll: function () {\n\t\t\tvar model = this._model;\n\t\t\tthis._setSelection(new Selection(0, model.getCharCount()), false);\n\t\t\treturn true;\n\t\t},\n\t\t_doTab: function () {\n\t\t\tif (!this._tabMode || this._readonly) { return; }\n\t\t\tvar text = \"\\t\"; //$NON-NLS-1$\n\t\t\tvar selections = this._getSelections();\n\t\t\tif (this._expandTab) {\n\t\t\t\ttext = [];\n\t\t\t\tvar model = this._model;\n\t\t\t\tvar tabSize = this._tabSize;\n\t\t\t\tselections.forEach(function(selection) {\n\t\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(caret);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tvar spaces = tabSize - ((caret - lineStart) % tabSize);\n\t\t\t\t\ttext.push((newArray(spaces + 1)).join(\" \")); //$NON-NLS-1$\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this._modifyContent({text: text, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doShiftTab: function () {\n\t\t\tif (!this._tabMode || this._readonly) { return; }\n\t\t\treturn true;\n\t\t},\n\t\t_doOverwriteMode: function () {\n\t\t\tif (this._readonly) { return; }\n\t\t\tthis.setOptions({overwriteMode: !this.getOptions(\"overwriteMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_doTabMode: function () {\n\t\t\tthis.setOptions({tabMode: !this.getOptions(\"tabMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_doWrapMode: function () {\n\t\t\tthis.setOptions({wrapMode: !this.getOptions(\"wrapMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t\n\t\t/************************************ Internals ******************************************/\n\t\t_autoScroll: function () {\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar selection = Selection.editing(selections, this._autoScrollDir === \"down\"); //$NON-NLS-1$\n\t\t\tvar pt = this.convert({x: this._autoScrollX, y: this._autoScrollY}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar caretLine = model.getLineAtOffset(caret), lineIndex, line;\n\t\t\tif (this._autoScrollDir === \"up\" || this._autoScrollDir === \"down\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tvar _scroll = this._autoScrollY / this._getLineHeight();\n\t\t\t\t_scroll = _scroll < 0 ? Math.floor(_scroll) : Math.ceil(_scroll);\n\t\t\t\tlineIndex = caretLine;\n\t\t\t\tlineIndex = Math.max(0, Math.min(lineCount - 1, lineIndex + _scroll));\n\t\t\t} else if (this._autoScrollDir === \"left\" || this._autoScrollDir === \"right\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tlineIndex = this._getLineIndex(pt.y);\n\t\t\t\tline = this._getLine(caretLine); \n\t\t\t\tpt.x += line.getBoundingClientRect(caret, false).left;\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tif (this._blockSelection) {\n\t\t\t\tselections = this._getBlockSelections(selections, lineIndex, pt);\n\t\t\t} else if (lineIndex === 0 && (util.isMac || util.isLinux)) {\n\t\t\t\tselection.extend(0);\n\t\t\t} else if (lineIndex === lineCount - 1 && (util.isMac || util.isLinux)) {\n\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t} else {\n\t\t\t\tline = this._getLine(lineIndex);\n\t\t\t\tselection.extend(line.getOffset(pt.x, pt.y - this._getLinePixel(lineIndex)));\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tthis._setSelection(selections, true);\n\t\t},\n\t\t_autoScrollTimer: function () {\n\t\t\tthis._autoScroll();\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._autoScrollTimerID = win.setTimeout(function () {that._autoScrollTimer();}, this._AUTO_SCROLL_RATE);\n\t\t},\n\t\t_calculateLineHeightTimer: function(calculate) {\n\t\t\tif (!this._lineHeight) { return; }\n\t\t\tif (this._calculateLHTimer) { return; }\n\t\t\tvar lineCount = this._model.getLineCount(), i = 0;\n\t\t\tif (calculate) {\n\t\t\t\tvar c = 0;\n\t\t\t\tvar MAX_TIME = 100;\n\t\t\t\tvar start = new Date().getTime(), firstLine = 0;\n\t\t\t\twhile (i < lineCount) {\n\t\t\t\t\tif (!this._lineHeight[i]) {\n\t\t\t\t\t\tc++;\n\t\t\t\t\t\tif (!firstLine) { firstLine = i; }\n\t\t\t\t\t\tthis._lineHeight[i] = this._calculateLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t\ti++;\n\t\t\t\t\tif ((new Date().getTime() - start) > MAX_TIME) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.redrawRulers(0, lineCount);\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tif (i !== lineCount) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._calculateLHTimer = win.setTimeout(function() {\n\t\t\t\t\tthat._calculateLHTimer = null;\n\t\t\t\t\tthat._calculateLineHeightTimer(true);\n\t\t\t\t}, 0);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._calculateLHTimer) {\n\t\t\t\twin.clearTimeout(this._calculateLHTimer);\n\t\t\t\tthis._calculateLHTimer = undefined;\n\t\t\t}\n\t\t},\n\t\t_calculateLineHeight: function(lineIndex) {\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar rect = line.getBoundingClientRect();\n\t\t\tline.destroy();\n\t\t\treturn Math.max(1, rect.bottom - rect.top);\n\t\t},\n\t\t_calculateMetrics: function() {\n\t\t\tvar _parent = this._clientDiv;\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar c = \" \"; //$NON-NLS-1$\n\t\t\tvar line = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tline.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\tvar model = this._model;\n\t\t\tvar lineText = model.getLine(0);\n\t\t\tvar e = {type:\"LineStyle\", textView: this, 0: 0, lineText: lineText, lineStart: 0}; //$NON-NLS-1$\n\t\t\tthis.onLineStyle(e);\n\t\t\tapplyStyle(e.style, line);\n\t\t\tline.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tline.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tvar span1 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan1.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span1);\n\t\t\tvar span2 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan2.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\tspan2.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span2);\n\t\t\tvar span3 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan3.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\tspan3.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span3);\n\t\t\tvar span4 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan4.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\tspan4.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\tspan4.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span4);\n\t\t\t_parent.appendChild(line);\n\t\t\tvar lineRect = line.getBoundingClientRect();\n\t\t\tvar spanRect1 = span1.getBoundingClientRect();\n\t\t\tvar spanRect2 = span2.getBoundingClientRect();\n\t\t\tvar spanRect3 = span3.getBoundingClientRect();\n\t\t\tvar spanRect4 = span4.getBoundingClientRect();\n\t\t\tvar h1 = spanRect1.bottom - spanRect1.top;\n\t\t\tvar h2 = spanRect2.bottom - spanRect2.top;\n\t\t\tvar h3 = spanRect3.bottom - spanRect3.top;\n\t\t\tvar h4 = spanRect4.bottom - spanRect4.top;\n\t\t\tvar fontStyle = 0;\n\t\t\tvar invalid = (lineRect.bottom - lineRect.top) <= 0;\n\t\t\tvar lineHeight = Math.max(1, lineRect.bottom - lineRect.top);\n\t\t\tif (h2 > h1) {\n\t\t\t\tfontStyle = 1;\n\t\t\t}\n\t\t\tif (h3 > h2) {\n\t\t\t\tfontStyle = 2;\n\t\t\t}\n\t\t\tif (h4 > h3) {\n\t\t\t\tfontStyle = 3;\n\t\t\t}\n\t\t\tvar style;\n\t\t\tif (fontStyle !== 0) {\n\t\t\t\tstyle = {style: {}};\n\t\t\t\tif ((fontStyle & 1) !== 0) {\n\t\t\t\t\tstyle.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif ((fontStyle & 2) !== 0) {\n\t\t\t\t\tstyle.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar trim = getLineTrim(line);\n\t\t\t_parent.removeChild(line);\n\t\t\t\n\t\t\t// calculate pad and scroll width\n\t\t\tvar pad = getPadding(this._viewDiv);\n\t\t\tvar div1 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingLeft = pad.left + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingTop = pad.top + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingRight = pad.right + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingBottom = pad.bottom + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.width = \"100px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.height = \"100px\"; //$NON-NLS-1$\n\t\t\tvar div2 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv2.style.width = \"100%\"; //$NON-NLS-1$\n\t\t\tdiv2.style.height = \"100%\"; //$NON-NLS-1$\n\t\t\tdiv1.appendChild(div2);\n\t\t\t_parent.appendChild(div1);\n\t\t\tvar rect1 = div1.getBoundingClientRect();\n\t\t\tvar rect2 = div2.getBoundingClientRect();\n\t\t\tvar scrollWidth = 0;\n\t\t\tif (!this._singleMode && !this._noScroll) {\n\t\t\t\tdiv1.style.overflow = 'hidden'; //$NON-NLS-1$\n\t\t\t\tdiv2.style.height = \"200px\"; //$NON-NLS-1$\n\t\t\t\tvar w1 = div1.clientWidth;\n\t\t\t\tdiv1.style.overflow = 'scroll'; //$NON-NLS-1$\n\t\t\t\tvar w2 = div1.clientWidth;\n\t\t\t\tscrollWidth = w1 - w2;\n\t\t\t}\n\t\t\t_parent.removeChild(div1);\n\t\t\tpad = {\n\t\t\t\tleft: rect2.left - rect1.left,\n\t\t\t\ttop: rect2.top - rect1.top,\n\t\t\t\tright: rect1.right - rect2.right,\n\t\t\t\tbottom: rect1.bottom - rect2.bottom\n\t\t\t};\n\t\t\tvar wrapWidth = 0, marginWidth = 0, charWidth = 0;\n\t\t\tif (!invalid) {\n\t\t\t\tdiv1 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\t_parent.appendChild(div1);\n\t\t\t\tdiv1.innerHTML = newArray(2).join(\"a\"); //$NON-NLS-1$\n\t\t\t\trect1 = div1.getBoundingClientRect();\n\t\t\t\tcharWidth = Math.ceil(rect1.right - rect1.left);\n\t\t\t\tif (this._wrapOffset || this._marginOffset) {\n\t\t\t\t\tdiv1.innerHTML = newArray(this._wrapOffset + 1 + (util.isWebkit ? 0 : 1)).join(\" \"); //$NON-NLS-1$\n\t\t\t\t\trect1 = div1.getBoundingClientRect();\n\t\t\t\t\twrapWidth = Math.ceil(rect1.right - rect1.left);\n\t\t\t\t\tdiv1.innerHTML = newArray(this._marginOffset + 1).join(\" \"); //$NON-NLS-1$\n\t\t\t\t\trect2 = div1.getBoundingClientRect();\n\t\t\t\t\tmarginWidth = Math.ceil(rect2.right - rect2.left);\n\t\t\t\t}\n\t\t\t\t_parent.removeChild(div1);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tlineHeight: lineHeight,\n\t\t\t\tlargestFontStyle: style,\n\t\t\t\tlineTrim: trim,\n\t\t\t\tviewPadding: pad,\n\t\t\t\tscrollWidth: scrollWidth,\n\t\t\t\twrapWidth: wrapWidth,\n\t\t\t\tmarginWidth: marginWidth,\n\t\t\t\tcharWidth: charWidth,\n\t\t\t\tinvalid: invalid\n\t\t\t};\n\t\t},\n\t\t_cancelAnimation: function() {\n\t\t\tif (this._animation) {\n\t\t\t\tthis._animation.stop();\n\t\t\t\tthis._animation = null;\n\t\t\t}\n\t\t},\n\t\t_clearSelection: function (direction) {\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (direction === \"next\") { //$NON-NLS-1$\n\t\t\t\t\tselection.start = selection.end;\n\t\t\t\t} else {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_commitIME: function (insertText) {\n\t\t\tif (this._imeOffset === -1) { return; }\n\t\t\tvar model = this._model;\n\t\t\tvar lineIndex = model.getLineAtOffset(this._imeOffset);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar line = this._getLineNode(lineIndex);\n\t\t\tif (!insertText) {\n\t\t\t\t// make the state of the IME match the state the view expects it be in\n\t\t\t\t// when the view commits the text and IME also need to be committed\n\t\t\t\t// this can be accomplished by changing the focus around\n\t\t\t\tthis._scrollDiv.focus();\n\t\t\t\tthis._clientDiv.focus();\n\t\t\t\t\n\t\t\t\tvar newText = this._getDOMText(line).text;\n\t\t\t\tvar oldText = model.getLine(lineIndex);\n\t\t\t\tvar start = this._imeOffset - lineStart;\n\t\t\t\tvar end = start + newText.length - oldText.length;\n\t\t\t\tif (start !== end) {\n\t\t\t\t\tinsertText = newText.substring(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._imeOffset = -1;\n\t\t\tif (insertText) {\n\t\t\t\tif (!this._doContent(insertText) && !util.isWebkit) {\n\t\t\t\t\tline.lineRemoved = true;\n\t\t\t\t\tthis._queueUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_createActions: function () {\n\t\t\tthis.addKeyMode(new mKeyModes.DefaultKeyMode(this));\n\t\t\t//1 to 1, no duplicates\n\t\t\tvar that = this;\n\t\t\tthis._actions = {\n\t\t\t\t\"noop\": {defaultHandler: function() {return that._doNoop();}}, //$NON-NLS-1$\n\n\t\t\t\t\"lineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: false}));}, actionDescription: {name: messages.lineUp}}, //$NON-NLS-1$\n\t\t\t\t\"lineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: false}));}, actionDescription: {name: messages.lineDown}}, //$NON-NLS-1$\n\t\t\t\t\"lineStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: false, ctrl:false}));}, actionDescription: {name: messages.lineStart}}, //$NON-NLS-1$\n\t\t\t\t\"lineEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: false, ctrl:false}));}, actionDescription: {name: messages.lineEnd}}, //$NON-NLS-1$\n\t\t\t\t\"charPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: false, unit:\"character\"}));}, actionDescription: {name: messages.charPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"charNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: false, unit:\"character\"}));}, actionDescription: {name: messages.charNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"pageUp\": {defaultHandler: function(data) {return that._doPageUp(merge(data,{select: false}));}, actionDescription: {name: messages.pageUp}}, //$NON-NLS-1$\n\t\t\t\t\"pageDown\": {defaultHandler: function(data) {return that._doPageDown(merge(data,{select: false}));}, actionDescription: {name: messages.pageDown}}, //$NON-NLS-1$\n\t\t\t\t\"scrollPageUp\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"pageUp\"}));}, actionDescription: {name: messages.scrollPageUp}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollPageDown\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"pageDown\"}));}, actionDescription: {name: messages.scrollPageDown}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollLineUp\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"lineUp\"}));}, actionDescription: {name: messages.scrollLineUp}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollLineDown\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"lineDown\"}));}, actionDescription: {name: messages.scrollLineDown}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"wordPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: false, unit:\"word\"}));}, actionDescription: {name: messages.wordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"wordNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: false, unit:\"word\"}));}, actionDescription: {name: messages.wordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"textStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: false, ctrl:true}));}, actionDescription: {name: messages.textStart}}, //$NON-NLS-1$\n\t\t\t\t\"textEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: false, ctrl:true}));}, actionDescription: {name: messages.textEnd}}, //$NON-NLS-1$\n\t\t\t\t\"scrollTextStart\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"textStart\"}));}, actionDescription: {name: messages.scrollTextStart}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollTextEnd\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"textEnd\"}));}, actionDescription: {name: messages.scrollTextEnd}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"centerLine\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"centerLine\"}));}, actionDescription: {name: messages.centerLine}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"selectLineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: true}));}, actionDescription: {name: messages.selectLineUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: true}));}, actionDescription: {name: messages.selectLineDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectWholeLineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: true, wholeLine: true}));}, actionDescription: {name: messages.selectWholeLineUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectWholeLineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: true, wholeLine: true}));}, actionDescription: {name: messages.selectWholeLineDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: true, ctrl:false}));}, actionDescription: {name: messages.selectLineStart}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: true, ctrl:false}));}, actionDescription: {name: messages.selectLineEnd}}, //$NON-NLS-1$\n\t\t\t\t\"selectCharPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: true, unit:\"character\"}));}, actionDescription: {name: messages.selectCharPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectCharNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: true, unit:\"character\"}));}, actionDescription: {name: messages.selectCharNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectPageUp\": {defaultHandler: function(data) {return that._doPageUp(merge(data,{select: true}));}, actionDescription: {name: messages.selectPageUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectPageDown\": {defaultHandler: function(data) {return that._doPageDown(merge(data,{select: true}));}, actionDescription: {name: messages.selectPageDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectWordPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: true, unit:\"word\"}));}, actionDescription: {name: messages.selectWordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectWordNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: true, unit:\"word\"}));}, actionDescription: {name: messages.selectWordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectTextStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: true, ctrl:true}));}, actionDescription: {name: messages.selectTextStart}}, //$NON-NLS-1$\n\t\t\t\t\"selectTextEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: true, ctrl:true}));}, actionDescription: {name: messages.selectTextEnd}}, //$NON-NLS-1$\n\n\t\t\t\t\"deletePrevious\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit:\"character\"}));}, actionDescription: {name: messages.deletePrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteNext\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit:\"character\"}));}, actionDescription: {name: messages.deleteNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteWordPrevious\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit:\"word\"}));}, actionDescription: {name: messages.deleteWordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteWordNext\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit:\"word\"}));}, actionDescription: {name: messages.deleteWordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteLineStart\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit: \"line\"}));}, actionDescription: {name: messages.deleteLineStart}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteLineEnd\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit: \"line\"}));}, actionDescription: {name: messages.deleteLineEnd}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"tab\": {defaultHandler: function(data) {return that._doTab(merge(data,{}));}, actionDescription: {name: messages.tab}}, //$NON-NLS-1$\n\t\t\t\t\"shiftTab\": {defaultHandler: function(data) {return that._doShiftTab(merge(data,{}));}, actionDescription: {name: messages.shiftTab}}, //$NON-NLS-1$\n\t\t\t\t\"enter\": {defaultHandler: function(data) {return that._doEnter(merge(data,{}));}, actionDescription: {name: messages.enter}}, //$NON-NLS-1$\n\t\t\t\t\"enterNoCursor\": {defaultHandler: function(data) {return that._doEnter(merge(data,{noCursor:true}));}, actionDescription: {name: messages.enterNoCursor}}, //$NON-NLS-1$\n\t\t\t\t\"escape\": {defaultHandler: function(data) {return that._doEscape(merge(data,{}));}, actionDescription: {name: messages.escape}}, //$NON-NLS-1$\n\t\t\t\t\"selectAll\": {defaultHandler: function(data) {return that._doSelectAll(merge(data,{}));}, actionDescription: {name: messages.selectAll}}, //$NON-NLS-1$\n\t\t\t\t\"copy\": {defaultHandler: function(data) {return that._doCopy(merge(data,{}));}, actionDescription: {name: messages.copy}}, //$NON-NLS-1$\n\t\t\t\t\"cut\": {defaultHandler: function(data) {return that._doCut(merge(data,{}));}, actionDescription: {name: messages.cut}}, //$NON-NLS-1$\n\t\t\t\t\"paste\": {defaultHandler: function(data) {return that._doPaste(merge(data,{}));}, actionDescription: {name: messages.paste}}, //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"uppercase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"upper\"}));}, actionDescription: {name: messages.uppercase}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"lowercase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"lower\"}));}, actionDescription: {name: messages.lowercase}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"capitalize\": {defaultHandler: function(data) {return that._doCase(merge(data,{unit: \"word\", type: \"capitalize\"}));}, actionDescription: {name: messages.capitalize}}, //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"reversecase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"reverse\"}));}, actionDescription: {name: messages.reversecase}}, //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"toggleOverwriteMode\": {defaultHandler: function(data) {return that._doOverwriteMode(merge(data,{}));}, actionDescription: {name: messages.toggleOverwriteMode}}, //$NON-NLS-1$\n\t\t\t\t\"toggleTabMode\": {defaultHandler: function(data) {return that._doTabMode(merge(data,{}));}, actionDescription: {name: messages.toggleTabMode}}, //$NON-NLS-1$\n\t\t\t\t\"toggleWrapMode\": {defaultHandler: function(data) {return that._doWrapMode(merge(data,{}));}, actionDescription: {name: messages.toggleWrapMode}} //$NON-NLS-1$\n\t\t\t};\n\t\t},\n\t\t_createRulerParent: function(doc, className) {\n\t\t\tvar div = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv.className = className;\n\t\t\tdiv.tabIndex = -1;\n\t\t\tdiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\tdiv.style.MozUserSelect = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.WebkitUserSelect = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tdiv.style.top = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.bottom = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.cursor = \"default\"; //$NON-NLS-1$\n\t\t\tdiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._rootDiv.appendChild(div);\n\t\t\treturn div;\n\t\t},\n\t\t_createRuler: function(ruler, index) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar rulerParent = this._getRulerParent(ruler);\n\t\t\tif (!rulerParent) { return; }\n\t\t\tif (rulerParent !== this._marginDiv || this._marginOffset) {\n\t\t\t\trulerParent.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\trulerParent.rulerWidth = undefined;\n\t\t\tvar div = util.createElement(rulerParent.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\tdiv._ruler = ruler;\n\t\t\truler.node = div;\n\t\t\tdiv.rulerChanged = true;\n\t\t\tdiv.style.position = \"relative\"; //$NON-NLS-1$\n\t\t\tdiv.style.cssFloat = \"left\"; //$NON-NLS-1$\n\t\t\tdiv.style.styleFloat = \"left\"; //$NON-NLS-1$\n\t\t\tdiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tif (index === undefined || index < 0 || index >= rulerParent.children.length) {\n\t\t\t\trulerParent.appendChild(div);\n\t\t\t} else {\n\t\t\t\tvar sibling = rulerParent.firstChild;\n\t\t\t\twhile (sibling && index-- > 0) {\n\t\t\t\t\tsibling = sibling.nextSibling;\n\t\t\t\t}\n\t\t\t\trulerParent.insertBefore(div, sibling);\n\t\t\t}\n\t\t},\n\t\t_createSelectionDiv: function() {\n\t\t\tvar div = util.createElement(this._parent.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\tdiv.className = \"textviewSelection\"; //$NON-NLS-1$\n\t\t\tdiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tdiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.width = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.height = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.zIndex = \"0\"; //$NON-NLS-1$\n\t\t\treturn div;\n\t\t},\n\t\t_createView: function() {\n\t\t\tif (this._clientDiv) { return; }\n\t\t\tvar _parent = this._parent;\n\t\t\twhile (_parent.hasChildNodes()) { _parent.removeChild(_parent.lastChild); }\n\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar rootDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tthis._rootDiv = rootDiv;\n\t\t\trootDiv.tabIndex = -1;\n\t\t\trootDiv.style.position = \"relative\"; //$NON-NLS-1$\n\t\t\trootDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\trootDiv.style.width = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.style.height = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\trootDiv.style.WebkitTextSizeAdjust = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.setAttribute(\"role\", \"application\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t_parent.appendChild(rootDiv);\n\t\t\t\n\t\t\tvar leftDiv = this._createRulerParent(doc, \"textviewLeftRuler\"); //$NON-NLS-1$\n\t\t\tthis._leftDiv = leftDiv;\n\n\t\t\tvar viewDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tviewDiv.className = \"textviewScroll\"; //$NON-NLS-1$\n\t\t\tthis._viewDiv = viewDiv;\n\t\t\tviewDiv.tabIndex = -1;\n\t\t\tviewDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.top = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.bottom = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\trootDiv.appendChild(viewDiv);\n\t\t\t\n\t\t\tvar rightDiv = this._createRulerParent(doc, \"textviewRightRuler\"); //$NON-NLS-1$\n\t\t\tthis._rightDiv = rightDiv;\n\t\t\tif (document.dir == \"rtl\") { /* ACGC */\n\t\t\t\trightDiv.style.left = \"0px\"; //$NON-NLS-1$\n\t\t\t}else{\n\t\t\t\trightDiv.style.right = \"0px\"; //$NON-NLS-1$\t  \n\t\t\t}\n\n\t\t\tvar innerRightDiv = this._createRulerParent(doc, \"textviewInnerRightRuler\"); //$NON-NLS-1$\n\t\t\tthis._innerRightDiv = innerRightDiv;\n\t\t\tinnerRightDiv.style.zIndex = \"1\"; //$NON-NLS-1$\n\n\t\t\tvar scrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tthis._scrollDiv = scrollDiv;\n\t\t\tscrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tscrollDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tscrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.appendChild(scrollDiv);\n\t\t\t\n\t\t\tvar marginDiv = this._marginDiv = this._createRulerParent(doc, \"textviewMarginRuler\"); //$NON-NLS-1$\n\t\t\tmarginDiv.style.zIndex = \"4\"; //$NON-NLS-1$\n\t\t\t\n\t\t\tif (!util.isIE && !util.isIOS) {\n\t\t\t\tvar clipDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._clipDiv = clipDiv;\n\t\t\t\tclipDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(clipDiv);\n\t\t\t\t\n\t\t\t\tvar clipScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._clipScrollDiv = clipScrollDiv;\n\t\t\t\tclipScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.height = \"1px\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.top = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.appendChild(clipScrollDiv);\n\t\t\t}\n\n\t\t\tvar clientDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tclientDiv.className = \"textviewContent\"; //$NON-NLS-1$\n\t\t\tthis._clientDiv = clientDiv;\n\t\t\tclientDiv.tabIndex = 0;\n\t\t\tclientDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.zIndex = \"1\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.WebkitUserSelect = \"text\"; //$NON-NLS-1$\n\t\t\tclientDiv.setAttribute(\"spellcheck\", \"false\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\tclientDiv.style.WebkitTapHighlightColor = \"transparent\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\t(this._clipDiv || rootDiv).appendChild(clientDiv);\n\t\t\t\n\t\t\tthis._setFullSelection(this._fullSelection, true);\n\t\t\t\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\tvar vScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv = vScrollDiv;\n\t\t\t\tvScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderWidth = \"1px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderColor = \"white\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderStyle = \"solid\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderRadius = \"4px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.backgroundColor = \"black\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.opacity = \"0.5\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.zIndex = \"3\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.width = \"8px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(vScrollDiv);\n\t\t\t\tvar hScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv = hScrollDiv;\n\t\t\t\thScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderWidth = \"1px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderColor = \"white\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderStyle = \"solid\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderRadius = \"4px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.backgroundColor = \"black\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.opacity = \"0.5\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.zIndex = \"3\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.height = \"8px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(hScrollDiv);\n\t\t\t}\n\n\t\t\tif (util.isFirefox && !clientDiv.setCapture) {\n\t\t\t\tvar overlayDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._overlayDiv = overlayDiv;\n\t\t\t\toverlayDiv.style.position = clientDiv.style.position;\n\t\t\t\toverlayDiv.style.borderWidth = clientDiv.style.borderWidth;\n\t\t\t\toverlayDiv.style.margin = clientDiv.style.margin;\n\t\t\t\toverlayDiv.style.padding = clientDiv.style.padding;\n\t\t\t\toverlayDiv.style.cursor = \"text\"; //$NON-NLS-1$\n\t\t\t\toverlayDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t(this._clipDiv || rootDiv).appendChild(overlayDiv);\n\t\t\t}\n\t\t\tclientDiv.contentEditable = \"true\"; //$NON-NLS-1$\n\t\t\tthis._setWrapMode(this._wrapMode, true);\n\t\t\tthis._setReadOnly(this._readonly);\n\t\t\tthis._setThemeClass(this._themeClass, true);\n\t\t\tthis._setTabSize(this._tabSize, true);\n\t\t\tthis._setMarginOffset(this._marginOffset, true);\n\t\t\tthis._hookEvents();\n\t\t\tbidiUtils.initInputField(clientDiv);\n\t\t\tvar rulers = this._rulers;\n\t\t\tfor (var i=0; i<rulers.length; i++) {\n\t\t\t\tthis._createRuler(rulers[i]);\n\t\t\t}\n\t\t\tthis._update();\n\t\t\t// Detect when the parent is attached to the DOM or display\n\t\t\tvar that = this;\n\t\t\tfunction checkDOMReady() {\n\t\t\t\tif (!that._rootDiv) { return; }\n\t\t\t\tthat.update(true);\n\t\t\t\tif (that._metrics.invalid) {\n\t\t\t\t\tthat._getWindow().setTimeout(function() {\n\t\t\t\t\t\tcheckDOMReady();\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t}\n\t\t\tDOMReady(doc, rootDiv, \"textview\", checkDOMReady); //$NON-NLS-1$\n\t\t},\n\t\t_defaultOptions: function() {\n\t\t\treturn {\n\t\t\t\tparent: {value: undefined, update: null},\n\t\t\t\tmodel: {value: undefined, update: this.setModel},\n\t\t\t\tscrollAnimation: {value: 0, update: null},\n\t\t\t\treadonly: {value: false, update: this._setReadOnly},\n\t\t\t\tfullSelection: {value: true, update: this._setFullSelection},\n\t\t\t\ttabMode: { value: true, update: null },\n\t\t\t\ttabSize: {value: 8, update: this._setTabSize},\n\t\t\t\texpandTab: {value: false, update: null},\n\t\t\t\tsingleMode: {value: false, update: this._setSingleMode},\n\t\t\t\tnoScroll: {value: false, update: this._setNoScroll},\n\t\t\t\toverwriteMode: { value: false, update: this._setOverwriteMode },\n\t\t\t\tblockCursorVisible: { value: false, update: this._setBlockCursor},\n\t\t\t\tmarginOffset: {value: 0, update: this._setMarginOffset},\n\t\t\t\twrapOffset: {value: 0, update: this._setWrapOffset},\n\t\t\t\twrapMode: {value: false, update: this._setWrapMode},\n\t\t\t\twrappable: {value: false, update: null},\n\t\t\t\tundoStack: {value: null, update: this._setUndoStack},\n\t\t\t\ttheme: {value: mTextTheme.TextTheme.getTheme(), update: this._setTheme},\n\t\t\t\tthemeClass: {value: undefined, update: this._setThemeClass}\n\t\t\t};\n\t\t},\n\t\t_destroyRuler: function(ruler) {\n\t\t\tvar rulerParent = this._getRulerParent(ruler);\n\t\t\tif (rulerParent) {\n\t\t\t\tvar div = rulerParent.firstChild;\n\t\t\t\twhile (div) {\n\t\t\t\t\tif (div._ruler === ruler) {\n\t\t\t\t\t\tdiv._ruler = undefined;\n\t\t\t\t\t\trulerParent.removeChild(div);\n\t\t\t\t\t\tif (rulerParent.children.length === 0 && (rulerParent !== this._marginDiv || !this._marginOffset)) {\n\t\t\t\t\t\t\trulerParent.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trulerParent.rulerWidth = undefined;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_destroyView: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (!clientDiv) { return; }\n\t\t\tthis._setGrab(null);\n\t\t\tthis._unhookEvents();\n\n\t\t\t/* Destroy timers */\n\t\t\tvar win = this._getWindow();\n\t\t\tif (this._autoScrollTimerID) {\n\t\t\t\twin.clearTimeout(this._autoScrollTimerID);\n\t\t\t\tthis._autoScrollTimerID = null;\n\t\t\t}\n\t\t\tif (this._updateTimer) {\n\t\t\t\twin.clearTimeout(this._updateTimer);\n\t\t\t\tthis._updateTimer = null;\n\t\t\t}\n\t\t\tif (this._calculateLHTimer) {\n\t\t\t\twin.clearTimeout(this._calculateLHTimer);\n\t\t\t\tthis._calculateLHTimer = null;\n\t\t\t}\n\t\t\tif (this._cursorTimer) {\n\t\t\t\twin.clearInterval(this._cursorTimer);\n\t\t\t\tthis._cursorTimer = null;\n\t\t\t}\n\t\t\tif (this._imeTimeout) {\n\t\t\t\twin.clearInterval(this._imeTimeout);\n\t\t\t\tthis._imeTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\tvar rootDiv = this._rootDiv;\n\t\t\trootDiv.parentNode.removeChild(rootDiv);\n\n\t\t\t/* Destroy DOM */\n\t\t\tthis._domSelection = null;\n\t\t\tthis._clipboardDiv = null;\n\t\t\tthis._rootDiv = null;\n\t\t\tthis._scrollDiv = null;\n\t\t\tthis._viewDiv = null;\n\t\t\tthis._clipDiv = null;\n\t\t\tthis._clipScrollDiv = null;\n\t\t\tthis._clientDiv = null;\n\t\t\tthis._overlayDiv = null;\n\t\t\tthis._leftDiv = null;\n\t\t\tthis._rightDiv = null;\n\t\t\tthis._innerRightDiv = null;\n\t\t\tthis._marginDiv = null;\n\t\t\tthis._cursorDiv = null;\n\t\t\tthis._vScrollDiv = null;\n\t\t\tthis._hScrollDiv = null;\n\t\t},\n\t\t_doAutoScroll: function (direction, x, y) {\n\t\t\tthis._autoScrollDir = direction;\n\t\t\tthis._autoScrollX = x;\n\t\t\tthis._autoScrollY = y;\n\t\t\tif (!this._autoScrollTimerID) {\n\t\t\t\tthis._autoScrollTimer();\n\t\t\t}\n\t\t},\n\t\t_endAutoScroll: function () {\n\t\t\tif (this._autoScrollTimerID) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._autoScrollTimerID);\n\t\t\t}\n\t\t\tthis._autoScrollDir = undefined;\n\t\t\tthis._autoScrollTimerID = undefined;\n\t\t},\n\t\t_fixCaret: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar hasFocus = this._hasFocus;\n\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\tif (hasFocus) { clientDiv.blur(); }\n\t\t\t\tclientDiv.contentEditable = false;\n\t\t\t\tclientDiv.contentEditable = true;\n\t\t\t\tif (hasFocus) { clientDiv.focus(); }\n\t\t\t\tthis._ignoreFocus = false;\n\t\t\t}\n\t\t},\n\t\t_getBaseText: function(start, end) {\n\t\t\tvar model = this._model;\n\t\t\t/* This is the only case the view access the base model, alternatively the view could use a event to application to customize the text */\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tend = model.mapOffset(end);\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model.getText(start, end);\n\t\t},\n\t\t_getBottomIndex: function (fullyVisible) {\n\t\t\tvar child = this._bottomChild;\n\t\t\tif (fullyVisible && this._getClientHeight() > this._getLineHeight()) {\n\t\t\t\tvar rect = child.getBoundingClientRect();\n\t\t\t\tvar clientRect = this._clientDiv.getBoundingClientRect();\n\t\t\t\tif (rect.bottom > clientRect.bottom) {\n\t\t\t\t\tchild = this._getLinePrevious(child) || child;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child.lineIndex;\n\t\t},\n\t\t_getBlockSelections: function(selections, lineIndex, pt) {\n\t\t\tvar model = this._model;\n\t\t\tselections = selections.filter(function(sel) { return !sel._editing; });\n\t\t\tvar firstLine = model.getLineAtOffset(this._blockSelection.getAnchor()), lastLine;\n\t\t\tif (lineIndex > firstLine) {\n\t\t\t\tlastLine = lineIndex;\n\t\t\t} else {\n\t\t\t\tlastLine = firstLine;\n\t\t\t\tfirstLine = lineIndex;\n\t\t\t}\n\t\t\tfor (var l = firstLine; l <= lastLine; l++) {\n\t\t\t\tvar line = this._getLine(l);\n\t\t\t\tvar o1 = line.getOffset(pt.x, 1);\n\t\t\t\tvar o2 = line.getOffset(this._blockSelection._docX, 1);\n\t\t\t\tline.destroy();\n\t\t\t\tif (o1 === o2 && o1 === model.getLineEnd(l)) continue;\n\t\t\t\tvar caret = o1 < o2;\n\t\t\t\tvar sel = new Selection(caret ? o1 : o2, caret ? o2 : o1, caret);\n\t\t\t\tsel._editing = true;\n\t\t\t\tselections.push(sel);\n\t\t\t}\n\t\t\treturn selections;\n\t\t},\n\t\t_getBoundsAtOffset: function(offset) {\n\t\t\tvar model = this._model;\n\t\t\tvar line = this._getLine(model.getLineAtOffset(offset));\n\t\t\tvar result = line.getBoundingClientRect(offset);\n\t\t\tvar linePixel = this._getLinePixel(line.lineIndex);\n\t\t\tresult.top += linePixel;\n\t\t\tresult.bottom += linePixel;\n\t\t\tline.destroy();\n\t\t\treturn result;\n\t\t},\n\t\t_getClientHeight: function() {\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\treturn Math.max(0, this._viewDiv.clientHeight - viewPad.top - viewPad.bottom);\n\t\t},\n\t\t_getInnerRightWidth: function() {\n\t\t\tvar innerRightWidth = this._innerRightDiv.rulerWidth;\n\t\t\tif (innerRightWidth === undefined) {\n\t\t\t\tvar innerRightRect = this._innerRightDiv.getBoundingClientRect();\n\t\t\t\tthis._innerRightDiv.rulerWidth = innerRightWidth = innerRightRect.right - innerRightRect.left;\n\t\t\t}\n\t\t\treturn innerRightWidth;\n\t\t},\n\t\t_getClientWidth: function() {\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar innerRightWidth = this._getInnerRightWidth();\n\t\t\treturn Math.max(0, this._viewDiv.clientWidth - viewPad.left - viewPad.right - innerRightWidth);\n\t\t},\n\t\t_getClipboardText: function (evt, handler) {\n\t\t\t// IE\n\t\t\tvar win = this._getWindow();\n\t\t\tvar clipboardData = win.clipboardData;\n\t\t\t// WebKit and Firefox > 21\n\t\t\tif (!clipboardData && evt) {\n\t\t\t\tclipboardData = evt.clipboardData;\n\t\t\t}\n\t\t\tfunction convert(wholeText) {\n\t\t\t\tvar clipboardText = [];\n\t\t\t\tconvertDelimiter(wholeText, function(t) {clipboardText.push(t);}, null);\n\t\t\t\tif (handler) { handler(clipboardText); }\n\t\t\t\treturn clipboardText;\n\t\t\t}\n\t\t\tif (clipboardData) {\n\t\t\t\treturn convert(clipboardData.getData(util.isIE ? \"Text\" : \"text/plain\")); //$NON-NLS-1$\"//$NON-NLS-2$\n\t\t\t}\n\t\t\tif (util.isElectron && !evt) {\n\t\t\t\treturn convert(window.__clipboardModule.readText());\n\t\t\t}\n\t\t\tif (util.isFirefox) {\n\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\tvar clipboardDiv = this._clipboardDiv;\n\t\t\t\tvar doc = this._rootDiv.ownerDocument;\n\t\t\t\tif (!clipboardDiv) {\n\t\t\t\t\tclipboardDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\tthis._clipboardDiv = clipboardDiv;\n\t\t\t\t\tclipboardDiv.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\t\t\tclipboardDiv.style.whiteSpace = \"pre\"; //$NON-NLS-1$\n\t\t\t\t\tclipboardDiv.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\t\tthis._rootDiv.appendChild(clipboardDiv);\n\t\t\t\t}\n\t\t\t\tclipboardDiv.innerHTML = \"<pre contenteditable=''></pre>\"; //$NON-NLS-1$\n\t\t\t\tclipboardDiv.firstChild.focus();\n\t\t\t\tvar that = this;\n\t\t\t\tvar _getText = function() {\n\t\t\t\t\tvar noteText = that._getTextFromElement(clipboardDiv);\n\t\t\t\t\tclipboardDiv.innerHTML = \"\";\n\t\t\t\t\treturn convert(noteText);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t/* Try execCommand first. Works on firefox with clipboard permission. */\n\t\t\t\tvar result = false;\n\t\t\t\tthis._ignorePaste = true;\n\n\t\t\t\t/* Do not try execCommand if middle-click is used, because if we do, we get the clipboard text, not the primary selection text. */\n\t\t\t\tif (!util.isLinux || this._lastMouseButton !== 2) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresult = doc.execCommand(\"paste\", false, null); //$NON-NLS-1$\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t/* Firefox can throw even when execCommand() works, see bug 362835. */\n\t\t\t\t\t\tresult = clipboardDiv.childNodes.length > 1 || clipboardDiv.firstChild && clipboardDiv.firstChild.childNodes.length > 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._ignorePaste = false;\n\t\t\t\tif (!result) {\n\t\t\t\t\t/* Try native paste in DOM, works for firefox during the paste event. */\n\t\t\t\t\tif (evt) {\n\t\t\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\t\t\tthat.focus();\n\t\t\t\t\t\t\t_getText();\n\t\t\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t/* no event and no clipboard permission, paste can't be performed */\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis._ignoreFocus = false;\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.focus();\n\t\t\t\tthis._ignoreFocus = false;\n\t\t\t\treturn _getText();\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\t\t_getDOMText: function(child, offsetNode) {\n\t\t\treturn child._line.getText(offsetNode);\n\t\t},\n\t\t_getTextFromElement: function(element) {\n\t\t\tvar doc = element.ownerDocument;\n\t\t\tvar win = doc.defaultView;\n\t\t\tif (!win.getSelection) {\n\t\t\t\treturn element.innerText || element.textContent;\n\t\t\t}\n\n\t\t\tvar newRange = doc.createRange();\n\t\t\tnewRange.selectNode(element);\n\n\t\t\tvar selection = win.getSelection();\n\t\t\tvar oldRanges = [], i;\n\t\t\tfor (i = 0; i < selection.rangeCount; i++) {\n\t\t\t\toldRanges.push(selection.getRangeAt(i));\n\t\t\t}\n\n\t\t\tthis._ignoreSelect = true;\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(newRange);\n\n\t\t\tvar text = selection.toString();\n\n\t\t\tselection.removeAllRanges();\n\t\t\tfor (i = 0; i < oldRanges.length; i++) {\n\t\t\t\tselection.addRange(oldRanges[i]);\n\t\t\t}\n\n\t\t\tthis._ignoreSelect = false;\n\t\t\treturn text;\n\t\t},\n\t\t_getViewPadding: function() {\n\t\t\treturn this._metrics.viewPadding;\n\t\t},\n\t\t_getLine: function(lineIndex) {\n\t\t\tvar child = this._getLineNode(lineIndex);\n\t\t\tif (child && !child.lineChanged && !child.lineRemoved) {\n\t\t\t\treturn child._line;\n\t\t\t}\n\t\t\treturn new TextLine(this, lineIndex);\n\t\t},\n\t\t_getLineHeight: function(lineIndex, calculate) {\n\t\t\tif (lineIndex !== undefined && this._lineHeight) {\n\t\t\t\tvar lineHeight = this._lineHeight[lineIndex];\n\t\t\t\tif (lineHeight) { return lineHeight; }\n\t\t\t\tif (calculate || calculate === undefined) {\n\t\t\t\t\tvar height = this._lineHeight[lineIndex] = this._calculateLineHeight(lineIndex);\n\t\t\t\t\treturn height;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this._metrics.lineHeight;\n\t\t},\n\t\t_getLineNode: function (lineIndex) {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tvar child = clientDiv.firstChild;\n\t\t\twhile (child) {\n\t\t\t\tif (lineIndex === child.lineIndex) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t\t_getLineNext: function (lineNode) {\n\t\t\tvar node = lineNode ? lineNode.nextSibling : this._clientDiv.firstChild;\n\t\t\twhile (node && (node.lineIndex === -1 || !node._line)) {\n\t\t\t\tnode = node.nextSibling;\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\t\t_getLinePrevious: function (lineNode) {\n\t\t\tvar node = lineNode ? lineNode.previousSibling : this._clientDiv.lastChild;\n\t\t\twhile (node && (node.lineIndex === -1 || !node._line)) {\n\t\t\t\tnode = node.previousSibling;\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\t\t_getLinePixel: function(lineIndex) {\n\t\t\tlineIndex = Math.min(Math.max(0, lineIndex), this._model.getLineCount());\n\t\t\tif (this._lineHeight) {\n\t\t\t\tvar topIndex = this._getTopIndex();\n\t\t\t\tvar pixel = -this._topIndexY + this._getScroll().y, i;\n\t\t\t\tif (lineIndex > topIndex) {\n\t\t\t\t\tfor (i = topIndex; i < lineIndex; i++) {\n\t\t\t\t\t\tpixel += this._getLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = topIndex - 1; i >= lineIndex; i--) {\n\t\t\t\t\t\tpixel -= this._getLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn pixel;\n\t\t\t}\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\treturn lineHeight * lineIndex;\n\t\t},\n\t\t/**\n\t\t * @name _getLineIndex\n\t\t * @description Returns the line index closest to the given text view relative location.  Will return -1\n\t\t * \t\t\t\tif restrictToValidLines is true and y location is outside of text lines.\n\t\t * @function\n\t\t * @private\n\t\t * @param y location to search\n\t\t * @param restrictToValidLines whether to return -1 if the location is outside a valid line, otherwise return the closest valid line index\n\t\t * @returns returns The line index closest to the location or -1 if restrictToValidLines is true and location is outside text area\n\t\t */\n\t\t_getLineIndex: function(y, restrictToValidLines) {\n\t\t\tvar lineHeight, lineIndex = 0;\n\t\t\tvar lineCount = this._model.getLineCount();\n\t\t\tif (this._lineHeight) {\n\t\t\t\tlineIndex = this._getTopIndex();\n\t\t\t\tvar pixel = -this._topIndexY + this._getScroll().y;\n\t\t\t\tif (y !== pixel) {\n\t\t\t\t\tif (y < pixel) {\n\t\t\t\t\t\twhile (y < pixel && lineIndex > 0) {\n\t\t\t\t\t\t\ty += this._getLineHeight(--lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineHeight = this._getLineHeight(lineIndex);\n\t\t\t\t\t\twhile (y - lineHeight >= pixel && lineIndex < lineCount - 1) {\n\t\t\t\t\t\t\ty -= lineHeight;\n\t\t\t\t\t\t\tlineHeight = this._getLineHeight(++lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlineHeight = this._getLineHeight();\n\t\t\t\tlineIndex = Math.floor(y / lineHeight);\n\t\t\t}\n\t\t\tif (restrictToValidLines){\n\t\t\t\tif (lineCount === 0 || lineIndex < 0 || lineIndex > (lineCount-1)){\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Math.max(0, Math.min(lineCount - 1, lineIndex));\n\t\t},\n\t\t_getRulerParent: function(ruler) {\n\t\t\tswitch (ruler.getLocation()) {\n\t\t\t\tcase \"left\": return this._leftDiv; //$NON-NLS-1$\n\t\t\t\tcase \"right\": return this._rightDiv; //$NON-NLS-1$\n\t\t\t\tcase \"innerRight\": return this._innerRightDiv; //$NON-NLS-1$\n\t\t\t\tcase \"margin\": return this._marginDiv; //$NON-NLS-1$\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_getScroll: function(cancelAnimation) {\n\t\t\tif (cancelAnimation === undefined || cancelAnimation) {\n\t\t\t\tthis._cancelAnimation();\n\t\t\t}\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\treturn {x: viewDiv.scrollLeft, y: viewDiv.scrollTop};\n\t\t},\n\t\t_getSelection: function () {\n\t\t\treturn (Array.isArray(this._selection) ? this._selection[0] : this._selection).clone();\n\t\t},\n\t\t_getSelections: function () {\n\t\t\treturn (Array.isArray(this._selection) ? this._selection : [this._selection]).map(function(s) {\n\t\t\t\treturn s.clone();\n\t\t\t});\n\t\t},\n\t\t_getTopIndex: function (fullyVisible) {\n\t\t\tvar child = this._topChild;\n\t\t\tif (fullyVisible && this._getClientHeight() > this._getLineHeight()) {\n\t\t\t\tvar rect = child.getBoundingClientRect();\n\t\t\t\tvar viewPad = this._getViewPadding();\n\t\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\t\tif (rect.top < viewRect.top + viewPad.top) {\n\t\t\t\t\tchild = this._getLineNext(child) || child;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child.lineIndex;\n\t\t},\n\t\t_hookEvents: function() {\n\t\t\tvar that = this;\n\t\t\tthis._modelListener = {\n\t\t\t\t/** @private */\n\t\t\t\tonChanging: function(modelChangingEvent) {\n\t\t\t\t\tthat._onModelChanging(modelChangingEvent);\n\t\t\t\t},\n\t\t\t\t/** @private */\n\t\t\t\tonChanged: function(modelChangedEvent) {\n\t\t\t\t\tthat._onModelChanged(modelChangedEvent);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._model.addEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.addEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\t\n\t\t\tthis._themeListener = {\n\t\t\t\tonChanged: function() {\n\t\t\t\t\tthat._setThemeClass(that._themeClass);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._theme.addEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t\n\t\t\tvar handlers = this._handlers = [];\n\t\t\tvar clientDiv = this._clientDiv, viewDiv = this._viewDiv, rootDiv = this._rootDiv;\n\t\t\tvar topNode = this._overlayDiv || clientDiv;\n\t\t\tvar doc = clientDiv.ownerDocument;\n\t\t\tvar win = this._getWindow();\n\t\t\tvar grabNode = util.isIE ? doc : win;\n\t\t\thandlers.push({target: win, type: \"resize\", handler: function(e) { return that._handleResize(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"blur\", handler: function(e) { return that._handleBlur(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"focus\", handler: function(e) { return that._handleFocus(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: viewDiv, type: \"focus\", handler: function() { clientDiv.focus(); }}); //$NON-NLS-1$\n\t\t\tvar textModel = that.getModel();\n\t\t\tif(textModel && typeof textModel.deferScroll === \"function\") {//If textModel is extended to defer the scroll handler for segmental contents\n\t\t\t\tvar deferredHandler = textModel.deferScroll(that, that._handleScroll.bind(that));\n\t\t\t\thandlers.push({target: viewDiv, type: \"scroll\", handler: function(e) { return deferredHandler(e ? e : win.event);}}); //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\thandlers.push({target: viewDiv, type: \"scroll\", handler: function(e) { return that._handleScroll(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: clientDiv, type: \"textInput\", handler: function(e) { return that._handleTextInput(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keydown\", handler: function(e) { return that._handleKeyDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keypress\", handler: function(e) { return that._handleKeyPress(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keyup\", handler: function(e) { return that._handleKeyUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\tif (util.isIE) {\n\t\t\t\thandlers.push({target: doc, type: \"keyup\", handler: function(e) { return that._handleDocKeyUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: clientDiv, type: \"contextmenu\", handler: function(e) { return that._handleContextMenu(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"copy\", handler: function(e) { return that._handleCopy(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"cut\", handler: function(e) { return that._handleCut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"paste\", handler: function(e) { return that._handlePaste(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: doc, type: \"selectionchange\", handler: function(e) { return that._handleSelectionChange(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchstart\", handler: function(e) { return that._handleTouchStart(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchmove\", handler: function(e) { return that._handleTouchMove(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchend\", handler: function(e) { return that._handleTouchEnd(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\thandlers.push({target: clientDiv, type: \"selectstart\", handler: function(e) { return that._handleSelectStart(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mousedown\", handler: function(e) { return that._handleMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mouseover\", handler: function(e) { return that._handleMouseOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mouseout\", handler: function(e) { return that._handleMouseOut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: grabNode, type: \"mouseup\", handler: function(e) { return that._handleMouseUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: grabNode, type: \"mousemove\", handler: function(e) { return that._handleMouseMove(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: rootDiv, type: \"mousedown\", handler: function(e) { return that._handleRootMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: rootDiv, type: \"mouseup\", handler: function(e) { return that._handleRootMouseUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragstart\", handler: function(e) { return that._handleDragStart(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"drag\", handler: function(e) { return that._handleDrag(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragend\", handler: function(e) { return that._handleDragEnd(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragenter\", handler: function(e) { return that._handleDragEnter(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragover\", handler: function(e) { return that._handleDragOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragleave\", handler: function(e) { return that._handleDragLeave(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"drop\", handler: function(e) { return that._handleDrop(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: this._clientDiv, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\t\tif (this._clipDiv) {\n\t\t\t\t\thandlers.push({target: this._clipDiv, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\t\t}\n\t\t\t\tif (util.isFirefox && (!util.isWindows || util.isFirefox >= 15)) {\n\t\t\t\t\tvar MO = win.MutationObserver || win.MozMutationObserver;\n\t\t\t\t\tif (MO) {\n\t\t\t\t\t\tthis._mutationObserver = new MO(function(mutations) { that._handleDataModified(mutations); });\n\t\t\t\t\t\tthis._mutationObserver.observe(clientDiv, {subtree: true, characterData: true});\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"DOMCharacterDataModified\", handler: function (e) { return that._handleDataModified(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((util.isFirefox && (!util.isWindows || util.isFirefox >= 15)) || util.isIE || util.isWebkit) {\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionstart\", handler: function (e) { return that._handleCompositionStart(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionend\", handler: function (e) { return that._handleCompositionEnd(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionupdate\", handler: function (e) { return that._handleCompositionUpdate(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (this._overlayDiv) {\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mousedown\", handler: function(e) { return that._handleMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mouseover\", handler: function(e) { return that._handleMouseOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mouseout\", handler: function(e) { return that._handleMouseOut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"contextmenu\", handler: function(e) { return that._handleContextMenu(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (!this._isW3CEvents) {\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"dblclick\", handler: function(e) { return that._handleDblclick(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._hookRulerEvents(this._leftDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._rightDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._innerRightDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._marginDiv, handlers);\n\t\t\t\n\t\t\tfor (var i=0; i<handlers.length; i++) {\n\t\t\t\tvar h = handlers[i];\n\t\t\t\taddHandler(h.target, h.type, h.handler, h.capture);\n\t\t\t}\n\t\t},\n\t\t_hookRulerEvents: function(div, handlers) {\n\t\t\tif (!div) { return; }\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tif (util.isIE) {\n\t\t\t\thandlers.push({target: div, type: \"selectstart\", handler: function() {return false;}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: div, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\thandlers.push({target: div, type: \"click\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"dblclick\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mousemove\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mouseover\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mouseout\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t},\n\t\t_getWindow: function() {\n\t\t\treturn getWindow(this._parent.ownerDocument);\n\t\t},\n\t\t_ignoreEvent: function(e) {\n\t\t\tvar node = e.target;\n\t\t\twhile (node && node !== this._clientDiv) {\n\t\t\t\tif (node.ignore) { return true; }\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_init: function(options) {\n\t\t\tvar _parent = options.parent;\n\t\t\tif (typeof(_parent) === \"string\") { //$NON-NLS-1$\n\t\t\t\t_parent = (options.document || document).getElementById(_parent);\n\t\t\t}\n\t\t\tif (!_parent) { throw new Error(\"no parent\"); } //$NON-NLS-1$\n\t\t\toptions.parent = _parent;\n\t\t\toptions.model = options.model || new mTextModel.TextModel();\n\t\t\tvar defaultOptions = this._defaultOptions();\n\t\t\tfor (var option in defaultOptions) {\n\t\t\t\tif (defaultOptions.hasOwnProperty(option)) {\n\t\t\t\t\tvar value;\n\t\t\t\t\tif (options[option] !== undefined) {\n\t\t\t\t\t\tvalue = options[option];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = defaultOptions[option].value;\n\t\t\t\t\t}\n\t\t\t\t\tthis[\"_\" + option] = value; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._keyModes = [];\n\t\t\tthis._rulers = [];\n\t\t\tthis._selection = [new Selection(0, 0, false)];\n\t\t\tthis._linksVisible = false;\n\t\t\tthis._redrawCount = 0;\n\t\t\tthis._maxLineWidth = 0;\n\t\t\tthis._maxLineIndex = -1;\n\t\t\tthis._ignoreSelect = true;\n\t\t\tthis._ignoreFocus = false;\n\t\t\tthis._hasFocus = false;\n\t\t\tthis._dragOffset = -1;\n\t\t\tthis._isRangeRects = (!util.isIE || util.isIE >= 9) && typeof _parent.ownerDocument.createRange().getBoundingClientRect === \"function\"; //$NON-NLS-1$\n\t\t\tthis._isW3CEvents = _parent.addEventListener;\n\n\t\t\t/* Auto scroll */\n\t\t\tthis._autoScrollX = null;\n\t\t\tthis._autoScrollY = null;\n\t\t\tthis._autoScrollTimerID = null;\n\t\t\tthis._AUTO_SCROLL_RATE = 50;\n\t\t\tthis._grabControl = null;\n\t\t\tthis._moseMoveClosure  = null;\n\t\t\tthis._mouseUpClosure = null;\n\t\t\t\n\t\t\t/* Double click */\n\t\t\tthis._lastMouseX = 0;\n\t\t\tthis._lastMouseY = 0;\n\t\t\tthis._lastMouseTime = 0;\n\t\t\tthis._clickCount = 0;\n\t\t\tthis._clickTime = 250;\n\t\t\tthis._clickDist = 5;\n\t\t\tthis._isMouseDown = false;\n\t\t\tthis._doubleClickSelection = null;\n\t\t\t\n\t\t\t/* Scroll */\n\t\t\tthis._hScroll = 0;\n\t\t\tthis._vScroll = 0;\n\n\t\t\t/* IME */\n\t\t\tthis._imeOffset = -1;\n\t\t\t\n\t\t\t/* Create elements */\n\t\t\tthis._createActions();\n\t\t\tthis._createView();\n\t\t},\n\t\t_checkOverlayScroll: function() {\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tif (!this._metrics.invalid && this._metrics.scrollWidth === 0) {\n\t\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\t\tvar overlay = this._isOverOverlayScroll();\n\t\t\t\t\tif (overlay.vertical || overlay.horizontal) {\n\t\t\t\t\t\tviewDiv.style.pointerEvents = \"\"; //$NON-NLS-1$\n\t\t\t\t\t} else {\n\t\t\t\t\t\tviewDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t},\n\t\t_isOverOverlayScroll: function() {\n\t\t\tvar scrollShowing = new Date().getTime() - this._lastScrollTime < 200;\n\t\t\tif (!scrollShowing) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tvar rect = this._viewDiv.getBoundingClientRect();\n\t\t\tvar x = this._lastMouseMoveX;\n\t\t\tvar y = this._lastMouseMoveY;\n\t\t\tvar overlayScrollWidth = 15;\n\t\t\treturn {\n\t\t\t\tvertical: rect.top <= y && y < rect.bottom && rect.right - overlayScrollWidth <= x && x < rect.right,\n\t\t\t\thorizontal: rect.bottom - overlayScrollWidth <= y && y < rect.bottom && rect.left <= x && x < rect.right\n\t\t\t};\n\t\t},\n\t\t_startUndo: function() {\n\t\t\tif (this._undoStack) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._compoundChange = this._undoStack.startCompoundChange({\n\t\t\t\t\tend: function() {\n\t\t\t\t\t\tthat._compoundChange = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_endUndo: function() {\n\t\t\tif (this._undoStack) {\n\t\t\t\tthis._undoStack.endCompoundChange();\n\t\t\t}\n\t\t},\n\t\t_modifyContent: function(e, caretAtEnd, show, callback) {\n\t\t\tif (this._readonly && !e._code) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\te.type = \"Verify\"; //$NON-NLS-1$\n\t\t\tvar oldStart = e.start = e.selection[0].start;\n\t\t\tvar oldEnd = e.end = e.selection[0].end;\n\t\t\tthis.onVerify(e);\n\t\t\tif (oldStart !== e.start) e.selection[0].start = e.start;\n\t\t\tif (oldEnd !== e.end) e.selection[0].end = e.end;\n\n\t\t\tif (e.text === null || e.text === undefined) { return false; }\n\t\t\t\n\t\t\tif (e.selection.length > 1) this.setRedraw(false);\n\t\t\t\n\t\t\tvar undo = this._compoundChange;\n\t\t\tif (undo) {\n\t\t\t\tif (!Selection.compare(this._getSelections(), undo.owner.selection)) {\n\t\t\t\t\tthis._endUndo();\n\t\t\t\t\tif (e.selection.length > 1) this._startUndo();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e.selection.length > 1) this._startUndo();\n\t\t\t}\n\t\t\t\n\t\t\tvar model = this._model;\n\t\t\ttry {\n\t\t\t\tif (e._ignoreDOMSelection) { this._ignoreDOMSelection = true; }\n\t\t\t\tvar offset = 0, i = 0;\n\t\t\t\te.selection.forEach(function(selection) {\n\t\t\t\t\tselection.start += offset;\n\t\t\t\t\tselection.end += offset;\n\t\t\t\t\tvar text = Array.isArray(e.text) ? e.text[i] : e.text;\n\t\t\t\t\tmodel.setText(text, selection.start, selection.end);\n\t\t\t\t\toffset += (selection.start - selection.end) + text.length;\n\t\t\t\t\tselection.setCaret(caretAtEnd ? selection.start + text.length : selection.start);\n\t\t\t\t\ti++;\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tif (e._ignoreDOMSelection) { this._ignoreDOMSelection = false; }\n\t\t\t}\n\t\t\tthis._setSelection(e.selection, show, true, callback);\n\t\t\t\n\t\t\tundo = this._compoundChange;\n\t\t\tif (undo) undo.owner.selection = e.selection;\n\t\t\t\n\t\t\tif (e.selection.length > 1) this.setRedraw(true);\n\n\t\t\tthis.onModify({type: \"Modify\"}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_onModelChanged: function(modelChangedEvent) {\n\t\t\tmodelChangedEvent.type = \"ModelChanged\"; //$NON-NLS-1$\n\t\t\tthis.onModelChanged(modelChangedEvent);\n\t\t\tmodelChangedEvent.type = \"Changed\"; //$NON-NLS-1$\n\t\t\tvar start = modelChangedEvent.start;\n\t\t\tvar addedCharCount = modelChangedEvent.addedCharCount;\n\t\t\tvar removedCharCount = modelChangedEvent.removedCharCount;\n\t\t\tvar addedLineCount = modelChangedEvent.addedLineCount;\n\t\t\tvar removedLineCount = modelChangedEvent.removedLineCount;\n\t\t\t\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.end > start) {\n\t\t\t\t\tif (selection.end > start && selection.start < start + removedCharCount) {\n\t\t\t\t\t\t// selection intersects replaced text. set caret behind text change\n\t\t\t\t\t\tselection.setCaret(start + addedCharCount);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// move selection to keep same text selected\n\t\t\t\t\t\tselection.start +=  addedCharCount - removedCharCount;\n\t\t\t\t\t\tselection.end +=  addedCharCount - removedCharCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, false, false);\n\t\t\t\n\t\t\tvar model = this._model;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar child = this._getLineNext();\n\t\t\twhile (child) {\n\t\t\t\tvar lineIndex = child.lineIndex;\n\t\t\t\tif (startLine <= lineIndex && lineIndex <= startLine + removedLineCount) {\n\t\t\t\t\tif (startLine === lineIndex && !child.modelChangedEvent && !child.lineRemoved) {\n\t\t\t\t\t\tchild.modelChangedEvent = modelChangedEvent;\n\t\t\t\t\t\tchild.lineChanged = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchild.lineRemoved = true;\n\t\t\t\t\t\tchild.lineChanged = false;\n\t\t\t\t\t\tchild.modelChangedEvent = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lineIndex > startLine + removedLineCount) {\n\t\t\t\t\tchild.lineIndex = lineIndex + addedLineCount - removedLineCount;\n\t\t\t\t\tchild._line.lineIndex = child.lineIndex;\n\t\t\t\t}\n\t\t\t\tchild = this._getLineNext(child);\n\t\t\t}\n\t\t\tif (this._lineHeight) {\n\t\t\t\tvar args = [startLine, removedLineCount].concat(newArray(addedLineCount));\n\t\t\t\tArray.prototype.splice.apply(this._lineHeight, args);\n\t\t\t}\n\t\t\tif (!this._wrapMode) {\n\t\t\t\tif (startLine <= this._maxLineIndex && this._maxLineIndex <= startLine + removedLineCount) {\n\t\t\t\t\tthis._checkMaxLineIndex = this._maxLineIndex;\n\t\t\t\t\tthis._maxLineIndex = -1;\n\t\t\t\t\tthis._maxLineWidth = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._update();\n\t\t},\n\t\t_onModelChanging: function(modelChangingEvent) {\n\t\t\tmodelChangingEvent.type = \"ModelChanging\"; //$NON-NLS-1$\n\t\t\tthis.onModelChanging(modelChangingEvent);\n\t\t\tmodelChangingEvent.type = \"Changing\"; //$NON-NLS-1$\n\t\t},\n\t\t_queueUpdate: function() {\n\t\t\tif (this._updateTimer || this._ignoreQueueUpdate) { return; }\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._updateTimer = win.setTimeout(function() { \n\t\t\t\tthat._updateTimer = null;\n\t\t\t\tthat._update();\n\t\t\t}, 0);\n\t\t},\n\t\t_rangesToSelections: function(ranges) {\n\t\t\tvar selections = [];\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\tranges.forEach(function(range) {\n\t\t\t\tvar selection;\n\t\t\t\tif (range instanceof Selection) {\n\t\t\t\t\tselection = range.clone();\n\t\t\t\t} else {\n\t\t\t\t\tvar start = range.start;\n\t\t\t\t\tvar end = range.end;\n\t\t\t\t\tvar caret = start > end;\n\t\t\t\t\tif (caret) {\n\t\t\t\t\t\tvar tmp = start;\n\t\t\t\t\t\tstart = end;\n\t\t\t\t\t\tend = tmp;\n\t\t\t\t\t}\n\t\t\t\t\tstart = Math.max(0, Math.min (start, charCount));\n\t\t\t\t\tend = Math.max(0, Math.min (end, charCount));\n\t\t\t\t\tselection = new Selection(start, end, caret);\n\t\t\t\t}\n\t\t\t\tselections.push(selection);\n\t\t\t});\n\t\t\treturn selections;\n\t\t},\n\t\t_resetLineHeight: function(startLine, endLine) {\n\t\t\tif (this._wrapMode || this._variableLineHeight) {\n\t\t\t\tif (startLine !== undefined && endLine !== undefined) {\n\t\t\t\t\tfor (var i = startLine; i < endLine; i++) {\n\t\t\t\t\t\tthis._lineHeight[i] = undefined;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._lineHeight = newArray(this._model.getLineCount());\n\t\t\t\t}\n\t\t\t\tthis._calculateLineHeightTimer();\n\t\t\t} else {\n\t\t\t\tthis._lineHeight = null;\n\t\t\t}\n\t\t},\n\t\t_resetLineWidth: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tchild.lineWidth = undefined;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_reset: function() {\n\t\t\tthis._maxLineIndex = -1;\n\t\t\tthis._maxLineWidth = 0;\n\t\t\tthis._topChild = null;\n\t\t\tthis._bottomChild = null;\n\t\t\tthis._topIndexY = 0;\n\t\t\tthis._variableLineHeight = false;\n\t\t\tthis._resetLineHeight();\n\t\t\tthis._setSelection(new Selection(0, 0, false), false, false);\n\t\t\tif (this._viewDiv) {\n\t\t\t\tthis._viewDiv.scrollLeft = 0;\n\t\t\t\tthis._viewDiv.scrollTop = 0;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tchild.lineRemoved = true;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, the caret does not show after the\n\t\t\t\t* view is refreshed.  The fix is to toggle the contentEditable state and\n\t\t\t\t* force the clientDiv to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tif (util.isFirefox < 13) {\n\t\t\t\t\tthis._fixCaret ();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_scrollViewAnimated: function (pixelX, pixelY, callback) {\n\t\t\tvar win = this._getWindow();\n\t\t\tif (callback && this._scrollAnimation) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._animation = new Animation({\n\t\t\t\t\twindow: win,\n\t\t\t\t\tduration: this._scrollAnimation,\n\t\t\t\t\tcurve: [pixelY, 0],\n\t\t\t\t\tonAnimate: function(x) {\n\t\t\t\t\t\tvar deltaY = pixelY - Math.floor(x);\n\t\t\t\t\t\tthat._scrollView (0, deltaY);\n\t\t\t\t\t\tpixelY -= deltaY;\n\t\t\t\t\t},\n\t\t\t\t\tonEnd: function() {\n\t\t\t\t\t\tthat._animation = null;\n\t\t\t\t\t\tthat._scrollView (pixelX, pixelY);\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\twin.setTimeout(callback, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._animation.play();\n\t\t\t} else {\n\t\t\t\tthis._scrollView (pixelX, pixelY);\n\t\t\t\tif (callback) {\n\t\t\t\t\twin.setTimeout(callback, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}, \n\t\t_scrollView: function (pixelX, pixelY) {\n\t\t\t/*\n\t\t\t* Always set _ensureCaretVisible to false so that the view does not scroll\n\t\t\t* to show the caret when scrollView is not called from showCaret().\n\t\t\t*/\n\t\t\tthis._ensureCaretVisible = false;\n\t\t\t\n\t\t\t/*\n\t\t\t* Scrolling is done only by setting the scrollLeft and scrollTop fields in the\n\t\t\t* view div. This causes an update from the scroll event. In some browsers \n\t\t\t* this event is asynchronous and forcing update page to run synchronously\n\t\t\t* leads to redraw problems. \n\t\t\t* On Chrome 11, the view redrawing at times when holding PageDown/PageUp key.\n\t\t\t* On Firefox 4 for Linux, the view redraws the first page when holding \n\t\t\t* PageDown/PageUp key, but it will not redraw again until the key is released.\n\t\t\t*/\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (pixelX) { viewDiv.scrollLeft += pixelX; }\n\t\t\tif (pixelY) { viewDiv.scrollTop += pixelY; }\n\t\t},\n\t\t_setClipboardText: function (text, evt) {\n\t\t\tif (util.isElectron && !evt) {\n\t\t\t\twindow.__clipboardModule.writeText(text);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar clipboardText;\n\t\t\t// IE\n\t\t\tvar win = this._getWindow();\n\t\t\tvar clipboardData = win.clipboardData;\n\t\t\t// WebKit and Firefox > 21\n\t\t\tif (!clipboardData && evt) {\n\t\t\t\tclipboardData = evt.clipboardData;\n\t\t\t}\n\t\t\tif (clipboardData) {\n\t\t\t\tclipboardText = [];\n\t\t\t\tconvertDelimiter(text, function(t) {clipboardText.push(t);}, function() {clipboardText.push(util.platformDelimiter);});\n\t\t\t\t/*\n\t\t\t\t* Note that setData() succeeds on Firefox > 21 and WebKit, but the return value is not a boolean like IE.\n\t\t\t\t*/\n\t\t\t\tvar success = clipboardData.setData(util.isIE ? \"Text\" : \"text/plain\", clipboardText.join(\"\")); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (success || (evt && (util.isFirefox > 21 || util.isWebkit))) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (!evt) return false;\n\t\t\t}\n\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\tvar child = util.createElement(doc, \"pre\"); //$NON-NLS-1$\n\t\t\tchild.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tchild.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tconvertDelimiter(text, \n\t\t\t\tfunction(t) {\n\t\t\t\t\tchild.appendChild(doc.createTextNode(t));\n\t\t\t\t}, \n\t\t\t\tfunction() {\n\t\t\t\t\tchild.appendChild(util.createElement(doc, \"br\")); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t);\n\t\t\tchild.appendChild(doc.createTextNode(\" \")); //$NON-NLS-1$\n\t\t\tthis._clientDiv.appendChild(child);\n\t\t\tvar range = doc.createRange();\n\t\t\trange.setStart(child.firstChild, 0);\n\t\t\trange.setEndBefore(child.lastChild);\n\t\t\tvar sel = win.getSelection();\n\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\tsel.addRange(range);\n\t\t\tvar that = this;\n\t\t\t/** @ignore */\n\t\t\tvar cleanup = function() {\n\t\t\t\tif (child && child.parentNode === that._clientDiv) {\n\t\t\t\t\tthat._clientDiv.removeChild(child);\n\t\t\t\t}\n\t\t\t\tthat._updateDOMSelection();\n\t\t\t};\n\t\t\tvar result = false;\n\t\t\t/* \n\t\t\t* Try execCommand first, it works on firefox with clipboard permission,\n\t\t\t* chrome 5, safari 4.\n\t\t\t*/\n\t\t\tthis._ignoreCopy = true;\n\t\t\ttry {\n\t\t\t\tresult = doc.execCommand(\"copy\", false, null); //$NON-NLS-1$\n\t\t\t} catch (e) {}\n\t\t\tthis._ignoreCopy = false;\n\t\t\tif (!result) {\n\t\t\t\tif (evt) {\n\t\t\t\t\twin.setTimeout(cleanup, 0);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* no event and no permission, copy cannot be done */\n\t\t\tcleanup();\n\t\t\treturn true;\n\t\t},\n\t\t_setGrab: function (target) {\n\t\t\tif (target === this._grabControl) { return; }\n\t\t\tif (target) {\n\t\t\t\tif (target.setCapture) { target.setCapture(); }\n\t\t\t\tthis._grabControl = target;\n\t\t\t} else {\n\t\t\t\tif (this._grabControl.releaseCapture) { this._grabControl.releaseCapture(); }\n\t\t\t\tthis._grabControl = null;\n\t\t\t}\n\t\t},\n\t\t_setLinksVisible: function(visible) {\n\t\t\tif (this._linksVisible === visible) { return; }\n\t\t\tthis._linksVisible = visible;\n\t\t\t/*\n\t\t\t* Feature in IE.  The client div looses focus and does not regain it back\n\t\t\t* when the content editable flag is reset. The fix is to remember that it\n\t\t\t* had focus when the flag is cleared and give focus back to the div when\n\t\t\t* the flag is set.\n\t\t\t*/\n\t\t\tif (util.isIE && visible) {\n\t\t\t\tthis._hadFocus = this._hasFocus;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tclientDiv.contentEditable = !visible;\n\t\t\tif (this._hadFocus && !visible) {\n\t\t\t\tclientDiv.focus();\n\t\t\t}\n\t\t\tif (this._overlayDiv) {\n\t\t\t\tthis._overlayDiv.style.zIndex = visible ? \"-1\" : \"1\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tvar line = this._getLineNext();\n\t\t\twhile (line) {\n\t\t\t\tline._line.updateLinks();\n\t\t\t\tline = this._getLineNext(line);\n\t\t\t}\n\t\t\tthis._updateDOMSelection();\n\t\t},\n\t\t_setSelection: function (selection, _scroll, update, callback, pageScroll, add, preserveCursorX) {\n\t\t\tif (selection) {\n\t\t\t\tif (update === undefined) { update = true; }\n\t\t\t\tvar oldSelection = this._getSelections(), newSelection;\n\t\t\t\tif (Array.isArray(selection)) {\n\t\t\t\t\tnewSelection = selection;\n\t\t\t\t} else if (add) {\n\t\t\t\t\tnewSelection = oldSelection.concat([selection]);\n\t\t\t\t} else {\n\t\t\t\t\tnewSelection = [selection];\n\t\t\t\t}\n\t\t\t\tthis._selection = Selection.merge(newSelection);\n\t\t\t\t\n\t\t\t\tif (!preserveCursorX) {\n\t\t\t\t\tnewSelection.forEach(function(sel) {\n\t\t\t\t\t\tsel._columnX = -1;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t/* \n\t\t\t\t* Always showCaret(), even when the selection is not changing, to ensure the\n\t\t\t\t* caret is visible. Note that some views do not scroll to show the caret during\n\t\t\t\t* keyboard navigation when the selection does not chanage. For example, line down\n\t\t\t\t* when the caret is already at the last line.\n\t\t\t\t*/\n\t\t\t\tif (_scroll !== false) { /*update = !*/this._showCaret(false, callback, _scroll, pageScroll); }\n\t\t\t\t\n\t\t\t\t/* \n\t\t\t\t* Sometimes the browser changes the selection \n\t\t\t\t* as result of method calls or \"leaked\" events. \n\t\t\t\t* The fix is to set the visual selection even\n\t\t\t\t* when the logical selection is not changed.\n\t\t\t\t*/\n\t\t\t\tif (update) { this._updateDOMSelection(); }\n\t\t\t\t\n\t\t\t\tif (!Selection.compare(oldSelection, newSelection)) {\n\t\t\t\t\tvar e = {\n\t\t\t\t\t\ttype: \"Selection\", //$NON-NLS-1$\n\t\t\t\t\t\toldValue: Selection.convert(oldSelection),\n\t\t\t\t\t\tnewValue: Selection.convert(newSelection)\n\t\t\t\t\t};\n\t\t\t\t\tthis.onSelection(e);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setSelectionTo: function (x, y, down, extent, add, drag) {\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar pt = this.convert({x: x, y: y}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar lineIndex = this._getLineIndex(pt.y);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = line.getOffset(pt.x, pt.y - this._getLinePixel(lineIndex));\n\t\t\tif (drag && !extent) {\n\t\t\t\tif (Selection.contains(selections, offset)) {\n\t\t\t\t\tthis._dragOffset = offset;\n\t\t\t\t\tline.destroy();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._blockSelection) {\n\t\t\t\tselections = this._getBlockSelections(selections, lineIndex, pt);\n\t\t\t} else {\n\t\t\t\tvar selection;\n\t\t\t\tif (!down) {\n\t\t\t\t\tselection = Selection.editing(selections);\n\t\t\t\t} else if (extent) {\n\t\t\t\t\tselection = selections[selections.length - 1];\n\t\t\t\t\tselection._editing = true;\n\t\t\t\t} else {\n\t\t\t\t\tselection = new Selection(0, 0);\n\t\t\t\t\tselection._editing = true;\n\t\t\t\t\tif (add) {\n\t\t\t\t\t\tselections.push(selection);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselections = [selection];\n\t\t\t\t\t}\n\t\t\t\t\tselection._docX = pt.x;\n\t\t\t\t}\n\t\t\t\tif (this._clickCount === 1) {\n\t\t\t\t\tselection.extend(offset);\n\t\t\t\t\tif (!extent) { selection.collapse(); }\n\t\t\t\t} else {\n\t\t\t\t\tvar word = (this._clickCount & 1) === 0;\n\t\t\t\t\tvar start, end;\n\t\t\t\t\tif (word) {\n\t\t\t\t\t\tif (this._doubleClickSelection) {\n\t\t\t\t\t\t\tif (offset >= this._doubleClickSelection.start) {\n\t\t\t\t\t\t\t\tstart = this._doubleClickSelection.start;\n\t\t\t\t\t\t\t\tend = line.getNextOffset(offset, {unit:\"wordend\", count:1}); //$NON-NLS-1$\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstart = line.getNextOffset(offset, {unit:\"word\", count:-1}); //$NON-NLS-1$\n\t\t\t\t\t\t\t\tend = this._doubleClickSelection.end;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = line.getNextOffset(offset, {unit:\"word\", count:-1}); //$NON-NLS-1$\n\t\t\t\t\t\t\tend = line.getNextOffset(start, {unit:\"wordend\", count:1}); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this._doubleClickSelection) {\n\t\t\t\t\t\t\tvar doubleClickLine = model.getLineAtOffset(this._doubleClickSelection.start);\n\t\t\t\t\t\t\tif (lineIndex >= doubleClickLine) {\n\t\t\t\t\t\t\t\tstart = model.getLineStart(doubleClickLine);\n\t\t\t\t\t\t\t\tend = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\t\tend = model.getLineEnd(doubleClickLine);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tend = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tselection.setCaret(start);\n\t\t\t\t\tselection.extend(end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._setSelection(selections, true, true, null, false);\n\t\t\tline.destroy();\n\t\t\treturn true;\n\t\t},\n\t\t_setFullSelection: function(fullSelection, init) {\n\t\t\tthis._fullSelection = fullSelection;\n\t\t\tif (util.isWebkit < 537.36) {\n\t\t\t\tthis._fullSelection = fullSelection = true;\n\t\t\t}\n\t\t\tif (!this._domSelection) {\n\t\t\t\tthis._domSelection = [];\n\t\t\t\tthis._cursorVisible = true;\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t},\n\t\t_setBlockCursor: function (visible) {\n\t\t\tthis._blockCursorVisible = visible;\n\t\t\tthis._updateBlockCursorVisible();\n\t\t},\n\t\t_setOverwriteMode: function (overwrite) {\n\t\t\tthis._overwriteMode = overwrite;\n\t\t\tthis._updateBlockCursorVisible();\n\t\t},\n\t\t_updateBlockCursorVisible: function () {\n\t\t\tif (this._blockCursorVisible || this._overwriteMode) {\n\t\t\t\tif (!this._cursorDiv) {\n\t\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\t\tvar cursorDiv = util.createElement(viewDiv.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.className = \"textviewBlockCursor\"; //$NON-NLS-1$\n\t\t\t\t\tthis._cursorDiv = cursorDiv;\n\t\t\t\t\tcursorDiv.tabIndex = -1;\n\t\t\t\t\tcursorDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.color = \"transparent\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.innerHTML = \"&nbsp;\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.appendChild(cursorDiv);\n\t\t\t\t\tthis._updateDOMSelection();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._cursorDiv) {\n\t\t\t\t\tthis._cursorDiv.parentNode.removeChild(this._cursorDiv);\n\t\t\t\t\tthis._cursorDiv = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setMarginOffset: function(marginOffset, init) {\n\t\t\tthis._marginOffset = marginOffset;\n\t\t\tthis._marginDiv.style.display = marginOffset ? \"block\" : \"none\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tif (!init) {\n\t\t\t\tthis._metrics = this._calculateMetrics();\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_setWrapOffset: function(wrapOffset, init) {\n\t\t\tthis._wrapOffset = wrapOffset;\n\t\t\tif (!init) {\n\t\t\t\tthis._metrics = this._calculateMetrics();\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_setReadOnly: function (readOnly) {\n\t\t\tthis._readonly = readOnly;\n\t\t},\n\t\t_setSingleMode: function (singleMode, init) {\n\t\t\tthis._singleMode = singleMode;\n\t\t\tthis._updateOverflow();\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setNoScroll: function (noScroll, init) {\n\t\t\tthis._noScroll = noScroll;\n\t\t\tthis._updateOverflow();\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setTabSize: function (tabSize, init) {\n\t\t\tthis._tabSize = tabSize;\n\t\t\tthis._customTabSize = undefined;\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (util.isOpera) {\n\t\t\t\tif (clientDiv) { clientDiv.style.OTabSize = this._tabSize+\"\"; }\n\t\t\t} else if (util.isWebkit >= 537.1) {\n\t\t\t\tif (clientDiv) { clientDiv.style.tabSize = this._tabSize+\"\"; }\n\t\t\t} else if (util.isFirefox >= 4) {\n\t\t\t\tif (clientDiv) {  clientDiv.style.MozTabSize = this._tabSize+\"\"; }\n\t\t\t} else if (this._tabSize !== 8) {\n\t\t\t\tthis._customTabSize = this._tabSize;\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis.redrawLines();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t},\n\t\t_setTheme: function(theme) {\n\t\t\tif (this._theme) {\n\t\t\t\tthis._theme.removeEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._theme = theme;\n\t\t\tif (this._theme) {\n\t\t\t\tthis._theme.addEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._setThemeClass(this._themeClass);\n\t\t},\n\t\t_setThemeClass: function (themeClass, init) {\n\t\t\tthis._themeClass = themeClass;\n\t\t\tvar viewContainerClass = \"textview\"; //$NON-NLS-1$\n\t\t\tvar globalThemeClass = this._theme.getThemeClass();\n\t\t\tif (globalThemeClass) { viewContainerClass += \" \" + globalThemeClass; } //$NON-NLS-1$\n\t\t\tif (this._themeClass && globalThemeClass !== this._themeClass) { viewContainerClass += \" \" + this._themeClass; } //$NON-NLS-1$\n\t\t\tthis._rootDiv.className = viewContainerClass;\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setUndoStack: function (undoStack) {\n\t\t\tthis._undoStack = undoStack;\n\t\t},\n\t\t_setWrapMode: function (wrapMode, init) {\n\t\t\tthis._wrapMode = wrapMode && this._wrappable;\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (this._wrapMode) {\n\t\t\t\tclientDiv.style.whiteSpace = \"pre-wrap\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.wordWrap = \"break-word\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tclientDiv.style.whiteSpace = \"pre\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.wordWrap = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._updateOverflow();\n\t\t\tif (!init) {\n\t\t\t\tthis.redraw();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t\tthis._resetLineHeight();\n\t\t},\n\t\t_showCaret: function (allSelection, callback, showOptions, pageScroll) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._ignoreDOMSelection) { return; }\n\t\t\tif (this._imeOffset !== -1) return;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar selection = Selection.editing(selections, this._autoScrollDir === \"down\"); //$NON-NLS-1$\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar start = selection.start;\n\t\t\tvar end = selection.end;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar endLine = model.getLineAtOffset(end);\n\t\t\tvar endInclusive = Math.max(Math.max(start, model.getLineStart(endLine)), end - 1);\n\t\t\tvar clientWidth = this._getClientWidth();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar minScroll = clientWidth / 4;\n\t\t\tvar bounds = this._getBoundsAtOffset(caret === start ? start : endInclusive);\n\t\t\tvar left = bounds.left;\n\t\t\tvar right = bounds.right;\n\t\t\tvar _top = bounds.top;\n\t\t\tvar bottom = bounds.bottom;\n\t\t\tvar selectionHeight = 0;\n\t\t\tvar hasShowOptions = typeof showOptions === \"object\"; //$NON-NLS-1$\n\t\t\tif ((allSelection || hasShowOptions) && !selection.isEmpty()) {\n\t\t\t\tbounds = this._getBoundsAtOffset(caret === end ? start : endInclusive);\n\t\t\t\tselectionHeight = (bounds.bottom > bottom ? bounds.bottom : bottom) - (bounds.top < _top ? bounds.top : _top);\n\t\t\t\tif (allSelection) {\n\t\t\t\t\tif (bounds.top === _top) {\n\t\t\t\t\t\tif (caret === start) {\n\t\t\t\t\t\t\tright = left + Math.min(bounds.right - left, clientWidth);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tleft = right - Math.min(right - bounds.left, clientWidth);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (caret === start) {\n\t\t\t\t\t\t\tbottom = _top + Math.min(bounds.bottom - _top, clientHeight);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_top = bottom - Math.min(bottom - bounds.top, clientHeight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar pixelX = 0;\n\t\t\tif (left < _scroll.x) {\n\t\t\t\tpixelX = Math.min(left - _scroll.x, -minScroll);\n\t\t\t}\n\t\t\tif (right > _scroll.x + clientWidth) {\n\t\t\t\tpixelX = Math.max(right - _scroll.x - clientWidth, minScroll);\n\t\t\t}\n\t\t\tvar pixelY = 0;\n\t\t\tif (_top < _scroll.y) {\n\t\t\t\tpixelY = _top - _scroll.y;\n\t\t\t} else if (bottom > _scroll.y + clientHeight) {\n\t\t\t\tpixelY = bottom - _scroll.y - clientHeight;\n\t\t\t}\n\t\t\tif (pageScroll) {\n\t\t\t\tif (pageScroll > 0) {\n\t\t\t\t\tif (pixelY > 0) {\n\t\t\t\t\t\tpixelY = Math.max(pixelY, pageScroll);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (pixelY < 0) {\n\t\t\t\t\t\tpixelY = Math.min(pixelY, pageScroll);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar alwaysScroll = hasShowOptions && showOptions.scrollPolicy === \"always\"; //$NON-NLS-1$\n\t\t\tif (pixelX !== 0 || pixelY !== 0 || alwaysScroll) {\n\t\t\t\tif (hasShowOptions) {\n\t\t\t\t\tvar flag = pixelY > 0;\n\t\t\t\t\tif (pixelY === 0) {\n\t\t\t\t\t\tpixelY = _top - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t\tvar viewAnchor = showOptions.viewAnchor;\n\t\t\t\t\tvar selectionAnchor = showOptions.selectionAnchor;\n\t\t\t\t\tvar viewAnchorOffset = Math.min(Math.max(0, showOptions.viewAnchorOffset || 0));\n//\t\t\t\t\tvar selectionAnchorOffset = Math.min(Math.max(0, showOptions.selectionAnchorOffset || 0));\n\t\t\t\t\tif (viewAnchor === \"top\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? (1 - viewAnchorOffset) * clientHeight : -viewAnchorOffset * clientHeight);\n\t\t\t\t\t} else if (viewAnchor === \"bottom\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? viewAnchorOffset * clientHeight : -(1 - viewAnchorOffset) * clientHeight);\n\t\t\t\t\t} else if (viewAnchor === \"center\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? clientHeight / 2 + viewAnchorOffset * clientHeight : clientHeight / 2  - (1 - viewAnchorOffset) * clientHeight);\n\t\t\t\t\t} else { // caret is the default\n\t\t\t\t\t\tpixelY += Math.floor(flag ? viewAnchorOffset * clientHeight : -viewAnchorOffset * clientHeight);\n\t\t\t\t\t}\n\t\t\t\t\tif (startLine !== endLine) {\n\t\t\t\t\t\tif (selectionAnchor === \"top\" && caret !== start) { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(-selectionHeight);\n\t\t\t\t\t\t} else if (selectionAnchor === \"bottom\" && caret !== end) { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(selectionHeight);\n\t\t\t\t\t\t} else if (selectionAnchor === \"center\") { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(selectionHeight / 2);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// caret is the default\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (pixelY !== 0 && typeof showOptions === \"number\") { //$NON-NLS-1$\n\t\t\t\t\tif (showOptions < 0) { showOptions = 0; }\n\t\t\t\t\tif (showOptions > 1) { showOptions = 1; }\n\t\t\t\t\tpixelY += Math.floor(pixelY > 0 ? showOptions * clientHeight : -showOptions * clientHeight);\n\t\t\t\t}\n\t\t\t\tthis._scrollViewAnimated(pixelX, pixelY, callback);\n\t\t\t\t/*\n\t\t\t\t* When the view scrolls it is possible that one of the scrollbars can show over the caret.\n\t\t\t\t* Depending on the browser scrolling can be synchronous (Safari), in which case the change \n\t\t\t\t* can be detected before showCaret() returns. When scrolling is asynchronous (most browsers), \n\t\t\t\t* the detection is done during the next update page.\n\t\t\t\t*/\n\t\t\t\tif (clientHeight !== this._getClientHeight() || clientWidth !== this._getClientWidth()) {\n\t\t\t\t\tthis._showCaret();\n\t\t\t\t} else {\n\t\t\t\t\tthis._ensureCaretVisible = true;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_startIME: function () {\n\t\t\tif (this._imeOffset !== -1) { return; }\n\t\t\tvar selected = false;\n\t\t\tvar selections = this._getSelections();\n\t\t\tfor (var i=0; i<selections.length && !selected; i++) {\n\t\t\t\tselected = !selections[i].isEmpty();\n\t\t\t}\n\t\t\tif (selected) {\n\t\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\t}\n\t\t\tthis._imeOffset = selections[0].start;\n\t\t},\n\t\t_unhookEvents: function() {\n\t\t\tthis._model.removeEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.removeEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._theme.removeEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._modelListener = null;\n\t\t\tfor (var i=0; i<this._handlers.length; i++) {\n\t\t\t\tvar h = this._handlers[i];\n\t\t\t\tremoveHandler(h.target, h.type, h.handler);\n\t\t\t}\n\t\t\tthis._handlers = null;\n\t\t\tif (this._mutationObserver) {\n\t\t\t\tthis._mutationObserver.disconnect();\n\t\t\t}\n\t\t},\n\t\t_updateDOMSelection: function () {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._ignoreDOMSelection) { return; }\n\t\t\tif (this._imeOffset !== -1) return;\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar selection = this._getSelections();\n\t\t\tvar domSelection = this._domSelection, i;\n\t\t\tif (domSelection.length < selection.length) {\n\t\t\t\tfor (i=domSelection.length; i<selection.length; i++) {\n\t\t\t\t\tdomSelection.push(new DOMSelection(this));\n\t\t\t\t}\n\t\t\t} else if (domSelection.length > selection.length) {\n\t\t\t\tdomSelection.splice(selection.length).forEach(function(s) {\n\t\t\t\t\ts.destroy();\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (i=0; i<domSelection.length; i++) {\n\t\t\t\tdomSelection[i].setPrimary(i === 0);\n\t\t\t\tdomSelection[i].setSelection(selection[i]);\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tvar that = this;\n\t\t\tif (domSelection.length > 1) {\n\t\t\t\tif (!this._cursorTimer) {\n\t\t\t\t\tthis._cursorTimer = win.setInterval(function() {\n\t\t\t\t\t\tthat._cursorVisible = !that._cursorVisible;\n\t\t\t\t\t\tthat._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._cursorTimer) {\n\t\t\t\t\twin.clearInterval(this._cursorTimer);\n\t\t\t\t\tthis._cursorTimer = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_update: function(hScrollOnly) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._updateTimer) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._updateTimer);\n\t\t\t\tthis._updateTimer = null;\n\t\t\t\thScrollOnly = false;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (!clientDiv) { return; }\n\t\t\tif (this._metrics.invalid) {\n\t\t\t\tthis._ignoreQueueUpdate = true;\n\t\t\t\tthis._updateStyle();\n\t\t\t\tthis._ignoreQueueUpdate = false;\n\t\t\t}\n\t\t\tvar model = this._model;\n\t\t\tvar _scroll = this._getScroll(false);\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar needUpdate = false;\n\t\t\tvar hScroll = false, vScroll = false;\n\t\t\tvar scrollbarWidth = this._metrics.scrollWidth;\n\t\t\t\n\t\t\tif (this._wrapMode) {\n\t\t\t\tclientDiv.style.width = (this._metrics.wrapWidth || this._getClientWidth()) + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\t\n\t\t\t/*\n\t\t\t* topIndex - top line index of the view (maybe be particialy visible)\n\t\t\t* lineStart - top line minus one line (if any)\n\t\t\t* topIndexY - portion of the top line that is NOT visible.\n\t\t\t* top - topIndexY plus height of the line before top line (if any)\n\t\t\t*/\n\t\t\tvar topIndex, lineStart, _top, topIndexY,\n\t\t\t\tleftWidth, leftRect,\n\t\t\t\tclientWidth, clientHeight, scrollWidth, scrollHeight,\n\t\t\t\ttotalHeight = 0, totalLineIndex = 0, tempLineHeight;\n\t\t\tif (this._lineHeight) {\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex);\n\t\t\t\t\tif (totalHeight + tempLineHeight > _scroll.y) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\ttopIndex = totalLineIndex;\n\t\t\t\tlineStart = Math.max(0, topIndex - 1);\n\t\t\t\ttopIndexY = _top = _scroll.y - totalHeight;\n\t\t\t\tif (topIndex > 0) {\n\t\t\t\t\t_top += this._getLineHeight(topIndex - 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar firstLine = Math.max(0, _scroll.y) / lineHeight;\n\t\t\t\ttopIndex = Math.floor(firstLine);\n\t\t\t\tlineStart = Math.max(0, topIndex - 1);\n\t\t\t\t_top = Math.round((firstLine - lineStart) * lineHeight);\n\t\t\t\ttopIndexY = Math.round((firstLine - topIndex) * lineHeight);\n\t\t\t\tscrollHeight = lineCount * lineHeight;\n\t\t\t}\n\t\t\tthis._topIndexY = topIndexY;\n\t\t\tvar rootDiv = this._rootDiv;\n\t\t\tvar rootWidth = rootDiv.clientWidth;\n\t\t\tvar rootHeight = rootDiv.clientHeight;\n\t\t\tif (hScrollOnly) {\n\t\t\t\tleftWidth = 0;\n\t\t\t\tif (this._leftDiv) {\n\t\t\t\t\tleftRect = this._leftDiv.getBoundingClientRect();\n\t\t\t\t\tleftWidth = leftRect.right - leftRect.left;\n\t\t\t\t}\n\t\t\t\tclientWidth = this._getClientWidth();\n\t\t\t\tclientHeight = this._getClientHeight();\n\t\t\t\tscrollWidth = clientWidth;\n\t\t\t\tif (this._wrapMode) {\n\t\t\t\t\tif (this._metrics.wrapWidth) {\n\t\t\t\t\t\tscrollWidth = this._metrics.wrapWidth;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscrollWidth = Math.max(this._maxLineWidth, scrollWidth);\n\t\t\t\t}\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex, false);\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\tscrollHeight = totalHeight;\n\t\t\t} else {\n\t\t\t\tclientHeight = this._getClientHeight();\n\n\t\t\t\tvar linesPerPage = Math.floor((clientHeight + topIndexY) / lineHeight);\n\t\t\t\tvar bottomIndex = Math.min(topIndex + linesPerPage, lineCount - 1);\n\t\t\t\tvar lineEnd = Math.min(bottomIndex + 1, lineCount - 1);\n\t\t\t\t\n\t\t\t\tvar lineIndex, lineWidth;\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tlineIndex = child.lineIndex;\n\t\t\t\t\tvar nextChild = child.nextSibling;\n\t\t\t\t\tif (!(lineStart <= lineIndex && lineIndex <= lineEnd) || child.lineRemoved || child.lineIndex === -1) {\n\t\t\t\t\t\tif (this._mouseWheelLine === child) {\n\t\t\t\t\t\t\tchild.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tchild.lineIndex = -1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclientDiv.removeChild(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tchild = nextChild;\n\t\t\t\t}\n\t\n\t\t\t\tchild = this._getLineNext();\n\t\t\t\tvar doc = viewDiv.ownerDocument;\n\t\t\t\tvar frag = doc.createDocumentFragment();\n\t\t\t\tfor (lineIndex=lineStart; lineIndex<=lineEnd; lineIndex++) {\n\t\t\t\t\tif (!child || child.lineIndex > lineIndex) {\n\t\t\t\t\t\tnew TextLine(this, lineIndex).create(frag, null);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (frag.firstChild) {\n\t\t\t\t\t\t\tclientDiv.insertBefore(frag, child);\n\t\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (child && child.lineChanged) {\n\t\t\t\t\t\t\tchild = new TextLine(this, lineIndex).create(frag, child);\n\t\t\t\t\t\t\tchild.lineChanged = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild = this._getLineNext(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (frag.firstChild) { clientDiv.insertBefore(frag, child); }\n\t\n\t\t\t\t/*\n\t\t\t\t* Feature in WekKit. Webkit limits the width of the lines\n\t\t\t\t* computed below to the width of the client div.  This causes\n\t\t\t\t* the lines to be wrapped even though \"pre\" is set.  The fix\n\t\t\t\t* is to set the width of the client div to \"0x7fffffffpx\"\n\t\t\t\t* before computing the lines width.  Note that this value is\n\t\t\t\t* reset to the appropriate value further down.\n\t\t\t\t*/ \n\t\t\t\tif (util.isWebkit && !this._wrapMode) {\n\t\t\t\t\tclientDiv.style.width = \"0x7fffffffpx\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\n\t\t\t\tvar rect;\n\t\t\t\tchild = this._getLineNext();\n\t\t\t\tvar bottomHeight = clientHeight + _top;\n\t\t\t\tvar foundBottomIndex = false;\n\t\t\t\twhile (child) {\n\t\t\t\t\tlineWidth = child.lineWidth;\n\t\t\t\t\tif (lineWidth === undefined) {\n\t\t\t\t\t\trect = child._line.getBoundingClientRect();\n\t\t\t\t\t\tlineWidth = child.lineWidth = Math.ceil(rect.right - rect.left);\n\t\t\t\t\t\tvar lh = rect.bottom - rect.top;\n\t\t\t\t\t\tif (this._lineHeight) {\n\t\t\t\t\t\t\tthis._lineHeight[child.lineIndex] = lh;\n\t\t\t\t\t\t} else if (lineHeight !== 0 && lh !== 0 && Math.ceil(lineHeight) !== Math.ceil(lh)) {\n\t\t\t\t\t\t\tthis._variableLineHeight = true;\n\t\t\t\t\t\t\tthis._lineHeight = [];\n\t\t\t\t\t\t\tthis._lineHeight[child.lineIndex] = lh;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (this._lineHeight && !foundBottomIndex) {\n\t\t\t\t\t\tbottomHeight -= this._lineHeight[child.lineIndex];\n\t\t\t\t\t\tif (bottomHeight < 0) {\n\t\t\t\t\t\t\tbottomIndex = child.lineIndex;\n\t\t\t\t\t\t\tfoundBottomIndex = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\t\tif (lineWidth >= this._maxLineWidth) {\n\t\t\t\t\t\t\tthis._maxLineWidth = lineWidth;\n\t\t\t\t\t\t\tthis._maxLineIndex = child.lineIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this._checkMaxLineIndex === child.lineIndex) { this._checkMaxLineIndex = -1; }\n\t\t\t\t\t}\n\t\t\t\t\tif (child.lineIndex === topIndex) { this._topChild = child; }\n\t\t\t\t\tif (child.lineIndex === bottomIndex) { this._bottomChild = child; }\n\t\t\t\t\tchild = this._getLineNext(child);\n\t\t\t\t}\n\t\t\t\tif (this._checkMaxLineIndex !== -1) {\n\t\t\t\t\tlineIndex = this._checkMaxLineIndex;\n\t\t\t\t\tthis._checkMaxLineIndex = -1;\n\t\t\t\t\tif (0 <= lineIndex && lineIndex < lineCount) {\n\t\t\t\t\t\tvar line = new TextLine(this, lineIndex);\n\t\t\t\t\t\trect = line.getBoundingClientRect();\n\t\t\t\t\t\tlineWidth = rect.right - rect.left;\n\t\t\t\t\t\tif (lineWidth >= this._maxLineWidth) {\n\t\t\t\t\t\t\tthis._maxLineWidth = lineWidth;\n\t\t\t\t\t\t\tthis._maxLineIndex = lineIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex, totalLineIndex <= bottomIndex);\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\tscrollHeight = totalHeight;\n\t\n\t\t\t\t// Update rulers\n\t\t\t\tthis._updateRuler(this._leftDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._rightDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._innerRightDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._marginDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\t\n\t\t\t\tleftWidth = 0;\n\t\t\t\tif (this._leftDiv) {\n\t\t\t\t\tleftRect = this._leftDiv.getBoundingClientRect();\n\t\t\t\t\tleftWidth = leftRect.right - leftRect.left;\n\t\t\t\t}\n\t\t\t\tvar rightWidth = 0;\n\t\t\t\tif (this._rightDiv) {\n\t\t\t\t\tvar rightRect = this._rightDiv.getBoundingClientRect();\n\t\t\t\t\trightWidth = rightRect.right - rightRect.left;\n\t\t\t\t}\n\t\t\t\tviewDiv.style.left = leftWidth + \"px\"; //$NON-NLS-1$\n\t\t\t\tviewDiv.style.right = rightWidth + \"px\"; //$NON-NLS-1$\n\n\t\t\t\t/* Need to set the height first in order for the width to consider the vertical scrollbar */\n\t\t\t\tvar scrollDiv = this._scrollDiv;\n\t\t\t\tscrollDiv.style.height = (scrollHeight + (util.isWebkit ? 0 : viewPad.bottom)) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\tclientWidth = this._getClientWidth();\n\t\t\t\tif (!this._singleMode && !this._wrapMode && !this._noScroll) {\n\t\t\t\t\tvar clientHeightNoScroll = clientHeight, clientHeightScroll = clientHeight;\n\t\t\t\t\tvar oldHScroll = viewDiv.style.overflowX === \"scroll\"; //$NON-NLS-1$\n\t\t\t\t\tif (oldHScroll) {\n\t\t\t\t\t\tclientHeightNoScroll += scrollbarWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclientHeightScroll -= scrollbarWidth;\n\t\t\t\t\t}\n\t\t\t\t\tvar clientWidthNoScroll = clientWidth, clientWidthScroll = clientWidth;\n\t\t\t\t\tvar oldVScroll = viewDiv.style.overflowY === \"scroll\"; //$NON-NLS-1$\n\t\t\t\t\tif (oldVScroll) {\n\t\t\t\t\t\tclientWidthNoScroll += scrollbarWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclientWidthScroll -= scrollbarWidth;\n\t\t\t\t\t}\n\t\t\t\t\tclientHeight = clientHeightNoScroll;\n\t\t\t\t\tclientWidth = clientWidthNoScroll;\n\t\t\t\t\tif (scrollHeight > clientHeight) {\n\t\t\t\t\t\tvScroll = true;\n\t\t\t\t\t\tclientWidth = clientWidthScroll;\n\t\t\t\t\t}\n\t\t\t\t\tif (this._maxLineWidth > clientWidth) {\n\t\t\t\t\t\thScroll = true;\n\t\t\t\t\t\tclientHeight = clientHeightScroll;\n\t\t\t\t\t\tif (scrollHeight > clientHeight) {\n\t\t\t\t\t\t\tvScroll = true;\n\t\t\t\t\t\t\tclientWidth = clientWidthScroll;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (oldHScroll !== hScroll) {\n\t\t\t\t\t\tviewDiv.style.overflowX = hScroll ? \"scroll\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t\t}\n\t\t\t\t\tif (oldVScroll !== vScroll) {\n\t\t\t\t\t\tviewDiv.style.overflowY = vScroll ? \"scroll\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t\t}\n\t\t\t\t\tneedUpdate = oldHScroll !== hScroll || oldVScroll !== vScroll;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar width = clientWidth;\n\t\t\t\tif (this._wrapMode) {\n\t\t\t\t\tif (this._metrics.wrapWidth) {\n\t\t\t\t\t\twidth = this._metrics.wrapWidth;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twidth = Math.max(this._maxLineWidth + this._getInnerRightWidth(), width);\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\t* Except by IE 8 and earlier, all other browsers are not allocating enough space for the right padding \n\t\t\t\t* in the scrollbar. It is possible this a bug since all other paddings are considered.\n\t\t\t\t*/\n\t\t\t\tscrollWidth = width;\n\t\t\t\tif ((!util.isIE || util.isIE >= 9) && this._maxLineWidth > clientWidth) { width += viewPad.right + viewPad.left; }\n\t\t\t\tscrollDiv.style.width = width + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (this._clipScrollDiv) {\n\t\t\t\t\tthis._clipScrollDiv.style.width = width + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\t/* Get the left scroll after setting the width of the scrollDiv as this can change the horizontal scroll offset. */\n\t\t\t\t_scroll = this._getScroll(false);\n\n\t\t\t\tvar innerRightDiv = this._innerRightDiv;\n\t\t\t\tif (innerRightDiv) {\n\t\t\t\t\tinnerRightDiv.style.right = rightWidth + (viewDiv.style.overflowY === \"scroll\" ? this._metrics.scrollWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\tinnerRightDiv.style.bottom = (viewDiv.style.overflowX === \"scroll\" ? scrollbarWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._scrollHeight = scrollHeight;\n\t\t\tif (this._vScrollDiv) {\n\t\t\t\tvar trackHeight = clientHeight - 8;\n\t\t\t\tvar thumbHeight = Math.max(15, Math.ceil(Math.min(1, trackHeight / (scrollHeight + viewPad.top + viewPad.bottom)) * trackHeight));\n\t\t\t\tthis._vScrollDiv.style.left = (leftWidth + clientWidth - 8) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv.style.top = Math.floor(Math.max(0, (_scroll.y * trackHeight / scrollHeight))) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv.style.height = thumbHeight + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (!this._wrapMode && this._hScrollDiv) {\n\t\t\t\tvar trackWidth = clientWidth - 8;\n\t\t\t\tvar thumbWidth = Math.max(15, Math.ceil(Math.min(1, trackWidth / (this._maxLineWidth + viewPad.left + viewPad.right)) * trackWidth));\n\t\t\t\tthis._hScrollDiv.style.left = leftWidth + Math.floor(Math.max(0, Math.floor(_scroll.x * trackWidth / this._maxLineWidth))) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.top = (clientHeight - 9) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.width = thumbWidth + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar left = _scroll.x;\t\n\t\t\tvar clipDiv = this._clipDiv;\n\t\t\tvar overlayDiv = this._overlayDiv;\n\t\t\tvar marginDiv = this._marginDiv;\n\t\t\tvar clipLeft, clipTop;\n\t\t\tif (marginDiv) {\n\t\t\t\tmarginDiv.style.left = (-left + leftWidth + this._metrics.marginWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tmarginDiv.style.bottom = (viewDiv.style.overflowX === \"scroll\" ? scrollbarWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (clipDiv) {\n\t\t\t\tclipDiv.scrollLeft = left;\n\t\t\t\tclipDiv.scrollTop = 0;\n\t\t\t\tclipLeft = leftWidth + viewPad.left;\n\t\t\t\tclipTop = viewPad.top;\n\t\t\t\tvar clipWidth = clientWidth;\n\t\t\t\tvar clipHeight = clientHeight;\n\t\t\t\tvar clientLeft = 0, clientTop = -_top;\n\t\t\t\tif (_scroll.x === 0) {\n\t\t\t\t\tclipLeft -= viewPad.left;\n\t\t\t\t\tclipWidth += viewPad.left;\n\t\t\t\t\tclientLeft = viewPad.left;\n\t\t\t\t} \n\t\t\t\tif (_scroll.x + clientWidth === scrollWidth) {\n\t\t\t\t\tclipWidth += viewPad.right;\n\t\t\t\t}\n\t\t\t\tif (_scroll.y === 0) {\n\t\t\t\t\tclipTop -= viewPad.top;\n\t\t\t\t\tclipHeight += viewPad.top;\n\t\t\t\t\tclientTop += viewPad.top;\n\t\t\t\t}\n\t\t\t\tif (_scroll.y + clientHeight === scrollHeight) { \n\t\t\t\t\tclipHeight += viewPad.bottom; \n\t\t\t\t}\n\t\t\t\tclipDiv.style.left = clipLeft + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.top = clipTop + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.right = (rootWidth - clipWidth - clipLeft) + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.bottom = (rootHeight - clipHeight - clipTop) + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.left = clientLeft + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.top = clientTop + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.width = scrollWidth + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.height = (clientHeight + _top) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (overlayDiv) {\n\t\t\t\t\toverlayDiv.style.left = clientDiv.style.left;\n\t\t\t\t\toverlayDiv.style.top = clientDiv.style.top;\n\t\t\t\t\toverlayDiv.style.width = clientDiv.style.width;\n\t\t\t\t\toverlayDiv.style.height = clientDiv.style.height;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tclipLeft = left;\n\t\t\t\tclipTop = _top;\n\t\t\t\tvar clipRight = left + clientWidth;\n\t\t\t\tvar clipBottom = _top + clientHeight;\n\t\t\t\tif (clipLeft === 0) { clipLeft -= viewPad.left; }\n\t\t\t\tif (clipTop === 0) { clipTop -= viewPad.top; }\n\t\t\t\tif (clipRight === scrollWidth) { clipRight += viewPad.right; }\n\t\t\t\tif (_scroll.y + clientHeight === scrollHeight) { clipBottom += viewPad.bottom; }\n\t\t\t\tclientDiv.style.clip = \"rect(\" + clipTop + \"px,\" + clipRight + \"px,\" + clipBottom + \"px,\" + clipLeft + \"px)\"; //$NON-NLS-4$ //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-5$\n\t\t\t\tif (document.dir == \"rtl\") { /* ACGC */\n\t\t\t\t\tclientDiv.style.right = (-left + leftWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}else{\n\t\t\t\t\tclientDiv.style.left = (-left + leftWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\t  \n\t\t\t\t}\n\t\t\t\tclientDiv.style.width = (this._wrapMode || util.isWebkit ? scrollWidth : clientWidth + left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (!hScrollOnly) {\n\t\t\t\t\tclientDiv.style.top = (-_top + viewPad.top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tclientDiv.style.height = (clientHeight + _top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (overlayDiv) {\n\t\t\t\t\toverlayDiv.style.clip = clientDiv.style.clip;\n\t\t\t\t\toverlayDiv.style.left = clientDiv.style.left;\n\t\t\t\t\toverlayDiv.style.width = clientDiv.style.width;\n\t\t\t\t\tif (!hScrollOnly) {\n\t\t\t\t\t\toverlayDiv.style.top = clientDiv.style.top;\n\t\t\t\t\t\toverlayDiv.style.height = clientDiv.style.height;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._updateDOMSelection();\n\n\t\t\tif (needUpdate) {\n\t\t\t\tvar ensureCaretVisible = this._ensureCaretVisible;\n\t\t\t\tthis._ensureCaretVisible = false;\n\t\t\t\tif (ensureCaretVisible) {\n\t\t\t\t\tthis._showCaret();\n\t\t\t\t}\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_updateOverflow: function() {\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (this._noScroll) {\n\t\t\t\tviewDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t} else if (this._wrapMode) {\n\t\t\t\tviewDiv.style.overflowX = \"hidden\"; //$NON-NLS-1$\n\t\t\t\tviewDiv.style.overflowY = \"scroll\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tviewDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_updateRuler: function (divRuler, topIndex, bottomIndex, rootHeight) {\n\t\t\tif (!divRuler) { return; }\n\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar div = divRuler.firstChild;\n\t\t\twhile (div) {\n\t\t\t\tvar ruler = div._ruler;\n\t\t\t\tvar overview = ruler.getOverview();\n\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\tapplyStyle(ruler.getRulerStyle(), div);\n\t\t\t\t\tdivRuler.rulerWidth = undefined;\n\t\t\t\t}\n\t\t\t\tif (overview === \"fixed\") { //$NON-NLS-1$\n\t\t\t\t\tdiv.rulerChanged = false;\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar offset = lineHeight;\n\t\t\t\tif (overview === \"page\") { offset += this._topIndexY; } //$NON-NLS-1$\n\t\t\t\tdiv.style.top = -offset + \"px\"; //$NON-NLS-1$\n\t\t\t\tdiv.style.height = (rootHeight + offset) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvar widthDiv;\n\t\t\t\tvar child = div.firstChild;\n\t\t\t\tif (child) {\n\t\t\t\t\twidthDiv = child;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t} else {\n\t\t\t\t\twidthDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\twidthDiv.style.visibility = \"hidden\"; //$NON-NLS-1$\n\t\t\t\t\tdiv.appendChild(widthDiv);\n\t\t\t\t}\n\t\t\t\tvar lineIndex, annotation;\n\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\tif (widthDiv) {\n\t\t\t\t\t\tlineIndex = -1;\n\t\t\t\t\t\tannotation = ruler.getWidestAnnotation();\n\t\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t\tapplyStyle(annotation.style, widthDiv);\n\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\twidthDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidthDiv.lineIndex = lineIndex;\n\t\t\t\t\t\twidthDiv.style.height = (lineHeight + viewPad.top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar lineDiv, frag, annotations;\n\t\t\t\tif (overview === \"page\") { //$NON-NLS-1$\n\t\t\t\t\tannotations = ruler.getAnnotations(topIndex, bottomIndex + 1);\n\t\t\t\t\twhile (child) {\n\t\t\t\t\t\tlineIndex = child.lineIndex;\n\t\t\t\t\t\tvar nextChild = child.nextSibling;\n\t\t\t\t\t\tif (!(topIndex <= lineIndex && lineIndex <= bottomIndex) || child.lineChanged) {\n\t\t\t\t\t\t\tdiv.removeChild(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild = nextChild;\n\t\t\t\t\t}\n\t\t\t\t\tchild = div.firstChild.nextSibling;\n\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\tfor (lineIndex=topIndex; lineIndex<=bottomIndex; lineIndex++) {\n\t\t\t\t\t\tif (!child || child.lineIndex > lineIndex) {\n\t\t\t\t\t\t\tlineDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tannotation = annotations[lineIndex];\n\t\t\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t\t\tapplyStyle(annotation.style, lineDiv);\n\t\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\t\tlineDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlineDiv.annotation = annotation;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\t\t\t\tlineDiv.style.height = this._getLineHeight(lineIndex) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tfrag.appendChild(lineDiv);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (frag.firstChild) {\n\t\t\t\t\t\t\t\tdiv.insertBefore(frag, child);\n\t\t\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (child) {\n\t\t\t\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (frag.firstChild) { div.insertBefore(frag, child); }\n\t\t\t\t} else {\n\t\t\t\t\tvar clientHeight = this._getClientHeight ();\n\t\t\t\t\tvar lineCount = this._model.getLineCount ();\n\t\t\t\t\tvar contentHeight = lineHeight * lineCount;\n\t\t\t\t\tvar trackHeight = clientHeight + viewPad.top + viewPad.bottom - 2 * this._metrics.scrollWidth;\n\t\t\t\t\tvar divHeight, arrowWidth;\n\t\t\t\t\tif (contentHeight < trackHeight) {\n\t\t\t\t\t\tdivHeight = lineHeight;\n\t\t\t\t\t\tarrowWidth = viewPad.top;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdivHeight = trackHeight / lineCount;\n\t\t\t\t\t\tarrowWidth = this._metrics.scrollWidth;\n\t\t\t\t\t}\n\t\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\t\tvar count = div.childNodes.length;\n\t\t\t\t\t\twhile (count > 1) {\n\t\t\t\t\t\t\tdiv.removeChild(div.lastChild);\n\t\t\t\t\t\t\tcount--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tannotations = ruler.getAnnotations(0, lineCount);\n\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\tfor (var prop in annotations) {\n\t\t\t\t\t\t\tlineIndex = prop >>> 0;\n\t\t\t\t\t\t\tif (lineIndex < 0) { continue; }\n\t\t\t\t\t\t\tlineDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tannotation = annotations[prop];\n\t\t\t\t\t\t\tapplyStyle(annotation.style, lineDiv);\n\t\t\t\t\t\t\tlineDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tlineDiv.style.top = arrowWidth + lineHeight + Math.floor(lineIndex * divHeight) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\tlineDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineDiv.annotation = annotation;\n\t\t\t\t\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\t\t\t\tfrag.appendChild(lineDiv);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiv.appendChild(frag);\n\t\t\t\t\t} else if (div._oldTrackHeight !== trackHeight) {\n\t\t\t\t\t\tlineDiv = div.firstChild ? div.firstChild.nextSibling : null;\n\t\t\t\t\t\twhile (lineDiv) {\n\t\t\t\t\t\t\tlineDiv.style.top = this._metrics.scrollWidth + lineHeight + Math.floor(lineDiv.lineIndex * divHeight) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tlineDiv = lineDiv.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdiv._oldTrackHeight = trackHeight;\n\t\t\t\t}\n\t\t\t\tdiv.rulerChanged = false;\n\t\t\t\tdiv = div.nextSibling;\n\t\t\t}\n\t\t},\n\t\t_updateStyleSheet: function() {\n\t\t\tvar styleText = \"\";\n\t\t\tif (util.isWebkit && this._metrics.scrollWidth > 0) {\n\t\t\t\tstyleText += \"\\n.textview ::-webkit-scrollbar-corner {background: #eeeeee;}\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (styleText) {\n\t\t\t\tvar doc = this._clientDiv.ownerDocument;\n\t\t\t\tvar node = doc.getElementById(\"_textviewStyle\"); //$NON-NLS-1$\n\t\t\t\tif (!node) {\n\t\t\t\t\tnode = util.createElement(doc, \"style\"); //$NON-NLS-1$\n\t\t\t\t\tnode.id = \"_textviewStyle\"; //$NON-NLS-1$\n\t\t\t\t\tvar head = doc.getElementsByTagName(\"head\")[0] || doc.documentElement; //$NON-NLS-1$\n\t\t\t\t\tnode.appendChild(doc.createTextNode(styleText));\n\t\t\t\t\thead.insertBefore(node, head.firstChild);\n\t\t\t\t} else {\n\t\t\t\t\tnode.removeChild(node.firstChild);\n\t\t\t\t\tnode.appendChild(doc.createTextNode(styleText));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_updateStyle: function (init, metrics) {\n\t\t\tif (!init && util.isIE) {\n\t\t\t\tthis._rootDiv.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tmetrics = this._metrics = metrics || this._calculateMetrics();\n\t\t\tif (this._variableLineHeight) {\n\t\t\t\tthis._variableLineHeight = false;\n\t\t\t\tthis._resetLineHeight();\n\t\t\t}\n\t\t\tif (util.isIE) {\n\t\t\t\tthis._rootDiv.style.lineHeight = (metrics.lineHeight - (metrics.lineTrim.top + metrics.lineTrim.bottom)) + \"px\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tthis._rootDiv.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._updateStyleSheet();\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\tif (!metrics.invalid && metrics.scrollWidth === 0) {\n\t\t\t\t\tviewDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t} else {\n\t\t\t\t\tviewDiv.style.pointerEvents = \"\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.style.zIndex = \"\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis.redraw();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t}\n\t};//end prototype\n\tmEventTarget.EventTarget.addMixin(TextView.prototype);\n\t\n\treturn {TextView: TextView};\n});\n\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/projectionTextModel\", ['orion/editor/textModel', 'orion/editor/eventTarget'], function(mTextModel, mEventTarget) { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\n\t/**\n\t * @class This object represents a projection range. A projection specifies a\n\t * range of text and the replacement text. The range of text is relative to the\n\t * base text model associated to a projection model.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.ProjectionTextModel}<br/>\n\t * {@link orion.editor.ProjectionTextModel#addProjection}<br/>\n\t * </p>\t\t \n\t * @name orion.editor.Projection\n\t * \n\t * @property {Number} start The start offset of the projection range. \n\t * @property {Number} end The end offset of the projection range. This offset is exclusive.\n\t * @property {String|orion.editor.TextModel} [text=\"\"] The projection text to be inserted\n\t */\n\t/**\n\t * Constructs a new <code>ProjectionTextModel</code> based on the specified <code>TextModel</code>.\n\t *\n\t * @param {orion.editor.TextModel} baseModel The base text model.\n\t *\n\t * @name orion.editor.ProjectionTextModel\n\t * @class The <code>ProjectionTextModel</code> represents a projection of its base text\n\t * model. Projection ranges can be added to the projection text model to hide and/or insert\n\t * ranges to the base text model.\n\t * <p>\n\t * The contents of the projection text model is modified when changes occur in the base model,\n\t * projection model or by calls to {@link #addProjection} and {@link #removeProjection}.\n\t * </p>\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextModel}\n\t * {@link orion.editor.TextView#setModel}\n\t * </p>\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction ProjectionTextModel(baseModel) {\n\t\tthis._model = baseModel;\n\t\tthis._projections = [];\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onChanged(e);\n\t\t\t},\n\t\t\tonChanging: function(e) {\n\t\t\t\tself._onChanging(e);\n\t\t\t}\n\t\t};\n\t\tbaseModel.addEventListener(\"postChanged\", this._listener.onChanged); //$NON-NLS-0$\n\t\tbaseModel.addEventListener(\"preChanging\", this._listener.onChanging); //$NON-NLS-0$\n\t}\n\n\tProjectionTextModel.prototype = /** @lends orion.editor.ProjectionTextModel.prototype */ {\n\t\t/**\n\t\t * Destroys this projection text model.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"postChanged\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tthis._model.removeEventListener(\"preChanging\", this._listener.onChanging); //$NON-NLS-0$\n\t\t\t\tthis._model = null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adds a projection range to the model.\n\t\t * <p>\n\t\t * The model must notify the listeners before and after the the text is\n\t\t * changed by calling {@link #onChanging} and {@link #onChanged} respectively. \n\t\t * </p>\n\t\t * @param {orion.editor.Projection} projection The projection range to be added.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#removeProjection\n\t\t */\n\t\taddProjection: function(projection) {\n\t\t\tif (!projection) {return;}\n\t\t\t//start and end can't overlap any exist projection\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tprojection._lineIndex = model.getLineAtOffset(projection.start);\n\t\t\tprojection._lineCount = model.getLineAtOffset(projection.end) - projection._lineIndex;\n\t\t\tvar text = projection.text;\n\t\t\tif (!text) { text = \"\"; }\n\t\t\tif (typeof text === \"string\") { //$NON-NLS-0$\n\t\t\t\tprojection._model = new mTextModel.TextModel(text, model.getLineDelimiter());\n\t\t\t} else {\n\t\t\t\tprojection._model = text;\n\t\t\t}\n\t\t\tvar eventStart = this.mapOffset(projection.start, true);\n\t\t\tvar removedCharCount = projection.end - projection.start;\n\t\t\tvar removedLineCount = projection._lineCount;\n\t\t\tvar addedCharCount = projection._model.getCharCount();\n\t\t\tvar addedLineCount = projection._model.getLineCount() - 1;\n\t\t\tvar modelChangingEvent = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: projection._model.getText(),\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\tvar index = this._binarySearch(projections, projection.start);\n\t\t\tprojections.splice(index, 0, projection);\n\t\t\tvar modelChangedEvent = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Returns all projection ranges of this model.\n\t\t * \n\t\t * @return {orion.editor.Projection[]} The projection ranges.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#addProjection\n\t\t */\n\t\tgetProjections: function() {\n\t\t\treturn this._projections.slice(0);\n\t\t},\n\t\t/**\n\t\t * Gets the base text model.\n\t\t *\n\t\t * @return {orion.editor.TextModel} The base text model.\n\t\t */\n\t\tgetBaseModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Maps offsets between the projection model and its base model.\n\t\t *\n\t\t * @param {Number} offset The offset to be mapped.\n\t\t * @param {Boolean} [baseOffset=false] <code>true</code> if <code>offset</code> is in base model and\n\t\t *\tshould be mapped to the projection model.\n\t\t * @return {Number} The mapped offset\n\t\t */\n\t\tmapOffset: function(offset, baseOffset) {\n\t\t\tvar projections = this._projections, delta = 0, i, projection;\n\t\t\tif (baseOffset) {\n\t\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > offset) { break; }\n\t\t\t\t\tif (projection.end > offset) { return -1; }\n\t\t\t\t\tdelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\treturn offset + delta;\n\t\t\t}\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn offset - delta;\n\t\t},\n\t\t/**\n\t\t * Removes a projection range from the model.\n\t\t * <p>\n\t\t * The model must notify the listeners before and after the the text is\n\t\t * changed by calling {@link #onChanging} and {@link #onChanged} respectively. \n\t\t * </p>\n\t\t * \n\t\t * @param {orion.editor.Projection} projection The projection range to be removed.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#addProjection\n\t\t */\n\t\tremoveProjection: function(projection) {\n\t\t\tthis._removeProjection(projection);\n\t\t},\n\t\t_removeProjection: function(projection, noEvents) {\n\t\t\tvar i, delta = 0;\n\t\t\tfor (i = 0; i < this._projections.length; i++) {\n\t\t\t\tvar p = this._projections[i];\n\t\t\t\tif (p === projection) {\n\t\t\t\t\tprojection = p;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdelta += p._model.getCharCount() - (p.end - p.start);\n\t\t\t}\n\t\t\tif (i < this._projections.length) {\n\t\t\t\tvar model = this._model;\n\t\t\t\tvar eventStart = projection.start + delta;\n\t\t\t\tvar addedCharCount = projection.end - projection.start;\n\t\t\t\tvar addedLineCount = projection._lineCount;\n\t\t\t\tvar removedCharCount = projection._model.getCharCount();\n\t\t\t\tvar removedLineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (!noEvents) {\n\t\t\t\t\tvar modelChangingEvent = {\n\t\t\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\t\t\ttext: model.getText(projection.start, projection.end),\n\t\t\t\t\t\tstart: eventStart,\n\t\t\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\t\t\taddedLineCount: addedLineCount\n\t\t\t\t\t};\n\t\t\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\t\t}\n\t\t\t\tthis._projections.splice(i, 1);\n\t\t\t\tif (!noEvents) {\n\t\t\t\t\tvar modelChangedEvent = {\n\t\t\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\t\t\tstart: eventStart,\n\t\t\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\t\t\taddedLineCount: addedLineCount\n\t\t\t\t\t};\n\t\t\t\t\tthis.onChanged(modelChangedEvent);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\t_binarySearch: function (array, offset) {\n\t\t\tvar high = array.length, low = -1, index;\n\t\t\twhile (high - low > 1) {\n\t\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\t\tif (offset <= array[index].start) {\n\t\t\t\t\thigh = index;\n\t\t\t\t} else {\n\t\t\t\t\tlow = index;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn high;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getCharCount\n\t\t */\n\t\tgetCharCount: function() {\n\t\t\tvar count = this._model.getCharCount(), projections = this._projections;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tcount += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLine\n\t\t */\n\t\tgetLine: function(lineIndex, includeDelimiter) {\n\t\t\tif (lineIndex < 0) { return null; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, result = [], offset = 0, i, lineCount, projection;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection._lineIndex >= lineIndex - delta) { break; }\n\t\t\t\tlineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount >= lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\tif (projectionLineIndex < lineCount) {\n\t\t\t\t\t\treturn projection._model.getLine(projectionLineIndex, includeDelimiter);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.push(projection._model.getLine(lineCount));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\toffset = projection.end;\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\toffset = Math.max(offset, model.getLineStart(lineIndex - delta));\n\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection._lineIndex > lineIndex - delta) { break; }\n\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\tlineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount > lineIndex - delta) {\n\t\t\t\t\tresult.push(projection._model.getLine(0, includeDelimiter));\n\t\t\t\t\treturn result.join(\"\");\n\t\t\t\t}\n\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\toffset = projection.end;\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\tvar end = model.getLineEnd(lineIndex - delta, includeDelimiter);\n\t\t\tif (offset < end) {\n\t\t\t\tresult.push(model.getText(offset, end));\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineAtOffset\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, lineDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\tvar projectionOffset = offset - (projection.start + delta);\n\t\t\t\t\tlineDelta += projection._model.getLineAtOffset(projectionOffset);\n\t\t\t\t\tdelta += projectionOffset;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlineDelta += projection._model.getLineCount() - 1 - projection._lineCount;\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn model.getLineAtOffset(offset - delta) + lineDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineCount\n\t\t */\n\t\tgetLineCount: function() {\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar count = model.getLineCount();\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tcount += projection._model.getLineCount() - 1 - projection._lineCount;\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineDelimiter\n\t\t */\n\t\tgetLineDelimiter: function() {\n\t\t\treturn this._model.getLineDelimiter();\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineEnd\n\t\t */\n\t\tgetLineEnd: function(lineIndex, includeDelimiter) {\n\t\t\tif (lineIndex < 0) { return -1; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, offsetDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection._lineIndex > lineIndex - delta) { break; }\n\t\t\t\tvar lineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount > lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\treturn projection._model.getLineEnd (projectionLineIndex, includeDelimiter) + projection.start + offsetDelta;\n\t\t\t\t}\n\t\t\t\toffsetDelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\treturn model.getLineEnd(lineIndex - delta, includeDelimiter) + offsetDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineStart\n\t\t */\n\t\tgetLineStart: function(lineIndex) {\n\t\t\tif (lineIndex < 0) { return -1; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, offsetDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection._lineIndex >= lineIndex - delta) { break; }\n\t\t\t\tvar lineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount >= lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\treturn projection._model.getLineStart (projectionLineIndex) + projection.start + offsetDelta;\n\t\t\t\t}\n\t\t\t\toffsetDelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\treturn model.getLineStart(lineIndex - delta) + offsetDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, result = [], i, projection, charCount;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start > start - delta) { break; }\n\t\t\t\tcharCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > start - delta) {\n\t\t\t\t\tif (end !== undefined && projection.start + charCount > end - delta) {\n\t\t\t\t\t\treturn projection._model.getText(start - (projection.start + delta), end - (projection.start + delta));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.push(projection._model.getText(start - (projection.start + delta)));\n\t\t\t\t\t\tstart = projection.end + delta + charCount - (projection.end - projection.start);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\tvar offset = start - delta;\n\t\t\tif (end !== undefined) {\n\t\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > end - delta) { break; }\n\t\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\t\tcharCount = projection._model.getCharCount();\n\t\t\t\t\tif (projection.start + charCount > end - delta) {\n\t\t\t\t\t\tresult.push(projection._model.getText(0, end - (projection.start + delta)));\n\t\t\t\t\t\treturn result.join(\"\");\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\t\toffset = projection.end;\n\t\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\tresult.push(model.getText(offset, end - delta));\n\t\t\t} else {\n\t\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\t\toffset = projection.end;\n\t\t\t\t}\n\t\t\t\tresult.push(model.getText(offset));\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t},\n\t\t/** @ignore */\n\t\t_onChanged: function(modelChangedEvent) {\n\t\t\tvar change = this._change;\n\t\t\tvar start = change.baseStart, end = change.baseEnd, i;\n\t\t\tvar projection, projections = this._projections;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.end > start) { break; }\n\t\t\t}\n\t\t\tvar rangeStart = i;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start >= end) { break; }\n\t\t\t}\n\t\t\tvar rangeEnd = i;\n\t\t\tvar model = this._model;\n\t\t\tvar changeCount = change.baseText.length - (end - start);\n\t\t\tfor (i = rangeEnd; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tprojection.start += changeCount;\n\t\t\t\tprojection.end += changeCount;\n\t\t\t\tprojection._lineIndex = model.getLineAtOffset(projection.start);\n\t\t\t}\n\t\t\tvar removed = projections.splice(rangeStart, rangeEnd - rangeStart);\n\t\t\tfor (i = 0; i < removed.length; i++) {\n\t\t\t\tif (removed[i].annotation) {\n\t\t\t\t\tremoved[i].annotation._expand();\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar modelChangedEvent1 = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: change.start,\n\t\t\t\tremovedCharCount: change.removedCharCount,\n\t\t\t\taddedCharCount: change.addedCharCount,\n\t\t\t\tremovedLineCount: change.removedLineCount,\n\t\t\t\taddedLineCount: change.addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent1);\n\t\t\tthis._change = undefined;\n\t\t},\n\t\t_onChanging: function(modelChangingEvent) {\n\t\t\tvar hasChange = !!this._change;\n\t\t\tvar change = this._change || {};\n\t\t\tvar start = modelChangingEvent.start, end = start + modelChangingEvent.removedCharCount;\n\t\t\tchange.baseStart = start;\n\t\t\tchange.baseEnd = end;\n\t\t\tchange.baseText = modelChangingEvent.text;\n\t\t\tchange.addedLineCount = modelChangingEvent.addedLineCount;\n\t\t\tif (!hasChange) {\n\t\t\t\tthis._change = change;\n\t\t\t\tchange.text = modelChangingEvent.text;\n\t\t\t\tvar projections = this._projections, delta, i, projection;\n\t\t\t\tfunction mapOffset(offset) {\n\t\t\t\t\tfor (i = 0, delta = 0; i < projections.length; i++) {\n\t\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\t\tif (projection.start > offset) { break; }\n\t\t\t\t\t\tif (projection.end > offset) { return -1; }\n\t\t\t\t\t\tdelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\t\t}\n\t\t\t\t\treturn offset + delta;\n\t\t\t\t}\n\t\t\t\tchange.start = mapOffset(start);\n\t\t\t\tif (change.start === -1) {\n\t\t\t\t\tchange.text = this._model.getText(projection.start, start) + change.text;\n\t\t\t\t\tchange.addedLineCount += this._model.getLineAtOffset(start) - this._model.getLineAtOffset(projection.start);\n\t\t\t\t\tchange.start = projection.start + delta;\n\t\t\t\t}\n\t\t\t\tchange.end = mapOffset(end);\n\t\t\t\tif (change.end === -1) {\n\t\t\t\t\tchange.text += this._model.getText(end, projection.end);\n\t\t\t\t\tchange.addedLineCount += this._model.getLineAtOffset(projection.end) - this._model.getLineAtOffset(end);\n\t\t\t\t\tchange.end = projection.start + delta;\n\t\t\t\t}\n\t\t\t}\n\t\t\tchange.addedCharCount = change.text.length;\n\t\t\tchange.removedCharCount = change.end - change.start;\n\t\t\tchange.removedLineCount = this.getLineAtOffset(change.end) - this.getLineAtOffset(change.start);\n\t\t\tvar modelChangingEvent1 = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: change.text,\n\t\t\t\tstart: change.start,\n\t\t\t\tremovedCharCount: change.removedCharCount,\n\t\t\t\taddedCharCount: change.addedCharCount,\n\t\t\t\tremovedLineCount: change.removedLineCount,\n\t\t\t\taddedLineCount: change.addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent1);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#onChanging\n\t\t */\n\t\tonChanging: function(modelChangingEvent) {\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#onChanged\n\t\t */\n\t\tonChanged: function(modelChangedEvent) {\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#setLineDelimiter\n\t\t */\n\t\tsetLineDelimiter: function(lineDelimiter) {\n\t\t\tthis._model.setLineDelimiter(lineDelimiter);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#setText\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tthis._change = {\n\t\t\t\ttext: text || \"\",\n\t\t\t\tstart: start || 0,\n\t\t\t\tend: end === undefined ? this.getCharCount() : end\n\t\t\t};\n\t\t\tvar projections = this._projections, delta, i, projection;\n\t\t\tfunction mapOffset(offset) {\n\t\t\t\tfor (i = 0, delta = 0; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\treturn offset - delta;\n\t\t\t}\n\t\t\tvar startProjection, endProjection;\n\t\t\tvar mapStart = mapOffset(this._change.start);\n\t\t\tif (mapStart === -1) {\n\t\t\t\tstartProjection = {\n\t\t\t\t\tprojection: projection,\n\t\t\t\t\tstart: this._change.start - (projection.start + delta)\n\t\t\t\t};\n\t\t\t\tmapStart = projection.end;\n\t\t\t}\n\t\t\tvar mapEnd = mapOffset(this._change.end);\n\t\t\tif (mapEnd === -1) {\n\t\t\t\tendProjection = {\n\t\t\t\t\tprojection: projection,\n\t\t\t\t\tend: this._change.end - (projection.start + delta)\n\t\t\t\t};\n\t\t\t\tmapEnd = projection.start;\n\t\t\t}\n\t\t\tif (startProjection && endProjection && startProjection.projection === endProjection.projection) {\n\t\t\t\t//TODO events - special case - change is completely inside of a projection\n\t\t\t\tprojection._model.setText(this._change.text, startProjection.start, endProjection.end);\n\t\t\t} else {\n\t\t\t\tthis._model.setText(this._change.text, mapStart, mapEnd);\n\t\t\t\tif (startProjection) {\n\t\t\t\t\tprojection = startProjection.projection;\n\t\t\t\t\tprojection._model.setText(\"\", startProjection.start);\n\t\t\t\t}\t\t\n\t\t\t\tif (endProjection) {\n\t\t\t\t\tprojection = endProjection.projection;\n\t\t\t\t\tprojection._model.setText(\"\", 0, endProjection.end);\n\t\t\t\t\tprojection.start = projection.end;\n\t\t\t\t\tprojection._lineCount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._change = undefined;\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(ProjectionTextModel.prototype);\n\n\treturn {ProjectionTextModel: ProjectionTextModel};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd, node*/\n(function(root, factory) { // UMD\n    if (typeof define === \"function\" && define.amd) { //$NON-NLS-0$\n        define('orion/Deferred',factory);\n    } else if (typeof exports === \"object\") { //$NON-NLS-0$\n        module.exports = factory();\n    } else {\n        root.orion = root.orion || {};\n        root.orion.Deferred = factory();\n    }\n}(this, function() {\n    var queue = [],\n        running = false;\n\n    function run() {\n        var fn;\n        while ((fn = queue.shift())) {\n            fn();\n        }\n        running = false;\n    }\n\n\tvar runAsync = (function() {\n\t\tif (typeof process !== \"undefined\" && typeof process.nextTick === \"function\") {\n\t\t\tvar nextTick = process.nextTick;\n    \t\treturn function() {\n    \t\t\tnextTick(run);\n    \t\t};\n\t\t} else if (typeof MutationObserver === \"function\") {\n\t\t\tvar div = document.createElement(\"div\");\n\t\t\tvar observer = new MutationObserver(run);\n\t\t\tobserver.observe(div, {\n            \tattributes: true\n        \t});\n        \treturn function() {\n        \t\tdiv.setAttribute(\"class\", \"_tick\");\n        \t};\n\t\t}\n\t\treturn function() {\n\t\t\tsetTimeout(run, 0);\n\t\t};\n\t})();\n\n    function enqueue(fn) {\n        queue.push(fn);\n        if (!running) {\n            running = true;\n            runAsync();\n        }\n    }\n\n    function noReturn(fn) {\n        return function(result) {\n            fn(result);\n        };\n    }\n    \n    function settleDeferred(fn, result, deferred) {\n    \ttry {\n    \t\tvar listenerResult = fn(result);\n    \t\tvar listenerThen = listenerResult && (typeof listenerResult === \"object\" || typeof listenerResult === \"function\") && listenerResult.then;\n    \t\tif (typeof listenerThen === \"function\") {\n    \t\t\tif (listenerResult === deferred.promise) {\n    \t\t\t\tdeferred.reject(new TypeError());\n    \t\t\t} else {\n    \t\t\t\tvar listenerResultCancel = listenerResult.cancel;\n    \t\t\t\tif (typeof listenerResultCancel === \"function\") {\n    \t\t\t\t\tdeferred._parentCancel = listenerResultCancel.bind(listenerResult);\n    \t\t\t\t} else {\n    \t\t\t\t\tdelete deferred._parentCancel;\n    \t\t\t\t}\n    \t\t\t\tlistenerThen.call(listenerResult, noReturn(deferred.resolve), noReturn(deferred.reject), noReturn(deferred.progress));\n    \t\t\t}\n    \t\t} else {\n    \t\t\tdeferred.resolve(listenerResult);\n    \t\t}\n    \t} catch (e) {\n    \t\tdeferred.reject(e);\n    \t}\n    }\n\n\n    /**\n     * @name orion.Promise\n     * @class Interface representing an eventual value.\n     * @description Promise is an interface that represents an eventual value returned from the single completion of an operation.\n     *\n     * <p>For a concrete class that implements Promise and provides additional API, see {@link orion.Deferred}.</p>\n     * @see orion.Deferred\n     * @see orion.Deferred#promise\n     */\n    /**\n     * @name then\n     * @function\n     * @memberOf orion.Promise.prototype\n     * @description Adds handlers to be called on fulfillment or progress of this promise.\n     * @param {Function} [onResolve] Called when this promise is resolved.\n     * @param {Function} [onReject] Called when this promise is rejected.\n     * @param {Function} [onProgress] May be called to report progress events on this promise.\n     * @returns {orion.Promise} A new promise that is fulfilled when the given <code>onResolve</code> or <code>onReject</code>\n     * callback is finished. The callback's return value gives the fulfillment value of the returned promise.\n     */\n    /**\n     * Cancels this promise.\n     * @name cancel\n     * @function\n     * @memberOf orion.Promise.prototype\n     * @param {Object} reason The reason for canceling this promise.\n     * @param {Boolean} [strict]\n     */\n\n    /**\n     * @name orion.Deferred\n     * @borrows orion.Promise#then as #then\n     * @borrows orion.Promise#cancel as #cancel\n     * @class Provides abstraction over asynchronous operations.\n     * @description Deferred provides abstraction over asynchronous operations.\n     *\n     * <p>Because Deferred implements the {@link orion.Promise} interface, a Deferred may be used anywhere a Promise is called for.\n     * However, in most such cases it is recommended to use the Deferred's {@link #promise} field instead, which exposes a \n     * simplified, minimally <a href=\"https://github.com/promises-aplus/promises-spec\">Promises/A+</a>-compliant interface to callers.</p>\n     */\n    function Deferred() {\n        var result, state, listeners = [],\n            _this = this;\n\n        function notify() {\n            var listener;\n            while ((listener = listeners.shift())) {\n                var deferred = listener.deferred;\n                var methodName = state === \"fulfilled\" ? \"resolve\" : \"reject\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n                var fn = listener[methodName];\n                if (typeof fn === \"function\") { //$NON-NLS-0$\n                \tsettleDeferred(fn, result, deferred);\n                } else {\n                    deferred[methodName](result);\n                }\n            }\n        }\n\n        function _reject(error) {\n            delete _this._parentCancel;\n            state = \"rejected\";\n            result = error;\n            if (listeners.length) {\n                enqueue(notify);\n            }\n        }\n\n        function _resolve(value) {\n            function once(fn) {\n                return function(result) {\n                    if (!state || state === \"assumed\") {\n                          fn(result);\n                    }\n                };\n            }\n            delete _this._parentCancel;\n            try {\n                var valueThen = value && (typeof value === \"object\" || typeof value === \"function\") && value.then;\n                if (typeof valueThen === \"function\") {\n                    if (value === _this) {\n                        _reject(new TypeError());\n                    } else {\n                        state = \"assumed\";\n                        var valueCancel = value && value.cancel;\n                        if (typeof valueCancel !== \"function\") {\n                            var deferred = new Deferred();\n                            value = deferred.promise;\n                            try {\n                                valueThen(deferred.resolve, deferred.reject, deferred.progress);\n                            } catch (thenError) {\n                                deferred.reject(thenError);\n                            }\n                            valueCancel = value.cancel;\n                            valueThen = value.then;\n                        }\n                        result = value;\n                        valueThen.call(value, once(_resolve), once(_reject));\n                        _this._parentCancel = valueCancel.bind(value);\n                    }\n                } else {\n                    state = \"fulfilled\";\n                    result = value;\n                    if (listeners.length) {\n                        enqueue(notify);\n                    }\n                }\n            } catch (error) {\n                once(_reject)(error);\n            }\n        }\n\n        function cancel() {\n            var parentCancel = _this._parentCancel;\n            if (parentCancel) {\n                delete _this._parentCancel;\n                parentCancel();\n            } else if (!state) {\n                var cancelError = new Error(\"Cancel\");\n                cancelError.name = \"Cancel\";\n                _reject(cancelError);\n            }\n        }\n\n\n        /**\n         * Resolves this Deferred.\n         * @name resolve\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} value\n         * @returns {orion.Promise}\n         */\n        this.resolve = function(value) {\n            if (!state) {\n                _resolve(value);\n            }\n            return _this;\n        };\n\n        /**\n         * Rejects this Deferred.\n         * @name reject\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} error\n         * @param {Boolean} [strict]\n         * @returns {orion.Promise}\n         */\n        this.reject = function(error) {\n            if (!state) {\n                _reject(error);\n            }\n            return _this;\n        };\n\n        /**\n         * Notifies listeners of progress on this Deferred.\n         * @name progress\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} update The progress update.\n         * @returns {orion.Promise}\n         */\n        this.progress = function(update) {\n            if (!state) {\n                listeners.forEach(function(listener) {\n                    if (listener.progress) {\n                        try {\n                            listener.progress(update);\n                        } catch (ignore) {\n                            // ignore\n                        }\n                    }\n                });\n            }\n            return _this.promise;\n        };\n\n        this.cancel = function() {\n            if (_this._parentCancel) {\n                setTimeout(cancel, 0);\n            } else {\n                cancel();\n            }\n            return _this;\n        };\n\n        // Note: \"then\" ALWAYS returns before having onResolve or onReject called as per http://promises-aplus.github.com/promises-spec/\n        this.then = function(onFulfill, onReject, onProgress) {\n        \tvar deferred = new Deferred();\n            deferred._parentCancel = _this.promise.cancel;\n            listeners.push({\n                resolve: onFulfill,\n                reject: onReject,\n                progress: onProgress,\n                deferred: deferred\n            });\n            if (state === \"fulfilled\" || state === \"rejected\") {\n                enqueue(notify);\n            }\n            return deferred.promise;\n        };\n\n        /**\n         * The promise exposed by this Deferred.\n         * @name promise\n         * @field\n         * @memberOf orion.Deferred.prototype\n         * @type orion.Promise\n         */\n        this.promise = {\n            then: _this.then,\n            cancel: _this.cancel\n        };\n    }\n\n    /**\n     * Returns a promise that represents the outcome of all the input promises.\n     * <p>When <code>all</code> is called with a single parameter, the returned promise has <dfn>eager</dfn> semantics,\n     * meaning that if any input promise rejects, the returned promise immediately rejects, without waiting for the rest of the\n     * input promises to fulfill.</p>\n     *\n     * To obtain <dfn>lazy</dfn> semantics (meaning the returned promise waits for every input promise to fulfill), pass the\n     * optional parameter <code>optOnError</code>.\n     * @name all\n     * @function\n     * @memberOf orion.Deferred\n     * @static\n     * @param {orion.Promise[]} promises The input promises.\n     * @param {Function} [optOnError] Handles a rejected input promise. <code>optOnError</code> is invoked for every rejected\n     * input promise, and is passed the reason the input promise was rejected. <p><code>optOnError</code> can return a value, which\n     * allows it to act as a transformer: the return value serves as the final fulfillment value of the rejected promise in the \n     * results array generated by <code>all</code>.\n     * @returns {orion.Promise} A new promise. The returned promise is generally fulfilled to an <code>Array</code> whose elements\n     * give the fulfillment values of the input promises. <p>However, if an input promise rejects and eager semantics is used, the \n     * returned promise will instead be fulfilled to a single error value.</p>\n     */\n    Deferred.all = function(promises, optOnError) {\n        var count = promises.length,\n            result = [],\n            rejected = false,\n            deferred = new Deferred();\n\n        deferred.then(undefined, function() {\n            rejected = true;\n            promises.forEach(function(promise) {\n                if (promise.cancel) {\n                    promise.cancel();\n                }\n            });\n        });\n\n        function onResolve(i, value) {\n            if (!rejected) {\n                result[i] = value;\n                if (--count === 0) {\n                    deferred.resolve(result);\n                }\n            }\n        }\n\n        function onReject(i, error) {\n            if (!rejected) {\n                if (optOnError) {\n                    try {\n                        onResolve(i, optOnError(error));\n                        return;\n                    } catch (e) {\n                        error = e;\n                    }\n                }\n                deferred.reject(error);\n            }\n        }\n\n        if (count === 0) {\n            deferred.resolve(result);\n        } else {\n            promises.forEach(function(promise, i) {\n                promise.then(onResolve.bind(undefined, i), onReject.bind(undefined, i));\n            });\n        }\n        return deferred.promise;\n    };\n\n    /**\n     * Applies callbacks to a promise or to a regular object.\n     * @name when\n     * @function\n     * @memberOf orion.Deferred\n     * @static\n     * @param {Object|orion.Promise} value Either a {@link orion.Promise}, or a normal value.\n     * @param {Function} onResolve Called when the <code>value</code> promise is resolved. If <code>value</code> is not a promise,\n     * this function is called immediately.\n     * @param {Function} onReject Called when the <code>value</code> promise is rejected. If <code>value</code> is not a promise, \n     * this function is never called.\n     * @param {Function} onProgress Called when the <code>value</code> promise provides a progress update. If <code>value</code> is\n     * not a promise, this function is never called.\n     * @returns {orion.Promise} A new promise.\n     */\n    Deferred.when = function(value, onResolve, onReject, onProgress) {\n        var promise, deferred;\n        if (value && typeof value.then === \"function\") { //$NON-NLS-0$\n            promise = value;\n        } else {\n            deferred = new Deferred();\n            deferred.resolve(value);\n            promise = deferred.promise;\n        }\n        return promise.then(onResolve, onReject, onProgress);\n    };\n\n    return Deferred;\n}));\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2012 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n * \r\n * Contributors: IBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine('orion/webui/littlelib',[\"orion/util\"], function(util) {\r\n\t/**\r\n\t * @name orion.webui.littlelib\r\n\t * @class A small library of DOM and UI helpers.\r\n\t */\r\n\r\n\t/**\r\n\t * Alias for <code>node.querySelector()</code>.\r\n\t * @name orion.webui.littlelib.$\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {Element}\r\n\t */\r\n\tfunction $(selector, node) {\r\n\t\tif (!node) {\r\n\t\t\tnode = document;\r\n\t\t}\r\n\t\treturn node.querySelector(selector);\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for <code>node.querySelectorAll()</code>.\r\n\t * @name orion.webui.littlelib.$$\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {NodeList}\r\n\t */\r\n\tfunction $$(selector, node) {\r\n\t\tif (!node) {\r\n\t\t\tnode = document;\r\n\t\t}\r\n\t\treturn node.querySelectorAll(selector);\r\n\t}\r\n\r\n\t/**\r\n\t * Identical to {@link orion.webui.littlelib.$$}, but returns an Array instead of a NodeList.\r\n\t * @name orion.webui.littlelib.$$array\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {Element[]}\r\n\t */\r\n\tfunction $$array(selector, node) {\r\n\t\treturn Array.prototype.slice.call($$(selector,node));\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for <code>document.getElementById</code>, but returns the input unmodified when passed a Node (or other non-string).\r\n\t * @function\r\n\t * @param {String|Element} elementOrId\r\n\t * @returns {Element}\r\n\t */\r\n\tfunction node(either) {\r\n\t\tvar theNode = either;\r\n\t\tif (typeof(either) === \"string\") { //$NON-NLS-0$\r\n\t\t\ttheNode = document.getElementById(either);\r\n\t\t}\t\r\n\t\treturn theNode;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns whether <code>child</code> is a descendant of <code>parent</code> in the DOM order.\r\n\t * @function\r\n\t * @param {Node} parent\r\n\t * @param {Node} child\r\n\t * @returns {Boolean}\r\n\t */\r\n\tfunction contains(parent, child) {\r\n\t\tif (!parent || !child) { return false; }\r\n\t\tif (parent === child) { return true; }\r\n\t\tvar compare = parent.compareDocumentPosition(child);  // useful to break out for debugging\r\n\t\treturn Boolean(compare & 16);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the bounds of a node. The returned coordinates are absolute (not relative to the viewport).\r\n\t * @function\r\n\t * @param {Node} node\r\n\t * @returns {Object}\r\n\t */\r\n\tfunction bounds(node) {\r\n\t\tvar clientRect = node.getBoundingClientRect();\r\n\t\tvar scrollLeft = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\r\n\t\tvar scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n\t\treturn { \r\n\t\t\tleft: clientRect.left + scrollLeft,\r\n\t\t\ttop: clientRect.top + scrollTop,\r\n\t\t\twidth: clientRect.width,\r\n\t\t\theight: clientRect.height\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all children of the given node.\r\n\t * @name orion.webui.littlelib.empty\r\n\t * @function\r\n\t * @static\r\n\t * @param {Node} node\r\n\t */\r\n\tfunction empty(node) {\r\n\t\twhile (node.hasChildNodes()) {\r\n\t\t\tvar child = node.firstChild;\r\n\t\t\tnode.removeChild(child);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _getTabIndex(node) {\r\n\t\tvar result = node.tabIndex;\r\n\t\tif (result === 0 && util.isIE) {\r\n\t\t\t/*\r\n\t\t\t * The default value of tabIndex is 0 on IE, even for elements that are not focusable\r\n\t\t\t * by default (http://msdn.microsoft.com/en-us/library/ie/ms534654(v=vs.85).aspx).\r\n\t\t\t * Handle this browser difference by treating this value as -1 if the node is a type\r\n\t\t\t * that is not focusable by default according to the MS doc and has not had this\r\n\t\t\t * attribute value explicitly set on it.\r\n\t\t\t */\r\n\t\t\tvar focusableElements = {\r\n\t\t\t\ta: true,\r\n\t\t\t\tbody: true,\r\n\t\t\t\tbutton: true,\r\n\t\t\t\tframe: true,\r\n\t\t\t\tiframe: true,\r\n\t\t\t\timg: true,\r\n\t\t\t\tinput: true,\r\n\t\t\t\tisindex: true,\r\n\t\t\t\tobject: true,\r\n\t\t\t\tselect: true,\r\n\t\t\t\ttextarea: true\r\n\t\t\t};\r\n\t\t\tif (!focusableElements[node.nodeName.toLowerCase()] && !node.attributes.tabIndex) {\r\n\t\t\t\tresult = -1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/* \r\n\t * Inspired by http://brianwhitmer.blogspot.com/2009/05/jquery-ui-tabbable-what.html\r\n\t */\r\n\tfunction firstTabbable(node) {\r\n\t\tif (_getTabIndex(node) >= 0) {\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t\t\tvar result = firstTabbable(node.childNodes[i]);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tfunction lastTabbable(node) {\r\n\t\tif (_getTabIndex(node) >= 0) {\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i=node.childNodes.length - 1; i>=0; i--) {\r\n\t\t\t\tvar result = lastTabbable(node.childNodes[i]);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar variableRegEx = /\\$\\{([^\\}]+)\\}/;\r\n\t// Internal helper\r\n\tfunction processNodes(node, replace) {\r\n\t\tif (node.nodeType === 3) { // TEXT_NODE\r\n\t\t\tvar matches = variableRegEx.exec(node.nodeValue);\r\n\t\t\tif (matches && matches.length > 1) {\r\n\t\t\t\treplace(node, matches);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t\t\tprocessNodes(node.childNodes[i], replace);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\n\t * @name pixelValueOf\n\t * @description Returns the pixel value of the given CSS attribute\n\t * @param node The element whose style is to be checked\n\t * @param attrName The name of the attribute to check. Use the literal CSS name\r\n\t * (i.e. 'padding-left' rather than 'paddingLeft').\n\t * @returns returns The value (in pixels) of the attribute. If the value cannot be parsed to an int the zero is returned\n\t */\n\tfunction pixelValueOf(node, attrName) {\r\n\t\tif (!node || !attrName) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n\t\tvar doc = node.ownerDocument;\r\n\t\tvar win =  doc.defaultView || doc.parentWindow;\r\n\t\tif (win.getComputedStyle) {\r\n\t\t\tvar style = win.getComputedStyle(node, null);\r\n\t\t\tvar value = style.getPropertyValue(attrName);\r\n\t\t\t// Ensure that value ends in \"px\"\r\n\t\t\tif (value.length > 2 && value.indexOf(\"px\", value.length - 2) !== -1) {\r\n\t\t\t\tvalue = value.slice(0,-2);\r\n\t\t\t\tvar intVal = parseInt(value,10);\r\n\t\t\t\tif (intVal !== intVal) {\r\n\t\t\t\t\treturn 0;  // value was NaN\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn intVal;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Performs substitution of strings into textContent within the given node and its descendants. An occurrence of <code>${n}</code>\r\n\t * in text content will be replaced with the string <code>messages[n]</code>.\r\n\t * <p>This function is recommended for binding placeholder text in template-created DOM elements to actual display strings.</p>\r\n\t * @name orion.webui.littlelib.processTextNodes\r\n\t * @function\r\n\t * @param {Node} node The node to perform replacement under.\r\n\t * @param {String[]} messages The replacement strings.\r\n\t */\r\n\tfunction processTextNodes(node, messages) {\r\n\t\tprocessNodes(node, function(targetNode, matches) {\r\n\t\t\tvar replaceText = messages[matches[1]] || matches[1];\r\n\t\t\ttargetNode.parentNode.replaceChild(document.createTextNode(replaceText), targetNode);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Performs substitution of DOM nodes into textContent within the given node and its descendants. An occurrence of <code>${n}</code>\r\n\t * in text content will be replaced by the DOM node <code>replaceNodes[n]</code>.\r\n\t * <p>This function is recommended for performing rich-text replacement within a localized string. The use of actual DOM nodes\r\n\t * avoids the need for embedded HTML in strings.</p>\r\n\t * @name orion.webui.littlelib.processDOMNodes\r\n\t * @function\r\n\t * @param {Node} node The node to perform replacement under.\r\n\t * @param {Node[]} replaceNodes The replacement nodes.\r\n\t */\r\n\tfunction processDOMNodes(node, replaceNodes) {\r\n\t\tprocessNodes(node, function(targetNode, matches) {\r\n\t\t\tvar replaceNode = replaceNodes[matches[1]];\r\n\t\t\tif (replaceNode) {\r\n\t\t\t\tvar range = document.createRange();\r\n\t\t\t\tvar start = matches.index;\r\n\t\t\t\trange.setStart(targetNode, start);\r\n\t\t\t\trange.setEnd(targetNode, start + matches[0].length);\r\n\t\t\t\trange.deleteContents();\r\n\t\t\t\trange.insertNode(replaceNode);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Adds auto-dismiss functionality to the document. When a click event occurs whose <code>target</code> is not a descendant of\r\n\t * one of the <code>excludeNodes</code>, the <code>dismissFunction</code> is invoked.\r\n\t * @name orion.webui.littlelib.addAutoDismiss\r\n\t * @function\r\n\t * @static\r\n\t * @param {Node[]} excludeNodes Clicks targeting any descendant of these nodes will not trigger the dismissFunction.\r\n\t * @param {Function} dismissFunction The dismiss handler.\r\n\t */\r\n\t\r\n\tvar autoDismissNodes = null;\r\n\r\n\tfunction addAutoDismiss(excludeNodes, dismissFunction) {\r\n\t\t// auto dismissal.  Click anywhere else means close.\r\n\t\tfunction onclick(event) {\r\n\t\t\tautoDismissNodes.forEach(function(autoDismissNode) {\r\n\t\t\t\tvar excludeNodeInDocument = false;\r\n\t\t\t\tvar excluded = autoDismissNode.excludeNodes.some(function(excludeNode) {\r\n\t\t\t\t\tif(document.body.contains(excludeNode)) {\r\n\t\t\t\t\t\texcludeNodeInDocument = true;\r\n\t\t\t\t\t\treturn excludeNode.contains(event.target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\tif (excludeNodeInDocument && !excluded) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tautoDismissNode.dismiss(event);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tif (typeof console !== \"undefined\" && console) { //$NON-NLS-0$\r\n\t\t\t\t\t\t\tconsole.error(e && e.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tautoDismissNodes = autoDismissNodes.filter(function(autoDismissNode) {\r\n\t\t\t\t// true if at least one excludeNode is in document.body\r\n\t\t\t\treturn autoDismissNode.excludeNodes.some(function(excludeNode) {\r\n\t\t\t\t\treturn document.body.contains(excludeNode);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Hook listener only once\r\n\t\tif (autoDismissNodes === null) {\r\n\t\t\tautoDismissNodes = [];\r\n\t\t\tdocument.addEventListener(\"click\", onclick, true); //$NON-NLS-0$\r\n\t\t\tif (util.isIOS) {\r\n\t\t\t\tdocument.addEventListener(\"touchend\", function(event){\r\n\t\t\t\t\tfunction unhook(){\r\n\t\t\t\t\t\tevent.target.removeEventListener(\"click\", unhook);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (event.touches.length === 0) {\r\n\t\t\t\t\t\t// we need a click eventlistener on the target to have ios really trigger a click\r\n\t\t\t\t\t\tevent.target.addEventListener(\"click\", unhook);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tautoDismissNodes.push({excludeNodes: excludeNodes, dismiss: dismissFunction});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes all auto-dismiss nodes which trigger the specified dismiss function.\r\n\t * \r\n\t * @name orion.webui.littlelib.removeAutoDismiss\r\n\t * @function\r\n\t * @static\r\n\t * @param {Function} dismissFunction The dismiss function to look for.\r\n\t */\r\n\tfunction removeAutoDismiss(dismissFunction) {\r\n\t\tautoDismissNodes = autoDismissNodes.filter(function(autoDismissNode) {\r\n\t\t\treturn dismissFunction !== autoDismissNode.dismiss;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns the parent of the node that has the vertical scroll bar.\r\n\t * \r\n\t * @name orion.webui.littlelib.getOffsetParent\r\n\t * @function\r\n\t * @static\r\n\t * @param {Element} node The node to lookup the offset parent\r\n\t */\r\n\tfunction getOffsetParent(node) {\r\n\t\tvar offsetParent = node.parentNode, documentElement = document.documentElement;\r\n\t\twhile (offsetParent && offsetParent !== documentElement) {\r\n\t\t\tvar style = window.getComputedStyle(offsetParent, null);\r\n\t\t\tif (!style) { break; }\r\n\t\t\tvar overflow = style.getPropertyValue(\"overflow-y\"); //$NON-NLS-0$\r\n\t\t\tif (overflow === \"auto\" || overflow === \"scroll\") { break; } //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\toffsetParent = offsetParent.parentNode;\r\n\t\t}\r\n\t\treturn offsetParent;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Cancels the default behavior of an event and stops its propagation.\r\n\t * @name orion.webui.littlelib.stop\r\n\t * @function\r\n\t * @static\r\n\t * @param {Event} event\r\n\t */\r\n\tfunction stop(event) {\r\n\t\tif (window.document.all) { \r\n\t\t\tevent.keyCode = 0;\r\n\t\t}\r\n\t\tif (event.preventDefault) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction setFramesEnabled(enable) {\r\n\t\tvar frames = document.getElementsByTagName(\"iframe\"); //$NON-NLS-0$\r\n\t\tfor (var i = 0; i<frames.length; i++) {\r\n\t\t\tframes[i].parentNode.style.pointerEvents = enable ? \"\" : \"none\"; //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Holds useful <code>keyCode</code> values.\r\n\t * @name orion.webui.littlelib.KEY\r\n\t * @static\r\n\t */\r\n\tvar KEY = {\r\n\t\tBKSPC: 8,\r\n\t\tTAB: 9,\r\n\t\tENTER: 13,\r\n\t\tSHIFT: 16,\r\n\t\tCONTROL: 17,\r\n\t\tALT: 18,\r\n\t\tESCAPE: 27,\r\n\t\tSPACE: 32,\r\n\t\tPAGEUP: 33,\r\n\t\tPAGEDOWN: 34,\r\n\t\tEND: 35,\r\n\t\tHOME: 36,\r\n\t\tLEFT: 37,\r\n\t\tUP: 38,\r\n\t\tRIGHT: 39,\r\n\t\tDOWN: 40,\r\n\t\tINSERT: 45,\r\n\t\tDEL: 46,\r\n\t\tCOMMAND: 991\r\n\t};\r\n\t/**\r\n\t * Maps a <code>keyCode</code> to <tt>KEY</tt> name. This is the inverse of {@link orion.webui.littlelib.KEY}.\r\n\t * @private\r\n\t */\r\n\tvar KEY_CODE = Object.create(null);\r\n\tObject.keys(KEY).forEach(function(name) {\r\n\t\tKEY_CODE[KEY[name]] = name;\r\n\t});\r\n\r\n\t/**\r\n\t * @param {Number} keyCode\r\n\t * @returns The name of the <code>lib.KEY</code> entry for keyCode, or null.\r\n\t */\r\n\tfunction keyName(keyCode) {\r\n\t\treturn KEY_CODE[keyCode] || null;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates DOM nodes from the specified template string.\r\n\t * \r\n\t * @param {String} templateString \tA string containing the HTML template to use\r\n\t * @param {Node} parentNode \t\tOptional. The parent node to insert the new nodes into. \r\n\t * \t\t\t\t\t\t\t\t\tThe parent's contents will be completely replaced.\r\n\t * @returns If the template string contains a single node or a wrapper node which\r\n\t * \t\t\twraps all the other nodes that single DOM node will be returned. \r\n\t * \t\t\tOtherwise if the template string contains multiple top-level nodes an\r\n\t * \t\t\t{HTMLCollection} object containing all the top-level nodes will be returned.\r\n\t */\r\n\tfunction createNodes(templateString, parentNode) {\r\n\t\tvar parent = parentNode;\r\n\t\tvar newNodes = null;\r\n\t\t\r\n\t\tif (undefined === parent) {\r\n\t\t\tparent = document.createElement(\"div\"); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\tparent.innerHTML = templateString;\t\r\n\t\tif (parent.children.length > 1) {\r\n\t\t\tnewNodes = parent.children;\r\n\t\t} else {\r\n\t\t\tnewNodes = parent.firstChild;\r\n\t\t}\r\n\t\t\r\n\t\treturn newNodes;\r\n\t}\r\n\r\n\t//return module exports\r\n\treturn {\r\n\t\t$: $,\r\n\t\t$$: $$,\r\n\t\t$$array: $$array,\r\n\t\tnode: node,\r\n\t\tcontains: contains,\r\n\t\tbounds: bounds,\r\n\t\tempty: empty,\r\n\t\tfirstTabbable: firstTabbable,\r\n\t\tlastTabbable: lastTabbable,\r\n\t\tpixelValueOf: pixelValueOf,\r\n\t\tstop: stop,\r\n\t\tprocessTextNodes: processTextNodes,\r\n\t\tprocessDOMNodes: processDOMNodes,\r\n\t\taddAutoDismiss: addAutoDismiss,\r\n\t\tsetFramesEnabled: setFramesEnabled,\r\n\t\tgetOffsetParent: getOffsetParent,\r\n\t\tremoveAutoDismiss: removeAutoDismiss,\r\n\t\tkeyName: keyName,\r\n\t\tKEY: KEY,\r\n\t\tcreateNodes: createNodes\r\n\t};\r\n});\r\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd, node*/\ndefine(\"orion/editor/tooltip\", [\n\t'i18n!orion/editor/nls/messages',\n\t'orion/editor/textView',\n\t'orion/editor/projectionTextModel',\n\t'orion/Deferred',\n\t'orion/editor/util',\n\t'orion/webui/littlelib',\n\t'orion/util'\n], function(messages, mTextView, mProjectionTextModel, Deferred, textUtil, lib, util) {\n\n/**\n * @name Tooltip\n * @description Tooltip support for text views\n * \n * show() - Opens the tooltip\n * update() - Updates the content of the open tooltip\n * onHover() - Checks if the x,y coordinates are outside the current tooltip area and updates the tooltip if necessary\n * hide() - Closes the tooltip\n * isVisible() - Returns whether the tooltip is currently showing\n * \n * The methods above ask for a tooltipInfo object, which must contain a callback function getTooltipInfo()\n * This function must return an info object with the following contents:\n * \n * Info {\n * \tContents {string, html element, annotation array, etc.} Contents to display, if undefined, the hover service will be asked for content\n * \tContext {source, offset, offsetStart, offsetEnd}} Information used to modify the tooltip position or contents\n * \tPosition {String} One of left, right, top, bottom used to position the tooltip relative to the anchor area\n * \tAnchorArea {top, left, width, height} rectangle defining the source of the tooltip and where to position relative to\n * \tTooltipArea {top, left, width, height} rectangle to define the tooltip's exact placement rather than a relative position to the anchor\n * \tTooltipOffsetX {Number} Hint to move the tooltip position horizontally\n * \tTooltipOffsetY {Number} Hint to move the tooltip position vertically\n * \n * @param view\n */\nfunction Tooltip (view, editor) {\n\t\tthis._view = view;\n\t\tthis._editor = editor;\n\t\tvar parent = view.getOptions(\"parent\"); //$NON-NLS-0$\n\t\tthis._create(parent ? parent.ownerDocument : document);\n\t}\n\t/**\n\t * Creates a new tooltip for the given text view.\n\t * @param view {TextView} the text view the tooltip belongs to\n\t * @param editor {Editor} the editor the tooltip belongs to, optional, allows quick fixes in tooltip to run on all annotations in the editor\n\t */\n\tTooltip.getTooltip = function(view, editor) {\n\t\tif (!view._tooltip) {\n\t\t\t view._tooltip = new Tooltip(view, editor);\n\t\t}\n\t\treturn view._tooltip;\n\t};\n\tTooltip.prototype = /** @lends orion.editor.Tooltip.prototype */ {\n\t\t_create: function(document) {\n\t\t\tif (this._tooltipDiv) { return; }\n\t\t\tvar tooltipDiv = this._tooltipDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\ttooltipDiv.tabIndex = 0;\n\t\t\ttooltipDiv.className = \"textviewTooltip\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.setAttribute(\"aria-live\", \"assertive\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\ttooltipDiv.setAttribute(\"aria-atomic\", \"true\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._tooltipDiv.style.visibility = \"hidden\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = false;\n\t\t\tdocument.body.appendChild(tooltipDiv);\n\t\t\tvar self = this;\n\t\t\ttextUtil.addEventListener(document, \"mousedown\", this._mouseDownHandler = function(event) {\n\t\t\t\tif (!self.isVisible()) { return; }\n\t\t\t\tif (textUtil.contains(tooltipDiv, event.target || event.srcElement)) { return; }\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself.hide();\n\t\t\t\t}\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(document, \"scroll\", this._scrollHandler = function(event) {\n\t\t\t\tif (!self.isVisible()){\n\t\t\t\t\treturn;\t\n\t\t\t\t} \n\n\t\t\t\t// Make sure the scroll isn't *inside* the tooltip...\n\t\t\t\tif (textUtil.contains(tooltipDiv, event.target || event.srcElement)) { return; }\n\n\t\t\t\tif (self._topPixel !== self._view.getTopPixel() || self._leftPixel !== self._view.getHorizontalPixel()) {\n\t\t\t\t\tself.hide();\n\t\t\t\t}\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(document, \"mousemove\", this._mouseMoveHandler = function(event) {\n\t\t\t\t// Ignore spurious mousemove events\n\t\t\t\tif (self._prevX && self._prevX === event.clientX && self._prevY && self._prevY === event.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tself._prevX = event.clientX;\n\t\t\t\tself._prevY = event.clientY;\n\t\t\t\t\n\t\t\t\tif (!self.isVisible() || self._locked || self._hasFocus()) { return; }\n\t\t\t\tif (self._isInRect(self._outerArea, event.clientX, event.clientY)){ return; }\n\t\t\t\tself.hide();\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"focus\", /* @callback */ function(event) {\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself._tooltipDiv.classList.add('textViewTooltipOnFocus'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"blur\", /* @callback */ function(event) {\n\t\t\t\tself._tooltipDiv.classList.remove('textViewTooltipOnFocus'); //$NON-NLS-0$\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"mouseenter\", /* @callback */ function(event) {\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself._tooltipDiv.classList.add('textViewTooltipOnHover'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"mouseleave\", /* @callback */ function(event) {\n\t\t\t\tif (!self._hasFocus()){\n\t\t\t\t\tself._tooltipDiv.classList.remove('textViewTooltipOnHover'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"keydown\", function(event) {\n\t\t\t\tif (event.keyCode === 27) {\n\t\t\t\t\tif (!self._locked){\n\t\t\t\t\t\tself.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\tthis._view.addEventListener(\"Destroy\", function() {\n\t\t\t\tself.destroy();\n\t\t\t});\n\t\t},\n\t\tdestroy: function() {\n\t\t\tif (!this._tooltipDiv) { return; }\n\t\t\tthis.hide();\n\t\t\tvar parent = this._tooltipDiv.parentNode;\n\t\t\tif (parent) { parent.removeChild(this._tooltipDiv); }\n\t\t\tvar doc = this._tooltipDiv.ownerDocument;\n\t\t\ttextUtil.removeEventListener(doc, \"mousedown\", this._mouseDownHandler, true);\n\t\t\ttextUtil.removeEventListener(doc, \"scroll\", this._scrollHandler, true);\n\t\t\ttextUtil.removeEventListener(doc, \"mousemove\", this._mouseMoveHandler, true);\n\t\t\tthis._tooltipDiv = null;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name show\n\t\t * @description Show the tooltip using the given target information\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the tooltip contents (see _processInfo())\n\t\t * @param target The target through which the info is obtained\n\t\t * @param locked If true locks the tooltip (never hides unless 'hide' is called)\n\t\t * @param giveFocus If true forces the focus onto the tooltip (used for F2 processing)\n\t\t */\n\t\tshow: function(tooltipInfo, locked, giveFocus) {\n\t\t\tthis._locked = locked;\n\t\t\tthis._giveFocus = giveFocus;\n\t\t\tthis._topPixel = this._view.getTopPixel();\n\t\t\tthis._leftPixel = this._view.getHorizontalPixel();\n\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo());\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name update\n\t\t * @description Updates the information in an already visible tooltip\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the parameters need to update the information (see _processInfo())\n\t\t * @param noContent If true makes no attempt to gather new info and just updates the tooltip's position\n\t\t */\n\t\tupdate: function(tooltipInfo, noContent) {\n\t\t\tif (!tooltipInfo){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (noContent) {\n\t\t\t\tthis._showContents(null, tooltipInfo.getTooltipInfo(), true);\n\t\t\t} else {\n\t\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo(), true);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name onHover\n\t\t * @description Checks the x,y location and updates the tooltip contents or hides the tooltip as appropriate\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the parameters need to update the information (see _processInfo())\n\t\t * @param x coordinates of the mouse event\n\t\t * @param y coordinates of the mouse event\n\t\t */\n\t\tonHover: function(tooltipInfo, x, y) {\n\t\t\tif (!tooltipInfo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Don't process if we're in the anchor or tooltip\n\t\t\tif (this._isInRect(this._anchorArea, x, y)\n\t\t\t\t\t|| this._isInRect(this._tooltipArea, x, y)\n\t\t\t\t\t|| this._locked\n\t\t\t\t\t|| this._hasFocus()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo());\n\t\t},\t\t\n\t\n\t\t/**\n\t\t * @name hide\n\t\t * @description Hides the current tooltip (if it's showing)\n\t\t * @function\n\t\t * @public\n\t\t*/\n\t\thide: function(clearLock) {\n\t\t\tif (clearLock) {\n\t\t\t\tthis._locked = undefined;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._locked || !this.isVisible()){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\t\n\t\t\tif (this.hover) {\n\t\t\t\tthis.hover.clearQuickFixes();\n\t\t\t}\n\n\t\t\tif (this._hasFocus()) {\n\t\t\t\tthis._view.focus();\n\t\t\t}\n\t\t\tif (this._tooltipContents) {\n\t\t\t\tthis._tooltipDiv.removeChild(this._tooltipContents);\n\t\t\t\tthis._tooltipContents = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Code projections are displayed using the editor theme colors\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipCodeProjection\"); //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipOnHover\"); //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipOnFocus\"); //$NON-NLS-0$\n\t\t\t\n\t\t\tthis._tooltipDiv.style.visibility = \"hidden\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = false;\n\t\t\tthis._tooltipDiv.style.left = \"\";\n\t\t\tthis._tooltipDiv.style.right = \"\";\n\t\t\tthis._tooltipDiv.style.top = \"\";\n\t\t\tthis._tooltipDiv.style.bottom = \"\";\n\t\t\tthis._tooltipDiv.style.width = \"auto\";\t\t //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.style.maxWidth = \"\";\n\t\t\tthis._tooltipDiv.style.height = \"auto\";\t\t //$NON-NLS-0$\t\n\t\t\tthis._tooltipDiv.style.maxHeight = \"\";\n\t\t\tthis._tooltipDiv.style.overflowX = \"\";\n\t\t\tthis._tooltipDiv.style.overflowY = \"\";\n\t\t\t\n\t\t\tthis._giveFocus = undefined;\n\t\t\t\n\t\t\tthis._anchorArea = undefined;  // Area of text/ruler/etc. we are showing a tooltip for\n\t\t\tthis._tooltipArea = undefined;  // The area the tooltip covers\n\t\t\tthis._outerArea = undefined; // The rectangle encapsulating both anchor and tooltip areas where we want to keep the tooltip open\n\t\t\t\n\t\t\t// cancel any outstanding defers\n\t\t\tif (this._hoverPromises) {\n\t\t\t\tthis._hoverPromises.forEach(function(info) {\n\t\t\t\t\tif (!info.resolved) {\n\t\t\t\t\t\tinfo.cancel();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._hoverPromises = undefined;\n\t\t\t\n\t\t\t// values that are calculated\n\t\t\tthis._tipRect = undefined;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name isVisible\n\t\t * @description Returns a boolean indicating whether the tooltip is currently visible\n\t\t * @function\n\t\t * @public\n\t\t * @returns {boolean} 'true' iff the tooltip is currently visible\n\t\t*/\n\t\tisVisible: function() {\n\t\t\treturn this._tipShowing;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _processInfo\n\t\t * @description Renders the content, positions the tooltip then makes the tooltip visible\n\t\t * @function\n\t\t * @private\n\t\t * @param info {Object} The info object passed by the caller\n\t\t * \n\t\t * Info:\n\t\t * 1) Contents\n\t\t * 2) Context\n\t\t * 3) Position string left, right, top, bottom\n\t\t * 4) AnchorArea x, y, width, height\n\t\t * 5) TooltipArea x, y, width, height\n\t\t * 6) TooltipOffsetX\n\t\t * 7) TooltipOffsetY\n\t\t * 8) AllowFullWidth\n\t\t * \n\t\t * @param update Whether to update the existing tooltip contents or open a new tooltip\n\t\t */\n\t\t_processInfo: function(info, update) {\n\t\t\tif (!this._tooltipDiv){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tvar newTooltipContents;\n\t\t\tif (update && this._tooltipContents) {\n\t\t\t\tthis._tooltipContents.innerHTML = \"\";\n\t\t\t\tnewTooltipContents = this._tooltipContents;\n\t\t\t} else {\n \t\t\t\tnewTooltipContents = util.createElement(this._tooltipDiv.ownerDocument, \"div\"); //$NON-NLS-0$\n \t\t\t}\n \t\t\t\n\t\t\tif (info) {\n\t\t\t\t// Render provided content\n\t\t\t\tif (info.contents) {\n\t\t\t\t\tif (this._renderImmediateInfo(newTooltipContents, info.contents, info.context)) {\n\t\t\t\t\t\tthis._showContents(newTooltipContents, info, update);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// If no immediate content, check if hover service plug-ins have content\n\t\t\t\tif (this.hover && info.context){\n\t\t\t\t\tthis._hoverPromises = this.hover.computeHoverInfo(info.context);\n\t\t\t\t\tif (this._hoverPromises) {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tvar promises = this._hoverPromises.slice(0);\n\t\t\t\t\t\tpromises.forEach(function(hoverPromise) {\n\t\t\t\t\t\t\tDeferred.when(hoverPromise, function (data) {\n\t\t\t\t\t\t\t\t// Remove this promise from the list so we don't try cancelling it while processing (see hide())\n\t\t\t\t\t\t\t\tif (self._hoverPromises){\n\t\t\t\t\t\t\t\t\tvar index = self._hoverPromises.indexOf(hoverPromise);\n\t\t\t\t\t\t\t\t\tif (index >= 0){\n\t\t\t\t\t\t\t\t\t\tself._hoverPromises.splice(index, 1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\t\tif (self._renderPluginContent(newTooltipContents, data)) {\n\t\t\t\t\t\t\t\t\t\tif (data.offsetStart){\n\t\t\t\t\t\t\t\t\t\t\tinfo.context.offsetStart = data.offsetStart;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.offsetEnd){\n\t\t\t\t\t\t\t\t\t\t\tinfo.context.offsetEnd = data.offsetEnd;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.allowFullWidth){\n\t\t\t\t\t\t\t\t\t\t\tinfo.allowFullWidth = data.allowFullWidth;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tself._showContents(newTooltipContents, info, update);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\t\t\tif (console && error && error.name !== 'Cancel') {\n\t\t\t\t\t\t\t\t\tconsole.log(\"Error computing hover tooltip\"); //$NON-NLS-0$\n\t\t\t\t\t\t\t\t\tconsole.log(error && error.stack);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @name _showContents\n\t\t * @description Takes the rendered contents, positions the tooltip, opens the tooltip\n\t\t * @function\n\t\t * @private\n\t\t * @param newContentsDiv\n\t\t * @param info\n\t\t * @param update\n\t\t */\n\t\t_showContents: function _showContents(newContentsDiv, info, update) {\n\t\t\tif (!update){\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\t// If update is called but the set tooltip area is different, recreate the tooltip with the new sizing (ex: content assist resizing)\n\t\t\t\t// We could also check if the set anchor area is different, but no one would be using it\n\t\t\t\tif (this._tooltipArea && info.tooltipArea){\n\t\t\t\t\tif (this._tooltipArea.left !== info.tooltipArea.left || this._tooltipArea.top !== info.tooltipArea.top || this._tooltipArea.width !== info.tooltipArea.width || this._tooltipArea.height !== info.tooltipArea.height){\n\t\t\t\t\t\tthis._anchorArea = null;\n\t\t\t\t\t\tthis._tooltipArea = null;\n\t\t\t\t\t\tthis._outerArea = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (newContentsDiv) {\n\t\t\t\tif (this._tooltipContents) {\n\t\t\t\t\tthis._tooltipDiv.removeChild(this._tooltipContents);\n\t\t\t\t}\n\t\t\t\tthis._tooltipContents = newContentsDiv;\n\t\t\t\tthis._tooltipDiv.appendChild(newContentsDiv);\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif (!this._anchorArea){\n\t\t\t\tthis._anchorArea = this._computeAnchorArea(info);\n\t\t\t}\n\t\t\tif (!this._tooltipArea){\n\t\t\t\t// This function performs two tasks, computing the rectangle and setting all the style properties\n\t\t\t\tthis._tooltipArea = this._computeTooltipArea(info, this._anchorArea, this._tooltipDiv);\n\t\t\t}\n\t\t\tif (!this._outerArea){\n\t\t\t\tthis._outerArea = this._computeOuterArea(this._anchorArea, this._tooltipArea);\n\t\t\t}\n\n\t\t\tthis._tooltipDiv.style.visibility = \"visible\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = true;\n\t\t\t\n\t\t\tif (this._giveFocus) {\n\t\t\t\tthis._setInitialFocus(this._tooltipDiv);\n\t\t\t\tthis._giveFocus = undefined;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _computeAnchorArea\n\t\t * @description Computes and returns the rectangle that the tooltip is anchored to.  For example the anchor for an annotation \n\t\t * \t\t\t\tmay be its text range.\n\t\t * @function\n\t\t * @private\n\t\t * @param info {Object} the info object passed by the caller.\n\t\t * @returns returns the computed rectangle anchor area\n\t\t */\n\t\t_computeAnchorArea: function _computeAnchorArea(info){\n\t\t\tif (info.anchorArea){\n\t\t\t\tif (info.anchorArea.top && info.anchorArea.left && info.anchorArea.height && info.anchorArea.width){\n\t\t\t\t\treturn info.anchorArea;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (info.context){\n\t\t\t\tif (info.context.offsetStart && info.context.offsetEnd){\n\t\t\t\t\t// The full text content of the editor is given to the plug-in hover service, so we must adjust the offsets\n\t\t\t\t\t// for the projection model as folded comments will change the offsets/coordinates in the displayed editor\n\t\t\t\t\tvar mappedStart = this.mapOffset(info.context.offsetStart, false);\n\t\t\t\t\tvar mappedEnd = this.mapOffset(info.context.offsetEnd, false);\n\t\t\t\t\treturn this._computeRectangleFromOffset(mappedStart, mappedEnd);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (info.context.offset >= 0){\n\t\t\t\t\t// The provided offset is based on the full text content, not the projection model\n\t\t\t\t\t// Adjust the offset before finding the closest enclosing word\n\t\t\t\t\tvar mappedOffset = this.mapOffset(info.context.offset, false);\n\t\t\t\t\tvar end = this._view.getNextOffset(mappedOffset, { unit: \"wordend\", count: 0}); //$NON-NLS-0$\n\t\t\t\t\tvar start = this._view.getNextOffset(end, { unit: \"word\", count: -1}); //$NON-NLS-0$\n\t\t\t\t\treturn this._computeRectangleFromOffset(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn {top: 0, left: 0, height: 0, width: 0};\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _computeTooltipPosition\n\t\t * @description Defines the tooltip area and placement.  Returns the rectangle defining the tooltip area and sets the tooltipDiv\n\t\t * \t\t\t\tstyle to match the rectangles values.\n\t\t * @param info the tooltip info object passed by the caller\n\t\t * @param anchorArea the computed tooltip anchor area to which the tooltip will be positioned\n\t\t * @param tooltipDiv the div for the tooltip, this function will modify its style to match the computed position/size\n\t\t * @returns returns the computed tooltip area rectangle\n\t\t * @function\n\t\t * @private\n\t\t */\n\t\t_computeTooltipArea: function _computeTooltipArea(info, anchorArea, tooltipDiv){\n\t\t\tvar documentElement = tooltipDiv.ownerDocument.documentElement;\n\t\t\t\n\t\t\t// TODO This padding must match what is in tooltip.css\n\t\t\tvar padding = 16;\n\t\t\t\n\t\t\t// Callers can specify the exact placement of the tooltip\n\t\t\tif (info.tooltipArea && info.tooltipArea.top && info.tooltipArea.left && info.tooltipArea.height && info.tooltipArea.width){\t\t\t\t\t\t\t\t\t\t \n\t\t\t\ttooltipDiv.style.overflowY = \"auto\"; //$NON-NLS-0$ // If caller specifies a height, allow scrolling\n\t\t\t\ttooltipDiv.style.resize = \"none\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.top = (info.tooltipArea.top) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.left = (info.tooltipArea.left) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.height = (info.tooltipArea.height - padding) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.width = (info.tooltipArea.width - padding) + \"px\"; //$NON-NLS-0$\n\t\t\t\treturn info.tooltipArea;\n\t\t\t}\n\t\t\t\n\t\t\tvar divBounds = tooltipDiv.getBoundingClientRect();\n\t\t\tvar tipRect = {\n\t\t\t\twidth: divBounds.width,\n\t\t\t\theight: divBounds.height\n\t\t\t};\n\t\t\t\n\t\t\t// If there is an unloaded image its width will not be included in the calculated size, add some buffer space so tooltip doesn't wrap (See bug 478357)\n\t\t\tvar image = tooltipDiv.getElementsByTagName('img')[0]; //$NON-NLS-1$\n\t\t\tif (image && !image.complete && image.width === 0){\n\t\t\t\ttipRect.width += 30;\n\t\t\t}\n\t\t\t\n\t\t\tvar position = info.position ? info.position : \"below\"; //$NON-NLS-0$\n\t\t\t\n\t\t\tvar viewBounds = (this._view._rootDiv ? this._view._rootDiv : documentElement).getBoundingClientRect();\n\t\t\tvar viewportLeft = viewBounds.left;\n\t\t\tvar viewportTop = viewBounds.top;\n\t\t\tvar viewportWidth = viewBounds.width;\n\t\t\tvar viewportHeight = viewBounds.height;\n\t\t\t\n\t\t\t// Set a default size for the tooltip\n\t\t\tvar defWidth = viewportWidth;\n\t\t\tvar defHeight = viewportHeight;\n\t\t\tif (!info.allowFullWidth){\n\t\t\t\tdefWidth = Math.min(viewportWidth/2, 600);\n\t\t\t\tdefHeight = Math.min(viewportHeight/2, 400);\n\t\t\t\ttipRect.width = Math.min(tipRect.width, defWidth);\n\t\t\t\ttipRect.height = Math.min(tipRect.height, defHeight);\n\t\t\t} else if (tipRect.width > viewportWidth){\n\t\t\t\ttipRect.width = viewportWidth;\n\t\t\t}\n\t\t\t\n\t\t\t// Now that we have our width recalculate the desired height...\n\t\t\ttooltipDiv.style.width = (tipRect.width - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttipRect.height = Math.min(tooltipDiv.getBoundingClientRect().height, defHeight);\n\t\t\t\n\t\t\t// Hack for single line tooltips that wrap, set a minimum height to make them show 2 lines without scrolling\n\t\t\t// The largest line height was MacOS Chrome with 20px+padding.  So 25 is the minimum height we are sure we are one two lines\n\t\t\t// Similarly, the minimum height for the tooltip is two lines (20px x 2 + padding) (this will actually show three lines on Win7 Chrome)\n\t\t\tif ((25+padding) > tipRect.height && tipRect.width > (defWidth-padding)){\n\t\t\t\ttipRect.height = 40+padding;\n\t\t\t}\n\n\t\t\tvar spaceBelow = viewportHeight - (anchorArea.top + anchorArea.height - viewportTop);\n\t\t\tvar spaceAbove = anchorArea.top - viewportTop;\n\t\t\tvar spaceRight = viewportWidth - (anchorArea.left + anchorArea.width - viewportLeft);\n\t\t\t\n\t\t\t// If there is not enough space above or below, swap the position.  Can't do the same for right/left because rulers are at client bounds\n\t\t\tif (position === \"above\" && tipRect.height > spaceAbove && tipRect.height <= spaceBelow){\n\t\t\t\tposition = \"below\"; //$NON-NLS-0$\n\t\t\t} else if (position === \"below\" && tipRect.height > spaceBelow && tipRect.height <= spaceAbove){\n\t\t\t\tposition = \"above\"; //$NON-NLS-0$\n\t\t\t}\n\t\t\t\n\t\t\tvar offsetX = info.tooltipOffsetX ? info.tooltipOffsetX : 0;\n\t\t\tvar offsetY = info.tooltipOffsetY ? info.tooltipOffsetY : 0;\n\t\t\t\n\t\t\t// Attempt to line up tooltip with the anchor area\n\t\t\t// If not enough space, shift the tooltip horiz (above/below) or vert (left/right) until it fits\n\t\t\t// Force the tooltip to start within the viewport area\n\t\t\t// Set maximum sizes for remaining area in the viewport area\n\t\t\tswitch (position){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tif ((tipRect.height + offsetY) > (spaceBelow + anchorArea.height)){\n\t\t\t\t\t\t// Shift the top of the tooltip upwards to fit, ignore the offset value\n\t\t\t\t\t\ttipRect.top = viewportHeight + viewportTop - tipRect.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.top = anchorArea.top + offsetY;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.top = Math.max(tipRect.top, viewportTop);\n\t\t\t\t\ttipRect.left = Math.max(anchorArea.left - tipRect.width + offsetX, viewportLeft);\n\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tif ((tipRect.height + offsetY) > (spaceBelow + anchorArea.height)){\n\t\t\t\t\t\t// Shift the top of the tooltip upwards to fit, ignore the offset value\n\t\t\t\t\t\ttipRect.top = viewportHeight + viewportTop - tipRect.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.top = anchorArea.top + offsetY;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.top = Math.max(tipRect.top, viewportTop);\n\t\t\t\t\ttipRect.left = Math.max(anchorArea.left + anchorArea.width + offsetX, viewportLeft);\n\t\t\t\tbreak;\n\t\t\t\tcase \"above\":\n\t\t\t\t\tif ((tipRect.width + offsetX) > (spaceRight + anchorArea.width)){\n\t\t\t\t\t\t// Shift the left side of the tooltip to the left, ignore the offset value\n\t\t\t\t\t\ttipRect.left = viewportWidth + viewportLeft - tipRect.width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.left = anchorArea.left + offsetX;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.left = Math.max(tipRect.left, viewportLeft);\n\t\t\t\t\ttipRect.top = Math.max(anchorArea.top - tipRect.height + offsetY, viewportTop);\n\t\t\t\tbreak;\n\t\t\t\tcase \"below\":\n\t\t\t\t\tif ((tipRect.width + offsetX) > (spaceRight + anchorArea.width)){\n\t\t\t\t\t\t// Shift the left side of the tooltip to the left, ignore the offset value\n\t\t\t\t\t\ttipRect.left = viewportWidth + viewportLeft - tipRect.width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.left = anchorArea.left + offsetX;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.left = Math.max(tipRect.left, viewportLeft);\n\t\t\t\t\ttipRect.top = Math.max(anchorArea.top + anchorArea.height + offsetY, viewportTop);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\ttipRect.maxWidth = Math.min(viewportWidth + viewportLeft - tipRect.left, viewportWidth);\n\t\t\ttipRect.maxHeight = Math.min(viewportHeight + viewportTop - tipRect.top, viewportHeight);\n\t\t\t\n\t\t\t// Adjust sizes for div padding, but not the actual tooltip box.\n\t\t\ttooltipDiv.style.maxWidth = (tipRect.maxWidth - padding) + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.maxHeight = (tipRect.maxHeight - padding) + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.width = (tipRect.width - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttooltipDiv.style.height = (tipRect.height - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttooltipDiv.style.left = tipRect.left + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.top = tipRect.top + \"px\"; //$NON-NLS-0$\n\t\t\treturn tipRect;\n\t\t},\n\t\t\n\t\t_computeOuterArea: function _computeOuterArea(anchorArea, tooltipArea){\n\t\t\tvar left = Math.min(anchorArea.left, tooltipArea.left);\n\t\t\tvar top = Math.min(anchorArea.top, tooltipArea.top);\n\t\t\tvar positionRight = anchorArea.left + anchorArea.width;\n\t\t\tvar tipRight = tooltipArea.left + tooltipArea.width;\n\t\t\tvar right = Math.max(positionRight, tipRight);\n\t\t\tvar positionBottom = anchorArea.top + anchorArea.height;\n\t\t\tvar tipBottom = tooltipArea.top + tooltipArea.height;\n\t\t\tvar bottom = Math.max(positionBottom, tipBottom);\n\t\t\t\t\n\t\t\treturn {\n\t\t\t\t\tleft: left,\n\t\t\t\t\ttop : top,\n\t\t\t\t\twidth: right - left,\n\t\t\t\t\theight: bottom - top\n\t\t\t\t};\n\t\t},\n\t\t\n\t\t/*\n\t\t ******************************************************************************************************************* \n\t\t * Utility: This section contains various utility methods\n\t\t ******************************************************************************************************************* \n\t\t */\n\t\t_hasFocus: function() {\n\t\t\tvar tooltipDiv = this._tooltipDiv;\n\t\t\tif (!tooltipDiv) { return false; }\n\t\t\treturn textUtil.contains(tooltipDiv, tooltipDiv.ownerDocument.activeElement);\n\t\t},\n\t\t_isNode: function (obj) {\n\t\t\treturn typeof Node === \"object\" ? obj instanceof Node : //$NON-NLS-0$\n\t\t\t\tobj && typeof obj === \"object\" && typeof obj.nodeType === \"number\" && typeof obj.nodeName === \"string\"; //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\t\t},\n\t\t_setInitialFocus: function(tooltipDiv) {\n\t\t\t// Any buttons ?\n\t\t\tvar button = lib.$(\"button\", tooltipDiv); //$NON-NLS-0$\n\t\t\tif (button) {\n\t\t\t\tbutton.focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Any links ?\n\t\t\tvar link = lib.$(\"a\", tooltipDiv); //$NON-NLS-0$\n\t\t\tif (link) {\n\t\t\t\tlink.focus();\n\t\t\t\tvar self = this;\n\t\t\t\tlink.addEventListener(\"click\", function() { //$NON-NLS-0$\n\t\t\t\t\tself.hide();\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Give up and focus on the first tabbable\n\t\t\tvar toFocus = lib.firstTabbable(tooltipDiv);\n\t\t\tif (toFocus) {\n\t\t\t\ttoFocus.focus();\n\t\t\t}\n\t\t},\n\t\t_isInRect: function(rect, x, y) {\n\t\t\tif (!rect){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar xOK = x >= rect.left && x <= (rect.left + rect.width);\n\t\t\tvar yOK = y >= rect.top && y <= (rect.top + rect.height);\n\t\t\treturn xOK && yOK;\n\t\t},\n\t\tmapOffset: function(offset) {\n\t\t\tvar textView = this._view;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\toffset = model.mapOffset(offset, true);\n\t\t\t}\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * Note that the offsets passed here must already be mapped to the base model being displayed (i.e. reduced by collapsed comments)\n\t\t */\n\t\t_computeRectangleFromOffset: function(start, end) {\n\t\t\tvar tv = this._view;\n\t\t\tvar curLine = tv.getLineAtOffset(start);\n\t\t\tvar endLine = tv.getLineAtOffset(end);\n\t\t\t\n\t\t\tvar height, viewRect;\n\t\t\t\n\t\t\tif (curLine !== endLine) {\n\t\t\t\tvar y = tv.getLocationAtOffset(start).y;\n\t\t\t\theight = 0;\n\t\t\t\tvar maxX = 0;\n\t\t\t\twhile (curLine <= endLine){\n\t\t\t\t\theight += tv.getLineHeight(curLine);\n\t\t\t\t\tvar lineEnd = tv.getModel().getLineEnd(curLine);\n\t\t\t\t\tvar possibleEnd = tv.getLocationAtOffset(lineEnd).x;\n\t\t\t\t\tif (possibleEnd > end){\n\t\t\t\t\t\tmaxX = possibleEnd;\n\t\t\t\t\t}\n\t\t\t\t\tcurLine++;\n\t\t\t\t}\n\t\t\t\tvar lineStart = tv.getModel().getLineStart(endLine);\n\t\t\t\tvar x = tv.getLocationAtOffset(lineStart).x;\n\t\t\t\t\n\t\t\t\tviewRect = { x: x, y: y, width: maxX - x, height: height};\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tvar startPos = tv.getLocationAtOffset(start);\n\t\t\t\tvar endPos = tv.getLocationAtOffset(end);\n\t\t\t\theight = tv.getLineHeight(curLine);\n\t\t\t\tviewRect = { x: startPos.x, y: startPos.y, \n\t\t\t\t\t\t\twidth: endPos.x - startPos.x, height: height};\n\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\tviewRect = this._view.convert(viewRect, \"document\", \"page\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {left: viewRect.x, top: viewRect.y, width: viewRect.width, height: viewRect.height};\n\t\t},\n\t\t/*\n\t\t ******************************************************************************************************************* \n\t\t * Rendering: This section deals with rendering supplied data into HTML for inclusion into the Info Popup.\n\t\t ******************************************************************************************************************* \n\t\t */\n\t\t_renderPluginContent: function(contentsDiv, data) {\n\t\t\tvar document = this._tooltipDiv.ownerDocument;\n\t\t\t// data object should be an object containing the type and content.  If no type or unknown type, default to string.\n\t\t\tif (typeof data !== 'string' && typeof data.content === 'undefined') { //$NON-NLS-0$ //$NON-NLS-1$\n\t\t\t    return false;\n\t\t\t}\n\t\t\t\n\t\t\tvar sectionDiv = util.createElement(document, \"div\"); //$NON-NLS-0$;\n\t\t\t// render the title, if any\n\t\t\tif (data.title) {\n\t\t\t\tvar titleDiv = util.createElement(document, \"div\"); //$NON-NLS-0$;\n\t\t\t\tif (this.hover.renderMarkDown) {\n\t\t\t\t\ttitleDiv.innerHTML = this.hover.renderMarkDown(data.title);\n\t\t\t\t} else {\n\t\t\t\t\ttitleDiv.textContent = data.title;\n\t\t\t\t}\n\t\t\t\ttitleDiv.classList.add(\"hoverTooltipTitle\"); //$NON-NLS-0$\n\t\t\t\tsectionDiv.appendChild(titleDiv);\n\t\t\t}\n\t\t\tvar contentDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\n\t\t\tif (typeof data === 'string'){ //$NON-NLS-0$\n\t\t\t\tcontentDiv.appendChild(document.createTextNode(data));\n\t\t\t} else {\n\t\t\t\tswitch(data.type) { //$NON-NLS-0$\n\t\t\t\t\tcase 'delegatedUI': { //$NON-NLS-0$\n\t\t\t\t\t\t// The delegated UI is not included in the 8.0 release, see Bug 449240.\n\t\t\t\t\t}\n\t\t\t\t\tcase 'html': { //$NON-NLS-0$\n\t\t\t\t\t\tif (data.content){\n\t\t\t\t\t\t\tvar iframe = document.createElement(\"iframe\"); //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.id = 'HtmlHover'; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.name = 'HTML Hover'; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.type = \"text/html\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.sandbox = \"allow-scripts allow-same-origin allow-forms\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.border = \"none\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.width = \"100%\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.height = \"100%\"; //$NON-NLS-0$\n\t\t\t\t\t\t\t// TODO The iframe computed height is always 3px smaller than the tooltip, giving the impression of inconsistent padding\n\t\t\t\t\t\t\tthis._tooltipDiv.style.paddingBottom = \"5px\";  //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.srcdoc = data.content;\n\t\t\t\t\t\t\tif (data.width) {\n\t\t\t\t\t\t\t\tiframe.style.width = data.width;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.height) {\n\t\t\t\t\t\t\t\tiframe.style.height = data.height;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsectionDiv.style.height = '100%';  //$NON-NLS-0$ // Height should grow on resize\n\t\t\t\t\t\t\tcontentsDiv.style.height = '100%';  //$NON-NLS-0$\n\t\t\t\t\t\t\tsectionDiv.appendChild(iframe);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'markdown': { //$NON-NLS-0$\n\t\t\t\t\t\tif (this.hover.renderMarkDown) {\n\t\t\t\t\t\t\tcontentDiv.innerHTML = this.hover.renderMarkDown(data.content);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tcontentDiv.appendChild(document.createTextNode(data.content));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsectionDiv.appendChild(contentDiv);\n\t\t\tcontentsDiv.appendChild(sectionDiv);\n\t\t\treturn true;\n\t\t},\n\t\t/*\n\t\t * Empty or empty array = call hover service for dynamic content\n\t\t * Array = annotations\n\t\t * String = HTML text\n\t\t * Node = HTML node\n\t\t * ProjectionTextModel = code projection\n\t\t */\n\t\t_renderImmediateInfo: function _renderImmediateInfo(contentsDiv, contents, context) {\t\t\t\t\t\t\n\t\t\t// If it's an annotation then process the annotation(s) to get the actual data\n\t\t\tif (contents instanceof Array) {\n\t\t\t\tcontents = this._getAnnotationContents(contents, context);\t\t\t\n\t\t\t\tif (!contents) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (typeof contents === \"string\") { //$NON-NLS-0$\n\t\t\t\tcontentsDiv.textContent = contents;\n\t\t\t\treturn true;\n\t\t\t} else if (this._isNode(contents)) {\n\t\t\t\tcontentsDiv.appendChild(contents);\n\t\t\t\treturn true;\n\t\t\t} else if (contents instanceof mProjectionTextModel.ProjectionTextModel) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar options = view.getOptions();\n\t\t\t\toptions.wrapMode = false;\n\t\t\t\toptions.parent = contentsDiv;\n\t\t\t\tvar tooltipTheme = \"tooltipTheme\"; //$NON-NLS-0$\n\t\t\t\tvar theme = options.themeClass;\n\t\t\t\tif (theme) {\n\t\t\t\t\ttheme = theme.replace(tooltipTheme, \"\");\n\t\t\t\t\tif (theme) { theme = \" \" + theme; } //$NON-NLS-0$\n\t\t\t\t\ttheme = tooltipTheme + theme;\n\t\t\t\t} else {\n\t\t\t\t\ttheme = tooltipTheme;\n\t\t\t\t}\n\t\t\t\toptions.themeClass = theme;\n\t\t\t\tvar contentsView = this._contentsView = new mTextView.TextView(options);\n\t\t\t\t//TODO need to find a better way of sharing the styler for multiple views\n\t\t\t\tvar listener = {\n\t\t\t\t\tonLineStyle: function(e) {\n\t\t\t\t\t\tview.onLineStyle(e);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tcontentsView.addEventListener(\"LineStyle\", listener.onLineStyle); //$NON-NLS-0$\n\t\t\t\tcontentsView.setModel(contents);\n\t\t\t\t\n\t\t\t\t// TODO This is a hack to compute the projection size we will have in the tooltip, we remove the child after computing\n\t\t\t\tthis._tooltipDiv.appendChild(contentsDiv);\n\t\t\t\t// Use the editor colors with a simple border\n\t\t\t\tthis._tooltipDiv.classList.add(\"textviewTooltipCodeProjection\"); //$NON-NLS-0$\n\t\t\t\tvar size = contentsView.computeSize();\n\t\t\t\t// Adjust the size for the padding\n\t\t\t\tcontentsDiv.style.width = (size.width+8) + \"px\"; //$NON-NLS-0$\n\t\t\t\tcontentsDiv.style.height = (size.height+8) + \"px\"; //$NON-NLS-0$\n\t\t\t\tcontentsView.resize();\n\t\t\t\tthis._tooltipDiv.removeChild(contentsDiv);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _getAnnotationContents\n\t\t * @description Takes a list of annotation and renders them in the tooltip\n\t\t * @function\n\t\t * @private\n\t\t * @param annotations the list of annotations to render\n\t\t * @param context optional object containing where the annotations are displayed (ruler, editor, etc.)\n\t\t * @returns returns document node containing rendered tooltip content\n\t\t */\n\t\t_getAnnotationContents: function(annotations, context) {\n\t\t\tvar self = this;\n\t\t\tvar inEditor = self.hover ? true : false;\n\t\t\tif (inEditor && context && context.source && context.source.indexOf('ruler') >= 0 && annotations.length > 1){ //$NON-NLS-0$\n\t\t\t\tinEditor = false;\n\t\t\t}\n\t\t\t\n\t\t\tvar annotation;\n\t\t\tvar newAnnotations = [];\n\t\t\tfor (var j = 0; j < annotations.length; j++) {\n\t\t\t\tannotation = annotations[j];\n\t\t\t\tif (annotation.title !== \"\" && !annotation.groupAnnotation) {\n\t\t\t\t\t// Don't display untitled annotations in the editor such as occurrences as the code is already visible\n\t\t\t\t\tif (!inEditor || annotation.title || annotation.type === \"orion.annotation.folding\"){\n\t\t\t\t\t\tnewAnnotations.push(annotation); \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotations = newAnnotations;\n\t\t\tif (annotations.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tvar html;\n\t\t\tvar document = this._tooltipDiv.ownerDocument;\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar baseModel = model.getBaseModel ? model.getBaseModel() : model;\n\t\t\t\n\t\t\t// If this is a code folding annotation, display code projection\n\t\t\tif (annotations.length === 1 && annotations[0].type === \"orion.annotation.folding\") {\n\t\t\t\tvar newModel = new mProjectionTextModel.ProjectionTextModel(baseModel);\n\t\t\t\tvar lineStart = baseModel.getLineStart(baseModel.getLineAtOffset(annotations[0].start));\n\t\t\t\tvar charCount = baseModel.getCharCount();\n\t\t\t\tif (annotations[0].end !== charCount) {\n\t\t\t\t\tnewModel.addProjection({start: annotations[0].end, end: charCount});\n\t\t\t\t}\n\t\t\t\tif (lineStart > 0) {\n\t\t\t\t\tnewModel.addProjection({start: 0, end: lineStart});\n\t\t\t\t}\n\t\t\t\treturn newModel;\n\t\t\t}\n\t\t\t\n\t\t\tvar allAnnotations;\n\t\t\tif (annotations.length > 0 && this._editor){\n\t\t\t\tallAnnotations = this._editor.getAnnotationModel().getAnnotations();\n\t\t\t}\n\t\t\tif (annotations.length === 1) {\n\t\t\t\thtml = getAnnotationHTML(annotations[0], allAnnotations, inEditor);\n\t\t\t\tif (html && html.firstChild) {\n\t\t\t\t\tvar className = html.firstChild.className;\n\t\t\t\t\tif (className) { className += \" \"; } //$NON-NLS-0$\n\t\t\t\t\tclassName += \"single\"; //$NON-NLS-0$\n\t\t\t\t\thtml.firstChild.className = className;\n\t\t\t\t}\n\t\t\t\treturn html;\n\t\t\t} else {\n\t\t\t\tvar tooltipHTML = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\tvar em = util.createElement(document, \"multi_anno\"); //$NON-NLS-0$\n\t\t\t\tem.appendChild(document.createTextNode(messages.multipleAnnotations));\n\t\t\t\ttooltipHTML.appendChild(em);\n\t\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\t\thtml = getAnnotationHTML(annotations[i], allAnnotations, inEditor);\n\t\t\t\t\tif (html) {\n\t\t\t\t\t\ttooltipHTML.appendChild(html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn tooltipHTML;\n\t\t\t}\n\t\t\t\n\t\t\tfunction getAnnotationHTML(annotation, allAnnotations, inEditor) {\n\t\t\t\tvar title = annotation.title;\n\t\t\t\tvar result = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\tresult.className = \"tooltipRow\"; //$NON-NLS-0$\n\t\t\t\tif (annotation.html) {\n\t\t\t\t\tvar htmlHolder = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\t\thtmlHolder.className = \"tooltipImage\"; //$NON-NLS-0$\n\t\t\t\t\thtmlHolder.innerHTML = annotation.html;\n\t\t\t\t\tif (htmlHolder.lastChild) {\n\t\t\t\t\t\ttextUtil.addEventListener(htmlHolder.lastChild, \"click\", function() { //$NON-NLS-0$\n\t\t\t\t\t\t\tvar start = annotation.start, end = annotation.end;\n\t\t\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tview.setSelection(start, end, 1 / 3, function() { self.hide(); });\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t}\n\t\t\t\t\tresult.appendChild(htmlHolder); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t\tif (!title) {\n\t\t\t\t\tvar textStart = baseModel.getLineStart(baseModel.getLineAtOffset(annotation.start));\n\t\t\t\t\tvar textEnd = baseModel.getLineEnd(baseModel.getLineAtOffset(annotation.end), true);\n\t\t\t\t\ttitle = baseModel.getText(textStart, textEnd);\n\t\t\t\t}\n\t\t\t\tif (typeof title === \"function\") { //$NON-NLS-0$\n\t\t\t\t\ttitle = annotation.title();\n\t\t\t\t}\n\t\t\t\tif (typeof title === \"string\") { //$NON-NLS-0$\n\t\t\t\t\tvar span = util.createElement(document, \"span\"); //$NON-NLS-0$\n\t\t\t\t\tspan.className = \"tooltipTitle\"; //$NON-NLS-0$\n\t\t\t\t\tspan.appendChild(document.createTextNode(title));\n\t\t\t\t\ttitle = span;\n\t\t\t\t}\n\t\t\t\tresult.appendChild(title);\n\t\t\t\t\n\t\t\t\t// Handle quick fixes\n\t\t\t\tif (inEditor) {\n\t\t\t\t\tself.hover.renderQuickFixes(annotation, allAnnotations, result);\n\t\t\t\t}\n\t\t\t\tif (context){\t\n\t\t\t\t\t// Set the hover area to the annotation if it's not already set\n\t\t\t\t\tcontext.offsetStart = annotation.start;\n\t\t\t\t\tcontext.offsetEnd = annotation.end;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\t\n\t};\n\treturn {Tooltip: Tooltip};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2014 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors:\n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/annotations\", ['i18n!orion/editor/nls/messages', 'orion/editor/eventTarget'], function(messages, mEventTarget) { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t/**\n\t * @class This object represents a regitry of annotation types.\n\t * @name orion.editor.AnnotationType\n\t */\n\tfunction AnnotationType() {\n\t}\n\t\n\t/**\n\t * @class This object represents a decoration attached to a range of text. Annotations are added to a\n\t * <code>AnnotationModel</code> which is attached to a <code>TextModel</code>.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.AnnotationModel}<br/>\n\t * {@link orion.editor.Ruler}<br/>\n\t * </p>\n\t * @name orion.editor.Annotation\n\t *\n\t * @property {String} type The annotation type (for example, orion.annotation.error).\n\t * @property {Number} start The start offset of the annotation in the text model.\n\t * @property {Number} end The end offset of the annotation in the text model.\n\t * @property {String} html The HTML displayed for the annotation.\n\t * @property {String} title The text description for the annotation.\n\t * @property {orion.editor.Style} style The style information for the annotation used in the annotations ruler and tooltips.\n\t * @property {orion.editor.Style} overviewStyle The style information for the annotation used in the overview ruler.\n\t * @property {orion.editor.Style} rangeStyle The style information for the annotation used in the text view to decorate a range of text.\n\t * @property {orion.editor.Style} lineStyle The style information for the annotation used in the text view to decorate a line of text.\n\t */\n\t/**\n\t * Constructs a new folding annotation.\n\t *\n\t * @param {Number} start The start offset of the annotation in the text model.\n\t * @param {Number} end The end offset of the annotation in the text model.\n\t * @param {orion.editor.ProjectionTextModel} projectionModel The projection text model.\n\t *\n\t * @class This object represents a folding annotation.\n\t * @name orion.editor.FoldingAnnotation\n\t */\n\tfunction FoldingAnnotation (start, end, projectionModel) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis._projectionModel = projectionModel;\n\t\tthis.html = this._expandedHTML;\n\t\tthis.style = this._expandedStyle;\n\t\tthis.expanded = true;\n\t}\n\n\tFoldingAnnotation.prototype = /** @lends orion.editor.FoldingAnnotation.prototype */ {\n\t\t_expandedHTML: \"<div class='annotationHTML expanded'></div>\", //$NON-NLS-0$\n\t\t_expandedStyle: {styleClass: \"annotation expanded\"}, //$NON-NLS-0$\n\t\t_collapsedHTML: \"<div class='annotationHTML collapsed'></div>\", //$NON-NLS-0$\n\t\t_collapsedStyle: {styleClass: \"annotation collapsed\"}, //$NON-NLS-0$\n\t\t_collapse: function() {\n\t\t\tif (!this.expanded) { return false; }\n\t\t\tthis.expanded = false;\n\t\t\tthis.html = this._collapsedHTML;\n\t\t\tthis.style = this._collapsedStyle;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.modifyAnnotation(this);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_expand: function() {\n\t\t\tif (this.expanded) { return false; }\n\t\t\tthis.expanded = true;\n\t\t\tthis.html = this._expandedHTML;\n\t\t\tthis.style = this._expandedStyle;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.modifyAnnotation(this);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_collapseImpl: function (checkOverlaping) {\n\t\t\tif (this._collapse()) {\n\t\t\t\tif (checkOverlaping) {\n\t\t\t\t\tthis._forEachOverlaping(function(annotation) {\n\t\t\t\t\t\tif (!annotation.expanded) {\n\t\t\t\t\t\t\tannotation._expandImpl(false);\n\t\t\t\t\t\t\tannotation._recollapse = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tvar projectionModel = this._projectionModel;\n\t\t\t\tvar baseModel = projectionModel.getBaseModel();\n\t\t\t\tthis._projection = {\n\t\t\t\t\tannotation: this,\n\t\t\t\t\tstart: baseModel.getLineStart(baseModel.getLineAtOffset(this.start) + 1),\n\t\t\t\t\tend: baseModel.getLineEnd(baseModel.getLineAtOffset(this.end), true)\n\t\t\t\t};\n\t\t\t\tprojectionModel.addProjection(this._projection);\n\t\t\t}\n\t\t},\n\t\t_expandImpl: function(checkOverlaping) {\n\t\t\tif (this._expand()) {\n\t\t\t\tthis._projectionModel._removeProjection(this._projection, !this._annotationModel);\n\t\t\t\tif (checkOverlaping) {\n\t\t\t\t\tthis._forEachOverlaping(function(annotation) {\n\t\t\t\t\t\tif (annotation._recollapse) {\n\t\t\t\t\t\t\tannotation._collapseImpl(false);\n\t\t\t\t\t\t\tannotation._recollapse = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_forEachOverlaping: function(callback) {\n\t\t\tif (!this._annotationModel) { return; }\n\t\t\tvar annotations = this._annotationModel.getAnnotations(this.start, this.end);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (annotation !== this && annotation.type === AnnotationType.ANNOTATION_FOLDING) {\n\t\t\t\t\tcallback.call(this, annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Collapses the annotation.\n\t\t */\n\t\tcollapse: function () {\n\t\t\tthis._recollapse = false;\n\t\t\tthis._collapseImpl(true);\n\t\t},\n\t\t/**\n\t\t * Expands the annotation.\n\t\t */\n\t\texpand: function () {\n\t\t\tthis._recollapse = false;\n\t\t\tthis._expandImpl(true);\n\t\t}\n\t};\n\t \n\t/**\n\t * Error annotation type.\n\t */\n\tAnnotationType.ANNOTATION_ERROR = \"orion.annotation.error\"; //$NON-NLS-0$\n\t/**\n\t * Warning annotation type.\n\t */\n\tAnnotationType.ANNOTATION_WARNING = \"orion.annotation.warning\"; //$NON-NLS-0$\n\t/**\n\t * Task annotation type.\n\t */\n\tAnnotationType.ANNOTATION_TASK = \"orion.annotation.task\"; //$NON-NLS-0$\n\t/**\n\t * Breakpoint annotation type.\n\t */\n\tAnnotationType.ANNOTATION_BREAKPOINT = \"orion.annotation.breakpoint\"; //$NON-NLS-0$\n\t/**\n\t * Bookmark annotation type.\n\t */\n\tAnnotationType.ANNOTATION_BOOKMARK = \"orion.annotation.bookmark\"; //$NON-NLS-0$\n\t/**\n\t * Folding annotation type.\n\t */\n\tAnnotationType.ANNOTATION_FOLDING = \"orion.annotation.folding\"; //$NON-NLS-0$\n\t/**\n\t * Curent bracket annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_BRACKET = \"orion.annotation.currentBracket\"; //$NON-NLS-0$\n\t/**\n\t * Matching bracket annotation type.\n\t */\n\tAnnotationType.ANNOTATION_MATCHING_BRACKET = \"orion.annotation.matchingBracket\"; //$NON-NLS-0$\n\t/**\n\t * Current line annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_LINE = \"orion.annotation.currentLine\"; //$NON-NLS-0$\n\t/**\n\t * Current search annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_SEARCH = \"orion.annotation.currentSearch\"; //$NON-NLS-0$\n\t/**\n\t * Matching search annotation type.\n\t */\n\tAnnotationType.ANNOTATION_MATCHING_SEARCH = \"orion.annotation.matchingSearch\"; //$NON-NLS-0$\n\t/**\n\t * Read Occurrence annotation type.\n\t */\n\tAnnotationType.ANNOTATION_READ_OCCURRENCE = \"orion.annotation.readOccurrence\"; //$NON-NLS-0$\n\t/**\n\t * Write Occurrence annotation type.\n\t */\n\tAnnotationType.ANNOTATION_WRITE_OCCURRENCE = \"orion.annotation.writeOccurrence\"; //$NON-NLS-0$\n\t/**\n\t * Selected linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_SELECTED_LINKED_GROUP = \"orion.annotation.selectedLinkedGroup\"; //$NON-NLS-0$\n\t/**\n\t * Current linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_LINKED_GROUP = \"orion.annotation.currentLinkedGroup\"; //$NON-NLS-0$\n\t/**\n\t * Linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_LINKED_GROUP = \"orion.annotation.linkedGroup\"; //$NON-NLS-0$\n\t/**\n\t* Blame annotation type.\n\t*/\n\tAnnotationType.ANNOTATION_BLAME = \"orion.annotation.blame\"; //$NON-NLS-0$\n\t/**\n\t* Current Blame annotation type.\n\t*/\n\tAnnotationType.ANNOTATION_CURRENT_BLAME = \"orion.annotation.currentBlame\"; //$NON-NLS-0$\n\t/**\n\t * Diff Added annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_ADDED = \"orion.annotation.diffAdded\"; //$NON-NLS-0$\n\t/**\n\t * Diff Deleted annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_DELETED = \"orion.annotation.diffDeleted\"; //$NON-NLS-0$\n\t/**\n\t * Diff Modification annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_MODIFIED = \"orion.annotation.diffModified\"; //$NON-NLS-0$\n\n\t/** @private */\n\tvar annotationTypes = {};\n\n\t/**\n\t * Register an annotation type.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @param {Object|Function} properties The common annotation properties of the registered\n\t *\t\tannotation type. All annotations create with this annotation type will expose these\n\t *\t\tproperties.\n\t */\n\tAnnotationType.registerType = function(type, properties) {\n\t\tvar constructor = properties;\n\t\tif (typeof constructor !== \"function\") { //$NON-NLS-0$\n\t\t\tconstructor = function(start, end, title) {\n\t\t\t\tthis.start = start;\n\t\t\t\tthis.end = end;\n\t\t\t\tif (title !== undefined) { this.title = title; }\n\t\t\t};\n\t\t\tconstructor.prototype = properties;\n\t\t}\n\t\tconstructor.prototype.type = type;\n\t\tannotationTypes[type] = constructor;\n\t\treturn type;\n\t};\n\n\t/**\n\t * Creates an annotation of a given type with the specified start end end offsets.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @param {Number} start The start offset of the annotation in the text model.\n\t * @param {Number} end The end offset of the annotation in the text model.\n\t * @param {String} [title] The text description for the annotation if different then the type description.\n\t * @return {orion.editor.Annotation} the new annotation\n\t */\n\tAnnotationType.createAnnotation = function(type, start, end, title) {\n\t\treturn new (this.getType(type))(start, end, title);\n\t};\n\n\t/**\n\t * Gets the registered annotation type with specified type. The returned\n\t * value is a constructor that can be used to create annotations of the\n\t * speficied type.  The constructor takes the start and end offsets of\n\t * the annotation.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @return {Function} The annotation type constructor ( i.e function(start, end, title) ).\n\t */\n\tAnnotationType.getType = function(type) {\n\t\treturn annotationTypes[type];\n\t};\n\n\t/** @private */\n\tfunction registerType(type, lineStyling) {\n\t\tvar index = type.lastIndexOf('.'); //$NON-NLS-0$\n\t\tvar suffix = type.substring(index + 1);\n\t\tvar properties = {\n\t\t\ttitle: messages[suffix],\n\t\t\tstyle: {styleClass: \"annotation \" + suffix}, //$NON-NLS-0$\n\t\t\thtml: \"<div class='annotationHTML \" + suffix + \"'></div>\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\toverviewStyle: {styleClass: \"annotationOverview \" + suffix} //$NON-NLS-0$\n\t\t};\n\t\tif (lineStyling) {\n\t\t\tproperties.lineStyle = {styleClass: \"annotationLine \" + suffix}; //$NON-NLS-0$\n\t\t} else {\n\t\t\tproperties.rangeStyle = {styleClass: \"annotationRange \" + suffix}; //$NON-NLS-0$\n\t\t}\n\t\tAnnotationType.registerType(type, properties);\n\t}\n\tregisterType(AnnotationType.ANNOTATION_ERROR);\n\tregisterType(AnnotationType.ANNOTATION_WARNING);\n\tregisterType(AnnotationType.ANNOTATION_TASK);\n\tregisterType(AnnotationType.ANNOTATION_BREAKPOINT);\n\tregisterType(AnnotationType.ANNOTATION_BOOKMARK);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_BRACKET);\n\tregisterType(AnnotationType.ANNOTATION_MATCHING_BRACKET);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_SEARCH);\n\tregisterType(AnnotationType.ANNOTATION_MATCHING_SEARCH);\n\tregisterType(AnnotationType.ANNOTATION_READ_OCCURRENCE);\n\tregisterType(AnnotationType.ANNOTATION_WRITE_OCCURRENCE);\n\tregisterType(AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_LINE, true);\n\tregisterType(AnnotationType.ANNOTATION_BLAME, true);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_BLAME, true);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_ADDED);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_DELETED);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_MODIFIED);\n\n\tAnnotationType.registerType(AnnotationType.ANNOTATION_FOLDING, FoldingAnnotation);\n\n\t/**\n\t * Constructs a new AnnotationTypeList object.\n\t *\n\t * @class This represents an interface of prioritized annotation types.\n\t * @name orion.editor.AnnotationTypeList\n\t */\n\tfunction AnnotationTypeList () {\n\t}\n\t/**\n\t * Adds in the annotation type interface into the specified object.\n\t *\n\t * @param {Object} object The object to add in the annotation type interface.\n\t */\n\tAnnotationTypeList.addMixin = function(object) {\n\t\tvar proto = AnnotationTypeList.prototype;\n\t\tfor (var p in proto) {\n\t\t\tif (proto.hasOwnProperty(p)) {\n\t\t\t\tobject[p] = proto[p];\n\t\t\t}\n\t\t}\n\t};\n\tAnnotationTypeList.prototype = /** @lends orion.editor.AnnotationTypeList.prototype */ {\n\t\t/**\n\t\t * Adds an annotation type to the receiver.\n\t\t * <p>\n\t\t * Only annotations of the specified types will be shown by\n\t\t * the receiver.\n\t\t * </p>\n\t\t * <p>\n\t\t * If the priority is not specified, the annotation type will be added\n\t\t * to the end of the receiver's list (lowest pririoty).\n\t\t * </p>\n\t\t *\n\t\t * @param {Object} type the annotation type to be shown\n\t\t * @param {Number} priority the priority for the annotation type\n\t\t * \n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t * @see orion.editor.AnnotationTypeList#getAnnotationTypePriority\n\t\t */\n\t\taddAnnotationType: function(type, priority) {\n\t\t\tif (!this._annotationTypes) { this._annotationTypes = []; }\n\t\t\tvar index = priority - 1;\n\t\t\tif (priority == undefined || !(0 <= index && index < this._annotationTypes.length)) {\n\t\t\t\tthis._annotationTypes.push(type);\n\t\t\t} else {\n\t\t\t\tthis._annotationTypes.splice(index, 0, type);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Gets the annotation type priority.  The priority is determined by the\n\t\t * order the annotation type is added to the receiver.  Annotation types\n\t\t * added first have higher priority.\n\t\t * <p>\n\t\t * Returns <code>0</code> if the annotation type is not added.\n\t\t * </p>\n\t\t *\n\t\t * @param {Object} type the annotation type\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t */\n\t\tgetAnnotationTypePriority: function(type) {\n\t\t\tif (this._annotationTypes) {\n\t\t\t\tfor (var i = 0; i < this._annotationTypes.length; i++) {\n\t\t\t\t\tif (this._annotationTypes[i] === type) {\n\t\t\t\t\t\treturn i + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\t/**\n\t\t * Returns an array of annotations in the specified annotation model for the given range of text sorted by type.\n\t\t *\n\t\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model.\n\t\t * @param {Number} start the start offset of the range.\n\t\t * @param {Number} end the end offset of the range.\n\t\t * @return {orion.editor.Annotation[]} an annotation array.\n\t\t */\n\t\tgetAnnotationsByType: function(annotationModel, start, end) {\n\t\t\tvar iter = annotationModel.getAnnotations(start, end);\n\t\t\tvar annotation, annotations = [];\n\t\t\twhile (iter.hasNext()) {\n\t\t\t\tannotation = iter.next();\n\t\t\t\tvar priority = this.getAnnotationTypePriority(annotation.type);\n\t\t\t\tif (priority === 0) { continue; }\n\t\t\t\tannotations.push(annotation);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tannotations.sort(function(a, b) {\n\t\t\t\treturn self.getAnnotationTypePriority(a.type) - self.getAnnotationTypePriority(b.type);\n\t\t\t});\n\t\t\treturn annotations;\n\t\t},\n\t\t/**\n\t\t * Returns whether the receiver shows annotations of the specified type.\n\t\t *\n\t\t * @param {Object} type the annotation type\n\t\t * @returns {Boolean} whether the specified annotation type is shown\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t */\n\t\tisAnnotationTypeVisible: function(type) {\n\t\t\treturn this.getAnnotationTypePriority(type) !== 0;\n\t\t},\n\t\t/**\n\t\t * Removes an annotation type from the receiver.\n\t\t *\n\t\t * @param {Object} type the annotation type to be removed\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t */\n\t\tremoveAnnotationType: function(type) {\n\t\t\tif (!this._annotationTypes) { return; }\n\t\t\tfor (var i = 0; i < this._annotationTypes.length; i++) {\n\t\t\t\tif (this._annotationTypes[i] === type) {\n\t\t\t\t\tthis._annotationTypes.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/** @private */\n\tfunction binarySearch(array, offset, inclusive, low, high) {\n\t\tvar index;\n\t\tif (low === undefined) { low = -1; }\n\t\tif (high === undefined) { high = array.length; }\n\t\twhile (high - low > 1) {\n\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\tif (offset <= array[index].start) {\n\t\t\t\thigh = index;\n\t\t\t} else if (inclusive && offset < array[index].end) {\n\t\t\t\thigh = index;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tlow = index;\n\t\t\t}\n\t\t}\n\t\treturn high;\n\t}\n\t\n\t/**\n\t * Constructs an annotation model.\n\t * \n\t * @param {orion.editor.TextModel} textModel The text model.\n\t * \n\t * @class This object manages annotations for a <code>TextModel</code>.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.Annotation}<br/>\n\t * {@link orion.editor.TextModel}<br/> \n\t * </p>\t\n\t * @name orion.editor.AnnotationModel\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction AnnotationModel(textModel) {\n\t\tthis._annotations = [];\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(modelChangedEvent) {\n\t\t\t\tself._onChanged(modelChangedEvent);\n\t\t\t}\n\t\t};\n\t\tthis.setTextModel(textModel);\n\t}\n\n\tAnnotationModel.prototype = /** @lends orion.editor.AnnotationModel.prototype */ {\n\t\t/**\n\t\t * Adds an annotation to the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation to be added.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\taddAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar index = binarySearch(annotations, annotation.start);\n\t\t\tannotations.splice(index, 0, annotation);\n\t\t\tannotation._annotationModel = this;\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [annotation],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Returns the text model.\n\t\t *\n\t\t * @return {orion.editor.TextModel} The text model.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#setTextModel\n\t\t */\n\t\tgetTextModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * @class This object represents an annotation iterator.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.AnnotationModel#getAnnotations}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.AnnotationIterator\n\t\t *\n\t\t * @property {Function} hasNext Determines whether there are more annotations in the iterator.\n\t\t * @property {Function} next Returns the next annotation in the iterator.\n\t\t */\n\t\t/**\n\t\t * Returns an iterator of annotations for the given range of text. If called with no parameters,\n\t\t * returns all annotations in the model.\n\t\t *\n\t\t * @param {Number} start the start offset of the range.\n\t\t * @param {Number} end the end offset of the range.\n\t\t * @return {orion.editor.AnnotationIterator} an annotation iterartor.\n\t\t */\n\t\tgetAnnotations: function(start, end) {\n\t\t\tvar annotations = this._annotations, current;\n\t\t\tvar i = 0, skip;\n\t\t\tif (start === undefined && end === undefined) {\n\t\t\t\tskip = function() {\n\t\t\t\t\treturn (i < annotations.length) ? annotations[i++] : null;\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t//TODO binary search does not work for range intersection when there are overlaping ranges, need interval search tree for this\n\t\t\t\tskip = function() {\n\t\t\t\t\twhile (i < annotations.length) {\n\t\t\t\t\t\tvar a =  annotations[i++];\n\t\t\t\t\t\tif ((start === a.start) || (start > a.start ? start < a.end : a.start < end)) {\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (a.start >= end) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t};\n\t\t\t}\n\t\t\tcurrent = skip();\n\t\t\treturn {\n\t\t\t\tnext: function() {\n\t\t\t\t\tvar result = current;\n\t\t\t\t\tif (result) { current = skip(); }\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\t\t\t\thasNext: function() {\n\t\t\t\t\treturn current !== null;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Notifies the annotation model that the given annotation has been modified.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the modified annotation.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t */\n\t\tmodifyAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar index = this._getAnnotationIndex(annotation);\n\t\t\tif (index < 0) { return; }\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: [annotation]\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the annotation model has changed.\n\t\t *\n\t\t * @param {orion.editor.Annotation[]} added The list of annotation being added to the model.\n\t\t * @param {orion.editor.Annotation[]} changed The list of annotation modified in the model.\n\t\t * @param {orion.editor.Annotation[]} removed The list of annotation being removed from the model.\n\t\t * @param {ModelChangedEvent} textModelChangedEvent the text model changed event that trigger this change, can be null if the change was trigger by a method call (for example, {@link #addAnnotation}).\n\t\t */\n\t\tonChanged: function(e) {\n\t\t\treturn this.dispatchEvent(e);\n\t\t},\n\t\t/**\n\t\t * Removes all annotations of the given <code>type</code>. All annotations\n\t\t * are removed if the type is not specified.\n\t\t * <p>The annotation model listeners are notified of this change.  Only one changed event is generated.</p>\n\t\t *\n\t\t * @param {Object} type the type of annotations to be removed.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\tremoveAnnotations: function(type) {\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar removed, i;\n\t\t\tif (type) {\n\t\t\t\tremoved = [];\n\t\t\t\tfor (i = annotations.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar annotation = annotations[i];\n\t\t\t\t\tif (annotation.type === type) {\n\t\t\t\t\t\tannotations.splice(i, 1);\n\t\t\t\t\t\tremoved.splice(0, 0, annotation);\n\t\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tremoved = annotations;\n\t\t\t\tannotations = [];\n\t\t\t}\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: removed,\n\t\t\t\tadded: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Removes an annotation from the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation to be removed.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t */\n\t\tremoveAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar index = this._getAnnotationIndex(annotation);\n\t\t\tif (index < 0) { return; }\n\t\t\tannotation._annotationModel = null;\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: this._annotations.splice(index, 1),\n\t\t\t\tadded: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Removes and adds the specifed annotations to the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.  Only one changed event is generated.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} remove the annotations to be removed.\n\t\t * @param {orion.editor.Annotation} add the annotations to be added.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\treplaceAnnotations: function(remove, add) {\n\t\t\tvar annotations = this._annotations, i, index, annotation, removed = [];\n\t\t\tif (remove) {\n\t\t\t\tfor (i = remove.length - 1; i >= 0; i--) {\n\t\t\t\t\tannotation = remove[i];\n\t\t\t\t\tindex = this._getAnnotationIndex(annotation);\n\t\t\t\t\tif (index < 0) { continue; }\n\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\tannotations.splice(index, 1);\n\t\t\t\t\tremoved.splice(0, 0, annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!add) { add = []; }\n\t\t\tfor (i = 0; i < add.length; i++) {\n\t\t\t\tannotation = add[i];\n\t\t\t\tindex = binarySearch(annotations, annotation.start);\n\t\t\t\tannotation._annotationModel = this;\n\t\t\t\tannotations.splice(index, 0, annotation);\n\t\t\t}\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: removed,\n\t\t\t\tadded: add,\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\t\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Sets the text model of the annotation model.  The annotation\n\t\t * model listens for changes in the text model to update and remove\n\t\t * annotations that are affected by the change.\n\t\t *\n\t\t * @param {orion.editor.TextModel} textModel the text model.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#getTextModel\n\t\t */\n\t\tsetTextModel: function(textModel) {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._model = textModel;\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\t_getAnnotationIndex: function(annotation) {\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar index = binarySearch(annotations, annotation.start);\n\t\t\twhile (index < annotations.length && annotations[index].start === annotation.start) {\n\t\t\t\tif (annotations[index] === annotation) {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t\t/** @ignore */\n\t\t_onChanged: function(modelChangedEvent) {\n\t\t\tvar start = modelChangedEvent.start;\n\t\t\tvar addedCharCount = modelChangedEvent.addedCharCount;\n\t\t\tvar removedCharCount = modelChangedEvent.removedCharCount;\n\t\t\tvar annotations = this._annotations, end = start + removedCharCount;\n\t\t\t//TODO binary search does not work for range intersection when there are overlaping ranges, need interval search tree for this\n\t\t\tvar startIndex = 0;\n\t\t\tif (!(0 <= startIndex && startIndex < annotations.length)) { return; }\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: [],\n\t\t\t\ttextModelChangedEvent: modelChangedEvent\n\t\t\t};\n\t\t\tvar changeCount = addedCharCount - removedCharCount, i;\n\t\t\tfor (i = startIndex; i < annotations.length; i++) {\n\t\t\t\tvar annotation = annotations[i];\n\t\t\t\tif (annotation.start >= end) {\n\t\t\t\t\tannotation._oldStart = annotation.start;\n\t\t\t\t\tannotation._oldEnd = annotation.end;\n\t\t\t\t\tannotation.start += changeCount;\n\t\t\t\t\tannotation.end += changeCount;\n\t\t\t\t\te.changed.push(annotation);\n\t\t\t\t} else if (annotation.end <= start) {\n\t\t\t\t\t//nothing\n\t\t\t\t} else if (annotation.start < start && end < annotation.end) {\n\t\t\t\t\tannotation._oldStart = annotation.start;\n\t\t\t\t\tannotation._oldEnd = annotation.end;\n\t\t\t\t\tannotation.end += changeCount;\n\t\t\t\t\te.changed.push(annotation);\n\t\t\t\t} else {\n\t\t\t\t\tannotations.splice(i, 1);\n\t\t\t\t\te.removed.push(annotation);\n\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\tif (annotation.expand) {\n\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t}\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.added.length > 0 || e.removed.length > 0 || e.changed.length > 0) {\n\t\t\t\tthis.onChanged(e);\n\t\t\t}\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(AnnotationModel.prototype);\n\n\t/**\n\t * Constructs a new styler for annotations.\n\t *\n\t * @param {orion.editor.TextView} view The styler view.\n\t * @param {orion.editor.AnnotationModel} view The styler annotation model.\n\t *\n\t * @class This object represents a styler for annotation attached to a text view.\n\t * @name orion.editor.AnnotationStyler\n\t * @borrows orion.editor.AnnotationTypeList#addAnnotationType as #addAnnotationType\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationTypePriority as #getAnnotationTypePriority\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationsByType as #getAnnotationsByType\n\t * @borrows orion.editor.AnnotationTypeList#isAnnotationTypeVisible as #isAnnotationTypeVisible\n\t * @borrows orion.editor.AnnotationTypeList#removeAnnotationType as #removeAnnotationType\n\t */\n\tfunction AnnotationStyler (view, annotationModel) {\n\t\tthis._view = view;\n\t\tthis._annotationModel = annotationModel;\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t},\n\t\t\tonLineStyle: function(e) {\n\t\t\t\tself._onLineStyle(e);\n\t\t\t},\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onAnnotationModelChanged(e);\n\t\t\t}\n\t\t};\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\tview.addEventListener(\"postLineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\tannotationModel.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t}\n\tAnnotationStyler.prototype = /** @lends orion.editor.AnnotationStyler.prototype */ {\n\t\t/**\n\t\t * Destroys the styler.\n\t\t * <p>\n\t\t * Removes all listeners added by this styler.\n\t\t * </p>\n\t\t */\n\t\tdestroy: function() {\n\t\t\tvar view = this._view;\n\t\t\tif (view) {\n\t\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tview.removeEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (annotationModel) {\n\t\t\t\tannotationModel.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tannotationModel = null;\n\t\t\t}\n\t\t},\n\t\t_mergeStyle: function(result, style) {\n\t\t\tif (style) {\n\t\t\t\tif (!result) { result = {}; }\n\t\t\t\tif (result.styleClass && style.styleClass && result.styleClass !== style.styleClass) {\n\t\t\t\t\tresult.styleClass += \" \" + style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tresult.styleClass = style.styleClass;\n\t\t\t\t}\n\t\t\t\tvar prop;\n\t\t\t\tif (style.tagName) {\n\t\t\t\t\tif (!result.tagName) {\n\t\t\t\t\t\tresult.tagName = style.tagName;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.style) {\n\t\t\t\t\tif (!result.style) { result.style  = {}; }\n\t\t\t\t\tfor (prop in style.style) {\n\t\t\t\t\t\tif (!result.style[prop]) {\n\t\t\t\t\t\t\tresult.style[prop] = style.style[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.attributes) {\n\t\t\t\t\tif (!result.attributes) { result.attributes  = {}; }\n\t\t\t\t\tfor (prop in style.attributes) {\n\t\t\t\t\t\tif (!result.attributes[prop]) {\n\t\t\t\t\t\t\tresult.attributes[prop] = style.attributes[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_mergeStyleRanges: function(ranges, styleRange) {\n\t\t\tif (!ranges) {\n\t\t\t\tranges = [];\n\t\t\t}\n\t\t\tvar mergedStyle, i = binarySearch(ranges, styleRange.start, true);\n\t\t\tfor (; i<ranges.length && styleRange; i++) {\n\t\t\t\tvar range = ranges[i];\n\t\t\t\tif (styleRange.end <= range.start) { break; }\n\t\t\t\tif (styleRange.start >= range.end) { continue; }\n\t\t\t\tmergedStyle = this._mergeStyle({}, range.style);\n\t\t\t\tmergedStyle = this._mergeStyle(mergedStyle, styleRange.style);\n\t\t\t\tvar args = [];\n\t\t\t\targs.push(i, 1);\n\t\t\t\tif (styleRange.start < range.start) {\n\t\t\t\t\targs.push({start: styleRange.start, end: range.start, style: styleRange.style});\n\t\t\t\t}\n\t\t\t\tif (styleRange.start > range.start) {\n\t\t\t\t\targs.push({start: range.start, end: styleRange.start, style: range.style});\n\t\t\t\t}\n\t\t\t\targs.push({start: Math.max(range.start, styleRange.start), end: Math.min(range.end, styleRange.end), style: mergedStyle});\n\t\t\t\tif (styleRange.end < range.end) {\n\t\t\t\t\targs.push({start: styleRange.end, end: range.end, style: range.style});\n\t\t\t\t}\n\t\t\t\tif (styleRange.end > range.end) {\n\t\t\t\t\tstyleRange = {start: range.end, end: styleRange.end, style: styleRange.style};\n\t\t\t\t} else {\n\t\t\t\t\tstyleRange = null;\n\t\t\t\t}\n\t\t\t\tArray.prototype.splice.apply(ranges, args);\n\t\t\t}\n\t\t\tif (styleRange) {\n\t\t\t\tmergedStyle = this._mergeStyle({}, styleRange.style);\n\t\t\t\tranges.splice(i, 0, {start: styleRange.start, end: styleRange.end, style: mergedStyle});\n\t\t\t}\n\t\t\treturn ranges;\n\t\t},\n\t\t_onAnnotationModelChanged: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tvar self = this;\n\t\t\tvar model = view.getModel();\n\t\t\tfunction redrawRange(start, end) {\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\tif (start !== -1 && end !== -1) {\n\t\t\t\t\tview.redrawRange(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction redraw(changes, changed) {\n\t\t\t\tfor (var i = 0; i < changes.length; i++) {\n\t\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\t\tvar change = changes[i];\n\t\t\t\t\tredrawRange(change.start, change.end);\n\t\t\t\t\tif (changed && change._oldStart !== undefined && change._oldEnd) {\n\t\t\t\t\t\tredrawRange(change._oldStart, change._oldEnd);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tredraw(e.added);\n\t\t\tredraw(e.removed);\n\t\t\tredraw(e.changed, true);\n\t\t},\n\t\t_onDestroy: function(e) {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onLineStyle: function (e) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar viewModel = e.textView.getModel();\n\t\t\tvar baseModel = annotationModel.getTextModel();\n\t\t\tvar start = e.lineStart;\n\t\t\tvar end = e.lineStart + e.lineText.length;\n\t\t\tif (baseModel !== viewModel) {\n\t\t\t\tstart = viewModel.mapOffset(start);\n\t\t\t\tend = viewModel.mapOffset(end);\n\t\t\t}\n\t\t\tvar annotations = annotationModel.getAnnotations(start, end);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (!this.isAnnotationTypeVisible(annotation.type)) { continue; }\n\t\t\t\tif (annotation.rangeStyle) {\n\t\t\t\t\tvar annotationStart = annotation.start;\n\t\t\t\t\tvar annotationEnd = annotation.end;\n\t\t\t\t\tif (baseModel !== viewModel) {\n\t\t\t\t\t\tannotationStart = viewModel.mapOffset(annotationStart, true);\n\t\t\t\t\t\tannotationEnd = viewModel.mapOffset(annotationEnd, true);\n\t\t\t\t\t}\n\t\t\t\t\te.ranges = this._mergeStyleRanges(e.ranges, {start: annotationStart, end: annotationEnd, style: annotation.rangeStyle});\n\t\t\t\t}\n\t\t\t\tif (annotation.lineStyle) {\n\t\t\t\t\te.style = this._mergeStyle({}, e.style);\n\t\t\t\t\te.style = this._mergeStyle(e.style, annotation.lineStyle);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tAnnotationTypeList.addMixin(AnnotationStyler.prototype);\n\n\treturn {\n\t\tFoldingAnnotation: FoldingAnnotation,\n\t\tAnnotationType: AnnotationType,\n\t\tAnnotationTypeList: AnnotationTypeList,\n\t\tAnnotationModel: AnnotationModel,\n\t\tAnnotationStyler: AnnotationStyler\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/objects',[], function() {\n\tfunction mixin(target/*, source..*/) {\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\t\tfor (var j = 1, len = arguments.length; j < len; j++) {\n\t\t\tvar source = arguments[j];\n\t\t\tfor (var key in source) {\n\t\t\t\tif (hasOwnProperty.call(source, key)) {\n\t\t\t\t\ttarget[key] = source[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn target;\n\t}\n\n\t/**\n\t * @name orion.objects\n\t * @class Object-oriented helpers.\n\t */\n\treturn {\n\t\t/**\n\t\t * Creates a shallow clone of the given <code>object</code>.\n\t\t * @name orion.objects.clone\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object|Array} object The object to clone. Must be a \"normal\" Object or Array. Other built-ins,\n\t\t * host objects, primitives, etc, will not work.\n\t\t * @returns {Object|Array} A clone of <code>object</code>.\n\t\t */\n\t\tclone: function(object) {\n\t\t\tif (Array.isArray(object)) {\n\t\t\t\treturn Array.prototype.slice.call(object);\n\t\t\t}\n\t\t\tvar clone = Object.create(Object.getPrototypeOf(object));\n\t\t\tmixin(clone, object);\n\t\t\treturn clone;\n\t\t},\n\t\t/**\n\t\t * Mixes all <code>source</code>'s own enumerable properties into <code>target</code>. Multiple source objects\n\t\t * can be passed as varargs.\n\t\t * @name orion.objects.mixin\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object} target\n\t\t * @param {Object} source\n\t\t */\n\t\tmixin: mixin,\n\t\t/**\n\t\t * Wraps an object into an Array if necessary.\n\t\t * @name orion.objects.toArray\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object} obj An object.\n\t\t * @returns {Array} Returns <code>obj</code> unchanged, if <code>obj</code> is an Array. Otherwise returns a 1-element Array\n\t\t * whose sole element is <code>obj</code>.\n\t\t */\n\t\ttoArray: function(o) {\n\t\t\treturn Array.isArray(o) ? o : [o];\n\t\t}\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2009, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/editor\", [ //$NON-NLS-0$\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\n\t'orion/editor/eventTarget', //$NON-NLS-0$\n\t'orion/editor/tooltip', //$NON-NLS-0$\n\t'orion/editor/annotations', //$NON-NLS-0$\n\t'orion/objects', //$NON-NLS-0$\n\t'orion/util' //$NON-NLS-0$\n], function(messages, mEventTarget, mTooltip, mAnnotations, objects, util) {\n\t\n\tvar AT = mAnnotations.AnnotationType;\n\n\tvar HIGHLIGHT_ERROR_ANNOTATION = \"orion.annotation.highlightError\"; //$NON-NLS-0$\n\n\t/**\n\t * @name orion.editor.BaseEditor\n\t * @class This is the base interface for text and visual editors based on a text buffer.\n\t *\n\t * @description Creates a new Base Editor with the given options.\n\t * @param {Object} options Creation options for this editor.\n\t * @param {Object} options.domNode\n\t * @param {Object} options.statusReporter\n\t *\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction BaseEditor(options) {\n\t\toptions = options || {};\n\t\tthis._domNode = options.domNode;\n\t\tthis._model = options.model;\n\t\tthis._undoStack = options.undoStack;\n\t\tthis._statusReporter = options.statusReporter;\n\t\tthis._title = null;\n\t\tvar that = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tthat.onChanged(e);\n\t\t\t}\n\t\t};\n\t\tif (this._model) {\n\t\t\tthis._model.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t}\n\t\tthis.checkDirty();\n\t}\n\tBaseEditor.prototype = /** @lends orion.editor.BaseEditor.prototype */ {\n\t\t/**\n\t\t * Destroys the editor. Uninstall the editor view.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis.uninstall();\n\t\t\tthis._statusReporter = this._domNode = null;\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\n\t\t/** @private */\n\t\tcheckDirty : function() {\n\t\t\tthis.setDirty(this._undoStack && !this._undoStack.isClean());\n\t\t},\n\t\t/**\n\t\t * Focus the the editor view. The default implementation does nothing.\n\t\t */\n\t\tfocus: function() {\n\t\t},\n\t\t/**\n\t\t * Returns the text model of the editor.\n\t\t *\n\t\t * @returns {orion.editor.TextModel} the text model of the view.\n\t\t */\n\t\tgetModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The text does not include the character at the end offset.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextView#setText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\treturn this.getModel().getText(start, end);\n\t\t},\n\t\t/**\n\t\t * Returns the editor title.\n\t\t *\n\t\t * @returns {String} the editor title.\n\t\t */\n\t\tgetTitle: function() {\n\t\t\treturn this._title;\n\t\t},\n\t\t/**\n\t\t * Returns the editor undo stack.\n\t\t *\n\t\t * @returns {orion.editor.UndoStack} the editor undo stack.\n\t\t */\n\t\tgetUndoStack: function() {\n\t\t\treturn this._undoStack;\n\t\t},\n\t\t/**\n\t\t * Creates the DOM hierarchy of the editor and add it to the document.\n\t\t */\n\t\tinstall: function() {\n\t\t\tthis.installed = true;\n\t\t},\n\t\t/**\n\t\t * Returns <code>true</code> if the editor is dirty; <code>false</code> otherwise.\n\t\t * @returns {Boolean} whether the editor is dirty\n\t\t */\n\t\tisDirty: function() {\n\t\t\tif (this._undoStack) return !this._undoStack.isClean();\n\t\t\treturn this._dirty;\n\t\t},\n\t\t/**\n\t\t * Marks the current state of the editor as clean. Meaning there are no unsaved modifications.\n\t\t */\n\t\tmarkClean: function() {\n\t\t\tthis.getUndoStack().markClean();\n\t\t\tthis.setDirty(false);\n\t\t},\n\t\t/**\n\t\t * Called when the dirty state of the editor changes.\n\t\t * @param {Event} dirtyChangedEvent\n\t\t */\n\t\tonDirtyChanged: function(dirtyChangedEvent) {\n\t\t\treturn this.dispatchEvent(dirtyChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Called when the editor's contents have been changed or saved.\n\t\t * @param {Event} inputChangedEvent\n\t\t */\n\t\tonInputChanged: function (inputChangedEvent) {\n\t\t\treturn this.dispatchEvent(inputChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Called when the editor's text model has been changed.\n\t\t * @param {Event} inputChangedEvent\n\t\t * @callback\n\t\t */\n\t\tonChanged: function (modelChangedEvent) {\n\t\t\tthis.checkDirty();\n\t\t},\n\t\t/**\n\t\t * Report the message to the user.\n\t\t *\n\t\t * @param {String} message the message to show\n\t\t * @param {String} [type] the message type. Either normal or \"progress\" or \"error\";\n\t\t * @param {Boolean} [isAccessible] If <code>true</code>, a screen reader will read this message.\n\t\t * Otherwise defaults to the domNode default.\n\t\t */\n\t\treportStatus: function(message, type, isAccessible) {\n\t\t\tif (this._statusReporter) {\n\t\t\t\tthis._statusReporter(message, type, isAccessible);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Resizes the editor view. The default implementation does nothing.\n\t\t */\n\t\tresize: function() {\n\t\t},\n\t\t/**\n\t\t * Sets whether the editor is dirty.\n\t\t *\n\t\t * @param {Boolean} dirty\n\t\t */\n\t\tsetDirty: function(dirty) {\n\t\t\tif (this._dirty === dirty) { return; }\n\t\t\tthis._dirty = dirty;\n\t\t\tthis.onDirtyChanged({type: \"DirtyChanged\"}); //$NON-NLS-0$\n\t\t},\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_setModelText: function(contents) {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.setText(contents);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the editor's contents.\n\t\t *\n\t\t * @param {String} title the editor title\n\t\t * @param {String} message an error message\n\t\t * @param {String} contents the editor contents\n\t\t * @param {Boolean} contentsSaved whether the editor contents was saved.\n\t\t */\n\t\tsetInput: function(title, message, contents, contentsSaved) {\n\t\t\tthis._title = title;\n\t\t\tif (!contentsSaved) {\n\t\t\t\tif (message) {\n\t\t\t\t\tthis.reportStatus(message, \"error\"); //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tif (contents !== null && contents !== undefined) {\n\t\t\t\t\t\tif (typeof contents === \"string\") { //$NON-NLS-0$\n\t\t\t\t\t\t\tthis._setModelText(contents);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this._undoStack) {\n\t\t\t\t\t\t\tthis._undoStack.reset();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.checkDirty();\n\t\t\tthis.onInputChanged({\n\t\t\t\ttype: \"InputChanged\", //$NON-NLS-0$\n\t\t\t\ttitle: title,\n\t\t\t\tmessage: message,\n\t\t\t\tcontents: contents,\n\t\t\t\tcontentsSaved: contentsSaved\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The character at the end offset is not replaced.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} text the new text.\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tthis.getModel().setText(text, start, end);\n\t\t},\n\t\t/**\n\t\t * Removes the DOM hierarchy of the editor from the document.\n\t\t */\n\t\tuninstall: function() {\n\t\t\tthis.installed = false;\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(BaseEditor.prototype);\n\n\t/**\n\t * @name orion.editor.Editor\n\t * @augments orion.editor.BaseEditor\n\t * @class An <code>Editor</code> is a user interface for editing text that provides additional features over the basic {@link orion.editor.TextView}.\n\t * Some of <code>Editor</code>'s features include:\n\t * <ul>\n\t * <li>Additional actions and key bindings for editing text</li>\n\t * <li>Content assist</li>\n\t * <li>Find and Incremental Find</li>\n\t * <li>Rulers for displaying line numbers and annotations</li>\n\t * <li>Status reporting</li>\n\t * </ul>\n\t *\n\t * @description Creates a new Editor with the given options.\n\t * @param {Object} options Options controlling the features of this Editor.\n\t * @param {Object} options.annotationFactory\n\t * @param {Object} options.contentAssistFactory\n\t * @param {Object} options.domNode\n\t * @param {Object} options.keyBindingFactory\n\t * @param {Object} options.lineNumberRulerFactory\n\t * @param {Object} options.zoomRulerFactory\n\t * @param {Object} options.foldingRulerFactory\n\t * @param {Object} options.statusReporter\n\t * @param {Object} options.textViewFactory\n\t * @param {Object} options.undoStackFactory\n\t * @param {Object} options.textDNDFactory\n\t * @param {Object} options.hoverFactory\n\t */\n\tfunction Editor(options) {\n\t\toptions = options || {};\n\t\tBaseEditor.call(this, options);\n\t\tthis._textViewFactory = options.textViewFactory;\n\t\tthis._undoStackFactory = options.undoStackFactory;\n\t\tthis._textDNDFactory = options.textDNDFactory;\n\t\tthis._annotationFactory = options.annotationFactory;\n\t\tthis._zoomRulerFactory = options.zoomRulerFactory;\n\t\tthis._foldingRulerFactory = options.foldingRulerFactory;\n\t\tthis._lineNumberRulerFactory = options.lineNumberRulerFactory;\n\t\tthis._contentAssistFactory = options.contentAssistFactory;\n\t\tthis._keyBindingFactory = options.keyBindingFactory;\n\t\tthis._hoverFactory = options.hoverFactory;\n\t\tthis._syntaxHighlighter = options.syntaxHighlighter;\n\t\tthis._annotationStyler = null;\n\t\tthis._annotationModel = null;\n\t\tthis._annotationRuler = null;\n\t\tthis._lineNumberRuler = null;\n\t\tthis._overviewRuler = null;\n\t\tthis._zoomRuler = null;\n\t\tthis._foldingRuler = null;\n\t\tthis._contentAssist = null;\n\t}\n\tEditor.prototype = new BaseEditor();\n\tobjects.mixin(Editor.prototype, /** @lends orion.editor.Editor.prototype */ {\n\t\t/**\n\t\t * Destroys the editor.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tBaseEditor.prototype.destroy.call(this);\n\t\t\tthis._textViewFactory = this._undoStackFactory = this._textDNDFactory = \n\t\t\tthis._annotationFactory = this._foldingRulerFactory = this._lineNumberRulerFactory = \n\t\t\tthis._contentAssistFactory = this._keyBindingFactory = this._hoverFactory = this._zoomRulerFactory = null;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation model of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationModel}\n\t\t */\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationRuler}\n\t\t */\n\t\tgetAnnotationRuler: function() {\n\t\t\treturn this._annotationRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether annotation ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetAnnotationRulerVisible: function() {\n\t\t\treturn this._annotationRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation styler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationStyler}\n\t\t */\n\t\tgetAnnotationStyler: function() {\n\t\t\treturn this._annotationStyler;\n\t\t},\n\t\t/**\n\t\t * Returns the content assist of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetContentAssist: function() {\n\t\t\treturn this._contentAssist;\n\t\t},\n\t\t/**\n\t\t * Returns the folding ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.FoldingRuler}\n\t\t */\n\t\tgetFoldingRuler: function() {\n\t\t\treturn this._foldingRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether folding ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetFoldingRulerVisible: function() {\n\t\t\treturn this._foldingRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the line number ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetLineNumberRuler: function() {\n\t\t\treturn this._lineNumberRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether lines ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetLineNumberRulerVisible: function() {\n\t\t\treturn this._lineNumberRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the Tooltip instance for this editor\n\t\t *\n\t\t * @returns {orion.editor.Tooltip}\n\t\t*/\n\t\tgetTooltip: function() {\n\t\t\treturn mTooltip.Tooltip.getTooltip(this._textView, this);\n\t\t},\n\t\t/**\n\t\t * Returns the zoom ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetZoomRuler: function() {\n\t\t\treturn this._zoomRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether zoom ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetZoomRulerVisible: function() {\n\t\t\treturn this._zoomRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the base text model of this editor.\n\t\t *\n\t\t * @returns {orion.editor.TextModel}\n\t\t */\n\t\tgetModel: function() {\n\t\t\tif (!this._textView) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar model = this._textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model;\n\t\t},\n\t\t/**\n\t\t * Returns the overview ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.OverviewRuler}\n\t\t */\n\t\tgetOverviewRuler: function() {\n\t\t\treturn this._overviewRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the underlying <code>TextView</code> used by this editor.\n\t\t * @returns {orion.editor.TextView} the editor text view.\n\t\t */\n\t\tgetTextView: function() {\n\t\t\treturn this._textView;\n\t\t},\n\t\t/**\n\t\t * Returns the editor's key modes.\n\t\t *\n\t\t * @returns {Array} the editor key modes.\n\t\t */\n\t\tgetKeyModes: function() {\n\t\t\treturn this._textView.getKeyModes();\n\t\t},\n\t\t/**\n\t\t * Returns the editor source code actions.\n\t\t *\n\t\t * @returns {orion.editor.sourceCodeActions}\n\t\t */\n\t\tgetSourceCodeActions: function() {\n\t\t\treturn this._sourceCodeActions;\n\t\t},\n\t\t/**\n\t\t * Returns the editor linked mode.\n\t\t *\n\t\t * @returns {orion.editor.LinkedMode}\n\t\t */\n\t\tgetLinkedMode: function() {\n\t\t\treturn this._linkedMode;\n\t\t},\n\t\t/**\n\t\t * Returns the editor text actions.\n\t\t *\n\t\t * @returns {orion.editor.textActions}\n\t\t */\n\t\tgetTextActions: function() {\n\t\t\treturn this._textActions;\n\t\t},\n\t\t/**\n\t\t * Gives focus to the text view.\n\t\t */\n\t\tfocus: function() {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.focus();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Resizes the text view.\n\t\t */\n\t\tresize: function() {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.resize();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the annotation ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetAnnotationRulerVisible: function(visible, force) {\n\t\t\tif (this._annotationRulerVisible === visible && !force) { return; }\n\t\t\tthis._annotationRulerVisible = visible;\n\t\t\tif (!this._annotationRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._annotationRuler, 0);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._annotationRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the folding ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetFoldingRulerVisible: function(visible, force) {\n\t\t\tif (this._foldingRulerVisible === visible && !force) { return; }\n\t\t\tif (!visible) {\n\t\t\t\tvar textActions = this.getTextActions();\n\t\t\t\tif (textActions) {\n\t\t\t\t\ttextActions.expandAnnotations(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._foldingRulerVisible = visible;\n\t\t\tif (!this._foldingRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (!textView.getModel().getBaseModel) { return; }\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._foldingRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._foldingRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the line numbering ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetLineNumberRulerVisible: function(visible, force) {\n\t\t\tif (this._lineNumberRulerVisible === visible && !force) { return; }\n\t\t\tthis._lineNumberRulerVisible = visible;\n\t\t\tif (!this._lineNumberRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._lineNumberRuler, !this._annotationRulerVisible ? 0 : 1);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._lineNumberRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the overview ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetOverviewRulerVisible: function(visible, force) {\n\t\t\tif (this._overviewRulerVisible === visible && !force) { return; }\n\t\t\tthis._overviewRulerVisible = visible;\n\t\t\tif (!this._overviewRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._overviewRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._overviewRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the zoom ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetZoomRulerVisible: function(visible, force) {\n\t\t\tif (this._zoomRulerVisible === visible && !force) { return; }\n\t\t\tthis._zoomRulerVisible = visible;\n\t\t\tif (!this._zoomRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._zoomRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._zoomRuler);\n\t\t\t}\n\t\t},\n\n\t\tmapOffset: function(offset, _parent) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\toffset = model.mapOffset(offset, _parent);\n\t\t\t}\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * @name getLineAtOffset\n\t\t * @description Returns the line number corresponding to the given offset in the source\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.Editor\n\t\t * @param {Number} offset The offset into the source\n\t\t * @returns {Number} The line number corresponding to the given offset or <code>-1</code> if out of range\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\treturn this.getModel().getLineAtOffset(this.mapOffset(offset));\n\t\t},\n\t\t/**\n\t\t * @name getLineStart\n\t\t * @description Compute the editor start offset of the given line number\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} line The line number in the editor\n\t\t * @returns {Number} Returns the start offset of the given line number in the editor.\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineStart: function(line) {\n\t\t\treturn this.getModel().getLineStart(line);\n\t\t},\n\t\tgetCaretOffset: function() {\n\t\t\treturn this.mapOffset(this._textView.getCaretOffset());\n\t\t},\n\t\t\n\t\t/**\n\t\t * Returns the text view selection text.\n\t\t * <p>\n\t\t * If there are multiple selection ranges, the result is concatenated with the specified delimiter.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} delimiter The offset into the editor\n\t\t * @returns {String} the view selection text\n\t\t * @since 10.0\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelectionText: function(delimiter) {\n\t\t\tvar textView = this._textView;\n\t\t\treturn textView.getSelectionText(delimiter);\n\t\t},\n\t\t\n\t\tgetSelection: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tvar selection = textView.getSelection();\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tselection.start = model.mapOffset(selection.start);\n\t\t\t\tselection.end = model.mapOffset(selection.end);\n\t\t\t}\n\t\t\treturn selection;\n\t\t},\n\n\t\tgetSelections: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tvar selections = textView.getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tselection.start = model.mapOffset(selection.start);\n\t\t\t\t\tselection.end = model.mapOffset(selection.end);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn selections;\n\t\t},\n\n\t\tgetStyleAccessor: function() {\n\t\t\tvar styleAccessor = null;\n\t\t\tif (this._syntaxHighlighter) {\n\t\t\t\tvar styler = this._syntaxHighlighter.getStyler();\n\t\t\t\tif (styler && styler.getStyleAccessor) {\n\t\t\t\t\tstyleAccessor = styler.getStyleAccessor();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn styleAccessor;\n\t\t},\n\n\t\t_expandOffset: function(offset) {\n\t\t\tvar model = this._textView.getModel();\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel || !model.getBaseModel) { return; }\n\t\t\tvar annotations = annotationModel.getAnnotations(offset, offset + 1);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (annotation.type === AT.ANNOTATION_FOLDING) {\n\t\t\t\t\tif (annotation.expand) {\n\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsetCaretOffset: function(caretOffset, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tthis._expandOffset(caretOffset);\n\t\t\t\tcaretOffset = model.mapOffset(caretOffset, true);\n\t\t\t}\n\t\t\ttextView.setCaretOffset(caretOffset, show, callback);\n\t\t},\n\n\t\tsetText: function(text, start, end, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tif (start !== undefined) {\n\t\t\t\t\tthis._expandOffset(start);\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t}\n\t\t\t\tif (end !== undefined) {\n\t\t\t\t\tthis._expandOffset(end);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttextView.setText(text, start, end, show, callback);\n\t\t},\n\n\t\tsetSelection: function(start, end, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tthis._expandOffset(start);\n\t\t\t\tthis._expandOffset(end);\n\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t}\n\t\t\ttextView.setSelection(start, end, show, callback);\n\t\t},\n\t\tsetSelections: function(ranges, show, callback) {\n\t\t\tvar that = this;\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tranges.forEach(function(range) {\n\t\t\t\tvar start = range.start;\n\t\t\t\tvar end = range.end;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tthat._expandOffset(start);\n\t\t\t\t\tthat._expandOffset(end);\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\trange.start = start;\n\t\t\t\trange.end = end;\n\t\t\t});\n\t\t\ttextView.setSelections(ranges, show, callback);\n\t\t},\n\n\t\t/**\n\t\t * @param {Number} start\n\t\t * @param {Number} [end]\n\t\t * @param {function} [callback] if callback is specified, scrolling to show the selection is animated and callback is called when the animation is done.\n\t\t * @param {Boolean} [focused=true] whether the text view should be focused when the selection is done.\n\t\t * @private\n\t\t * @deprecated use #setSelection instead\n\t\t */\n\t\tmoveSelection: function(start, end, callback, focused) {\n\t\t\tend = end || start;\n\t\t\tvar textView = this._textView;\n\t\t\tthis.setSelection(start, end, 1 / 3, function() {\n\t\t\t\tif (focused === undefined || focused) {\n\t\t\t\t\ttextView.focus();\n\t\t\t\t}\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/** @private */\n\t\t_getTooltipInfo: function(x, y) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\tif (!annotationModel) { return null; }\n\t\t\tvar annotationStyler = this._annotationStyler;\n\t\t\tif (!annotationStyler) { return null; }\n\t\t\tif (!textView.isValidTextPosition(x, y)) { return null; }\n\t\t\tvar offset = textView.getOffsetAtLocation(x, y);\n\t\t\tif (offset === -1) { return null; }\n\t\t\toffset = this.mapOffset(offset);\n\t\t\tvar annotations = annotationStyler.getAnnotationsByType(annotationModel, offset, offset + 1);\n\t\t\tvar rangeAnnotations = [];\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tif (annotations[i].rangeStyle) {\n\t\t\t\t\trangeAnnotations.push(annotations[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar info = {\n\t\t\t\tcontents: rangeAnnotations,\n\t\t\t\tposition: \"below\", //$NON-NLS-0$\n\t\t\t\tcontext: {source: \"editor\", offset: offset} //$NON-NLS-0$\n\t\t\t};\n\t\t\treturn info;\n\t\t},\n\n\t\t/** @private */\n\t\t_highlightCurrentLine: function(newSelections, oldSelections) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (textView.getOptions(\"singleMode\")) { return; } //$NON-NLS-0$\n\t\t\toldSelections = Array.isArray(oldSelections) ? oldSelections : [oldSelections];\n\t\t\tnewSelections = Array.isArray(newSelections) ? newSelections : [newSelections];\n\t\t\tvar model = textView.getModel();\n\t\t\tfunction getHighlightLines(selections) {\n\t\t\t\tvar lines = {};\n\t\t\t\tif (selections && selections.some(function(selection) {\n\t\t\t\t\tif (selection && selection.isEmpty()) {\n\t\t\t\t\t\tlines[model.getLineAtOffset(selection.start).toString()] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t})) return {};\n\t\t\t\treturn lines;\n\t\t\t}\n\t\t\tvar oldLines = getHighlightLines(oldSelections);\n\t\t\tvar newLines = getHighlightLines(newSelections);\n\t\t\tfunction compare(o, n) {\n\t\t\t\tfor (var p1 in o) {\n\t\t\t\t\tif (!n[p1]) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!(compare(oldLines, newLines) || compare(newLines, oldLines))) return;\n\t\t\tvar remove = this._currentLineAnnotations;\n\t\t\tvar add = [];\n\t\t\tfor (var p in newLines) {\n\t\t\t\tvar lineIndex = p >> 0;\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tvar type = AT.ANNOTATION_CURRENT_LINE;\n\t\t\t\tvar annotation = AT.createAnnotation(type, start, end);\n\t\t\t\tadd.push(annotation);\n\t\t\t}\n\t\t\tthis._currentLineAnnotations = add;\n\t\t\tannotationModel.replaceAnnotations(remove, add);\n\t\t},\n\n\t\t/**\n\t\t * Creates the underlying TextView and installs the editor's features.\n\t\t */\n\t\tinstallTextView: function() {\n\t\t\tthis.install();\n\t\t},\n\n\t\tinstall : function() {\n\t\t\tif (this._textView) { return; }\n\n\t\t\t// Create textView and install optional features\n\t\t\tthis._textView = this._textViewFactory();\n\t\t\tif (this._undoStackFactory) {\n\t\t\t\tthis._undoStack = this._undoStackFactory.createUndoStack(this);\n\t\t\t\tthis._textView.setOptions({undoStack: this._undoStack});\n\t\t\t\tthis.checkDirty();\n\t\t\t}\n\t\t\tif (this._textDNDFactory) {\n\t\t\t\tthis._textDND = this._textDNDFactory.createTextDND(this, this._undoStack);\n\t\t\t}\n\t\t\tif (this._contentAssistFactory) {\n\t\t\t\tvar contentAssistMode = this._contentAssistFactory.createContentAssistMode(this);\n\t\t\t\tthis._contentAssist = contentAssistMode.getContentAssist();\n\t\t\t}\n\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._textView, this);\n\t\t\tif (this._hoverFactory) {\n\t\t\t\tthis._hover = this._hoverFactory.createHover(this);\n\t\t\t\ttooltip.hover = this._hover;\n\t\t\t}\n\t\t\t\n\t\t\tvar editor = this, textView = this._textView;\n\n\t\t\tvar that = this;\n\t\t\tthis._listener = {\n\t\t\t\tonModelChanged: /* @callback */ function(e) {\n\t\t\t\t\tthat.checkDirty();\n\t\t\t\t},\n\t\t\t\tonMouseOver: function(e) {\n\t\t\t\t\tthat._listener.onMouseMove(e);\n\t\t\t\t},\n\t\t\t\tonMouseDown: /* @callback */ function(e) {\n\t\t\t\t\tthat._listener.mouseDown = true;\n\t\t\t\t},\n\t\t\t\tonMouseUp: /* @callback */ function(e) {\n\t\t\t\t\tthat._listener.mouseDown = false;\n\t\t\t\t},\n\t\t\t\tonMouseMove: function(e) {\n\t\t\t\t\tif (!tooltip || that._listener.mouseDown) { return; }\n\n\t\t\t\t\t// Prevent spurious mouse event (e.g. on a scroll)\t\t\t\t\t\n\t\t\t\t\tif (e.event.clientX === that._listener.lastMouseX\n\t\t\t\t\t\t&& e.event.clientY === that._listener.lastMouseY) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthat._listener.lastMouseX = e.event.clientX;\n\t\t\t\t\tthat._listener.lastMouseY = e.event.clientY;\n\n\t\t\t\t\tif (that._hoverTimeout) {\n\t\t\t\t\t\twindow.clearTimeout(that._hoverTimeout);\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t}\n\t\t\t\t\tthat._hoverTimeout = window.setTimeout(function() {\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Re-check incase editor closed...\n\t\t\t\t\t\tif (!that._listener){\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\ttooltip.onHover({\n\t\t\t\t\t\t\ty: e.y,\n\t\t\t\t\t\t\tx: e.x,\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tgetTooltipInfo: function() {\n\t\t\t\t\t\t\t\treturn that._getTooltipInfo(this.x, this.y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, e.x, e.y);\n\t\t\t\t\t}, 175);\n\t\t\t\t},\n\t\t\t\tonMouseOut: /* @callback */ function(e) {\n\t\t\t\t\t// When mouse leaves the editor, ignore any pending onMouseMove events\n\t\t\t\t\tif (that._hoverTimeout) {\n\t\t\t\t\t\twindow.clearTimeout(that._hoverTimeout);\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSelection: function(e) {\n\t\t\t\t\tif (tooltip) { tooltip.hide(); }\n\t\t\t\t\tthat._updateCursorStatus();\n\t\t\t\t\tthat._highlightCurrentLine(e.newValue, e.oldValue);\n\t\t\t\t}\n\t\t\t};\n\t\t\ttextView.addEventListener(\"ModelChanged\", this._listener.onModelChanged); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseOver\", this._listener.onMouseOver); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseOut\", this._listener.onMouseOut); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseUp\", this._listener.onMouseUp); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseMove\", this._listener.onMouseMove); //$NON-NLS-0$\n\n\t\t\t// Set up keybindings\n\t\t\tif (this._keyBindingFactory) {\n\t\t\t\tvar keyBindings;\n\t\t\t\tif (typeof this._keyBindingFactory === \"function\") { //$NON-NLS-0$\n\t\t\t\t\tkeyBindings = this._keyBindingFactory(this, this.getKeyModes(), this._undoStack, this._contentAssist);\n\t\t\t\t} else {\n\t\t\t\t\tkeyBindings = this._keyBindingFactory.createKeyBindings(editor, this._undoStack, this._contentAssist);\n\t\t\t\t}\n\t\t\t\tif (keyBindings) {\n\t\t\t\t\tthis._textActions = keyBindings.textActions;\n\t\t\t\t\tthis._linkedMode = keyBindings.linkedMode;\n\t\t\t\t\tthis._sourceCodeActions = keyBindings.sourceCodeActions;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar addRemoveBookmark = /* @callback */ function(lineIndex, e) {\n\t\t\t\tif (lineIndex === undefined) { return; }\n\t\t\t\tif (lineIndex === -1) { return; }\n\t\t\t\tvar view = this.getView();\n\t\t\t\tvar viewModel = view.getModel();\n\t\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\t\tvar lineStart = editor.mapOffset(viewModel.getLineStart(lineIndex));\n\t\t\t\tvar lineEnd = editor.mapOffset(viewModel.getLineEnd(lineIndex));\n\t\t\t\tvar annotations = annotationModel.getAnnotations(lineStart, lineEnd);\n\t\t\t\tvar bookmark = null;\n\t\t\t\twhile (annotations.hasNext()) {\n\t\t\t\t\tvar annotation = annotations.next();\n\t\t\t\t\tif (annotation.type === AT.ANNOTATION_BOOKMARK) {\n\t\t\t\t\t\tbookmark = annotation;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (bookmark) {\n\t\t\t\t\tannotationModel.removeAnnotation(bookmark);\n\t\t\t\t} else {\n\t\t\t\t\tbookmark = AT.createAnnotation(AT.ANNOTATION_BOOKMARK, lineStart, lineEnd, editor.getText(lineStart, lineEnd));\n\t\t\t\t\tannotationModel.addAnnotation(bookmark);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Create rulers, annotation model and styler\n\t\t\tif (this._annotationFactory) {\n\t\t\t\tvar textModel = textView.getModel();\n\t\t\t\tif (textModel.getBaseModel) { textModel = textModel.getBaseModel(); }\n\t\t\t\tthis._annotationModel = this._annotationFactory.createAnnotationModel(textModel);\n\t\t\t\tif (this._annotationModel) {\n\t\t\t\t\tvar styler = this._annotationStyler = this._annotationFactory.createAnnotationStyler(textView, this._annotationModel);\n\t\t\t\t\tif (styler) {\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_SEARCH);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_MATCHING_SEARCH);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_MATCHING_BRACKET);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_BRACKET);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_LINE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_READ_OCCURRENCE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_WRITE_OCCURRENCE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_SELECTED_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(HIGHLIGHT_ERROR_ANNOTATION);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar rulers = this._annotationFactory.createAnnotationRulers(this._annotationModel);\n\t\t\t\tvar ruler = this._annotationRuler = rulers.annotationRuler;\n\t\t\t\tif (ruler) {\n\t\t\t\t\truler.onDblClick = addRemoveBookmark;\n\t\t\t\t\truler.setMultiAnnotationOverlay({html: \"<div class='annotationHTML overlay'></div>\"}); //$NON-NLS-0$\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_TASK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_BOOKMARK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\t\t\t\t}\n\t\t\t\tthis.setAnnotationRulerVisible(this._annotationRulerVisible || this._annotationRulerVisible === undefined, true);\n\n\t\t\t\t// Overview Ruler Annotation Type\n\t\t\t\truler = this._overviewRuler = rulers.overviewRuler;\n\t\t\t\tif (ruler) {\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_SEARCH);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_MATCHING_SEARCH);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_READ_OCCURRENCE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WRITE_OCCURRENCE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_BLAME);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_TASK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_BOOKMARK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_MATCHING_BRACKET);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_BRACKET);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_LINE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\n\t\t\t\t}\n\t\t\t\tthis.setOverviewRulerVisible(this._overviewRulerVisible || this._overviewRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tif (this._zoomRulerFactory) {\n\t\t\t\tthis._zoomRuler = this._zoomRulerFactory.createZoomRuler(this._annotationModel);\n\t\t\t\tthis.setZoomRulerVisible(this._zoomRulerVisible, true);\n\t\t\t}\n\n\t\t\tif (this._lineNumberRulerFactory) {\n\t\t\t\tthis._lineNumberRuler = this._lineNumberRulerFactory.createLineNumberRuler(this._annotationModel);\n\t\t\t\tthis._lineNumberRuler.addAnnotationType(AT.ANNOTATION_CURRENT_BLAME);\n\t\t\t\tthis._lineNumberRuler.addAnnotationType(AT.ANNOTATION_BLAME);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\tthis._lineNumberRuler.onDblClick = addRemoveBookmark;\n\t\t\t\tthis.setLineNumberRulerVisible(this._lineNumberRulerVisible || this._lineNumberRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tif (this._foldingRulerFactory) {\n\t\t\t\tthis._foldingRuler = this._foldingRulerFactory.createFoldingRuler(this._annotationModel);\n\t\t\t\tthis._foldingRuler.addAnnotationType(AT.ANNOTATION_FOLDING);\n\t\t\t\tthis.setFoldingRulerVisible(this._foldingRulerVisible || this._foldingRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tvar textViewInstalledEvent = {\n\t\t\t\ttype: \"TextViewInstalled\", //$NON-NLS-0$\n\t\t\t\ttextView: textView\n\t\t\t};\n\t\t\tthis.dispatchEvent(textViewInstalledEvent);\n\t\t\tBaseEditor.prototype.install.call(this);\n\t\t},\n\n\t\t/**\n\t\t * Destroys the underlying TextView.\n\t\t */\n\t\tuninstallTextView: function() {\n\t\t\tthis.uninstall();\n\t\t},\n\n\t\tuninstall: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tif (!textView) { return; }\n\n\t\t\ttextView.destroy();\n\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.setTextModel(null);\n\t\t\t}\n\t\t\tthis._textView = this._undoStack = this._textDND = this._contentAssist =\n\t\t\t\tthis._listener = this._annotationModel = this._annotationStyler =\n\t\t\t\tthis._annotationRuler = this._overviewRuler = this._zoomRuler = this._lineNumberRuler =\n\t\t\t\tthis._foldingRuler = this._currentLineAnnotations = this._title = null;\n\t\t\tthis._dirty = false;\n\t\t\tthis._foldingRulerVisible = this._overviewRulerVisible = this._zoomRulerVisible =\n\t\t\t\tthis._lineNumberRulerVisible = this._annotationRulerVisible = undefined;\n\n\t\t\tvar textViewUninstalledEvent = {\n\t\t\t\ttype: \"TextViewUninstalled\", //$NON-NLS-0$\n\t\t\t\ttextView: textView\n\t\t\t};\n\t\t\tthis.dispatchEvent(textViewUninstalledEvent);\n\t\t\tBaseEditor.prototype.uninstall.call(this);\n\t\t},\n\n\t\t_updateCursorStatus: function() {\n\t\t\t// If we are in a mode and it owns status reporting, we bail out from reporting the cursor position.\n\t\t\tvar keyModes = this.getKeyModes();\n\t\t\tfor (var i=0; i<keyModes.length; i++) {\n\t\t\t\tvar mode = keyModes[i];\n\t\t\t\tif (mode.isActive() && mode.isStatusActive && mode.isStatusActive()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar _status;\n\t\t\tvar model = this.getModel();\n\t\t\tvar selections = this.getSelections();\n\t\t\tif (selections.length > 1) {\n\t\t\t\t_status = util.formatMessage(messages.multiSelections, selections.length);\n\t\t\t} else {\n\t\t\t\tvar caretOffset = selections[0].getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caretOffset);\n\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\tvar offsetInLine = caretOffset - lineStart;\n\t\t\t\tif (localStorage.languageTools){\n\t\t\t\t\t_status = util.formatMessage(messages.lineColumnOffset, lineIndex + 1, offsetInLine + 1, caretOffset);\n\t\t\t\t} else {\n\t\t\t\t\t_status = util.formatMessage(messages.lineColumn, lineIndex + 1, offsetInLine + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.reportStatus(_status);\n\t\t},\n\n\t\tshowAnnotations: function(annotations, types, createAnnotation, getType) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar remove = [], add = [];\n\t\t\tvar model = annotationModel.getTextModel();\n\t\t\tvar iter = annotationModel.getAnnotations(), annotation;\n\t\t\twhile (iter.hasNext()) {\n\t\t\t\tannotation = iter.next();\n\t\t\t\tif (types.indexOf(annotation.type) !== -1) {\n\t\t\t\t\tif (annotation.creatorID === this) {\n\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (annotations) {\n\t\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\t\tannotation = annotations[i];\n\t\t\t\t\tif (!annotation) { continue; }\n\t\t\t\t\tif (createAnnotation) {\n\t\t\t\t\t\tannotation = createAnnotation(annotation);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar start, end;\n\t\t\t\t\t\tif (annotation.lineStart && annotation.lineEnd){\n\t\t\t\t\t\t\tstart = model.getLineStart(annotation.lineStart);\n\t\t\t\t\t\t\t// If the closing line number of the modified range is on the last line,\n\t\t\t\t\t\t\t// get the line ending offset of the previous line\n\t\t\t\t\t\t\tend = model.getLineCount() === annotation.lineEnd\n\t\t\t\t\t\t\t\t\t\t? model.getLineEnd(annotation.lineEnd - 1)\n\t\t\t\t\t\t\t\t\t\t: model.getLineStart(annotation.lineEnd);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (typeof annotation.line === \"number\") { //$NON-NLS-0$\n\t\t\t\t\t\t\t// line/column\n\t\t\t\t\t\t\tvar lineIndex = annotation.line - 1;\n\t\t\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tstart = lineStart + annotation.start - 1;\n\t\t\t\t\t\t\tend = lineStart + annotation.end - 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// document offsets\n\t\t\t\t\t\t\tstart = annotation.start;\n\t\t\t\t\t\t\tend = annotation.end;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar type = getType(annotation);\n\t\t\t\t\t\tif (!type) { continue; }\n\t\t\t\t\t\tannotation = AT.createAnnotation(type, start, end, annotation.description);\n\t\t\t\t\t}\n\t\t\t\t\tannotation.id = annotations[i].id; //allow consumers to tag the annotation with their own identifier\n\t\t\t\t\tif(annotations[i].data) {\n\t\t\t\t\t\tannotation.data = annotations[i].data;\n\t\t\t\t\t}\n\t\t\t\t\tannotation.creatorID = this;\n\t\t\t\t\tadd.push(annotation);\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotationModel.replaceAnnotations(remove, add);\n\t\t},\n\n\t\tshowProblems: function(problems) {\n\t\t\tthis.showAnnotations(problems, [\n\t\t\t\tAT.ANNOTATION_ERROR,\n\t\t\t\tAT.ANNOTATION_WARNING,\n\t\t\t\tAT.ANNOTATION_TASK\n\t\t\t], null, function(annotation) {\n\t\t\t\tswitch (annotation.severity) {\n\t\t\t\t\tcase \"error\": return AT.ANNOTATION_ERROR; //$NON-NLS-0$\n\t\t\t\t\tcase \"warning\": return AT.ANNOTATION_WARNING; //$NON-NLS-0$\n\t\t\t\t\tcase \"task\": return AT.ANNOTATION_TASK; //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t});\n\t\t},\n\n\t\tshowOccurrences: function(occurrences) {\n\t\t\tthis.showAnnotations(occurrences, [\n\t\t\t\tAT.ANNOTATION_READ_OCCURRENCE,\n\t\t\t\tAT.ANNOTATION_WRITE_OCCURRENCE\n\t\t\t], null, function(annotation) {\n\t\t\t\treturn annotation.readAccess ? AT.ANNOTATION_READ_OCCURRENCE : AT.ANNOTATION_WRITE_OCCURRENCE;\n\t\t\t});\n\t\t},\n\n\t\tshowBlame : function(blameMarkers) {\n\t\t\tvar blameRGB = this._blameRGB;\n\t\t\tvar doc = this.getTextView().getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\n\t\t\tif (!blameRGB) {\n\t\t\t\tvar div = util.createElement(doc, \"div\"); //$NON-NLS-0$\n\t\t\t\tdiv.className = \"annotation blame\"; //$NON-NLS-0$\n\t\t\t\tdoc.body.appendChild(div);\n\t\t\t\tvar win = doc.defaultView || doc.parentWindow;\n\t\t\t\tvar blameStyle = win.getComputedStyle(div);\n\t\t\t\tvar color = blameStyle.getPropertyValue(\"background-color\"); //$NON-NLS-0$\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t\tvar i1 = color.indexOf(\"(\"); //$NON-NLS-0$\n\t\t\t\tvar i2 = color.indexOf(\")\"); //$NON-NLS-0$\n\t\t\t\tcolor = color.substring(i1 + 1, i2);\n\t\t\t\tthis._blameRGB = blameRGB = color.split(\",\").slice(0,3); //$NON-NLS-0$\n\t\t\t}\n\t\t\tvar createGroup = function() {\n\t\t\t\tvar annotation = mAnnotations.AnnotationType.createAnnotation(this.groupType, this.start, this.end, this.title);\n\t\t\t\tannotation.style = objects.mixin({}, annotation.style);\n\t\t\t\tannotation.style.style = objects.mixin({}, annotation.style.style);\n\t\t\t\tannotation.style.style.backgroundColor = \"\";\n\t\t\t\tthis.groupAnnotation = annotation;\n\t\t\t\tannotation.blame = this.blame;\n\t\t\t\tannotation.html = this.html;\n\t\t\t\tannotation.creatorID = this.creatorID;\n\t\t\t\treturn annotation;\n\t\t\t};\n\t\t\tvar title = function() {\n\t\t\t\tvar titleDiv = util.createElement(doc, \"div\"); //$NON-NLS-0$\n\t\t\t\ttitleDiv.className = \"tooltipTitle\"; //$NON-NLS-0$\n\t\t\t\tvar index = this.blame.Message.indexOf(\"\\n\"); //$NON-NLS-0$\n\t\t\t\tif (index === -1) { index = this.blame.Message.length; }\n\t\t\t\tvar commitLink = util.createElement(doc, \"a\"); //$NON-NLS-0$\n\t\t\t\tcommitLink.href = this.blame.CommitLink;\n\t\t\t\tcommitLink.appendChild(doc.createTextNode(this.blame.Message.substring(0, index)));\n\t\t\t\ttitleDiv.appendChild(commitLink);\n\t\t\t\ttitleDiv.appendChild(util.createElement(doc, \"br\")); //$NON-NLS-0$\n\t\t\t\ttitleDiv.appendChild(doc.createTextNode(util.formatMessage(messages.committerOnTime, this.blame.AuthorName, this.blame.Time)));\n\t\t\t\treturn titleDiv;\n\t\t\t};\n\t\t\tvar model = this.getModel();\n\t\t\tthis.showAnnotations(blameMarkers, [\n\t\t\t\tAT.ANNOTATION_BLAME,\n\t\t\t\tAT.ANNOTATION_CURRENT_BLAME\n\t\t\t], function (blameMarker) {\n\t\t\t\tvar start = model.getLineStart(blameMarker.Start - 1);\n\t\t\t\tvar end = model.getLineEnd(blameMarker.End - 1, true);\n\t\t\t\tvar annotation = mAnnotations.AnnotationType.createAnnotation(AT.ANNOTATION_BLAME, start, end, title);\n\t\t\t\tvar blameColor = blameRGB.slice(0);\n\t\t\t\tblameColor.push(blameMarker.Shade);\n\t\t\t\tannotation.style = objects.mixin({}, annotation.style);\n\t\t\t\tannotation.style.style = objects.mixin({}, annotation.style.style);\n\t\t\t\tannotation.style.style.backgroundColor = \"rgba(\" + blameColor.join() + \")\"; //$NON-NLS-0$ //$NON-NLS-1$\n\t\t\t\tannotation.groupId = blameMarker.Name;\n\t\t\t\tannotation.groupType = AT.ANNOTATION_CURRENT_BLAME;\n\t\t\t\tannotation.createGroupAnnotation = createGroup;\n\t\t\t\tannotation.html = '<img class=\"annotationHTML blame\" src=\"' + blameMarker.AuthorImage + '\"/>'; //$NON-NLS-0$ //$NON-NLS-1$\n\t\t\t\tannotation.blame = blameMarker;\n\t\t\t\treturn annotation;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Display git diff annotation on the editor's annotation ruler and overview ruler.\n\t\t *\n\t\t * @param diffs [] with types \"added\", \"modified\", \"deleted\"\n\t\t * \t\tEach property in diffs contains an array of objects { lineStart, lineEnd } that\n\t\t * \t\tprovides the starting and ending line index for the specified property.\n\t\t */\n\t\tshowDiffAnnotations: function(diffs) {\n\t\t\tthis.showAnnotations(diffs, [\n\t\t\t\tAT.ANNOTATION_DIFF_ADDED,\n\t\t\t\tAT.ANNOTATION_DIFF_MODIFIED,\n\t\t\t\tAT.ANNOTATION_DIFF_DELETED\n\t\t\t], null, function(annotation) {\n\t\t\t\tif(annotation.type === \"added\")//$NON-NLS-0$\n\t\t\t\t\treturn AT.ANNOTATION_DIFF_ADDED;\n\t\t\t\telse if (annotation.type === \"modified\")//$NON-NLS-0$\n\t\t\t\t\treturn AT.ANNOTATION_DIFF_MODIFIED;\n\t\t\t\treturn AT.ANNOTATION_DIFF_DELETED; // assume deleted if not added or modified\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Reveals and selects a portion of text.\n\t\t * @param {Number} start\n\t\t * @param {Number} end\n\t\t * @param {Number} line\n\t\t * @param {Number} offset\n\t\t * @param {Number} length\n\t\t */\n\t\tshowSelection: function(start, end, line, offset, len) {\n\t\t\t// We use typeof because we need to distinguish the number 0 from an undefined or null parameter\n\t\t\tif (typeof(start) === \"number\") { //$NON-NLS-0$\n\t\t\t\tif (typeof(end) !== \"number\") { //$NON-NLS-0$\n\t\t\t\t\tend = start;\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(start, end);\n\t\t\t\treturn true;\n\t\t\t} else if (typeof(line) === \"number\") { //$NON-NLS-0$\n\t\t\t\tvar model = this.getModel();\n\t\t\t\tvar pos = model.getLineStart(line-1);\n\t\t\t\tif (typeof(offset) === \"number\") { //$NON-NLS-0$\n\t\t\t\t\tpos = pos + offset;\n\t\t\t\t}\n\t\t\t\tif (typeof(len) !== \"number\") { //$NON-NLS-0$\n\t\t\t\t\tlen = 0;\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(pos, pos+len);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_setModelText: function(contents) {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.setText(contents);\n\t\t\t\tthis._textView.getModel().setLineDelimiter(\"auto\"); //$NON-NLS-0$\n\t\t\t\tthis._highlightCurrentLine(this._textView.getSelections());\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Sets the editor's contents.\n\t\t *\n\t\t * @param {String} title\n\t\t * @param {String} message\n\t\t * @param {String} contents\n\t\t * @param {Boolean} contentsSaved\n\t\t * @param {Boolean} noFocus\n\t\t */\n\t\tsetInput: function(title, message, contents, contentsSaved, noFocus) {\n\t\t\tBaseEditor.prototype.setInput.call(this, title, message, contents, contentsSaved);\n\t\t\tif (this._textView && !contentsSaved && !noFocus) {\n\t\t\t\tthis._textView.focus();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Reveals a line in the editor, and optionally selects a portion of the line.\n\t\t * @param {Number} line - document base line index\n\t\t * @param {Number|String} column\n\t\t * @param {Number} [end]\n\t\t */\n\t\tonGotoLine: function(line, column, end, callback) {\n\t\t\tif (this._textView) {\n\t\t\t\tvar model = this.getModel();\n\t\t\t\tline = Math.max(0, Math.min(line, model.getLineCount() - 1));\n\t\t\t\tvar lineStart = model.getLineStart(line);\n\t\t\t\tvar start = 0;\n\t\t\t\tif (end === undefined) {\n\t\t\t\t\tend = 0;\n\t\t\t\t}\n\t\t\t\tif (typeof column === \"string\") { //$NON-NLS-0$\n\t\t\t\t\tvar index = model.getLine(line).indexOf(column);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tstart = index;\n\t\t\t\t\t\tend = start + column.length;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstart = column;\n\t\t\t\t\tvar lineLength = model.getLineEnd(line) - lineStart;\n\t\t\t\t\tstart = Math.min(start, lineLength);\n\t\t\t\t\tend = Math.min(end, lineLength);\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(lineStart + start, lineStart + end, callback);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tBaseEditor: BaseEditor,\n\t\tEditor: Editor\n\t};\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/find\", [ //$NON-NLS-0$\r\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\r\n\t'orion/keyBinding', //$NON-NLS-0$\r\n\t'orion/editor/keyModes', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/regex', //$NON-NLS-0$\r\n\t'orion/objects', //$NON-NLS-0$\r\n\t'orion/Deferred', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(messages, mKeyBinding, mKeyModes, mAnnotations, mRegex, objects, Deferred, util) {\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction IncrementalFind(editor) {\r\n\t\tvar textView = editor.getTextView();\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.editor = editor;\r\n\t\tthis._active = false;\r\n\t\tthis._success = true;\r\n\t\tthis._ignoreSelection = false;\r\n\t\tthis._prefix = \"\";\r\n\t\t\r\n\t\ttextView.setAction(\"incrementalFindCancel\", function() { //$NON-NLS-0$\r\n\t\t\tthis.setActive(false);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"incrementalFindBackspace\", function() { //$NON-NLS-0$\r\n\t\t\treturn this._backspace();\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis._listener = {\r\n\t\t\tonVerify: function(e){\r\n\t\t\t\tvar editor = self.editor;\r\n\t\t\t\tvar model = editor.getModel();\r\n\t\t\t\tvar start = editor.mapOffset(e.start), end = editor.mapOffset(e.end);\r\n\t\t\t\tvar txt = model.getText(start, end);\r\n\t\t\t\tvar prefix = self._prefix;\r\n\t\t\t\t// TODO: mRegex is pulled in just for this one call so we can get case-insensitive search\r\n\t\t\t\t// is it really necessary\r\n\t\t\t\tvar match = prefix.match(new RegExp(\"^\" + mRegex.escape(txt), \"i\")); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tif (match && match.length > 0) {\r\n\t\t\t\t\tprefix = self._prefix += e.text;\r\n\t\t\t\t\tself._success = true;\r\n\t\t\t\t\tself._status();\r\n\t\t\t\t\tself.find(self._forward, true);\r\n\t\t\t\t\te.text = null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonSelection: function() {\r\n\t\t\t\tif (!self._ignoreSelection) {\r\n\t\t\t\t\tself.setActive(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tIncrementalFind.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(IncrementalFind.prototype, {\r\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"incrementalFindBackspace\", keyBinding: new KeyBinding(8)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindCancel\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindReverse\", keyBinding: new KeyBinding(38)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFind\", keyBinding: new KeyBinding(40)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindReverse\", keyBinding: new KeyBinding('k', true, true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFind\", keyBinding: new KeyBinding('k', true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\tfind: function(forward, incremental) {\r\n\t\t\tthis._forward = forward;\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\tthis.setActive(true);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar prefix = this._prefix;\r\n\t\t\tif (prefix.length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar start;\r\n\t\t\tif (forward) {\r\n\t\t\t\tif (this._success) {\r\n\t\t\t\t\tstart = incremental ? this._start : editor.getCaretOffset() + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstart = 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this._success) {\r\n\t\t\t\t\tstart = incremental ? this._start : editor.getCaretOffset();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstart = model.getCharCount() - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tDeferred.when(editor.getModel().find({\r\n\t\t\t\tstring: prefix,\r\n\t\t\t\tstart: start,\r\n\t\t\t\treverse: !forward,\r\n\t\t\t\tcaseInsensitive: prefix.toLowerCase() === prefix}), \r\n\t\t\t\tfunction(iterator) {\r\n\t\t\t\t\tvar findResult = iterator.next();\r\n\t\t\t\t\tif (findResult) {\r\n\t\t\t\t\t\tif (!incremental) {\r\n\t\t\t\t\t\t\tthis._start = start;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._success = true;\r\n\t\t\t\t\t\tthis._ignoreSelection = true;\r\n\t\t\t\t\t\teditor.moveSelection(forward ? findResult.start : findResult.end, forward ? findResult.end : findResult.start);\r\n\t\t\t\t\t\tthis._ignoreSelection = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._success = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._status();\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tisActive: function() {\r\n\t\t\treturn this._active;\r\n\t\t},\r\n\t\tisStatusActive: function() {\r\n\t\t\treturn this.isActive();\r\n\t\t},\r\n\t\tsetActive: function(active) {\r\n\t\t\tif (this._active === active) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._active = active;\r\n\t\t\tthis._prefix = \"\";\r\n\t\t\tthis._success = true;\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tthis._start = this.editor.getCaretOffset();\r\n\t\t\tthis.editor.setCaretOffset(this._start);\r\n\t\t\tif (this._active) {\r\n\t\t\t\ttextView.addEventListener(\"Verify\", this._listener.onVerify); //$NON-NLS-0$\r\n\t\t\t\ttextView.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\r\n\t\t\t\ttextView.addKeyMode(this);\r\n\t\t\t} else {\r\n\t\t\t\ttextView.removeEventListener(\"Verify\", this._listener.onVerify); //$NON-NLS-0$\r\n\t\t\t\ttextView.removeEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\r\n\t\t\t\ttextView.removeKeyMode(this);\r\n\t\t\t}\r\n\t\t\tthis._status();\r\n\t\t},\r\n\t\t_backspace: function() {\r\n\t\t\tvar prefix = this._prefix;\r\n\t\t\tprefix = this._prefix = prefix.substring(0, prefix.length-1);\r\n\t\t\tif (prefix.length === 0) {\r\n\t\t\t\tthis._success = true;\r\n\t\t\t\tthis._ignoreSelection = true;\r\n\t\t\t\tthis.editor.setCaretOffset(this.editor.getSelection().start);\r\n\t\t\t\tthis._ignoreSelection = false;\r\n\t\t\t\tthis._status();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn this.find(this._forward, true);\r\n\t\t},\r\n\t\t_status: function() {\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\tthis.editor.reportStatus(\"\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar msg;\r\n\t\t\tif (this._forward) {\r\n\t\t\t\tmsg = this._success ? messages.incrementalFindStr : messages.incrementalFindStrNotFound;\r\n\t\t\t} else {\r\n\t\t\t\tmsg = this._success ? messages.incrementalFindReverseStr : messages.incrementalFindReverseStrNotFound;\r\n\t\t\t}\r\n\t\t\tmsg = util.formatMessage(msg, this._prefix);\r\n\t\t\tthis.editor.reportStatus(msg, this._success ? \"\" : \"error\"); //$NON-NLS-0$\r\n\t\t}\r\n\t});\r\n\texports.IncrementalFind = IncrementalFind;\r\n\t\r\n\t\r\n\tfunction Find(editor, undoStack, options) {\r\n\t\tif (!editor) { return; }\t\r\n\t\tthis._editor = editor;\r\n\t\tthis._undoStack = undoStack;\r\n\t\tthis._showAll = true;\r\n\t\tthis._visible = false;\r\n\t\tthis._caseInsensitive = true;\r\n\t\tthis._wrap = true;\r\n\t\tthis._wholeWord = false;\r\n\t\tthis._incremental = true;\r\n\t\tthis._regex = false;\r\n\t\tthis._findAfterReplace = true;\r\n\t\tthis._hideAfterFind = false;\r\n\t\tthis._reverse = false;\r\n\t\tthis._start = undefined;\r\n\t\tthis._end = undefined;\r\n\t\tthis._timer = undefined;\r\n\t\tthis._lastString = \"\";\r\n\t\tvar that = this;\r\n\t\tthis._listeners = {\r\n\t\t\tonEditorFocus: function(e) {\r\n\t\t\t\tthat._removeCurrentAnnotation(e);\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.setOptions(options);\r\n\t}\r\n\tFind.prototype = {\r\n\t\tfind: function (forward, tempOptions, incremental) {\r\n\t\t\tthis.setOptions({\r\n\t\t\t\treverse : !forward\r\n\t\t\t});\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tvar count;\r\n\t\t\tif (tempOptions) {\r\n\t\t\t\tstring = tempOptions.findString || string;\r\n\t\t\t\tcount =  tempOptions.count;\r\n\t\t\t}\r\n\t\t\tvar savedOptions = this.getOptions();\r\n\t\t\tthis.setOptions(tempOptions);\r\n\t\t\tvar startOffset = incremental ? this._startOffset : this.getStartOffset();\r\n\t\t\treturn this._doFind(string, startOffset, count).then(function(result) {\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tif (!incremental) {\r\n\t\t\t\t\t\tthis._startOffset = result.start;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.setOptions(savedOptions);\r\n\t\t\t\tif (this._hideAfterFind) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tgetStartOffset: function() {\r\n\t\t\tif (this._start !== undefined) {\r\n\t\t\t\treturn this._start;\r\n\t\t\t}\r\n\t\t\tif (this._reverse) {\r\n\t\t\t\treturn this._editor.getSelection().start - 1;\r\n\t\t\t}\r\n\t\t\treturn this._editor.getCaretOffset();\r\n\t\t},\r\n\t\tgetFindString: function() {\r\n\t\t\tvar selection = this._editor.getSelection();\r\n\t\t\tvar searchString = this._editor.getText(selection.start, selection.end);\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tsearchString = mRegex.escape(searchString);\r\n\t\t\t}\r\n\t\t\treturn searchString || this._lastString;\r\n\t\t},\r\n\t\tgetOptions: function() {\r\n\t\t\treturn {\r\n\t\t\t\tshowAll: this._showAll, \r\n\t\t\t\tcaseInsensitive: this._caseInsensitive, \r\n\t\t\t\twrap: this._wrap, \r\n\t\t\t\twholeWord: this._wholeWord, \r\n\t\t\t\tincremental: this._incremental,\r\n\t\t\t\tregex: this._regex,\r\n\t\t\t\tfindAfterReplace: this._findAfterReplace,\r\n\t\t\t\thideAfterFind: this._hideAfterFind,\r\n\t\t\t\treverse: this._reverse,\r\n\t\t\t\tfindCallback: this._findCallback,\r\n\t\t\t\tstart: this._start,\r\n\t\t\t\tend: this._end\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetReplaceString: function() {\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tthis._visible = false;\r\n\t\t\tif (this._savedOptions) {\r\n\t\t\t\tthis.setOptions(this._savedOptions.pop());\r\n\t\t\t\tif (this._savedOptions.length === 0) {\r\n\t\t\t\t\tthis._savedOptions = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._removeAllAnnotations();\r\n\t\t\tvar textView = this._editor.getTextView();\r\n\t\t\tif (textView) {\r\n\t\t\t\ttextView.removeEventListener(\"Focus\", this._listeners.onEditorFocus); //$NON-NLS-0$\r\n\t\t\t\ttextView.focus();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_processReplaceString: function(str) {\r\n\t\t\tvar newStr = str;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tnewStr = \"\";\r\n\t\t\t\tvar escape = false;\r\n\t\t\t\tvar delimiter = this._editor.getModel().getLineDelimiter();\r\n\t\t\t\tfor (var i=0; i<str.length; i++) {\r\n\t\t\t\t\tvar c = str.substring(i, i + 1);\r\n\t\t\t\t\tif (escape) {\r\n\t\t\t\t\t\tswitch (c) {\r\n\t\t\t\t\t\t\tcase \"R\": newStr += delimiter; break;\r\n\t\t\t\t\t\t\tcase \"r\": newStr += \"\\r\"; break;\r\n\t\t\t\t\t\t\tcase \"n\": newStr += \"\\n\"; break;\r\n\t\t\t\t\t\t\tcase \"t\": newStr += \"\\t\"; break;\r\n\t\t\t\t\t\t\tcase \"\\\\\": newStr += \"\\\\\"; break;\r\n\t\t\t\t\t\t\tdefault: newStr += \"\\\\\" + c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tescape = false;\r\n\t\t\t\t\t} else if (c === \"\\\\\") {\r\n\t\t\t\t\t\tescape = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewStr += c;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (escape) {\r\n\t\t\t\t\tnewStr += \"\\\\\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\tisVisible: function() {\r\n\t\t\treturn this._visible;\r\n\t\t},\r\n\t\treplace: function() {\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tif (string) {\r\n\t\t\t\tvar editor = this._editor;\r\n\t\t\t\tvar replaceString = this._processReplaceString(this.getReplaceString());\r\n\t\t\t\tvar selection = editor.getSelection();\r\n\t\t\t\tvar start = selection.start;\r\n\t\t\t\tDeferred.when(this._editor.getModel().find({\r\n\t\t\t\t\tstring: string,\r\n\t\t\t\t\tstart: start,\r\n\t\t\t\t\treverse: false,\r\n\t\t\t\t\twrap: this._wrap,\r\n\t\t\t\t\tregex: this._regex,\r\n\t\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t\t})).then( function(iterator) {\r\n\t\t\t\t\tif(!iterator) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar result = iterator.next();\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t\t\tthis._doReplace(result.start, result.end, string, replaceString);\r\n\t\t\t\t\t\tthis.endUndo();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._findAfterReplace){\r\n\t\t\t\t\t\tthis._doFind(string, this.getStartOffset());\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\treplaceAll : function() {\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tif (string) {\r\n\t\t\t\tthis._replacingAll = true;\r\n\t\t\t\tvar editor = this._editor;\r\n\t\t\t\tvar textView = editor.getTextView();\r\n\t\t\t\teditor.reportStatus(messages.replacingAll);\r\n\t\t\t\tvar replaceString = this._processReplaceString(this.getReplaceString());\r\n\t\t\t\tvar self = this;\r\n\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\tvar startPos = 0;\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\t//For replace all, we need to ignore the wrap search from the user option\r\n\t\t\t\t\t\t//Otherwise the loop will be dead, see https://bugs.eclipse.org/bugs/show_bug.cgi?id=411813\r\n\t\t\t\t\t\tvar result = self._doFindForReplaceAll(string, startPos, null, true);\r\n\t\t\t\t\t\tif (!result) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\tif (count === 1) {\r\n\t\t\t\t\t\t\ttextView.setRedraw(false);\r\n\t\t\t\t\t\t\tself.startUndo();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself._doReplace(result.start, result.end, string, replaceString);\r\n\t\t\t\t\t\tstartPos = self.getStartOffset();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (count > 0) {\r\n\t\t\t\t\t\tself.endUndo();\r\n\t\t\t\t\t\ttextView.setRedraw(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (startPos > 0) {\r\n\t\t\t\t\t\teditor.reportStatus(util.formatMessage(messages.replacedMatches, count));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\teditor.reportStatus(messages.nothingReplaced, \"error\"); //$NON-NLS-0$ \r\n\t\t\t\t\t}\r\n\t\t\t\t\tself._replacingAll = false;\r\n\t\t\t\t}, 100);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @property {String} string the search string to be found.\r\n\t\t * @property {Boolean} [regex=false] whether or not the search string is a regular expression.\r\n\t\t * @property {Boolean} [wrap=false] whether or not to wrap search.\r\n\t\t * @property {Boolean} [wholeWord=false] whether or not to search only whole words.\r\n\t\t * @property {Boolean} [caseInsensitive=false] whether or not search is case insensitive.\r\n\t\t * @property {Boolean} [reverse=false] whether or not to search backwards.\r\n\t\t * @property {Number} [start=0] The start offset to start searching\r\n\t\t * @property {Number} [end=charCount] The end offset of the search. Used to search in a given range.\t\r\n\t\t */\r\n\t\tsetOptions : function(options) {\r\n\t\t\tif (options) {\r\n\t\t\t\tif ((options.showAll === true || options.showAll === false) && this._showAll !== options.showAll) {\r\n\t\t\t\t\tthis._showAll = options.showAll;\r\n\t\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\t\tif (this._showAll) {\r\n\t\t\t\t\t\t\tthis._markAllOccurrences();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\t\t\t\t\tif (annotationModel) {\r\n\t\t\t\t\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (options.caseInsensitive === true || options.caseInsensitive === false) {\r\n\t\t\t\t\tthis._caseInsensitive = options.caseInsensitive;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.wrap === true || options.wrap === false) {\r\n\t\t\t\t\tthis._wrap = options.wrap;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.wholeWord === true || options.wholeWord === false) {\r\n\t\t\t\t\tthis._wholeWord = options.wholeWord;\r\n\t\t\t\t}\r\n\t\t\t\t//Allow extended TextModelFactory to disable incremental find\r\n\t\t\t\tif (options.incremental === true || options.incremental === false || options.incremental === \"disabled\") {\r\n\t\t\t\t\tif(options.incremental === \"disabled\") {\r\n\t\t\t\t\t\tthis._incremental = false;\r\n\t\t\t\t\t\tthis._incrementalDisabled = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._incremental = options.incremental;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (options.regex === true || options.regex === false) {\r\n\t\t\t\t\tthis._regex = options.regex;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.findAfterReplace === true || options.findAfterReplace === false) {\r\n\t\t\t\t\tthis._findAfterReplace = options.findAfterReplace;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hideAfterFind === true || options.hideAfterFind === false) {\r\n\t\t\t\t\tthis._hideAfterFind = options.hideAfterFind;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.reverse === true || options.reverse === false) {\r\n\t\t\t\t\tthis._reverse = options.reverse;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"findCallback\")) { //$NON-NLS-0$\r\n\t\t\t\t\tthis._findCallback = options.findCallback;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"start\")) { //$NON-NLS-0$\t\r\n\t\t\t\t\tthis._start = options.start;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"end\")) { //$NON-NLS-0$\r\n\t\t\t\t\tthis._end = options.end;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshow: function(tempOptions) {\r\n\t\t\tthis._visible = true;\r\n\t\t\tif (tempOptions) {\r\n\t\t\t\tif (!this._savedOptions) {\r\n\t\t\t\t\tthis._savedOptions = [];\r\n\t\t\t\t}\t\r\n\t\t\t\tthis._savedOptions.push(this.getOptions());\r\n\t\t\t\tthis.setOptions(tempOptions);\r\n\t\t\t}\r\n\t\t\tthis._startOffset = this._editor.getSelection().start;\r\n\t\t\tthis._editor.getTextView().addEventListener(\"Focus\", this._listeners.onEditorFocus); //$NON-NLS-0$\r\n\t\t\tvar self = this;\r\n\t\t\twindow.setTimeout(function() {\r\n\t\t\t\tif (self._incremental) {\r\n\t\t\t\t\tself.find(true, null, true);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this._undoStack) {\r\n\t\t\t\tthis._undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t}, \r\n\t\tendUndo: function() {\r\n\t\t\tif (this._undoStack) {\r\n\t\t\t\tthis._undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_findFromModel: function(string, startOffset, noWrap) {\r\n\t\t\treturn this._editor.getModel().find({\r\n\t\t\t\tstring: string,\r\n\t\t\t\tstart: startOffset,\r\n\t\t\t\tend: this._end,\r\n\t\t\t\treverse: this._reverse,\r\n\t\t\t\twrap: noWrap ? false: this._wrap,\r\n\t\t\t\tregex: this._regex,\r\n\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t_find: function(editor, string, startOffset, noWrap) {\r\n\t\t\tvar iterator;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\titerator = this._findFromModel(string, startOffset, noWrap);\r\n\t\t\t\t} catch (ex) {\r\n\t\t\t\t\teditor.reportStatus(ex.message, \"error\"); //$NON-NLS-0$\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\titerator = this._findFromModel(string, startOffset, noWrap);\r\n\t\t\t}\r\n\t\t\treturn iterator;\r\n\t\t},\r\n\t\t\r\n\t\t_doFindForReplaceAll: function(string, startOffset, count, noWrap) {\r\n\t\t\tcount = count || 1;\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (!string) {\r\n\t\t\t\tthis._removeAllAnnotations();\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tthis._lastString = string;\r\n\t\t\tvar result, iterator;\r\n\t\t\titerator = this._find(editor, string, startOffset, noWrap);\r\n\t\t\tif(!iterator) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif(!iterator.hasNext || !iterator.next) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tfor (var i=0; i<count && iterator.hasNext(); i++) {\r\n\t\t\t\tresult = iterator.next();\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t\r\n\t\t_doFind: function(string, startOffset, count, noWrap) {\r\n\t\t\tcount = count || 1;\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (!string) {\r\n\t\t\t\tthis._removeAllAnnotations();\r\n\t\t\t\treturn new Deferred().resolve();\r\n\t\t\t}\r\n\t\t\tthis._lastString = string;\r\n\t\t\tvar result;\r\n\t\t\treturn Deferred.when(this._find(editor, string, startOffset, noWrap)).then( function(iterator) {\r\n\t\t\t\tif(!iterator) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0; i<count && iterator.hasNext(); i++) {\r\n\t\t\t\t\tresult = iterator.next();\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._replacingAll) {\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tthis._editor.reportStatus(\"\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._editor.reportStatus(messages.notFound, \"error\"); //$NON-NLS-0$\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH;\r\n\t\t\t\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\t\t\t\tif (annotationModel) {\r\n\t\t\t\t\t\t\tannotationModel.removeAnnotations(type);\r\n\t\t\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\t\t\tannotationModel.addAnnotation(mAnnotations.AnnotationType.createAnnotation(type, result.start, result.end));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this._showAll) {\r\n\t\t\t\t\t\t\tif (this._timer) {\r\n\t\t\t\t\t\t\t\twindow.clearTimeout(this._timer);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t\tthis._timer = window.setTimeout(function(){\r\n\t\t\t\t\t\t\t\tthat._markAllOccurrences();\r\n\t\t\t\t\t\t\t\tthat._timer = null;\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._findCallback) {\r\n\t\t\t\t\t\tthis._findCallback(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (result) {\r\n\t\t\t\t\t\teditor.moveSelection(result.start, result.end, null, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t_doReplace: function(start, end, searchStr, newStr) {\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tnewStr = editor.getText(start, end).replace(new RegExp(searchStr, this._caseInsensitive ? \"i\" : \"\"), newStr); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\teditor.setText(newStr, start, end);\r\n\t\t\teditor.setSelection(start, start + newStr.length, true);\r\n\t\t},\r\n\t\t_markAllOccurrences: function() {\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH;\r\n\t\t\tvar iter = annotationModel.getAnnotations();\r\n\t\t\tvar remove = [], add;\r\n\t\t\twhile (iter.hasNext()) {\r\n\t\t\t\tvar annotation = iter.next();\r\n\t\t\t\tif (annotation.type === type) {\r\n\t\t\t\t\tremove.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.isVisible()) {\r\n\t\t\t\tvar string = this.getFindString();\r\n\t\t\t\tDeferred.when(this._editor.getModel().find({\r\n\t\t\t\t\tstring: string,\r\n\t\t\t\t\tregex: this._regex,\r\n\t\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t\t})).then( function(iterator) {\r\n\t\t\t\t\tif(!iterator) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadd = [];\r\n\t\t\t\t\twhile (iterator.hasNext()) {\r\n\t\t\t\t\t\tvar range = iterator.next();\r\n\t\t\t\t\t\tadd.push(mAnnotations.AnnotationType.createAnnotation(type, range.start, range.end));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeAllAnnotations: function() {\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (annotationModel) {\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH);\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeCurrentAnnotation: function(evt){\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (annotationModel) {\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\texports.Find = Find;\r\n\t\r\n\treturn exports;\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2014 IBM Corporation and others. All rights reserved.\r\n * This program and the accompanying materials are made available under the\r\n * terms of the Eclipse Public License v1.0\r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\r\n * \r\n * Contributors: \r\n *\tIBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine('orion/editor/findUI',[\r\n\t'i18n!orion/editor/nls/messages',\r\n\t'orion/editor/find',\r\n\t'orion/objects',\r\n\t'orion/editor/util',\r\n\t'orion/util', \r\n], function(messages, mFind, objects, textUtil, util) {\r\n\t\r\n\tfunction FindUI(editor, undoStack, options) {\r\n\t\tmFind.Find.call(this, editor, undoStack, options);\r\n\t}\r\n\t\r\n\tFindUI.prototype = new mFind.Find();\r\n\t\r\n\tobjects.mixin(FindUI.prototype, {\r\n\t\tgetFindString: function() {\r\n\t\t\tvar input = this._findInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn mFind.Find.prototype.getFindString.call(this);\r\n\t\t\t}\r\n\t\t\treturn input.value;\r\n\t\t},\r\n\t\tgetReplaceString: function() {\r\n\t\t\tvar input = this._replaceInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn mFind.Find.prototype.getReplaceString(this);\r\n\t\t\t}\r\n\t\t\treturn input.value;\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tvar visible = this.isVisible();\r\n\t\t\tmFind.Find.prototype.hide.call(this);\r\n\t\t\tif (visible) {\r\n\t\t\t\tthis._rootDiv.className = \"textViewFind\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\tshow: function(options) {\r\n\t\t\tmFind.Find.prototype.show.call(this, options);\r\n\t\t\tvar findString = options.findString;\r\n\t\t\tvar replaceString = options.replaceString;\r\n\t\t\tvar input = this._findInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\tthis._create();\r\n\t\t\t\tinput = this._findInput;\r\n\t\t\t}\r\n\t\t\tif (findString) {\r\n\t\t\t\tinput.value = findString;\r\n\t\t\t}\r\n\t\t\tif (replaceString) {\r\n\t\t\t\tvar replaceInput = this._replaceInput;\r\n\t\t\t\treplaceInput.value = replaceString;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\twindow.setTimeout(function() {\r\n\t\t\t\tthat._rootDiv.className = \"textViewFind show\"; //$NON-NLS-0$\r\n\t\t\t\tinput.select();\r\n\t\t\t\tinput.focus();\r\n\t\t\t}, 0);\r\n\t\t},\r\n\t\t_create: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar view = this._editor.getTextView();\r\n\t\t\tvar parent = view.getOptions(\"parent\"); //$NON-NLS-0$\r\n\t\t\tvar document = parent.ownerDocument; //$NON-NLS-0$\r\n\t\t\tvar root = util.createElement(document, 'div'); //$NON-NLS-0$\r\n\t\t\troot.className = \"textViewFind\"; //$NON-NLS-0$\r\n\t\t\ttextUtil.addEventListener(root, \"keydown\", function(e) { that._handleKeyDown(e); }); //$NON-NLS-0$\r\n\t\t\tthis._rootDiv = root;\r\n\t\t\troot.setAttribute(\"role\", \"dialog\");\r\n\t\t\troot.setAttribute(\"aria-label\", messages.findReplace);\r\n\t\t\tthis._createContents(document, root);\r\n\t\t\tview._rootDiv.insertBefore(root, view._rootDiv.firstChild);\r\n\t\t},\r\n\t\t_createContents: function(document, parent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar findInput = util.createElement(document, 'input'); //$NON-NLS-0$\r\n\t\t\tfindInput.className = \"textViewFindInput\"; //$NON-NLS-0$\r\n\t\t\tthis._findInput = findInput;\r\n\t\t\tfindInput.type = \"text\"; //$NON-NLS-0$\r\n\t\t\tfindInput.placeholder = messages.findWith;\r\n\t\t\ttextUtil.addEventListener(findInput, \"input\", function(evt) { //$NON-NLS-0$\r\n\t\t\t\treturn that._handleInput(evt);\r\n\t\t\t});\r\n\t\t\tparent.appendChild(findInput);\r\n\r\n\t\t\tvar group = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.next, function() { that.find(true); });\r\n\t\t\tthat._createButton(document, group, messages.previous, function() { that.find(false); });\r\n\t\t\tparent.appendChild(group);\r\n\t\t\t\r\n\t\t\tvar readonly = that._editor.getTextView().getOptions(\"readonly\"); //$NON-NLS-0$\r\n\t\t\tif (!readonly) {\r\n\t\t\t\t// create replace text\r\n\t\t\t\tvar replaceInput = util.createElement(document, 'input'); //$NON-NLS-0$\r\n\t\t\t\treplaceInput.className = \"textViewReplaceInput\"; //$NON-NLS-0$\r\n\t\t\t\tthis._replaceInput = replaceInput;\r\n\t\t\t\treplaceInput.type = \"text\"; //$NON-NLS-0$\r\n\t\t\t\treplaceInput.placeholder = messages.replaceWith;\r\n\t\t\t\tparent.appendChild(replaceInput);\r\n\t\t\t\tgroup = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\t\tthat._createButton(document, group, messages.replace, function() { that.replace(); });\r\n\t\t\t\tthat._createButton(document, group, messages.replaceAll, function() { that.replaceAll(); });\r\n\t\t\t\tparent.appendChild(group);\r\n\t\t\t}\r\n\r\n\t\t\tgroup = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.regex, function(evt) { that._toggle(\"regex\", evt.target); }, this._regex, messages.regexTooltip, messages.regexTooltip); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.caseInsensitive, function(evt) { that._toggle(\"caseInsensitive\", evt.target); }, this._caseInsensitive, messages.caseInsensitiveTooltip, messages.caseInsensitiveTooltip); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.wholeWord, function(evt) { that._toggle(\"wholeWord\", evt.target); }, this._wholeWord, messages.wholeWordTooltip, messages.wholeWordTooltip); //$NON-NLS-0$\r\n\t\t\tparent.appendChild(group);\r\n\r\n\t\t\tvar close = that._createButton(document, parent, \"\", function() { that.hide(); }); //$NON-NLS-0$\r\n\t\t\tclose.className = \"textViewFindCloseButton\"; //$NON-NLS-0$\r\n\t\t\tclose.title = messages.closeTooltip;\r\n\t\t\tutil.confineDialogTab(findInput, close);\r\n\t\t},\r\n\t\t_createButton: function(document, parentDom, text, callback, checked, tooltip, ariaLabel) {\r\n\t\t\tvar button  = document.createElement(\"button\"); //$NON-NLS-0$\r\n\t\t\tbutton.type = \"button\"; //$NON-NLS-0$\r\n\t\t\tthis._checked(checked, button);\r\n\t\t\tif (tooltip) button.title = tooltip;\r\n\t\t\ttextUtil.addEventListener(button, \"click\", function(evt) { callback.call(this, evt); }, false); //$NON-NLS-0$\r\n\t\t\tif (text) {\r\n\t\t\t\tbutton.appendChild(document.createTextNode(text)); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\tif (ariaLabel) {\r\n\t\t\t\tbutton.setAttribute(\"aria-label\", ariaLabel);\r\n\t\t\t}\r\n\t\t\tparentDom.appendChild(button);\r\n\t\t\treturn button;\r\n\t\t},\r\n\t\t_toggle: function(prop, button) {\r\n\t\t\tvar options = {};\r\n\t\t\toptions[prop] = !this[\"_\" + prop]; //$NON-NLS-0$\r\n\t\t\tthis.setOptions(options);\r\n\t\t\tthis._checked(options[prop], button);\r\n\t\t},\r\n\t\t_checked: function(checked, button) {\r\n\t\t\tbutton.className = \"textViewFindButton\"; //$NON-NLS-0$\r\n\t\t\tif (checked) {\r\n\t\t\t\tbutton.className += \" checked\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t_handleInput: function() {\r\n\t\t\tif (this._incremental) {\r\n\t\t\t\tthis.find(true, null, true);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t_handleKeyDown: function(evt) {\r\n\t\t\tvar handled;\r\n\t\t\tvar ctrlKeyOnly = (util.isMac ? evt.metaKey : evt.ctrlKey) && !evt.altKey && !evt.shiftKey;\r\n\t\t\tif (ctrlKeyOnly && evt.keyCode === 70/*\"f\"*/ ) {\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\t//We can't use ctrlKeyOnly on \"k\" because ctrl+shift+k means find previous match when the find bar gets focus\r\n\t\t\tif (((util.isMac ? evt.metaKey : evt.ctrlKey) && !evt.altKey && evt.keyCode === 75/*\"k\"*/) || evt.keyCode === 13/*enter*/){\r\n\t\t\t\tif (evt.keyCode === 13) {\r\n\t\t\t\t\tthis.find(this._reverse ? evt.shiftKey : !evt.shiftKey);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.find(!evt.shiftKey);\r\n\t\t\t\t}\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (ctrlKeyOnly &&  evt.keyCode === 82 /*\"r\"*/){\r\n\t\t\t\tthis.replace();\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (evt.keyCode === 27/*ESC*/){\r\n\t\t\t\tthis.hide();\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (handled) {\r\n\t\t\t\tif (evt.stopPropagation) { \r\n\t\t\t\t\tevt.stopPropagation(); \r\n\t\t\t\t}\r\n\t\t\t\tif (evt.preventDefault) { \r\n\t\t\t\t\tevt.preventDefault(); \r\n\t\t\t\t}\r\n\t\t\t\tevt.cancelBubble = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\r\n\treturn {FindUI: FindUI};\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made\r\n * available under the terms of the Eclipse Public License v1.0\r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/actions\", [ //$NON-NLS-0$\r\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\r\n\t'orion/keyBinding', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/editor/tooltip', //$NON-NLS-0$\r\n\t'orion/editor/find', //$NON-NLS-0$\r\n\t'orion/editor/findUI', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(messages, mKeyBinding, mAnnotations, mTooltip, mFind, mFindUI, util) {\r\n\r\n\tvar AT = mAnnotations.AnnotationType;\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction forEachSelection(actions, compound, callback, noUndo) {\r\n\t\tvar offset = 0;\r\n\t\tvar editor = actions.editor;\r\n\t\tvar selections = editor.getSelections();\r\n\t\tif (!noUndo && (compound || selections.length > 1)){ actions.startUndo(); }\r\n\t\tfunction setText(text, start, end) {\r\n\t\t\teditor.setText(text, start, end);\r\n\t\t\toffset += (start - end) + text.length;\r\n\t\t}\r\n\t\tselections.forEach(function(selection) {\r\n\t\t\tselection.start += offset;\r\n\t\t\tselection.end += offset;\r\n\t\t\tcallback(selection, setText);\r\n\t\t});\r\n\t\teditor.setSelections(selections);\r\n\t\tif (!noUndo && (compound || selections.length > 1)){ actions.endUndo(); }\r\n\t}\r\n\r\n\t/**\r\n\t * TextActions connects common text editing keybindings onto an editor.\r\n\t */\r\n\tfunction TextActions(editor, undoStack, find) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis._incrementalFind = new mFind.IncrementalFind(editor);\r\n\t\tthis._find = find ? find : new mFindUI.FindUI(editor, undoStack);\r\n\t\tthis._lastEditLocation = null;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tTextActions.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tvar textView = this.editor.getTextView();\r\n\r\n\t\t\tthis._lastEditListener = {\r\n\t\t\t\tonModelChanged: function(e) {\r\n\t\t\t\t\tif (this.editor.isDirty()) {\r\n\t\t\t\t\t\tthis._lastEditLocation = e.start + e.addedCharCount;\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this)\r\n\t\t\t};\r\n\t\t\ttextView.addEventListener(\"ModelChanged\", this._lastEditListener.onModelChanged); //$NON-NLS-0$\r\n\r\n\t\t\ttextView.setAction(\"undo\", function(data) { //$NON-NLS-0$\r\n\t\t\t\tif (this.undoStack) {\r\n\t\t\t\t\tvar count = 1;\r\n\t\t\t\t\tif (data && data.count) {\r\n\t\t\t\t\t\tcount = data.count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (count > 0) {\r\n\t\t\t\t\t\tthis.undoStack.undo();\r\n\t\t\t\t\t\t--count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.undo});\r\n\r\n\t\t\ttextView.setAction(\"redo\", function(data) { //$NON-NLS-0$\r\n\t\t\t\tif (this.undoStack) {\r\n\t\t\t\t\tvar count = 1;\r\n\t\t\t\t\tif (data && data.count) {\r\n\t\t\t\t\t\tcount = data.count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (count > 0) {\r\n\t\t\t\t\t\tthis.undoStack.redo();\r\n\t\t\t\t\t\t--count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.redo});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"f\", true), \"find\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"find\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._find) {\r\n\t\t\t\t\tvar selection = this.editor.getSelection();\r\n\t\t\t\t\tthis._find.show({findString:this.editor.getText(selection.start, selection.end)});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.find});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"k\", true), \"findNext\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"findNext\", function(options) { //$NON-NLS-0$\r\n\t\t\t\tif (this._find){\r\n\t\t\t\t\tthis._find.find(true, options);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.findNext});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"k\", true, true), \"findPrevious\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"findPrevious\", function(options) { //$NON-NLS-0$\r\n\t\t\t\tif (this._find){\r\n\t\t\t\t\tthis._find.find(false, options);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.findPrevious});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"j\", true), \"incrementalFind\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"incrementalFind\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._incrementalFind) {\r\n\t\t\t\t\tthis._incrementalFind.find(true);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}.bind(this), {name: messages.incrementalFind});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"j\", true, true), \"incrementalFindReverse\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"incrementalFindReverse\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._incrementalFind) {\r\n\t\t\t\t\tthis._incrementalFind.find(false);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}.bind(this), {name: messages.incrementalFindReverse});\r\n\r\n\t\t\ttextView.setAction(\"tab\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.indentLines();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"shiftTab\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.unindentLines();\r\n\t\t\t}.bind(this), {name: messages.unindentLines});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(38, false, false, true), \"moveLinesUp\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"moveLinesUp\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.moveLinesUp();\r\n\t\t\t}.bind(this), {name: messages.moveLinesUp});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(40, false, false, true), \"moveLinesDown\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"moveLinesDown\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.moveLinesDown();\r\n\t\t\t}.bind(this), {name: messages.moveLinesDown});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(38, true, false, true), \"copyLinesUp\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"copyLinesUp\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.copyLinesUp();\r\n\t\t\t}.bind(this), {name: messages.copyLinesUp});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(40, true, false, true), \"copyLinesDown\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"copyLinesDown\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.copyLinesDown();\r\n\t\t\t}.bind(this), {name: messages.copyLinesDown});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('d', true, false, false), \"deleteLines\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"deleteLines\", function(data) { //$NON-NLS-0$\r\n\t\t\t\treturn this.deleteLines(data);\r\n\t\t\t}.bind(this), {name: messages.deleteLines});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"l\", !util.isMac, false, false, util.isMac), \"gotoLine\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"gotoLine\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.gotoLine();\r\n\t\t\t}.bind(this), {name: messages.gotoLine});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(190, true), \"nextAnnotation\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"nextAnnotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.nextAnnotation(true);\r\n\t\t\t}.bind(this), {name: messages.nextAnnotation});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(188, true), \"previousAnnotation\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"previousAnnotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.nextAnnotation(false);\r\n\t\t\t}.bind(this), {name: messages.prevAnnotation});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"e\", true, false, true, false), \"expand\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"expand\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotation(true);\r\n\t\t\t}.bind(this), {name: messages.expand});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"c\", true, false, true, false), \"collapse\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"collapse\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotation(false);\r\n\t\t\t}.bind(this), {name: messages.collapse});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"e\", true, true, true, false), \"expandAll\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"expandAll\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotations(true);\r\n\t\t\t}.bind(this), {name: messages.expandAll});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"c\", true, true, true, false), \"collapseAll\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"collapseAll\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotations(false);\r\n\t\t\t}.bind(this), {name: messages.collapseAll});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"q\", !util.isMac, false, false, util.isMac), \"lastEdit\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"lastEdit\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.gotoLastEdit();\r\n\t\t\t}.bind(this), {name: messages.lastEdit});\r\n\t\t},\r\n\t\tcopyLinesDown: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tvar delimiter = \"\";\r\n\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\ttext = (delimiter = model.getLineDelimiter()) + text;\r\n\t\t\t\t}\r\n\t\t\t\tvar insertOffset = lineEnd;\r\n\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\tselection.start = insertOffset + delimiter.length;\r\n\t\t\t\tselection.end = insertOffset + text.length;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tcopyLinesUp: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tvar delimiter = \"\";\r\n\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\ttext += (delimiter = model.getLineDelimiter());\r\n\t\t\t\t}\r\n\t\t\t\tvar insertOffset = lineStart;\r\n\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\tselection.start = insertOffset;\r\n\t\t\t\tselection.end = insertOffset + text.length - delimiter.length;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tdeleteLines: function(data) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar count = 1;\r\n\t\t\tif (data && data.count) {\r\n\t\t\t\tcount = data.count;\r\n\t\t\t}\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lastLine;\r\n\t\t\t\tif (selection.start !== selection.end || count === 1) {\r\n\t\t\t\t\tlastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlastLine = Math.min(firstLine + count - 1, model.getLineCount() - 1);\r\n\t\t\t\t}\t\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\tselection.start = selection.end = lineStart;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\texpandAnnotation: function(expand) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tif (!editor.getFoldingRulerVisible()) return true;\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif(!annotationModel) { return true; }\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar currentOffset = editor.getCaretOffset();\r\n\t\t\tvar lineIndex = model.getLineAtOffset(currentOffset);\r\n\t\t\tvar start = model.getLineStart(lineIndex);\r\n\t\t\tvar end = model.getLineEnd(lineIndex, true);\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tstart = model.mapOffset(start);\r\n\t\t\t\tend = model.mapOffset(end);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\tvar annotation, iter = annotationModel.getAnnotations(start, end);\r\n\t\t\twhile (!annotation && iter.hasNext()) {\r\n\t\t\t\tvar a = iter.next();\r\n\t\t\t\tif (a.type !== mAnnotations.AnnotationType.ANNOTATION_FOLDING) { continue; }\r\n\t\t\t\tannotation = a;\r\n\t\t\t}\r\n\t\t\tif (annotation) {\r\n\t\t\t\tif (expand !== annotation.expanded) {\r\n\t\t\t\t\tif (expand) {\r\n\t\t\t\t\t\tannotation.expand();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\teditor.setCaretOffset(annotation.start);\r\n\t\t\t\t\t\tannotation.collapse();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\texpandAnnotations: function(expand) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tif (!editor.getFoldingRulerVisible()) return true;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif(!annotationModel) { return true; }\r\n\t\t\tvar annotation, iter = annotationModel.getAnnotations();\r\n\t\t\ttextView.setRedraw(false);\r\n\t\t\twhile (iter.hasNext()) {\r\n\t\t\t\tannotation = iter.next();\r\n\t\t\t\tif (annotation.type !== mAnnotations.AnnotationType.ANNOTATION_FOLDING) { continue; }\r\n\t\t\t\tif (expand !== annotation.expanded) {\r\n\t\t\t\t\tif (expand) {\r\n\t\t\t\t\t\tannotation.expand();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tannotation.collapse();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttextView.setRedraw(true);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tindentLines: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif(!textView.getOptions(\"tabMode\")) { return; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar offset = 0;\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\tif (selections.length > 1) { this.startUndo(); }\r\n\t\t\tif (selections.some(\r\n\t\t\t\tfunction(selection) {\r\n\t\t\t\t\tselection.start += offset;\r\n\t\t\t\t\tselection.end += offset;\r\n\t\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t\tif (firstLine !== lastLine || selections.length > 1) {\r\n\t\t\t\t\t\tvar lines = [];\r\n\t\t\t\t\t\tlines.push(\"\");\r\n\t\t\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\t\t\tlines.push(model.getLine(i, true));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\t\tvar text = lines.join(tab);\r\n\t\t\t\t\t\teditor.setText(text, lineStart, lineEnd);\r\n\t\t\t\t\t\tvar start = lineStart === selection.start ? selection.start : selection.start + tab.length;\r\n\t\t\t\t\t\tvar end = selection.end + ((lastLine - firstLine + 1) * tab.length);\r\n\t\t\t\t\t\toffset += (lineStart - lineEnd) + text.length;\r\n\t\t\t\t\t\tselection.start = start;\r\n\t\t\t\t\t\tselection.end = end;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t)){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\teditor.setSelections(selections);\r\n\t\t\tif (selections.length > 1) { this.endUndo(); }\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tgotoLastEdit: function() {\r\n\t\t\tif (typeof this._lastEditLocation === \"number\")  { //$NON-NLS-0$\r\n\t\t\t\tthis.editor.showSelection(this._lastEditLocation);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tgotoLine: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar line = model.getLineAtOffset(editor.getCaretOffset());\r\n\t\t\tline = prompt(messages.gotoLinePrompty, line + 1);\r\n\t\t\tif (line) {\r\n\t\t\t\tline = parseInt(line, 10);\r\n\t\t\t\teditor.onGotoLine(line - 1, 0);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tmoveLinesDown: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tif (lastLine !== lineCount-1) {\r\n\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\tvar insertOffset = model.getLineEnd(lastLine+1, true) - (lineEnd - lineStart);\r\n\t\t\t\t\tvar text, delimiterLength = 0;\r\n\t\t\t\t\tif (lastLine !== lineCount-2) {\r\n\t\t\t\t\t\ttext = model.getText(lineStart, lineEnd);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Move delimiter following selection to front of the text\r\n\t\t\t\t\t\tvar lineEndNoDelimiter = model.getLineEnd(lastLine);\r\n\t\t\t\t\t\ttext = model.getText(lineEndNoDelimiter, lineEnd) + model.getText(lineStart, lineEndNoDelimiter);\r\n\t\t\t\t\t\tdelimiterLength += lineEnd - lineEndNoDelimiter;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\t\tselection.start = insertOffset + delimiterLength;\r\n\t\t\t\t\tselection.end = insertOffset + delimiterLength + text.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tmoveLinesUp: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tif (firstLine !== 0) {\r\n\t\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\t\tvar insertOffset = model.getLineStart(firstLine - 1);\r\n\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\t\tvar delimiterLength = 0;\r\n\t\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\t\t// Move delimiter preceding selection to end of text\r\n\t\t\t\t\t\tvar delimiterStart = model.getLineEnd(firstLine - 1);\r\n\t\t\t\t\t\tvar delimiterEnd = model.getLineEnd(firstLine - 1, true);\r\n\t\t\t\t\t\ttext += model.getText(delimiterStart, delimiterEnd);\r\n\t\t\t\t\t\tlineStart = delimiterStart;\r\n\t\t\t\t\t\tdelimiterLength = delimiterEnd - delimiterStart;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\t\tselection.start = insertOffset;\r\n\t\t\t\t\tselection.end = insertOffset + text.length - delimiterLength;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tnextAnnotation: function (forward) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) { return true; }\r\n\t\t\tvar list = editor.getOverviewRuler() || editor.getAnnotationStyler();\r\n\t\t\tif (!list) { return true; }\r\n\t\t\tfunction ignore(annotation) {\r\n\t\t\t\treturn !!annotation.lineStyle ||\r\n\t\t\t\t\tannotation.type === AT.ANNOTATION_MATCHING_BRACKET ||\r\n\t\t\t\t\tannotation.type === AT.ANNOTATION_CURRENT_BRACKET ||\r\n\t\t\t\t\t!list.isAnnotationTypeVisible(annotation.type);\r\n\t\t\t}\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar currentOffset = editor.getCaretOffset();\r\n\t\t\tvar annotations = annotationModel.getAnnotations(forward ? currentOffset : 0, forward ? model.getCharCount() : currentOffset);\r\n\t\t\tvar foundAnnotation = null;\r\n\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\tvar annotation = annotations.next();\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tif (annotation.start <= currentOffset) { continue; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (annotation.start >= currentOffset) { continue; }\r\n\t\t\t\t}\r\n\t\t\t\tif (ignore(annotation)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tfoundAnnotation = annotation;\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (foundAnnotation) {\r\n\t\t\t\tvar foundAnnotations = [foundAnnotation];\r\n\t\t\t\tannotations = annotationModel.getAnnotations(foundAnnotation.start, foundAnnotation.start);\r\n\t\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\t\tannotation = annotations.next();\r\n\t\t\t\t\tif (annotation !== foundAnnotation && !ignore(annotation)) {\r\n\t\t\t\t\t\tfoundAnnotations.push(annotation);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar view = editor.getTextView();\r\n\t\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(view, editor);\r\n\t\t\t\tif (!tooltip) {\r\n\t\t\t\t\teditor.moveSelection(foundAnnotation.start);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\teditor.moveSelection(foundAnnotation.start, foundAnnotation.start, function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tvar tv = editor.getTextView();\r\n\t\t\t\t\t\tvar offset = foundAnnotation.start;\r\n\t\t\t\t\t\tvar pos = tv.getLocationAtOffset(offset);\r\n\t\t\t\t\t\ttooltip.show({\r\n\t\t\t\t\t\t\tx: pos.x,\r\n\t\t\t\t\t\t\ty: pos.y,\r\n\t\t\t\t\t\t\tgetTooltipInfo: function() {\r\n\t\t\t\t\t\t\t\treturn editor._getTooltipInfo(this.x, this.y);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, false, false);\t\t\t\t\t\t\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tunindentLines: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif(!textView.getOptions(\"tabMode\")) { return; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar tabSize = textView.getOptions(\"tabSize\"); //$NON-NLS-0$\r\n\t\t\t\tvar spaceTab = new Array(tabSize + 1).join(\" \"); //$NON-NLS-0$\r\n\t\t\t\tvar lines = [], removeCount = 0, firstRemoveCount = 0;\r\n\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\tvar line = model.getLine(i, true);\r\n\t\t\t\t\tif (model.getLineStart(i) !== model.getLineEnd(i)) {\r\n\t\t\t\t\t\tif (line.indexOf(\"\\t\") === 0) { //$NON-NLS-0$\r\n\t\t\t\t\t\t\tline = line.substring(1);\r\n\t\t\t\t\t\t\tremoveCount++;\r\n\t\t\t\t\t\t} else if (line.indexOf(spaceTab) === 0) {\r\n\t\t\t\t\t\t\tline = line.substring(tabSize);\r\n\t\t\t\t\t\t\tremoveCount += tabSize;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i === firstLine) {\r\n\t\t\t\t\t\tfirstRemoveCount = removeCount;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlines.push(line);\r\n\t\t\t\t}\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lastLineStart = model.getLineStart(lastLine);\r\n\t\t\t\tvar text = lines.join(\"\");\r\n\t\t\t\tsetText(text, lineStart, lineEnd);\r\n\t\t\t\tvar start = lineStart === selection.start ? selection.start : selection.start - firstRemoveCount;\r\n\t\t\t\tvar end = Math.max(start, selection.end - removeCount + (selection.end === lastLineStart+1 && selection.start !== selection.end ? 1 : 0));\r\n\t\t\t\tselection.start = start;\r\n\t\t\t\tselection.end = end;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\texports.TextActions = TextActions;\r\n\r\n\t/**\r\n\t * @param {orion.editor.Editor} editor\r\n\t * @param {orion.editor.UndoStack} undoStack\r\n\t * @param {orion.editor.ContentAssist} [contentAssist]\r\n\t * @param {orion.editor.LinkedMode} [linkedMode]\r\n\t */\r\n\tfunction SourceCodeActions(editor, undoStack, contentAssist, linkedMode) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.linkedMode = linkedMode;\r\n\t\tif (this.contentAssist) {\r\n\t\t\tthis.contentAssist.addEventListener(\"ProposalApplied\", this.contentAssistProposalApplied.bind(this)); //$NON-NLS-0$\r\n\t\t}\r\n\t\tthis.init();\r\n\t}\r\n\tSourceCodeActions.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tvar textView = this.editor.getTextView();\r\n\r\n\t\t\ttextView.setAction(\"lineStart\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.lineStart();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"enter\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoIndent();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"t\", true, false, true), \"trimTrailingWhitespaces\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"trimTrailingWhitespaces\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.trimTrailingWhitespaces();\r\n\t\t\t}.bind(this), {name: messages.trimTrailingWhitespaces});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(191, true), \"toggleLineComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"toggleLineComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.toggleLineComment();\r\n\t\t\t}.bind(this), {name: messages.toggleLineComment});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(191, true, !util.isMac, false, util.isMac), \"addBlockComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"addBlockComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.addBlockComment();\r\n\t\t\t}.bind(this), {name: messages.addBlockComment});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(220, true, !util.isMac, false, util.isMac), \"removeBlockComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"removeBlockComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.removeBlockComment();\r\n\t\t\t}.bind(this), {name: messages.removeBlockComment});\r\n\r\n\t\t\t// Autocomplete square brackets []\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"[\", false, false, false, false, \"keypress\"), \"autoPairSquareBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairSquareBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"[\", \"]\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(']', false, false, false, false, \"keypress\"), \"skipClosingSquareBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingSquareBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(']'); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete angle brackets <>\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"<\", false, false, false, false, \"keypress\"), \"autoPairAngleBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairAngleBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"<\", \">\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('>', false, false, false, false, \"keypress\"), \"skipClosingAngleBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingAngleBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket('>'); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete parentheses ()\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"(\", false, false, false, false, \"keypress\"), \"autoPairParentheses\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairParentheses\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"(\", \")\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(')', false, false, false, false, \"keypress\"), \"skipClosingParenthesis\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingParenthesis\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(\")\"); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete braces {}\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"{\", false, false, false, false, \"keypress\"), \"autoPairBraces\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairBraces\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"{\", \"}\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('}', false, false, false, false, \"keypress\"), \"skipClosingBrace\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingBrace\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(\"}\"); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete single quotations\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"'\", false, false, false, false, \"keypress\"), \"autoPairSingleQuotation\"); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\r\n\t\t\ttextView.setAction(\"autoPairSingleQuotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairQuotations(\"'\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete double quotations\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('\"', false, false, false, false, \"keypress\"), \"autoPairDblQuotation\"); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\r\n\t\t\ttextView.setAction(\"autoPairDblQuotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairQuotations('\"'); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"deletePrevious\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.deletePrevious();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tautoIndent: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif (textView.getOptions(\"singleMode\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tvar lineDelimiter = model.getLineDelimiter();\r\n\t\t\tvar matchCommentStart = /^[\\s]*\\/\\*[\\*]*[\\s]*$/;\r\n\t\t\tvar matchCommentDelimiter = /^[\\s]*\\*/;\r\n\t\t\tvar matchCommentEnd = /\\*\\/[\\s]*$/;\r\n\t\t\tvar self = this;\r\n\t\t\tfunction indent(selection, setText) {\r\n\t\t\t\tif (selection.start === selection.end) {\r\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(selection.start);\r\n\t\t\t\t\tvar lineText = model.getLine(lineIndex, false);\r\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\tvar lineOffset = selection.start - lineStart;\r\n\t\t\t\t\tvar c;\r\n\t\t\t\t\twhile (index < lineOffset && ((c = lineText.charCodeAt(index)) === 32 || c === 9)) { index++; }\r\n\t\t\t\t\tvar prefix = lineText.substring(0, index);\r\n\t\t\t\t\tvar lineTextBeforeCaret = lineText.substring(0, lineOffset);\r\n\t\t\t\t\tvar lineTextAfterCaret = lineText.substring(lineOffset);\r\n\t\t\t\t\tvar text;\r\n\t\t\t\t\t// If the character before the caret is an opening brace, smart indent the next line.\r\n\t\t\t\t\tvar prevCharIdx;\r\n\t\t\t\t\tif (self.smartIndentation && lineText.charCodeAt(prevCharIdx = lineTextBeforeCaret.trimRight().length - 1) === 123) {\r\n\t\t\t\t\t\t// Remove any extra whitespace\r\n\t\t\t\t\t\tvar whitespaceBeforeCaret = lineOffset - prevCharIdx - 1;\r\n\t\t\t\t\t\tvar whitespaceAfterCaret = lineTextAfterCaret.length - lineTextAfterCaret.trimLeft().length;\r\n\t\r\n\t\t\t\t\t\ttext = lineText.charCodeAt(lineOffset + whitespaceAfterCaret) === 125 ?\r\n\t\t\t\t\t\t\t   lineDelimiter + prefix + tab + lineDelimiter + prefix :\r\n\t\t\t\t\t\t\t   lineDelimiter + prefix + tab;\r\n\t\r\n\t\t\t\t\t\tsetText(text, selection.start - whitespaceBeforeCaret, selection.end + whitespaceAfterCaret);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length + prefix.length + tab.length - whitespaceBeforeCaret;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t// Proceed with autocompleting multi-line comment if the text before the caret matches\r\n\t\t\t\t\t// the start or comment delimiter (*) of a multi-line comment\r\n\t\t\t\t\t} else if (self.autoCompleteComments && !matchCommentEnd.test(lineTextBeforeCaret) &&\r\n\t\t\t\t\t\t\t\t(matchCommentStart.test(lineTextBeforeCaret) || matchCommentDelimiter.test(lineTextBeforeCaret))) {\r\n\t\t\t\t\t\tvar caretOffset;\r\n\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Matches the start of a multi-line comment. Autocomplete the multi-line block comment,\r\n\t\t\t\t\t\t * moving any text after the caret into the block comment and setting the caret to be\r\n\t\t\t\t\t\t * after the comment delimiter.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tvar match = matchCommentStart.exec(lineTextBeforeCaret);\r\n\t\t\t\t\t\tif (match) {\r\n\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \" * \"; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t// Text added into the comment block are trimmed of all preceding and trailing whitespaces.\r\n\t\t\t\t\t\t\t// If the text after the caret contains the ending of a block comment, exclude the ending.\r\n\t\t\t\t\t\t\tif (matchCommentEnd.test(lineTextAfterCaret)) {\r\n\t\t\t\t\t\t\t\ttext += lineTextAfterCaret.substring(0, lineTextAfterCaret.length - 2).trim();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttext += lineTextAfterCaret.trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Add the closing to the multi-line block comment if the next line is not a\r\n\t\t\t\t\t\t\t// comment delimiter.\r\n\t\t\t\t\t\t\tif ((model.getLineCount() === lineIndex + 1) ||\r\n\t\t\t\t\t\t\t\t!matchCommentDelimiter.test(model.getLine(lineIndex + 1))) {\r\n\t\t\t\t\t\t\t\ttext += lineDelimiter + prefix + \" */\"; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetText(text, selection.start, selection.end + lineTextAfterCaret.length);\r\n\t\t\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length + prefix.length + 3;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Matches a comment delimiter (*) as the start of the line, and traverses up the lines to confirm if\r\n\t\t\t\t\t\t * it is a multi-line comment by matching the start of a block comment. If so, continue the\r\n\t\t\t\t\t\t * multi-line comment in the next line. Any text that follows after the caret is moved to the newly\r\n\t\t\t\t\t\t * added comment delimiter.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tmatch = matchCommentDelimiter.exec(lineTextBeforeCaret);\r\n\t\t\t\t\t\tif (match) {\r\n\t\t\t\t\t\t\tfor (var i = lineIndex - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tvar prevLine = model.getLine(i, false);\r\n\t\t\t\t\t\t\t\tif (matchCommentStart.test(prevLine)) {\r\n\t\t\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t\t\t * If the text after the caret matches the end of a comment block or the character in front of the\r\n\t\t\t\t\t\t\t\t\t * caret is a forward slash, continue the block comment with the caret and text after the caret on\r\n\t\t\t\t\t\t\t\t\t * the next line directly in front of the star (*).\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\tif (matchCommentEnd.test(lineTextAfterCaret) || lineText.charCodeAt(lineOffset) === 47) {\r\n\t\t\t\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \"*\" + lineTextAfterCaret; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\t\tcaretOffset = selection.start + lineDelimiter.length + prefix.length + 1;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \"* \" + lineTextAfterCaret; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\t\tcaretOffset = selection.start + lineDelimiter.length + prefix.length + 2;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetText(text, selection.start, selection.end + lineTextAfterCaret.length);\r\n\t\t\t\t\t\t\t\t\tselection.start = selection.end = caretOffset;\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t} else if (!matchCommentDelimiter.test(prevLine)) {\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else if (matchCommentEnd.test(lineTextBeforeCaret) && prefix.charCodeAt(prefix.length - 1) === 32) {\r\n\t\t\t\t\t\t// Matches the end of a block comment. Fix the indentation for the following line.\r\n\t\t\t\t\t\ttext = lineDelimiter + prefix.substring(0, prefix.length - 1);\r\n\t\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + text.length;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else if (index > 0) {\r\n\t\t\t\t\t\t//TODO still wrong when typing inside folding\r\n\t\t\t\t\t\tindex = lineOffset;\r\n\t\t\t\t\t\twhile (index < lineText.length && ((c = lineText.charCodeAt(index++)) === 32 || c === 9)) { selection.end++; }\r\n\t\t\t\t\t\ttext = model.getLineDelimiter() + prefix;\r\n\t\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + text.length;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tif (!indent(selection, setText)) {\r\n\t\t\t\t\tsetText(lineDelimiter, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\taddBlockComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar open, close;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tvar delimiters = styleAccessor.getBlockCommentDelimiters(selection.start);\r\n\t\t\t\t\topen = delimiters[0];\r\n\t\t\t\t\tclose = delimiters[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* fallback values */\r\n\t\t\t\t\topen = \"/*\"; //$NON-NLS-0$\r\n\t\t\t\t\tclose = \"*/\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = this._findEnclosingComment(model, selection.start, selection.end, open, close);\r\n\t\t\t\tif (result.commentStart !== undefined && result.commentEnd !== undefined) {\r\n\t\t\t\t\treturn; // Already in a comment\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar text = model.getText(selection.start, selection.end);\r\n\t\t\t\tif (text.length === 0) { return; }\r\n\t\r\n\t\t\t\tvar oldLength = text.length;\r\n\t\t\t\ttext = text.replace(open, \"\");\r\n\t\t\t\ttext = text.replace(close, \"\");\r\n\t\t\t\tvar newLength = text.length;\r\n\t\t\t\ttext = open + text + close;\r\n\t\r\n\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\tselection.start += open.length;\r\n\t\t\t\tselection.end +=  open.length + (newLength - oldLength);\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called on an opening bracket keypress.\r\n\t\t * Automatically inserts the specified opening and closing brackets around the caret or selected text.\r\n\t\t */\r\n\t\tautoPairBrackets: function(openBracket, closeBracket) {\r\n\t\t\tif (openBracket === \"[\" && !this.autoPairSquareBrackets) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"{\" && !this.autoPairBraces) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"(\" && !this.autoPairParentheses) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"<\" && !this.autoPairAngleBrackets) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar isClosingBracket = new RegExp(\"^$|[)}\\\\]>]\"); //$NON-NLS-0$ // matches any empty string and closing bracket\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1).trim(); //$NON-NLS-0$\r\n\t\t\t\tvar text;\r\n\t\t\t\tif (selection.start === selection.end && isClosingBracket.test(nextChar)) {\r\n\t\t\t\t\t// No selection and subsequent character is not a closing bracket - wrap the caret with the opening and closing brackets,\r\n\t\t\t\t\t// and maintain the caret position inbetween the brackets\r\n\t\t\t\t\ttext = openBracket + closeBracket;\r\n\t\t\t\t\tsetText(text, selection.start, selection.start);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + 1;\r\n\t\t\t\t} else if (selection.start !== selection.end) {\r\n\t\t\t\t\t// Wrap the selected text with the specified opening and closing brackets and keep selection on text\r\n\t\t\t\t\ttext = openBracket + model.getText(selection.start, selection.end) + closeBracket;\r\n\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\tselection.start += 1;\r\n\t\t\t\t\tselection.end += 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetText(openBracket, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + openBracket.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called on a quotation mark keypress.\r\n\t\t * Automatically inserts a pair of the specified quotation around the caret the caret or selected text.\r\n\t\t */\r\n\t\tautoPairQuotations: function(quotation) {\r\n\t\t\tif (!this.autoPairQuotation) { return false; }\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar isQuotation = new RegExp(\"^\\\"$|^'$\"); //$NON-NLS-0$\r\n\t\t\tvar isAlpha = new RegExp(\"\\\\w\"); //$NON-NLS-0$\r\n\t\t\tvar isClosingBracket = new RegExp(\"^$|[)}\\\\]>]\"); //$NON-NLS-0$ // matches any empty string and closing bracket\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar prevChar = (selection.start === 0) ? \"\" : model.getText(selection.start - 1, selection.start).trim(); //$NON-NLS-0$\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1).trim(); //$NON-NLS-0$\r\n\t\t\t\tfunction insertQuotation() {\r\n\t\t\t\t\tsetText(quotation, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + quotation.length;\r\n\t\t\t\t}\r\n\t\t\t\t// Wrap the selected text with the specified opening and closing quotation marks and keep selection on text\r\n\t\t\t\tif (selection.start !== selection.end) {\r\n\t\t\t\t\tvar text = model.getText(selection.start, selection.end);\r\n\t\t\t\t\tif (isQuotation.test(text)) {\r\n\t\t\t\t\t\tinsertQuotation();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetText(quotation + text + quotation, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start += 1;\r\n\t\t\t\t\t\tselection.end += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (nextChar === quotation) {\r\n\t\t\t\t\t// Skip over the next character if it matches the specified quotation mark\r\n\t\t\t\t\tselection.start = selection.end = selection.start + 1;\r\n\t\t\t\t} else if (prevChar === quotation || isQuotation.test(nextChar) || isAlpha.test(prevChar) || !isClosingBracket.test(nextChar)) {\r\n\t\t\t\t\tinsertQuotation();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// No selection - wrap the caret with the opening and closing quotation marks, and maintain the caret position inbetween the quotations\r\n\t\t\t\t\tsetText(quotation + quotation, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + quotation.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called when a content assist proposal has been applied. Inserts the proposal into the\r\n\t\t * document. Activates Linked Mode if applicable for the selected proposal.\r\n\t\t * @param {orion.editor.ContentAssist#ProposalAppliedEvent} event\r\n\t\t */\r\n\t\tcontentAssistProposalApplied: function(event) {\r\n\t\t\t/*\r\n\t\t\t * The event.proposal is an object with this shape:\r\n\t\t\t * {   proposal: \"[proposal string]\", // Actual text of the proposal\r\n\t\t\t *     description: \"diplay string\", // Optional\r\n\t\t\t *     positions: [{\r\n\t\t\t *         offset: 10, // Offset of start position of parameter i\r\n\t\t\t *         length: 3  // Length of parameter string for parameter i\r\n\t\t\t *     }], // One object for each parameter; can be null\r\n\t\t\t *     escapePosition: 19, // Optional; offset that caret will be placed at after exiting Linked Mode.\r\n\t\t\t *     style: 'emphasis', // Optional: either emphasis, noemphasis, hr to provide custom styling for the proposal\r\n\t\t\t *     unselectable: false // Optional: if set to true, then this proposal cannnot be selected through the keyboard\r\n\t\t\t * }\r\n\t\t\t * Offsets are relative to the text buffer.\r\n\t\t\t */\r\n\t\t\tvar proposal = event.data.proposal;\r\n\r\n\t\t\t// If escapePosition is not provided, positioned the cursor at the end of the inserted text \r\n\t\t\tfunction escapePosition() {\r\n\t\t\t\tif (typeof proposal.escapePosition === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t\treturn proposal.escapePosition;\r\n\t\t\t\t}\r\n\t\t\t\treturn event.data.start + proposal.proposal.length;\r\n\t\t\t}\r\n\r\n\t\t\t//if the proposal specifies linked positions, build the model and enter linked mode\r\n\t\t\tif (proposal.positions && proposal.positions.length > 0 && this.linkedMode) {\r\n\t\t\t\tvar positionGroups = [];\r\n\t\t\t\tfor (var i = 0; i < proposal.positions.length; ++i) {\r\n\t\t\t\t\tpositionGroups[i] = {\r\n\t\t\t\t\t\tpositions: [{\r\n\t\t\t\t\t\t\toffset: proposal.positions[i].offset,\r\n\t\t\t\t\t\t\tlength: proposal.positions[i].length\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tthis.linkedMode.enterLinkedMode({\r\n\t\t\t\t\tgroups: positionGroups,\r\n\t\t\t\t\tescapePosition: escapePosition()\r\n\t\t\t\t});\r\n\t\t\t} else if (proposal.groups && proposal.groups.length > 0 && this.linkedMode) {\r\n\t\t\t\tthis.linkedMode.enterLinkedMode({\r\n\t\t\t\t\tgroups: proposal.groups,\r\n\t\t\t\t\tescapePosition: escapePosition()\r\n\t\t\t\t});\r\n\t\t\t} else if (typeof proposal.escapePosition === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t//we don't want linked mode, but there is an escape position, so just set cursor position\r\n\t\t\t\tvar textView = this.editor.getTextView();\r\n\t\t\t\ttextView.setCaretOffset(proposal.escapePosition);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// On backspace keypress, checks if there are a pair of brackets or quotation marks to be deleted\r\n\t\tdeletePrevious: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tif (selection.start !== selection.end) { return; }\r\n\t\t\t\r\n\t\t\t\tvar prevChar = (selection.start === 0) ? \"\" : model.getText(selection.start - 1, selection.start); //$NON-NLS-0$\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1); //$NON-NLS-0$\r\n\t\r\n\t\t\t\tif (prevChar === \"(\" && nextChar === \")\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"[\" && nextChar === \"]\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"{\" && nextChar === \"}\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"<\" && nextChar === \">\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === '\"' && nextChar === '\"' || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"'\" && nextChar === \"'\") { //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tsetText(\"\", selection.start, selection.start + 1); //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t_findEnclosingComment: function(model, start, end, open, close) {\r\n\t\t\tvar firstLine = model.getLineAtOffset(start);\r\n\t\t\tvar lastLine = model.getLineAtOffset(end);\r\n\t\t\tvar i, line, extent, openPos, closePos;\r\n\t\t\tvar commentStart, commentEnd;\r\n\t\t\tfor (i = firstLine; i >= 0; i--) {\r\n\t\t\t\tline = model.getLine(i);\r\n\t\t\t\textent = (i === firstLine) ? start - model.getLineStart(firstLine) : line.length;\r\n\t\t\t\topenPos = line.lastIndexOf(open, extent);\r\n\t\t\t\tclosePos = line.lastIndexOf(close, extent);\r\n\t\t\t\tif (closePos > openPos) {\r\n\t\t\t\t\tbreak; // not inside a comment\r\n\t\t\t\t}\r\n\t\t\t\tif (openPos !== -1) {\r\n\t\t\t\t\tcommentStart = model.getLineStart(i) + openPos;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (i = lastLine; i < model.getLineCount(); i++) {\r\n\t\t\t\tline = model.getLine(i);\r\n\t\t\t\textent = (i === lastLine) ? end - model.getLineStart(lastLine) : 0;\r\n\t\t\t\topenPos = line.indexOf(open, extent);\r\n\t\t\t\tclosePos = line.indexOf(close, extent);\r\n\t\t\t\tif (openPos !== -1 && openPos < closePos) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (closePos !== -1) {\r\n\t\t\t\t\tcommentEnd = model.getLineStart(i) + closePos;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {commentStart: commentStart, commentEnd: commentEnd};\r\n\t\t},\r\n\t\tlineStart: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection/*, setText*/) {\r\n\t\t\t\tvar caretOffset = selection.getCaret();\r\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caretOffset);\r\n\t\t\t\tvar lineOffset = model.getLineStart(lineIndex);\r\n\t\t\t\tvar lineText = model.getLine(lineIndex);\r\n\t\t\t\tvar offset;\r\n\t\t\t\tfor (offset=0; offset<lineText.length; offset++) {\r\n\t\t\t\t\tvar c = lineText.charCodeAt(offset);\r\n\t\t\t\t\tif (!(c === 32 || c === 9)) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\toffset += lineOffset;\r\n\t\t\t\tif (caretOffset !== offset) {\r\n\t\t\t\t\tselection.setCaret(offset);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tselection.setCaret(lineOffset);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tremoveBlockComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar open, close;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tvar delimiters = styleAccessor.getBlockCommentDelimiters(selection.start);\r\n\t\t\t\t\topen = delimiters[0];\r\n\t\t\t\t\tclose = delimiters[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* fallback values, should not be needed */\r\n\t\t\t\t\topen = \"/*\"; //$NON-NLS-0$\r\n\t\t\t\t\tclose = \"*/\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Try to shrink selection to a comment block\r\n\t\t\t\tvar selectedText = model.getText(selection.start, selection.end);\r\n\t\t\t\tvar newStart, newEnd;\r\n\t\t\t\tvar i;\r\n\t\t\t\tfor (i = 0; i < selectedText.length; i++) {\r\n\t\t\t\t\tif (selectedText.substring(i, i + open.length) === open) {\r\n\t\t\t\t\t\tnewStart = selection.start + i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (; i < selectedText.length; i++) {\r\n\t\t\t\t\tif (selectedText.substring(i, i + close.length) === close) {\r\n\t\t\t\t\t\tnewEnd = selection.start + i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar text;\r\n\t\t\t\tif (newStart !== undefined && newEnd !== undefined) {\r\n\t\t\t\t\ttext = model.getText(newStart + open.length, newEnd);\r\n\t\t\t\t\tsetText(text, newStart, newEnd + close.length);\r\n\t\t\t\t\tselection.start = newStart;\r\n\t\t\t\t\tselection.end = newEnd;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Otherwise find enclosing comment block\r\n\t\t\t\t\tvar result = this._findEnclosingComment(model, selection.start, selection.end, open, close);\r\n\t\t\t\t\tif (!(result.commentStart === undefined || result.commentEnd === undefined)) {\r\n\t\t\t\t\t\ttext = model.getText(result.commentStart + open.length, result.commentEnd);\r\n\t\t\t\t\t\tsetText(text, result.commentStart, result.commentEnd + close.length);\r\n\t\t\t\t\t\tselection.start = selection.start - open.length;\r\n\t\t\t\t\t\tselection.end = selection.end - close.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\ttoggleLineComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\ttextView.setRedraw(false);\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\r\n\t\t\t\tvar comment;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tcomment = styleAccessor.getLineCommentDelimiter(model.getLineStart(firstLine));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcomment = \"//\"; /* fallback value */ //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uncomment = true, lineIndices = [], index;\r\n\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\tvar lineText = model.getLine(i, true);\r\n\t\t\t\t\tindex = lineText.indexOf(comment);\r\n\t\t\t\t\tlineIndices.push(index);\r\n\t\t\t\t\tif (!uncomment || index === -1) {\r\n\t\t\t\t\t\tuncomment = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (index !== 0) {\r\n\t\t\t\t\t\t\tvar j;\r\n\t\t\t\t\t\t\tfor (j = 0; j < index; j++) {\r\n\t\t\t\t\t\t\t\tvar c = lineText.charCodeAt(j);\r\n\t\t\t\t\t\t\t\tif (!(c === 32 || c === 9)) {\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuncomment = j === index;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar selStart, selEnd, l = comment.length, k;\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tif (uncomment) {\r\n\t\t\t\t\tfor (k = lineIndices.length - 1; k >= 0; k--) {\r\n\t\t\t\t\t\tindex = lineIndices[k] + model.getLineStart(firstLine + k);\r\n\t\t\t\t\t\tsetText(\"\", index, index + l);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar lastLineStart = model.getLineStart(lastLine);\r\n\t\t\t\t\tselStart = lineStart === selection.start ? selection.start : selection.start - l;\r\n\t\t\t\t\tselEnd = selection.end - (l * (lastLine - firstLine + 1)) + (selection.end === lastLineStart + 1 ? l : 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (k = lineIndices.length - 1; k >= 0; k--) {\r\n\t\t\t\t\t\tindex = model.getLineStart(firstLine + k);\r\n\t\t\t\t\t\tsetText(comment, index, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tselStart = lineStart === selection.start ? selection.start : selection.start + l;\r\n\t\t\t\t\tselEnd = selection.end + (l * (lastLine - firstLine + 1));\r\n\t\t\t\t}\r\n\t\t\t\tselection.start = selStart;\r\n\t\t\t\tselection.end = selEnd;\r\n\t\t\t});\r\n\t\t\ttextView.setRedraw(true);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\ttrimTrailingWhitespaces: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\teditor.getTextView().setRedraw(false);\r\n\t\t\tthis.startUndo();\r\n\t\t\tvar matchTrailingWhiteSpace = /(\\s+$)/;\r\n\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\tfor (var i = 0; i < lineCount; i++) {\r\n\t\t\t\tvar lineText = model.getLine(i);\r\n\t\t\t\tvar match = matchTrailingWhiteSpace.exec(lineText);\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\tvar lineStartOffset = model.getLineStart(i);\r\n\t\t\t\t\tvar matchLength = match[0].length;\r\n\t\t\t\t\tvar start = lineStartOffset + match.index;\r\n\t\t\t\t\tmodel.setText(\"\", start, start + matchLength);\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Move the caret to its original position prior to the save. If the caret\r\n\t\t\t\t\t * was in the trailing whitespaces, move the caret to the end of the line.\r\n\t\t\t\t\t */\r\n\t\t\t\t\tselections.forEach(function(selection) {\r\n\t\t\t\t\t\tif (selection.start > start) {\r\n\t\t\t\t\t\t\tselection.start = Math.max(start, selection.start - matchLength);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (selection.start !== selection.end && selection.end > start) {\r\n\t\t\t\t\t\t\tselection.end = Math.max(start, selection.end - matchLength);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.endUndo();\r\n\t\t\teditor.setSelections(selections, false);\r\n\t\t\teditor.getTextView().setRedraw(true);\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\n\t\t * @name handleClosingBracket\n\t\t * @description When the user types a closing bracket we should skip auto-paired brackets and reduce indenting if\r\n\t\t * \t\t\t\twe are on a new line.\n\t\t * @function\n\t\t * @param closingChar {String} the closing bracket character\n\t\t * @returns returns <code>true</code> to skip printing the closing bracket, false to print it\n\t\t */\n\t\thandleClosingBracket: function(closingChar) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\tif (selections.length === 1 && selections[0].start === selections[0].end) {\r\n\t\t\t\t// If the next character is the same bracket close, skip it\r\n\t\t\t\tvar nextChar = selections[0].start === model.getCharCount() ? \"\" : model.getText(selections[0].start, selections[0].start + 1); //$NON-NLS-0$\r\n\t\t\t\tif (nextChar === closingChar) {\r\n\t\t\t\t\tselections[0].start = selections[0].end = selections[0].start + 1;\r\n\t\t\t\t\teditor.setSelections(selections);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t// If the close bracket is on a new line, reduce the indentation\r\n\t\t\t\tvar lineNum = model.getLineAtOffset(selections[0].start);\r\n\t\t\t\tvar line = model.getLine(lineNum, true);\r\n\t\t\t\tif (line.match(/^\\s*$/)){\r\n\t\t\t\t\tif(textView.getOptions(\"tabMode\")){ //$NON-NLS-1$\r\n\t\t\t\t\t\tvar tabSize = textView.getOptions(\"tabSize\"); //$NON-NLS-1$\r\n\t\t\t\t\t\tvar spaceTab = new Array(tabSize + 1).join(\" \"); //$NON-NLS-1$\r\n\t\t\t\t\t\tvar lineStart = model.getLineStart(lineNum);\r\n\t\t\t\t\t\tvar lineEnd = model.getLineEnd(lineNum);\r\n\t\t\t\t\t\tif (lineStart !== lineEnd) {\r\n\t\t\t\t\t\t\tif (line.indexOf(\"\\t\") === 0) { //$NON-NLS-1$\r\n\t\t\t\t\t\t\t\tline = line.substring(1);\r\n\t\t\t\t\t\t\t\tmodel.setText(line, lineStart, lineEnd);\r\n\t\t\t\t\t\t\t\teditor.setSelection(selections[0].start-1, selections[0].end-1);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t} else if (line.indexOf(spaceTab) === 0) {\r\n\t\t\t\t\t\t\t\tline = line.substring(tabSize);\r\n\t\t\t\t\t\t\t\tmodel.setText(line, lineStart, lineEnd);\r\n\t\t\t\t\t\t\t\teditor.setSelection(selections[0].start-tabSize, selections[0].end-tabSize);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetAutoPairParentheses: function(enabled) {\r\n\t\t\tthis.autoPairParentheses = enabled;\r\n\t\t},\r\n\t\tsetAutoPairBraces: function(enabled) {\r\n\t\t\tthis.autoPairBraces = enabled;\r\n\t\t},\r\n\t\tsetAutoPairSquareBrackets: function(enabled) {\r\n\t\t\tthis.autoPairSquareBrackets = enabled;\r\n\t\t},\r\n\t\tsetAutoPairAngleBrackets: function(enabled) {\r\n\t\t\tthis.autoPairAngleBrackets = enabled;\r\n\t\t},\r\n\t\tsetAutoPairQuotations: function(enabled) {\r\n\t\t\tthis.autoPairQuotation = enabled;\r\n\t\t},\r\n\t\tsetAutoCompleteComments: function(enabled) {\r\n\t\t\tthis.autoCompleteComments = enabled;\r\n\t\t},\r\n\t\tsetSmartIndentation: function(enabled) {\r\n\t\t\tthis.smartIndentation = enabled;\r\n\t\t}\r\n\t};\r\n\texports.SourceCodeActions = SourceCodeActions;\r\n\r\n\tif (!String.prototype.trimLeft) {\r\n\t\tString.prototype.trimLeft = function(){\r\n\t\t\treturn this.replace(/^\\s+/g, '');\r\n\t\t};\r\n\t}\r\n\tif (!String.prototype.trimRight) {\r\n\t\tString.prototype.trimRight = function(){\r\n\t\t\treturn this.replace(/\\s+$/g, '');\r\n\t\t};\r\n\t}\r\n\r\n\treturn exports;\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/undoStack\", [], function() { //$NON-NLS-0$\n\n\t/** \n\t * Constructs a new Change object.\n\t * \n\t * @class \n\t * @name orion.editor.Change\n\t * @private\n\t */\n\tfunction Change(model, offset, text, previousText, type) {\n\t\tthis.model = model;\n\t\tthis.offset = offset;\n\t\tthis.text = text;\n\t\tthis.previousText = previousText;\n\t\tthis.type = type;\n\t}\n\tChange.prototype = {\n\t\t/** @ignore */\n\t\tgetRedoChanges: function() {\n\t\t\treturn [{start: this.offset, end: this.offset + this.previousText.length, text: this.text}];\n\t\t},\n\t\t/** @ignore */\n\t\tgetUndoChanges: function() {\n\t\t\treturn [{start: this.offset, end: this.offset + this.text.length, text: this.previousText}];\n\t\t},\n\t\t/** @ignore */\n\t\tundo: function (view, select) {\n\t\t\tthis._doUndoRedo(this.offset, this.previousText, this.text, view, select);\n\t\t\treturn true;\n\t\t},\n\t\t/** @ignore */\n\t\tredo: function (view, select) {\n\t\t\tthis._doUndoRedo(this.offset, this.text, this.previousText, view, select);\n\t\t\treturn true;\n\t\t},\n\t\tmerge: function(start, text, previousText, type, end) {\n\t\t\tif (type === this.type) {\n\t\t\t\tif (type === 1 && start === this.offset + this.text.length) {\n\t\t\t\t\tthis.text += text;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (type === -1 && end === this.offset) {\n\t\t\t\t\tthis.offset = start;\n\t\t\t\t\tthis.previousText = previousText + this.previousText;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (type === -1 && start === this.offset) {\n\t\t\t\t\tthis.previousText = this.previousText + previousText;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_doUndoRedo: function(offset, text, previousText, view, select) {\n\t\t\tthis.model.setText(text, offset, offset + previousText.length);\n\t\t\tif (select && view) {\n\t\t\t\tvar model = view.getModel();\n\t\t\t\tif (model !== this.model) {\n\t\t\t\t\toffset = model.mapOffset(offset, true);\n\t\t\t\t}\n\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t}\n\t\t}\n\t};\n\n\t/** \n\t * Constructs a new CompoundChange object.\n\t * \n\t * @param owner the owner of the compound change\n\t *\n\t * @class \n\t * @name orion.editor.CompoundChange\n\t * @private\n\t */\n\tfunction CompoundChange (owner) {\n\t\tthis.owner = owner;\n\t\tthis.changes = [];\n\t}\n\tCompoundChange.prototype = {\n\t\t/** @ignore */\n\t\tgetRedoChanges: function() {\n\t\t\tvar changes = [];\n\t\t\tfor (var i=0; i<this.changes.length; i++) {\n\t\t\t\tchanges = changes.concat(this.changes[i].getRedoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/** @ignore */\n\t\tgetUndoChanges: function() {\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.changes.length - 1; i >= 0; i--) {\n\t\t\t\tchanges = changes.concat(this.changes[i].getUndoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/** @ignore */\n\t\tadd: function (change) {\n\t\t\tthis.changes.push(change);\n\t\t},\n\t\t/** @ignore */\n\t\tend: function (view) {\n\t\t\tif (view) {\n\t\t\t\tthis.endSelection = view.getSelections();\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.end) {\n\t\t\t\towner.end();\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\tundo: function (view, select) {\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(false);\n\t\t\t}\n\t\t\tfor (var i=this.changes.length - 1; i >= 0; i--) {\n\t\t\t\tthis.changes[i].undo(view, false);\n\t\t\t}\n\t\t\tif (select && view) {\n\t\t\t\tview.setSelections(this.startSelection);\n\t\t\t}\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(true);\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.undo) {\n\t\t\t\towner.undo();\n\t\t\t}\n\t\t\treturn this.changes.length > 0;\n\t\t},\n\t\t/** @ignore */\n\t\tredo: function (view, select) {\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(false);\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.changes.length; i++) {\n\t\t\t\tthis.changes[i].redo(view, false);\n\t\t\t}\n\t\t\tif (select && view) {\n\t\t\t\tview.setSelections(this.endSelection);\n\t\t\t}\n\t\t\tif (this.changes.length > 1, view) {\n\t\t\t\tview.setRedraw(true);\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.redo) {\n\t\t\t\towner.redo();\n\t\t\t}\n\t\t\treturn this.changes.length > 0;\n\t\t},\n\t\tmerge: function(start, text, previousText, type, end, compoundChange) {\n\t\t\tvar length = this.changes.length;\n\t\t\tif (length > 0 && this === compoundChange) {\n\t\t\t\treturn this.changes[length - 1].merge(start, text, previousText, type, end);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/** @ignore */\n\t\tstart: function (view) {\n\t\t\tif (view) {\n\t\t\t\tthis.startSelection = view.getSelections();\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.start) {\n\t\t\t\towner.start();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Constructs a new UndoStack on a text view.\n\t *\n\t * @param {orion.editor.TextView} view the text view for the undo stack.\n\t * @param {Number} [size=100] the size for the undo stack.\n\t *\n\t * @name orion.editor.UndoStack\n\t * @class The UndoStack is used to record the history of a text model associated to an view. Every\n\t * change to the model is added to stack, allowing the application to undo and redo these changes.\n\t *\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * </p>\n\t */\n\tfunction UndoStack (view, size) {\n\t\tthis.size = size !== undefined ? size : 100;\n\t\tthis.reset();\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanging: function(e) {\n\t\t\t\tself._onChanging(e);\n\t\t\t},\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t}\n\t\t};\n\t\tif (view.getModel) {\n\t\t\tvar model = view.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\tthis.model = model;\n\t\t\tthis.setView(view);\n\t\t} else {\n\t\t\tthis.shared = true;\n\t\t\tthis.model = view;\n\t\t}\n\t\tthis.model.addEventListener(\"Changing\", this._listener.onChanging); //$NON-NLS-0$\n\t}\n\tUndoStack.prototype = /** @lends orion.editor.UndoStack.prototype */ {\n\t\t/**\n\t\t * Destroy the undo stack.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis._onDestroy();\n\t\t},\n\t\t/**\n\t\t * Adds a change to the stack.\n\t\t * \n\t\t * @param change the change to add.\n\t\t */\n\t\tadd: function (change) {\n\t\t\tif (this.compoundChange) {\n\t\t\t\tthis.compoundChange.add(change);\n\t\t\t} else {\n\t\t\t\tvar length = this.stack.length;\n\t\t\t\tthis.stack.splice(this.index, length-this.index, change);\n\t\t\t\tthis.index++;\n\t\t\t\tif (this.stack.length > this.size) {\n\t\t\t\t\tthis.stack.shift();\n\t\t\t\t\tthis.index--;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/** \n\t\t * Marks the current state of the stack as clean.\n\t\t *\n\t\t * <p>\n\t\t * This function is typically called when the content of view associated with the stack is saved.\n\t\t * </p>\n\t\t *\n\t\t * @see orion.editor.UndoStack#isClean\n\t\t */\n\t\tmarkClean: function() {\n\t\t\tthis._commitUndo();\n\t\t\tthis.cleanChange = this.stack[this.index - 1];\n\t\t\tif (this.cleanChange) {\n\t\t\t\tthis.cleanChange.type = 2;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns true if current state of stack is the same\n\t\t * as the state when markClean() was called.\n\t\t *\n\t\t * <p>\n\t\t * For example, the application calls markClean(), then calls undo() four times and redo() four times.\n\t\t * At this point isClean() returns true.  \n\t\t * </p>\n\t\t * <p>\n\t\t * This function is typically called to determine if the content of the view associated with the stack\n\t\t * has changed since the last time it was saved.\n\t\t * </p>\n\t\t *\n\t\t * @return {Boolean} returns if the state is the same as the state when markClean() was called.\n\t\t *\n\t\t * @see orion.editor.UndoStack#markClean\n\t\t */\n\t\tisClean: function() {\n\t\t\treturn this.cleanChange === this.stack[this.index - 1];\n\t\t},\n\t\t/**\n\t\t * Returns true if there is at least one change to undo.\n\t\t *\n\t\t * @return {Boolean} returns true if there is at least one change to undo.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t * @see orion.editor.UndoStack#undo\n\t\t */\n\t\tcanUndo: function() {\n\t\t\treturn this.index > 0;\n\t\t},\n\t\t/**\n\t\t * Returns true if there is at least one change to redo.\n\t\t *\n\t\t * @return {Boolean} returns true if there is at least one change to redo.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t * @see orion.editor.UndoStack#redo\n\t\t */\n\t\tcanRedo: function() {\n\t\t\treturn (this.stack.length - this.index) > 0;\n\t\t},\n\t\t/**\n\t\t * Finishes a compound change.\n\t\t *\n\t\t * @see orion.editor.UndoStack#startCompoundChange\n\t\t */\n\t\tendCompoundChange: function() {\n\t\t\tif (this.compoundChange) {\n\t\t\t\tthis.compoundChange.end(this.view);\n\t\t\t}\n\t\t\tthis.compoundChange = undefined;\n\t\t},\n\t\t/**\n\t\t * Returns the sizes of the stack.\n\t\t *\n\t\t * @return {object} a object where object.undo is the number of changes that can be un-done, \n\t\t *  and object.redo is the number of changes that can be re-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t */\n\t\tgetSize: function() {\n\t\t\treturn {\n\t\t\t\tundo: this.index,\n\t\t\t\tredo: this.stack.length - this.index\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * @class This object represents a text change.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.UndoStack}<br/>\n\t\t * {@link orion.editor.UndoStack#getUndoChanges}<br/>\n\t\t * {@link orion.editor.UndoStack#getRedoChanges}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.TextChange\n\t\t * \n\t\t * @property {Number} start The start offset in the model of the range to be replaced.\n\t\t * @property {Number} end The end offset in the model of the range to be replaced\n\t\t * @property {String} text the text to be inserted\n\t\t */\n\t\t/**\n\t\t * Returns the redo changes.\n\t\t *\n\t\t * @return {orion.editor.TextChange[]} an array of TextChanges that are returned in the order\n\t\t * that they occurred (most recent change last).\n\t\t *\n\t\t * @see orion.editor.UndoStack#getUndoChanges\n\t\t */\n\t\tgetRedoChanges: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.index; i<this.stack.length; i++) {\n\t\t\t\tchanges = changes.concat(this.stack[i].getRedoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/**\n\t\t * Returns the undo changes.\n\t\t *\n\t\t * @return {orion.editor.TextChange[]} an array of TextChanges that are returned in the reverse order\n\t\t * that they occurred (most recent change first).\n\t\t *\n\t\t * @see orion.editor.UndoStack#getRedoChanges\n\t\t */\n\t\tgetUndoChanges: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.index; i >= 0; i--) {\n\t\t\t\tchanges = changes.concat(this.stack[i].getUndoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/**\n\t\t * Undo the last change in the stack.\n\t\t *\n\t\t * @return {Boolean} returns true if a change was un-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#redo\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t */\n\t\tundo: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar change, result = false;\n\t\t\tthis._ignoreUndo = true;\n\t\t\tdo {\n\t\t\t\tif (this.index <= 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tchange = this.stack[--this.index];\n\t\t\t} while (!(result = change.undo(this.view, true)));\n\t\t\tthis._ignoreUndo = false;\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Redo the last change in the stack.\n\t\t *\n\t\t * @return {Boolean} returns true if a change was re-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#undo\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t */\n\t\tredo: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar change, result = false;\n\t\t\tthis._ignoreUndo = true;\n\t\t\tdo {\n\t\t\t\tif (this.index >= this.stack.length) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tchange = this.stack[this.index++];\n\t\t\t} while (!(result = change.redo(this.view, true)));\n\t\t\tthis._ignoreUndo = false;\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Reset the stack to its original state. All changes in the stack are thrown away.\n\t\t */\n\t\treset: function() {\n\t\t\tthis.index = 0;\n\t\t\tthis.cleanChange = undefined;\n\t\t\tthis.stack = [];\n\t\t\tthis._ignoreUndo = false;\n\t\t\tthis._compoundChange = undefined;\n\t\t},\n\t\tsetView: function(view) {\n\t\t\tif (this.view === view) { return; }\n\t\t\tif (this.view) {\n\t\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis.view = view;\n\t\t\tif (this.view) {\n\t\t\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Starts a compound change. \n\t\t * <p>\n\t\t * All changes added to stack from the time startCompoundChange() is called\n\t\t * to the time that endCompoundChange() is called are compound on one change that can be un-done or re-done\n\t\t * with one single call to undo() or redo().\n\t\t * </p>\n\t\t *\n\t\t * @param owner the owner of the compound change which is called for start, end, undo and redo.\n\t\t *\t\t \n\t\t * @return the compound change\n\t\t *\n\t\t * @see orion.editor.UndoStack#endCompoundChange\n\t\t */\n\t\tstartCompoundChange: function(owner) {\n\t\t\tthis._commitUndo();\n\t\t\tvar change = new CompoundChange(owner);\n\t\t\tthis.add(change);\n\t\t\tthis.compoundChange = change;\n\t\t\tthis.compoundChange.start(this.view);\n\t\t\treturn this.compoundChange;\n\t\t},\n\t\t_commitUndo: function () {\n\t\t\tthis.endCompoundChange();\n\t\t},\n\t\t_onDestroy: function(evt) {\n\t\t\tif (!evt /* undo stack destroyed */ || !this.shared) {\n\t\t\t\tthis.model.removeEventListener(\"Changing\", this._listener.onChanging); //$NON-NLS-0$\n\t\t\t}\n\t\t\tif (this.view) {\n\t\t\t\tthis.view.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t},\n\t\t_trackUnsavedChanges: function(e) {\n\t\t\tif (!this._unsavedChanges) return;\n\t\t\tvar length = this._unsavedChanges.length;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar start = e.start;\n\t\t\tvar end = e.start + removedCharCount;\n\t\t\tvar type = 0;\n\t\t\tif (addedCharCount === 0) {\n\t\t\t\ttype = -1;\n\t\t\t} else if (removedCharCount === 0) {\n\t\t\t\ttype = 1;\n\t\t\t}\n\t\t\tif (length > 0) {\n\t\t\t\tif (type === this._previousChangeType) {\n\t\t\t\t\tvar previousChange = this._unsavedChanges[length-1];\n\t\t\t\t\tif (removedCharCount === 0 && start === previousChange.end + previousChange.text.length) {\n\t\t\t\t\t\tpreviousChange.text += e.text;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.addedCharCount === 0 && end === previousChange.start) {\n\t\t\t\t\t\tpreviousChange.start = start;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._previousChangeType = type;\n\t\t\tthis._unsavedChanges.push({start:start, end:end, text:e.text});\n\t\t},\n\t\t_onChanging: function(e) {\n\t\t\tthis._trackUnsavedChanges(e);\n\t\t\tif (this._ignoreUndo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar text = e.text;\n\t\t\tvar start = e.start;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar end = start + removedCharCount;\n\t\t\tvar type = 0;\n\t\t\tif (addedCharCount === 0 && removedCharCount === 1) {\n\t\t\t\ttype = -1;\n\t\t\t} else if (addedCharCount === 1 && removedCharCount === 0) {\n\t\t\t\ttype = 1;\n\t\t\t}\n\t\t\tvar length = this.stack.length;\n\t\t\tvar previousText = this.model.getText(start, end);\n\t\t\tif (length > 0 && this.index === length) {\n\t\t\t\tvar change = this.stack[length - 1];\n\t\t\t\tif (change.merge(start, text, previousText, type, end, this.compoundChange)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.add(new Change(this.model, start, text, previousText, type));\n\t\t}\n\t};\n\t\n\treturn {\n\t\tUndoStack: UndoStack\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/**\n * @class Provides the various rulers that show up on the left and right sides of the editor.  The rulers\n * \t\t\tcontain annotations with varying styles, hovers and on click behaviours.\n */\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/rulers\", [\n\t'i18n!orion/editor/nls/messages',\n\t'orion/editor/textView',\n\t'orion/editor/annotations',\n\t'orion/editor/tooltip', \n\t'orion/objects',\n\t'orion/editor/util',\n\t'orion/util'\n], function(messages, mTextView, mAnnotations, mTooltip, objects, textUtil, util) {\n\n\tfunction BaseRuler (rulerLocation, rulerOverview, rulerStyle) {\n\t\tthis._location = rulerLocation || \"left\"; //$NON-NLS-0$\n\t\tthis._overview = rulerOverview || \"page\"; //$NON-NLS-0$\n\t\tthis._rulerStyle = rulerStyle;\n\t\tthis._view = null;\n\t}\n\tBaseRuler.prototype = /** @lends orion.editor.BaseRuler.prototype */ {\n\t\t/**\n\t\t * Returns the ruler location.\n\t\t *\n\t\t * @returns {String} the ruler location, which is either \"left\" or \"right\" or \"margin\".\n\t\t *\n\t\t * @see orion.editor.Ruler#getOverview\n\t\t */\n\t\tgetLocation: function() {\n\t\t\treturn this._location;\n\t\t},\n\t\t/**\n\t\t * Returns the ruler overview type.\n\t\t *\n\t\t * @returns {String} the overview type, which is either \"page\" or \"document\" or \"fixed\".\n\t\t *\n\t\t * @see orion.editor.Ruler#getLocation\n\t\t */\n\t\tgetOverview: function() {\n\t\t\treturn this._overview;\n\t\t},\n\t\t/**\n\t\t * Returns the style information for the ruler.\n\t\t *\n\t\t * @returns {orion.editor.Style} the style information.\n\t\t */\n\t\tgetRulerStyle: function() {\n\t\t\treturn this._rulerStyle;\n\t\t},\n\t\t/**\n\t\t * Returns the text view.\n\t\t *\n\t\t * @returns {orion.editor.TextView} the text view.\n\t\t *\n\t\t * @see orion.editor.Ruler#setView\n\t\t */\n\t\tgetView: function() {\n\t\t\treturn this._view;\n\t\t},\n\t\t/**\n\t\t * Sets the view for the ruler.\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler\n\t\t * is added to the view.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.TextView} view the text view.\n\t\t */\n\t\tsetView: function (view) {\n\t\t\tif (this._onTextModelChanged && this._view) {\n\t\t\t\tthis._view.removeEventListener(\"ModelChanged\", this._listener.onTextModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._view = view;\n\t\t\tif (this._onTextModelChanged && this._view) {\n\t\t\t\tthis._view.addEventListener(\"ModelChanged\", this._listener.onTextModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t};\n\n\t/**\n\t * Constructs a new ruler. \n\t * <p>\n\t * The default implementation does not implement all the methods in the interface\n\t * and is useful only for objects implementing rulers.\n\t * <p/>\n\t * \n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {String} [rulerOverview=\"page\"] the overview for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle] the style for the ruler. \n\t * \n\t * @class This interface represents a ruler for the text view.\n\t * <p>\n\t * A Ruler is a graphical element that is placed either on the left or on the right side of \n\t * the view. It can be used to provide the view with per line decoration such as line numbering,\n\t * bookmarks, breakpoints, folding disclosures, etc. \n\t * </p><p>\n\t * There are two types of rulers: page and document. A page ruler only shows the content for the lines that are\n\t * visible, while a document ruler always shows the whole content.\n\t * </p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.LineNumberRuler}<br/>\n\t * {@link orion.editor.AnnotationRuler}<br/>\n\t * {@link orion.editor.OverviewRuler}<br/> \n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#addRuler}\n\t * </p>\t\t \n\t * @name orion.editor.Ruler\n\t * @borrows orion.editor.AnnotationTypeList#addAnnotationType as #addAnnotationType\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationTypePriority as #getAnnotationTypePriority\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationsByType as #getAnnotationsByType\n\t * @borrows orion.editor.AnnotationTypeList#isAnnotationTypeVisible as #isAnnotationTypeVisible\n\t * @borrows orion.editor.AnnotationTypeList#removeAnnotationType as #removeAnnotationType\n\t */\n\tfunction Ruler (annotationModel, rulerLocation, rulerOverview, rulerStyle) {\n\t\tBaseRuler.call(this, rulerLocation, rulerOverview, rulerStyle);\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonTextModelChanged: function(e) {\n\t\t\t\tself._onTextModelChanged(e);\n\t\t\t},\n\t\t\tonAnnotationModelChanged: function(e) {\n\t\t\t\tself._onAnnotationModelChanged(e);\n\t\t\t}\n\t\t};\n\t\tthis.setAnnotationModel(annotationModel);\n\t}\n\tRuler.prototype = objects.mixin(new BaseRuler(), /** @lends orion.editor.Ruler.prototype */ {\n\t\t/**\n\t\t * Returns the annotations for a given line range merging multiple\n\t\t * annotations when necessary.\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler is redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} startLine the start line index\n\t\t * @param {Number} endLine the end line index\n\t\t * @return {orion.editor.Annotation[]} the annotations for the line range. The array might be sparse.\n\t\t */\n\t\tgetAnnotations: function(startLine, endLine) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) { return []; }\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar start = model.getLineStart(startLine);\n\t\t\tvar end = model.getLineEnd(endLine - 1);\n\t\t\tvar baseModel = model;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tbaseModel = model.getBaseModel();\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tend = model.mapOffset(end);\n\t\t\t}\n\t\t\tvar result = [];\n\t\t\tvar annotations = this.getAnnotationsByType(annotationModel, start, end);\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tvar annotation = annotations[i];\n\t\t\t\tvar annotationLineStart = baseModel.getLineAtOffset(annotation.start);\n\t\t\t\tvar annotationLineEnd = baseModel.getLineAtOffset(Math.max(annotation.start, annotation.end - 1));\n\t\t\t\tfor (var lineIndex = annotationLineStart; lineIndex<=annotationLineEnd; lineIndex++) {\n\t\t\t\t\tvar visualLineIndex = lineIndex;\n\t\t\t\t\tif (model !== baseModel) {\n\t\t\t\t\t\tvar ls = baseModel.getLineStart(lineIndex);\n\t\t\t\t\t\tls = model.mapOffset(ls, true);\n\t\t\t\t\t\tif (ls === -1) { continue; }\n\t\t\t\t\t\tvisualLineIndex = model.getLineAtOffset(ls);\n\t\t\t\t\t}\n\t\t\t\t\tif (!(startLine <= visualLineIndex && visualLineIndex < endLine)) { continue; }\n\t\t\t\t\tvar rulerAnnotation = this._mergeAnnotation(result[visualLineIndex], annotation, lineIndex - annotationLineStart, annotationLineEnd - annotationLineStart + 1);\n\t\t\t\t\tif (rulerAnnotation) {\n\t\t\t\t\t\tresult[visualLineIndex] = rulerAnnotation;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._multiAnnotation && this._multiAnnotationOverlay) {\n\t\t\t\tfor (var k in result) {\n\t\t\t\t\tif (result[k]._multiple) {\n\t\t\t\t\t\tresult[k].html = result[k].html + this._multiAnnotationOverlay.html;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation model.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationModel} the ruler annotation model.\n\t\t *\n\t\t * @see orion.editor.Ruler#setAnnotationModel\n\t\t */\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\t/**\n\t\t * Returns the widest annotation which determines the width of the ruler.\n\t\t * <p>\n\t\t * If the ruler does not have a fixed width it should provide the widest\n\t\t * annotation to avoid the ruler from changing size as the view scrolls.\n\t\t * </p>\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler is redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @returns {orion.editor.Annotation} the widest annotation.\n\t\t *\n\t\t * @see orion.editor.Ruler#getAnnotations\n\t\t */\n\t\tgetWidestAnnotation: function() {\n\t\t\treturn null;\n\t\t},\n\t\t/**\n\t\t * Sets the annotation model for the ruler.\n\t\t *\n\t\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model.\n\t\t *\n\t\t * @see orion.editor.Ruler#getAnnotationModel\n\t\t */\n\t\tsetAnnotationModel: function (annotationModel) {\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.removeEventListener(\"Changed\", this._listener.onAnnotationModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._annotationModel = annotationModel;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.addEventListener(\"Changed\", this._listener.onAnnotationModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the annotation that is displayed when a given line contains multiple\n\t\t * annotations.  This annotation is used when there are different types of\n\t\t * annotations in a given line.\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation for lines with multiple annotations.\n\t\t * \n\t\t * @see orion.editor.Ruler#setMultiAnnotationOverlay\n\t\t */\n\t\tsetMultiAnnotation: function(annotation) {\n\t\t\tthis._multiAnnotation = annotation;\n\t\t},\n\t\t/**\n\t\t * Sets the annotation that overlays a line with multiple annotations.  This annotation is displayed on\n\t\t * top of the computed annotation for a given line when there are multiple annotations of the same type\n\t\t * in the line. It is also used when the multiple annotation is not set.\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation overlay for lines with multiple annotations.\n\t\t * \n\t\t * @see orion.editor.Ruler#setMultiAnnotation\n\t\t */\n\t\tsetMultiAnnotationOverlay: function(annotation) {\n\t\t\tthis._multiAnnotationOverlay = annotation;\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user clicks a line annotation. We select an annotation on the line using\n\t\t * the following logic:\n\t\t * 1) If no selection or selection is on another line, select the first annotation\n\t\t * 2) If an annotation is selected, select the next annotation in the model\n\t\t * 3) If there is a selection that does not match an annotation, select the first annotation after the selection start\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the click event.\n\t\t */\n\t\tonClick: function(lineIndex, e) {\n\t\t\tif (lineIndex === undefined) { return; }\n\t\t\tvar view = this._view;\n\t\t\t\n\t\t\tvar model = view.getModel();\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex, true);\n\t\t\tvar selectionStart = view.getSelection().start;\n\t\t\tvar selectionEnd = view.getSelection().end;\n\t\t\t\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar annotation, start, end;\n\t\t\tif (annotationModel){\n\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tlineStart = model.mapOffset(lineStart);\n\t\t\t\t\tlineEnd = model.mapOffset(lineEnd);\n\t\t\t\t\tselectionStart = model.mapOffset(selectionStart);\n\t\t\t\t\tselectionEnd = model.mapOffset(selectionEnd);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar self = this;\n\t\t\t\tannotation = this._findNextAnnotation(annotationModel, lineStart, lineEnd, selectionStart, selectionEnd, \n\t\t\t\t\tfunction(annotationType){\n\t\t\t\t\t\treturn self.isAnnotationTypeVisible(annotationType);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t// Select the annotation or the start of the line\n\t\t\t\tstart = annotation ? annotation.start : lineStart;\n\t\t\t\tend = annotation ? annotation.end : lineStart;\n\t\t\t\t\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// TODO What does this code do\n\t\t\t\tif (annotation && annotation.groupId !== undefined) {\n\t\t\t\t\tif (this._currentClickGroup === annotation.groupId) {\n\t\t\t\t\t\tthis._currentClickGroup = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._currentClickGroup = annotation.groupId;\n\t\t\t\t\t}\n\t\t\t\t\tthis._setCurrentGroup(lineIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Set the selection before opening the tooltip otherwise the tooltip will be closed immediately\n\t\t\tthis._view.setSelection(end, start, 1/3, function(){});\n\t\t\t\n\t\t\t// Open the tooltip for the selected annotation in the same location as the multi-annotation ruler tooltip.\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\tif (tooltip) {\n\t\t\t\tif (annotation && this.getLocation() === \"left\"){ //$NON-NLS-0$\n\t\t\t\t\ttooltip.show({getTooltipInfo: function() {\n\t\t\t\t\t\t\treturn self._getTooltipInfo([annotation]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false, false);\n\t\t\t\t} else {\n\t\t\t\t\ttooltip.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user double clicks a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the double click event.\n\t\t * @callback\n\t\t */\n\t\tonDblClick: function(lineIndex, e) {\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user moves the mouse over a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse move event.\n\t\t */\n\t\tonMouseMove: function(lineIndex, e) {\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\tif (!tooltip) { return; }\n\t\t\tif (tooltip.isVisible() && this._tooltipLineIndex === lineIndex) { return; }\n\t\t\tthis._tooltipLineIndex = lineIndex;\n\t\t\t\n\t\t\t// Prevent spurious mouse event (e.g. on a scroll)\t\t\t\t\t\n\t\t\tif (e.clientX === this._lastMouseX\n\t\t\t\t&& e.clientY === this._lastMouseY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._lastMouseX = e.clientX;\n\t\t\tthis._lastMouseY = e.clientY;\n\n\t\t\tif (this._hoverTimeout) {\n\t\t\t\twindow.clearTimeout(this._hoverTimeout);\n\t\t\t\tthis._hoverTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\tvar target = e.target ? e.target : e.srcElement;\n\t\t\tvar bounds = target.getBoundingClientRect();\n\t\t\tthis._curElementBounds = Object.create(null);\n\t\t\tthis._curElementBounds.top = bounds.top;\n\t\t\tthis._curElementBounds.left = bounds.left;\n\t\t\tthis._curElementBounds.height = bounds.height;\n\t\t\tthis._curElementBounds.width = bounds.width;\n\t\t\t\n\t\t\t// If we have the entire ruler selected, just use a 1 pixel high area in the ruler (Bug 463486)\n\t\t\tif (target === this.node){\n\t\t\t\tthis._curElementBounds.top = e.clientY;\n\t\t\t\tthis._curElementBounds.height = 1;\n\t\t\t}\n\t\t\t\n\t\t\tvar self = this;\n\t\t\tself._hoverTimeout = window.setTimeout(function() {\n\t\t\t\tself._hoverTimeout = null;\n\t\t\t\ttooltip.onHover({\n\t\t\t\t\tgetTooltipInfo: function() {\n\t\t\t\t\t\tvar annotations = self._getAnnotationsAtLineIndex(self._tooltipLineIndex);\n\t\t\t\t\t\tvar content = self._getTooltipContents(self._tooltipLineIndex, annotations);\n\t\t\t\t\t\treturn self._getTooltipInfo(content, e.clientY, {source: \"ruler\", rulerLocation: self.getLocation()}); //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t\t}, e.clientX, e.clientY);\n\t\t\t}, 175);\n\t\t},\n\t\t/**\n\t\t * This event is sent when the mouse pointer enters a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse over event.\n\t\t */\n\t\tonMouseOver: function(lineIndex, e) {\n\t\t\tthis.onMouseMove(lineIndex, e);\n\t\t\tif (!this._currentClickGroup) {\n\t\t\t\tthis._setCurrentGroup(lineIndex);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This event is sent when the mouse pointer exits a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse out event.\n\t\t * @callback\n\t\t */\n\t\tonMouseOut: function(lineIndex, e) {\n\t\t\tif (!this._currentClickGroup) {\n\t\t\t\tthis._setCurrentGroup(-1);\n\t\t\t}\n\n\t\t\tif (this._hoverTimeout) {\n\t\t\t\twindow.clearTimeout(this._hoverTimeout);\n\t\t\t\tthis._hoverTimeout = null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @name _findNextAnnotation\n\t\t * @description Looks at all annotations in the given range and attempt to find the next valid\n\t\t * \t\t\t\tannotation after the current selection.\n\t\t * @function\n\t\t * @private\n\t\t * @param annotationModel The annotation model to lookup annotations in\n\t\t * @param rangeStart The start range to search for annotations (required)\n\t\t * @param rangeEnd The end range to search for annotations (required)\n\t\t * @param selectionStart The start of the current selection (optional)\n\t\t * @param selectionEnd The end of the current selection (optional)\n\t\t * @param isAnnotationTypeVisible A function callback to check if a given annotation type is valid or visible (optional)\n\t\t * @returns The next annotation in the list or <code>null</code>\n\t\t */\n\t\t_findNextAnnotation: function(annotationModel, rangeStart, rangeEnd, selectionStart, selectionEnd, isAnnotationTypeVisible){\n\t\t\tvar annotation = null;\n\t\t\tvar selectedAnnotation;\n\t\t\tvar searchStart = rangeStart;\n\t\t\t\n\t\t\tif (selectionStart >= 0 && selectionEnd >= 0){\n\t\t\t\tif (selectionStart >= rangeStart && selectionStart < rangeEnd){\n\t\t\t\t\tsearchStart = selectionStart;\n\t\t\t\t\tvar selectedAnnotations = annotationModel.getAnnotations(selectionStart, selectionEnd);\n\t\t\t\t\twhile (!selectedAnnotation && selectedAnnotations.hasNext()){\n\t\t\t\t\t\tvar current = selectedAnnotations.next();\n\t\t\t\t\t\tif (isAnnotationTypeVisible && !isAnnotationTypeVisible(current.type)) { continue; }\n\t\t\t\t\t\tif (current.start === selectionStart && current.end === selectionEnd){\n\t\t\t\t\t\t\tselectedAnnotation = current;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar iter = annotationModel.getAnnotations(searchStart, rangeEnd);\n\t\t\tvar useNextValid;\n\t\t\twhile (iter.hasNext()){\n\t\t\t\tcurrent = iter.next();\n\t\t\t\tif (isAnnotationTypeVisible && !isAnnotationTypeVisible(current.type)) { continue; }\n\t\t\t\t// Default to first visible annotation\n\t\t\t\tif (!annotation){\n\t\t\t\t\tannotation = current;\n\t\t\t\t}\n\t\t\t\t// If no selected annotation, use the first in the list\n\t\t\t\tif (!selectedAnnotation){\n\t\t\t\t\tannotation = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// If the selected annotation was found, use the next annotation\n\t\t\t\t// NOTE: If two annotations have the same range, we skip to the next annotation so don't flip between them\n\t\t\t\tif (useNextValid && (selectedAnnotation.start !== current.start || selectedAnnotation.end !== current.end)){\n\t\t\t\t\tuseNextValid = false;\n\t\t\t\t\tannotation = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Found the selected annotation, use the next in the list\n\t\t\t\tif (selectedAnnotation && selectedAnnotation === current){\n\t\t\t\t\tuseNextValid = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useNextValid){\n\t\t\t\tannotation = null; // Last annotation on the line was selected, go to line start\n\t\t\t}\n\t\t\t\n\t\t\treturn annotation;\n\t\t},\n\t\t\n\t\t_getAnnotationsAtLineIndex: function _getAnnotationsAtLineIndex(lineIndex){\n\t\t\tif (lineIndex === undefined) { return; }\n\t\t\tvar view = this._view;\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar annotations = [];\n\t\t\tvar model;\n\t\t\t\n\t\t\t//check if the current view exists, if not return empty array\n\t\t\tif (view) {\n\t\t\t\tmodel = view.getModel();\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\t\n\t\t\t// check if both model exists\n\t\t\tif (annotationModel && model) {\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tannotations = this.getAnnotationsByType(annotationModel, start, end);\n\t\t\t}\n\t\t\treturn annotations;\n\t\t},\n\t\t/** @ignore */\n\t\t_getTooltipInfo: function(contents, y, context) {\n\t\t\tif (!contents) { return null; } // TODO: shouldn't this check the length, it'll never be null\n\t\t\n\t\t\tvar hoverArea = Object.create(null);\n\t\t\thoverArea.top = this._curElementBounds.top;\n\t\t\thoverArea.left = this._curElementBounds.left;\n\t\t\thoverArea.height = this._curElementBounds.height;\n\t\t\thoverArea.width = this._curElementBounds.width;\n\t\t\t\n\t\t\tif (typeof contents === 'string' && y) {\n\t\t\t\t// Hack for line numbers\n\t\t\t\thoverArea.top = y;\n\t\t\t\thoverArea.height = 1;\n\t\t\t}\n\t\t\t\n\t\t\tvar rulerLocation = this.getLocation();\n\t\t\tvar rulerStyle = this.getRulerStyle();\n\t\t\t// The tooltip is positioned opposite to where the ruler is\n\t\t\tvar position = rulerLocation === \"left\" ? \"right\" : \"left\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\n\t\t\tvar offsetX = 0;\n\t\t\tvar offsetY = 0;\n\t\t\tif (this._view){\n\t\t\t\tvar viewRect = this._view._clientDiv.getBoundingClientRect();\n\t\t\t\toffsetX = viewRect.left - (hoverArea.left + hoverArea.width);\n\t\t\t} else {\n\t\t\t\toffsetX = hoverArea.width;\n\t\t\t}\n\t\t\toffsetY = hoverArea.height;\n\t\t\tif (position === \"left\") {\n\t\t\t\toffsetX = -25;\n\t\t\t\t// Hack for when the hoverArea is a sliver of the ruler, ruler is 2px wider than annotations\n\t\t\t\tif (hoverArea.height === 1){\n\t\t\t\t\toffsetX += 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Adjust the tooltip for folding comments to exactly cover the unfolded text location\n\t\t\tif (rulerStyle.styleClass.indexOf(\"folding\") >= 0){ //$NON-NLS-0$\n\t\t\t\toffsetY -= 14;\n\t\t\t}\n\t\t\t\n\t\t\tvar info = {\n\t\t\t\tcontents: contents,\n\t\t\t\tposition: position,\n\t\t\t\ttooltipOffsetX: offsetX,\n\t\t\t\ttooltipOffsetY: offsetY,\n\t\t\t\tanchorArea: hoverArea,\n\t\t\t\tcontext: context\n\t\t\t};\n\t\t\treturn info;\n\t\t},\n\t\t/**\n\t\t * @name _getTooltipContents\n\t\t * @description Overridden by different rulers to provide customer tooltip content\n\t\t * @function\n\t\t * @private\n\t\t * @param lineIndex\n\t\t * @param annotations\n\t\t * @returns returns\n\t\t * @callback\n\t\t */\n\t\t_getTooltipContents: function _getTooltipContents(lineIndex, annotations){\n\t\t\treturn annotations;\n\t\t},\n\t\t\n\t\t_getOnClickTooltipInfo: function(annotation) {\n\t\t\tvar view = this._view;\n\t\t\tvar hoverArea = Object.create(null);\n\t\t\thoverArea.top = this._curElementBounds.top;\n\t\t\thoverArea.left = this._curElementBounds.left;\n\t\t\thoverArea.height = this._curElementBounds.height;\n\t\t\thoverArea.width = this._curElementBounds.width;\n\t\t\tvar rulerLocation = this.getLocation();\n\t\t\tvar position = rulerLocation === \"left\" ? \"right\" : \"left\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar info = {\n\t\t\t\tcontents: [annotation],\n\t\t\t\tposition: position,\n\t\t\t\tanchorArea: hoverArea\n\t\t\t};\n\t\t\t\n\t\t\tif (view){\n\t\t\t\tvar viewRect = view._clientDiv.getBoundingClientRect();\n\t\t\t\tinfo.offsetX = viewRect.left - (hoverArea.left + hoverArea.width);\n\t\t\t} else {\n\t\t\t\tinfo.offsetX = hoverArea.width;\n\t\t\t}\n\n\t\t\tinfo.offsetY = hoverArea.height;\n\t\t\tif (info.position === \"left\") {\n\t\t\t\tinfo.offsetX = 20;\n\t\t\t}\n\t\t\treturn info;\n\t\t},\n\t\t/** @ignore */\n\t\t_onAnnotationModelChanged: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tvar model = view.getModel(), self = this;\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tif (e.textModelChangedEvent) {\n\t\t\t\tvar start = e.textModelChangedEvent.start;\n\t\t\t\tif (model.getBaseModel) { start = model.mapOffset(start, true); }\n\t\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\t\tview.redrawLines(startLine, lineCount, self);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfunction redraw(changes) {\n\t\t\t\tfor (var i = 0; i < changes.length; i++) {\n\t\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\t\tstart = changes[i].start;\n\t\t\t\t\tvar end = changes[i].end;\n\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t\t}\n\t\t\t\t\tif (start !== -1 && end !== -1) {\n\t\t\t\t\t\tview.redrawLines(model.getLineAtOffset(start), model.getLineAtOffset(Math.max(start, end - 1)) + 1, self);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tredraw(e.added);\n\t\t\tredraw(e.removed);\n\t\t\tredraw(e.changed);\n\t\t},\n\t\t/** @ignore */\n\t\t_mergeAnnotation: function(result, annotation, annotationLineIndex, annotationLineCount) {\n\t\t\tif (!result) { result = {}; }\n\t\t\tif (annotationLineIndex === 0) {\n\t\t\t\tif (result.html && annotation.html) {\n\t\t\t\t\tif (annotation.html !== result.html) {\n\t\t\t\t\t\tif (!result._multiple && this._multiAnnotation) {\n\t\t\t\t\t\t\tresult.html = this._multiAnnotation.html;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t\tresult._multiple = true;\n\t\t\t\t} else {\n\t\t\t\t\tresult.html = annotation.html;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.style = this._mergeStyle(result.style, annotation.style);\n\t\t\treturn result;\n\t\t},\n\t\t/** @ignore */\n\t\t_mergeStyle: function(result, style) {\n\t\t\tif (style) {\n\t\t\t\tif (!result) { result = {}; }\n\t\t\t\tif (result.styleClass && style.styleClass && result.styleClass !== style.styleClass) {\n\t\t\t\t\tresult.styleClass += \" \" + style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tresult.styleClass = style.styleClass;\n\t\t\t\t}\n\t\t\t\tvar prop;\n\t\t\t\tif (style.style) {\n\t\t\t\t\tif (!result.style) { result.style  = {}; }\n\t\t\t\t\tfor (prop in style.style) {\n\t\t\t\t\t\tif (result.style[prop] === undefined) {\n\t\t\t\t\t\t\tresult.style[prop] = style.style[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.attributes) {\n\t\t\t\t\tif (!result.attributes) { result.attributes  = {}; }\n\t\t\t\t\tfor (prop in style.attributes) {\n\t\t\t\t\t\tif (result.attributes[prop] === undefined) {\n\t\t\t\t\t\t\tresult.attributes[prop] = style.attributes[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_setCurrentGroup: function(lineIndex) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar groupAnnotation = null;\n\t\t\tvar model = annotationModel.getTextModel();\n\t\t\tvar annotation;\n\t\t\tvar annotations;\n\t\t\tvar currentGroupAnnotation = this._currentGroupAnnotation;\n\t\t\tif (lineIndex !== -1) {\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tannotations = annotationModel.getAnnotations(start, end);\n\t\t\t\twhile(annotations.hasNext()){\n\t\t\t\t\tannotation = annotations.next();\n\t\t\t\t\tif (!this.isAnnotationTypeVisible(annotation.type)) { continue; }\n\t\t\t\t\tif (annotation.start <= start && annotation.end >= end){\n\t\t\t\t\t\tif (annotation.groupId !== undefined) {\n\t\t\t\t\t\t\tgroupAnnotation = annotation;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (currentGroupAnnotation && groupAnnotation) {\n\t\t\t\t\tif (currentGroupAnnotation.groupId === groupAnnotation.groupId) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._currentGroupAnnotation = null;\n\t\t\tif (currentGroupAnnotation) {\n\t\t\t\tannotationModel.removeAnnotations(currentGroupAnnotation.groupType);\n\t\t\t}\n\t\t\tif (!groupAnnotation) { return; }\n\t\t\t\n\t\t\tif (lineIndex === -1) { return; }\n\t\t\tthis._currentGroupAnnotation = groupAnnotation;\n\t\t\tannotations = annotationModel.getAnnotations();\n\t\t\tvar add = [];\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tannotation = annotations.next();\n\t\t\t\tdelete annotation.groupAnnotation;\n\t\t\t\tif (annotation.groupId === groupAnnotation.groupId) {\n\t\t\t\t\tannotation = annotation.createGroupAnnotation();\n\t\t\t\t\tadd.push(annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotationModel.replaceAnnotations(null, add);\n\t\t}\n\t});\n\tmAnnotations.AnnotationTypeList.addMixin(Ruler.prototype);\n\n\t/**\n\t * Constructs a new line numbering ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t * @param {orion.editor.Style} [oddStyle={style: {backgroundColor: \"white\"}] the style for lines with odd line index.\n\t * @param {orion.editor.Style} [evenStyle={backgroundColor: \"white\"}] the style for lines with even line index.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements a line numbering ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.Ruler}\n\t * </p>\n\t * @name orion.editor.LineNumberRuler\n\t */\n\tfunction LineNumberRuler (annotationModel, rulerLocation, rulerStyle, oddStyle, evenStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"page\", rulerStyle); //$NON-NLS-0$\n\t\tthis._oddStyle = oddStyle || {style: {backgroundColor: \"white\"}}; //$NON-NLS-0$\n\t\tthis._evenStyle = evenStyle || {style: {backgroundColor: \"white\"}}; //$NON-NLS-0$\n\t\tthis._numOfDigits = 0;\n\t\tthis._firstLine = 1;\n\t}\n\tLineNumberRuler.prototype = new Ruler(); \n\t/** @ignore */\n\tLineNumberRuler.prototype.getAnnotations = function(startLine, endLine) {\n\t\tvar result = Ruler.prototype.getAnnotations.call(this, startLine, endLine);\n\t\tvar model = this._view.getModel();\n\t\tfor (var lineIndex = startLine; lineIndex < endLine; lineIndex++) {\n\t\t\tvar style = (lineIndex - this._firstLine) & 1 ? this._oddStyle : this._evenStyle;\n\t\t\tvar mapLine = lineIndex;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tvar lineStart = model.getLineStart(mapLine);\n\t\t\t\tmapLine = model.getBaseModel().getLineAtOffset(model.mapOffset(lineStart));\n\t\t\t}\n\t\t\tif (!result[lineIndex]) { result[lineIndex] = {}; }\n\t\t\tresult[lineIndex].html = (this._firstLine + mapLine) + \"\";\n\t\t\tif (!result[lineIndex].style) { result[lineIndex].style = style; }\n\t\t}\n\t\treturn result;\n\t};\n\t/** @ignore */\n\tLineNumberRuler.prototype.getWidestAnnotation = function() {\n\t\tvar lineCount = this._view.getModel().getLineCount();\n\t\treturn this.getAnnotations(lineCount - 1, lineCount)[lineCount - 1];\n\t};\n\t/**\n\t * Sets the line index displayed for the first line. The default value is\n\t * <code>1</code>.\n\t *\n\t * @param {Number} [lineIndex=1] the first line index displayed\n\t */\n\tLineNumberRuler.prototype.setFirstLine = function(lineIndex) {\n\t\tthis._firstLine = lineIndex !== undefined ? lineIndex : 1;\n\t};\n\t/** @ignore */\n\tLineNumberRuler.prototype._onTextModelChanged = function(e) {\n\t\tvar start = e.start;\n\t\tvar model = this._view.getModel();\n\t\tvar lineCount = model.getBaseModel ? model.getBaseModel().getLineCount() : model.getLineCount();\n\t\tvar numOfDigits = ((this._firstLine + lineCount - 1)+\"\").length;\n\t\tif (this._numOfDigits !== numOfDigits) {\n\t\t\tthis._numOfDigits = numOfDigits;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tthis._view.redrawLines(startLine,  model.getLineCount(), this);\n\t\t}\n\t};\n\t\n\t/** \n\t * @class This is class represents an annotation for the AnnotationRuler. \n\t * <p> \n\t * <b>See:</b><br/> \n\t * {@link orion.editor.AnnotationRuler}\n\t * </p> \n\t * \n\t * @name orion.editor.Annotation \n\t * \n\t * @property {String} [html=\"\"] The html content for the annotation, typically contains an image.\n\t * @property {orion.editor.Style} [style] the style for the annotation.\n\t * @property {orion.editor.Style} [overviewStyle] the style for the annotation in the overview ruler.\n\t */ \n\t/**\n\t * Constructs a new annotation ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t * @param {orion.editor.Annotation} [defaultAnnotation] the default annotation.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an annotation ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.Ruler}<br/>\n\t * {@link orion.editor.Annotation}\n\t * </p>\n\t * @name orion.editor.AnnotationRuler\n\t */\n\tfunction AnnotationRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"page\", rulerStyle); //$NON-NLS-0$\n\t}\n\tAnnotationRuler.prototype = new Ruler();\n\t\n\t/**\n\t * Constructs a new overview ruler. \n\t * <p>\n\t * The overview ruler is used in conjunction with a AnnotationRuler, for each annotation in the \n\t * AnnotationRuler this ruler displays a mark in the overview. Clicking on the mark causes the \n\t * view to scroll to the annotated line.\n\t * </p>\n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tfunction OverviewRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"document\", rulerStyle); //$NON-NLS-0$\n\t}\n\tOverviewRuler.prototype = new Ruler();\n\t\n\t/** @ignore */\n\tOverviewRuler.prototype.getRulerStyle = function() {\n\t\tvar result = {style: {lineHeight: \"1px\", fontSize: \"1px\"}}; //$NON-NLS-1$ //$NON-NLS-0$\n\t\tresult = this._mergeStyle(result, this._rulerStyle);\n\t\treturn result;\n\t};\n\t/** @ignore */\n\tOverviewRuler.prototype._getTooltipContents = function(lineIndex, annotations) {\n\t\tif (annotations && annotations.length === 0) {\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar mapLine = lineIndex;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tvar lineStart = model.getLineStart(mapLine);\n\t\t\t\tmapLine = model.getBaseModel().getLineAtOffset(model.mapOffset(lineStart));\n\t\t\t}\n\t\t\treturn util.formatMessage(messages.line, mapLine + 1);\n\t\t}\n\t\treturn Ruler.prototype._getTooltipContents.call(this, lineIndex, annotations);\n\t};\n\t/** @ignore */\n\tOverviewRuler.prototype._mergeAnnotation = function(previousAnnotation, annotation, annotationLineIndex, annotationLineCount) {\n\t\tif (annotationLineIndex !== 0) { return undefined; }\n\t\tvar result = previousAnnotation;\n\t\tif (!result) {\n\t\t\t//TODO annotationLineCount does not work when there are folded lines\n\t\t\tvar height = 3 * annotationLineCount;\n\t\t\tresult = {html: \"&nbsp;\", style: { style: {height: height + \"px\"}}}; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\tresult.style = this._mergeStyle(result.style, annotation.overviewStyle);\n\t\t}\n\t\treturn result;\n\t};\n\n\t/**\n\t * Constructs a new folding ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tfunction FoldingRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tAnnotationRuler.call(this, annotationModel, rulerLocation, rulerStyle);\n\t}\n\tFoldingRuler.prototype = new AnnotationRuler();\n\t\n\t/** @ignore */\n\tFoldingRuler.prototype.onClick =  /* @callback */ function(lineIndex, e) {\n\t\tif (lineIndex === undefined) { return; }\n\t\tvar annotationModel = this._annotationModel;\n\t\tif (!annotationModel) { return; }\n\t\tvar view = this._view;\n\t\tvar model = view.getModel();\n\t\tvar start = model.getLineStart(lineIndex);\n\t\tvar end = model.getLineEnd(lineIndex, true);\n\t\tif (model.getBaseModel) {\n\t\t\tstart = model.mapOffset(start);\n\t\t\tend = model.mapOffset(end);\n\t\t\tmodel = model.getBaseModel();\n\t\t}\n\t\tvar annotation, iter = annotationModel.getAnnotations(start, end);\n\t\twhile (!annotation && iter.hasNext()) {\n\t\t\tvar a = iter.next();\n\t\t\tif (!this.isAnnotationTypeVisible(a.type)) { continue; }\n\t\t\tif (model.getLineAtOffset(a.start) !== model.getLineAtOffset(start)) { continue; }\n\t\t\tannotation = a;\n\t\t}\n\t\tif (annotation) {\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\tif (tooltip) {\n\t\t\t\ttooltip.hide();\n\t\t\t}\n\t\t\tif (annotation.expanded) {\n\t\t\t\tannotation.collapse();\n\t\t\t} else {\n\t\t\t\tannotation.expand();\n\t\t\t}\n\t\t}\n\t};\n\t/** @ignore */\n\tFoldingRuler.prototype._getTooltipContents = function(lineIndex, annotations) {\n\t\tif (annotations && annotations.length > 0) {\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\tvar mapLineIndex = model.getLineAtOffset(start);\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tvar a = annotations[i];\n\t\t\t\tif (!this.isAnnotationTypeVisible(a.type)) { continue; }\n\t\t\t\tif (model.getLineAtOffset(a.start) !== mapLineIndex) { continue; }\n\t\t\t\tif (annotations[i].expanded) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn AnnotationRuler.prototype._getTooltipContents.call(this, lineIndex, [a]);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\t/** @ignore */\n\tFoldingRuler.prototype._onAnnotationModelChanged = function(e) {\n\t\tif (e.textModelChangedEvent) {\n\t\t\tAnnotationRuler.prototype._onAnnotationModelChanged.call(this, e);\n\t\t\treturn;\n\t\t}\n\t\tvar view = this._view;\n\t\tif (!view) { return; }\n\t\tvar model = view.getModel(), self = this, i;\n\t\tvar lineCount = model.getLineCount(), lineIndex = lineCount;\n\t\tfunction redraw(changes) {\n\t\t\tfor (i = 0; i < changes.length; i++) {\n\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\tvar start = changes[i].start;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t}\n\t\t\t\tif (start !== -1) {\n\t\t\t\t\tlineIndex = Math.min(lineIndex, model.getLineAtOffset(start));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tredraw(e.added);\n\t\tredraw(e.removed);\n\t\tredraw(e.changed);\n\t\tvar rulers = view.getRulers();\n\t\tfor (i = 0; i < rulers.length; i++) {\n\t\t\tview.redrawLines(lineIndex, lineCount, rulers[i]);\n\t\t}\n\t};\n\t\n\n\t/**\n\t * Constructs a new zoom ruler. \n\t *\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tvar ZoomRuler = function(rulerLocation, rulerStyle) {\n\t\tBaseRuler.call(this, rulerLocation, \"fixed\", rulerStyle); //$NON-NLS-0$\n\t};\n\t\n\tZoomRuler.prototype = objects.mixin(new BaseRuler(), {\n\t\tsetView: function (view) {\n\t\t\tthis._destroy();\n\t\t\tBaseRuler.prototype.setView.call(this, view);\n\t\t\tthis._create();\n\t\t},\n\t\t_create: function() {\n\t\t\tvar textView = this.getView();\n\t\t\tif (!textView) return;\n\t\t\tfunction getOptions(options) {\n\t\t\t\tvar rulerTheme = \"textviewZoom\"; //$NON-NLS-0$\n\t\t\t\tvar theme = options.themeClass;\n\t\t\t\tif (theme) {\n\t\t\t\t\ttheme = theme.replace(rulerTheme, \"\");\n\t\t\t\t\tif (theme) { theme = \" \" + theme; } //$NON-NLS-0$\n\t\t\t\t\ttheme = rulerTheme + theme;\n\t\t\t\t} else {\n\t\t\t\t\ttheme = rulerTheme;\n\t\t\t\t}\n\t\t\t\toptions.themeClass = theme;\n\t\t\t\toptions.noScroll = true;\n\t\t\t\toptions.readonly = true;\n\t\t\t\treturn options;\n\t\t\t}\n\t\t\tvar options = getOptions(textView.getOptions());\n\t\t\toptions.parent = this.node;\n\t\t\tvar zoomView = this._zoomView = new mTextView.TextView(options);\n\t\t\tzoomView._clientDiv.contentEditable = false;\n\t\t\tzoomView.setModel(textView.getModel());\n\t\t\tvar document = textView.getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\n\t\t\tvar windowDiv = this._windowDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\twindowDiv.className =\"rulerZoomWindow\"; //$NON-NLS-0$\n\t\t\tthis.node.appendChild(windowDiv);\n\t\t\tvar border = parseInt(textUtil.getNodeStyle(windowDiv, \"border-top-width\", 0)) + //$NON-NLS-0$\n\t\t\t\t\tparseInt(textUtil.getNodeStyle(windowDiv, \"border-bottom-width\", 0)); //$NON-NLS-0$\n\t\t\tvar that = this;\n\t\t\tfunction updateWindow(scroll, p) {\n\t\t\t\tvar top = scroll.y * p.zoomFactor;\n\t\t\t\tvar height = p.clientHeight * p.zoomFactor;\n\t\t\t\tthat.top = top;\n\t\t\t\tthat.bottom = top + height;\n\t\t\t\ttop = zoomView.convert({y: top}, \"document\", \"page\").y; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\ttop = top - that.node.getBoundingClientRect().top;\n\t\t\t\twindowDiv.style.top = top + \"px\"; //$NON-NLS-0$\n\t\t\t\twindowDiv.style.height = (height - border) + \"px\"; //$NON-NLS-0$\n\t\t\t}\n\t\t\tfunction getProps() {\n\t\t\t\tvar padding = textView._metrics.viewPadding;\n\t\t\t\tvar zoomPadding = textView._metrics.viewPadding;\n\t\t\t\tvar lineHeight = textView.getLineHeight();\n\t\t\t\tvar zoomLineHeight = zoomView.getLineHeight();\n\t\t\t\tvar lineCount = textView.getModel().getLineCount();\n\t\t\t\tvar documentHeight = textView._lineHeight ? textView._scrollHeight : lineCount * lineHeight;\n\t\t\t\tvar zoomDocumentHeight = zoomView._lineHeight ? zoomView._scrollHeight : lineCount * zoomLineHeight;\n\t\t\t\tvar zoomFactor = zoomDocumentHeight / documentHeight;\n\t\t\t\tvar clientHeight = textView.getClientArea().height + padding.top + padding.bottom;\n\t\t\t\tvar zoomClientHeight = zoomView.getClientArea().height + zoomPadding.top + zoomPadding.bottom;\n\t\t\t\tvar windowHeight = clientHeight * zoomFactor;\n\t\t\t\tvar scrollWidth = textView._metrics.scrollWidth;\n\t\t\t\treturn {\n\t\t\t\t\tzoomFactor: zoomFactor,\n\t\t\t\t\tdocumentHeight: documentHeight,\n\t\t\t\t\tzoomDocumentHeight: zoomDocumentHeight,\n\t\t\t\t\tclientHeight: clientHeight,\n\t\t\t\t\tzoomClientHeight: zoomClientHeight,\n\t\t\t\t\tscrollWidth: scrollWidth,\n\t\t\t\t\twindowHeight: windowHeight,\n\t\t\t\t\tpadding: padding\n\t\t\t\t};\n\t\t\t}\n\t\t\tfunction toZoom(scroll, p) {\n\t\t\t\treturn scroll.y * (p.zoomFactor + (p.windowHeight - p.clientHeight - p.scrollWidth) / p.documentHeight);\n\t\t\t}\n\t\t\tfunction updateScroll(scroll) {\n\t\t\t\tscroll = scroll || {y: textView.getTopPixel()};\n\t\t\t\tvar p = getProps();\n\t\t\t\tvar y = toZoom(scroll, p);\n\t\t\t\tzoomView.setTopPixel(y);\n\t\t\t\tupdateWindow(scroll, p);\n\t\t\t}\n\t\t\tfunction updateWidth(options) {\n\t\t\t\tvar width;\n\t\t\t\tif (options.wrapMode && !options.wrapOffset && textView._metrics.charWidth) {\n\t\t\t\t\tvar div1 = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-0$\n\t\t\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-0$\n\t\t\t\t\tzoomView._clientDiv.appendChild(div1);\n\t\t\t\t\tdiv1.textContent = new Array(Math.ceil(textView.getClientArea().width / textView._metrics.charWidth) + 1).join(\"a\"); //$NON-NLS-0$\n\t\t\t\t\tvar rect1 = div1.getBoundingClientRect();\n\t\t\t\t\twidth = Math.min(150, Math.ceil(rect1.right - rect1.left)) + \"px\"; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\twidth = \"\";\n\t\t\t\t}\n\t\t\t\tvar oldWidth = that.node.style.width;\n\t\t\t\tthat.node.style.width = width;\n\t\t\t\treturn oldWidth !== width;\n\t\t\t}\n\t\t\ttextView.addEventListener(\"Scroll\", this._scrollListener = function(event) { //$NON-NLS-0$\n\t\t\t\tupdateScroll(event.newValue);\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Resize\", this._resizeListener = function() { //$NON-NLS-0$\n\t\t\t\tupdateWidth(zoomView.getOptions());\n\t\t\t\tupdateScroll();\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Redraw\", this._redrawListener = function(event) { //$NON-NLS-0$\n\t\t\t\tif (!event.ruler) {\n\t\t\t\t\tzoomView.redrawLines(event.startLine, event.endLine);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Options\", this._optionsListener = function(event) { //$NON-NLS-0$\n\t\t\t\tvar options = getOptions(event.options);\n\t\t\t\tzoomView.setOptions(options);\n\t\t\t\tupdateWidth(zoomView.getOptions());\n\t\t\t});\n\t\t\tzoomView.addEventListener(\"LineStyle\", this._lineListener = function(e) { //$NON-NLS-0$\n\t\t\t\ttextView.onLineStyle(e);\n\t\t\t});\n\t\t\tfunction down(event, clientY, touch) {\n\t\t\t\tif (touch || (that.top <= event.y && event.y <= that.bottom)) {\n\t\t\t\t\tthat.mouseDown = true;\n\t\t\t\t\tthat.delta = clientY - windowDiv.getBoundingClientRect().top + that.node.getBoundingClientRect().top;\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = zoomView.getOffsetAtLocation(event.x, event.y);\n\t\t\t\t\ttextView.setSelection(offset, offset, 0.5, function() {});\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction up() {\n\t\t\t\tthat.mouseDown = false;\n\t\t\t}\n\t\t\tfunction move(clientY) {\n\t\t\t\tif (that.mouseDown) {\n\t\t\t\t\tvar p = getProps();\n\t\t\t\t\tvar thumbPos = Math.min(p.zoomClientHeight - p.windowHeight, Math.max(0, clientY - that.delta));\n\t\t\t\t\ttextView.setTopPixel(thumbPos * (p.documentHeight - p.clientHeight) / Math.min(p.zoomDocumentHeight, p.zoomClientHeight - p.windowHeight));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction stop(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\twindowDiv.addEventListener(\"touchstart\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 1) {\n\t\t\t\t\t\tdown(event, event.touches[0].clientY, true);\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twindowDiv.addEventListener(\"touchend\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 0) {\n\t\t\t\t\t\tup(event);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twindowDiv.addEventListener(\"touchmove\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 1) {\n\t\t\t\t\t\tmove(event.touches[0].clientY);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"TouchStart\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tif (event.touchCount === 1) {\n\t\t\t\t\t\tdown(event, event.event.touches[0].clientY);\n\t\t\t\t\t\tstop(event);\n\t\t\t\t\t}\n\t\t\t\t});\n//\t\t\t\twindowDiv.style.pointerEvents = \"none\"; //$NON-NLS-0$\n//\t\t\t\tzoomView.addEventListener(\"TouchEnd\", function(event) { //$NON-NLS-0$\n//\t\t\t\t\tif (event.touchCount === 0) {\n//\t\t\t\t\t\tup(event);\n//\t\t\t\t\t}\n//\t\t\t\t});\n//\t\t\t\tzoomView.addEventListener(\"TouchMove\", function(event) { //$NON-NLS-0$\n//\t\t\t\t\tif (event.touchCount === 1) {\n//\t\t\t\t\t\tmove(event.event.touches[0].clientY);\n//\t\t\t\t\t}\n//\t\t\t\t});\n\t\t\t} else {\n\t\t\t\twindowDiv.style.pointerEvents = \"none\"; //$NON-NLS-0$\n\t\t\t\tzoomView.addEventListener(\"MouseDown\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar e = event.event;\n\t\t\t\t\tif (e.which ? e.button === 0 : e.button === 1) {\n\t\t\t\t\t\tdown(event, e.clientY);\n\t\t\t\t\t}\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"MouseUp\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tup(event);\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"MouseMove\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tmove(event.event.clientY);\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t}\n\t\t\t(document.defaultView || document.parentWindow).setTimeout(function() {\n\t\t\t\tupdateScroll();\n\t\t\t}, 0);\n\t\t},\n\t\t_destroy: function() {\n\t\t\tvar textView = this.getView();\n\t\t\tif (textView) {\n\t\t\t\ttextView.removeEventListener(\"Scroll\", this._scrollListener); //$NON-NLS-0$\n\t\t\t\tthis._scrollListener = null;\n\t\t\t\ttextView.removeEventListener(\"Resize\", this._resizeListener); //$NON-NLS-0$\n\t\t\t\tthis._resizeListener = null;\n\t\t\t\ttextView.removeEventListener(\"Redraw\", this._redrawListener); //$NON-NLS-0$\n\t\t\t\tthis._redrawListener = null;\n\t\t\t\ttextView.removeEventListener(\"Options\", this._optionsListener); //$NON-NLS-0$\n\t\t\t\tthis._optionsListener = null;\n\t\t\t}\n\t\t\tvar zoomView = this._zoomView;\n\t\t\tif (zoomView) {\n\t\t\t\tzoomView.removeEventListener(\"LineStyle\", this._lineListener); //$NON-NLS-0$\n\t\t\t\tzoomView.setModel(null);\n\t\t\t\tzoomView.destroy();\n\t\t\t\tthis._zoomView = null;\n\t\t\t}\n\t\t}\n\t});\n\t\n\treturn {\n\t\tBaseRuler: BaseRuler,\n\t\tRuler: Ruler,\n\t\tAnnotationRuler: AnnotationRuler,\n\t\tLineNumberRuler: LineNumberRuler,\n\t\tOverviewRuler: OverviewRuler,\n\t\tFoldingRuler: FoldingRuler,\n\t\tZoomRuler: ZoomRuler,\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textDND\", ['orion/util'], function(util) { //$NON-NLS-1$ //$NON-NLS-0$\n\n\tfunction TextDND(view, undoStack) {\n\t\tthis._view = view;\n\t\tthis._undoStack = undoStack;\n\t\tthis._dragSelection = null;\n\t\tthis._dropOffset = -1;\n\t\tthis._dropText = null;\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonDragStart: function (evt) {\n\t\t\t\tself._onDragStart(evt);\n\t\t\t},\n\t\t\tonDragEnd: function (evt) {\n\t\t\t\tself._onDragEnd(evt);\n\t\t\t},\n\t\t\tonDragEnter: function (evt) {\n\t\t\t\tself._onDragEnter(evt);\n\t\t\t},\n\t\t\tonDragOver: function (evt) {\n\t\t\t\tself._onDragOver(evt);\n\t\t\t},\n\t\t\tonDrop: function (evt) {\n\t\t\t\tself._onDrop(evt);\n\t\t\t},\n\t\t\tonDestroy: function (evt) {\n\t\t\t\tself._onDestroy(evt);\n\t\t\t}\n\t\t};\n\t\tview.addEventListener(\"DragStart\", this._listener.onDragStart); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragEnd\", this._listener.onDragEnd); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragEnter\", this._listener.onDragEnter); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragOver\", this._listener.onDragOver); //$NON-NLS-0$\n\t\tview.addEventListener(\"Drop\", this._listener.onDrop); //$NON-NLS-0$\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t}\n\tTextDND.prototype = {\n\t\tdestroy: function() {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tview.removeEventListener(\"DragStart\", this._listener.onDragStart); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragEnd\", this._listener.onDragEnd); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragEnter\", this._listener.onDragEnter); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragOver\", this._listener.onDragOver); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"Drop\", this._listener.onDrop); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\tthis._view = null;\n\t\t},\n\t\t_onDestroy: function(e) {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onDragStart: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tvar text = view.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\tthis._dragSelection = view.getSelections();\n\t\t\t\te.event.dataTransfer.effectAllowed = \"copyMove\"; //$NON-NLS-0$\n\t\t\t\te.event.dataTransfer.setData(\"Text\", text); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t_onDragEnd: function(e) {\n\t\t\tif (this._dragSelection) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar dropEffect = e.event.dataTransfer.dropEffect;\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\tif (dropEffect !== \"none\" || this._dropText) { //$NON-NLS-0$\n\t\t\t\t\t\tdropEffect = e.event.dataTransfer.dropEffect = this._dropEffect;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this._undoStack) { this._undoStack.startCompoundChange(); }\n\t\t\t\tvar move = dropEffect === \"move\"; //$NON-NLS-0$\n\t\t\t\tif (move) {\n\t\t\t\t\tview.setText({text: \"\", selection: this._dragSelection});\n\t\t\t\t}\n\t\t\t\tif (this._dropText) {\n\t\t\t\t\tvar text = this._dropText;\n\t\t\t\t\tvar offset = this._dropOffset;\n\t\t\t\t\tif (move) {\n\t\t\t\t\t\tthis._dragSelection.forEach(function(selection) {\n\t\t\t\t\t\t\tif (offset >= selection.end) {\n\t\t\t\t\t\t\t\toffset -= selection.end - selection.start;\n\t\t\t\t\t\t\t} else if (offset >= selection.start) {\n\t\t\t\t\t\t\t\toffset = selection.start;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tview.setText(text, offset, offset);\n\t\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t\t\tthis._dropText = null;\n\t\t\t\t\tthis._dropOffset = -1;\n\t\t\t\t}\n\t\t\t\tif (this._undoStack) { this._undoStack.endCompoundChange(); }\n\t\t\t\tthis._dragSelection = null;\n\t\t\t}\n\t\t},\n\t\t_onDragEnter: function(e) {\n\t\t\tthis._onDragOver(e);\n\t\t},\n\t\t_onDragOver: function(e) {\n\t\t\tvar types = e.event.dataTransfer.types;\n\t\t\tvar allowed = !this._view.getOptions(\"readonly\"); //$NON-NLS-0$\n\t\t\tif (allowed) {\n\t\t\t\tif (types) {\n\t\t\t\t\tallowed = types.contains ? \n\t\t\t\t\t\ttypes.contains(\"text/plain\") || types.contains(\"Text\") : //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t\ttypes.indexOf(\"text/plain\") !== -1 || types.indexOf(\"Text\") !== -1; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (!allowed) {\n\t\t\t\te.event.dataTransfer.dropEffect = \"none\"; //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\tvar copy = util.isMac ? e.event.altKey : e.event.ctrlKey;\n\t\t\t\t\tthis._dropEffect = e.event.dataTransfer.dropEffect = copy ? \"copy\" : \"move\"; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_onDrop: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tvar text = e.event.dataTransfer.getData(\"Text\"); //$NON-NLS-0$\n\t\t\tif (text) {\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\te.event.dataTransfer.dropEffect = this._dropEffect; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t\tvar offset = view.getOffsetAtLocation(e.x, e.y);\n\t\t\t\tif (this._dragSelection) {\n\t\t\t\t\tthis._dropOffset = offset;\n\t\t\t\t\tthis._dropText = text;\n\t\t\t\t} else {\n\t\t\t\t\tview.setText(text, offset, offset);\n\t\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn {TextDND: TextDND};\n});\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013, 2016 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/linkedMode\", [\r\n\t'i18n!orion/editor/nls/messages',\r\n\t'orion/keyBinding',\r\n\t'orion/editor/keyModes',\r\n\t'orion/editor/annotations',\r\n\t'orion/objects',\r\n\t'orion/util'\r\n], function(messages, mKeyBinding, mKeyModes, mAnnotations, objects) {\r\n\r\n\tvar exports = {};\r\n\r\n\t/**\r\n\t * @name LinkedContentAssist\r\n\t * @description Creates a new LinkedContentAssist object which is used for linked data in templates\r\n\t * @constructor \r\n\t * @param {Object} linkedData The linked data\r\n\t * @returns A new LinkedContentAssist object\r\n\t * @since 9.0\r\n\t */\r\n\tfunction LinkedContentAssist(linkedData) {\r\n\t\tthis._data = linkedData;\r\n\t}\r\n\t\r\n\tLinkedContentAssist.prototype = {\r\n\t\t/**\n\t\t * @description Removes the prefix from the given string\n\t\t * @function\n\t\t * @param {String} prefix\n\t\t * @param {String} string\n\t\t * @returns {String} The substring after removing the prefix\n\t\t */\n\t\tchop: function(prefix, string) {\r\n\t\t\treturn string.substring(prefix.length);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @callback\r\n\t\t */\r\n\t\tcomputeProposals: function(buffer, offset, context) {\r\n\t\t\tvar prefix = context.prefix;\r\n\t\t\tvar proposals = [];\r\n\t\t\tvar linkedstyle = this._data.style ? this._data.style : null;\r\n\t\t\tlinkedstyle = linkedstyle ? linkedstyle : 'emphasis'; //$NON-NLS-1$\r\n\t\t\tvar values = this._data.values;\r\n\t\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\t\tvar val = values[i];\r\n\t\t\t\tif(typeof val === 'string' && val.indexOf(prefix) === 0) {\r\n\t\t\t\t\tproposals.push({proposal: this.chop(prefix, val), \r\n\t\t\t\t\t\tdescription: val,\r\n\t\t\t\t\t\thover: val,\r\n\t\t\t\t\t\tstyle: linkedstyle\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if(typeof val === 'object' && val.proposal) {\r\n\t\t\t\t\tproposals.push({proposal: this.chop(prefix, val.proposal), \r\n\t\t\t\t\t\tdescription: val.description ? val.description : val.proposal,\r\n\t\t\t\t\t\thover: val.hover ? val.hover : val.proposal,\r\n\t\t\t\t\t\tstyle: linkedstyle\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar linkedtitle = this._data.title ? this._data.title : null;\r\n\t\t\tif (0 < proposals.length) {\r\n\t\t\t\tproposals.splice(0, 0,{\r\n\t\t\t\t\tproposal: '',\r\n\t\t\t\t\tdescription: linkedtitle ? linkedtitle : 'Options', //$NON-NLS-0$\r\n\t\t\t\t\tstyle: 'noemphasis_title', //$NON-NLS-0$\r\n\t\t\t\t\tunselectable: true\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\treturn proposals;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\n\t * @name LinkedMode\n\t * @description Create a new LinkedMode\n\t * @param {Editor} editor The backing editor\n\t * @param {UndoStack} undoStack The undo stack\n\t * @param contentAssist\n\t * @returns returns\n\t */\n\tfunction LinkedMode(editor, undoStack, contentAssist) {\r\n\t\tvar textView = editor.getTextView();\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\t\r\n\t\tthis.linkedModeModel = null;\r\n\t\t\r\n\t\ttextView.setAction(\"linkedModeEnter\", function() { //$NON-NLS-0$\r\n\t\t\tthis.exitLinkedMode(true);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModeCancel\", function() { //$NON-NLS-0$\r\n\t\t\tthis.exitLinkedMode(true);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModeNextGroup\", function() { //$NON-NLS-0$\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup((model.selectedGroupIndex + 1) % model.groups.length);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModePreviousGroup\", function() { //$NON-NLS-0$\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup(model.selectedGroupIndex > 0 ? model.selectedGroupIndex-1 : model.groups.length-1);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\t/**\r\n\t\t * Listener called when Linked Mode is active. Updates position's offsets and length\r\n\t\t * on user change. Also escapes the Linked Mode if the text buffer was modified outside of the Linked Mode positions.\r\n\t\t */\r\n\t\tthis.linkedModeListener = {\r\n\t\t\r\n\t\t\tonActivating: /* @callback */ function(evnt) {\r\n\t\t\t\tif (this._groupContentAssistProvider) {\r\n\t\t\t\t\tthis.contentAssist.setProviders([this._groupContentAssistProvider]);\r\n\t\t\t\t\tthis.contentAssist.setProgress(null);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this),\r\n\t\t\t\r\n\t\t\tonModelChanged: function(evnt) {\r\n\t\t\t\tif (this.ignoreVerify) { return; }\r\n\r\n\t\t\t\t// Get the position being modified\r\n\t\t\t\tvar start = this.editor.mapOffset(evnt.start);\r\n\t\t\t\tvar model = this.linkedModeModel, positionChanged, changed;\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tpositionChanged = this._getPositionChanged(model, start, start + evnt.removedCharCount);\r\n\t\t\t\t\tchanged = positionChanged.position;\r\n\t\t\t\t\tif (changed === undefined || changed.model !== model) {\r\n\t\t\t\t\t\t// The change has been done outside of the positions, exit the Linked Mode\r\n\t\t\t\t\t\tthis.exitLinkedMode(false);\r\n\t\t\t\t\t\tmodel = this.linkedModeModel;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!model) { return; }\r\n\r\n\t\t\t\t// Update position offsets for this change. Group changes are done in #onVerify\r\n\t\t\t\tvar deltaCount = 0;\r\n\t\t\t\tvar changeCount = evnt.addedCharCount - evnt.removedCharCount;\r\n\t\t\t\tvar sortedPositions = positionChanged.positions, position, pos;\r\n\t\t\t\tfor (var i = 0; i < sortedPositions.length; ++i) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tposition = pos.position;\r\n\t\t\t\t\tvar inside = position.offset <= start && start <= position.offset + position.length;\r\n\t\t\t\t\tif (inside && !pos.ansestor) {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\tdeltaCount += changeCount;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tif (pos.ansestor && inside) {\r\n\t\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pos.escape) {\r\n\t\t\t\t\t\tpos.model.escapePosition = position.offset;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._updateAnnotations(sortedPositions);\r\n\t\t\t}.bind(this),\r\n\r\n\t\t\tonVerify: function(evnt) {\r\n\t\t\t\tif (this.ignoreVerify) { return; }\r\n\r\n\t\t\t\t// Get the position being modified\r\n\t\t\t\tvar start = this.editor.mapOffset(evnt.start);\r\n\t\t\t\tvar end = this.editor.mapOffset(evnt.end);\r\n\t\t\t\tvar model = this.linkedModeModel, positionChanged, changed;\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tpositionChanged = this._getPositionChanged(model, start, end);\r\n\t\t\t\t\tchanged = positionChanged.position;\r\n\t\t\t\t\tif (changed === undefined || changed.model !== model) {\r\n\t\t\t\t\t\t// The change has been done outside of the positions, exit the Linked Mode\r\n\t\t\t\t\t\tthis.exitLinkedMode(false);\r\n\t\t\t\t\t\tmodel = this.linkedModeModel;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!model) { return; }\r\n\t\t\t\t\r\n\t\t\t\t// Make sure changes in a same group are compound\r\n\t\t\t\tvar undo = this._compoundChange;\r\n\t\t\t\tif (undo) {\r\n\t\t\t\t\tif (!(undo.owner.model === model && undo.owner.group === changed.group)) {\r\n\t\t\t\t\t\tthis.endUndo();\r\n\t\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmodel.selectedGroupIndex = changed.group;\r\n\t\t\t\t\r\n\t\t\t\t// Update position offsets taking into account all positions in the same changing group\r\n\t\t\t\tvar deltaCount = 0;\r\n\t\t\t\tvar changeCount = evnt.text.length - (end - start);\r\n\t\t\t\tvar sortedPositions = positionChanged.positions, position, pos;\r\n\t\t\t\tvar deltaStart = start - changed.position.offset, deltaEnd = end - changed.position.offset;\r\n\t\t\t\tfor (var i = 0; i < sortedPositions.length; ++i) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tposition = pos.position;\r\n\t\t\t\t\tpos.oldOffset = position.offset;\r\n\t\t\t\t\tif (pos.model === model && pos.group === changed.group) {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\tdeltaCount += changeCount;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tif (pos.ansestor) {\r\n\t\t\t\t\t\t\tposition.length += changed.count * changeCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pos.escape) {\r\n\t\t\t\t\t\tpos.model.escapePosition = position.offset;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Cancel this modification and apply same modification to all positions in changing group\r\n\t\t\t\tthis.ignoreVerify = true;\r\n\t\t\t\tfor (i = sortedPositions.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tif (pos.model === model && pos.group === changed.group) {\r\n\t\t\t\t\t\tthis.editor.setText(evnt.text, pos.oldOffset + deltaStart , pos.oldOffset + deltaEnd, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.ignoreVerify = false;\r\n\t\t\t\tevnt.text = null;\r\n\t\t\t\tthis._updateAnnotations(sortedPositions);\r\n\t\t\t}.bind(this)\r\n\t\t};\r\n\t}\r\n\tLinkedMode.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(LinkedMode.prototype, {\r\n\t\t/**\n\t\t * @description Create the keybindings\n\t\t * @function\n\t\t * @returns {Array.<Object>} The keybindings\n\t\t */\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"linkedModeEnter\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModeCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModeNextGroup\", keyBinding: new KeyBinding(9)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModePreviousGroup\", keyBinding: new KeyBinding(9, false, true)}); //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Starts Linked Mode, selects the first position and registers the listeners.\r\n\t\t * @param {Object} linkedModeModel An object describing the model to be used by linked mode.\r\n\t\t * Contains one or more position groups. If a position in a group is edited, the other positions in\r\n\t\t * the same group are edited the same way. The model structure is as follows:\r\n\t\t * <pre>{\r\n\t\t *\t\tgroups: [{\r\n\t\t *\t\t\tdata: {},\r\n\t\t *\t\t\tpositions: [{\r\n\t\t *\t\t\t\toffset: 10, // Relative to the text buffer\r\n\t\t *\t\t\t\tlength: 3\r\n\t\t *\t\t\t}]\r\n\t\t *\t\t}],\r\n\t\t *\t\tescapePosition: 19, // Relative to the text buffer\r\n\t\t * }</pre>\r\n\t\t *\r\n\t\t * Each group in the model has an optional <code>data</code> property which can be\r\n\t\t * used to provide additional content assist for the group.  The <code>type</code> in\r\n\t\t * data determines what kind of content assist is provided. These are the support\r\n\t\t * structures for the <code>data</code> property.\r\n\t\t * <pre>{\r\n\t\t *\t\ttype: \"link\"\r\n\t\t *\t\tvalues: [\"proposal0\", \"proposal1\", ...]\r\n\t\t * }</pre>\r\n\t\t *\r\n\t\t * The \"link\" data struture provides static content assist proposals stored in the\r\n\t\t * <code>values</code> property.\r\n\t\t *\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.Template}<br/>\r\n\t\t * {@link orion.editor.TemplateContentAssist}<br/>\r\n\t\t * </p>\r\n\t\t */\r\n\t\tenterLinkedMode: function(linkedModeModel) {\r\n\t\t\tif (!this.linkedModeModel) {\r\n\t\t\t\tvar textView = this.editor.getTextView();\r\n\t\t\t\ttextView.addKeyMode(this);\r\n\t\t\t\ttextView.addEventListener(\"Verify\", this.linkedModeListener.onVerify);\r\n\t\t\t\ttextView.addEventListener(\"ModelChanged\", this.linkedModeListener.onModelChanged);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tcontentAssist.addEventListener(\"Activating\", this.linkedModeListener.onActivating);\r\n\t\t\t\tthis.editor.reportStatus(messages.linkedModeEntered, null, true);\r\n\t\t\t}\r\n\t\t\tthis._sortedPositions = null;\r\n\t\t\tif (this.linkedModeModel) {\r\n\t\t\t\tlinkedModeModel.previousModel = this.linkedModeModel;\r\n\t\t\t\tlinkedModeModel.parentGroup = this.linkedModeModel.selectedGroupIndex;\r\n\t\t\t\tthis.linkedModeModel.nextModel = linkedModeModel;\r\n\t\t\t}\r\n\t\t\tthis.linkedModeModel = linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup(0);\r\n\t\t},\r\n\t\t/** \r\n\t\t * Exits Linked Mode. Optionally places the caret at linkedMode escapePosition. \r\n\t\t * @param {Boolean} [escapePosition=false] if true, place the caret at the  escape position.\r\n\t\t */\r\n\t\texitLinkedMode: function(escapePosition) {\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._compoundChange) {\r\n\t\t\t\tthis.endUndo();\r\n\t\t\t\tthis._compoundChange = null;\r\n\t\t\t}\r\n\t\t\tthis._sortedPositions = null;\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.linkedModeModel = model.previousModel;\r\n\t\t\tmodel.parentGroup = model.previousModel = undefined;\r\n\t\t\tif (this.linkedModeModel) {\r\n\t\t\t\tthis.linkedModeModel.nextModel = undefined;\r\n\t\t\t}\r\n\t\t\tif (!this.linkedModeModel) {\r\n\t\t\t\tvar editor = this.editor;\r\n\t\t\t\tvar textView = editor.getTextView();\r\n\t\t\t\ttextView.removeKeyMode(this);\r\n\t\t\t\ttextView.removeEventListener(\"Verify\", this.linkedModeListener.onVerify);\r\n\t\t\t\ttextView.removeEventListener(\"ModelChanged\", this.linkedModeListener.onModelChanged);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tcontentAssist.removeEventListener(\"Activating\", this.linkedModeListener.onActivating);\r\n\t\t\t\tcontentAssist.offset = undefined;\r\n\t\t\t\tthis.editor.reportStatus(messages.linkedModeExited, null, true);\r\n\t\t\t}\r\n\t\t\tif (escapePosition && typeof model.escapePosition === \"number\") {\r\n\t\t\t\teditor.setCaretOffset(model.escapePosition, false);\r\n\t\t\t}\r\n\t\t\tthis.selectLinkedGroup(0);\r\n\t\t},\r\n\t\t/**\n\t\t * @description Start undoing\n\t\t */\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tvar slf = this;\r\n\t\t\t\tvar model = this.linkedModeModel;\r\n\t\t\t\tthis._compoundChange = this.undoStack.startCompoundChange({\r\n\t\t\t\t\tmodel: model,\r\n\t\t\t\t\tgroup: model.selectedGroupIndex,\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @callback \n\t\t\t\t\t */\n\t\t\t\t\tend: function() {\r\n\t\t\t\t\t\tslf._compoundChange = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, \r\n\t\t/**\n\t\t * @description Ends the undo\n\t\t */\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns if linked mode is active in the current editor\n\t\t * @function\n\t\t * @returns {Boolean} If linked mode is active\n\t\t */\n\t\tisActive: function() {\r\n\t\t\treturn !!this.linkedModeModel;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @description Returns if linked mode status is active in the current editor\r\n\t\t * @function\r\n\t\t * @returns {Boolean} If linked mode status is active\r\n\t\t */\r\n\t\tisStatusActive: function() {\r\n\t\t\treturn !!this.linkedModeModel;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @description Selects the group of the given index from the currently active model\r\n\t\t * @param {Number} index The group index to select\r\n\t\t */\r\n\t\tselectLinkedGroup: function(index) {\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tif (model) {\r\n\t\t\t\tmodel.selectedGroupIndex = index;\r\n\t\t\t\tvar group = model.groups[index];\r\n\t\t\t\tvar position = group.positions[0];\r\n\t\t\t\tvar editor = this.editor;\r\n\t\t\t\teditor.setSelection(position.offset, position.offset + position.length);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tif (contentAssist) {\r\n\t\t\t\t\tcontentAssist.offset = undefined;\r\n\t\t\t\t\tif (group.data && group.data.type === \"link\" && group.data.values) {\r\n\t\t\t\t\t\tvar provider = this._groupContentAssistProvider = new LinkedContentAssist(group.data);\r\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @callback \n\t\t\t\t\t\t */\n\t\t\t\t\t\tprovider.getPrefix = function() {\r\n\t\t\t\t\t\t\tvar selection = editor.getSelection();\r\n\t\t\t\t\t\t\tif (selection.start === selection.end) {\r\n\t\t\t\t\t\t\t\tvar caretOffset = editor.getCaretOffset();\r\n\t\t\t\t\t\t\t\tif (position.offset <= caretOffset && caretOffset <= position.offset + position.length) {\r\n\t\t\t\t\t\t\t\t\treturn editor.getText(position.offset, caretOffset);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn \"\";\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcontentAssist.offset = position.offset;\r\n\t\t\t\t\t\tcontentAssist.deactivate();\r\n\t\t\t\t\t\tcontentAssist.activate();\r\n\t\t\t\t\t} else if (this._groupContentAssistProvider) {\r\n\t\t\t\t\t\tthis._groupContentAssistProvider = null;\r\n\t\t\t\t\t\tcontentAssist.deactivate();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._updateAnnotations();\r\n\t\t},\r\n\t\t/**\n\t\t * @description Collect all model positions into the <code>all</code> array\n\t\t * @function\n\t\t * @private\n\t\t * @param {Array.<Object>} all The collector for the position objects\n\t\t * @param {Object} model The linked model to collect all positions from\n\t\t * @param {Object} delta The change in position\n\t\t */\n\t\t_getModelPositions: function(all, model, delta) {\r\n\t\t\tvar groups = model.groups;\r\n\t\t\tfor (var i = 0; i < groups.length; i++) {\r\n\t\t\t\tvar positions = groups[i].positions;\r\n\t\t\t\tfor (var j = 0; j < positions.length; j++) {\r\n\t\t\t\t\tvar position = positions[j];\r\n\t\t\t\t\tif (delta) {\r\n\t\t\t\t\t\tposition = {offset: position.offset + delta, length: position.length};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar pos = {\r\n\t\t\t\t\t\tindex: j,\r\n\t\t\t\t\t\tgroup: i,\r\n\t\t\t\t\t\tcount: positions.length,\r\n\t\t\t\t\t\tmodel: model,\r\n\t\t\t\t\t\tposition: position\r\n\t\t\t\t\t};\r\n\t\t\t\t\tall.push(pos);\r\n\t\t\t\t\tif (model.nextModel && model.nextModel.parentGroup === i) {\r\n\t\t\t\t\t\tpos.ansestor = true;\r\n\t\t\t\t\t\tthis._getModelPositions(all, model.nextModel, (delta || 0) + positions[j].offset - positions[0].offset);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns an array of all of the positions sorted \n\t\t * @function\n\t\t * @private\n\t\t * @param {Object} model The linked model to get and sort positions from\n\t\t * @returns {Array.<Object>} The sorted array of positions from the given model\n\t\t */\n\t\t_getSortedPositions: function(model) {\r\n\t\t\tvar all = this._sortedPositions;\r\n\t\t\tif (!all) {\r\n\t\t\t\tall = [];\r\n\t\t\t\t// Get the root linked model\r\n\t\t\t\twhile (model.previousModel) {\r\n\t\t\t\t\tmodel = model.previousModel;\r\n\t\t\t\t}\r\n\t\t\t\t// Get all positions under model expanding group positions of stacked linked modes\r\n\t\t\t\tthis._getModelPositions(all, model);\r\n\t\t\t\t// Add escape position for all models\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tif (typeof model.escapePosition === \"number\") {\r\n\t\t\t\t\t\tall.push({\r\n\t\t\t\t\t\t\tescape: true,\r\n\t\t\t\t\t\t\tmodel: model,\r\n\t\t\t\t\t\t\tposition: {offset: model.escapePosition, length: 0}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmodel = model.nextModel;\r\n\t\t\t\t}\r\n\t\t\t\tall.sort(function(a, b) {\r\n\t\t\t\t\treturn a.position.offset - b.position.offset;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sortedPositions = all;\r\n\t\t\t}\r\n\t\t\treturn all;\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns if the given start - end position has changed in the given model\n\t\t * @function\n\t\t * @private\n\t\t * @param {Object} model The model to check\n\t\t * @param {Number} start The start\n\t\t * @param {Number} end The end\n\t\t * @returns {Object} The changed position\n\t\t */\n\t\t_getPositionChanged: function(model, start, end) {\r\n\t\t\tvar changed;\r\n\t\t\tvar sortedPositions = this._getSortedPositions(model);\r\n\t\t\tfor (var i = sortedPositions.length - 1; i >= 0; i--) {\r\n\t\t\t\tif (sortedPositions[i].escape) {\r\n\t\t\t\t\tcontinue;\n\t\t\t\t}\r\n\t\t\t\tvar position = sortedPositions[i].position;\r\n\t\t\t\tif (position.offset <= start && end <= position.offset + position.length) {\r\n\t\t\t\t\tchanged = sortedPositions[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {position: changed, positions: sortedPositions};\r\n\t\t},\r\n\t\t/**\n\t\t * @description Updates the editor annotations based on the given positions\n\t\t * @function\n\t\t * @private\n\t\t * @param {Array.<Object>} positions The positions\n\t\t */\n\t\t_updateAnnotations: function(positions) {\r\n\t\t\tvar annotationModel = this.editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) { return; }\r\n\t\t\tvar remove = [], add = [];\r\n\t\t\tvar annotations = annotationModel.getAnnotations(), annotation;\r\n\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\tannotation = annotations.next();\r\n\t\t\t\tswitch (annotation.type) {\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_LINKED_GROUP:\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP:\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP:\r\n\t\t\t\t\t\tremove.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tif (model) {\r\n\t\t\t\tpositions = positions || this._getSortedPositions(model);\r\n\t\t\t\tfor (var i = 0; i < positions.length; i++) {\r\n\t\t\t\t\tvar position = positions[i];\r\n\t\t\t\t\tif (position.model !== model) { continue; }\r\n\t\t\t\t\tif (position.escape) { continue; }\r\n\t\t\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_LINKED_GROUP;\r\n\t\t\t\t\tif (position.group === model.selectedGroupIndex) {\r\n\t\t\t\t\t\tif (position.index === 0) {\r\n\t\t\t\t\t\t\ttype = mAnnotations.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttype = mAnnotations.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tposition = position.position;\r\n\t\t\t\t\tannotation = mAnnotations.AnnotationType.createAnnotation(type, position.offset, position.offset + position.length, \"\");\r\n\t\t\t\t\tadd.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t}\r\n\t});\r\n\texports.LinkedMode = LinkedMode;\r\n\r\n\treturn exports;\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/factories\", [ //$NON-NLS-0$\r\n\t'orion/editor/actions', //$NON-NLS-0$\r\n\t'orion/editor/undoStack', //$NON-NLS-0$\r\n\t'orion/editor/rulers', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/editor/textDND', //$NON-NLS-0$\r\n\t'orion/editor/linkedMode', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(mActions, mUndoStack, mRulers, mAnnotations, mTextDND, mLinkedMode, util) {\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction KeyBindingsFactory() {\r\n\t}\r\n\tKeyBindingsFactory.prototype = {\r\n\t\tcreateKeyBindings: function(editor, undoStack, contentAssist, searcher) {\r\n\t\t\t// Create keybindings for generic editing, no dependency on the service model\r\n\t\t\tvar textActions = new mActions.TextActions(editor, undoStack , searcher);\r\n\t\t\t// Linked Mode\r\n\t\t\tvar linkedMode = new mLinkedMode.LinkedMode(editor, undoStack, contentAssist);\r\n\t\t\t// create keybindings for source editing\r\n\t\t\t// TODO this should probably be something that happens more dynamically, when the editor changes input\r\n\t\t\tvar sourceCodeActions = new mActions.SourceCodeActions(editor, undoStack, contentAssist, linkedMode);\r\n\t\t\treturn {\r\n\t\t\t\ttextActions: textActions,\r\n\t\t\t\tlinkedMode: linkedMode,\r\n\t\t\t\tsourceCodeActions: sourceCodeActions\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\texports.KeyBindingsFactory = KeyBindingsFactory;\r\n\t\r\n\tfunction UndoFactory() {\r\n\t}\r\n\tUndoFactory.prototype = {\r\n\t\tcreateUndoStack: function(editor) {\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\treturn new mUndoStack.UndoStack(textView, 200);\r\n\t\t}\r\n\t};\r\n\texports.UndoFactory = UndoFactory;\r\n\r\n\tfunction LineNumberRulerFactory() {\r\n\t}\r\n\tLineNumberRulerFactory.prototype = {\r\n\t\tcreateLineNumberRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.LineNumberRuler(annotationModel, \"left\", {styleClass: \"ruler lines\"}, {styleClass: \"rulerLines odd\"}, {styleClass: \"rulerLines even\"}); //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.LineNumberRulerFactory = LineNumberRulerFactory;\r\n\t\r\n\tfunction FoldingRulerFactory() {\r\n\t}\r\n\tFoldingRulerFactory.prototype = {\r\n\t\tcreateFoldingRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.FoldingRuler(annotationModel, \"left\", {styleClass: \"ruler folding\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.FoldingRulerFactory = FoldingRulerFactory;\r\n\t\r\n\tfunction ZoomRulerFactory() {\r\n\t}\r\n\tZoomRulerFactory.prototype = {\r\n\t\tcreateZoomRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.ZoomRuler(util.isIOS || util.isAndroid ? \"right\" : \"innerRight\", {styleClass: \"ruler zoom\"}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.ZoomRulerFactory = ZoomRulerFactory;\r\n\t\r\n\tfunction AnnotationFactory() {\r\n\t}\r\n\tAnnotationFactory.prototype = {\r\n\t\tcreateAnnotationModel: function(model) {\r\n\t\t\treturn new mAnnotations.AnnotationModel(model);\r\n\t\t},\r\n\t\tcreateAnnotationStyler: function(annotationModel, view) {\r\n\t\t\treturn new mAnnotations.AnnotationStyler(annotationModel, view);\r\n\t\t},\r\n\t\tcreateAnnotationRulers: function(annotationModel) {\r\n\t\t\tvar annotationRuler = new mRulers.AnnotationRuler(annotationModel, \"left\", {styleClass: \"ruler annotations\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar overviewRuler = new mRulers.OverviewRuler(annotationModel, \"right\", {styleClass: \"ruler overview\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn {annotationRuler: annotationRuler, overviewRuler: overviewRuler};\r\n\t\t}\r\n\t};\r\n\texports.AnnotationFactory = AnnotationFactory;\r\n\t\r\n\tfunction TextDNDFactory() {\r\n\t}\r\n\tTextDNDFactory.prototype = {\r\n\t\tcreateTextDND: function(editor, undoStack) {\r\n\t\t\treturn new mTextDND.TextDND(editor.getTextView(), undoStack);\r\n\t\t}\r\n\t};\r\n\texports.TextDNDFactory = TextDNDFactory;\r\n\t\r\n\treturn exports;\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/editorFeatures\", [ //$NON-NLS-0$\n\t'orion/editor/factories', //$NON-NLS-0$\n\t'orion/editor/actions', //$NON-NLS-0$\n\t'orion/editor/linkedMode', //$NON-NLS-0$\n\t'orion/objects' //$NON-NLS-0$\n], function(mFactories, mActions, mLinkedMode, objects) {\n\treturn objects.mixin({}, mFactories, mActions, mLinkedMode);\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2011, 2014 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/contentAssist\", [ //$NON-NLS-0$\r\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\r\n\t'orion/keyBinding', //$NON-NLS-0$\r\n\t'orion/editor/keyModes', //$NON-NLS-0$\r\n\t'orion/editor/eventTarget', //$NON-NLS-0$\r\n\t'orion/Deferred', //$NON-NLS-0$\r\n\t'orion/objects', //$NON-NLS-0$\r\n\t'orion/editor/tooltip', //$NON-NLS-0$\r\n\t'orion/editor/util', //$NON-NLS-0$\r\n\t'orion/util', //$NON-NLS-0$\r\n\t'orion/webui/littlelib', //$NON-NLS-0$\r\n\t'orion/metrics' //$NON-NLS-0$\r\n], function(messages, mKeyBinding, mKeyModes, mEventTarget, Deferred, objects, mTooltip, textUtil, util, lib, mMetrics) {\r\n\t/**\r\n\t * @name orion.editor.ContentAssistProvider\r\n\t * @class Interface defining a provider of content assist proposals.\r\n\t */\r\n\t/**\r\n\t * @memberOf orion.editor.ContentAssistProvider.prototype\r\n\t * @function\r\n\t * @name computeProposals\r\n\t * @param {String} buffer The buffer being edited.\r\n\t * @param {Number} offset The position in the buffer at which content assist is being requested.\r\n\t * @param {orion.editor.ContentAssistProvider.Context} context\r\n\t * @returns {Object[]} This provider's proposals for the given buffer and offset.\r\n\t */\r\n\t/**\r\n\t * @name orion.editor.ContentAssistProvider.Context\r\n\t * @class\r\n\t * @property {String} line The text of the line on which content assist is being requested.\r\n\t * @property {String} prefix Any non-whitespace, non-symbol characters preceding the offset.\r\n\t * @property {orion.editor.Selection} selection The current selection.\r\n\t */\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssist\r\n\t * @class Provides content assist for a TextView.\r\n\t * @description Creates a <code>ContentAssist</code> for a TextView. A ContentAssist consults a set of \r\n\t * {@link orion.editor.ContentAssistProvider}s to obtain proposals for text that may be inserted into a\r\n\t * TextView at a given offset.<p>\r\n\t * A ContentAssist is generally activated by its TextView action, at which point it computes the set of \r\n\t * proposals available. It will re-compute the proposals in response to subsequent changes on the TextView \r\n\t * (for example, user typing) for as long as the ContentAssist is active. A proposal may be applied by calling \r\n\t * {@link #apply}, after which the ContentAssist becomes deactivated. An active ContentAssist may be deactivated\r\n\t * by calling {@link #deactivate}.<p>\r\n\t * A ContentAssist dispatches events when it becomes activated or deactivated, and when proposals have been computed.\r\n\t * @param {orion.editor.TextView} textView The TextView to provide content assist for.\r\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\r\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\r\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist is about to be activated.\r\n\t * @name orion.editor.ContentAssist#ActivatingEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist is about to be deactivated.\r\n\t * @name orion.editor.ContentAssist#DeactivatingEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist has applied a proposal. <p>This event's <code>data</code> field gives information\r\n\t * about the proposal that was applied.\r\n\t * @name orion.editor.ContentAssist#ProposalAppliedEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched whenever a ContentAssist has obtained proposals from its providers. <p>This event's\r\n\t * <code>data</code> field gives information about the proposals.\r\n\t * @name orion.editor.ContentAssist#ProposalsComputedEvent\r\n\t * @event\r\n\t */\r\n\t\t\r\n\t// INACTIVE --Ctrl+Space--> ACTIVE --ModelChanging--> FILTERING\r\n\tvar State = {\r\n\t\tINACTIVE: 1,\r\n\t\tACTIVE: 2,\r\n\t\tFILTERING: 3\r\n\t};\r\n\t\r\n\tvar STYLES = {\r\n\t\tselected : \"selected\", //$NON-NLS-0$\r\n\t\thr : \"proposal-hr\", //$NON-NLS-0$\r\n\t\temphasis : \"proposal-emphasis\", //$NON-NLS-0$\r\n\t\tnoemphasis : \"proposal-noemphasis\", //$NON-NLS-0$\r\n\t\tnoemphasis_keyword : \"proposal-noemphasis-keyword\", //$NON-NLS-0$\r\n\t\tnoemphasis_title : \"proposal-noemphasis-title\", //$NON-NLS-0$\r\n\t\tnoemphasis_title_keywords : \"proposal-noemphasis-title-keywords\", //$NON-NLS-0$\r\n\t\tdfault : \"proposal-default\" //$NON-NLS-0$\r\n\t};\r\n\t\r\n\t/**\n\t * @name ContentAssist\n\t * @description Creates a new content assist manager for the given text view\n\t * @param textView The text view to provide content assist for\n\t * @param serviceRegistry Optional, used to look up page message service for status\n\t */\n\tfunction ContentAssist(textView, serviceRegistry) {\r\n\t\tthis.textView = textView;\r\n\t\tif (serviceRegistry){\r\n\t\t\tthis.pageMessage = serviceRegistry.getService(\"orion.page.message\"); //$NON-NLS-1$\r\n\t\t}\r\n\t\tthis.state = State.INACTIVE;\r\n\t\tthis.clearProviders();\r\n\t\tvar self = this;\r\n\t\tthis._textViewListeners = {\r\n\t\t\tonModelChanging: (function(event) {\r\n\t\t\t\tthis._latestModelChangingEvent = event;\r\n\t\t\t\tif (event) {\r\n\t\t\t\t\tthis._updateFilterText(event);\t\r\n\t\t\t\t}\r\n\t\t\t}).bind(this),\r\n\t\t\tonSelection: (function(event) {\r\n\t\t\t\tif (this.isDeactivatingChange(this._latestModelChangingEvent, event)) {\r\n\t\t\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.isActive()) {\r\n\t\t\t\t\t\tif (this.state === State.ACTIVE) {\r\n\t\t\t\t\t\t\tthis.setState(State.FILTERING);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.filterProposals();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._latestModelChangingEvent = null;\r\n\t\t\t}).bind(this),\r\n\t\t\tonScroll: (function(event) {\r\n\t\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\t}).bind(this)\r\n\t\t};\r\n\t\t\r\n\t\ttextView.setKeyBinding(util.isMac ? new mKeyBinding.KeyBinding(' ', false, false, false, true) : new mKeyBinding.KeyBinding(' ', true), \"contentAssist\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\ttextView.setKeyBinding(util.isMac ? new mKeyBinding.KeyBinding(' ', false, false, true, true) : new mKeyBinding.KeyBinding(' ', true, false, true), \"contentAssist\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\ttextView.setAction(\"contentAssist\", function() { //$NON-NLS-0$\r\n\t\t\tif (!textView.getOptions(\"readonly\")) { //$NON-NLS-0$\r\n\t\t\t\tself.activate();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}, {name: messages.contentAssist});\r\n\t}\r\n\tContentAssist.prototype = /** @lends orion.editor.ContentAssist.prototype */ {\r\n\t\t/**\r\n\t\t * Applies the given proposal to the TextView.\r\n\t\t * @param {Object} [proposal]\r\n\t\t * @returns {Boolean} <code>true</code> if the proposal was applied; <code>false</code> if no proposal was provided.\r\n\t\t */\r\n\t\tapply: function(proposal) {\r\n\t\t\tif (!proposal) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\t// now handle prefixes\r\n\t\t\t// if there is a non-empty selection, then replace it,\r\n\t\t\t// if overwrite is truthy, then also replace the prefix\r\n\t\t\tvar view = this.textView;\r\n\t\t\tvar sel = view.getSelection();\r\n\t\t\tvar start = this._initialCaretOffset;\r\n\t\t\tvar mapStart = start;\r\n\t\t\tvar end = Math.max(sel.start, sel.end), mapEnd = end;\r\n\t\t\tvar model = view.getModel();\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tmapStart = model.mapOffset(mapStart);\r\n\t\t\t\tmapEnd = model.mapOffset(mapEnd);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (proposal.overwrite) {\r\n\t\t\t    if(typeof proposal.prefix === 'string') {\r\n\t\t\t        start = mapStart-proposal.prefix.length;\r\n\t\t\t    } else {\r\n\t\t\t\t    start = this.getPrefixStart(model, mapStart);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tproposal: proposal,\r\n\t\t\t\tstart: mapStart,\r\n\t\t\t\tend: mapEnd\r\n\t\t\t};\r\n\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\tvar proposalText = typeof proposal === \"string\" ? proposal : proposal.proposal; //$NON-NLS-0$\r\n\t\t\tview.setText(proposalText, start, end);\r\n\t\t\tif (proposal.additionalEdits) {\r\n\t\t\t\tvar edit;\r\n\t\t\t\tfor (var i = 0; i < proposal.additionalEdits.length; i++) {\r\n\t\t\t\t\tedit = proposal.additionalEdits[i];\r\n\t\t\t\t\tview.setText(edit.text, edit.offset, edit.offset + edit.length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dispatchEvent({type: \"ProposalApplied\", data: data}); //$NON-NLS-0$\r\n\t\t\tmMetrics.logEvent(\"contentAssist\", \"apply\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tactivate: function(providers, autoTriggered) {\r\n\t\t\tif (this.state === State.INACTIVE) {\r\n\t\t\t\tmMetrics.logEvent(\"contentAssist\", \"activate\", undefined, autoTriggered ? 0 : 1); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tthis._autoTriggered = autoTriggered ? true : false;\r\n\t\t\t\tthis.setState(State.ACTIVE, providers);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeactivate: function() {\r\n\t\t\tthis.setState(State.INACTIVE);\r\n\t\t},\r\n\t\t/** @returns {orion.editor.TextView} */\r\n\t\tgetTextView: function() {\r\n\t\t\treturn this.textView;\r\n\t\t},\r\n\t\t/** @returns {Boolean} */\r\n\t\tisActive: function() {\r\n\t\t\treturn this.state === State.ACTIVE || this.state === State.FILTERING;\r\n\t\t},\r\n\t\t/** @returns {Boolean} <code>true</code> if the event describes a change that should deactivate content assist. */\r\n\t\tisDeactivatingChange: function(/**orion.editor.ModelChangingEvent*/ event, selectionEvent) {\r\n\t\t\tvar isDeactivating = false;\r\n\t\t\t\r\n\t\t\tvar selections = Array.isArray(selectionEvent.newValue) ? selectionEvent.newValue : [selectionEvent.newValue];\r\n\t\t\tvar isPriorToInitialCaretOffset = selections[0].start < this._initialCaretOffset;\r\n\t\t\t\r\n\t\t\tif (isPriorToInitialCaretOffset || !event) {\r\n\t\t\t\tisDeactivating = true;\r\n\t\t\t} else if (event) {\r\n\t\t\t\tisDeactivating = (event.removedLineCount > 0) || (event.addedLineCount > 0);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn isDeactivating;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tsetState: function(state, /* Optional. Array of providers to pass to dispatched event.*/ providers) {\r\n\t\t\tvar eventType;\r\n\t\t\tif (state === State.ACTIVE) {\r\n\t\t\t\teventType = \"Activating\"; //$NON-NLS-0$\r\n\t\t\t\tif (this._mode) { this._mode.setActive(true); }\r\n\t\t\t} else if (state === State.INACTIVE) {\r\n\t\t\t\teventType = \"Deactivating\"; //$NON-NLS-0$\r\n\t\t\t\tif (this._mode) { this._mode.setActive(false); }\r\n\t\t\t}\r\n\t\t\tif (eventType) {\r\n\t\t\t\tthis.dispatchEvent({type: eventType, providers: providers});\r\n\t\t\t}\r\n\t\t\tthis.state = state;\r\n\t\t\tthis.onStateChange(state);\r\n\t\t},\r\n\t\tsetMode: function(mode) {\r\n\t\t\tthis._mode = mode;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tonStateChange: function(state) {\r\n\t\t\tif (state === State.INACTIVE) {\r\n\t\t\t\tthis._removeTextViewListeners();\r\n\t\t\t\tthis._filterText = \"\";\r\n\t\t\t\tthis._initialCaretOffset = -1;\r\n\t\t\t\tthis._computedProposals = null;\r\n\t\t\t} else if (state === State.ACTIVE) {\r\n\t\t\t\tthis._filterText = \"\";\r\n\t\t\t\tthis._addTextViewListeners();\r\n\t\t\t\tthis.computeProposals();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Computes the proposals at the TextView's current caret offset.\r\n\t\t */\r\n\t\tcomputeProposals: function() {\r\n\t\t\t// figure out initial offset, it should be the minimum between \r\n\t\t\t// the beginning of the selection and the current caret offset\r\n\t\t\tvar offset = this.textView.getCaretOffset();\r\n\t\t\tvar sel = this.textView.getSelection();\r\n\t\t\tvar selectionStart = Math.min(sel.start, sel.end);\t\t\t\r\n\t\t\tthis._initialCaretOffset = Math.min(offset, selectionStart);\r\n\t\t\tthis._computedProposals = null;\r\n\t\t\t\r\n\t\t\tthis._computeProposals(this._initialCaretOffset).then(function(proposals) {\r\n\t\t\t\tif (this.isActive()) {\r\n\t\t\t\t\tvar flatProposalArray = this._flatten(proposals);\r\n\t\t\t\t\t//check if flattened proposals form a valid array with at least one entry\r\n\t\t\t\t\tif (flatProposalArray && Array.isArray(flatProposalArray) && (0 < flatProposalArray.length)) {\r\n\t\t\t\t\t\tthis._computedProposals = proposals;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.dispatchEvent({type: \"ProposalsComputed\", data: {proposals: flatProposalArray}, autoApply: !this._autoTriggered}); //$NON-NLS-0$\r\n\t\t\t\t\tif (this._computedProposals && this._filterText) {\r\n\t\t\t\t\t\t// force filtering here because user entered text after\r\n\t\t\t\t\t\t// computeProposals() was called but before the plugins\r\n\t\t\t\t\t\t// returned the computed proposals\r\n\t\t\t\t\t\tthis.filterProposals(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetPrefixStart: function(model, end) {\r\n\t\t\tvar index = end;\r\n\t\t\twhile (index > 0 && /[A-Za-z0-9_]/.test(model.getText(index - 1, index))) {\r\n\t\t\t\tindex--;\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\thandleError: function(error) {\r\n\t\t\tif (typeof console !== \"undefined\") { //$NON-NLS-0$\r\n\t\t\t\tconsole.log(\"Error retrieving content assist proposals\"); //$NON-NLS-0$\r\n\t\t\t\tconsole.log(error && error.stack);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Initializes the providers. A provider must define an <tt>initialize()</tt> method to be initialized.\r\n\t\t * @since 6.0\r\n\t\t */\r\n\t\tinitialize: function() {\r\n\t\t\tthis._providers.forEach(function(info) {\r\n\t\t\t\tvar provider = info.provider;\r\n\t\t\t\tif (typeof provider.initialize === \"function\") {//$NON-NLS-0$\r\n\t\t\t\t\tprovider.initialize();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Retrieves the proposals at the given offset.\r\n\t\t * @private\r\n\t\t * @param {Number} offset The caret offset.\r\n\t\t * @returns {Deferred} A promise that will provide the proposals.\r\n\t\t */\r\n\t\t_computeProposals: function(offset) {\r\n\t\t\tvar providerInfoArray = this._providers;\r\n\t\t\tvar textView = this.textView;\r\n\t\t\tvar sel = textView.getSelection();\r\n\t\t\tvar model = textView.getModel(), mapOffset = offset;\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tmapOffset = model.mapOffset(mapOffset);\r\n\t\t\t\tsel.start = model.mapOffset(sel.start);\r\n\t\t\t\tsel.end = model.mapOffset(sel.end);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\tvar line = model.getLine(model.getLineAtOffset(mapOffset));\r\n\t\t\tvar index = 0;\r\n\t\t\twhile (index < line.length && /\\s/.test(line.charAt(index))) {\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\tvar indentation = line.substring(0, index);\r\n\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar lineDelimiter = model.getLineDelimiter();\r\n\t\t\tvar _self = this;\r\n\t\t\tvar promises = providerInfoArray.map(function(providerInfo) {\r\n\t\t\t\tvar provider = providerInfo.provider;\r\n\t\t\t\tvar computePrefixFunc = provider.computePrefix;\r\n\t\t\t\tvar ecProvider;\r\n\t\t\t\tvar editorContext;\r\n\t\t\t\tvar proposals;\r\n\t\t\t\tvar func;\r\n\t\t\t\tvar promise;\r\n\t\t\t\tvar params;\r\n\t\t\t\tif (computePrefixFunc) {\r\n\t\t\t\t\tecProvider = _self.editorContextProvider;\r\n\t\t\t\t\teditorContext = ecProvider.getEditorContext();\r\n\t\t\t\t\tvar result = computePrefixFunc.apply(provider, [editorContext, mapOffset]);\r\n\t\t\t\t\treturn result.then(function(prefix) {\r\n\t\t\t\t\t\tparams = {\r\n\t\t\t\t\t\t\tline: line,\r\n\t\t\t\t\t\t\toffset: mapOffset,\r\n\t\t\t\t\t\t\tprefix: prefix,\r\n\t\t\t\t\t\t\tselection: sel,\r\n\t\t\t\t\t\t\tdelimiter: lineDelimiter,\r\n\t\t\t\t\t\t\ttab: tab,\r\n\t\t\t\t\t\t\tindentation: indentation\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tif ((func = provider.computeContentAssist)) {\r\n\t\t\t\t\t\t\t\tparams = objects.mixin(params, ecProvider.getOptions());\r\n\t\t\t\t\t\t\t\tpromise = func.apply(provider, [editorContext, params]);\r\n\t\t\t\t\t\t\t} else if ((func = provider.getProposals || provider.computeProposals)) {\r\n\t\t\t\t\t\t\t\t// old API\r\n\t\t\t\t\t\t\t\tpromise = func.apply(provider, [model.getText(), mapOffset, params]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tproposals = _self.progress ? _self.progress.progress(promise, \"Generating content assist proposal\") : promise; //$NON-NLS-0$\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\treturn new Deferred().reject(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn Deferred.when(proposals);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(err) {\r\n\t\t\t\t\t\treturn new Deferred().reject(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// no computePrefix function is defined for the provider. Use the default prefix\r\n\t\t\t\tparams = {\r\n\t\t\t\t\tline: line,\r\n\t\t\t\t\toffset: mapOffset,\r\n\t\t\t\t\tprefix: model.getText(_self.getPrefixStart(model, mapOffset), mapOffset),\r\n\t\t\t\t\tselection: sel,\r\n\t\t\t\t\tdelimiter: lineDelimiter,\r\n\t\t\t\t\ttab: tab,\r\n\t\t\t\t\tindentation: indentation\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif ((func = provider.computeContentAssist)) {\r\n\t\t\t\t\t\tecProvider = _self.editorContextProvider;\r\n\t\t\t\t\t\teditorContext = ecProvider.getEditorContext();\r\n\t\t\t\t\t\tparams = objects.mixin(params, ecProvider.getOptions());\r\n\t\t\t\t\t\tpromise = func.apply(provider, [editorContext, params]);\r\n\t\t\t\t\t} else if ((func = provider.getProposals || provider.computeProposals)) {\r\n\t\t\t\t\t\t// old API\r\n\t\t\t\t\t\tpromise = func.apply(provider, [model.getText(), mapOffset, params]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproposals = _self.progress ? _self.progress.progress(promise, \"Generating content assist proposal\") : promise; //$NON-NLS-0$\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn new Deferred().reject(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn Deferred.when(proposals);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// TODO should we allow error to propagate instead of handling here?\r\n\t\t\tvar allPromises = Deferred.all(promises, this.handleError);\r\n\t\t\t\r\n\t\t\tif (this.pageMessage){\r\n\t\t\t\tallPromises = Deferred.when(allPromises, function(proposals){\r\n\t\t\t\t\t_self.pageMessage.close();\r\n\t\t\t\t\tvar foundProposal = false;\r\n\t\t\t\t\tif (proposals && proposals.length > 0){\r\n\t\t\t\t\t\tfor (var i=0; i<proposals.length; i++) {\r\n\t\t\t\t\t\t\tif (Array.isArray(proposals[i]) && proposals[i].length > 0){\r\n\t\t\t\t\t\t\t\tfoundProposal = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!foundProposal){\r\n\t\t\t\t\t\t_self.pageMessage.setErrorMessage(messages[\"noProposals\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn proposals;\r\n\t\t\t\t});\r\n\t\t\t\tthis.pageMessage.showWhile(allPromises, messages[\"computingProposals\"]);\r\n\t\t\t}\r\n\t\t\treturn allPromises;\r\n\t\t},\r\n\r\n\t\tfilterProposals: function(force) {\r\n\t\t\tif (this._computedProposals && (this._latestModelChangingEvent || force)) {\r\n\t\t\t\tvar model = this.textView.getModel();\r\n\t\t\t\tif (model.getBaseModel) {\r\n\t\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t\t}\r\n\t\t\t\tvar prefixStart = this.getPrefixStart(model, this._initialCaretOffset);\r\n\t\t\t\tvar defaultPrefix = this.textView.getText(prefixStart, this._initialCaretOffset);\r\n\t\t\t\tvar prefixText = defaultPrefix;\r\n\t\t\t\t// filter proposals based on prefixes and _filterText\r\n\t\t\t\tvar proposals = []; //array of arrays of proposals\r\n\t\t\t\tthis._computedProposals.forEach(function(proposalArray) {\r\n\t\t\t\t\tif (proposalArray && Array.isArray(proposalArray)) {\r\n\t\t\t\t\t\tvar includedProposals = proposalArray.filter(function(proposal) {\r\n\t\t\t\t\t\t\tfunction getRegexp(prefix, filter) {\r\n\t\t\t\t\t\t\t\tvar modifiedFilter = filter.replace(/([.+^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\"); //add start of line character and escape all special characters except * and ? //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tmodifiedFilter = modifiedFilter.replace(/([*?])/g, \".$1\"); //convert user input * and ? to .* and .? //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\treturn new RegExp(\"^\" + prefix + modifiedFilter, \"i\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar pattern;\r\n\t\t\t\t\t\t\tif (!proposal) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(typeof proposal.prefix === 'string') {\r\n\t\t\t\t\t\t\t\tprefixText = proposal.prefix;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tprefixText = defaultPrefix;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (STYLES[proposal.style] === STYLES.hr\r\n\t\t\t\t\t\t\t\t|| STYLES[proposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar proposalString = \"\";\r\n\t\t\t\t\t\t\tif (proposal.overwrite) {\r\n\t\t\t\t\t\t\t\tif (proposal.name) {\r\n\t\t\t\t\t\t\t\t\tproposalString = proposal.name;\r\n\t\t\t\t\t\t\t\t} else if (proposal.proposal) {\r\n\t\t\t\t\t\t\t\t\tproposalString = proposal.proposal;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn false; // unknown format\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpattern = getRegexp(prefixText, this._filterText);\r\n\t\t\t\t\t\t\t\treturn pattern.test(proposalString);\r\n\t\t\t\t\t\t\t} else if (proposal.name || proposal.proposal) {\r\n\t\t\t\t\t\t\t\tvar activated = false;\r\n\t\t\t\t\t\t\t\t// try matching name\r\n\t\t\t\t\t\t\t\tif (proposal.name) {\r\n\t\t\t\t\t\t\t\t\tpattern = getRegexp(prefixText, this._filterText);\r\n\t\t\t\t\t\t\t\t\tactivated = pattern.test(proposal.name);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// try matching proposal text\r\n\t\t\t\t\t\t\t\tif (!activated && proposal.proposal) {\r\n\t\t\t\t\t\t\t\t\tpattern = getRegexp(\"\", this._filterText);\r\n\t\t\t\t\t\t\t\t\tactivated = pattern.test(proposal.proposal);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn activated;\r\n\t\t\t\t\t\t\t} else if (typeof proposal === \"string\") { //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tpattern = getRegexp(\"\", this._filterText);\r\n\t\t\t\t\t\t\t\treturn pattern.test(proposal);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (includedProposals.length > 0) {\r\n\t\t\t\t\t\t\tproposals.push(includedProposals);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\t\r\n\t\t\t\tvar flatProposalArray = [];\r\n\t\t\t\tif (proposals) {\r\n\t\t\t\t\t// filter out extra separators and titles\r\n\t\t\t\t\tproposals = this._removeExtraUnselectableElements(proposals);\r\n\t\t\t\t\tflatProposalArray = this._flatten(proposals);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.dispatchEvent({type: \"ProposalsComputed\", data: {proposals: flatProposalArray}, autoApply: false}); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Helper method which removes extra separators and titles from\r\n\t\t * an array containing arrays of proposals from the various providers.\r\n\t\t * @param{Array[]} proposals An array with each element containing an array of proposals\r\n\t\t * @returns {Array} An array without the extra unselectable elements\r\n\t\t */\r\n\t\t_removeExtraUnselectableElements: function(proposals) {\r\n\t\t\t// get rid of extra separators and titles\r\n\t\t\tvar mappedProposals = proposals.map(function(proposalArray) {\r\n\t\t\t\tvar element = proposalArray.filter(function(proposal, index) {\r\n\t\t\t\t\tvar keepElement = true;\r\n\t\t\t\t\tif (STYLES[proposal.style] === STYLES.hr) {\r\n\t\t\t\t\t\tif ((0 === index) || ((proposalArray.length - 1) === index)) {\r\n\t\t\t\t\t\t\tkeepElement = false; // remove separators at first or last element\r\n\t\t\t\t\t\t} else if (STYLES.hr === STYLES[proposalArray[index - 1].style]) {\r\n\t\t\t\t\t\t\tkeepElement = false; // remove separator preceeded by another separator\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (STYLES[proposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\tvar nextProposal = proposalArray[index + 1];\r\n\t\t\t\t\t\tif (nextProposal) {\r\n\t\t\t\t\t\t\t// remove titles that preceed other titles, all of their subelements have already been filtered out\r\n\t\t\t\t\t\t\tif (STYLES[nextProposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\t\t\tkeepElement = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tkeepElement = false; //remove titles that are at the end of the array\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn keepElement;\r\n\t\t\t\t});\r\n\t\t\t\treturn element;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn mappedProposals;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Sets the provider that will be invoked to generate the Editor Context service and options to any\r\n\t\t * content assist providers that implement the v4.0 content assist API.\r\n\t\t * @param {Object} editorContextProvider\r\n\t\t */\r\n\t\tsetEditorContextProvider: function(editorContextProvider) {\r\n\t\t\tthis.editorContextProvider = editorContextProvider;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Helper method used to generate a unique ID for a provider.\r\n\t\t * Note that the uniqueness of the ID is only guaranteed for the life of this\r\n\t\t * object and if all of the other IDs are also generated using this method.\r\n\t\t */\r\n\t\t_generateProviderId: function() {\r\n\t\t\tif (this._idcount) {\r\n\t\t\t\tthis._idcount++;\r\n\t\t\t} else {\r\n\t\t\t\tthis._idcount = 0;\r\n\t\t\t}\r\n\t\t\treturn \"ContentAssistGeneratedID_\" +  this._idcount; //$NON-NLS-0$\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Sets whether or not automatic content assist triggering is enabled.\r\n\t\t * @param {Boolean} enableAutoTrigger\r\n\t\t */\r\n\t\tsetAutoTriggerEnabled: function(enableAutoTrigger) {\r\n\t\t\tthis._autoTriggerEnabled = enableAutoTrigger;\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @name orion.editor.ContentAssistProviderInfo\r\n\t\t * @class Encapsulates a content assist provider and its automatic triggers.\r\n\t\t *\r\n\t\t * @property {String} id Unique ID of this provider.\r\n\t\t * @property {RegExp} charTriggers A regular expression matching the characters that, when typed,\r\n\t\t * will cause this provider to be activated automatically by the content assist engine.\r\n\t\t * @property {RegExp} excludedStyles A regular expression matching the style names that are\r\n\t\t * exclusions to this provider's <tt>charTriggers</tt> matching.\r\n\t\t * @property {orion.editor.ContentAssistProvider} provider The actual content assist provider.\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * Sets the content assist providers that this ContentAssist will consult to obtain proposals.\r\n\t\t *\r\n\t\t * @param {orion.editor.ContentAssistProvider[]|orion.edit.ContentAssistProviderInfo[]} providers The\r\n\t\t * providers. Each element may be either a plain {@link orion.editor.ContentAssistProvider}, or a\r\n\t\t * {@link orion.edit.ContentAssistProviderInfo}.\r\n\t\t */\r\n\t\tsetProviders: function(providers) {\r\n\t\t\tvar _self = this;\r\n\t\t\tthis.setProviderInfoArray(providers.map(function(p) {\r\n\t\t\t\t// Wrap any plain Provider into a ProviderInfo\r\n\t\t\t\treturn p.id ? p : {\r\n\t\t\t\t\tprovider: p,\r\n\t\t\t\t\tid: _self._generateProviderId()\r\n\t\t\t\t};\r\n\t\t\t}));\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tsetProviderInfoArray: function(providerInfoArray) {\r\n\t\t\tthis.clearProviders();\r\n\t\t\t\r\n\t\t\tthis._providers = providerInfoArray;\r\n\t\t\tthis._charTriggersInstalled = providerInfoArray.some(function(info){\r\n\t\t\t\treturn info.charTriggers;\r\n\t\t\t});\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @returns orion.edit.ContentAssistProviderInfo[]\r\n\t\t */\r\n\t\tgetProviders: function() {\r\n\t\t\treturn this._providers.slice();\r\n\t\t},\r\n\r\n\t\tclearProviders: function() {\r\n\t\t\tthis._providers = [];\r\n\t\t\tthis._charTriggersInstalled = false;\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Sets the progress handler that will display progress information, if any are generated by content assist providers.\r\n\t\t */\r\n\t\tsetProgress: function(progress){\r\n\t\t\tthis.progress = progress;\r\n\t\t},\r\n\t\t\r\n\t\tsetStyleAccessor: function(styleAccessor) {\r\n\t\t\tthis._styleAccessor = styleAccessor;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Flattens an array of arrays into a one-dimensional array.\r\n\t\t * @param {Array[]} array\r\n\t\t * @returns {Array}\r\n\t\t */\r\n\t\t_flatten: function(arrayOrObjectArray) {\r\n\t\t\t\r\n\t\t\treturn arrayOrObjectArray.reduce(function(prev, curr) {\r\n\t\t\t\tvar returnValue = prev;\r\n\t\t\t\tvar filteredArray = null;\r\n\t\t\t\t\r\n\t\t\t\tif (curr && Array.isArray(curr)) {\r\n\t\t\t\t\tfilteredArray = curr.filter(function(element){\r\n\t\t\t\t\t\treturn element; //filter out falsy elements\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// add current proposal array to flattened array\r\n\t\t\t\t// skip current elements that are not arrays\r\n\t\t\t\tif (filteredArray && Array.isArray(filteredArray) && (filteredArray.length > 0)) {\r\n\t\t\t\t\tvar first = filteredArray;\r\n\t\t\t\t\tvar last = prev;\r\n\t\t\t\t\tvar filteredArrayStyle = filteredArray[0].style;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (filteredArrayStyle && STYLES[filteredArrayStyle] && (0 === STYLES[filteredArrayStyle].indexOf(STYLES.noemphasis))) {\r\n\t\t\t\t\t\t// the style of the first element starts with noemphasis\r\n\t\t\t\t\t\t// add these proposals to the end of the array\r\n\t\t\t\t\t\tfirst = prev;\r\n\t\t\t\t\t\tlast = filteredArray;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (first.length > 0) {\r\n\t\t\t\t\t\tvar firstArrayStyle = first[first.length - 1].style;\r\n\t\t\t\t\t\tif (firstArrayStyle && (STYLES.hr !== STYLES[firstArrayStyle])) {\r\n\t\t\t\t\t\t\t// add separator between proposals from different providers \r\n\t\t\t\t\t\t\t// if the previous array didn't already end with a separator\r\n\t\t\t\t\t\t\tfirst = first.concat({\r\n\t\t\t\t\t\t\t\tproposal: '',\r\n\t\t\t\t\t\t\t\tname: '',\r\n\t\t\t\t\t\t\t\tdescription: '---------------------------------', //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tstyle: 'hr', //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tunselectable: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturnValue = first.concat(last);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn returnValue;\r\n\t\t\t}, []);\r\n\t\t},\r\n\t\t\r\n\t\t_triggerListener: function(/*event*/) {\r\n\t\t\tvar caretOffset = this.textView.getCaretOffset();\r\n\t\t\tvar stylesAtOffset = null;\r\n\t\t\tvar providerInfosToActivate = [];\r\n\r\n\t\t\tif (this._charTriggersInstalled) {\r\n\t\t\t\tvar currentChar = this.textView.getText(caretOffset - 1, caretOffset);\r\n\r\n\t\t\t\tthis._providers.forEach(function(info) {\r\n\t\t\t\t\t// check if the charTriggers RegExp matches the currentChar\r\n\t\t\t\t\t// we're assuming that this will fail much more often than\r\n\t\t\t\t\t// the excludedStyles test so do this first for better performance\r\n\t\t\t\t\tvar charTriggers = info.charTriggers;\r\n\t\t\t\t\tif (charTriggers && charTriggers.test(currentChar)) {\r\n\t\t\t\t\t\tvar isExcluded = false;\r\n\t\t\t\t\t\tvar excludedStyles = info.excludedStyles;\r\n\t\t\t\t\t\tif (this._styleAccessor && excludedStyles) {\r\n\t\t\t\t\t\t\tif (!stylesAtOffset) {\r\n\t\t\t\t\t\t\t\t// lazily initialize this variable to avoid getting the styles\r\n\t\t\t\t\t\t\t\t// for every model modification, only ones that may trigger\r\n\t\t\t\t\t\t\t\tstylesAtOffset = this._styleAccessor.getStyles(caretOffset - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// check if any of the styles match the excludedStyles RegExp\r\n\t\t\t\t\t\t\tisExcluded = stylesAtOffset.some(function (element) {\r\n\t\t\t\t\t\t\t\treturn excludedStyles.test(element.style);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isExcluded) {\r\n\t\t\t\t\t\t\tproviderInfosToActivate.push(info);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tif (providerInfosToActivate.length > 0) {\r\n\t\t\t\t\tthis.activate(providerInfosToActivate, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Private helper to install/uninstall the automatic trigger\r\n\t\t * listener based on the state of the relevant booleans\r\n\t\t */\r\n\t\t_updateAutoTriggerListenerState: function() {\r\n\t\t\tif (!this._boundTriggerListener) {\r\n\t\t\t\tthis._boundTriggerListener = this._triggerListener.bind(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this._triggerListenerInstalled) {\r\n\t\t\t\t// uninstall the listener if necessary\r\n\t\t\t\tif (!this._autoTriggerEnabled || !this._charTriggersInstalled) {\r\n\t\t\t\t\tthis.textView.removeEventListener(\"Modify\", this._boundTriggerListener); //$NON-NLS-0$\r\n\t\t\t\t\tthis._triggerListenerInstalled = false;\r\n\t\t\t\t}\r\n\t\t\t} else if (this._autoTriggerEnabled && this._charTriggersInstalled){\r\n\t\t\t\t// install the listener if necessary\r\n\t\t\t\tthis.textView.addEventListener(\"Modify\", this._boundTriggerListener); //$NON-NLS-0$\r\n\t\t\t\tthis._triggerListenerInstalled = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_addTextViewListeners: function() {\r\n\t\t\tif (!this._textViewListenersAdded) {\r\n\t\t\t\tthis.textView.addEventListener(\"ModelChanging\", this._textViewListeners.onModelChanging); //$NON-NLS-0$\r\n\t\t\t\tthis.textView.addEventListener(\"Scroll\", this._textViewListeners.onScroll); //$NON-NLS-0$\r\n\t\t\t\tthis.textView.addEventListener(\"Selection\", this._textViewListeners.onSelection); //$NON-NLS-0$\r\n\t\t\t\tthis._textViewListenersAdded = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_removeTextViewListeners: function() {\r\n\t\t\tif (this._textViewListenersAdded) {\r\n\t\t\t\tthis._latestModelChangingEvent = null;\r\n\t\t\t\tthis.textView.removeEventListener(\"ModelChanging\", this._textViewListeners.onModelChanging); //$NON-NLS-0$\r\n\t\t\t\tthis.textView.removeEventListener(\"Scroll\", this._textViewListeners.onScroll); //$NON-NLS-0$\r\n\t\t\t\tthis.textView.removeEventListener(\"Selection\", this._textViewListeners.onSelection); //$NON-NLS-0$\r\n\t\t\t\tthis._textViewListenersAdded = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_updateFilterText: function(modelChangingEvent) {\r\n\t\t\t// update this._filterText based on the modification info\r\n\t\t\t// contained in the event\r\n\t\t\tvar removedCharCount = modelChangingEvent.removedCharCount;\r\n\t\t\tif (removedCharCount) {\r\n\t\t\t\tvar lastIndex = this._filterText.length - removedCharCount;\r\n\t\t\t\tthis._filterText = this._filterText.substring(0, lastIndex);\r\n\t\t\t}\r\n\t\t\tvar text = modelChangingEvent.text;\r\n\t\t\tif (text) {\r\n\t\t\t\tthis._filterText = this._filterText.concat(text);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmEventTarget.EventTarget.addMixin(ContentAssist.prototype);\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssistMode\r\n\t * @class Editor mode for interacting with content assist proposals.\r\n\t * @description Creates a ContentAssistMode. A ContentAssistMode is a key mode for {@link orion.editor.Editor}\r\n\t * that provides interaction with content assist proposals retrieved from an {@link orion.editor.ContentAssist}. \r\n\t * Interaction is performed via the {@link #lineUp}, {@link #lineDown}, and {@link #enter} actions. An \r\n\t * {@link orion.editor.ContentAssistWidget} may optionally be provided to display which proposal is currently selected.\r\n\t * @param {orion.editor.ContentAssist} contentAssist\r\n\t * @param {orion.editor.ContentAssistWidget} [ContentAssistWidget]\r\n\t */\r\n\tfunction ContentAssistMode(contentAssist, ContentAssistWidget) {\r\n\t\tvar textView = contentAssist.textView;\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.widget = ContentAssistWidget;\r\n\t\tthis.proposals = [];\r\n\t\tvar self = this;\r\n\t\tthis.contentAssist.addEventListener(\"ProposalsComputed\", function(event) { //$NON-NLS-0$\r\n\t\t\tself.proposals = event.data.proposals;\r\n\t\t\tif (self.proposals.length === 0) {\r\n\t\t\t\tself.selectedIndex = -1;\r\n\t\t\t\tself.cancel();\r\n\t\t\t} else {\r\n\t\t\t\tself.selectedIndex = 0;\r\n\t\t\t\twhile(self.proposals[self.selectedIndex] && self.proposals[self.selectedIndex].unselectable) {\r\n\t\t\t\t\tself.selectedIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.proposals[self.selectedIndex]) {\r\n\t\t\t\t\tif (self.widget) {\r\n\t\t\t\t\t\tvar showWidget = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (event.autoApply) {\r\n\t\t\t\t\t\t\tvar nextIndex = self.selectedIndex + 1;\r\n\t\t\t\t\t\t\twhile (self.proposals[nextIndex] && self.proposals[nextIndex].unselectable) {\r\n\t\t\t\t\t\t\t\tnextIndex++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!self.proposals[nextIndex]) {\r\n\t\t\t\t\t\t\t\t// if there is only one selectable proposal apply it automatically\r\n\t\t\t\t\t\t\t\tshowWidget = false;\r\n\t\t\t\t\t\t\t\tself.contentAssist.apply(self.proposals[self.selectedIndex]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (showWidget) {\r\n\t\t\t\t\t\t\tself.widget.show();\r\n\t\t\t\t\t\t\tself.widget.selectNode(self.selectedIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.selectedIndex = -1; // didn't find any selectable items\r\n\t\t\t\t\tself.cancel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\ttextView.setAction(\"contentAssistApply\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.enter();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistCancel\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.cancel();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistNextProposal\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineDown();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistPreviousProposal\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineUp();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistNextPage\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.pageDown();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistPreviousPage\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.pageUp();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistHome\", function() { //$NON-NLS-0$\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.scrollIndex(0, true);\r\n\t\t\t}\r\n\t\t\treturn this.lineDown(0); // select first selectable element starting at the top and moving downwards\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistEnd\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineUp(this.proposals.length - 1); // select first selectable element starting at the bottom and moving up\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistTab\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.tab();\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\tif (this.widget) {\r\n\t\t\tthis.widget.setContentAssistMode(this);\r\n\t\t\tthis.widget.createAccessible();\r\n\t\t}\r\n\t}\r\n\tContentAssistMode.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(ContentAssistMode.prototype, {\r\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"contentAssistApply\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistNextProposal\", keyBinding: new KeyBinding(40)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistPreviousProposal\", keyBinding: new KeyBinding(38)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistNextPage\", keyBinding: new KeyBinding(34)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistPreviousPage\", keyBinding: new KeyBinding(33)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistHome\", keyBinding: new KeyBinding(lib.KEY.HOME)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistEnd\", keyBinding: new KeyBinding(lib.KEY.END)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistTab\", keyBinding: new KeyBinding(9)}); //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\tcancel: function() {\r\n\t\t\tthis.getContentAssist().deactivate();\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetContentAssist: function() {\r\n\t\t\treturn this.contentAssist;\r\n\t\t},\r\n\t\tgetProposals: function() {\r\n\t\t\treturn this.proposals;\t\r\n\t\t},\r\n\t\tisActive: function() {\r\n\t\t\treturn this.getContentAssist().isActive();\r\n\t\t},\r\n\t\tsetActive: function(active) {\r\n\t\t\tif (active) {\r\n\t\t\t\tthis.contentAssist.textView.addKeyMode(this);\r\n\t\t\t} else {\r\n\t\t\t\tthis.contentAssist.textView.removeKeyMode(this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Selects a selectable item in the content assist widget\r\n\t\t * iterating backwards for .\r\n\t\t * \r\n\t\t * @param index {number} Optional. The index of the item to try and select. \r\n\t\t */\r\n\t\tlineUp: function(index, noWrap) {\r\n\t\t\treturn this.selectNew(index, noWrap, false);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Selects the item at the specified index or the next\r\n\t\t * selectable item\r\n\t\t */\r\n\t\tlineDown: function(index, noWrap) {\r\n\t\t\treturn this.selectNew(index, noWrap, true);\r\n\t\t},\r\n\t\tselectNew: function(index, noWrap, forward) {\r\n\t\t\tvar newIndex = index;\r\n\t\t\t\r\n\t\t\tif (forward) {\r\n\t\t\t\tif (undefined === newIndex) {\r\n\t\t\t\t\tnewIndex = this.selectedIndex + 1;\r\n\t\t\t\t}\r\n\t\t\t\t// handle wrap around\r\n\t\t\t\tif (newIndex >= this.proposals.length) {\r\n\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewIndex = 0;\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (undefined === newIndex) {\r\n\t\t\t\t\tnewIndex = this.selectedIndex - 1;\r\n\t\t\t\t}\r\n\t\t\t\t// handle wrap around\r\n\t\t\t\tif (0 > newIndex) {\r\n\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewIndex = this.proposals.length - 1;\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar startIndex = newIndex;\r\n\t\t\twhile (this.proposals[newIndex] && this.proposals[newIndex].unselectable) {\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tnewIndex++;\r\n\t\t\t\t\t// handle wrap around\r\n\t\t\t\t\tif (newIndex >= this.proposals.length) {\r\n\t\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewIndex = 0;\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewIndex--;\r\n\t\t\t\t\t// handle wrap around\r\n\t\t\t\t\tif (0 > newIndex) {\r\n\t\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewIndex = this.proposals.length - 1;\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (newIndex === startIndex) {\r\n\t\t\t\t\t// looped through all nodes and didn't find any that were selectable\r\n\t\t\t\t\tnewIndex = -1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.selectedIndex = newIndex;\r\n\t\t\t\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.selectNode(newIndex);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._showTooltip(true);\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Opens the tooltip for the selected proposal beside the content assist window\r\n\t\t * @param update if false, the tooltip will be hidden then reopened with the new contents\r\n\t\t * @param noContent if true the current tooltip contents will not be replaced, just size and position updated\r\n\t\t */\r\n\t\t_showTooltip: function(update, noContent) {\r\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this.contentAssist.textView);\r\n\t\t\tvar self = this;\r\n\t\t\tvar target = {\r\n\t\t\t\tgetTooltipInfo: function() {\r\n\t\t\t\t\tvar bounds = self.widget.parentNode.getBoundingClientRect();\r\n\t\t\t\t\tvar tipArea = {width: 350, height: bounds.height, top: bounds.top};\r\n\t\t\t\t\tif ((bounds.left + bounds.width) >= document.documentElement.clientWidth){\r\n\t\t\t\t\t\ttipArea.left = bounds.left - tipArea.width;\r\n\t\t\t\t\t\ttipArea.left -= 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttipArea.left = bounds.left + bounds.width;\r\n\t\t\t\t\t\ttipArea.left += 10;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar info = {\r\n\t\t\t\t\t\tcontext: {proposal: self.proposals[self.selectedIndex]},\r\n\t\t\t\t\t\tanchorArea: bounds,\r\n\t\t\t\t\t\ttooltipArea: tipArea\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn info;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (update) {\r\n\t\t\t\ttooltip.update(target, noContent);\r\n\t\t\t} else {\r\n\t\t\t\ttooltip.show(target, true, false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_hideTooltip: function() {\r\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this.contentAssist.textView);\r\n\t\t\ttooltip.hide(true); // Clear the lock\r\n\t\t},\r\n\r\n\t\tpageUp: function() {\r\n\t\t\t//TODO find out why this doesn't always go to the very top\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tvar newSelected = this.widget.getTopIndex();\r\n\t\t\t\tif (newSelected === this.selectedIndex) {\r\n\t\t\t\t\tthis.widget.scrollIndex(newSelected, false);\r\n\t\t\t\t\tnewSelected = this.widget.getTopIndex();\r\n\t\t\t\t}\r\n\t\t\t\tif (0 === newSelected) {\r\n\t\t\t\t\t// if we're attempting to select the first item in the list\r\n\t\t\t\t\t// move down to the next one if it is not selectable\r\n\t\t\t\t\treturn this.lineDown(newSelected, true);\t\r\n\t\t\t\t}\r\n\t\t\t\treturn this.lineUp(newSelected, true);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.lineUp();\r\n\t\t\t}\r\n\t\t},\r\n\t\tpageDown: function() {\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tvar newSelected = this.widget.getBottomIndex();\r\n\t\t\t\tif (newSelected === this.selectedIndex) {\r\n\t\t\t\t\tthis.widget.scrollIndex(newSelected, true);\r\n\t\t\t\t\tnewSelected = this.widget.getBottomIndex();\r\n\t\t\t\t}\r\n\t\t\t\treturn this.lineDown(newSelected, true);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.lineDown();\r\n\t\t\t}\r\n\t\t},\r\n\t\tenter: function() {\r\n\t\t\tvar proposal = this.proposals[this.selectedIndex] || null;\r\n\t\t\treturn this.contentAssist.apply(proposal);\r\n\t\t},\r\n\t\ttab: function() {\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.parentNode.focus();\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssistWidget\r\n\t * @class Displays proposals from a {@link orion.editor.ContentAssist}.\r\n\t * @description Creates a ContentAssistWidget that will display proposals from the given {@link orion.editor.ContentAssist}\r\n\t * in the given <code>parentNode</code>. Clicking a proposal will cause the ContentAssist to apply that proposal.\r\n\t * @param {orion.editor.ContentAssist} contentAssist\r\n\t * @param {String|DomNode} [parentNode] The ID or DOM node to use as the parent for displaying proposals. If not provided,\r\n\t * a new DIV will be created inside &lt;body&gt; and assigned the CSS class <code>contentassist</code>.\r\n\t */\r\n\tfunction ContentAssistWidget(contentAssist, parentNode) {\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.textView = this.contentAssist.getTextView();\r\n\t\tthis.textViewListenerAdded = false;\r\n\t\tthis.isShowing = false;\r\n\t\tthis._useResizeTimer = false;\r\n\t\tvar document = this.textView.getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\r\n\t\tthis.parentNode = typeof parentNode === \"string\" ? document.getElementById(parentNode) : parentNode; //$NON-NLS-0$\r\n\t\tif (!this.parentNode) {\r\n\t\t\tthis.parentNode = util.createElement(document, \"div\"); //$NON-NLS-0$\r\n\t\t\tthis.parentNode.className = \"contentassist\"; //$NON-NLS-0$\r\n\t\t\tvar body = document.getElementsByTagName(\"body\")[0]; //$NON-NLS-0$\r\n\t\t\tif (body) {\r\n\t\t\t\tbody.appendChild(this.parentNode);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"parentNode is required\"); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar MO = window.MutationObserver || window.MozMutationObserver;\r\n\t\tif (MO && util.isFirefox) {//MutationObserver does not work in chrome for resize https://code.google.com/p/chromium/issues/detail?id=293948\r\n\t\t\tthis._mutationObserver = new MO(function(mutations) {\r\n\t\t\t\tthis._contentAssistMode._showTooltip(true, true);\r\n\t\t\t}.bind(this));\r\n\t\t} else {\r\n\t\t\tthis._useResizeTimer = true;\r\n\t\t}\r\n\t\t\r\n\t\ttextUtil.addEventListener(this.parentNode, \"scroll\", this.onScroll.bind(this)); //$NON-NLS-0$\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.textViewListener = {\r\n\t\t\tonMouseDown: function(event) {\r\n\t\t\t\tvar target = event.event.target || event.event.srcElement;\r\n\t\t\t\tif (target.parentElement !== self.parentNode) {\r\n\t\t\t\t\tself.contentAssist.deactivate();\r\n\t\t\t\t}\r\n\t\t\t\t// ignore the event if this is a click inside of the parentNode\r\n\t\t\t\t// the click is handled by the onClick() function\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.contentAssist.addEventListener(\"Deactivating\", function(event) { //$NON-NLS-0$\r\n\t\t\tself.hide();\r\n\t\t});\r\n\t\tthis.scrollListener = function(e) {\r\n\t\t\tif (self.isShowing) {\r\n\t\t\t\tself.position();\r\n\t\t\t\t//TODO: code edit widget : redo the tooltip positioning by the same new api\r\n\t\t\t}\r\n\t\t};\r\n\t\t//TODO: code edit widget : clean up the code to remove the listener here\r\n\t\ttextUtil.addEventListener(document, \"scroll\", this.scrollListener); //$NON-NLS-0$\r\n\t}\r\n\tContentAssistWidget.prototype = /** @lends orion.editor.ContentAssistWidget.prototype */ {\r\n\t\t/** @private */\r\n\t\tonClick: function(e) {\r\n\t\t\tif (!e) { e = window.event; }\r\n\t\t\tthis.contentAssist.apply(this.getProposal(e.target || e.srcElement));\r\n\t\t\tthis.textView.focus();\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tonScroll: function(e) {\r\n\t\t\tif (this.previousCloneNode && !this.preserveCloneThroughScroll) {\r\n\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\tthis.previousSelectedNode.classList.add(STYLES.selected);\r\n\t\t\t}\r\n\t\t\tthis.preserveCloneThroughScroll = false;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tcreateDiv: function(proposal, parent, itemIndex) {\r\n\t\t\tvar document = parent.ownerDocument;\r\n\t\t\tvar div = util.createElement(document, \"div\"); //$NON-NLS-0$\r\n\t\t\tdiv.id = \"contentoption\" + itemIndex; //$NON-NLS-0$\r\n\t\t\tdiv.setAttribute(\"role\", \"option\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tdiv.className = STYLES[proposal.style] ? STYLES[proposal.style] : STYLES.dfault;\r\n\t\t\tvar node;\r\n\t\t\tif (proposal.style === \"hr\") { //$NON-NLS-0$\r\n\t\t\t\tnode = util.createElement(document, \"hr\"); //$NON-NLS-0$\r\n\t\t\t} else {\r\n\t\t\t\tnode = this._createDisplayNode(proposal, itemIndex);\r\n\t\t\t\tdiv.contentAssistProposalIndex = itemIndex; // make div clickable\r\n\t\t\t}\r\n\t\t\tdiv.appendChild(node);\r\n\t\t\tparent.appendChild(div);\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tcreateAccessible: function() {\r\n\t\t\tvar mode = this._contentAssistMode;\r\n\t\t\tvar self = this;\r\n\t\t\ttextUtil.addEventListener(this.parentNode, \"keydown\", function(evt) { //$NON-NLS-0$\r\n\t\t\t\tif (!evt) { evt = window.event; }\r\n\t\t\t\tif (evt.preventDefault) {\r\n\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tif(evt.keyCode === lib.KEY.ESCAPE) {\r\n\t\t\t\t\treturn mode.cancel(); \r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.UP) {\r\n\t\t\t\t\treturn mode.lineUp();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.DOWN) {\r\n\t\t\t\t\treturn mode.lineDown();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.ENTER) {\r\n\t\t\t\t\treturn mode.enter(); \r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.PAGEDOWN) {\r\n\t\t\t\t\treturn mode.pageDown();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.PAGEUP) {\r\n\t\t\t\t\treturn mode.pageUp();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.HOME) {\r\n\t\t\t\t\tself.scrollIndex(0, true);\r\n\t\t\t\t\treturn mode.lineDown(0); // select first selectable element starting at the top and moving downwards\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.END) {\r\n\t\t\t\t\treturn mode.lineUp(mode.getProposals().length - 1); // select first selectable element starting at the bottom and moving up\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_createDisplayNode: function(proposal, index) {\r\n\t\t\tvar node = document.createElement(\"span\"); //$NON-NLS-0$\r\n\t\t\t\r\n\t\t\tif (!proposal){\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (typeof proposal === \"string\"){\r\n\t\t\t\tvar simpleName = this._createNameNode(proposal);\r\n\t\t\t\tsimpleName.contentAssistProposalIndex = index;\r\n\t\t\t\treturn simpleName;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar nameNode;\r\n\t\t\tvar usingDescription; // Proposals are allowed to use the description as the name\r\n\t\t\tif (proposal.name && typeof proposal.name === \"string\") {\r\n\t\t\t\tnameNode = this._createNameNode(proposal.name);\r\n\t\t\t} else if (proposal.description && typeof proposal.description === \"string\"){\r\n\t\t\t\tnameNode = this._createNameNode(proposal.description);\r\n\t\t\t\tusingDescription = true;\r\n\t\t\t} else if (proposal.proposal && typeof proposal.proposal === \"string\"){\r\n\t\t\t\tnameNode = this._createNameNode(proposal.proposal);\r\n\t\t\t} else {\r\n\t\t\t\t// Must have a name\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar tagsNode = this._createTagsNode(proposal.tags);\r\n\t\t\t\r\n\t\t\tvar descriptionNode;\r\n\t\t\tif (!usingDescription && proposal.description && typeof proposal.description === \"string\") {\r\n\t\t\t\tdescriptionNode = document.createTextNode(proposal.description);\r\n\t\t\t}\r\n\r\n\t\t\tif (tagsNode) { node.appendChild(tagsNode); }\r\n\t\t\tnode.appendChild(nameNode);\r\n\t\t\tif (descriptionNode) { node.appendChild(descriptionNode); }\r\n\r\n\t\t\tnameNode.contentAssistProposalIndex = index;\r\n\t\t\tnode.contentAssistProposalIndex = index;\r\n\t\t\t\r\n\t\t\treturn node;\t\t\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_stopResizeTimer: function() {\r\n\t\t\tif (this._resizeTimer) {\r\n\t\t\t\twindow.clearInterval(this._resizeTimer);\r\n\t\t\t\tthis._resizeTimer = null; \r\n\t\t\t}\r\n\t\t},\r\n\t\t_startResizeTimer: function() {\r\n\t\t\tthis._stopResizeTimer();\r\n\t\t\tthis._cachedResizeBound = this.parentNode.getBoundingClientRect();\r\n\t\t\tthis._resizeTimer = window.setInterval(function() {\r\n\t\t\t\tif(this._contentAssistMode) {\r\n\t\t\t\t\tvar bound = this.parentNode.getBoundingClientRect();\r\n\t\t\t\t\tif(bound.left === this._cachedResizeBound.left && \r\n\t\t\t\t\t   bound.top === this._cachedResizeBound.top &&\r\n\t\t\t\t\t   bound.width === this._cachedResizeBound.width &&\r\n\t\t\t\t\t   bound.height === this._cachedResizeBound.height) {\r\n\t\t\t\t\t\treturn;   \t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._cachedResizeBound = bound;\r\n\t\t\t\t\tthis._contentAssistMode._showTooltip(true, true);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this), 100);\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_createNameNode: function(name) {\r\n\t\t\tvar node = document.createElement(\"span\"); //$NON-NLS-0$\r\n\t\t\tnode.classList.add(\"proposal-name\"); //$NON-NLS-0$\r\n\t\t\tnode.appendChild(document.createTextNode(name));\r\n\t\t\treturn node;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * @param tags {Array} The array of tags to display\r\n\t\t * @returns {Object} the dom node for the tags or <code>null</code>\n\t\t */\n\t\t_createTagsNode: function(tags) {\r\n\t\t\tvar tagsNode = null;\r\n\t\t\tif (tags && tags.constructor === Array && tags.length > 0){\r\n\t\t\t\ttagsNode = document.createElement(\"span\");\t //$NON-NLS-1$\r\n\t\t\t\tfor (var i=0; i<tags.length; i++) {\r\n\t\t\t\t\tvar tag = tags[i];\r\n\t\t\t\t\tif (tag.content || tag.cssClass){\r\n\t\t\t\t\t\tvar tagNode = document.createElement(\"span\"); //$NON-NLS-1$\r\n\t\t\t\t\t\tif (tag.cssClass){\r\n\t\t\t\t\t\t\ttagNode.classList.add(tag.cssClass);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttagNode.classList.add('proposalTag'); //$NON-NLS-1$\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (tag.content){\r\n\t\t\t\t\t\t\ttagNode.textContent = tag.content;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttagsNode.appendChild(tagNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn tagsNode;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * @returns {Object} The proposal represented by the given node.\r\n\t\t */\r\n\t\tgetProposal: function(/**DOMNode*/ node) {\r\n\t\t\tvar proposal = null;\r\n\t\t\t\r\n\t\t\tvar nodeIndex = node.contentAssistProposalIndex;\r\n\t\t\t\r\n\t\t\tif (undefined !== nodeIndex){\r\n\t\t\t\tproposal = this._contentAssistMode.getProposals()[nodeIndex] || null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn proposal;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetTopIndex: function() {\r\n\t\t\tvar nodes = this.parentNode.childNodes;\r\n\t\t\tfor (var i=0; i < nodes.length; i++) {\r\n\t\t\t\tvar child = nodes[i];\r\n\t\t\t\tif (child.offsetTop >= this.parentNode.scrollTop) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetBottomIndex: function() {\r\n\t\t\tvar nodes = this.parentNode.childNodes;\r\n\t\t\tfor (var i=0; i < nodes.length; i++) {\r\n\t\t\t\tvar child = nodes[i];\r\n\t\t\t\tif ((child.offsetTop + child.offsetHeight) > (this.parentNode.scrollTop + this.parentNode.clientHeight)) {\r\n\t\t\t\t\treturn Math.max(0, i - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn nodes.length - 1;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tscrollIndex: function(index, top) {\r\n\t\t\tvar nodeAtIndex = this.parentNode.childNodes[index];\r\n\t\t\tif (nodeAtIndex){\r\n\t\t\t\tnodeAtIndex.scrollIntoView(top);\r\n\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Visually selects the node at the specified nodeIndex\r\n\t\t * by updating its CSS class and scrolling it into view\r\n\t\t * if necessary.\r\n\t\t * @param{Number} nodeIndex The index of the node to select\r\n\t\t */\r\n\t\tselectNode: function(nodeIndex) {\r\n\t\t\tvar node = null;\r\n\t\t\t\r\n\t\t\tif (this._hideTimeout) {\r\n\t\t\t\twindow.clearTimeout(this._hideTimeout);\r\n\t\t\t\tthis._hideTimeout = null;\r\n\t\t\t}\r\n\t\t\tif (this._fadeTimer) {\r\n\t\t\t\twindow.clearTimeout(this._fadeTimer);\r\n\t\t\t\tthis._fadeTimer = null;\r\n\t\t\t}\r\n\t\t\tif (this.previousSelectedNode) {\r\n\t\t\t\tthis.previousSelectedNode.classList.remove(STYLES.selected);\r\n\t\t\t\tthis.previousSelectedNode = null;\r\n\t\t\t\tif (this.previousCloneNode) {\r\n\t\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (-1 !== nodeIndex) {\r\n\t\t\t\tnode = this.parentNode.childNodes[nodeIndex];\r\n\t\t\t\tif (node){\r\n\t\t\t\t\tnode.classList.add(STYLES.selected);\r\n\t\t\t\t\tthis.parentNode.setAttribute(\"aria-activedescendant\", node.id); //$NON-NLS-0$\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t\tif (node.offsetTop < this.parentNode.scrollTop) {\r\n\t\t\t\t\t\tnode.scrollIntoView(true);\r\n\t\t\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t\t\t} else if ((node.offsetTop + node.offsetHeight) > (this.parentNode.scrollTop + this.parentNode.clientHeight)) {\r\n\t\t\t\t\t\tnode.scrollIntoView(false);\r\n\t\t\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar textNode = node.firstChild || node;  \r\n\t\t\t\t\tvar textBounds = textNode.getBoundingClientRect();\r\n\t\t\t\t\tvar parentWidth = this.parentNode.clientWidth ? this.parentNode.clientWidth : this.parentNode.getBoundingClientRect(); // Scrollbar can cover text\r\n\t\t\t\t\tvar parentStyle = window.getComputedStyle(this.parentNode);\r\n\t\t\t\t\tvar nodeStyle = window.getComputedStyle(node);\r\n\t\t\t\t\tvar allPadding = parseInt(parentStyle.paddingLeft) + parseInt(parentStyle.paddingRight) + parseInt(nodeStyle.paddingLeft) + parseInt(nodeStyle.paddingRight);\r\n\t\t\t\t\tif (textBounds.width >= (parentWidth - allPadding)) {\r\n\t\t\t\t\t\tvar parentTop = parseInt(parentStyle.top);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// create clone node\r\n\t\t\t\t\t\tvar clone = node.cloneNode(true); // deep clone\r\n\t\t\t\t\t\tclone.classList.add(\"cloneProposal\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tclone.style.top = parentTop + node.offsetTop - this.parentNode.scrollTop + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t\tclone.style.left = parentStyle.left;\r\n\t\t\t\t\t\tclone.setAttribute(\"id\", clone.id + \"_clone\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// try to fit clone node on page horizontally\r\n\t\t\t\t\t\tvar viewportWidth = document.documentElement.clientWidth;\r\n\t\t\t\t\t\tvar horizontalOffset = (textBounds.left + textBounds.width) - parseInt(viewportWidth);\r\n\t\t\t\t\t\tif (horizontalOffset > 0) {\r\n\t\t\t\t\t\t\tvar cloneLeft = parseInt(parentStyle.left) - horizontalOffset;\r\n\t\t\t\t\t\t\tif (0 > cloneLeft) {\r\n\t\t\t\t\t\t\t\tcloneLeft = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclone.style.left = cloneLeft + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t// create wrapper parent node (to replicate css class hierarchy)\r\n\t\t\t\t\t\tvar parentClone = document.createElement(\"div\");\r\n\t\t\t\t\t\tparentClone.id = \"clone_contentassist\";  //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.classList.add(\"contentassist\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.classList.add(\"cloneWrapper\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.appendChild(clone);\r\n\t\t\t\t\t\tparentClone.onclick = this.parentNode.onclick;\r\n\t\t\t\t\t\tthis.parentNode.parentNode.insertBefore(parentClone, this.parentNode);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// make all the cloned nodes clickable by setting their contentAssistProposalIndex\r\n\t\t\t\t\t\tvar recursiveSetIndex = function(cloneNode){\r\n\t\t\t\t\t\t\tcloneNode.contentAssistProposalIndex = node.contentAssistProposalIndex;\r\n\t\t\t\t\t\t\tif (cloneNode.hasChildNodes()) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0 ; i < cloneNode.childNodes.length ; i++){\r\n\t\t\t\t\t\t\t\t\trecursiveSetIndex(cloneNode.childNodes[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\trecursiveSetIndex(parentClone);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar self = this;\r\n\t\t\t\t\t\tthis._hideTimeout = window.setTimeout(function() {\r\n\t\t\t\t\t\t\tself._hideTimeout = null;\r\n\t\t\t\t\t\t\tnode.classList.add(STYLES.selected);\r\n\t\t\t\t\t\t\tvar opacity = 1;\r\n\t\t\t\t\t\t\tself._fadeTimer = window.setInterval(function() {\r\n\t\t\t\t\t\t\t\tif (!self.previousCloneNode || opacity <= 0.01){\r\n\t\t\t\t\t\t\t\t\tself._removeCloneNode();\r\n\t\t\t\t\t\t\t\t\twindow.clearInterval(self._fadeTimer);\r\n\t\t\t\t\t\t\t\t\tself._fadeTimer = null;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tparentClone.style.opacity = opacity;\r\n\t\t\t\t\t\t\t\t\tparentClone.style.filter = 'alpha(opacity=' + opacity * 100 + \")\";\r\n\t        \t\t\t\t\t\topacity -= opacity * 0.1;\r\n\t        \t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 50);\r\n\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnode.classList.remove(STYLES.selected);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.previousCloneNode = parentClone;\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.previousSelectedNode = node;\r\n\t\t},\r\n\t\tsetContentAssistMode: function(mode) {\r\n\t\t\tthis._contentAssistMode = mode;\r\n\t\t},\r\n\t\tshow: function() {\r\n\t\t\tvar proposals = this._contentAssistMode.getProposals();\r\n\t\t\tif (proposals.length === 0) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.innerHTML = \"\";\r\n\t\t\t\tfor (var i = 0; i < proposals.length; i++) {\r\n\t\t\t\t\tthis.createDiv(proposals[i], this.parentNode, i);\r\n\t\t\t\t}\r\n\t\t\t\tthis.position();\r\n\t\t\t\tthis.parentNode.onclick = this.onClick.bind(this);\r\n\t\t\t\tthis.isShowing = true;\r\n\t\t\t\t\r\n\t\t\t\tthis._contentAssistMode._showTooltip(false);\r\n\t\t\t\t\r\n\t\t\t\tif(this._useResizeTimer) {\r\n\t\t\t\t\tthis._startResizeTimer();\r\n\t\t\t\t} else if(this._mutationObserver){\r\n\t\t\t\t\tthis._mutationObserver.observe(this.parentNode, {attributes: true});\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.textViewListenerAdded) {\r\n\t\t\t\t\tthis.textView.addEventListener(\"MouseDown\", this.textViewListener.onMouseDown); //$NON-NLS-0$\r\n\t\t\t\t\tthis.textViewListenerAdded = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tif(this.parentNode.ownerDocument.activeElement === this.parentNode) {\r\n\t\t\t\tthis.textView.focus();\r\n\t\t\t}\r\n\t\t\tthis.parentNode.style.display = \"none\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.onclick = null;\r\n\t\t\tthis.isShowing = false;\r\n\t\t\t\r\n\t\t\tif(this._useResizeTimer) {\r\n\t\t\t\tthis._stopResizeTimer();\r\n\t\t\t} else if(this._mutationObserver){\r\n\t\t\t\tthis._mutationObserver.disconnect();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._contentAssistMode._hideTooltip();\r\n\t\t\t\r\n\t\t\tif (this.textViewListenerAdded) {\r\n\t\t\t\tthis.textView.removeEventListener(\"MouseDown\", this.textViewListener.onMouseDown); //$NON-NLS-0$\r\n\t\t\t\tthis.textViewListenerAdded = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.previousSelectedNode) {\r\n\t\t\t\tthis.previousSelectedNode = null;\r\n\t\t\t\tif (this.previousCloneNode) {\r\n\t\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tposition: function() {\r\n\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\tvar offset;\r\n\t\t\tvar view = this.textView;\r\n\t\t\tif (contentAssist.offset !== undefined) {\r\n\t\t\t\toffset = contentAssist.offset;\r\n\t\t\t\tvar model = view.getModel();\r\n\t\t\t\tif (model.getBaseModel) {\r\n\t\t\t\t\toffset = model.mapOffset(offset, true);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toffset = this.textView.getCaretOffset();\r\n\t\t\t}\r\n\t\t\tvar caretLocation = view.getLocationAtOffset(offset);\r\n\t\t\tcaretLocation.y += view.getLineHeight();\r\n\t\t\tthis.textView.convert(caretLocation, \"document\", \"page\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.position = \"fixed\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.left = caretLocation.x + \"px\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.top = caretLocation.y + \"px\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.display = \"block\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.scrollTop = 0;\r\n\r\n\t\t\t// Make sure that the panel is never outside the viewport\r\n\t\t\tvar document = this.parentNode.ownerDocument;\r\n\t\t\tvar viewportWidth = document.documentElement.clientWidth,\r\n\t\t\t    viewportHeight =  document.documentElement.clientHeight;\r\n\t\t\t    \r\n\t\t\tvar spaceBelow = viewportHeight - caretLocation.y;\t\t\t    \r\n\t\t\tif (this.parentNode.offsetHeight > spaceBelow) {\r\n\t\t\t\t// Check if div is too large to fit above\r\n\t\t\t\tvar spaceAbove = caretLocation.y - this.textView.getLineHeight();\r\n\t\t\t\tif (this.parentNode.offsetHeight > spaceAbove){\r\n\t\t\t\t\t// Squeeze the div into the larger area\r\n\t\t\t\t\tif (spaceBelow > spaceAbove) {\r\n\t\t\t\t\t\tthis.parentNode.style.maxHeight = spaceBelow + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.parentNode.style.maxHeight = spaceAbove + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t\tthis.parentNode.style.top = \"0\"; //$NON-NLS-0$\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Put the div above the line\r\n\t\t\t\t\tthis.parentNode.style.top = (caretLocation.y - this.parentNode.offsetHeight - this.textView.getLineHeight()) + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\tthis.parentNode.style.maxHeight = spaceAbove + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.style.maxHeight = spaceBelow + \"px\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (caretLocation.x + this.parentNode.offsetWidth > viewportWidth) {\r\n\t\t\t\tvar leftSide = viewportWidth - this.parentNode.offsetWidth;\r\n\t\t\t\tif (leftSide < 0) {\r\n\t\t\t\t\tleftSide = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.parentNode.style.left = leftSide + \"px\"; //$NON-NLS-0$\r\n\t\t\t\tthis.parentNode.style.maxWidth = viewportWidth - leftSide;\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.style.maxWidth = viewportWidth + caretLocation.x + \"px\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeCloneNode: function(){\r\n\t\t\tif (this.parentNode.parentNode.contains(this.previousCloneNode)) {\r\n\t\t\t\tthis.parentNode.parentNode.removeChild(this.previousCloneNode);\t\r\n\t\t\t}\r\n\t\t\tthis.previousCloneNode = null;\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tContentAssist: ContentAssist,\r\n\t\tContentAssistMode: ContentAssistMode,\r\n\t\tContentAssistWidget: ContentAssistWidget\r\n\t};\r\n});\r\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n *               Alex Lakatos - fix for bug#369781\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textStyler\", ['orion/editor/annotations', 'orion/editor/eventTarget', 'orion/metrics'], //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\tfunction(mAnnotations, mEventTarget, mMetrics) {\n\n\t/*\n\t * Throughout textStyler \"block\" refers to a potentially multi-line token.\n\t * Typical examples are multi-line comments and multi-line strings.\n\t */\n\n\tvar binarySearch = function(array, offset, inclusive, low, high) {\n\t\tvar index;\n\t\tif (low === undefined) { low = -1; }\n\t\tif (high === undefined) { high = array.length; }\n\t\twhile (high - low > 1) {\n\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\tif (offset <= array[index].start) {\n\t\t\t\thigh = index;\n\t\t\t} else if (inclusive && offset < array[index].end) {\n\t\t\t\thigh = index;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tlow = index;\n\t\t\t}\n\t\t}\n\t\treturn high;\n\t};\n\t\n\tfunction copy(object) {\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\n\tvar createPatternBasedAdapter = function(grammars, rootId, contentType) {\n\t\treturn new PatternBasedAdapter(grammars, rootId, contentType);\n\t};\n\n\tfunction PatternBasedAdapter(grammars, rootId, contentType) {\n\t\tthis._patternManager = new PatternManager(grammars, rootId);\n\t\tthis._contentType = contentType;\n\t}\n\tPatternBasedAdapter.prototype = {\n\t\tblockSpansBeyondEnd: function(block) {\n\t\t\treturn block.pattern.regexEnd === this._eolRegex;\n\t\t},\n\t\tcomputeBlocks: function(model, text, block, offset, startIndex, endIndex, maxBlockCount) {\n\t\t\tif (!text) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tvar results = [];\n\t\t\tvar matches = [];\n\t\t\tvar result;\n\t\t\tstartIndex = startIndex || 0;\n\t\t\tendIndex = endIndex || Infinity;\n\t\t\tmaxBlockCount = maxBlockCount || Infinity;\n\t\t\tblock.blockPatterns.forEach(function(current) {\n\t\t\t\tresult = this._findMatch(current.regexBegin || current.regex, text, startIndex);\n\t\t\t\tif (result) {\n\t\t\t\t\tmatches.push({result: result, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tif (!matches.length) {\n\t\t\t\treturn results;\n\t\t\t}\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\tif (a.result.index < b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index > b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t});\n\n\t\t\tvar index = 0;\n\t\t\twhile (matches.length > 0) {\n\t\t\t\tvar current = matches[0];\n\t\t\t\tmatches.splice(0,1);\n\n\t\t\t\tif (endIndex < current.result.index) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (current.result.index < index) {\n\t\t\t\t\t/* processing of another match has moved index beyond this match */\n\t\t\t\t\tthis._updateMatch(current, text, matches, index, endIndex);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar start = offset + current.result.index;\n\t\t\t\tvar contentStart = current.result.index;\n\t\t\t\tvar resultEnd = null;\n\n\t\t\t\tvar endRegex = current.pattern.regexEnd;\n\t\t\t\tif (!endRegex) {\n\t\t\t\t\tresultEnd = this.createBlock(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\t\tend: start + current.result[0].length,\n\t\t\t\t\t\t\tcontentStart: start,\n\t\t\t\t\t\t\tcontentEnd: start + current.result[0].length\n\t\t\t\t\t\t},\n\t\t\t\t\t\tblock.styler,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tblock,\n\t\t\t\t\t\tcurrent.pattern);\n\t\t\t\t} else {\n\t\t\t\t\tcontentStart += current.result[0].length;\n\t\t\t\t\tvar testPattern = current.pattern;\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end regex contains a capture reference (eg.- \"\\1\") then substitute\n\t\t\t\t\t * the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tvar resolvedEndRegex = this._substituteCaptureValues(endRegex, current.result);\n\t\t\t\t\tif (resolvedEndRegex !== endRegex) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * A substitution was made, so make a copy of the test pattern and set its\n\t\t\t\t\t\t * end regex to the resolved one.  This will cause end-match detection to be\n\t\t\t\t\t\t * performed with this concrete end regex value, but the original pattern\n\t\t\t\t\t\t * definition containing the capture reference will not be affected.\n\t\t\t\t\t\t */\n\t\t\t\t\t\ttestPattern = {\n\t\t\t\t\t\t\tpattern: testPattern.pattern,\n\t\t\t\t\t\t\tregexBegin: testPattern.regexBegin,\n\t\t\t\t\t\t\tregexEnd: resolvedEndRegex\n\t\t\t\t\t\t};\n\t\t\t\t\t\tendRegex = resolvedEndRegex;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar lastIndex = contentStart;\n\t\t\t\t\twhile (!resultEnd) {\n\t\t\t\t\t\tresult = this._findMatch(endRegex, text, lastIndex);\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\t\tresult = this._eolRegex.exec(text);\n\t\t\t\t\t\t\ttestPattern = {\n\t\t\t\t\t\t\t\tpattern: testPattern.pattern,\n\t\t\t\t\t\t\t\tregexBegin: testPattern.regexBegin,\n\t\t\t\t\t\t\t\tregexEnd: this._eolRegex\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar testBlock = this.createBlock(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\t\t\tend: offset + result.index + result[0].length,\n\t\t\t\t\t\t\t\tcontentStart: offset + contentStart,\n\t\t\t\t\t\t\t\tcontentEnd: offset + result.index\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tblock.styler,\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\ttestPattern);\n\t\t\t\t\t\tvar subBlocks = testBlock.getBlocks();\n\t\t\t\t\t\tif (!subBlocks.length || subBlocks[subBlocks.length - 1].end <= (result.index + offset)) {\n\t\t\t\t\t\t\tresultEnd = testBlock;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastIndex = result.index + result[0].length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresults.push(resultEnd);\n\t\t\t\tif (results.length === maxBlockCount || endIndex <= resultEnd.end) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tindex = resultEnd.end - offset;\n\t\t\t\tthis._updateMatch(current, text, matches, index, endIndex);\n\t\t\t}\n\t\t\treturn results;\n\t\t},\n\t\tcomputeStyle: function(block, model, offset) {\n\t\t\tif (!block.pattern) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar fullBlock = {\n\t\t\t\tstart: block.start,\n\t\t\t\tend: block.end,\n\t\t\t\tstyle: block.pattern.pattern.name\n\t\t\t};\n\t\t\tif (block.contentStart <= offset && offset < block.contentEnd) {\n\t\t\t\tif (block.pattern.pattern.contentName) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstart: block.contentStart,\n\t\t\t\t\t\tend: block.contentEnd,\n\t\t\t\t\t\tstyle: block.pattern.pattern.contentName\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn fullBlock;\n\t\t\t}\n\n\t\t\tvar regex, captures, testString, index;\n\t\t\tif (offset < block.contentStart) {\n\t\t\t\tcaptures = block.pattern.pattern.beginCaptures || block.pattern.pattern.captures;\n\t\t\t\tif (!captures) {\n\t\t\t\t\treturn fullBlock;\n\t\t\t\t}\n\t\t\t\tregex = block.pattern.regexBegin;\n\t\t\t\ttestString = model.getText(block.start, block.contentStart);\n\t\t\t\tindex = block.start;\n\t\t\t} else {\n\t\t\t\tcaptures = block.pattern.pattern.endCaptures || block.pattern.pattern.captures;\n\t\t\t\tif (!captures) {\n\t\t\t\t\treturn fullBlock;\n\t\t\t\t}\n\t\t\t\tregex = block.pattern.regexEnd;\n\t\t\t\ttestString = model.getText(block.contentEnd, block.end);\n\t\t\t\tindex = block.contentEnd;\n\t\t\t}\n\n\t\t\tregex.lastIndex = 0;\n\t\t\tvar result = regex.exec(testString);\n\t\t\tif (result) {\n\t\t\t\tvar styles = [];\n\t\t\t\tthis._getCaptureStyles(result, captures, index, styles);\n\t\t\t\tvar style = styles[binarySearch(styles, offset, true)];\n\t\t\t\tif (style && style.start <= offset && offset < style.end) {\n\t\t\t\t\treturn style;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn fullBlock;\n\t\t},\n\t\tcreateBlock: function(bounds, styler, model, parent, data) {\n\t\t\t/* for pattern-based matching data is a pattern */\n\t\t\treturn new Block(\n\t\t\t\tbounds,\n\t\t\t\tdata ? data.pattern.name : null,\n\t\t\t\tdata ? data.pattern.id : null,\n\t\t\t\tstyler,\n\t\t\t\tmodel,\n\t\t\t\tparent,\n\t\t\t\tfunction(newBlock) {\n\t\t\t\t\tnewBlock.pattern = data;\n\t\t\t\t\tnewBlock.linePatterns = [];\n\t\t\t\t\tnewBlock.blockPatterns = [];\n\t\t\t\t\tnewBlock.enclosurePatterns = {};\n\t\t\t\t\tthis._initPatterns(this._patternManager, newBlock);\n\t\t\t\t}.bind(this));\n\t\t},\n\t\tgetBlockCommentDelimiters: function(index) {\n\t\t\tvar languageBlock = this._getLanguageBlock(index);\n\t\t\tvar blockPatterns = languageBlock.blockPatterns;\n\t\t\tif (blockPatterns) {\n\t\t\t\tvar COMMENT_BLOCK = \"comment.block\"; //$NON-NLS-0$\n\t\t\t\tfor (var i = 0; i < blockPatterns.length; i++) {\n\t\t\t\t\tvar current = blockPatterns[i].pattern;\n\t\t\t\t\tvar name = current.name || current.contentName;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_BLOCK) !== -1) {\n\t\t\t\t\t\tif (current.begin && current.end && current.begin.literal && current.end.literal) {\n\t\t\t\t\t\t\treturn [current.begin.literal, current.end.literal];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [\"\", \"\"];\n\t\t},\n\t\tgetBlockContentStyleName: function(block) {\n\t\t\treturn block.pattern.pattern.contentName || block.pattern.pattern.name;\n\t\t},\n\t\tgetBlockEndStyle: function(block, text, endIndex, _styles) {\n\t\t\t/* pattern-defined blocks specify an end style by either a capture or name */\n\t\t\tvar result;\n\t\t\tif (block.pattern.regexEnd) {\n\t\t\t\tresult = this._findMatch(block.pattern.regexEnd, text, 0);\n\t\t\t\tif (result) {\n\t\t\t\t\t/* the end match is still valid */\n\t\t\t\t\tvar captures = block.pattern.pattern.endCaptures || block.pattern.pattern.captures;\n\t\t\t\t\tif (captures) {\n\t\t\t\t\t\tthis._getCaptureStyles(result, captures, endIndex - result[0].length, _styles);\n\t\t\t\t\t} else if (block.pattern.pattern.name) {\n\t\t\t\t\t\t_styles.push({start: endIndex - result[0].length, end: endIndex, style: block.pattern.pattern.name});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result ? result[0] : null;\n\t\t},\n\t\tgetBlockFoldBounds: function(block, model) {\n\t\t\treturn {start: block.start, end: block.end};\n\t\t},\n\t\tgetBlockStartStyle: function(block, text, index, _styles) {\n\t\t\t/* pattern-defined blocks specify a start style by either a capture or name */\n\t\t\tvar result;\n\t\t\tif (block.pattern.regexBegin) {\n\t\t\t\tresult = this._findMatch(block.pattern.regexBegin, text, 0);\n\t\t\t\tif (result) {\n\t\t\t\t\t/* the begin match is still valid */\n\t\t\t\t\tvar captures = block.pattern.pattern.beginCaptures || block.pattern.pattern.captures;\n\t\t\t\t\tif (captures) {\n\t\t\t\t\t\tthis._getCaptureStyles(result, captures, index, _styles);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_styles.push({start: index, end: index + result[0].length, style: block.pattern.pattern.name});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result ? result[0] : null;\n\t\t},\n\t\tgetBracketMatch: function(block, text) {\n\t\t\tvar match;\n\t\t\tvar keys = Object.keys(block.enclosurePatterns);\n\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\tvar current = block.enclosurePatterns[keys[i]];\n\t\t\t\tvar result = this._findMatch(current.regex, text, 0);\n\t\t\t\tif (result && result.index === 0) {\n\t\t\t\t\tmatch = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!match) { return null; }\n\n\t\t\tvar closingName;\n\t\t\tvar atStart = false;\n\t\t\tif (match.pattern.name.indexOf(this._PUNCTUATION_SECTION_BEGIN) !== -1) {\n\t\t\t\tatStart = true;\n\t\t\t\tclosingName = match.pattern.name.replace(this._PUNCTUATION_SECTION_BEGIN, this._PUNCTUATION_SECTION_END);\n\t\t\t} else {\n\t\t\t\tclosingName = match.pattern.name.replace(this._PUNCTUATION_SECTION_END, this._PUNCTUATION_SECTION_BEGIN);\n\t\t\t}\n\t\t\tvar closingBracket = block.enclosurePatterns[closingName];\n\t\t\tif (!closingBracket) { return null; }\n\n\t\t\treturn {\n\t\t\t\tbeginName: match.pattern.name,\n\t\t\t\tendName: closingName,\n\t\t\t\tatStart: atStart\n\t\t\t};\n\t\t},\n\t\tgetContentType: function() {\n\t\t\treturn this._contentType;\n\t\t},\n\t\tgetLineCommentDelimiter: function(index) {\n\t\t\tvar COMMENT_LINE = \"comment.line\"; //$NON-NLS-0$\n\t\t\tvar languageBlock = this._getLanguageBlock(index);\n\t\t\tvar linePatterns = languageBlock.linePatterns;\n\t\t\tif (linePatterns) {\n\t\t\t\tfor (var i = 0; i < linePatterns.length; i++) {\n\t\t\t\t\tvar current = linePatterns[i].pattern;\n\t\t\t\t\tvar name = current.name;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_LINE) !== -1) {\n\t\t\t\t\t\tif (current.match && current.match.literal) {\n\t\t\t\t\t\t\treturn current.match.literal;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar blockPatterns = languageBlock.blockPatterns;\n\t\t\tif (blockPatterns) {\n\t\t\t\tfor (i = 0; i < blockPatterns.length; i++) {\n\t\t\t\t\tcurrent = blockPatterns[i].pattern;\n\t\t\t\t\tname = current.name || current.contentName;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_LINE) !== -1) {\n\t\t\t\t\t\tif (current.begin && current.begin.literal) {\n\t\t\t\t\t\t\treturn current.begin.literal;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\t\tparse: function(text, offset, startIndex, block, _styles, ignoreCaptures) {\n\t\t\tif (!text) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar patterns = block.linePatterns;\n\t\t\tif (!patterns) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar matches = [];\n\t\t\tvar result;\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar regex = current.regex || current.regexBegin;\n\t\t\t\tregex.oldLastIndex = regex.lastIndex;\n\t\t\t\tresult = this._findMatch(regex, text, startIndex);\n\t\t\t\tif (result) {\n\t\t\t\t\tmatches.push({result: result, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\tif (a.result.index < b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index > b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t});\n\n\t\t\tvar index = startIndex;\n\t\t\twhile (matches.length > 0) {\n\t\t\t\tvar current = matches[0];\n\t\t\t\tmatches.splice(0,1);\n\n\t\t\t\tif (current.result.index < index) {\n\t\t\t\t\t/* processing of another match has moved index beyond this match */\n\t\t\t\t\tthis._updateMatch(current, text, matches, index);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/* apply the style */\n\t\t\t\tvar start = current.result.index;\n\t\t\t\tvar end;\n\t\t\t\tvar substyles = [];\n\t\t\t\tif (current.pattern.regex) {\t/* line pattern defined by a \"match\" */\n\t\t\t\t\tresult = current.result;\n\t\t\t\t\tend = start + result[0].length;\n\t\t\t\t\tvar tokenStyle = {start: offset + start, end: offset + end, style: current.pattern.pattern.name};\n\t\t\t\t\tif (!ignoreCaptures) {\n\t\t\t\t\t\tif (current.pattern.pattern.captures) {\n\t\t\t\t\t\t\tthis._getCaptureStyles(result, current.pattern.pattern.captures, offset + start, substyles);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsubstyles.sort(function(a,b) {\n\t\t\t\t\t\t\tif (a.start < b.start) {\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (a.start > b.start) {\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor (var j = 0; j < substyles.length - 1; j++) {\n\t\t\t\t\t\t\tif (substyles[j + 1].start < substyles[j].end) {\n\t\t\t\t\t\t\t\tvar newStyle = {start: substyles[j + 1].end, end: substyles[j].end, style: substyles[j].style};\n\t\t\t\t\t\t\t\tsubstyles[j].end = substyles[j + 1].start;\n\t\t\t\t\t\t\t\tsubstyles.splice(j + 2, 0, newStyle);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis._mergeStyles(tokenStyle, substyles, _styles);\n\t\t\t\t} else {\t/* pattern defined by a \"begin/end\" pair */\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end match contains a capture reference (eg.- \"\\1\") then update\n\t\t\t\t\t * its regex with the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tvar endRegex = current.pattern.regexEnd;\n\t\t\t\t\tendRegex = this._substituteCaptureValues(endRegex, current.result);\n\n\t\t\t\t\tresult = this._findMatch(endRegex, text, current.result.index + current.result[0].length);\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\tresult = this._eolRegex.exec(text);\n\t\t\t\t\t}\n\t\t\t\t\tend = result.index + result[0].length;\n\t\t\t\t\t_styles.push({start: offset + start, end: offset + end, style: current.pattern.pattern.name});\n\t\t\t\t}\n\t\t\t\tindex = result.index + result[0].length;\n\t\t\t\tthis._updateMatch(current, text, matches, index);\n\t\t\t}\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar regex = current.regex || current.regexBegin;\n\t\t\t\tregex.lastIndex = regex.oldLastIndex;\n\t\t\t});\n\t\t},\n\t\tsetStyler: function(styler) {\n\t\t\tthis._styler = styler;\n\t\t},\n\t\tverifyBlock: function(baseModel, text, ancestorBlock, changeCount) {\n\t\t\tvar result = null;\n\t\t\tvar matches = [];\n\t\t\tvar match;\n\t\t\tvar parentBlock = ancestorBlock.parent;\n\t\t\tparentBlock.blockPatterns.forEach(function(current) {\n\t\t\t\tmatch = this._findMatch(current.regexBegin || current.regex, text, 0);\n\t\t\t\tif (match) {\n\t\t\t\t\tmatches.push({result: match, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\t/* ensure that matches at index 0 make it to the front, other matches do not matter */\n\t\t\t\tif (!a.result.index && b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index && !b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (!a.result.index && !b.result.index) {\n\t\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t\tif (!matches.length || matches[0].result.index !== 0 || matches[0].pattern.pattern.id !== ancestorBlock.pattern.pattern.id) {\n\t\t\t\tresult = false;\n\t\t\t} else {\n\t\t\t\t/* the block start appears to be unchanged, now verify that the block end is unchanged */\n\t\t\t\tmatch = matches[0];\n\t\t\t\tvar endRegex = match.pattern.regexEnd;\n\t\t\t\tif (!endRegex) {\n\t\t\t\t\t/* single-match block, just verify its length */\n\t\t\t\t\tresult = ancestorBlock.start + match.result[0].length === ancestorBlock.end + changeCount;\n\t\t\t\t} else {\n\t\t\t\t\t/* begin/end-match block */\n\n\t\t\t\t\t /*\n\t\t\t\t\t  * Determine whether an earlier match of the block's end pattern has been introduced.\n\t\t\t\t\t  * Verifying that this has NOT happened (the most typical case) can be quickly done by\n\t\t\t\t\t  * verifying that the first occurrence of its end pattern is still at its former location.\n\t\t\t\t\t  * However if a match is found prior to this then the blocks preceding it must be computed\n\t\t\t\t\t  * to verify that it is a valid end match (ie.- it is not contained within another block).\n\t\t\t\t \t  */\n\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end regex contains a capture reference (eg.- \"\\1\") then substitute\n\t\t\t\t\t * the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tendRegex = this._substituteCaptureValues(endRegex, match.result);\n\n\t\t\t\t\tvar searchStartIndex = match.result[0].length;\n\t\t\t\t\tvar currentMatch = this._findMatch(endRegex, text, searchStartIndex);\n\t\t\t\t\twhile (result === null && currentMatch && ancestorBlock.start + currentMatch.index !== ancestorBlock.contentEnd + changeCount) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * A match was found preceeding the former end match, so now compute\n\t\t\t\t\t\t * blocks to determine whether it is in fact a valid new end match.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar blocks = this.computeBlocks(baseModel, text, ancestorBlock, ancestorBlock.start, searchStartIndex, currentMatch.index + 1, null);\n\t\t\t\t\t\tif (!blocks.length || blocks[blocks.length - 1].end <= ancestorBlock.start + currentMatch.index) {\n\t\t\t\t\t\t\t/* the match is valid, so the attempt to use ancestorBlock as-is fails */\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t/* the match is not valid, so search for the next potential end match */\n\t\t\t\t\t\t\tif (!blocks.length) {\n\t\t\t\t\t\t\t\tcurrentMatch = null;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearchStartIndex = blocks[blocks.length - 1].end - ancestorBlock.start;\n\t\t\t\t\t\t\t\tcurrentMatch = this._findMatch(endRegex, text, searchStartIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!currentMatch) {\n\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\tcurrentMatch = this._eolRegex.exec(text);\n\t\t\t\t\t\tresult = ancestorBlock.start + currentMatch.index === ancestorBlock.end + changeCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result !== null ? result : true;\n\t\t},\n\n\t\t/** @private */\n\n\t\t_findMatch: function(regex, text, startIndex, testBeforeMatch) {\n\t\t\t/*\n\t\t\t * testBeforeMatch provides a potential optimization for callers that do not strongly expect to find\n\t\t\t * a match.  If this argument is defined then test() is initially called on the regex, which executes\n\t\t\t * significantly faster than exec().  If a match is found then the regex's lastIndex is reverted to\n\t\t\t * its pre-test() value, and exec() is then invoked on it in order to get the match details.\n\t\t\t */\n\n\t\t\tvar index = startIndex;\n\t\t\tvar initialLastIndex = regex.lastIndex;\n\t\t\tthis._linebreakRegex.lastIndex = startIndex;\n\n\t\t\tvar currentLine = this._linebreakRegex.exec(text);\n\t\t\t/*\n\t\t\t * Processing of the first line is treated specially, as it may not start at the beginning of a logical line, but\n\t\t\t * regex's may be dependent on matching '^'.  To resolve this, compute the full line corresponding to the start\n\t\t\t * of the text, even if it begins prior to startIndex, and adjust the regex's lastIndex accordingly to begin searching\n\t\t\t * for matches at the correct location.\n\t\t\t */\n\t\t\tvar lineString, indexAdjustment;\n\t\t\tregex.lastIndex = 0;\n\t\t\tif (currentLine) {\n\t\t\t\tvar lineStart = currentLine.index;\n\t\t\t\twhile (0 <= --lineStart) {\n\t\t\t\t\tvar char = text.charAt(lineStart);\n\t\t\t\t\tif (char === this._NEWLINE || char === this._CR) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlineString = text.substring(lineStart + 1, currentLine.index + currentLine[1].length);\n\t\t\t\tregex.lastIndex = indexAdjustment = currentLine.index - lineStart - 1;\n\t\t\t}\n\t\t\twhile (currentLine && currentLine.index < text.length) {\n\t\t\t\tvar result;\n\t\t\t\tif (testBeforeMatch) {\n\t\t\t\t\tvar revertIndex = regex.lastIndex;\n\t\t\t\t\tif (regex.test(lineString)) {\n\t\t\t\t\t\tregex.lastIndex = revertIndex;\n\t\t\t\t\t\tresult = regex.exec(lineString);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = regex.exec(lineString);\n\t\t\t\t}\n\t\t\t\tif (result) {\n\t\t\t\t\tresult.index += index;\n\t\t\t\t\tresult.index -= indexAdjustment;\n\t\t\t\t\tregex.lastIndex = initialLastIndex;\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\tindexAdjustment = 0;\n\t\t\t\tindex += currentLine[0].length;\n\t\t\t\tcurrentLine = this._linebreakRegex.exec(text);\n\t\t\t\tif (currentLine) {\n\t\t\t\t\tlineString = currentLine[1];\n\t\t\t\t\tregex.lastIndex = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tregex.lastIndex = initialLastIndex;\n\t\t\treturn null;\n\t\t},\n\t\t_getCaptureStyles: function(result, captures, offset, _styles) {\n\t\t\tif (captures[0]) {\n\t\t\t\t/* capture index 0 is the full result */\n\t\t\t\t_styles.push({start: offset, end: offset + result[0].length, style: captures[0].name});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar stringIndex = 0;\n\t\t\tfor (var i = 1; i < result.length; i++) {\n\t\t\t\tif (result[i]) {\n\t\t\t\t\tvar capture = captures[i];\n\t\t\t\t\tif (capture) {\n\t\t\t\t\t\tvar styleStart = offset + stringIndex;\n\t\t\t\t\t\t_styles.push({start: styleStart, end: styleStart + result[i].length, style: capture.name});\n\t\t\t\t\t}\n\t\t\t\t\tstringIndex += result[i].length;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_getLanguageBlock: function(index) {\n\t\t\t/* Returns the parent block that dictates the language in effect at index */\n\t\t\tvar block = this._styler.getBlockAtIndex(index);\n\t\t\tvar embeddedNameRegex = /^source\\..+\\.embedded/;\n\t\t\twhile (block) {\n\t\t\t\tif (block.pattern) {\n\t\t\t\t\tvar pattern = block.pattern.pattern;\n\t\t\t\t\tif (embeddedNameRegex.test(pattern.name || pattern.contentName)) {\n\t\t\t\t\t\treturn block;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tblock = block.parent;\n\t\t\t}\n\t\t\treturn this._styler.getRootBlock();\n\t\t},\n\t\t_initPatterns: function(patternManager, block) {\n\t\t\tif (block.pattern && block.pattern.pattern.linePatterns) {\n\t\t\t\tblock.linePatterns = block.pattern.pattern.linePatterns;\n\t\t\t\tblock.blockPatterns = block.pattern.pattern.blockPatterns;\n\t\t\t\tblock.enclosurePatterns = block.pattern.pattern.enclosurePatterns;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar patterns = patternManager.getPatterns(block.pattern ? block.pattern.pattern : null);\n\t\t\tvar initRegex = function(match) {\n\t\t\t\tvar matchString = typeof(match) === \"string\" ? match : match.match;\n\t\t\t\tvar result = this._ignoreCaseRegex.exec(matchString);\n\t\t\t\tvar flags = this._FLAGS;\n\t\t\t\tif (result) {\n\t\t\t\t\tmatchString = matchString.substring(result[0].length);\n\t\t\t\t\tflags += \"i\";\n\t\t\t\t}\n\t\t\t\treturn new RegExp(matchString, flags);\n\t\t\t}.bind(this);\n\t\t\tvar lastBlock = -1;\n\t\t\tvar index = 0;\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar pattern;\n\t\t\t\tif (current.match && !current.begin && !current.end) {\n\t\t\t\t\tpattern = {regex: initRegex(current.match), pattern: current};\n\t\t\t\t\tblock.linePatterns.push(pattern);\n\t\t\t\t\tif (current.name && current.name.indexOf(\"punctuation.section\") === 0 && (current.name.indexOf(this._PUNCTUATION_SECTION_BEGIN) !== -1 || current.name.indexOf(this._PUNCTUATION_SECTION_END) !== -1)) { //$NON-NLS-0$\n\t\t\t\t\t\tblock.enclosurePatterns[current.name] = pattern;\n\t\t\t\t\t}\n\t\t\t\t} else if (!current.match && current.begin && current.end) {\n\t\t\t\t\tlastBlock = index;\n\t\t\t\t\tpattern = {regexBegin: initRegex(current.begin), regexEnd: initRegex(current.end), pattern: current};\n\t\t\t\t\tblock.linePatterns.push(pattern);\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t}.bind(this));\n\t\t\tblock.blockPatterns = block.linePatterns.slice(0, lastBlock + 1);\n\t\t\tif (block.pattern) {\n\t\t\t\tblock.pattern.pattern.enclosurePatterns = block.enclosurePatterns;\n\t\t\t\tblock.pattern.pattern.linePatterns = block.linePatterns;\n\t\t\t\tblock.pattern.pattern.blockPatterns = block.blockPatterns;\n\t\t\t}\n\t\t},\n\t\t_mergeStyles: function(fullStyle, substyles, resultStyles) {\n\t\t\tvar i = fullStyle.start;\n\t\t\tsubstyles.forEach(function(current) {\n\t\t\t\tif (i <= current.start) {\n\t\t\t\t\tresultStyles.push({start: i, end: current.start, style: fullStyle.style});\n\t\t\t\t}\n\t\t\t\tresultStyles.push(current);\n\t\t\t\ti = current.end;\n\t\t\t});\n\t\t\tif (i < fullStyle.end) {\n\t\t\t\tresultStyles.push({start: i, end: fullStyle.end, style: fullStyle.style});\n\t\t\t}\n\t\t},\n\t\t_substituteCaptureValues: function(regex, resolvedResult) {\n\t\t\tvar regexString = regex.toString();\n\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\tif (!this._captureReferenceRegex.test(regexString)) {\n\t\t\t\t/* nothing to do */\n\t\t\t\treturn regex;\n\t\t\t}\n\n\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\tvar result = this._captureReferenceRegex.exec(regexString);\n\t\t\twhile (result) {\n\t\t\t\tregexString = regexString.replace(result[0], resolvedResult[result[1]] || \"\");\n\t\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\t\tresult = this._captureReferenceRegex.exec(regexString);\n\t\t\t}\n\t\t\t/* return an updated regex, remove the leading '/' and trailing /FLAGS */\n\t\t\treturn new RegExp(regexString.substring(1, regexString.length - 1 - this._FLAGS.length), this._FLAGS);\n\t\t},\n\t\t_updateMatch: function(match, text, matches, minimumIndex, endIndex) {\n\t\t\tvar regEx = match.pattern.regex ? match.pattern.regex : match.pattern.regexBegin;\n\t\t\tendIndex = endIndex || Infinity;\n\t\t\tvar result = this._findMatch(regEx, text, minimumIndex, true);\n\t\t\tif (result && result.index < endIndex) {\n\t\t\t\tmatch.result = result;\n\t\t\t\tfor (var i = 0; i < matches.length; i++) {\n\t\t\t\t\tif (result.index < matches[i].result.index || (result.index === matches[i].result.index && match.pattern.pattern.index < matches[i].pattern.pattern.index)) {\n\t\t\t\t\t\tmatches.splice(i, 0, match);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmatches.push(match);\n\t\t\t}\n\t\t},\n\t\t_captureReferenceRegex: /\\\\(\\d)/g,\n\t\t_eolRegex: /$/,\n\t\t_ignoreCaseRegex: /^\\(\\?i\\)\\s*/,\n\t\t_linebreakRegex: /(.*)(?:[\\r\\n]|$)/g,\n\t\t_CR: \"\\r\", //$NON-NLS-0$\n\t\t_FLAGS: \"g\", //$NON-NLS-0$\n\t\t_NEWLINE: \"\\n\", //$NON-NLS-0$\n\t\t_PUNCTUATION_SECTION_BEGIN: \".begin\", //$NON-NLS-0$\n\t\t_PUNCTUATION_SECTION_END: \".end\" //$NON-NLS-0$\n\t};\n\n\tfunction PatternManager(grammars, rootId) {\n\t\tthis._unnamedCounter = 0;\n\t\tthis._patterns = [];\n\t\tthis._rootId = rootId;\n\t\tgrammars.forEach(function(grammar) {\n\t\t\tthis._addRepositoryPatterns(grammar.repository || {}, grammar.id);\n\t\t\tthis._addPatterns(grammar.patterns || [], grammar.id);\n\t\t}.bind(this));\n\t}\n\tPatternManager.prototype = {\n\t\tgetPatterns: function(pattern) {\n\t\t\tvar parentId;\n\t\t\tif (!pattern) {\n\t\t\t\tparentId = this._rootId + \"#\" + this._NO_ID;\n\t\t\t} else {\n\t\t\t\tif (typeof(pattern) === \"string\") { //$NON-NLS-0$\n\t\t\t\t\tparentId = pattern;\n\t\t\t\t} else {\n\t\t\t\t\tparentId = pattern.qualifiedId;\n\t\t\t\t}\n\t\t\t\tparentId += \"#\";\n\t\t\t}\n\t\t\t/* indexes on patterns are used to break ties when multiple patterns match the same start text */\n\t\t\tvar indexCounter = [0];\n\t\t\tvar resultObject = {};\n\t\t\tvar regEx = new RegExp(\"^\" + parentId + \"[^#]+$\"); //$NON-NLS-0$\n\t\t\tthis._patterns.forEach(function(current) {\n\t\t\t\tif (regEx.test(current.qualifiedId)) {\n\t\t\t\t\tif (current.include) {\n\t\t\t\t\t\tthis._processInclude(current, indexCounter, resultObject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar newPattern = copy(current);\n\t\t\t\t\t\tnewPattern.index = indexCounter[0]++;\n\t\t\t\t\t\tresultObject[current.qualifiedId] = newPattern;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\n\t\t\tvar result = [];\n\t\t\tvar keys = Object.keys(resultObject);\n\t\t\tkeys.forEach(function(current) {\n\t\t\t\tresult.push(resultObject[current]);\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\n\t\t/** @private */\n\n\t\t_addPattern: function(pattern, patternId, parentId) {\n\t\t\tpattern.parentId = parentId;\n\t\t\tpattern.id = patternId;\n\t\t\tpattern.qualifiedId = pattern.parentId + \"#\" + pattern.id;\n\t\t\tthis._patterns.push(pattern);\n\t\t\tif (pattern.patterns && !pattern.include) {\n\t\t\t\tthis._addPatterns(pattern.patterns, pattern.qualifiedId);\n\t\t\t}\n\t\t},\n\t\t_addPatterns: function(patterns, parentId) {\n\t\t\tpatterns.forEach(function(pattern) {\n\t\t\t\tthis._addPattern(pattern, this._NO_ID + this._unnamedCounter++, parentId);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_addRepositoryPatterns: function(repository, parentId) {\n\t\t\tvar keys = Object.keys(repository);\n\t\t\tkeys.forEach(function(key) {\n\t\t\t\tthis._addPattern(repository[key], key, parentId);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_processInclude: function(pattern, indexCounter, resultObject) {\n\t\t\tvar searchExp;\n\t\t\tvar index = pattern.include.indexOf(\"#\");\n\t\t\tif (index === 0) {\n\t\t\t\t/* inclusion of pattern from same grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.qualifiedId.substring(0, pattern.qualifiedId.indexOf(\"#\")) + pattern.include + \"$\");\n\t\t\t} else if (index === -1) {\n\t\t\t\t/* inclusion of whole grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.include + \"#\" + this._NO_ID + \"[^#]+$\");\n\t\t\t} else {\n\t\t\t\t/* inclusion of specific pattern from another grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.include + \"$\");\n\t\t\t}\n\t\t\tthis._patterns.forEach(function(current) {\n\t\t\t\tif (searchExp.test(current.qualifiedId)) {\n\t\t\t\t\tif (current.include) {\n\t\t\t\t\t\tthis._processInclude(current, indexCounter, resultObject);\n\t\t\t\t\t} else if (!resultObject[current.qualifiedId]) {\n\t\t\t\t\t\tvar newPattern = copy(current);\n\t\t\t\t\t\tnewPattern.index = indexCounter[0]++;\n\t\t\t\t\t\tresultObject[current.qualifiedId] = newPattern;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\t_NO_ID: \"NoID\"\t//$NON-NLS-0$\n\t};\n\n\tfunction Block(bounds, name, typeId, styler, model, parent, initFn) {\n\t\tthis.start = bounds.start;\n\t\tthis.end = bounds.end;\n\t\tthis.contentStart = bounds.contentStart;\n\t\tthis.contentEnd = bounds.contentEnd;\n\t\tthis.name = name;\n\t\tthis.typeId = typeId;\n\t\tthis.styler = styler;\n\t\tthis.parent = parent;\n\t\tif (initFn) {\n\t\t\tinitFn(this);\n\t\t}\n\t\tthis._subBlocks = styler.computeBlocks(model, model.getText(this.contentStart, this.end), this, this.contentStart, null, null, null);\n\t}\n\tBlock.prototype = {\n\t\tadjustBounds: function(index, value) {\n\t\t\tif (index < this.start) {\n\t\t\t\tthis.start += value;\n\t\t\t}\n\t\t\tif (index < this.contentStart) {\n\t\t\t\tthis.contentStart += value;\n\t\t\t}\n\t\t\tif (index <= this.end) {\n\t\t\t\tthis.end += value;\n\t\t\t}\n\t\t\tif (index <= this.contentEnd) {\n\t\t\t\tthis.contentEnd += value;\n\t\t\t}\n\t\t\tthis._subBlocks.forEach(function(current) {\n\t\t\t\tif (index <= current.end) {\n\t\t\t\t\tcurrent.adjustBounds(index, value);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetBlocks: function() {\n\t\t\treturn this._subBlocks;\n\t\t},\n\t\tgetBlockAtIndex: function(index) {\n\t\t\treturn binarySearch(this.getBlocks(), index, true);\n\t\t},\n\t\tisRenderingWhitespace: function() {\n\t\t\treturn this.styler._isRenderingWhitespace();\n\t\t}\n\t};\n\n\tfunction TextStylerAccessor(styler) {\n\t\tthis._styler = styler;\n\t}\n\tTextStylerAccessor.prototype = {\n\t\tgetBlockCommentDelimiters: function(offset) {\n\t\t\treturn this._styler.getBlockCommentDelimiters(offset);\n\t\t},\n\t\tgetLineCommentDelimiter: function(offset) {\n\t\t\treturn this._styler.getLineCommentDelimiter(offset);\n\t\t},\n\t\tgetStyles: function(offset) {\n\t\t\treturn this._styler.getStyles(offset);\n\t\t}\n\t};\n\n\tfunction TextStyler(view, annotationModel, stylerAdapter) {\t\t\n\t\tthis._whitespacesVisible = false;\n\t\tthis._highlightCaretLine = false;\n\t\tthis._foldingEnabled = true;\n\t\tthis._detectTasks = true;\n\t\tthis._annotationProviders = [];\n\t\tthis._view = view;\n\t\tthis._annotationModel = annotationModel;\n\t\tthis._stylerAdapter = stylerAdapter;\n\t\tthis._stylerAdapter.setStyler(this);\n\t\tthis._accessor = new TextStylerAccessor(this);\n\t\tthis._bracketAnnotations;\n\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onModelChanged(e);\n\t\t\t},\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t},\n\t\t\tonLineStyle: function(e) {\n\t\t\t\tself._onLineStyle(e);\n\t\t\t},\n\t\t\tonMouseDown: function(e) {\n\t\t\t\tself._onMouseDown(e);\n\t\t\t},\n\t\t\tonSelection: function(e) {\n\t\t\t\tself._onSelection(e);\n\t\t\t}\n\t\t};\n\t\tvar model = view.getModel();\n\t\tif (model.getBaseModel) {\n\t\t\tmodel = model.getBaseModel();\n\t\t}\n\t\tmodel.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\tview.addEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\tview.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\tview.addEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\n\t\tvar charCount = model.getCharCount();\n\t\tvar rootBounds = {start: 0, contentStart: 0, end: charCount, contentEnd: charCount};\n\t\tif (charCount >= 50000) {\n\t\t\tvar startTime = new Date().getTime();\n\t\t}\n\t\tthis._rootBlock = this._stylerAdapter.createBlock(rootBounds, this, model, null);\n\t\tif (startTime) {\n\t\t\tvar interval = new Date().getTime() - startTime;\n\t\t\tif (interval > 10) {\n\t\t\t\tmMetrics.logTiming(\n\t\t\t\t\t\"editor\", //$NON-NLS-0$\n\t\t\t\t\t\"styler compute blocks (ms/50000 chars)\", //$NON-NLS-0$\n\t\t\t\t\tinterval * 50000 / charCount,\n\t\t\t\t\tstylerAdapter.getContentType());\n\t\t\t}\n\t\t}\n\t\tif (annotationModel) {\n\t\t\tvar add = [];\n\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_FOLDING);\n\t\t\tthis._computeFolding(this._rootBlock.getBlocks(), view.getModel(), add);\n\t\t\tif (this._detectTasks) {\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_TASK);\n\t\t\t\tthis._computeTasks(this._rootBlock, model, add);\n\t\t\t}\n\t\t\tannotationModel.replaceAnnotations([], add);\n\t\t}\n\t\tview.redrawLines();\n\t}\n\tTextStyler.prototype = {\n\t\taddAnnotationProvider: function(value) {\n\t\t\tif (typeof value === \"function\") { //$NON-NLS-0$\n\t\t\t\tthis._annotationProviders.push(value);\n\t\t\t}\n\t\t},\n\t\tcomputeBlocks: function(model, text, block, offset, startIndex, endIndex, maxBlockCount) {\n\t\t\treturn this._stylerAdapter.computeBlocks(model, text, block, offset, startIndex, endIndex, maxBlockCount);\n\t\t},\n\t\tdestroy: function() {\n\t\t\tif (this._view) {\n\t\t\t\tvar model = this._view.getModel();\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmodel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tmodel.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\t\t\tthis._view = null;\n\t\t\t}\n\t\t},\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\tgetBlockAtIndex: function(index) {\n\t\t\treturn this._findBlock(this._rootBlock, index);\n\t\t},\n\t\tgetBlockCommentDelimiters: function(index) {\n\t\t\treturn this._stylerAdapter.getBlockCommentDelimiters(index);\n\t\t},\n\t\tgetLineCommentDelimiter: function(index) {\n\t\t\treturn this._stylerAdapter.getLineCommentDelimiter(index);\n\t\t},\n\t\tgetRootBlock: function() {\n\t\t\treturn this._rootBlock;\n\t\t},\n\t\tgetStyleAccessor: function() {\n\t\t\treturn this._accessor;\n\t\t},\n\t\tgetStyles: function(offset) {\n\t\t\tvar result = [];\n\t\t\tvar model = this._view.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\tvar block = this._findBlock(this._rootBlock, offset);\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar styles = [];\n\t\t\tthis._stylerAdapter.parse(lineText, model.getLineStart(lineIndex), 0, block, styles);\n\t\t\tvar style = styles[binarySearch(styles, offset, true)];\n\t\t\tif (style && style.start <= offset && offset < style.end) {\n\t\t\t\tresult.push(style);\n\t\t\t}\n\t\t\twhile (block) {\n\t\t\t\tstyle = this._stylerAdapter.computeStyle(block, model, offset);\n\t\t\t\tif (style) {\n\t\t\t\t\tresult.splice(0, 0, style);\n\t\t\t\t}\n\t\t\t\tblock = block.parent;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tgetTextModel: function() {\n\t\t\tvar model = this._view.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model;\n\t\t},\n\t\tremoveAnnotationProvider: function(value) {\n\t\t\tif (typeof value !== \"function\") { //$NON-NLS-0$\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar index = this._annotationProviders.indexOf(value);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis._annotationProviders.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tsetDetectHyperlinks: function() {\n\t\t},\n\t\tsetDetectTasks: function(enabled) {\n\t\t\tthis._detectTasks = enabled;\n\t\t},\n\t\tsetFoldingEnabled: function(enabled) {\n\t\t\tthis._foldingEnabled = enabled;\n\t\t},\n\t\tsetHighlightCaretLine: function(highlight) {\n\t\t\tthis._highlightCaretLine = highlight;\n\t\t},\n\t\tsetWhitespacesVisible: function(visible, redraw) {\n\t\t\tif (this._whitespacesVisible === visible) { return; }\n\t\t\tthis._whitespacesVisible = visible;\n\t\t\tif (redraw) {\n\t\t\t\tthis._view.redraw();\n\t\t\t}\n\t\t},\n\n\t\t/** @private */\n\n\t\t_computeFolding: function(blocks, viewModel, _add) {\n\t\t\tif (!viewModel.getBaseModel) { return; }\n\t\t\tvar baseModel = viewModel.getBaseModel();\n\t\t\tblocks.forEach(function(block) {\n\t\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\t\tvar annotation = this._createFoldingAnnotation(viewModel, baseModel, foldBounds.start, foldBounds.end);\n\t\t\t\tif (annotation) {\n\t\t\t\t\t_add.push(annotation);\n\t\t\t\t}\n\t\t\t\tthis._computeFolding(block.getBlocks(), viewModel, _add);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_computeTasks: function(block, baseModel, annotations, start, end) {\n\t\t\tstart = start || block.start;\n\t\t\tend = end || block.end;\n\t\t\tif (block.start <= end && start <= block.end) {\n\t\t\t\tif (!this._annotationModel) { return; }\n\n\t\t\t\tvar annotationType = mAnnotations.AnnotationType.ANNOTATION_TASK;\n\t\t\t\tif (block.name && block.name.indexOf(\"comment\") === 0) {\n\t\t\t\t\tvar substyles = [];\n\t\t\t\t\tvar lineIndex = baseModel.getLineAtOffset(block.contentStart);\n\t\t\t\t\tvar lineStart = baseModel.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(baseModel.getText(lineStart, block.end), lineStart, block.contentStart - lineStart, block, substyles, true);\n\t\t\t\t\tfor (var i = 0; i < substyles.length; i++) {\n\t\t\t\t\t\tif (substyles[i].style === \"meta.annotation.task.todo\" && start <= substyles[i].start && substyles[i].end <= end) {\n\t\t\t\t\t\t\tannotations.push(mAnnotations.AnnotationType.createAnnotation(annotationType, substyles[i].start, substyles[i].end, baseModel.getText(substyles[i].start, substyles[i].end)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tblock.getBlocks().forEach(function(current) {\n\t\t\t\t\tthis._computeTasks(current, baseModel, annotations, start, end);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t},\n\t\t_createFoldingAnnotation: function(viewModel, baseModel, start, end) {\n\t\t\tvar startLine = baseModel.getLineAtOffset(start);\n\t\t\tvar endLine = baseModel.getLineAtOffset(end);\n\t\t\tif (startLine === endLine) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (startLine + 1 === endLine && baseModel.getLineStart(endLine) === baseModel.getLineEnd(endLine)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn new (mAnnotations.AnnotationType.getType(mAnnotations.AnnotationType.ANNOTATION_FOLDING))(start, end, viewModel);\n\t\t},\n\t\t_findBlock: function(parentBlock, offset) {\n\t\t\tvar blocks = parentBlock.getBlocks();\n\t\t\tif (!blocks.length) {\n\t\t\t\treturn parentBlock;\n\t\t\t}\n\n\t\t\tvar index = binarySearch(blocks, offset, true);\n\t\t\tif (index < blocks.length && blocks[index].start <= offset && offset < blocks[index].end) {\n\t\t\t\treturn this._findBlock(blocks[index], offset);\n\t\t\t}\n\t\t\treturn parentBlock;\n\t\t},\n\t\t_findBrackets: function(model, bracketMatch, block, text, offset, end) {\n\t\t\tvar result = [], styles = [];\n\t\t\tvar start = offset, blocks = block.getBlocks();\n\t\t\tvar startIndex = binarySearch(blocks, offset, true);\n\t\t\tfor (var i = startIndex; i < blocks.length; i++) {\n\t\t\t\tif (blocks[i].start >= end) { break; }\n\t\t\t\tvar blockStart = blocks[i].start;\n\t\t\t\tvar blockEnd = blocks[i].end;\n\t\t\t\tif (start < blockStart) {\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(start);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, blockStart - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\t\tstyles.forEach(function(current) {\n\t\t\t\t\t\tif (current.style) {\n\t\t\t\t\t\t\tif (current.style.indexOf(bracketMatch.beginName) === 0) {\n\t\t\t\t\t\t\t\tresult.push(current.start + 1);\n\t\t\t\t\t\t\t} else if (current.style.indexOf(bracketMatch.endName) === 0) {\n\t\t\t\t\t\t\t\tresult.push(-(current.start + 1));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tstyles = [];\n\t\t\t\t}\n\t\t\t\tstart = blockEnd;\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\tlineIndex = model.getLineAtOffset(start);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, end - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\tstyles.forEach(function(current) {\n\t\t\t\t\tif (current.style) {\n\t\t\t\t\t\tif (current.style.indexOf(bracketMatch.beginName) === 0) {\n\t\t\t\t\t\t\tresult.push(current.start + 1);\n\t\t\t\t\t\t} else if (current.style.indexOf(bracketMatch.endName) === 0) {\n\t\t\t\t\t\t\tresult.push(-(current.start + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_findMatchingBracket: function(model, block, offset) {\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tvar text = model.getText(offset, lineEnd);\n\n\t\t\tvar bracketMatch = this._stylerAdapter.getBracketMatch(block, text);\n\t\t\tif (!bracketMatch) { return -1; }\n\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar brackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\tfor (var i = 0; i < brackets.length; i++) {\n\t\t\t\tvar sign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\tif (brackets[i] * sign - 1 === offset) {\n\t\t\t\t\tvar level = 1;\n\t\t\t\t\tif (!bracketMatch.atStart) {\n\t\t\t\t\t\ti--;\n\t\t\t\t\t\tfor (; i>=0; i--) {\n\t\t\t\t\t\t\tsign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\treturn brackets[i] * sign - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex -= 1;\n\t\t\t\t\t\twhile (lineIndex >= 0) {\n\t\t\t\t\t\t\tlineText = model.getLine(lineIndex);\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tlineEnd = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\tbrackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\t\t\t\t\tfor (var j = brackets.length - 1; j >= 0; j--) {\n\t\t\t\t\t\t\t\tsign = brackets[j] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\t\treturn brackets[j] * sign - 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\tfor (; i<brackets.length; i++) {\n\t\t\t\t\t\t\tsign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\treturn brackets[i] * sign - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex += 1;\n\t\t\t\t\t\tvar lineCount = model.getLineCount();\n\t\t\t\t\t\twhile (lineIndex < lineCount) {\n\t\t\t\t\t\t\tlineText = model.getLine(lineIndex);\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tlineEnd = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\tbrackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\t\t\t\t\tfor (var k=0; k<brackets.length; k++) {\n\t\t\t\t\t\t\t\tsign = brackets[k] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\t\treturn brackets[k] * sign - 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t\t_getLineStyle: function(lineIndex) {\n\t\t\tif (this._highlightCaretLine) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar model = view.getModel();\n\t\t\t\tvar selections = view.getSelections();\n\t\t\t\tvar hasCaret = false;\n\t\t\t\tif (!selections.some(function(selection) {\n\t\t\t\t\tif (selection.start === selection.end) {\n\t\t\t\t\t\thasCaret = hasCaret || model.getLineAtOffset(selection.start) === lineIndex;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}) && hasCaret) return this._caretLineStyle;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_getStyles: function(block, model, text, offset, startIndex) {\n\t\t\tvar end = offset + text.length;\n\n\t\t\tvar styles = [];\n\t\t\tvar start = offset + startIndex, blocks = block.getBlocks();\n\t\t\tvar startBlockIndex = binarySearch(blocks, start, true);\n\t\t\tfor (var i = startBlockIndex; i < blocks.length; i++) {\n\t\t\t\tif (blocks[i].start >= end) { break; }\n\t\t\t\tvar blockStart = blocks[i].start;\n\t\t\t\tvar blockEnd = blocks[i].end;\n\t\t\t\tif (start < blockStart) {\n\t\t\t\t\t/* content on that line that preceeds the start of the block */\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(start);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, blockStart - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\t}\n\t\t\t\tvar s = Math.max(start, blockStart);\n\t\t\t\tif (s === blockStart) {\n\t\t\t\t\t/* currently in the block's \"start\" segment */\n\t\t\t\t\tvar startString = this._stylerAdapter.getBlockStartStyle(blocks[i], text.substring(s - offset), s, styles);\n\t\t\t\t\tif (startString) {\n\t\t\t\t\t\ts += startString.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * Compute the block end now in order to determine the end-bound of the contained content, but do not add\n\t\t\t\t * its styles to the styles array until content styles have been computed, so that ordering is preserved.\n\t\t\t\t */\n\t\t\t\tvar e = Math.min(end, blockEnd);\n\t\t\t\tvar endStyles = [];\n\t\t\t\tif (e === blockEnd) {\n\t\t\t\t\t/* currently in the block's \"end\" segment */\n\t\t\t\t\tvar testString = text.substring(e - start - (blocks[i].end - blocks[i].contentEnd));\n\t\t\t\t\tvar endString = this._stylerAdapter.getBlockEndStyle(blocks[i], testString, e, endStyles);\n\t\t\t\t\tif (endString) {\n\t\t\t\t\t\te -= endString.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlineIndex = model.getLineAtOffset(s);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tvar blockSubstyles = this._getStyles(blocks[i], model, text.substring(lineStart - offset, e - offset), lineStart, s - lineStart);\n\t\t\t\tvar blockStyleName = this._stylerAdapter.getBlockContentStyleName(blocks[i]);\n\t\t\t\tif (blockStyleName) {\n\t\t\t\t\t/*\n\t\t\t\t\t * If a name was specified for the current block then apply its style throughout its\n\t\t\t\t\t * content wherever a style is not provided by a sub-element.\n\t\t\t\t\t */\n\t\t\t\t\tvar index = s;\n\t\t\t\t\tblockSubstyles.forEach(function(current) {\n\t\t\t\t\t\tif (current.start - index) {\n\t\t\t\t\t\t\tstyles.push({start: index, end: current.start, style: blockStyleName});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (current.mergeable) {\n\t\t\t\t\t\t\tcurrent.style += \",\" + blockStyleName;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyles.push(current);\n\t\t\t\t\t\tindex = current.end;\n\t\t\t\t\t});\n\t\t\t\t\tif (e - index) {\n\t\t\t\t\t\tstyles.push({start: index, end: e, style: blockStyleName});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstyles = styles.concat(blockSubstyles);\n\t\t\t\t}\n\t\t\t\tstyles = styles.concat(endStyles);\n\t\t\t\tstart = blockEnd;\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\t/* content on that line that follows the end of the block */\n\t\t\t\tlineIndex = model.getLineAtOffset(start);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, end - offset), lineStart, start - lineStart, block, styles);\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\t\t_isRenderingWhitespace: function() {\n\t\t\treturn this._whitespacesVisible;\n\t\t},\n\t\t_onDestroy: function() {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onLineStyle: function(e) {\n\t\t\tif (e.textView === this._view) {\n\t\t\t\te.style = this._getLineStyle(e.lineIndex);\n\t\t\t}\n\n\t\t\tvar offset = e.lineStart;\n\t\t\tvar model = e.textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\toffset = model.mapOffset(offset);\n\t\t\t\tvar baseModel = model.getBaseModel();\n\t\t\t}\n\n\t\t\te.ranges = this._getStyles(this._rootBlock, baseModel || model, e.lineText, offset, 0);\n\t\t\tfor (var i = e.ranges.length - 1; i >= 0; i--) {\n\t\t\t\tvar current = e.ranges[i];\n\t\t\t\tif (current.style) {\n\t\t\t\t\tcurrent.style = {styleClass: current.style.replace(/\\./g, \" \")};\n\t\t\t\t\tif (baseModel) {\n\t\t\t\t\t\tvar length = current.end - current.start;\n\t\t\t\t\t\tcurrent.start = model.mapOffset(current.start, true);\n\t\t\t\t\t\tcurrent.end = current.start + length;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\te.ranges.splice(i, 1);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (this._isRenderingWhitespace()) {\n\t\t\t\tthis._spliceStyles(this._spacePattern, e.ranges, e.lineText, e.lineStart);\n\t\t\t\tthis._spliceStyles(this._tabPattern, e.ranges, e.lineText, e.lineStart);\n\t\t\t}\n\t\t},\n\t\t_onModelChanged: function(e) {\n\t\t\tvar start = e.start;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar changeCount = addedCharCount - removedCharCount;\n\t\t\tvar viewModel = this._view.getModel();\n\t\t\tvar baseModel = viewModel.getBaseModel ? viewModel.getBaseModel() : viewModel;\n\t\t\tvar end = start + removedCharCount;\n\t\t\tvar charCount = baseModel.getCharCount();\n\n\t\t\t/* compute the nearest ancestor block to the start and end indices */\n\t\t\tvar lineStart = baseModel.getLineStart(baseModel.getLineAtOffset(start));\n\t\t\tvar ancestorBlock = this._findBlock(this._rootBlock, start);\n\n\t\t\tvar blockExtended, blocks, parentBlock, redraw, text, te, ts;\n\t\t\tdo {\n\t\t\t\tparentBlock = ancestorBlock.parent;\n\n\t\t\t\t/*\n\t\t\t\t * Determine whether ancestorBlock contains the full range of\n\t\t\t\t * text whose styling may be affected by this model change.\n\t\t\t\t */\n\t\t\t\tif (!blockExtended && parentBlock) {\n\t\t\t\t\t/* verify that ancestorBlock's start and end bounds are not affected by this change */\n\t\t\t\t\tif (changeCount < 0 && ancestorBlock.end - start <= -changeCount) {\n\t\t\t\t\t\t/* the end bound has definitely been affected, no verifyBlock() required, move up to the parent */\n\t\t\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\ttext = baseModel.getText(ancestorBlock.start, Math.min(charCount, ancestorBlock.end + changeCount + 1));\n\t\t\t\t\tif (!this._stylerAdapter.verifyBlock(baseModel, text, ancestorBlock, changeCount)) {\n\t\t\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * The change has not directly changed ancestorBlock's start/end strings, now verify that its end\n\t\t\t\t * bound is still valid (ie.- ensure that a new block is not extending beyond the end bound).\n\t\t\t\t */\n\n\t\t\t\tblocks = ancestorBlock.getBlocks();\n\t\t\t\tvar blockCount = blocks.length;\n\t\t\t\tvar blockStart = binarySearch(blocks, lineStart, true);\n\t\t\t\tvar blockEnd = binarySearch(blocks, end, false, blockStart - 1, blockCount);\n\n\t\t\t\t/*\n\t\t\t\t * If the change immediately follows the preceding block then test whether\n\t\t\t\t * the block should be extended.\n\t\t\t\t */\n\t\t\t\tblockExtended = false;\n\t\t\t\tif (blockStart && blocks.length && blocks[blockStart - 1].end === start) {\n\t\t\t\t\ttext = baseModel.getText(blocks[blockStart - 1].start, Math.min(charCount, start + 1));\n\t\t\t\t\tvar tempBlocks = this.computeBlocks(baseModel, text, ancestorBlock, blocks[blockStart - 1].start, null, null, null);\n\t\t\t\t\tif (tempBlocks.length && tempBlocks[0].end !== blocks[blockStart - 1].end) {\n\t\t\t\t\t\t/* the change has affected the preceding block's end, so include this block */\n\t\t\t\t\t\tblockStart--;\n\t\t\t\t\t\tblockExtended = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (blockStart < blockCount && blocks[blockStart].start <= lineStart && (lineStart < blocks[blockStart].end || blockExtended)) {\n\t\t\t\t\tts = blocks[blockStart].start;\n\t\t\t\t\tif (ts > start) { ts += changeCount; }\n\t\t\t\t} else if (blockStart === blockCount && blockCount > 0 && ancestorBlock.end - changeCount === blocks[blockCount - 1].end) {\n\t\t\t\t\tts = blocks[--blockStart].start;\n\t\t\t\t\tif (ts > start) { ts += changeCount; }\n\t\t\t\t} else {\n\t\t\t\t\tts = Math.max(lineStart, ancestorBlock.contentStart);\n\t\t\t\t}\n\n\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\tte = blocks[blockEnd].end;\n\t\t\t\t} else {\n\t\t\t\t\tte = ancestorBlock.contentEnd;\n\t\t\t\t}\n\t\t\t\tif (start <= te) { te += changeCount; }\n\t\t\t\tte = Math.min(te, charCount - 1);\n\t\t\t\ttext = baseModel.getText(ts, te + 1);\n\t\t\t\tvar newBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\n\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\t/* ensure that blockEnd's end is preserved */\n\t\t\t\t\tif (newBlocks.length && newBlocks[newBlocks.length - 1].end === te && newBlocks[newBlocks.length - 1].typeId === blocks[blockEnd].typeId) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t/*\n\t\t\t\t\t * ancestorBlock's end match is no longer valid because it is being spanned by a block from\n\t\t\t\t\t * within.  Attempt to find a subsequent sibling block with the same type, as its end match\n\t\t\t\t\t * will serve as the end match for this spanning block as well.\n\t\t\t\t\t */\n\t\t\t\t\tif (newBlocks.length && this._stylerAdapter.blockSpansBeyondEnd(newBlocks[newBlocks.length - 1])) {\n\t\t\t\t\t\tblockEnd++;\n\t\t\t\t\t\tvar subBlocks = newBlocks[newBlocks.length - 1].getBlocks();\n\t\t\t\t\t\tvar spanningTypeId = (subBlocks.length ? subBlocks[subBlocks.length - 1] : newBlocks[newBlocks.length - 1]).typeId;\n\t\t\t\t\t\twhile (blockEnd < blockCount) {\n\t\t\t\t\t\t\tif (blocks[blockEnd].typeId === spanningTypeId) {\n\t\t\t\t\t\t\t\t/* found a potential end block, must verify it */\n\t\t\t\t\t\t\t\tvar tempTe = blocks[blockEnd].end + changeCount;\n\t\t\t\t\t\t\t\ttempTe = Math.min(tempTe, charCount - 1);\n\t\t\t\t\t\t\t\ttext = baseModel.getText(ts, tempTe + 1);\n\t\t\t\t\t\t\t\tvar tempNewBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\t\t\t\t\t\t\t\tif (tempNewBlocks.length && tempNewBlocks[tempNewBlocks.length - 1].end === tempTe) {\n\t\t\t\t\t\t\t\t\t/* verified, can now stop looking */\n\t\t\t\t\t\t\t\t\tte = tempTe;\n\t\t\t\t\t\t\t\t\tnewBlocks = tempNewBlocks;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tblockEnd++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t/* ensure that ancestorBlock's end is preserved */\n\t\t\t\t\tif (!newBlocks.length || newBlocks[newBlocks.length - 1].end <= ancestorBlock.contentEnd + changeCount) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * The end block's end bound is spanned by a block from within, so move up to the ancestor\n\t\t\t\t * block, or extend end to the end of the content if already at the root-level block.\n\t\t\t\t */\n\n\t\t\t\tif (!parentBlock) {\n\t\t\t\t\tte = charCount;\n\t\t\t\t\tblockEnd = blockCount;\n\t\t\t\t\ttext = baseModel.getText(ts, te);\n\t\t\t\t\tnewBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\tredraw = true; /* blocks may not appear to be changed in the context of the parent block */\n\t\t\t} while (true);\n\n\t\t\tthis._rootBlock.adjustBounds(start, changeCount);\n\t\t\tblockEnd = Math.min(blockEnd + 1, blockCount);\n\n\t\t\tvar block;\n\t\t\tif (!redraw) {\n\t\t\t\tredraw = (blockEnd - blockStart) !== newBlocks.length;\n\t\t\t}\n\t\t\tif (!redraw) {\n\t\t\t\tfor (var i = 0; i < newBlocks.length; i++) {\n\t\t\t\t\tblock = blocks[blockStart + i];\n\t\t\t\t\tvar newBlock = newBlocks[i];\n\t\t\t\t\tif (block.start !== newBlock.start || block.end !== newBlock.end || block.typeId !== newBlock.typeId) {\n\t\t\t\t\t\tredraw = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!blocks.length && !newBlocks.length) {\n\t\t\t\tvar eventOldBlocks = [ancestorBlock];\n\t\t\t\tvar eventNewBlocks = [ancestorBlock];\n\t\t\t\tthis.dispatchEvent({\n\t\t\t\t\ttype: \"BlocksChanged\", //$NON-NLS-0$\n\t\t\t\t\toldBlocks: eventOldBlocks,\n\t\t\t\t\tnewBlocks: eventNewBlocks\n\t\t\t\t});\n\t\t\t\tancestorBlock = eventNewBlocks[0]; /* enables the markdown styler to return a modified ancestorBlock */\n\t\t\t} else {\n\t\t\t\tthis.dispatchEvent({\n\t\t\t\t\ttype: \"BlocksChanged\", //$NON-NLS-0$\n\t\t\t\t\toldBlocks: blocks.slice(blockStart, blockEnd),\n\t\t\t\t\tnewBlocks: newBlocks\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar args = [blockStart, blockEnd - blockStart].concat(newBlocks);\n\t\t\tArray.prototype.splice.apply(blocks, args);\n\t\t\tif (redraw) {\n\t\t\t\tvar redrawStart = ts;\n\t\t\t\tvar redrawEnd = te;\n\t\t\t\tif (viewModel !== baseModel) {\n\t\t\t\t\tredrawStart = viewModel.mapOffset(redrawStart, true);\n\t\t\t\t\tredrawEnd = viewModel.mapOffset(redrawEnd, true);\n\t\t\t\t}\n\t\t\t\tthis._view.redrawRange(redrawStart, redrawEnd);\n\t\t\t}\n\n\t\t\tif (this._annotationModel) {\n\t\t\t\tvar remove = [], add = [];\n\t\t\t\tvar allFolding = [];\n\t\t\t\tvar iter = this._annotationModel.getAnnotations(ts, te);\n\t\t\t\tvar doFolding = this._foldingEnabled && baseModel !== viewModel;\n\t\t\t\tvar parent = ancestorBlock.parent || ancestorBlock;\n\t\t\t\twhile (iter.hasNext()) {\n\t\t\t\t\tvar annotation = iter.next();\n\t\t\t\t\tif (doFolding && annotation.type === mAnnotations.AnnotationType.ANNOTATION_FOLDING) {\n\t\t\t\t\t\tallFolding.push(annotation);\n\t\t\t\t\t\tblock = this._findBlock(parent, annotation.start);\n\t\t\t\t\t\twhile (block) {\n\t\t\t\t\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\t\t\t\t\tif (annotation.start === foldBounds.start && annotation.end === foldBounds.end) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tblock = block.parent;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (block && annotation.start === foldBounds.start && annotation.end === foldBounds.end) {\n\t\t\t\t\t\t\tvar annotationStart = annotation.start;\n\t\t\t\t\t\t\tvar annotationEnd = annotation.end;\n\t\t\t\t\t\t\tif (annotationStart > start) {\n\t\t\t\t\t\t\t\tannotationStart -= changeCount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (annotationEnd > start) {\n\t\t\t\t\t\t\t\tannotationEnd -= changeCount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (annotationStart <= start && start < annotationEnd && annotationStart <= end && end < annotationEnd) {\n\t\t\t\t\t\t\t\tvar startLine = baseModel.getLineAtOffset(annotation.start);\n\t\t\t\t\t\t\t\tvar endLine = baseModel.getLineAtOffset(annotation.end);\n\t\t\t\t\t\t\t\tif (startLine !== endLine) {\n\t\t\t\t\t\t\t\t\tif (!annotation.expanded) {\n\t\t\t\t\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (annotation.type === mAnnotations.AnnotationType.ANNOTATION_TASK) {\n\t\t\t\t\t\tif (ancestorBlock.start <= annotation.start && annotation.end <= ancestorBlock.end) {\n\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (doFolding) {\n\t\t\t\t\tparent.getBlocks().forEach(function(block) {\n\t\t\t\t\t\tthis._updateFolding(block, baseModel, viewModel, allFolding, add, ts, te);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t\tif (this._detectTasks) {\n\t\t\t\t\tthis._computeTasks(ancestorBlock, baseModel, add, ts, te);\n\t\t\t\t}\n\t\t\t\tthis._annotationProviders.forEach(function(current) {\n\t\t\t\t\tvar providerRemove = [];\n\t\t\t\t\tvar providerAdd = [];\n\t\t\t\t\tcurrent(this._annotationModel, baseModel, ancestorBlock, ts, te, providerRemove, providerAdd);\n\t\t\t\t\tremove = remove.concat(providerRemove);\n\t\t\t\t\tadd = add.concat(providerAdd);\n\t\t\t\t}.bind(this));\n\t\t\t\tthis._annotationModel.replaceAnnotations(remove, add);\n\t\t\t}\n\t\t},\n\t\t_onMouseDown: function(e) {\n\t\t\tif (e.clickCount !== 2) { return; }\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar offset = this._view.getOffsetAtLocation(e.x, e.y);\n\t\t\tif (offset > 0) {\n\t\t\t\tvar mapOffset = offset - 1;\n\t\t\t\tvar baseModel = model;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmapOffset = model.mapOffset(mapOffset);\n\t\t\t\t\tbaseModel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tvar block = this._findBlock(this._rootBlock, mapOffset);\n\t\t\t\tvar bracket = this._findMatchingBracket(baseModel, block, mapOffset);\n\t\t\t\tif (bracket !== -1) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar mapBracket = bracket;\n\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\tmapBracket = model.mapOffset(mapBracket, true);\n\t\t\t\t\t}\n\t\t\t\t\tif (offset > mapBracket) {\n\t\t\t\t\t\toffset--;\n\t\t\t\t\t\tmapBracket++;\n\t\t\t\t\t}\n\t\t\t\t\tthis._view.setSelection(mapBracket, offset);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_onSelection: function(e) {\n\t\t\tvar oldSelections = Array.isArray(e.oldValue) ? e.oldValue : [e.oldValue];\n\t\t\tvar newSelections = Array.isArray(e.newValue) ? e.newValue : [e.newValue];\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar lineIndex;\n\t\t\tif (this._highlightCaretLine) {\n\t\t\t\tfunction getHighlightLines(selections) {\n\t\t\t\t\tvar lines = {};\n\t\t\t\t\tif (selections.some(function(selection) {\n\t\t\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\t\t\tlines[model.getLineAtOffset(selection.start).toString()] = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t})) return {};\n\t\t\t\t\treturn lines;\n\t\t\t\t}\n\t\t\t\tvar oldLines = getHighlightLines(oldSelections);\n\t\t\t\tvar newLines = getHighlightLines(newSelections);\n\t\t\t\tfunction redraw(o, n) {\n\t\t\t\t\tfor (var p in o) {\n\t\t\t\t\t\tif (!n[p]) {\n\t\t\t\t\t\t\tlineIndex = p >> 0;\n\t\t\t\t\t\t\tview.redrawLines(lineIndex, lineIndex + 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tredraw(oldLines, newLines);\n\t\t\t\tredraw(newLines, oldLines);\n\t\t\t}\n\t\t\tif (!this._annotationModel) { return; }\n\n\t\t\tvar remove = this._bracketAnnotations, add, caret;\n\t\t\tif (newSelections.length === 1 && newSelections[0].isEmpty() && (caret = newSelections[0].getCaret()) > 0) {\n\t\t\t\tvar mapCaret = caret - 1;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmapCaret = model.mapOffset(mapCaret);\n\t\t\t\t\tmodel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tvar block = this._findBlock(this._rootBlock, mapCaret);\n\t\t\t\tvar bracket = this._findMatchingBracket(model, block, mapCaret);\n\t\t\t\tif (bracket !== -1) {\n\t\t\t\t\tadd = [\n\t\t\t\t\t\tmAnnotations.AnnotationType.createAnnotation(mAnnotations.AnnotationType.ANNOTATION_MATCHING_BRACKET, bracket, bracket + 1),\n\t\t\t\t\t\tmAnnotations.AnnotationType.createAnnotation(mAnnotations.AnnotationType.ANNOTATION_CURRENT_BRACKET, mapCaret, mapCaret + 1)\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._bracketAnnotations = add;\n\t\t\tthis._annotationModel.replaceAnnotations(remove, add);\n\t\t},\n\t\t_spliceStyles: function(whitespacePattern, ranges, text, offset) {\n\t\t\tvar regex = whitespacePattern.regex;\n\t\t\tregex.lastIndex = 0;\n\t\t\tvar rangeIndex = 0;\n\t\t\tvar result = regex.exec(text);\n\t\t\twhile (result) {\n\t\t\t\tvar charIndex = offset + result.index;\n\t\t\t\twhile (rangeIndex < ranges.length) {\n\t\t\t\t\tif (charIndex < ranges[rangeIndex].end) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\trangeIndex++;\n\t\t\t\t}\n\t\t\t\tvar newStyle = {\n\t\t\t\t\tstart: charIndex,\n\t\t\t\t\tend: charIndex + 1,\n\t\t\t\t\tstyle: copy(whitespacePattern.style)\n\t\t\t\t};\n\t\t\t\tif (rangeIndex < ranges.length && ranges[rangeIndex].start <= charIndex) {\n\t\t\t\t\tvar endStyle = {start: charIndex + 1, end: ranges[rangeIndex].end, style: ranges[rangeIndex].style};\n\t\t\t\t\tranges[rangeIndex].end = charIndex;\n\t\t\t\t\tranges.splice(rangeIndex + 1, 0, endStyle);\n\t\t\t\t\tranges.splice(rangeIndex + 1, 0, newStyle);\n\t\t\t\t\trangeIndex += 2;\n\t\t\t\t\tnewStyle.style.styleClass += \" \" + ranges[rangeIndex].style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tranges.splice(rangeIndex, 0, newStyle);\n\t\t\t\t\trangeIndex++;\n\t\t\t\t}\n\t\t\t\tresult = regex.exec(text);\n\t\t\t}\n\t\t},\n\t\t_updateFolding: function(block, baseModel, viewModel, allFolding, _add, start, end) {\n\t\t\tstart = start || block.start;\n\t\t\tend = end || block.end;\n\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\tif (!block.doNotFold && foldBounds.start <= end && start <= foldBounds.end) {\n\t\t\t\tvar index = binarySearch(allFolding, foldBounds.start, true);\n\t\t\t\tif (!(index < allFolding.length && allFolding[index].start === foldBounds.start && allFolding[index].end === foldBounds.end)) {\n\t\t\t\t\tvar annotation = this._createFoldingAnnotation(viewModel, baseModel, foldBounds.start, foldBounds.end);\n\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t_add.push(annotation);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tblock.getBlocks().forEach(function(current) {\n\t\t\t\t\tthis._updateFolding(current, baseModel, viewModel, allFolding, _add, start, end);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t},\n\t\t_caretLineStyle: {styleClass: \"meta annotation currentLine\"}, //$NON-NLS-0$\n\t\t_spacePattern: {regex: /[ ]/g, style: {styleClass: \"punctuation separator space\", unmergeable: true}}, //$NON-NLS-0$\n\t\t_tabPattern: {regex: /\\t/g, style: {styleClass: \"punctuation separator tab\", unmergeable: true}} //$NON-NLS-0$\n\t};\n\n\tmEventTarget.EventTarget.addMixin(TextStyler.prototype);\n\n\treturn {\n\t\tTextStyler: TextStyler,\n\t\tBlock: Block,\n\t\tcreatePatternBasedAdapter: createPatternBasedAdapter\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2013, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n *******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine('orion/editor/edit', [ //$NON-NLS-0$\n\t\"require\", //$NON-NLS-0$\n\n\t\"orion/editor/textView\", //$NON-NLS-0$\n\t\"orion/editor/textModel\", //$NON-NLS-0$\n\t\"orion/editor/textTheme\", //$NON-NLS-0$\n\t\"orion/editor/projectionTextModel\", //$NON-NLS-0$\n\t\"orion/editor/editor\", //$NON-NLS-0$\n\t\"orion/editor/editorFeatures\", //$NON-NLS-0$\n\t\n\t\"orion/editor/contentAssist\", //$NON-NLS-0$\n\t\"orion/editor/textStyler\" //$NON-NLS-0$\n\n], function(require, mTextView, mTextModel, mTextTheme, mProjModel, mEditor, mEditorFeatures, mContentAssist, mTextStyler) {\n\n\t/**\t@private */\n\tfunction getDisplay(window, document, element) {\n\t\tvar display;\n\t\tvar temp = element;\n\t\twhile (temp && temp !== document && display !== \"none\") { //$NON-NLS-0$\n\t\t\tif (window.getComputedStyle) {\n\t\t\t\tvar style = window.getComputedStyle(temp, null);\n\t\t\t\tdisplay = style.getPropertyValue(\"display\"); //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\tdisplay = temp.currentStyle.display;\n\t\t\t}\n\t\t\ttemp = temp.parentNode;\n\t\t}\n\t\tif (!temp || !display) {\n\t\t\treturn \"none\"; //$NON-NLS-0$\n\t\t}\n\t\treturn display;\n\t}\n\n\t/**\t@private */\n\tfunction getTextFromElement(element) {\n\t\tvar firstChild = element.firstChild;\n\t\tif (firstChild && firstChild.tagName === \"TEXTAREA\") { //$NON-NLS-0$\n\t\t\treturn firstChild.value;\n\t\t}\n\t\tvar document = element.ownerDocument;\n\t\tvar window = document.defaultView || document.parentWindow;\n\t\tif (!window.getSelection ||\n\t\t\t(element.childNodes.length === 1 && firstChild.nodeType === Node.TEXT_NODE) ||\n\t\t\tgetDisplay(window, document, element) === \"none\") //$NON-NLS-0$\n\t\t{\n\t\t\treturn element.innerText || element.textContent;\n\t\t}\n\t\tvar newRange = document.createRange();\n\t\tnewRange.selectNode(element);\n\t\tvar selection = window.getSelection();\n\t\tvar oldRanges = [], i;\n\t\tfor (i = 0; i < selection.rangeCount; i++) {\n\t\t\toldRanges.push(selection.getRangeAt(i));\n\t\t}\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(newRange);\n\t\tvar text = selection.toString();\n\t\tselection.removeAllRanges();\n\t\tfor (i = 0; i < oldRanges.length; i++) {\n\t\t\tselection.addRange(oldRanges[i]);\n\t\t}\n\t\treturn text;\n\t}\n\n\t/**\t@private */\t\n\tfunction optionName(name) {\n\t\tvar prefix = \"data-editor-\"; //$NON-NLS-0$\n\t\tif (name.substring(0, prefix.length) === prefix) {\n\t\t\tvar key = name.substring(prefix.length);\n\t\t\tkey = key.replace(/-([a-z])/ig, /* @callback */ function(all, character) {\n\t\t\t\treturn character.toUpperCase();\n\t\t\t});\n\t\t\treturn key;\n\t\t}\n\t\treturn undefined;\n\t}\n\t\n\t/**\t@private */\n\tfunction merge(obj1, obj2) {\n\t\tfor (var p in obj2) {\n\t\t\tif (obj2.hasOwnProperty(p)) {\n\t\t\t\tobj1[p] = obj2[p];\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\t@private */\n\tfunction mergeOptions(parent, defaultOptions) {\n\t\tvar options = {};\n\t\tmerge(options, defaultOptions);\n\t\tfor (var attr, j = 0, attrs = parent.attributes, l = attrs.length; j < l; j++) {\n\t\t\tattr = attrs.item(j);\n\t\t\tvar key = optionName(attr.nodeName);\n\t\t\tif (key) {\n\t\t\t\tvar value = attr.nodeValue;\n\t\t\t\tif (value === \"true\" || value === \"false\") { //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\tvalue = value === \"true\"; //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t\toptions[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n\t\n\t/**\t@private */\n\tfunction getParents(document, className) {\n\t\tif (document.getElementsByClassName) {\n\t\t\treturn document.getElementsByClassName(className);\n\t\t}\n\t\tclassName = className.replace(/ *$/, '');\n\t\tif (document.querySelectorAll) {\n\t\t\treturn document.querySelectorAll((' ' + className).replace(/ +/g, '.')); //$NON-NLS-1$ //$NON-NLS-0$\n\t\t}\n\t\treturn null;\n\t}\n\t\n\t/**\t@private */\n\tfunction getHeight(node) {\n\t\treturn node.clientHeight;\n\t}\n\t\n\t/**\n\t * @class This object describes the options for <code>edit</code>.\n\t * @name orion.editor.EditOptions\n\t *\n\t * @property {String|DOMElement} parent the parent element for the view, it can be either a DOM element or an ID for a DOM element.\n\t * @property {Boolean} [readonly=false] whether or not the view is read-only.\n\t * @property {Boolean} [fullSelection=true] whether or not the view is in full selection mode.\n\t * @property {Boolean} [tabMode=true] whether or not the tab keypress is consumed by the view or is used for focus traversal.\n\t * @property {Boolean} [expandTab=false] whether or not the tab key inserts white spaces.\n\t * @property {String} [themeClass] the CSS class for the view theming.\n\t * @property {Number} [tabSize=4] The number of spaces in a tab.\n\t * @property {Boolean} [singleMode=false] whether or not the editor is in single line mode.\n\t * @property {Boolean} [wrapMode=false] whether or not the view wraps lines.\n\t * @property {Boolean} [wrapable=false] whether or not the view is wrappable.\n\t * @property {Function} [statusReporter] a status reporter.\n\t * @property {Function} [hoverFactory] a factory for hovers.\n\t * @property {String} [title=\"\"] the editor title.\n\t * @property {String} [contents=\"\"] the editor contents.\n\t * @property {String} [lang] @deprecated use contentType instead\n\t * @property {String} [contentType] the type of the content (eg.- application/javascript, text/html, etc.)\n\t * @property {Function} [grammarProvider] a callback for providing grammars for a content type\n\t * @property {Boolean} [showLinesRuler=true] whether or not the lines ruler is shown.\n\t * @property {Boolean} [showAnnotationRuler=true] whether or not the annotation ruler is shown.\n\t * @property {Boolean} [showOverviewRuler=true] whether or not the overview ruler is shown.\n\t * @property {Boolean} [showFoldingRuler=true] whether or not the folding ruler is shown.\n\t * @property {Boolean} [showZoomRuler=false] whether or not the zoom ruler is shown.\n\t * @property {Boolean} [noFocus=false] whether or not to focus the editor on creation.\n\t * @property {Number} [firstLineIndex=1] the line index displayed for the first line of text.\n\t */\n\t/**\n\t * Creates an editor instance configured with the given options.\n\t * \n\t * @param {orion.editor.EditOptions} options the editor options.\n\t */\n\tfunction edit(options) {\n\t\tvar doc = options.document || document;\n\t\tvar parent = options.parent;\n\t\tif (!parent) { parent = \"editor\"; } //$NON-NLS-0$\n\t\tif (typeof(parent) === \"string\") { //$NON-NLS-0$\n\t\t\tparent = doc.getElementById(parent);\n\t\t}\n\t\tif (!parent) {\n\t\t\tif (options.className) {\n\t\t\t\tvar parents = getParents(doc, options.className);\n\t\t\t\tif (parents) {\n\t\t\t\t\toptions.className = undefined;\n\t\t\t\t\t// Do not focus editors by default when creating multiple editors\n\t\t\t\t\tif (parents.length > 1 && options.noFocus === undefined) { options.noFocus = true; }\n\t\t\t\t\tvar editors = [];\n\t\t\t\t\tfor (var i = parents.length - 1; i >= 0; i--) {\n\t\t\t\t\t\toptions.parent = parents[i];\n\t\t\t\t\t\teditors.push(edit(options));\n\t\t\t\t\t}\n\t\t\t\t\treturn editors;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!parent) { throw new Error(\"no parent\"); } //$NON-NLS-0$\n\t\toptions = mergeOptions(parent, options);\n\t\n\t\tif (typeof options.theme === \"string\") { //$NON-NLS-0$\n\t\t\tvar theme = mTextTheme.TextTheme.getTheme(options.theme);\n\t\t\tvar index = options.theme.lastIndexOf(\"/\"); //$NON-NLS-0$\n\t\t\tvar themeClass = options.theme; \n\t\t\tif (index !== -1) {\n\t\t\t\tthemeClass = themeClass.substring(index + 1);\n\t\t\t}\n\t\t\tvar extension = \".css\"; //$NON-NLS-0$\n\t\t\tif (themeClass.substring(themeClass.length - extension.length) === extension) {\n\t\t\t\tthemeClass = themeClass.substring(0, themeClass.length - extension.length);\n\t\t\t}\n\t\t\ttheme.setThemeClass(themeClass, {href: options.theme});\n\t\t\toptions.theme = theme;\n\t\t}\n\t\tvar textViewFactory = function() {\n\t\t\treturn new mTextView.TextView({\n\t\t\t\tparent: parent,\n\t\t\t\tmodel: new mProjModel.ProjectionTextModel(options.model ? options.model : new mTextModel.TextModel(\"\")),\n\t\t\t\ttabSize: options.tabSize ? options.tabSize : 4,\n\t\t\t\treadonly: options.readonly,\n\t\t\t\tfullSelection: options.fullSelection,\n\t\t\t\ttabMode: options.tabMode,\n\t\t\t\texpandTab: options.expandTab,\n\t\t\t\tsingleMode: options.singleMode,\n\t\t\t\tthemeClass: options.themeClass,\n\t\t\t\ttheme: options.theme,\n\t\t\t\twrapMode: options.wrapMode,\n\t\t\t\twrappable: options.wrappable\n\t\t\t});\n\t\t};\n\n\t\tvar contentAssist, contentAssistFactory;\n\t\tif (!options.readonly) {\n\t\t\tcontentAssistFactory = {\n\t\t\t\tcreateContentAssistMode: function(editor) {\n\t\t\t\t\tcontentAssist = new mContentAssist.ContentAssist(editor.getTextView());\n\t\t\t\t\tvar contentAssistWidget = new mContentAssist.ContentAssistWidget(contentAssist);\n\t\t\t\t\tvar result = new mContentAssist.ContentAssistMode(contentAssist, contentAssistWidget);\n\t\t\t\t\tcontentAssist.setMode(result);\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\n\t\tvar syntaxHighlighter = {\n\t\t\tstyler: null, \n\t\t\t\n\t\t\thighlight: function(contentType, grammarProvider, editor) {\n\t\t\t\tif (this.styler && this.styler.destroy) {\n\t\t\t\t\tthis.styler.destroy();\n\t\t\t\t}\n\t\t\t\tthis.styler = null;\n\n\t\t\t\t/* to maintain backwards-compatibility convert previously-supported lang values to types */\n\t\t\t\tif (contentType === \"js\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"application/javascript\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"css\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/css\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"html\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/html\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"java\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/x-java-source\"; //$NON-NLS-0$\n\t\t\t\t}\n\n\t\t\t\tvar textView = editor.getTextView();\n\t\t\t\tvar annotationModel = editor.getAnnotationModel();\n\t\t\t\tvar loadGrammar = function(contentType) {\n\t\t\t\t\t/* attempt to locate an included file containing the grammar for contentType */\n\t\t\t\t\tvar folderName = contentType.replace(/[*|:/\".<>?+]/g, '_');\n\t\t\t\t\trequire([\"./stylers/\" + folderName + \"/syntax\"], //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t\tfunction(grammar) {\n\t\t\t\t\t\t\tvar stylerAdapter = new mTextStyler.createPatternBasedAdapter(grammar.grammars, grammar.id, contentType);\n\t\t\t\t\t\t\tthis.styler = new mTextStyler.TextStyler(textView, annotationModel, stylerAdapter);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t/* @callback */ function(error) {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t * A grammar file was not found for the specified contentType, so syntax styling will\n\t\t\t\t\t\t\t * not be shown (the editor will still work fine otherwise).  requireJS has already\n\t\t\t\t\t\t\t * written an error message to the console regarding the missing grammar file.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tif (contentType) {\n\t\t\t\t\tif (grammarProvider && (typeof grammarProvider === \"function\")) { //$NON-NLS-0$\n\t\t\t\t\t\tgrammarProvider(contentType).then(\n\t\t\t\t\t\t\tfunction(result) {\n\t\t\t\t\t\t\t\tif (result && result.grammars && result.id) {\n\t\t\t\t\t\t\t\t\tvar stylerAdapter = new mTextStyler.createPatternBasedAdapter(result.grammars, result.id, contentType);\n\t\t\t\t\t\t\t\t\tthis.styler = new mTextStyler.TextStyler(textView, annotationModel, stylerAdapter);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\t\t/* @callback */ function(error) {\n\t\t\t\t\t\t\t\tloadGrammar(contentType); /* fall back to default grammar file lookup */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tloadGrammar(contentType);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (contentType === \"text/css\") { //$NON-NLS-0$\n\t\t\t\t\teditor.setFoldingRulerVisible(options.showFoldingRuler === undefined || options.showFoldingRuler);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar editor = new mEditor.Editor({\n\t\t\ttextViewFactory: textViewFactory,\n\t\t\tundoStackFactory: new mEditorFeatures.UndoFactory(),\n\t\t\tannotationFactory: new mEditorFeatures.AnnotationFactory(),\n\t\t\tlineNumberRulerFactory: new mEditorFeatures.LineNumberRulerFactory(),\n\t\t\tfoldingRulerFactory: new mEditorFeatures.FoldingRulerFactory(),\n\t\t\ttextDNDFactory: new mEditorFeatures.TextDNDFactory(),\n\t\t\tcontentAssistFactory: contentAssistFactory,\n\t\t\tkeyBindingFactory: new mEditorFeatures.KeyBindingsFactory(), \n\t\t\tstatusReporter: options.statusReporter,\n\t\t\thoverFactory: options.hoverFactory,\n\t\t\tdomNode: parent\n\t\t});\n\t\teditor.addEventListener(\"TextViewInstalled\", function() { //$NON-NLS-0$\n\t\t\tvar ruler = editor.getLineNumberRuler();\n\t\t\tif (ruler && options.firstLineIndex !== undefined) {\n\t\t\t\truler.setFirstLine(options.firstLineIndex);\n\t\t\t}\n\t\t\tvar sourceCodeActions = editor.getSourceCodeActions();\n\t\t\tif (sourceCodeActions) {\n\t\t\t\tsourceCodeActions.setAutoPairParentheses(options.autoPairParentheses);\n\t\t\t\tsourceCodeActions.setAutoPairBraces(options.autoPairBraces);\n\t\t\t\tsourceCodeActions.setAutoPairSquareBrackets(options.autoPairSquareBrackets);\n\t\t\t\tsourceCodeActions.setAutoPairAngleBrackets(options.autoPairAngleBrackets);\n\t\t\t\tsourceCodeActions.setAutoPairQuotations(options.autoPairQuotations);\n\t\t\t\tsourceCodeActions.setAutoCompleteComments(options.autoCompleteComments);\n\t\t\t\tsourceCodeActions.setSmartIndentation(options.smartIndentation);\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar contents = options.contents;\n\t\tif (contents === undefined) {\n\t\t\tcontents = getTextFromElement(parent); \n\t\t}\n\t\tif (!contents) { contents=\"\"; }\n\t\t\n\t\teditor.installTextView();\n\t\teditor.setLineNumberRulerVisible(options.showLinesRuler === undefined || options.showLinesRuler);\n\t\teditor.setAnnotationRulerVisible(options.showAnnotationRuler === undefined || options.showFoldingRuler);\n\t\teditor.setOverviewRulerVisible(options.showOverviewRuler === undefined || options.showOverviewRuler);\n\t\teditor.setZoomRulerVisible(options.showZoomRuler === undefined || options.showZoomRuler);\n\t\teditor.setFoldingRulerVisible(options.showFoldingRuler === undefined || options.showFoldingRuler);\n\t\teditor.setInput(options.title, null, contents, false, options.noFocus);\n\t\t\n\t\tsyntaxHighlighter.highlight(options.contentType || options.lang, options.grammarProvider, editor);\n\t\t/*\n\t\t * The minimum height of the editor is 50px. Do not compute size if the editor is not\n\t\t * attached to the DOM or it is display=none.\n\t\t */\n\t\tvar window = doc.defaultView || doc.parentWindow;\n\t\tif (!options.noComputeSize && getDisplay(window, doc, parent) !== \"none\" && getHeight(parent) <= 50) { //$NON-NLS-0$\n\t\t\tvar height = editor.getTextView().computeSize().height;\n\t\t\tparent.style.height = height + \"px\"; //$NON-NLS-0$\n\t\t}\n\t\treturn editor;\n\t}\n\n\tvar editorNS = this.orion ? this.orion.editor : undefined;\n\tif (editorNS) {\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tmerge(editorNS, arguments[i]);\t\n\t\t}\n\t\teditorNS.edit = edit;\n\t}\n\t\n\treturn edit;\n});\n\n\n"]}