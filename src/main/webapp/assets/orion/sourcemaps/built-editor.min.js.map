{"version":3,"file":"built-editor.min.js","sources":["requirejs/almond.js","requirejs/i18n.js","orion/editor/nls/messages.js","orion/editor/nls/root/messages.js","orion/editor/eventTarget.js","orion/regex.js","orion/util.js","orion/editor/textModel.js","orion/keyBinding.js","orion/editor/keyModes.js","orion/editor/textTheme.js","orion/editor/util.js","orion/bidiFormat.js","orion/bidiUtils.js","orion/metrics.js","orion/editor/textView.js","orion/editor/projectionTextModel.js","orion/Deferred.js","orion/webui/littlelib.js","orion/editor/tooltip.js","orion/editor/annotations.js","orion/objects.js","orion/editor/editor.js","orion/editor/find.js","orion/editor/findUI.js","orion/editor/actions.js","orion/editor/undoStack.js","orion/editor/rulers.js","orion/editor/textDND.js","orion/editor/linkedMode.js","orion/editor/factories.js","orion/editor/editorFeatures.js","orion/editor/contentAssist.js","orion/editor/textStyler.js","orion/editor/edit.js"],"names":["requirejs","require","define","undef","hasProp","obj","prop","hasOwn","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","foundI","foundStarMap","starI","i","j","part","baseParts","split","map","config","starMap","charAt","slice","length","concat","splice","join","indexOf","substring","makeRequire","relName","forceSync","req","apply","aps","arguments","makeNormalize","makeLoad","depName","value","defined","callDep","waiting","args","defining","main","Error","splitPrefix","prefix","index","makeConfig","makeMap","handlers","Object","prototype","hasOwnProperty","plugin","parts","f","n","pr","p","exports","e","module","id","uri","deps","callback","cjsModule","ret","usingExports","load","alt","setTimeout","cfg","amd","jQuery","addPart","locale","master","needed","toLoad","suffix","push","addIfExists","fullName","_fileExists","toUrl","mixin","target","source","force","nlsRegExp","masterConfig","version","onLoad","masterName","match","exec","current","navigator","languages","language","userLanguage","toLowerCase","isBuild","locales","k","partBundle","root","multipleAnnotations","line","breakpoint","bookmark","task","error","warning","info","currentSearch","currentLine","matchingBracket","currentBracket","diffAdded","diffDeleted","diffModified","collabLineChanged","lineUp","lineDown","lineStart","lineEnd","charPrevious","charNext","pageUp","pageDown","scrollPageUp","scrollPageDown","scrollLineUp","scrollLineDown","wordPrevious","wordNext","textStart","textEnd","scrollTextStart","scrollTextEnd","centerLine","selectLineUp","selectLineDown","selectWholeLineUp","selectWholeLineDown","selectLineStart","selectLineEnd","selectCharPrevious","selectCharNext","selectPageUp","selectPageDown","selectWordPrevious","selectWordNext","selectTextStart","selectTextEnd","deletePrevious","deleteNext","deleteWordPrevious","deleteWordNext","deleteLineStart","deleteLineEnd","tab","enter","enterNoCursor","escape","selectAll","copy","cut","paste","uppercase","lowercase","capitalize","reversecase","toggleWrapMode","toggleTabMode","toggleOverwriteMode","committerOnTime","emacs","exchangeMarkPoint","setMarkCommand","clearMark","digitArgument","negativeArgument","Comment","Flat outline","incrementalFindStr","incrementalFindStrNotFound","incrementalFindReverseStr","incrementalFindReverseStrNotFound","findReplace","find","undo","redo","cancelMode","findNext","findPrevious","incrementalFind","incrementalFindReverse","indentLines","unindentLines","moveLinesUp","moveLinesDown","copyLinesUp","copyLinesDown","deleteLines","gotoLine","gotoLinePrompty","nextAnnotation","prevAnnotation","expand","collapse","expandAll","collapseAll","lastEdit","trimTrailingWhitespaces","toggleLineComment","addBlockComment","removeBlockComment","linkedModeEntered","linkedModeExited","syntaxError","contentAssist","noProposals","computingProposals","lineColumn","lineColumnOffset","multiSelections","vi","vimove","viyank","videlete","vichange","viLeft","viRight","viUp","viDown","viw","vib","viW","viB","vie","viE","vi$","vi^_","vi+","vi-","vi|","viH","viM","viL","vi/","vi?","vin","viN","vif","viF","vit","viT","vi,","vi;","viG","viycd","via","viA","vii","viI","viO","vio","viR","vis","viS","viC","vip","viP","viStar","next","previous","replace","replaceAll","findWith","replaceWith","caseInsensitive","selectedLines","regex","wholeWord","caseInsensitiveTooltip","selectedLinesTooltip","regexTooltip","wholeWordTooltip","closeTooltip","replacingAll","replacedMatches","nothingReplaced","notFound","EventTarget","addMixin","object","proto","addEventListener","type","listener","useCapture","this","_eventTypes","state","level","listeners","dispatchEvent","evt","_dispatchEvent","len","l","handleEvent","compact","isListening","undefined","removeEventListener","str","parse","regexp","pattern","flags","formatMessage","msg","createElement","document","tagName","createElementNS","XHTML","confineDialogTab","firstElement","lastElement","keyCode","shiftKey","preventDefault","focus","userAgent","isIE","documentMode","isFirefox","parseFloat","isOpera","isChrome","isSafari","isWebkit","isAndroid","isIPad","isIPhone","isIOS","isElectron","isMac","platform","isWindows","isLinux","isTouch","platformDelimiter","mEventTarget","mRegex","util","TextModel","text","lineDelimiter","_lastLineIndex","_text","_lineOffsets","setText","setLineDelimiter","setRange","textModel","modelChangingEvent","sl","getLineAtOffset","start","el","removedCharCount","range","character","getLineStart","end","destroy","options","string","parsed","skip","reverse","wrap","rangeStart","rangeEnd","isRange","result","lastIndex","offset","s","re","RegExp","hasNext","getCharCount","count","getLine","lineIndex","includeDelimiter","lineCount","getLineCount","getText","c","charCodeAt","charCount","high","low","Math","floor","getLineDelimiter","_lineDelimiter","getLineEnd","max","chunk","firstOffset","firstChunk","lastOffset","lastChunk","beforeText","afterText","onChanging","onChanged","modelChangedEvent","all","lines","Array","startLine","endLine","eventStart","removedLineCount","addedCharCount","addedLineCount","cr","lf","newLineOffsets","changedText","endLineOffset","startLineOffset","changeCount","SPLICE_LIMIT","limit","min","firstText","lastText","params","KeyStroke","mod1","mod2","mod3","mod4","toUpperCase","KeySequence","keys","getKeys","String","fromCharCode","which","charCode","metaKey","ctrlKey","altKey","equals","kb","KeyBinding","mKeyBinding","KeyMode","view","_view","_keyBindings","createKeyBindings","_keyBindingIndex","DefaultKeyMode","getKeyBindings","actionID","keyBindings","keyBinding","getView","isActive","getKeyModes","keyBindingIndex","_matchingKeyBindings","matchingKeyBindings","setKeyBinding","predefined","setView","bindings","isMacChrome","TextTheme","_document","THEME_PREFIX","Themes","getTheme","theme","getThemeClass","_themeClass","setThemeClass","className","styleSheet","self","oldThemeClass","_load","onThemeChanged","oldValue","newValue","themeChangedEvent","buildStyleSheet","themeClass","settings","convertCSSname","_capitalRegEx","bind","parseStyles","ancestors","isTopLevel","localResult","forEach","key","styles","_createStyle","link","node","getElementById","firstChild","data","removeChild","appendChild","createTextNode","rel","href","head","getElementsByTagName","documentElement","extension","test","cssText","handler","capture","attachEvent","detachEvent","compare","s1","s2","constructor","contains","topNode","compareDocumentPosition","temp","parentNode","getNodeStyle","defaultValue","style","currentStyle","css","ownerDocument","defaultView","getComputedStyle","getPropertyValue","Animation","play","onFrame","startedAt","Date","now","percentDone","duration","eased","easing","propertyValue","onAnimate","stop","rate","defaultEasing","curve","interval","window","setInterval","clearInterval","onEnd","x","sin","PI","getHandler","breadcrumb","comma","email","filepath","formula","sql","underscore","url","word","xpath","custom","isInputEventSupported","element","agent","checked","contentEditable","isSupported","setAttribute","attachElement","isRtl","nodeType","event","createEvent","initEvent","sArgs","JSON","stringify","isArray","dir","direction","misc","getLocaleDetails","lang","oninput","displayWithStructure","onkeyup","onmouseup","txt","textContent","selection","getSelection","rangeCount","startNode","startOffset","getRangeAt","tempRange","cloneRange","startContainer","textOffset","setStart","setEndBefore","div","cloneContents","innerHTML","getAttribute","format","parent","newOffset","inEnd","removeAllRanges","setEnd","nodeValue","nextSibling","hasChildNodes","addRange","TextSegment","content","actual","textDirection","localGui","isVisible","isSeparator","isParsed","keep","inBounds","inPoints","tools","initBounds","bounds","startAfter","after","endBefore","before","startPos","parseInt","usePos","isNaN","bLength","useLength","loops","getBounds","segment","src","bStart","bEnd","handleSubcontents","segments","subs","sLoops","continued","subDir","handleBounds","aBounds","handleCases","cases","origContent","hArgs","commonHandler","points","handle","handlePoints","pos","common","isBidiLocale","some","bidiLang","LRE","RLE","PDF","LRM","RLM","LRO","RLO","full","country","removeUcc","removeTags","getDirection","guiDir","checkEnd","fdc","hasArabicChar","showMarks","mark","hideMarks","showTags","hideTags","stext","parseAndDisplayStructure","fArgs","isHtml","displayStructure","parseStructure","checkArguments","fullCheck","getResultWithHtml","getResultWithUcc","checkedDir","prevDir","lDir","locDir","sttDir","restore","stt","parseOnly","getDir","ind","getDirectionOfLanguage","checkParameters","msgDir","msgLang","phDir","phLang","phPacking","phStt","parametersChecked","setDefaults","hasHtmlArg","spLength","epLength","last","m","tSegments","ph","tArgs","arg","checkArr","inLoop","indArr","t","sttType","sttSegs","getHtml","attach","getString","bidiFormat","setBrowserLangDirection","dojoConfig","isBidi","isBidiEnabled","htmlElement","bidiEnabled","localStorage","getItem","bidiEnabledStorage","getBidiLayout","_bidiLayout","bidiLayoutStorage","getTextDirection","bidiLayout","checkContextual","enforceTextDirWithUcc","trim","addBidiEventListeners","input","_hasBidiEventListeners","eventTypes","handleInputEvent","initInputField","enforceTextDir","comments","styleClass","startsWith","newStyle","attributes","enforceSTT","Metrics","serviceRegistry","serviceArray","services","refs","getServiceReferences","getService","location","protocol","hostname","pathname","search","page","title","_services","pageLoad","registerService","_logTiming","timingCategory","timingVar","timingValue","timingLabel","logTiming","_logEvent","category","action","label","details","logEvent","_logPageLoadTiming","performance","getEntriesByName","timingVars","create","logPageLoadTiming","messages","mTextModel","mKeyModes","mTextTheme","textUtil","bidiUtils","mMetrics","getWindow","doc","parentWindow","newArray","applyStyle","reset","attrs","specified","removeAttribute","properties","a","clone","merge","obj1","obj2","convertDelimiter","addTextFunc","addDelimiterFunc","getBorder","left","_top","right","bottom","win","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","top","getPadding","paddingLeft","paddingTop","paddingRight","paddingBottom","getLineTrim","_trim","border","DOMReady","_parent","insertListener","animationName","__DOMReady","template","props","_frames","classRule","addHandler","insertBefore","Selection","caret","_columnX","DOMSelection","_divs","_clipDiv","_rootDiv","_createSelectionDiv","TextRect","rect","TextLine","lineDiv","_lineDiv","TextView","_init","removeHandler","editing","selections","back","_editing","convert","sort","b","_docX","extend","tmp","setCaret","getCaret","getAnchor","getOrientedSelection","toString","isEmpty","setPrimary","enabled","primary","update","focused","_hasFocus","visible","_cursorVisible","cursor","_selection","visibility","zIndex","background","setSelection","model","_model","firstNode","_getLineNext","bottomNode","topOffset","bottomOffset","lastNode","_getLinePrevious","_getLineNode","_setDOMSelection","endNode","endOffset","startCaret","_setDOMFullSelection","_line","getNodeOffset","_getWindow","sel","createRange","anchorNode","anchorOffset","focusNode","focusOffset","_anchorNode","_anchorOffset","_focusNode","_focusOffset","_ignoreSelect","_cursorDiv","getClientRects","cursorParent","clientRect","getBoundingClientRect","scrollTop","scrollLeft","body","child","createTextRange","moveToElementText","moveStart","endRange","setEndPoint","select","width","height","_fullSelection","viewPad","_getViewPadding","_clientDiv","viewRect","_viewDiv","hd","vd","clipRect","rootpRect","_ignoreDOMSelection","endRect","startRect","r","sel1Div","sel1Left","sel1Top","sel1Right","sel1Bottom","sel3Left","sel3Top","sel3Right","sel3Bottom","sel3Div","abs","sel2Div","drawing","_createLine","lineText","textView","onLineStyle","viewStyle","viewLineText","ranges","viewRanges","tabOffset","_createRanges","_metrics","largestFontStyle","ignoreChars","span","oldSpan","oldStyle","oldText","oldEnd","lineWidth","frag","createDocumentFragment","_createSpan","changeStart","_rectsCache","spanEnd","styleStart","styleEnd","_createRange","unmergeable","tabSize","_customTabSize","bidiStyle","bidi","unicodeBidi","bidiRange","tabIndex","spacesCount","spaces","isLink","hasLink","_linksVisible","html","ignore","cloneNode","_handleLinkClick","_ensureCreated","_createdDiv","absolute","_getLineBoundingClientRect","lineOffset","lineChild","textNode","nodeLength","_nodeLength","_isRangeRects","fixIE8","moveEnd","_getSelections","_updateDOMSelection","xFactor","screen","logicalXDPI","deviceXDPI","yFactor","logicalYDPI","deviceYDPI","_wrapMode","rects","_getClientRects","parentRect","newRects","center","noTrim","lastChild","previousSibling","lastRect","padding","getLineIndex","getOffset","getModelOffset","modelOffset","lineNode","lineNodeOffset","offsetNode","ignored","childText","childOffset","ch","y","hitChild","rangeLeft","rangeTop","rangeRight","rangeBottom","rects1","that","rl","lineRect","mid","move","found","trailing","offsetInLine","newText","q","rangeChild","hitRects","rect1","_lastHitChild","_lastHitOffset","previousOffset","nextOffset","previousChild","nextChild","getNextOffset","unit","_getNextOffset_W3C","_getNextOffset_IE","_isPunctuation","_isWhitespace","lineLength","step","previousPunctuation","previousLetterOrDigit","punctuation","letterOrDigit","updateLinks","replaceChild","addKeyMode","mode","keyModes","_keyModes","_modeAdded","addRuler","ruler","rulers","_rulers","sideIndex","getLocation","_createRuler","_update","computeSize","w","h","clientDiv","clientWidth","_getLine","viewPadding","scrollWidth","from","to","_scroll","_getScroll","_doCopy","_doCut","_destroyView","onDestroy","_theme","_doubleClickSelection","_actions","hasFocus","getActionDescription","actionDescription","getActions","defaultAction","actions","defaultHandler","getBottomIndex","fullyVisible","_getBottomIndex","getBottomPixel","_getClientHeight","getCaretOffset","_getSelection","getClientArea","_getClientWidth","getHorizontalPixel","getLineHeight","_getLineHeight","_getLineIndex","isValidTextPosition","getOffsetAtLocation","getLinePixel","_getLinePixel","getLocationAtOffset","_doMove","getOptions","_defaultOptions","option","getModel","getRulers","getSelections","getSelectionText","delimiter","_getBaseText","getTopIndex","_getTopIndex","getTopPixel","invokeAction","actionOptions","isDestroyed","onContextMenu","contextMenuEvent","onDragStart","dragEvent","onDrag","onDragEnd","onDragEnter","onDragOver","onDragLeave","onDrop","destroyEvent","onSaving","savingEvent","onInputChanged","inputChangedEvent","lineStyleEvent","onKeyDown","keyEvent","onKeyPress","onKeyUp","onModelChanged","onModelChanging","onModify","modifyEvent","onMouseDown","mouseEvent","onMouseUp","onMouseMove","onMouseOver","onMouseOut","onTouchStart","touchEvent","onTouchMove","onTouchEnd","onOptions","optionsEvent","onSelection","selectionEvent","onScroll","scrollEvent","onVerify","verifyEvent","onFocus","focusEvent","onBlur","blurEvent","_doPaste","redraw","_redrawCount","redrawRulers","redrawLines","divRuler","_getRulerParent","_ruler","rulerChanged","_lineHeight","_resetLineHeight","imeLineIndex","_imeOffset","getOverview","lineChanged","_maxLineIndex","_checkMaxLineIndex","_maxLineWidth","_queueUpdate","redrawRange","removeKeyMode","_modeRemoved","removeRuler","_destroyRuler","resize","_handleResize","setAction","setCaretOffset","show","_setSelection","setHorizontalPixel","pixel","_scrollView","setRedraw","setModel","_modelListener","oldLineCount","oldCharCount","newLineCount","newCharCount","_reset","setOptions","defaultOptions","setSelections","_rangesToSelections","edit","isSingle","_code","_variableLineHeight","_modifyContent","_fixCaret","setTopIndex","topIndex","_scrollViewAnimated","setTopPixel","showSelection","_showCaret","styleChanged","sync","invalid","_updateStyle","_handleRootMouseDown","_cancelCheckSelection","_ignoreEvent","_overlayDiv","draggable","_ignoreBlur","srcElement","stopPropagation","_isW3CEvents","_handleRootMouseUp","_handleBlur","_commitIME","rootDiv","display","_domSelection","domSelection","parentElement","empty","_ignoreFocus","_handleCompositionStart","_imeTimeout","clearTimeout","_imeText","_startIME","_mutationObserver","disconnect","_handleCompositionUpdate","_handleCompositionEnd","_handleContextMenu","_lastMouseButton","_createMouseEvent","screenX","screenY","defaultPrevented","button","_contextMenuOpen","_checkSelectionChange","_pollSelectionChange","_handleCopy","_ignoreCopy","_handleCut","_handleDataModified","_handleDblclick","time","timeStamp","_lastMouseTime","_clickCount","_handleMouse","_handleDragStart","_dragOffset","_isMouseDown","_handleDrag","_handleDragEnd","_dropTarget","dataTransfer","dropEffect","mozUserCancelled","_handleDragEnter","prevent","_handleDragOver","_handleDragLeave","_handleDrop","_handleFocus","_lastTouchOffset","_handleKeyDown","_createKeyEvent","_keyDownPrevented","modifier","_setLinksVisible","_readonly","startIME","_keyDownEvent","_doAction","cancelBubble","returnValue","_handleKeyPress","_doContent","_handleDocKeyUp","_handleKeyUp","block","add","_blockSelection","drag","_setSelectionTo","clientX","clientY","_setGrab","_handleMouseDown","timeDiff","deltaX","_lastMouseX","deltaY","_lastMouseY","sameButton","_clickTime","_clickDist","_handleMouseOver","_animation","_handleMouseOut","_handleMouseMove","inClient","_isClientDiv","changed","_lastMouseMoveX","_lastMouseMoveY","_checkOverlayScroll","leftEdge","topEdge","rightEdge","bottomEdge","_doAutoScroll","_endAutoScroll","pt","clickCount","_createTouchEvent","touches","touchCount","_handleMouseUp","_handleMouseWheel","_noScroll","lineHeight","pixelX","pixelY","wheelDelta","deltaMode","detail","axis","HORIZONTAL_AXIS","denominatorX","denominatorY","deltaTime","_wheelTimeStamp","wheelDeltaX","wheelDeltaY","ceil","linesToScroll","_mouseWheelLine","oldScroll","newScroll","_handlePaste","_ignorePaste","newWidth","newHeight","clientHeight","_rootWidth","_rootHeight","queue","metrics","_calculateMetrics","_handleRulerEvent","divHeight","arrowWidth","contentHeight","trackHeight","onClick","onDblClick","relatedTarget","_handleScroll","_lastScrollTime","oldX","_hScroll","oldY","_vScroll","_handleSelectStart","menuOpen","_getModelOffset","_updateSelectionFromDOM","firstLine","lastLine","_cancelPollSelectionChange","_selPollTimer","retryPoll","_handleSelectionChange","_handleTextInput","deleteContents","insertNode","nodeText","_getDOMText","lineRemoved","delta","deltaText","deltaStart","deltaEnd","_handleTouchStart","_touchScrollTimer","_vScrollDiv","_hScrollDiv","touch","_touchStartX","_touchStartY","pageY","pageYOffset","pageX","pageXOffset","_touchStartTime","_touching","_handleTouchMove","_touchCurrentX","_touchCurrentY","_touchSpeedX","_touchSpeedY","_handleTouchEnd","removeTab","expandTab","_tabSize","_doBackspace","_expandTab","_doCase","changes","_overwriteMode","_setClipboardText","_doCursorNext","_doCursorPrevious","_doDelete","_doEnd","ctrl","visualIndex","_doEnter","_singleMode","noCursor","_doEscape","_doHome","_doLineDown","wholeLine","lastLineCount","_doLineUp","_doNoop","_doPageDown","pageScroll","caretLine","caretRect","_getBoundsAtOffset","linePixel","scrollLines","verticalMaximum","scrollOffset","_doPageUp","_getClipboardText","_doScroll","_scrollHeight","verticalScrollOffset","selectionHeight","_doSelectAll","_doTab","_tabMode","_doShiftTab","_doOverwriteMode","overwriteMode","_doTabMode","tabMode","_doWrapMode","wrapMode","_autoScroll","_autoScrollDir","_autoScrollX","_autoScrollY","_getBlockSelections","_autoScrollTimer","_autoScrollTimerID","_AUTO_SCROLL_RATE","_calculateLineHeightTimer","calculate","_calculateLHTimer","MAX_TIME","_calculateLineHeight","position","span1","span2","fontStyle","span3","fontWeight","span4","spanRect1","spanRect2","spanRect3","spanRect4","h1","h2","h3","h4","pad","div1","div2","rect2","overflow","w1","w2","wrapWidth","marginWidth","charWidth","_wrapOffset","_marginOffset","lineTrim","_cancelAnimation","_clearSelection","insertText","_scrollDiv","_createActions","noop","shiftTab","_createRulerParent","MozUserSelect","WebkitUserSelect","rulerParent","_marginDiv","rulerWidth","cssFloat","styleFloat","outline","children","sibling","borderWidth","margin","_createView","checkDOMReady","WebkitTextSizeAdjust","leftDiv","_leftDiv","viewDiv","rightDiv","_rightDiv","innerRightDiv","_innerRightDiv","scrollDiv","marginDiv","clipDiv","clipScrollDiv","_clipScrollDiv","WebkitTapHighlightColor","_setFullSelection","vScrollDiv","borderColor","borderStyle","borderRadius","backgroundColor","opacity","hScrollDiv","setCapture","overlayDiv","_setWrapMode","_setReadOnly","_setThemeClass","_setTabSize","_setMarginOffset","_hookEvents","scrollAnimation","readonly","fullSelection","singleMode","_setSingleMode","noScroll","_setNoScroll","_setOverwriteMode","blockCursorVisible","_setBlockCursor","marginOffset","wrapOffset","_setWrapOffset","wrappable","undoStack","_setUndoStack","_setTheme","_unhookEvents","_updateTimer","_cursorTimer","_clipboardDiv","blur","getBaseModel","mapOffset","_bottomChild","filter","o1","o2","_getInnerRightWidth","innerRightWidth","innerRightRect","wholeText","clipboardText","clipboardData","getData","__electron","clipboard","readText","clipboardDiv","whiteSpace","_getText","noteText","_getTextFromElement","execCommand","ex","childNodes","innerText","newRange","selectNode","oldRanges","_topIndexY","restrictToValidLines","cancelAnimation","_topChild","_onModelChanging","_onModelChanged","_themeListener","_handlers","grabNode","deferScroll","deferredHandler","MO","MutationObserver","MozMutationObserver","mutations","observe","subtree","characterData","_hookRulerEvents","_grabControl","_moseMoveClosure","_mouseUpClosure","overlay","_isOverOverlayScroll","pointerEvents","vertical","horizontal","scrollShowing","overlayScrollWidth","_startUndo","_undoStack","_compoundChange","startCompoundChange","_endUndo","endCompoundChange","caretAtEnd","oldStart","previousSelection","preserveSelection","owner","ps","_ignoreQueueUpdate","_resetLineWidth","_scrollAnimation","_ensureCaretVisible","writeText","success","setData","cleanup","releaseCapture","_hadFocus","preserveCursorX","newSelection","oldSelection","down","extent","doubleClickLine","init","_blockCursorVisible","_updateBlockCursorVisible","overwrite","cursorDiv","color","readOnly","_updateOverflow","OTabSize","MozTabSize","viewContainerClass","globalThemeClass","_wrappable","wordWrap","allSelection","showOptions","endInclusive","minScroll","hasShowOptions","alwaysScroll","scrollPolicy","flag","viewAnchor","selectionAnchor","viewAnchorOffset","selected","hScrollOnly","needUpdate","hScroll","vScroll","scrollbarWidth","topIndexY","leftWidth","leftRect","scrollHeight","tempLineHeight","totalHeight","totalLineIndex","round","rootWidth","rootHeight","linesPerPage","bottomIndex","bottomHeight","foundBottomIndex","lh","_updateRuler","rightWidth","rightRect","clientHeightNoScroll","clientHeightScroll","oldHScroll","overflowX","clientWidthNoScroll","clientWidthScroll","oldVScroll","overflowY","thumbHeight","trackWidth","thumbWidth","clipLeft","clipTop","clipWidth","clipHeight","clientLeft","clientTop","clipRight","clipBottom","clip","ensureCaretVisible","overview","getRulerStyle","widthDiv","annotation","getWidestAnnotation","annotations","getAnnotations","_oldTrackHeight","_updateStyleSheet","styleText","ProjectionTextModel","baseModel","_projections","_listener","_onChanged","_onChanging","addProjection","projection","projections","_lineIndex","_lineCount","_binarySearch","getProjections","baseOffset","removeProjection","_removeProjection","noEvents","array","projectionLineIndex","lineDelta","projectionOffset","offsetDelta","change","_change","baseStart","baseEnd","baseText","removed","_expand","modelChangedEvent1","hasChange","modelChangingEvent1","startProjection","endProjection","mapStart","mapEnd","factory","orion","Deferred","run","fn","shift","running","enqueue","runAsync","noReturn","settleDeferred","deferred","listenerResult","listenerThen","then","promise","reject","TypeError","listenerResultCancel","cancel","_parentCancel","resolve","progress","notify","methodName","_reject","_this","_resolve","once","valueThen","valueCancel","thenError","parentCancel","cancelError","onFulfill","onReject","onProgress","process","nextTick","observer","promises","optOnError","onResolve","rejected","when","$","selector","querySelector","$$","querySelectorAll","$$array","either","theNode","Boolean","_getTabIndex","focusableElements","frame","iframe","img","isindex","textarea","nodeName","firstTabbable","disabled","offsetParent","lastTabbable","installShowContextMenu","xPos","yPos","focusElement","activeElement","initMouseEvent","trapTabs","tabTrapInstalled","KEY","TAB","first","processNodes","matches","variableRegEx","processElementNode","attribute","pixelValueOf","attrName","intVal","processTextNodes","targetNode","replaceText","processDOMNodes","replaceNodes","replaceNode","addAutoDismiss","excludeNodes","dismissFunction","onclick","autoDismissNodes","autoDismissNode","excludeNodeInDocument","excluded","excludeNode","dismiss","console","message","unhook","removeAutoDismiss","getOffsetParent","setFramesEnabled","enable","frames","validId","keyName","KEY_CODE","createNodes","templateString","newNodes","BKSPC","ENTER","SHIFT","CONTROL","ALT","ESCAPE","SPACE","PAGEUP","PAGEDOWN","END","HOME","LEFT","UP","RIGHT","DOWN","INSERT","DEL","COMMAND","mTextView","mProjectionTextModel","lib","Tooltip","editor","_editor","_create","getTooltip","_tooltip","_tooltipDiv","tooltipDiv","_tipShowing","_mouseDownHandler","_locked","hide","_scrollHandler","_topPixel","_leftPixel","_mouseMoveHandler","_prevX","_prevY","_isInRect","_outerArea","classList","remove","tooltipInfo","locked","giveFocus","_giveFocus","_processInfo","getTooltipInfo","noContent","_showContents","onHover","_anchorArea","_tooltipArea","clearLock","hover","clearQuickFixes","_tooltipContents","maxWidth","maxHeight","_hoverPromises","resolved","_tipRect","newTooltipContents","contents","_renderImmediateInfo","context","computeHoverInfo","hoverPromise","_renderPluginContent","offsetStart","offsetEnd","allowFullWidth","log","stack","newContentsDiv","tooltipArea","_computeAnchorArea","_computeTooltipArea","_computeOuterArea","_setInitialFocus","anchorArea","mappedStart","mappedEnd","_computeRectangleFromOffset","mappedOffset","divBounds","tipRect","image","complete","viewBounds","viewportLeft","viewportTop","viewportWidth","viewportHeight","defWidth","defHeight","contentWidth","offsetWidth","spaceBelow","spaceAbove","spaceRight","offsetX","tooltipOffsetX","offsetY","tooltipOffsetY","positionRight","tipRight","positionBottom","tipBottom","_isNode","Node","toFocus","xOK","yOK","tv","curLine","maxX","possibleEnd","endPos","contentsDiv","sectionDiv","hiddenTitle","titleDiv","renderMarkDown","contentDiv","sandbox","srcdoc","_getAnnotationContents","tooltipTheme","contentsView","_contentsView","size","getAnnotationHTML","allAnnotations","inEditor","htmlHolder","targetType","viewportOffset","renderQuickFixes","newAnnotations","groupAnnotation","newModel","getAnnotationModel","tooltipHTML","em","AnnotationType","FoldingAnnotation","projectionModel","_projectionModel","_expandedHTML","_expandedStyle","expanded","registerType","lineStyling","lastIndexOf","overviewStyle","lineStyle","rangeStyle","AnnotationTypeList","binarySearch","inclusive","AnnotationModel","_annotations","setTextModel","AnnotationStyler","annotationModel","_annotationModel","_onDestroy","_onLineStyle","_onAnnotationModelChanged","_collapsedHTML","_collapsedStyle","_collapse","modifyAnnotation","_collapseImpl","checkOverlaping","_forEachOverlaping","_expandImpl","_recollapse","_projection","ANNOTATION_FOLDING","ANNOTATION_ERROR","ANNOTATION_WARNING","ANNOTATION_INFO","ANNOTATION_TASK","ANNOTATION_BREAKPOINT","ANNOTATION_CONDITIONAL_BREAKPOINT","ANNOTATION_BOOKMARK","ANNOTATION_CURRENT_BRACKET","ANNOTATION_MATCHING_BRACKET","ANNOTATION_CURRENT_LINE","ANNOTATION_HIGHLIGHTED_LINE","ANNOTATION_CURRENT_SEARCH","ANNOTATION_MATCHING_SEARCH","ANNOTATION_SEARCH_RANGE","ANNOTATION_READ_OCCURRENCE","ANNOTATION_WRITE_OCCURRENCE","ANNOTATION_SELECTED_LINKED_GROUP","ANNOTATION_CURRENT_LINKED_GROUP","ANNOTATION_LINKED_GROUP","ANNOTATION_BLAME","ANNOTATION_CURRENT_BLAME","ANNOTATION_DIFF_ADDED","ANNOTATION_DIFF_DELETED","ANNOTATION_DIFF_MODIFIED","ANNOTATION_COLLAB_LINE_CHANGED","annotationTypes","createAnnotation","getType","addAnnotationType","priority","_annotationTypes","getAnnotationTypePriority","getAnnotationsByType","iter","isAnnotationTypeVisible","_visibleAnnotationTypes","setAnnotationTypeVisible","removeAnnotationType","addAnnotation","added","getTextModel","_getAnnotationIndex","removeAnnotations","removeAnnotation","replaceAnnotations","startIndex","textModelChangedEvent","_oldStart","_oldEnd","_mergeStyle","_mergeStyleRanges","styleRange","mergedStyle","viewModel","annotationStart","annotationEnd","getPrototypeOf","toArray","o","mTooltip","mAnnotations","objects","BaseEditor","_domNode","domNode","_statusReporter","statusReporter","_title","checkDirty","Editor","_textViewFactory","textViewFactory","_undoStackFactory","undoStackFactory","_textDNDFactory","textDNDFactory","_annotationFactory","annotationFactory","_zoomRulerFactory","zoomRulerFactory","_foldingRulerFactory","foldingRulerFactory","_lineNumberRulerFactory","lineNumberRulerFactory","_contentAssistFactory","contentAssistFactory","_keyBindingFactory","keyBindingFactory","_hoverFactory","hoverFactory","_syntaxHighlighter","syntaxHighlighter","_annotationStyler","_annotationRuler","_lineNumberRuler","_overviewRuler","_zoomRuler","_foldingRuler","_contentAssist","AT","HIGHLIGHT_ERROR_ANNOTATION","uninstall","setDirty","isClean","getTitle","getUndoStack","install","installed","isDirty","_dirty","markClean","onDirtyChanged","dirtyChangedEvent","reportStatus","isAccessible","dirty","_setSyntaxCheckRequired","required","_syntaxCheckRequired","_isSyntaxCheckRequired","_setModelText","setInput","contentsSaved","getAnnotationRuler","getAnnotationRulerVisible","_annotationRulerVisible","getAnnotationStyler","getContentAssist","getFoldingRuler","getFoldingRulerVisible","_foldingRulerVisible","addFoldingAnnotation","foldingAnnotation","getTextView","getLineNumberRuler","getLineNumberRulerVisible","_lineNumberRulerVisible","_textView","getZoomRuler","getZoomRulerVisible","_zoomRulerVisible","getOverviewRuler","getSourceCodeActions","_sourceCodeActions","getLinkedMode","_linkedMode","getTextActions","_textActions","setAnnotationRulerVisible","setFoldingRulerVisible","textActions","expandAnnotations","setLineNumberRulerVisible","setOverviewRulerVisible","_overviewRulerVisible","setZoomRulerVisible","setAnnotationTypesVisible","types","_annotationTypesVisible","setOverviewAnnotationTypesVisible","_overviewAnnotationTypesVisible","setTextAnnotationTypesVisible","_textAnnotationTypesVisible","getStyleAccessor","styleAccessor","styler","getStyler","_expandOffset","caretOffset","moveSelection","_getTooltipInfo","annotationStyler","rangeAnnotations","_highlightCurrentLine","newSelections","oldSelections","getHighlightLines","p1","oldLines","newLines","_currentLineAnnotations","installTextView","highlightLine","unhighlightLine","addRemoveAnnotation","annotationType","createUndoStack","_textDND","createTextDND","contentAssistMode","createContentAssistMode","tooltip","_hover","createHover","mouseDown","lastMouseX","lastMouseY","_hoverTimeout","_updateCursorStatus","linkedMode","sourceCodeActions","rulerOnDblClick","addRemoveBookmark","addRemoveConditionalBreakpoint","addRemoveBreakpoint","createAnnotationModel","createAnnotationStyler","createAnnotationRulers","annotationRuler","setMultiAnnotationOverlay","overviewRuler","createZoomRuler","createLineNumberRuler","createFoldingRuler","textViewInstalledEvent","uninstallTextView","textViewUninstalledEvent","isStatusActive","_status","languageTools","showAnnotations","creatorID","description","showProblems","problems","severity","showOccurrences","occurrences","readAccess","showBlame","blameMarkers","blameRGB","_blameRGB","blameStyle","i1","i2","createGroup","groupType","blame","Message","commitLink","CommitLink","AuthorName","Time","blameMarker","Start","End","blameColor","Shade","groupId","Name","createGroupAnnotation","AuthorImage","showDiffAnnotations","diffs","setNoFocus","noFocus","_noFocus","onGotoLine","column","IncrementalFind","_active","_success","_ignoreSelection","_prefix","setActive","_backspace","_forward","Find","_showAll","_selectedLines","_visible","_caseInsensitive","_wrap","_wholeWord","_incremental","_regex","_findAfterReplace","_hideAfterFind","_reverse","_start","_end","_timer","_lastString","_listeners","onEditorFocus","_removeCurrentAnnotation","forward","incremental","iterator","findResult","active","tempOptions","getFindString","findString","savedOptions","_startOffset","getStartOffset","_doFind","isRangeSearch","where","_searchRangeModel","searchString","showAll","findAfterReplace","hideAfterFind","findCallback","_findCallback","getReplaceString","_savedOptions","pop","_removeAllAnnotations","_processReplaceString","newStr","replaceString","startUndo","_doReplace","endUndo","_replacingAll","_doFindForReplaceAll","_markAllOccurrences","_selectedLinesl","annotateSearchRange","multipleLine","postSelectedLines","_incrementalDisabled","startL","endL","_findFromModel","noWrap","_find","searchStr","mFind","FindUI","_findInput","_replaceInput","replaceInput","_selectedLinesUI","_checked","_createContents","findInput","placeholder","_handleInput","group","_createButton","_toggle","close","parentDom","ariaLabel","handled","ctrlKeyOnly","mFindUI","forEachSelection","compound","noUndo","TextActions","_incrementalFind","_lastEditLocation","SourceCodeActions","contentAssistProposalApplied","_lastEditListener","expandAnnotation","gotoLastEdit","insertOffset","currentOffset","prompt","delimiterLength","lineEndNoDelimiter","delimiterStart","delimiterEnd","iterationMode","list","_lastPosition","curAnnotations","theMode","_iterationMode","foundAnnotation","foundAnnotations","spaceTab","removeCount","firstRemoveCount","lastLineStart","autoIndent","autoPairBrackets","handleClosingBracket","autoPairQuotations","indent","prevCharIdx","lineTextBeforeCaret","lineTextAfterCaret","smartIndentation","trimRight","whitespaceBeforeCaret","whitespaceAfterCaret","trimLeft","autoCompleteComments","matchCommentEnd","matchCommentStart","matchCommentDelimiter","prevLine","open","delimiters","getBlockCommentDelimiters","_findEnclosingComment","commentStart","commentEnd","oldLength","newLength","openBracket","closeBracket","autoPairSquareBrackets","autoPairBraces","autoPairParentheses","autoPairAngleBrackets","isClosingBracket","nextChar","quotation","autoPairQuotation","isQuotation","isAlpha","insertQuotation","prevChar","escapePosition","proposal","positions","positionGroups","enterLinkedMode","groups","openPos","closePos","newStart","newEnd","selectedText","comment","getLineCommentDelimiter","uncomment","lineIndices","selStart","selEnd","matchTrailingWhiteSpace","lineStartOffset","matchLength","closingChar","lineNum","setAutoPairParentheses","setAutoPairBraces","setAutoPairSquareBrackets","setAutoPairAngleBrackets","setAutoPairQuotations","setAutoCompleteComments","setSmartIndentation","Change","previousText","CompoundChange","UndoStack","shared","getRedoChanges","getUndoChanges","_doUndoRedo","endSelection","startSelection","compoundChange","_commitUndo","cleanChange","canUndo","canRedo","getSize","_ignoreUndo","_trackUnsavedChanges","_unsavedChanges","_previousChangeType","previousChange","BaseRuler","rulerLocation","rulerOverview","rulerStyle","_location","_overview","_rulerStyle","Ruler","onTextModelChanged","_onTextModelChanged","onAnnotationModelChanged","setAnnotationModel","LineNumberRuler","oddStyle","evenStyle","_oddStyle","_evenStyle","_numOfDigits","_firstLine","AnnotationRuler","OverviewRuler","FoldingRuler","annotationLineStart","annotationLineEnd","visualLineIndex","ls","rulerAnnotation","_mergeAnnotation","_multiAnnotation","_multiAnnotationOverlay","_multiple","setMultiAnnotation","selectionStart","selectionEnd","_findNextAnnotation","_currentClickGroup","_setCurrentGroup","showTooltip","_tooltipLineIndex","_curElementBounds","_getAnnotationsAtLineIndex","_getTooltipContents","selectedAnnotation","searchStart","selectedAnnotations","useNextValid","hoverArea","_getOnClickTooltipInfo","annotationLineIndex","currentGroupAnnotation","_currentGroupAnnotation","mapLine","setFirstLine","numOfDigits","fontSize","previousAnnotation","annotationLineCount","mapLineIndex","ZoomRuler","_destroy","rulerTheme","updateWindow","scroll","zoomFactor","zoomView","windowDiv","getProps","zoomPadding","zoomLineHeight","documentHeight","zoomDocumentHeight","zoomClientHeight","windowHeight","toZoom","updateScroll","updateWidth","oldWidth","up","thumbPos","_zoomView","_windowDiv","_scrollListener","_resizeListener","_redrawListener","_optionsListener","_lineListener","TextDND","_dragSelection","_dropOffset","_dropText","_onDragStart","_onDragEnd","_onDragEnter","_onDragOver","_onDrop","effectAllowed","_dropEffect","allowed","LinkedContentAssist","linkedData","_data","LinkedMode","linkedModeModel","exitLinkedMode","selectLinkedGroup","selectedGroupIndex","linkedModeListener","onActivating","_groupContentAssistProvider","setProviders","setProgress","evnt","ignoreVerify","positionChanged","_getPositionChanged","deltaCount","sortedPositions","inside","ansestor","_updateAnnotations","oldOffset","chop","computeProposals","buffer","proposals","linkedstyle","values","val","linkedtitle","unselectable","_sortedPositions","previousModel","parentGroup","nextModel","slf","provider","getPrefix","deactivate","activate","_getModelPositions","_getSortedPositions","mActions","mUndoStack","mRulers","mTextDND","mLinkedMode","KeyBindingsFactory","UndoFactory","LineNumberRulerFactory","FoldingRulerFactory","ZoomRulerFactory","AnnotationFactory","TextDNDFactory","searcher","mFactories","ContentAssist","pageMessage","State","INACTIVE","clearProviders","_textViewListeners","_latestModelChangingEvent","_updateFilterText","isDeactivatingChange","setState","ACTIVE","FILTERING","filterProposals","ContentAssistMode","ContentAssistWidget","widget","selectedIndex","showWidget","autoApply","nextIndex","scrollIndex","setContentAssistMode","createAccessible","isShowing","_useResizeTimer","_contentAssistMode","_showTooltip","autoDismissFunctionAdded","autoDismissFunction","scrollListener","STYLES","hr","emphasis","strikethrough","noemphasis","noemphasis_title","noemphasis_title_keywords","dfault","_initialCaretOffset","getPrefixStart","proposalText","additionalEdits","providers","autoTriggered","_autoTriggered","isDeactivating","isPriorToInitialCaretOffset","eventType","_mode","onStateChange","setMode","_removeTextViewListeners","_filterText","_computedProposals","_addTextViewListeners","_autoApply","_computeProposals","flatProposalArray","_flatten","_autoTriggerEnabled","handleError","initialize","_providers","providerInfoArray","indentation","_self","providerInfo","ecProvider","editorContext","func","computePrefixFunc","computePrefix","editorContextProvider","getEditorContext","computeContentAssist","getProposals","err","allPromises","foundProposal","setErrorMessage","showWhile","prefixStart","defaultPrefix","prefixText","proposalArray","includedProposals","getRegexp","modifiedFilter","proposalString","activated","_removeExtraUnselectableElements","mappedProposals","keepElement","nextProposal","setEditorContextProvider","_generateProviderId","_idcount","setAutoTriggerEnabled","enableAutoTrigger","_updateAutoTriggerListenerState","setProviderInfoArray","_charTriggersInstalled","charTriggers","getProviders","setStyleAccessor","_styleAccessor","arrayOrObjectArray","reduce","prev","curr","filteredArray","filteredArrayStyle","firstArrayStyle","_triggerListener","stylesAtOffset","providerInfosToActivate","currentChar","isExcluded","excludedStyles","getStyles","_boundTriggerListener","_triggerListenerInstalled","_textViewListenersAdded","selectNew","newIndex","tipArea","_hideTooltip","newSelected","getProposal","previousCloneNode","preserveCloneThroughScroll","_removeCloneNode","previousSelectedNode","createDiv","itemIndex","_createDisplayNode","contentAssistProposalIndex","simpleName","_createNameNode","nameNode","usingDescription","descriptionNode","tagsNode","_createTagsNode","tags","_stopResizeTimer","_resizeTimer","_startResizeTimer","_cachedResizeBound","bound","tag","cssClass","tagNode","nodeIndex","nodes","offsetTop","offsetHeight","nodeAtIndex","scrollIntoView","_hideTimeout","_fadeTimer","textBounds","parentWidth","parentStyle","nodeStyle","allPadding","parentTop","horizontalOffset","cloneLeft","parentClone","recursiveSetIndex","caretLocation","leftSide","PatternBasedAdapter","grammars","rootIds","contentType","_patternManager","PatternManager","_contentType","_unnamedCounter","_patterns","_firstLineMatches","_rootIds","grammar","_addRepositoryPatterns","repository","_addPatterns","patterns","firstLineMatch","Block","typeId","initFn","contentStart","contentEnd","_subBlocks","computeBlocks","TextStylerAccessor","_styler","TextStyler","stylerAdapter","_whitespacesVisible","_highlightCaretLine","_foldingEnabled","_detectTasks","_annotationProviders","_stylerAdapter","setStyler","_accessor","_bracketAnnotations","_onMouseDown","_onSelection","computeRootBlock","createPatternBasedAdapter","blockSpansBeyondEnd","regexEnd","_eolRegex","endIndex","maxBlockCount","results","Infinity","blockPatterns","_findMatch","regexBegin","_updateMatch","resultEnd","endRegex","testPattern","resolvedEndRegex","_substituteCaptureValues","testBlock","createBlock","subBlocks","getBlocks","computeStyle","fullBlock","contentName","captures","testString","beginCaptures","endCaptures","_getCaptureStyles","newBlock","linePatterns","enclosurePatterns","_initPatterns","_textModel","languageBlock","_getLanguageBlock","COMMENT_BLOCK","begin","literal","getBlockContentStyleName","getBlockEndStyle","_styles","getBlockFoldBounds","getBlockOverrideStyles","_containsCaptureRegex","getBlockStartStyle","getBracketMatch","closingName","atStart","_PUNCTUATION_SECTION_BEGIN","_PUNCTUATION_SECTION_END","closingBracket","beginName","endName","getContentType","COMMENT_LINE","ignoreCaptures","oldLastIndex","substyles","tokenStyle","_mergeStyles","firstLineChanged","verifyBlock","ancestorBlock","parentBlock","searchStartIndex","currentMatch","blocks","testBeforeMatch","initialLastIndex","_linebreakRegex","lineString","indexAdjustment","char","_NEWLINE","_CR","revertIndex","stringIndex","getBlockAtIndex","embeddedNameRegex","getRootBlock","patternManager","getPatterns","initRegex","matchString","_ignoreCaseRegex","_FLAGS","lastBlock","fullStyle","resultStyles","resolvedResult","regexString","_captureReferenceRegex","minimumIndex","regEx","newId","_computeRootId","_rootId","parentId","qualifiedId","_NO_ID","indexCounter","resultObject","include","_processInclude","newPattern","_addPattern","patternId","firstLineText","defaultId","matchId","searchExp","adjustBounds","isRenderingWhitespace","_isRenderingWhitespace","addAnnotationProvider","rootBounds","startTime","_rootBlock","_computeFolding","_computeTasks","_replaceAnnotations","_findBlock","removeAnnotationProvider","setDetectHyperlinks","setDetectTasks","setFoldingEnabled","setHighlightCaretLine","highlight","setWhitespacesVisible","_add","foldBounds","_createFoldingAnnotation","_createAnnotation","_TEXTSTYLER","_findBrackets","bracketMatch","blockStart","blockEnd","_findMatchingBracket","brackets","sign","_getLineStyle","hasCaret","_caretLineStyle","_getStyles","startBlockIndex","startString","endStyles","endString","blockSubstyles","overrideStyles","blockStyleName","mergeable","_spliceStyles","_spacePattern","_tabPattern","blockExtended","te","ts","blockCount","tempBlocks","newBlocks","spanningTypeId","tempTe","tempNewBlocks","oldBlocks","eventOldBlocks","eventNewBlocks","redrawStart","redrawEnd","allFolding","doFolding","_updateFolding","providerRemove","providerAdd","bracket","mapBracket","mapCaret","filteredRemove","whitespacePattern","rangeIndex","charIndex","endStyle","doNotFold","mProjModel","mEditor","mEditorFeatures","mContentAssist","mTextStyler","getDisplay","getTextFromElement","TEXT_NODE","optionName","mergeOptions","attr","item","getParents","getElementsByClassName","getHeight","parents","editors","contentAssistWidget","grammarProvider","loadGrammar","folderName","showFoldingRuler","firstLineIndex","showLinesRuler","showAnnotationRuler","showOverviewRuler","showZoomRuler","noComputeSize","editorNS"],"mappings":"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","sourcesContent":["/**\n * almond 0.2.4 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                //Convert baseName to array, and lop off the last part,\n                //so that . matches that \"directory\" and not name of the baseName's\n                //module. For instance, baseName of \"one/two/three\", maps to\n                //\"one/two/three.js\", but we want the directory, \"one/two\" for\n                //this normalization.\n                baseParts = baseParts.slice(0, baseParts.length - 1);\n\n                name = baseParts.concat(name.split(\"/\"));\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (typeof callback === 'function') {\n\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback.apply(defined[name], args);\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        config = cfg;\n        return req;\n    };\n\n    define = function (name, deps, callback) {\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\ndefine(\"almond\", function(){});\n\n","/**\n * @license RequireJS i18n 2.0.6 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/requirejs/i18n for details\n */\n/*jslint regexp: true */\n/*global require: false, navigator: false, define: false */\n\n/**\n * This plugin handles i18n! prefixed modules. It does the following:\n *\n * 1) A regular module can have a dependency on an i18n bundle, but the regular\n * module does not want to specify what locale to load. So it just specifies\n * the top-level bundle, like 'i18n!nls/colors'.\n *\n * This plugin will load the i18n bundle at nls/colors, see that it is a root/master\n * bundle since it does not have a locale in its name. It will then try to find\n * the best match locale available in that master bundle, then request all the\n * locale pieces for that best match locale. For instance, if the locale is 'en-us',\n * then the plugin will ask for the 'en-us', 'en' and 'root' bundles to be loaded\n * (but only if they are specified on the master bundle).\n *\n * Once all the bundles for the locale pieces load, then it mixes in all those\n * locale pieces into each other, then finally sets the context.defined value\n * for the nls/colors bundle to be that mixed in locale.\n *\n * 2) A regular module specifies a specific locale to load. For instance,\n * i18n!nls/fr-fr/colors. In this case, the plugin needs to load the master bundle\n * first, at nls/colors, then figure out what the best match locale is for fr-fr,\n * since maybe only fr or just root is defined for that locale. Once that best\n * fit is found, all of its locale pieces need to have their bundles loaded.\n *\n * Once all the bundles for the locale pieces load, then it mixes in all those\n * locale pieces into each other, then finally sets the context.defined value\n * for the nls/fr-fr/colors bundle to be that mixed in locale.\n */\n(function () {\n    'use strict';\n\n    //regexp for reconstructing the master bundle name from parts of the regexp match\n    //nlsRegExp.exec('foo/bar/baz/nls/en-ca/foo') gives:\n    //['foo/bar/baz/nls/en-ca/foo', 'foo/bar/baz/nls/', '/', '/', 'en-ca', 'foo']\n    //nlsRegExp.exec('foo/bar/baz/nls/foo') gives:\n    //['foo/bar/baz/nls/foo', 'foo/bar/baz/nls/', '/', '/', 'foo', '']\n    //so, if match[5] is blank, it means this is the top bundle definition.\n    var nlsRegExp = /(^.*(^|\\/)nls(\\/|$))([^\\/]*)\\/?([^\\/]*)/;\n\n    //Helper function to avoid repeating code. Lots of arguments in the\n    //desire to stay functional and support RequireJS contexts without having\n    //to know about the RequireJS contexts.\n    function addPart(locale, master, needed, toLoad, prefix, suffix) {\n        if (master[locale]) {\n            needed.push(locale);\n            if (master[locale] === true || master[locale] === 1) {\n                toLoad.push(prefix + locale + '/' + suffix);\n            }\n        }\n    }\n\n    function addIfExists(req, locale, toLoad, prefix, suffix) {\n        var fullName = prefix + locale + '/' + suffix;\n        if (require._fileExists(req.toUrl(fullName + '.js'))) {\n            toLoad.push(fullName);\n        }\n    }\n\n    /**\n     * Simple function to mix in properties from source into target,\n     * but only if target does not already have a property of the same name.\n     * This is not robust in IE for transferring methods that match\n     * Object.prototype names, but the uses of mixin here seem unlikely to\n     * trigger a problem related to that.\n     */\n    function mixin(target, source, force) {\n        var prop;\n        for (prop in source) {\n            if (source.hasOwnProperty(prop) && (!target.hasOwnProperty(prop) || force)) {\n                target[prop] = source[prop];\n            } else if (typeof source[prop] === 'object') {\n                if (!target[prop] && source[prop]) {\n                    target[prop] = {};\n                }\n                mixin(target[prop], source[prop], force);\n            }\n        }\n    }\n\n    define('i18n',['module'], function (module) {\n        var masterConfig = module.config ? module.config() : {};\n        masterConfig = masterConfig || {};\n\n        return {\n            version: '2.0.6',\n            /**\n             * Called when a dependency needs to be loaded.\n             */\n            load: function (name, req, onLoad, config) {\n                config = config || {};\n\n                if (config.locale) {\n                    masterConfig.locale = config.locale;\n                }\n\n                var masterName,\n                    match = nlsRegExp.exec(name),\n                    prefix = match[1],\n                    locale = match[4],\n                    suffix = match[5],\n                    parts = locale.split('-'),\n                    toLoad = [],\n                    value = {},\n                    i, part, current = '';\n\n                //If match[5] is blank, it means this is the top bundle definition,\n                //so it does not have to be handled. Locale-specific requests\n                //will have a match[4] value but no match[5]\n                if (match[5]) {\n                    //locale-specific bundle\n                    prefix = match[1];\n                    masterName = prefix + suffix;\n                } else {\n                    //Top-level bundle.\n                    masterName = name;\n                    suffix = match[4];\n                    locale = masterConfig.locale;\n                    if (!locale) {\n                        locale = masterConfig.locale =\n                            typeof navigator === 'undefined' ? 'root' :\n                            ((navigator.languages && navigator.languages[0]) ||\n                             navigator.language ||\n                             navigator.userLanguage || 'root').toLowerCase();\n                    }\n                    parts = locale.split('-');\n                }\n\n                if (config.isBuild) {\n                    //Check for existence of all locale possible files and\n                    //require them if exist.\n                    toLoad.push(masterName);\n                    addIfExists(req, 'root', toLoad, prefix, suffix);\n                    for (i = 0; i < parts.length; i++) {\n                        part = parts[i];\n                        current += (current ? '-' : '') + part;\n                        addIfExists(req, current, toLoad, prefix, suffix);\n                    }\n\n                    if(config.locales) {\n                    \tvar j, k; \n                    \tfor (j = 0; j < config.locales.length; j++) {\n                    \t\tlocale = config.locales[j];\n                    \t\tparts = locale.split(\"-\");\n                    \t\tcurrent = \"\";\n\t                    \tfor (k = 0; k < parts.length; k++) {\n\t\t                        part = parts[k];\n\t\t                        current += (current ? \"-\" : \"\") + part;\n\t\t                        addIfExists(req, current, toLoad, prefix, suffix);\n\t                    \t}\n                    \t}\n                    }\n\n                    req(toLoad, function () {\n                        onLoad();\n                    });\n                } else {\n                    //First, fetch the master bundle, it knows what locales are available.\n                    req([masterName], function (master) {\n                        //Figure out the best fit\n                        var needed = [],\n                            part;\n\n                        //Always allow for root, then do the rest of the locale parts.\n                        addPart('root', master, needed, toLoad, prefix, suffix);\n                        for (i = 0; i < parts.length; i++) {\n                            part = parts[i];\n                            current += (current ? '-' : '') + part;\n                            addPart(current, master, needed, toLoad, prefix, suffix);\n                        }\n\n                        //Load all the parts missing.\n                        req(toLoad, function () {\n                            var i, partBundle, part;\n                            for (i = needed.length - 1; i > -1 && needed[i]; i--) {\n                                part = needed[i];\n                                partBundle = master[part];\n                                if (partBundle === true || partBundle === 1) {\n                                    partBundle = req(prefix + part + '/' + suffix);\n                                }\n                                mixin(value, partBundle);\n                            }\n\n                            //All done, notify the loader.\n                            onLoad(value);\n                        });\n                    });\n                }\n            }\n        };\n    });\n}());\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/editor/nls/messages',[\"module\"],function(module){\n    var config = module.config();\n    return config && config.root ? config : {root:true};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2017 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/editor/nls/root/messages',{//Default message bundle\n\t\"multipleAnnotations\": \"Multiple annotations:\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"line\": \"Line: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"breakpoint\": \"Breakpoint\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"bookmark\": \"Bookmark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"task\": \"Task\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"error\": \"Error\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"warning\": \"Warning\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"info\": \"Info\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentSearch\": \"Current Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentLine\": \"Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"matchingBracket\": \"Matching Bracket\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"currentBracket\": \"Current Bracket\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffAdded\": \"Diff Added Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffDeleted\": \"Diff Deleted Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"diffModified\": \"Diff Modified Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"collabLineChanged\": \"Collab Line Changed\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineUp\": \"Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineDown\": \"Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineStart\": \"Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineEnd\": \"Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"charPrevious\": \"Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"charNext\": \"Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"pageUp\": \"Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"pageDown\": \"Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollPageUp\": \"Scroll Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollPageDown\": \"Scroll Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollLineUp\": \"Scroll Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollLineDown\": \"Scroll Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wordPrevious\": \"Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wordNext\": \"Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"textStart\": \"Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"textEnd\": \"Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollTextStart\": \"Scroll Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"scrollTextEnd\": \"Scroll Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"centerLine\": \"Center Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"selectLineUp\": \"Select Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineDown\": \"Select Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWholeLineUp\": \" Select Whole Line Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWholeLineDown\": \"Select Whole Line Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineStart\": \"Select Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectLineEnd\": \"Select Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectCharPrevious\": \"Select Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectCharNext\": \"Select Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectPageUp\": \"Select Page Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectPageDown\": \"Select Page Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWordPrevious\": \"Select Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectWordNext\": \"Select Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectTextStart\": \"Select Document Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectTextEnd\": \"Select Document End\", //$NON-NLS-1$ //$NON-NLS-0$\n\n\t\"deletePrevious\": \"Delete Previous Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteNext\": \"Delete Next Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteWordPrevious\": \"Delete Previous Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteWordNext\": \"Delete Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLineStart\": \"Delete Line Start\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLineEnd\": \"Delete Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"tab\": \"Insert Tab\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"enter\": \"Insert Line Delimiter\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"enterNoCursor\": \"Insert Line Delimiter\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"escape\": \"Escape\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectAll\": \"Select All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copy\": \"Copy\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"cut\": \"Cut\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"paste\": \"Paste\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"uppercase\": \"To Upper Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lowercase\": \"To Lower Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"capitalize\": \"Capitalize\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"reversecase\" : \"Reverse Case\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"toggleWrapMode\": \"Toggle Wrap Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleTabMode\": \"Toggle Tab Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleOverwriteMode\": \"Toggle Overwrite Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"committerOnTime\": \"${0} on ${1}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t//Emacs\n\t\"emacs\": \"Emacs\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"exchangeMarkPoint\": \"Exchange Mark and Point\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"setMarkCommand\": \"Set Mark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"clearMark\": \"Clear Mark\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"digitArgument\": \"Digit Argument ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"negativeArgument\": \"Negative Argument\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\n\t\"Comment\": \"Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"Flat outline\": \"Flat outline\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindStr\": \"Incremental find: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindStrNotFound\": \"Incremental find: ${0} (not found)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverseStr\": \"Reverse Incremental find: ${0}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverseStrNotFound\": \"Reverse Incremental find: ${0} (not found)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findReplace\": \"Find/Replace\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"find\": \"Find...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"undo\": \"Undo\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"redo\": \"Redo\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"cancelMode\": \"Cancel Current Mode\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findNext\": \"Find Next Occurrence\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findPrevious\": \"Find Previous Occurrence\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFind\": \"Incremental Find\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"incrementalFindReverse\": \"Incremental Find Reverse\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"indentLines\": \"Indent Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"unindentLines\": \"Unindent Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"moveLinesUp\": \"Move Lines Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"moveLinesDown\": \"Move Lines Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copyLinesUp\": \"Copy Lines Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"copyLinesDown\": \"Copy Lines Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"deleteLines\": \"Delete Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"gotoLine\": \"Goto Line...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"gotoLinePrompty\": \"Goto Line:\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"nextAnnotation\": \"Next Annotation\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"prevAnnotation\": \"Previous Annotation\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"expand\": \"Expand\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"collapse\": \"Collapse\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"expandAll\": \"Expand All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"collapseAll\": \"Collapse All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lastEdit\": \"Last Edit Location\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"trimTrailingWhitespaces\": \"Trim Trailing Whitespaces\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"toggleLineComment\": \"Toggle Line Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"addBlockComment\": \"Add Block Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"removeBlockComment\": \"Remove Block Comment\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"linkedModeEntered\": \"Linked Mode: Enter or ESC to exit\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"linkedModeExited\": \"Linked Mode exited\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"syntaxError\": \"Syntax Error\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"contentAssist\": \"Content Assist\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"noProposals\": \"No proposals found\",\n\t\"computingProposals\": \"Computing content assist proposals...\",\n\t\"lineColumn\": \"Line ${0} : Column ${1}\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"lineColumnOffset\": \"Line ${0} : Column ${1} : Offset ${2}\",\n\t\"multiSelections\": \"${0} selection regions\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t//vi\n\t\"vi\": \"vi\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vimove\": \"(Move)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viyank\": \"(Yank)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"videlete\": \"(Delete)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vichange\": \"(Change)\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viLeft\": \"${0} Left\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viRight\": \"${0} Right\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viUp\": \"${0} Up\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viDown\": \"${0} Down\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viw\": \"${0} Next Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vib\": \"${0} Beginning of Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viW\": \"${0} Next Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$ // ws stop refers to word space (next blank space delimited word)\n\t\"viB\": \"${0} Beginning of Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$ // ws stop refers to word space (next blank space delimited word)\n\t\"vie\": \"${0} End of Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viE\": \"${0} End of Word (ws stop)\", //$NON-NLS-1$ //$NON-NLS-0$ // ws stop refers to word space (next blank space delimited word)\n\t\"vi$\": \"${0} End of the line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi^_\": \"${0} First non-blank Char Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi+\": \"${0} First Char Next Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi-\": \"${0} First Char Previous Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi|\": \"${0} nth Column in Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viH\": \"${0} Top of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viM\": \"${0} Middle of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viL\": \"${0} Bottom of Page\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi/\": \"${0} Search Forward\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi?\": \"${0} Search Backward\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vin\": \"${0} Next Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viN\": \"${0} Previous Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vif\": \"${0} Search Char Fwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viF\": \"${0} Search Char Bckwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vit\": \"${0} Search Before Char Fwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viT\": \"${0} Search Before Char Bckwd\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi,\": \"${0} Repeat Reverse Char Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vi;\": \"${0} Repeat Char Search\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viG\": \"${0} Go to Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viycd\": \"${0} Current Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"via\": \"Append After Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viA\": \"Append to End of Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vii\": \"Insert Before Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viI\": \"Insert at Beginning of Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viO\": \"Insert Line Above\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vio\": \"Insert Line Below\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viR\": \"Begin Overwriting Text\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vis\": \"Substitute a Character\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viS\": \"Substitute Entire Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viC\": \"Change Text Until Line End\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"vip\": \"Paste After Char or Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viP\": \"Paste Before Char or Line\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"viStar\": \"Search Word Under Cursor\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t\"next\": \"Next\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"previous\": \"Previous\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replace\": \"Replace\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replaceAll\": \"Replace All\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"findWith\": \"Find With\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replaceWith\": \"Replace With\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"caseInsensitive\": \"Aa\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectedLines\": \"Sel\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"regex\": \"/.*/\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wholeWord\": \"\\\\b\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"caseInsensitiveTooltip\": \"Toggle Case Insensitive\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"selectedLinesTooltip\": \"Toggle Search Scope On Selected Lines\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"regexTooltip\": \"Toggle Regular Expression\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"wholeWordTooltip\": \"Toggle Whole Word\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"closeTooltip\": \"Close\", //$NON-NLS-1$ //$NON-NLS-0$\n\n\t\"replacingAll\": \"Replacing all...\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"replacedMatches\": \"Replaced ${0} matches\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"nothingReplaced\": \"Nothing replaced\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\"notFound\": \"Not found\" //$NON-NLS-1$ //$NON-NLS-0$\n});\n\n","/*******************************************************************************\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/eventTarget\", [], function() {\n\t/** \n\t * Constructs a new EventTarget object.\n\t * \n\t * @class \n\t * @name orion.editor.EventTarget\n\t */\n\tfunction EventTarget() {\n\t}\n\t/**\n\t * Adds in the event target interface into the specified object.\n\t *\n\t * @param {Object} object The object to add in the event target interface.\n\t */\n\tEventTarget.addMixin = function(object) {\n\t\tvar proto = EventTarget.prototype;\n\t\tfor (var p in proto) {\n\t\t\tif (proto.hasOwnProperty(p)) {\n\t\t\t\tobject[p] = proto[p];\n\t\t\t}\n\t\t}\n\t};\n\tEventTarget.prototype = /** @lends orion.editor.EventTarget.prototype */ {\n\t\t/**\n\t\t * Adds an event listener to this event target.\n\t\t * \n\t\t * @param {String} type The event type.\n\t\t * @param {Function|EventListener} listener The function or the EventListener that will be executed when the event happens. \n\t\t * @param {Boolean} [useCapture=false] <code>true</code> if the listener should be trigged in the capture phase.\n\t\t * \n\t\t * @see orion.editor.EventTarget#removeEventListener\n\t\t */\n\t\taddEventListener: function(type, listener, useCapture) {\n\t\t\tif (!this._eventTypes) { this._eventTypes = {}; }\n\t\t\tvar state = this._eventTypes[type];\n\t\t\tif (!state) {\n\t\t\t\tstate = this._eventTypes[type] = {level: 0, listeners: []};\n\t\t\t}\n\t\t\tvar listeners = state.listeners;\n\t\t\tlisteners.push({listener: listener, useCapture: useCapture});\n\t\t},\n\t\t/**\n\t\t * Dispatches the given event to the listeners added to this event target.\n\t\t * @param {Event} evt The event to dispatch.\n\t\t */\n\t\tdispatchEvent: function(evt) {\n\t\t\tvar type = evt.type;\n\t\t\tthis._dispatchEvent(\"pre\" + type, evt); //$NON-NLS-0$\n\t\t\tthis._dispatchEvent(type, evt);\n\t\t\tthis._dispatchEvent(\"post\" + type, evt); //$NON-NLS-0$\n\t\t},\n\t\t/**\n\t\t * Dispatches the given event to the listeners added to this event target.\n\t\t * @private \n\t\t * @param {String} type The name of the event type to send\n\t\t * @param {Event} evt The event to dispatch.\n\t\t */\n\t\t_dispatchEvent: function(type, evt) {\n\t\t\tvar state = this._eventTypes ? this._eventTypes[type] : null;\n\t\t\tif (state) {\n\t\t\t\tvar listeners = state.listeners;\n\t\t\t\ttry {\n\t\t\t\t\tstate.level++;\n\t\t\t\t\tif (listeners) {\n\t\t\t\t\t\tfor (var i=0, len=listeners.length; i < len; i++) {\n\t\t\t\t\t\t\tif (listeners[i]) {\n\t\t\t\t\t\t\t\tvar l = listeners[i].listener;\n\t\t\t\t\t\t\t\tif (typeof l === \"function\") {\n\t\t\t\t\t\t\t\t\tl.call(this, evt);\n\t\t\t\t\t\t\t\t} else if (l.handleEvent && typeof l.handleEvent === \"function\") {\n\t\t\t\t\t\t\t\t\tl.handleEvent(evt);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tstate.level--;\n\t\t\t\t\tif (state.compact && state.level === 0) {\n\t\t\t\t\t\tfor (var j=listeners.length - 1; j >= 0; j--) {\n\t\t\t\t\t\t\tif (!listeners[j]) {\n\t\t\t\t\t\t\t\tlisteners.splice(j, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (listeners.length === 0) {\n\t\t\t\t\t\t\tdelete this._eventTypes[type];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate.compact = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns whether there is a listener for the specified event type.\n\t\t * \n\t\t * @param {String} type The event type\n\t\t * \n\t\t * @see orion.editor.EventTarget#addEventListener\n\t\t * @see orion.editor.EventTarget#removeEventListener\n\t\t */\n\t\tisListening: function(type) {\n\t\t\tif (!this._eventTypes) { return false; }\n\t\t\treturn this._eventTypes[type] !== undefined;\n\t\t},\t\t\n\t\t/**\n\t\t * Removes an event listener from the event target.\n\t\t * <p>\n\t\t * All the parameters must be the same ones used to add the listener.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} type The event type\n\t\t * @param {Function|EventListener} listener The function or the EventListener that will be executed when the event happens. \n\t\t * @param {Boolean} [useCapture=false] <code>true</code> if the listener should be trigged in the capture phase.\n\t\t * \n\t\t * @see orion.editor.EventTarget#addEventListener\n\t\t */\n\t\tremoveEventListener: function(type, listener, useCapture){\n\t\t\tif (!this._eventTypes) { return; }\n\t\t\tvar state = this._eventTypes[type];\n\t\t\tif (state) {\n\t\t\t\tvar listeners = state.listeners;\n\t\t\t\tfor (var i=0, len=listeners.length; i < len; i++) {\n\t\t\t\t\tvar l = listeners[i];\n\t\t\t\t\tif (l && l.listener === listener && l.useCapture === useCapture) {\n\t\t\t\t\t\tif (state.level !== 0) {\n\t\t\t\t\t\t\tlisteners[i] = null;\n\t\t\t\t\t\t\tstate.compact = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (listeners.length === 0) {\n\t\t\t\t\tdelete this._eventTypes[type];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\treturn {EventTarget: EventTarget};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n *******************************************************************************/\n/*eslint-env browser, amd*/\n/**\n * @name orion.regex\n * @class Utilities for dealing with regular expressions.\n * @description Utilities for dealing with regular expressions.\n */\ndefine(\"orion/regex\", [], function() { //$NON-NLS-0$\n\t/**\n\t * @memberOf orion.regex\n\t * @function\n\t * @static\n\t * @description Escapes regex special characters in the input string.\n\t * @param {String} str The string to escape.\n\t * @returns {String} A copy of <code>str</code> with regex special characters escaped.\n\t */\n\tfunction escape(str) {\n\t\treturn str.replace(/([\\\\$\\^*\\/+?\\.\\(\\)|{}\\[\\]])/g, \"\\\\$&\"); //$NON-NLS-0$\n\t\t//return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n\t}\n\n\t/**\n\t * @memberOf orion.regex\n\t * @function\n\t * @static\n\t * @description Parses a pattern and flags out of a regex literal string.\n\t * @param {String} str The string to parse. Should look something like <code>\"/ab+c/\"</code> or <code>\"/ab+c/i\"</code>.\n\t * @returns {Object} If <code>str</code> looks like a regex literal, returns an object with properties\n\t * <code><dl>\n\t * <dt>pattern</dt><dd>{String}</dd>\n\t * <dt>flags</dt><dd>{String}</dd>\n\t * </dl></code> otherwise returns <code>null</code>.\n\t */\n\tfunction parse(str) {\n\t\tvar regexp = /^\\s*\\/(.+)\\/([gim]{0,3})\\s*$/.exec(str);\n\t\tif (regexp) {\n\t\t\treturn {\n\t\t\t\tpattern : regexp[1],\n\t\t\t\tflags : regexp[2]\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tescape: escape,\n\t\tparse: parse\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors: IBM Corporation - initial API and implementation\n *******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine('orion/util',[],function() {\n\n\tvar userAgent = navigator.userAgent;\n\tvar isIE = (userAgent.indexOf(\"MSIE\") !== -1 || userAgent.indexOf(\"Trident\") !== -1) ? document.documentMode : undefined; //$NON-NLS-1$ //$NON-NLS-0$\n\tvar isFirefox = parseFloat(userAgent.split(\"Firefox/\")[1] || userAgent.split(\"Minefield/\")[1]) || undefined; //$NON-NLS-1$ //$NON-NLS-0$\n\tvar isOpera = userAgent.indexOf(\"Opera\") !== -1 ? parseFloat(userAgent.split(\"Version/\")[1]) : undefined; //$NON-NLS-0$\n\tvar isChrome = parseFloat(userAgent.split(\"Chrome/\")[1]) || undefined; //$NON-NLS-0$\n\tvar isSafari = userAgent.indexOf(\"Safari\") !== -1 && !isChrome; //$NON-NLS-0$\n\tvar isWebkit = parseFloat(userAgent.split(\"WebKit/\")[1]) || undefined; //$NON-NLS-0$\n\tvar isAndroid = userAgent.indexOf(\"Android\") !== -1; //$NON-NLS-0$\n\tvar isIPad = userAgent.indexOf(\"iPad\") !== -1; //$NON-NLS-0$\n\tvar isIPhone = userAgent.indexOf(\"iPhone\") !== -1; //$NON-NLS-0$\n\tvar isIOS = isIPad || isIPhone;\n\tvar isElectron = userAgent.indexOf(\"Electron\") !== -1; //$NON-NLS-0$\n\tvar isMac = navigator.platform.indexOf(\"Mac\") !== -1; //$NON-NLS-0$\n\tvar isWindows = navigator.platform.indexOf(\"Win\") !== -1; //$NON-NLS-0$\n\tvar isLinux = navigator.platform.indexOf(\"Linux\") !== -1; //$NON-NLS-0$\n\tvar isTouch = typeof document !== \"undefined\" && \"ontouchstart\" in document.createElement(\"input\"); //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\tvar platformDelimiter = isWindows ? \"\\r\\n\" : \"\\n\"; //$NON-NLS-1$ //$NON-NLS-0$\n\n\tfunction formatMessage(msg) {\n\t\tvar args = arguments;\n\t\treturn msg.replace(/\\$\\{([^\\}]+)\\}/g, function(str, index) { return args[(index << 0) + 1]; });\n\t}\n\t\n\tvar XHTML = \"http://www.w3.org/1999/xhtml\"; //$NON-NLS-0$\n\tfunction createElement(document, tagName) {\n\t\tif (document.createElementNS) {\n\t\t\treturn document.createElementNS(XHTML, tagName);\n\t\t}\n\t\treturn document.createElement(tagName);\n\t}\n\tfunction confineDialogTab(firstElement, lastElement) {\n\t\tlastElement.addEventListener(\"keydown\", function(evt) {\n\t\t\tif(evt.keyCode === 9 && !evt.shiftKey) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tfirstElement.focus();\n\t\t\t}\n\t\t});\n\t\tfirstElement.addEventListener(\"keydown\", function(evt) {\n\t\t\tif(evt.keyCode === 9 && evt.shiftKey) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tlastElement.focus();\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tformatMessage: formatMessage,\n\t\t\n\t\tcreateElement: createElement,\n\t\tconfineDialogTab: confineDialogTab,\n\t\t\n\t\t/** Browsers */\n\t\tisIE: isIE,\n\t\tisFirefox: isFirefox,\n\t\tisOpera: isOpera,\n\t\tisChrome: isChrome,\n\t\tisSafari: isSafari,\n\t\tisWebkit: isWebkit,\n\t\tisAndroid: isAndroid,\n\t\tisIPad: isIPad,\n\t\tisIPhone: isIPhone,\n\t\tisIOS: isIOS,\n\t\tisElectron: isElectron,\n\t\t\n\t\t/** OSs */\n\t\tisMac: isMac,\n\t\tisWindows: isWindows,\n\t\tisLinux: isLinux,\n\n\t\t/** Capabilities */\n\t\tisTouch: isTouch,\n\n\t\tplatformDelimiter: platformDelimiter\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textModel\", ['orion/editor/eventTarget', 'orion/regex', 'orion/util'], function(mEventTarget, mRegex, util) {\n\n\t/**\n\t * Constructs a new TextModel with the given text and default line delimiter.\n\t *\n\t * @param {String} [text=\"\"] the text that the model will store\n\t * @param {String} [lineDelimiter=platform delimiter] the line delimiter used when inserting new lines to the model.\n\t *\n\t * @name orion.editor.TextModel\n\t * @class The TextModel is an interface that provides text for the view. Applications may\n\t * implement the TextModel interface to provide a custom store for the view content. The\n\t * view interacts with its text model in order to access and update the text that is being\n\t * displayed and edited in the view. This is the default implementation.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#setModel}\n\t * </p>\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction TextModel(text, lineDelimiter) {\n\t\tthis._lastLineIndex = -1;\n\t\tthis._text = [\"\"];\n\t\tthis._lineOffsets = [0];\n\t\tthis.setText(text);\n\t\tthis.setLineDelimiter(lineDelimiter);\n\t}\n\n\t/**\n\t * @name setRange\n\t * @description Sets the range attributes on the modelChang* events for VS code LSP compatibility\n\t * @param {TextModel} textModel The backing text model\n\t * @param {?} modelChangingEvent The event object to modify\n\t * @since 17.0\n\t */\n\tfunction setRange(textModel, modelChangingEvent) {\n\t\tvar sl = textModel.getLineAtOffset(modelChangingEvent.start), \n\t\t\tel = textModel.getLineAtOffset(modelChangingEvent.start + modelChangingEvent.removedCharCount);\n\t\tmodelChangingEvent.range = {\n\t\t\tstart: {\n\t\t\t\tline: sl,\n\t\t\t\tcharacter: modelChangingEvent.start - textModel.getLineStart(sl)\n\t\t\t},\n\t\t\tend: {\n\t\t\t\tline: el,\n\t\t\t\tcharacter: modelChangingEvent.start + modelChangingEvent.removedCharCount - textModel.getLineStart(el)\n\t\t\t}\n\t\t};\t\n\t}\n\t\n\tTextModel.prototype = /** @lends orion.editor.TextModel.prototype */ {\n\t\t/**\n\t\t * Destroys this text model.\n\t\t */\n\t\tdestroy: function() {\n\t\t},\n\t\t/**\n\t\t * @class This object describes the options to use while finding occurrences of a string in a text model.\n\t\t * @name orion.editor.FindOptions\n\t\t *\n\t\t * @property {String} string the search string to be found.\n\t\t * @property {Boolean} [regex=false] whether or not the search string is a regular expression.\n\t\t * @property {Boolean} [wrap=false] whether or not to wrap search.\n\t\t * @property {Boolean} [wholeWord=false] whether or not to search only whole words.\n\t\t * @property {Boolean} [caseInsensitive=false] whether or not search is case insensitive.\n\t\t * @property {Boolean} [reverse=false] whether or not to search backwards.\n\t\t * @property {Number} [start=0] The start offset to start searching\n\t\t * @property {Number} [rangeStart] The range start offset of the search. Used to search in a given range.\n\t\t * @property {Number} [rangeEnd] The range end offset of the search. Used to search in a given range.\n\t\t */\n\t\t/**\n\t\t * @class This object represents a find occurrences iterator.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextModel#find}<br/>\n\t\t * </p>\t\t \n\t\t * @name orion.editor.FindIterator\n\t\t * \n\t\t * @property {Function} hasNext Determines whether there are more occurrences in the iterator.\n\t\t * @property {Function} next Returns the next matched range {start,end} in the iterator.\n\t\t */\t\n\t\t/**\n\t\t * Finds occurrences of a string in the text model.\n\t\t *\n\t\t * @param {orion.editor.FindOptions} options the search options\n\t\t * @return {orion.editor.FindIterator} the find occurrences iterator.\n\t\t */\n\t\tfind: function(options) {\n\t\t\tif (this._text.length > 1) {\n\t\t\t\tthis._text = [this._text.join(\"\")];\n\t\t\t}\n\t\t\tvar string = options.string;\n\t\t\tvar regex = options.regex;\n\t\t\tvar pattern = string;\n\t\t\tvar flags = \"\";\n\t\t\tvar caseInsensitive = options.caseInsensitive;\n\t\t\tif (pattern) {\n\t\t\t\tif (regex) {\n\t\t\t\t\tvar parsed = mRegex.parse(pattern);\n\t\t\t\t\tif (parsed) {\n\t\t\t\t\t\tpattern = parsed.pattern;\n\t\t\t\t\t\tflags = parsed.flags;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpattern = string.replace(/([\\\\$\\^*\\/+?\\.\\(\\)|{}\\[\\]])/g, \"\\\\$&\"); //$NON-NLS-0$\n\t\t\t\t\t/*\n\t\t\t\t\t* Bug in JS RegEx. In a Turkish locale, dotless i (u0131) capitalizes to I (u0049) and i (u0069) \n\t\t\t\t\t* capitalizes to dot I (u0130). The JS RegEx does not match correctly the Turkish i's in case\n\t\t\t\t\t* insensitive mode. The fix is to detect the presence of Turkish i's in the search pattern and \n\t\t\t\t\t* to modify the pattern to search for both upper and lower case.\n\t\t\t\t\t*/\n\t\t\t\t\tif (caseInsensitive) {\n\t\t\t\t\t\tpattern = pattern.replace(/[iI\\u0130\\u0131]/g, \"[Ii\\u0130\\u0131]\"); //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar current = null, skip;\n\t\t\tif (pattern) {\n\t\t\t\tvar reverse = options.reverse;\n\t\t\t\tvar wrap = options.wrap;\n\t\t\t\tvar wholeWord = options.wholeWord;\n\t\t\t\tvar start = options.start || 0;\n\t\t\t\tvar rangeStart = options.rangeStart;\n\t\t\t\tvar rangeEnd = options.rangeEnd;\n\t\t\t\tvar isRange = rangeStart !== null && rangeStart !== undefined && rangeEnd !== null && rangeEnd !== undefined;\n\t\t\t\tif (flags.indexOf(\"g\") === -1) { flags += \"g\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (flags.indexOf(\"m\") === -1) { flags += \"m\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (caseInsensitive) {\n\t\t\t\t\tif (flags.indexOf(\"i\") === -1) { flags += \"i\"; } //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tif (wholeWord) {\n\t\t\t\t\tpattern = \"\\\\b\" + pattern + \"\\\\b\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tvar text = this._text[0], result, lastIndex, offset = 0;\n\t\t\t\tif (isRange) {\n\t\t\t\t\tvar s = rangeStart < rangeEnd ? rangeStart : rangeEnd;\n\t\t\t\t\tvar e = rangeStart < rangeEnd ? rangeEnd : rangeStart;\n\t\t\t\t\ttext = text.substring(s, e);\n\t\t\t\t\toffset = s;\n\t\t\t\t}\n\t\t\t\tvar re = new RegExp(pattern, flags);\n\t\t\t\tif (reverse) {\n\t\t\t\t\tskip = function() {\n\t\t\t\t\t\tvar match = null;\n\t\t\t\t\t\tre.lastIndex = 0;\n\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\tlastIndex = re.lastIndex;\n\t\t\t\t\t\t\tresult = re.exec(text);\n\t\t\t\t\t\t\tif (lastIndex === re.lastIndex) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\tif (result.index + offset < start) {\n\t\t\t\t\t\t\t\t\tmatch = {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!wrap || match) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstart = text.length + offset;\n\t\t\t\t\t\t\t\t\tmatch = {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (match) { start = match.start; }\n\t\t\t\t\t\treturn match;\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tre.lastIndex = start - offset;\n\t\t\t\t\tskip = function() {\n\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\tlastIndex = re.lastIndex;\n\t\t\t\t\t\t\tresult = re.exec(text);\n\t\t\t\t\t\t\tif (lastIndex === re.lastIndex) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\treturn {start: result.index + offset, end: re.lastIndex + offset};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (lastIndex !== 0) {\n\t\t\t\t\t\t\t\tif (wrap) {\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tcurrent = skip();\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t/**\n\t\t\t\t * @callback \n\t\t\t\t */\n\t\t\t\tnext: function() {\n\t\t\t\t\tvar result = current;\n\t\t\t\t\tif (result) { current = skip(); }\n\t\t\t\t\treturn result;\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * @callback \n\t\t\t\t */\n\t\t\t\thasNext: function() {\n\t\t\t\t\treturn current !== null;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Returns the number of characters in the model.\n\t\t *\n\t\t * @returns {Number} the number of characters in the model.\n\t\t */\n\t\tgetCharCount: function() {\n\t\t\tvar count = 0;\n\t\t\tfor (var i = 0; i<this._text.length; i++) {\n\t\t\t\tcount += this._text[i].length;\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * Returns the text of the line at the given index.\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>null</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @param {Boolean} [includeDelimiter=false] whether or not to include the line delimiter. \n\t\t * @returns {String} the line text or <code>null</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineAtOffset\n\t\t */\n\t\tgetLine: function(lineIndex, includeDelimiter) {\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar start = this._lineOffsets[lineIndex];\n\t\t\tif (lineIndex + 1 < lineCount) {\n\t\t\t\tvar text = this.getText(start, this._lineOffsets[lineIndex + 1]);\n\t\t\t\tif (includeDelimiter) {\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\t\t\t\tvar end = text.length, c;\n\t\t\t\twhile (((c = text.charCodeAt(end - 1)) === 10) || (c === 13)) {\n\t\t\t\t\tend--;\n\t\t\t\t}\n\t\t\t\treturn text.substring(0, end);\n\t\t\t} else {\n\t\t\t\treturn this.getText(start); \n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns the line index at the given character offset.\n\t\t * <p>\n\t\t * The valid offsets are 0 to char count inclusive. The line index for\n\t\t * char count is <code>line count - 1</code>. Returns <code>-1</code> if\n\t\t * the offset is out of range.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} offset a character offset.\n\t\t * @returns {Number} the zero based line index or <code>-1</code> if out of range.\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\tvar charCount = this.getCharCount();\n\t\t\tif (!(0 <= offset && offset <= charCount)) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (offset === charCount) {\n\t\t\t\treturn lineCount - 1; \n\t\t\t}\n\t\t\tvar lineStart, lineEnd;\n\t\t\tvar index = this._lastLineIndex;\n\t\t\tif (0 <= index && index < lineCount) {\n\t\t\t\tlineStart = this._lineOffsets[index];\n\t\t\t\tlineEnd = index + 1 < lineCount ? this._lineOffsets[index + 1] : charCount;\n\t\t\t\tif (lineStart <= offset && offset < lineEnd) {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar high = lineCount;\n\t\t\tvar low = -1;\n\t\t\twhile (high - low > 1) {\n\t\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\t\tlineStart = this._lineOffsets[index];\n\t\t\t\tlineEnd = index + 1 < lineCount ? this._lineOffsets[index + 1] : charCount;\n\t\t\t\tif (offset <= lineStart) {\n\t\t\t\t\thigh = index;\n\t\t\t\t} else if (offset < lineEnd) {\n\t\t\t\t\thigh = index;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tlow = index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastLineIndex = high;\n\t\t\treturn high;\n\t\t},\n\t\t/**\n\t\t * Returns the number of lines in the model.\n\t\t * <p>\n\t\t * The model always has at least one line.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the number of lines.\n\t\t */\n\t\tgetLineCount: function() {\n\t\t\treturn this._lineOffsets.length;\n\t\t},\n\t\t/**\n\t\t * Returns the line delimiter that is used by the view\n\t\t * when inserting new lines. New lines entered using key strokes \n\t\t * and paste operations use this line delimiter.\n\t\t *\n\t\t * @return {String} the line delimiter that is used by the view when inserting new lines.\n\t\t */\n\t\tgetLineDelimiter: function() {\n\t\t\treturn this._lineDelimiter;\n\t\t},\n\t\t/**\n\t\t * Returns the end character offset for the given line. \n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that when the line delimiter is included, the \n\t\t * offset is either the start offset of the next line or char count. When the line delimiter is\n\t\t * not included, the offset is the offset of the line delimiter.\n\t\t * </p>\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>-1</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @param {Boolean} [includeDelimiter=false] whether or not to include the line delimiter. \n\t\t * @return {Number} the line end offset or <code>-1</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineStart\n\t\t */\n\t\tgetLineEnd: function(lineIndex, includeDelimiter) {\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (lineIndex + 1 < lineCount) {\n\t\t\t\tvar end = this._lineOffsets[lineIndex + 1];\n\t\t\t\tif (includeDelimiter) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tvar text = this.getText(Math.max(this._lineOffsets[lineIndex], end - 2), end);\n\t\t\t\tvar i = text.length, c;\n\t\t\t\twhile (((c = text.charCodeAt(i - 1)) === 10) || (c === 13)) {\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t\treturn end - (text.length - i);\n\t\t\t} else {\n\t\t\t\treturn this.getCharCount();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns the start character offset for the given line.\n\t\t * <p>\n\t\t * The valid indices are 0 to line count exclusive.  Returns <code>-1</code> \n\t\t * if the index is out of range. \n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the zero based index of the line.\n\t\t * @return {Number} the line start offset or <code>-1</code> if out of range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getLineEnd\n\t\t */\n\t\tgetLineStart: function(lineIndex) {\n\t\t\tif (!(0 <= lineIndex && lineIndex < this.getLineCount())) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn this._lineOffsets[lineIndex];\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that character at the end offset\n\t\t * is not included in the returned text.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the zero based start offset of text range.\n\t\t * @param {Number} [end=char count] the zero based end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextModel#setText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = this.getCharCount(); }\n\t\t\tif (start === end) { return \"\"; }\n\t\t\tvar offset = 0, chunk = 0, length;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (start <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar firstOffset = offset;\n\t\t\tvar firstChunk = chunk;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (end <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar lastOffset = offset;\n\t\t\tvar lastChunk = chunk;\n\n\t\t\t// error check for invalid chunks of text\n\t\t\tif (firstChunk >= this._text.length || lastChunk >= this._text.length || firstChunk > lastChunk) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\t\n\t\t\tif (firstChunk === lastChunk) {\n\t\t\t\treturn this._text[firstChunk].substring(start - firstOffset, end - lastOffset);\n\t\t\t}\n\t\t\tvar beforeText = this._text[firstChunk].substring(start - firstOffset);\n\t\t\tvar afterText = this._text[lastChunk].substring(0, end - lastOffset);\n\t\t\treturn beforeText + this._text.slice(firstChunk+1, lastChunk).join(\"\") + afterText; \n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the text is about to change.\n\t\t * <p>\n\t\t * This notification is intended to be used only by the view. Application clients should\n\t\t * use {@link orion.editor.TextView#event:onModelChanging}.\n\t\t * </p>\n\t\t * <p>\n\t\t * NOTE: This method is not meant to called directly by application code. It is called internally by the TextModel\n\t\t * as part of the implementation of {@link #setText}. This method is included in the public API for documentation\n\t\t * purposes and to allow integration with other toolkit frameworks.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.ModelChangingEvent} modelChangingEvent the changing event\n\t\t */\n\t\tonChanging: function(modelChangingEvent) {\n\t\t\tsetRange(this, modelChangingEvent);\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the text has changed.\n\t\t * <p>\n\t\t * This notification is intended to be used only by the view. Application clients should\n\t\t * use {@link orion.editor.TextView#event:onModelChanged}.\n\t\t * </p>\n\t\t * <p>\n\t\t * NOTE: This method is not meant to called directly by application code. It is called internally by the TextModel\n\t\t * as part of the implementation of {@link #setText}. This method is included in the public API for documentation\n\t\t * purposes and to allow integration with other toolkit frameworks.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.ModelChangedEvent} modelChangedEvent the changed event\n\t\t */\n\t\tonChanged: function(modelChangedEvent) {\n\t\t\tsetRange(this, modelChangedEvent);\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Sets the line delimiter that is used by the view\n\t\t * when new lines are inserted in the model due to key\n\t\t * strokes and paste operations. The line delimiter of\n\t\t * existing lines are unchanged unless the to <code>all</code>\n\t\t * argument is <code>true</code>.\n\t\t * <p>\n\t\t * If lineDelimiter is \"auto\", the delimiter is computed to be\n\t\t * the first delimiter found in the current text. If lineDelimiter\n\t\t * is undefined or if there are no delimiters in the current text, the\n\t\t * platform delimiter is used.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} lineDelimiter the line delimiter that is used by the view when inserting new lines.\n\t\t * @param {Boolean} [all=false] whether or not the delimiter of existing lines are changed.\n\t\t */\n\t\tsetLineDelimiter: function(lineDelimiter, all) {\n\t\t\tif (lineDelimiter === \"auto\") {\n\t\t\t\tlineDelimiter = undefined;\n\t\t\t\tif (this.getLineCount() > 1) {\n\t\t\t\t\tlineDelimiter = this.getText(this.getLineEnd(0), this.getLineEnd(0, true));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lineDelimiter = lineDelimiter ? lineDelimiter : util.platformDelimiter;\n\t\t\tif (all) {\n\t\t\t\tvar lineCount = this.getLineCount();\n\t\t\t\tif (lineCount > 1) {\n\t\t\t\t\tvar lines = new Array(lineCount);\n\t\t\t\t\tfor (var i=0; i<lineCount; i++) {\n\t\t\t\t\t\tlines[i] = this.getLine(i);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setText(lines.join(this._lineDelimiter));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The end offset is not inclusive. This means that the character at the \n\t\t * end offset is not replaced.\n\t\t * </p>\n\t\t * <p>\n\t\t * The text model must notify the listeners before and after the\n\t\t * the text is changed by calling {@link #onChanging} and {@link #onChanged}\n\t\t * respectively. \n\t\t * </p>\n\t\t *\n\t\t * @param {String} [text=\"\"] the new text.\n\t\t * @param {Number} [start=0] the zero based start offset of text range.\n\t\t * @param {Number} [end=char count] the zero based end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextModel#getText\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tif (text === undefined) { text = \"\"; }\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = this.getCharCount(); }\n\t\t\tif (start === end && text === \"\") { return; }\n\t\t\tvar startLine = this.getLineAtOffset(start);\n\t\t\tvar endLine = this.getLineAtOffset(end);\n\t\t\tvar eventStart = start;\n\t\t\tvar removedCharCount = end - start;\n\t\t\tvar removedLineCount = endLine - startLine;\n\t\t\tvar addedCharCount = text.length;\n\t\t\tvar addedLineCount = 0;\n\t\t\tvar lineCount = this.getLineCount();\n\t\t\t\n\t\t\tvar cr = 0, lf = 0, index = 0;\n\t\t\tvar newLineOffsets = [];\n\t\t\twhile (true) {\n\t\t\t\tif (cr !== -1 && cr <= index) { cr = text.indexOf(\"\\r\", index); } //$NON-NLS-0$\n\t\t\t\tif (lf !== -1 && lf <= index) { lf = text.indexOf(\"\\n\", index); } //$NON-NLS-0$\n\t\t\t\tif (lf === -1 && cr === -1) { break; }\n\t\t\t\tif (cr !== -1 && lf !== -1) {\n\t\t\t\t\tif (cr + 1 === lf) {\n\t\t\t\t\t\tindex = lf + 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindex = (cr < lf ? cr : lf) + 1;\n\t\t\t\t\t}\n\t\t\t\t} else if (cr !== -1) {\n\t\t\t\t\tindex = cr + 1;\n\t\t\t\t} else {\n\t\t\t\t\tindex = lf + 1;\n\t\t\t\t}\n\t\t\t\tnewLineOffsets.push(start + index);\n\t\t\t\taddedLineCount++;\n\t\t\t}\n\t\t\n\t\t\tvar modelChangingEvent = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: text,\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\t\n\t\t\tvar changedText = text;\n\n\t\t\t//TODO this should be done the loops below to avoid getText()\n\t\t\tif (newLineOffsets.length === 0) {\n\t\t\t\tvar startLineOffset = this.getLineStart(startLine), endLineOffset;\n\t\t\t\tif (endLine + 1 < lineCount) {\n\t\t\t\t\tendLineOffset = this.getLineStart(endLine + 1);\n\t\t\t\t} else {\n\t\t\t\t\tendLineOffset = this.getCharCount();\n\t\t\t\t}\n\t\t\t\tif (start !== startLineOffset) {\n\t\t\t\t\ttext = this.getText(startLineOffset, start) + text;\n\t\t\t\t\tstart = startLineOffset;\n\t\t\t\t}\n\t\t\t\tif (end !== endLineOffset) {\n\t\t\t\t\ttext = text + this.getText(end, endLineOffset);\n\t\t\t\t\tend = endLineOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar changeCount = addedCharCount - removedCharCount;\n\t\t\tfor (var j = startLine + removedLineCount + 1; j < lineCount; j++) {\n\t\t\t\tthis._lineOffsets[j] += changeCount;\n\t\t\t}\n\t\t\t\n\t\t\t/*\n\t\t\t* Feature in Chrome.  Chrome exceeds the maximum call stack when calling splice\n\t\t\t* around 62k arguments. The limit seems to be higher on IE (250K) and Firefox (450k).\n\t\t\t* The fix is to break the splice in junks of 50k.\n\t\t\t*/\n\t\t\tvar SPLICE_LIMIT = 50000;\n\t\t\tvar limit = SPLICE_LIMIT, args;\n\t\t\tif (newLineOffsets.length < limit) {\n\t\t\t\targs = [startLine + 1, removedLineCount].concat(newLineOffsets);\n\t\t\t\tArray.prototype.splice.apply(this._lineOffsets, args);\n\t\t\t} else {\n\t\t\t\tindex = startLine + 1;\n\t\t\t\tthis._lineOffsets.splice(index, removedLineCount);\n\t\t\t\tfor (var k = 0; k < newLineOffsets.length; k += limit) {\n\t\t\t\t\targs = [index, 0].concat(newLineOffsets.slice(k, Math.min(newLineOffsets.length, k + limit)));\n\t\t\t\t\tArray.prototype.splice.apply(this._lineOffsets, args);\n\t\t\t\t\tindex += limit;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar offset = 0, chunk = 0, length;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (start <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar firstOffset = offset;\n\t\t\tvar firstChunk = chunk;\n\t\t\twhile (chunk<this._text.length) {\n\t\t\t\tlength = this._text[chunk].length; \n\t\t\t\tif (end <= offset + length) { break; }\n\t\t\t\toffset += length;\n\t\t\t\tchunk++;\n\t\t\t}\n\t\t\tvar lastOffset = offset;\n\t\t\tvar lastChunk = chunk;\n\t\t\tvar firstText = this._text[firstChunk];\n\t\t\tvar lastText = this._text[lastChunk];\n\t\t\tvar beforeText = firstText.substring(0, start - firstOffset);\n\t\t\tvar afterText = lastText.substring(end - lastOffset);\n\t\t\tvar params = [firstChunk, lastChunk - firstChunk + 1];\n\t\t\tif (beforeText) { params.push(beforeText); }\n\t\t\tif (text) { params.push(text); }\n\t\t\tif (afterText) { params.push(afterText); }\n\t\t\tArray.prototype.splice.apply(this._text, params);\n\t\t\tif (this._text.length === 0) { this._text = [\"\"]; }\n\t\t\t\n\t\t\tvar modelChangedEvent = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: eventStart,\n\t\t\t\ttext: changedText,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent);\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(TextModel.prototype);\n\t\n\treturn {TextModel: TextModel};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/keyBinding\", ['orion/util'], function(util) { //$NON-NLS-1$ //$NON-NLS-0$\n\n    /**\n\t * @class A KeyBinding is an interface used to define keyboard shortcuts.\n\t * @name orion.KeyBinding\n\t * \n\t * @property {Function} match The function to match events.\n\t * @property {Function} equals The funtion to compare to key bindings.\n\t *\n\t * @see orion.KeyStroke\n\t * @see orion.KeySequence\n\t */\n\n\t/**\n\t * Constructs a new key stroke with the given key code, modifiers and event type.\n\t * \n\t * @param {String|Number} keyCode the key code.\n\t * @param {Boolean} mod1 the primary modifier (usually Command on Mac and Control on other platforms).\n\t * @param {Boolean} mod2 the secondary modifier (usually Shift).\n\t * @param {Boolean} mod3 the third modifier (usually Alt).\n\t * @param {Boolean} mod4 the fourth modifier (usually Control on the Mac).\n\t * @param {String} type the type of event that the keybinding matches; either \"keydown\" or \"keypress\".\n\t * \n\t * @class A KeyStroke represents of a key code and modifier state that can be triggered by the user using the keyboard.\n\t * @name orion.KeyStroke\n\t * \n\t * @property {String|Number} keyCode The key code.\n\t * @property {Boolean} mod1 The primary modifier (usually Command on Mac and Control on other platforms).\n\t * @property {Boolean} mod2 The secondary modifier (usually Shift).\n\t * @property {Boolean} mod3 The third modifier (usually Alt).\n\t * @property {Boolean} mod4 The fourth modifier (usually Control on the Mac).\n\t * @property {String} [type=keydown] The type of event that the keybinding matches; either \"keydown\" or \"keypress\"\n\t *\n\t * @see orion.editor.TextView#setKeyBinding\n\t */\n\tfunction KeyStroke (keyCode, mod1, mod2, mod3, mod4, type) {\n\t\tthis.type = type || \"keydown\"; //$NON-NLS-0$\n\t\tif (typeof(keyCode) === \"string\" && this.type === \"keydown\") { //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\tthis.keyCode = keyCode.toUpperCase().charCodeAt(0);\n\t\t} else {\n\t\t\tthis.keyCode = keyCode;\n\t\t}\n\t\tthis.mod1 = mod1 !== undefined && mod1 !== null ? mod1 : false;\n\t\tthis.mod2 = mod2 !== undefined && mod2 !== null ? mod2 : false;\n\t\tthis.mod3 = mod3 !== undefined && mod3 !== null ? mod3 : false;\n\t\tthis.mod4 = mod4 !== undefined && mod4 !== null ? mod4 : false;\n\t}\n\tKeyStroke.prototype = /** @lends orion.KeyStroke.prototype */ {\n\t\tgetKeys: function() {\n\t\t\treturn [this];\n\t\t},\n\t\t/**\n\t\t * Determines either this key stroke matches the specifed event.  It can match either a\n\t\t * a whole sequence of key events or a single key event at a specified index.\n\t\t * <p>\n\t\t * <code>KeyStroke</code> only matches single key events. <code>KeySequence</code> handles\n\t\t * matching a sequence of events.\n\t\t * </p>\n\t\t * TODO explain this better\n\t\t * \n\t\t * @param {DOMEvent|DOMEvent[]} e the key event or list of events to match.\n\t\t * @param index the key event to match.\n\t\t * @returns {Boolean} <code>true</code> whether the key binding matches the key event.\n\t\t *\n\t\t * @see orion.KeySequence#match\n\t\t */\n\t\tmatch: function (e, index) {\n\t\t\tif (index !== undefined) {\n\t\t\t\tif (index !== 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e instanceof Array) {\n\t\t\t\t\tif (e.length > 1) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\te = e[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.type !== this.type) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (this.keyCode === e.keyCode || this.keyCode === String.fromCharCode(util.isOpera ? e.which : (e.charCode !== undefined ? e.charCode : e.keyCode))) {\n\t\t\t\tvar mod1 = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\t\tif (this.mod1 !== mod1) { return false; }\n\t\t\t\tif (this.type === \"keydown\") { //$NON-NLS-0$\n\t\t\t\t\tif (this.mod2 !== e.shiftKey) { return false; }\n\t\t\t\t}\n\t\t\t\tif (this.mod3 !== e.altKey) { return false; }\n\t\t\t\tif (util.isMac && this.mod4 !== e.ctrlKey) { return false; }\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Returns whether this key stroke is the same as the given parameter.\n\t\t * \n\t\t * @param {orion.KeyBinding} kb the key binding to compare with.\n\t\t * @returns {Boolean} whether or not the parameter and the receiver describe the same key binding.\n\t\t */\n\t\tequals: function(kb) {\n\t\t\tif (!kb) { return false; }\n\t\t\tif (this.keyCode !== kb.keyCode) { return false; }\n\t\t\tif (this.mod1 !== kb.mod1) { return false; }\n\t\t\tif (this.mod2 !== kb.mod2) { return false; }\n\t\t\tif (this.mod3 !== kb.mod3) { return false; }\n\t\t\tif (this.mod4 !== kb.mod4) { return false; }\n\t\t\tif (this.type !== kb.type) { return false; }\n\t\t\treturn true;\n\t\t} \n\t};\n\t\n\t/**\n\t * Constructs a new key sequence with the given key strokes.\n\t * \n\t * @param {orion.KeyStroke[]} keys the key strokes for this sequence.\n\t * \n\t * @class A KeySequence represents of a list of key codes and a modifiers state that can be triggered by the user using the keyboard.\n\t * @name orion.KeySequence\n\t * \n\t * @property {orion.KeyStroke[]} keys the list of key strokes.\n\t *\n\t * @see orion.editor.TextView#setKeyBinding\n\t */\n\tfunction KeySequence (keys) {\n\t\tthis.keys = keys;\n\t}\n\tKeySequence.prototype = /** @lends orion.KeySequence.prototype */ {\n\t\tgetKeys: function() {\n\t\t\treturn this.keys.slice(0);\n\t\t},\n\t\tmatch: function (e, index) {\n\t\t\tvar keys = this.keys;\n\t\t\tif (index !== undefined) {\n\t\t\t\tif (index > keys.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (keys[index].match(e)) {\n\t\t\t\t\tif (index === keys.length - 1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn index + 1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tif (!(e instanceof Array)) {\n\t\t\t\t\te = [e];\n\t\t\t\t}\n\t\t\t\tif (e.length > keys.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar i;\n\t\t\t\tfor (i = 0; i < e.length; i++) {\n\t\t\t\t\tif (!keys[i].match(e[i])) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (i === keys.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns whether this key sequence is the same as the given parameter.\n\t\t * \n\t\t * @param {orion.KeyBinding|orion.KeySequence} kb the key binding to compare with.\n\t\t * @returns {Boolean} whether or not the parameter and the receiver describe the same key binding.\n\t\t */\n\t\tequals: function(kb) {\n\t\t\tif (!kb.keys) { return false; }\n\t\t\tif (kb.keys.length !== this.keys.length) { return false; }\n\t\t\tfor (var i=0; i<kb.keys.length; i++) {\n\t\t\t\tif (!kb.keys[i].equals(this.keys[i])) { return false; }\n\t\t\t}\n\t\t\treturn true;\n\t\t}\t\n\t};\n\t\n\treturn {\n\t\tKeyBinding: KeyStroke, // for backwards compatibility\n\t\tKeyStroke: KeyStroke,\n\t\tKeySequence: KeySequence\n\t};\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/keyModes\", [ //$NON-NLS-0$\r\n\t\t\"orion/keyBinding\", //$NON-NLS-0$\r\n\t\t\"orion/util\" //$NON-NLS-0$\r\n], function(mKeyBinding, util) {\r\n\r\n\tfunction KeyMode(view) {\r\n\t\tif (!view) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._view = view;\r\n\t\tthis._keyBindings = this.createKeyBindings();\r\n\t\tthis._keyBindingIndex = 0;\r\n\t}\r\n\tKeyMode.prototype = /** @lends orion.editor.KeyMode.prototype */ {\r\n\t\tcreateKeyBindings: function () {\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\t/**\r\n\t\t * Returns all the key bindings associated to the given action ID.\r\n\t\t *\r\n\t\t * @param {String} actionID the action ID.\r\n\t\t * @returns {orion.KeyBinding[]} the array of key bindings associated to the given action ID.\r\n\t\t *\r\n\t\t * @see orion.editor.KeyModesetKeyBinding\r\n\t\t * @see orion.editor.KeyModesetAction\r\n\t\t */\r\n\t\tgetKeyBindings: function (actionID) {\r\n\t\t\tvar result = [];\r\n\t\t\tvar keyBindings = this._keyBindings;\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tif (keyBindings[i].actionID === actionID) {\r\n\t\t\t\t\tresult.push(keyBindings[i].keyBinding);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetView: function() {\r\n\t\t\treturn this._view;\r\n\t\t},\r\n\t\tisActive: function () {\r\n\t\t\treturn this._view.getKeyModes().indexOf(this) !== -1;\r\n\t\t},\r\n\t\tmatch: function(e) {\r\n\t\t\tif (e.type === \"keydown\") { //$NON-NLS-0$\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\tcase 16: /* Shift */\r\n\t\t\t\t\tcase 17: /* Control */\r\n\t\t\t\t\tcase 18: /* Alt */\r\n\t\t\t\t\tcase 91: /* Command */\r\n\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar keyBindingIndex = this._keyBindingIndex;\r\n\t\t\tvar keyBindings = this._matchingKeyBindings || this._keyBindings;\r\n\t\t\tvar matchingKeyBindings = [];\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tvar kb = keyBindings[i];\r\n\t\t\t\tvar keyBinding = kb.keyBinding;\r\n\t\t\t\tvar match = keyBinding.match(e, keyBindingIndex);\r\n\t\t\t\tif (match === true) {\r\n\t\t\t\t\tthis._keyBindingIndex = 0;\r\n\t\t\t\t\tthis._matchingKeyBindings = null;\r\n\t\t\t\t\treturn kb.actionID;\r\n\t\t\t\t} else if (typeof match === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t\tmatchingKeyBindings.push(kb);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (matchingKeyBindings.length === 0) {\r\n\t\t\t\tthis._keyBindingIndex = 0;\r\n\t\t\t\tthis._matchingKeyBindings = null;\r\n\t\t\t} else {\r\n\t\t\t\tthis._keyBindingIndex++;\r\n\t\t\t\tthis._matchingKeyBindings = matchingKeyBindings;\r\n\t\t\t\treturn \"noop\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Associates a key binding with the given action ID. Any previous\r\n\t\t * association with the specified key binding is overwriten. If the\r\n\t\t * action ID is <code>null</code>, the association is removed.\r\n\t\t * \r\n\t\t * @param {orion.KeyBinding} keyBinding the key binding\r\n\t\t * @param {String} actionID the action ID\r\n\t\t */\r\n\t\tsetKeyBinding: function(keyBinding, actionID) {\r\n\t\t\tvar keyBindings = this._keyBindings;\r\n\t\t\tfor (var i = 0; i < keyBindings.length; i++) {\r\n\t\t\t\tvar kb = keyBindings[i]; \r\n\t\t\t\tif (kb.keyBinding.equals(keyBinding)) {\r\n\t\t\t\t\tif (actionID) {\r\n\t\t\t\t\t\tkb.actionID = actionID;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (kb.predefined) {\r\n\t\t\t\t\t\t\tkb.actionID = \"noop\"; //$NON-NLS-0$\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tkeyBindings.splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (actionID) {\r\n\t\t\t\tkeyBindings.push({keyBinding: keyBinding, actionID: actionID});\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetView: function(view) {\r\n\t\t\tthis._view = view;\r\n\t\t}\r\n\t};\r\n\t\r\n\tfunction DefaultKeyMode(view) {\r\n\t\tKeyMode.call(this, view);\r\n\t}\r\n\tDefaultKeyMode.prototype = new KeyMode();\r\n\tDefaultKeyMode.prototype.createKeyBindings = function () {\r\n\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t//no duplicate keybindings\r\n\t\tvar bindings = [];\r\n\r\n\t\t// Cursor Navigation\r\n\t\tbindings.push({actionID: \"lineUp\",\t\tkeyBinding: new KeyBinding(38), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"lineDown\",\tkeyBinding: new KeyBinding(40), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"charPrevious\",\tkeyBinding: new KeyBinding(37), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"charNext\",\tkeyBinding: new KeyBinding(39), predefined: true}); //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"scrollPageUp\",\t\tkeyBinding: new KeyBinding(33), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageDown\",\tkeyBinding: new KeyBinding(34), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageUp\",\t\tkeyBinding: new KeyBinding(33, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageDown\",\tkeyBinding: new KeyBinding(34, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(37, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(39, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordPrevious\",\tkeyBinding: new KeyBinding(37, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordNext\",\tkeyBinding: new KeyBinding(39, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollTextStart\",\tkeyBinding: new KeyBinding(36), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollTextEnd\",\t\tkeyBinding: new KeyBinding(35), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textStart\",\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textEnd\",\t\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageUp\",\tkeyBinding: new KeyBinding(38, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollPageDown\",\t\tkeyBinding: new KeyBinding(40, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(37, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(39, null, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t//TODO These two actions should be changed to paragraph start and paragraph end  when word wrap is implemented\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(38, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(40, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tbindings.push({actionID: \"pageUp\",\t\tkeyBinding: new KeyBinding(33), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"pageDown\",\tkeyBinding: new KeyBinding(34), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineStart\",\tkeyBinding: new KeyBinding(36), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\",\t\tkeyBinding: new KeyBinding(35), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordPrevious\",\tkeyBinding: new KeyBinding(37, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"wordNext\",\tkeyBinding: new KeyBinding(39, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textStart\",\tkeyBinding: new KeyBinding(36, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"textEnd\",\t\tkeyBinding: new KeyBinding(35, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\tif (util.isFirefox && util.isLinux) {\r\n\t\t\tbindings.push({actionID: \"lineUp\",\t\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineDown\",\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\tif (util.isWindows) {\r\n\t\t\tbindings.push({actionID: \"scrollLineUp\",\tkeyBinding: new KeyBinding(38, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"scrollLineDown\",\tkeyBinding: new KeyBinding(40, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t// Select Cursor Navigation\r\n\t\tbindings.push({actionID: \"selectLineUp\",\t\tkeyBinding: new KeyBinding(38, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectLineDown\",\t\tkeyBinding: new KeyBinding(40, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectCharPrevious\",\tkeyBinding: new KeyBinding(37, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectCharNext\",\t\tkeyBinding: new KeyBinding(39, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectPageUp\",\t\tkeyBinding: new KeyBinding(33, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectPageDown\",\t\tkeyBinding: new KeyBinding(34, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(37, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(39, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordPrevious\",\tkeyBinding: new KeyBinding(37, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordNext\",\tkeyBinding: new KeyBinding(39, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\tkeyBinding: new KeyBinding(36, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(35, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\tkeyBinding: new KeyBinding(38, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(40, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(37, null, true, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(39, null, true, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t//TODO These two actions should be changed to select paragraph start and select paragraph end  when word wrap is implemented\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\tkeyBinding: new KeyBinding(38, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(40, null, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tif (util.isLinux) {\r\n\t\t\t\tbindings.push({actionID: \"selectWholeLineUp\",\t\tkeyBinding: new KeyBinding(38, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"selectWholeLineDown\",\t\tkeyBinding: new KeyBinding(40, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\tbindings.push({actionID: \"selectLineStart\",\t\tkeyBinding: new KeyBinding(36, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectLineEnd\",\t\tkeyBinding: new KeyBinding(35, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordPrevious\",\tkeyBinding: new KeyBinding(37, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectWordNext\",\t\tkeyBinding: new KeyBinding(39, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextStart\",\t\tkeyBinding: new KeyBinding(36, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"selectTextEnd\",\t\tkeyBinding: new KeyBinding(35, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\t\r\n\t\t//Undo stack\r\n\t\tbindings.push({actionID: \"undo\", keyBinding: new mKeyBinding.KeyBinding('z', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"redo\", keyBinding: new mKeyBinding.KeyBinding('z', true, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t} else {\r\n\t\t\tbindings.push({actionID: \"redo\", keyBinding: new mKeyBinding.KeyBinding('y', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t//Misc\r\n\t\tbindings.push({actionID: \"deletePrevious\",\t\tkeyBinding: new KeyBinding(8), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deletePrevious\",\t\tkeyBinding: new KeyBinding(8, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteNext\",\t\tkeyBinding: new KeyBinding(46), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, true, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"deleteWordNext\",\t\tkeyBinding: new KeyBinding(46, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"tab\",\t\t\tkeyBinding: new KeyBinding(9), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"shiftTab\",\t\t\tkeyBinding: new KeyBinding(9, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"enter\",\t\t\tkeyBinding: new KeyBinding(13), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"enter\",\t\t\tkeyBinding: new KeyBinding(13, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"escape\",\t\t\tkeyBinding: new KeyBinding(27), predefined: true}); //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"selectAll\",\t\tkeyBinding: new KeyBinding('a', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"toggleTabMode\",\tkeyBinding: new KeyBinding('m', true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"deleteNext\",\t\tkeyBinding: new KeyBinding(46, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteWordPrevious\",\tkeyBinding: new KeyBinding(8, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteWordNext\",\t\tkeyBinding: new KeyBinding(46, null, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\t\t\r\n\t\tbindings.push({actionID: \"toggleWrapMode\",\t\tkeyBinding: new mKeyBinding.KeyBinding('w', true, false, true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\tbindings.push({actionID: \"toggleOverwriteMode\",\t\tkeyBinding: new mKeyBinding.KeyBinding(45)}); //$NON-NLS-0$\r\n\t\t\r\n\t\t/*\r\n\t\t* Feature in IE/Chrome: prevent ctrl+'u', ctrl+'i', and ctrl+'b' from applying styles to the text.\r\n\t\t*\r\n\t\t* Note that Chrome applies the styles on the Mac with Ctrl instead of Cmd.\r\n\t\t*/\r\n\t\tif (!util.isFirefox) {\r\n\t\t\tvar isMacChrome = util.isMac && util.isChrome;\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('u', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('i', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"noop\", keyBinding: new KeyBinding('b', !isMacChrome, false, false, isMacChrome), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\tif (util.isFirefox) {\r\n\t\t\tbindings.push({actionID: \"copy\", keyBinding: new KeyBinding(45, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"paste\", keyBinding: new KeyBinding(45, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"cut\", keyBinding: new KeyBinding(46, null, true), predefined: true}); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\t// Add the emacs Control+ ... key bindings.\r\n\t\tif (util.isMac) {\r\n\t\t\tbindings.push({actionID: \"lineStart\", keyBinding: new KeyBinding(\"a\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineEnd\", keyBinding: new KeyBinding(\"e\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineUp\", keyBinding: new KeyBinding(\"p\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"lineDown\", keyBinding: new KeyBinding(\"n\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"charPrevious\", keyBinding: new KeyBinding(\"b\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"charNext\", keyBinding: new KeyBinding(\"f\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deletePrevious\", keyBinding: new KeyBinding(\"h\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteNext\", keyBinding: new KeyBinding(\"d\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"deleteLineEnd\", keyBinding: new KeyBinding(\"k\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tif (util.isFirefox) {\r\n\t\t\t\tbindings.push({actionID: \"scrollPageDown\", keyBinding: new KeyBinding(\"v\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"deleteLineStart\", keyBinding: new KeyBinding(\"u\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"deleteWordPrevious\", keyBinding: new KeyBinding(\"w\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t} else {\r\n\t\t\t\tbindings.push({actionID: \"pageDown\", keyBinding: new KeyBinding(\"v\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"centerLine\", keyBinding: new KeyBinding(\"l\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tbindings.push({actionID: \"enterNoCursor\", keyBinding: new KeyBinding(\"o\", false, false, false, true), predefined: true}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t//TODO implement: y (yank), t (transpose)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bindings;\r\n\t};\r\n\t\r\n\treturn {\r\n\t\tKeyMode: KeyMode,\r\n\t\tDefaultKeyMode: DefaultKeyMode\r\n\t};\r\n});\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013,2014 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/textTheme\", //$NON-NLS-0$\r\n[\r\n\t'require', //$NON-NLS-0$\r\n\t'orion/editor/eventTarget', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(require, mEventTarget, util) {\r\n\tvar THEME_PREFIX = \"orion-theme-\"; //$NON-NLS-0$\r\n\t\r\n\tvar Themes = {};\r\n\r\n\t/**\r\n\t * Constructs a new text theme. \r\n\t * \r\n\t * @class A TextTheme is a class used to specify an editor theme.\r\n\t * @name orion.editor.TextTheme\r\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\r\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\r\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\r\n\t */\r\n\tfunction TextTheme(options) {\r\n\t\toptions = options || {};\r\n\t\tthis._document = options.document || document;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets an instance of <code>orion.editor.TextTheme</code> by name. If the name\r\n\t * paramenter is not speficed the default text theme instance is returned.\r\n\t * Subsequent calls of <code>getTheme</code> with the same name will return\r\n\t * the same instance.\r\n\t */\r\n\tTextTheme.getTheme = function(name) {\r\n\t\tname = name || \"default\"; //$NON-NLS-0$\r\n\t\tvar theme = Themes[name];\r\n\t\tif (!theme) {\r\n\t\t\ttheme = Themes[name] = new TextTheme();\r\n\t\t}\r\n\t\treturn theme;\r\n\t};\r\n\r\n\tTextTheme.prototype = /** @lends orion.editor.TextTheme.prototype */ {\r\n\t\t/**\r\n\t\t * Returns the theme className.\r\n\t\t *\r\n\t\t * @see orion.editor.TextTheme#setThemeClass\r\n\t\t */\r\n\t\tgetThemeClass: function() {\r\n\t\t\treturn this._themeClass;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @class This object represents a style sheet for a theme manager.\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.TextTheme#setThemeClass}\r\n\t\t * </p>\r\n\t\t * @name orion.editor.ThemeStyleSheet\r\n\t\t * \r\n\t\t * @property {String} href The href of the stylesheet\r\n\t\t */\r\n\t\t/**\r\n\t\t * Sets the theme className and style sheet.\r\n\t\t * <p>\r\n\t\t * If the <code>stylesheet</code> parameter is a string, it represents an inline\r\n\t\t * CSS and it will be added to the document as a <i>STYLE</i> tag element.  If the\r\n\t\t * <code>stylesheet</code> parameter is a <code>orion.editor.ThemeStyleSheet</code>,\r\n\t\t * its href property is loaded as either a <i>STYLE</i> tag element or as a <i>LINK</i>\r\n\t\t * tag element.\r\n\t\t * </p>\r\n\t\t * <p>\r\n\t\t * Listeners of the ThemeChanged event are notify once the styled sheet is loaded\r\n\t\t * into the document.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @param {String} className the new theme className.\r\n\t\t * @param {String|orion.editor.ThemeStyleSheet} styleSheet the CSS stylesheet for the new theme className.\r\n\t\t *\r\n\t\t * @see orion.editor.TextTheme#getThemeClass\r\n\t\t * @see orion.editor.TextTheme#onThemeChanged\r\n\t\t */\r\n\t\t setThemeClass: function(className, styleSheet) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar oldThemeClass = self._themeClass;\t\r\n\t\t\tself._themeClass = className;\r\n\t\t\tthis._load(className, styleSheet, function() {\r\n\t\t\t\tself.onThemeChanged({\r\n\t\t\t\t\ttype: \"ThemeChanged\", //$NON-NLS-0$\r\n\t\t\t\t\toldValue: oldThemeClass,\r\n\t\t\t\t\tnewValue: self.getThemeClass()\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * @class This is the event sent when the theme className or style sheet has changed.\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.TextTheme}<br/>\r\n\t\t * {@link orion.editor.TextTheme#event:onThemeChanged}\r\n\t\t * </p>\r\n\t\t * @name orion.editor.ThemeChangedEvent\r\n\t\t * \r\n\t\t * @property {String} oldValue The old theme clasName.\r\n\t\t * @property {String} newValue The new theme className.\r\n\t\t */\r\n\t\t/**\r\n\t\t * This event is sent when the theme clasName has changed and its style sheet has been loaded in the document.\r\n\t\t *\r\n\t\t * @event\r\n\t\t * @param {orion.editor.ThemeChangedEvent} themeChangedEvent the event\r\n\t\t */\r\n\t\tonThemeChanged: function(themeChangedEvent) {\r\n\t\t\treturn this.dispatchEvent(themeChangedEvent);\r\n\t\t},\r\n\t\tbuildStyleSheet: function(themeClass, settings) {\r\n\t\t\tvar convertCSSname = function(name) {\r\n\t\t\t\treturn name.replace(this._capitalRegEx, function(match) {\r\n\t\t\t\t\treturn \"-\" + match; //$NON-NLS-0$\r\n\t\t\t\t}.bind(this)).toLowerCase();\r\n\t\t\t}.bind(this);\r\n\r\n\t\t\tvar parseStyles = function(object, ancestors, className, isTopLevel, result) {\r\n\t\t\t\tvar localResult = [];\r\n\t\t\t\tvar keys = Object.keys(object);\r\n\t\t\t\tkeys.forEach(function(key) {\r\n\t\t\t\t\tif(key !== \"isTopLevel\"){\r\n\t\t\t\t\t\tvar value = object[key];\r\n\t\t\t\t\t\tif (typeof(value) === \"string\") { //$NON-NLS-0$\r\n\t\t\t\t\t\t\tlocalResult.push(\"\\t\" + convertCSSname(key) + \": \" + value + \";\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(value.isTopLevel){\r\n\t\t\t\t\t\t\t\tparseStyles(\r\n\t\t\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t\t\t\tclassName === key ? ancestors : ancestors + (isTopLevel ? \" .\" : \".\") + key, //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\tresult);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tparseStyles(\r\n\t\t\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t\t\t\tclassName === key ? ancestors : ancestors + (isTopLevel ? \" .\" : \".\") + key, //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\tresult);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (localResult.length) {\r\n\t\t\t\t\tresult.push(ancestors + (isTopLevel ? \".textview\" : \"\") + \" {\"); //$NON-NLS-0$\r\n\t\t\t\t\tresult.push.apply(result, localResult);\r\n\t\t\t\t\tresult.push(\"}\"); //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar result = [\"\"];\r\n\t\t\tparseStyles(settings.styles, \".\" + themeClass, settings.className, true, result); //$NON-NLS-0$\r\n\t\t\treturn result.join(\"\\n\"); //$NON-NLS-0$\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\t_createStyle: function(className, styleSheet, callback, link) {\r\n\t\t\tvar document = this._document;\r\n\t\t\tvar id = THEME_PREFIX + className;\r\n\t\t\tvar node = document.getElementById(id);\r\n\t\t\tif (node) {\r\n\t\t\t\tif (link || node.firstChild.data === styleSheet) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnode.removeChild(node.firstChild);\r\n\t\t\t\tnode.appendChild(document.createTextNode(styleSheet));\r\n\t\t\t} else {\r\n\t\t\t\tif (link) {\r\n\t\t\t\t\tnode = util.createElement(document, \"link\"); //$NON-NLS-0$\r\n\t\t\t\t\tnode.rel = \"stylesheet\"; //$NON-NLS-0$\r\n\t\t\t\t\tnode.type = \"text/css\"; //$NON-NLS-0$\r\n\t\t\t\t\tnode.href = styleSheet;\r\n\t\t\t\t\tnode.addEventListener(\"load\", function() { //$NON-NLS-0$\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode = util.createElement(document, \"style\"); //$NON-NLS-0$\r\n\t\t\t\t\tnode.appendChild(document.createTextNode(styleSheet));\r\n\t\t\t\t}\r\n\t\t\t\tnode.id = id;\r\n\t\t\t\tvar head = document.getElementsByTagName(\"head\")[0] || document.documentElement; //$NON-NLS-0$\r\n\t\t\t\thead.appendChild(node);\r\n\t\t\t}\r\n\t\t\tif (!link) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\t_load: function (className, styleSheet, callback) {\r\n\t\t\tif (!className) {\r\n\t\t\t\tcallback();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (typeof styleSheet === \"string\") { //$NON-NLS-0$\r\n\t\t\t\tthis._createStyle(className, styleSheet, callback);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar href = styleSheet.href;\r\n\t\t\tvar extension = \".css\"; //$NON-NLS-0$\r\n\t\t\tif (href.substring(href.length - extension.length) !== extension) {\r\n\t\t\t\thref += extension;\r\n\t\t\t}\r\n\t\t\tif (/^\\//.test(href) || /[a-zA-Z0-9]+:\\/\\//i.test(href) || !require.toUrl /* almond cannot load dynamically */) {\r\n\t\t\t\tthis._createStyle(className, href, callback, true);\r\n\t\t\t} else {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trequire([\"text!\" + href], function(cssText) { //$NON-NLS-0$\r\n\t\t\t\t\tself._createStyle(className, cssText, callback, false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t_capitalRegEx: /[A-Z]/g\r\n\t};\r\n\tmEventTarget.EventTarget.addMixin(TextTheme.prototype);\r\n\t\r\n\treturn {\r\n\t\tTextTheme: TextTheme\r\n\t};\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013, 2016 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n * \r\n * Contributors: IBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n \r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/util\", [], function() { //$NON-NLS-0$\r\n\t\r\n\t/** @private */\r\n\tfunction addEventListener(node, type, handler, capture) {\r\n\t\tif (typeof node.addEventListener === \"function\") { //$NON-NLS-0$\r\n\t\t\tnode.addEventListener(type, handler, capture === true);\r\n\t\t} else {\r\n\t\t\tnode.attachEvent(\"on\" + type, handler); //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\t/** @private */\r\n\tfunction removeEventListener(node, type, handler, capture) {\r\n\t\tif (typeof node.removeEventListener === \"function\") { //$NON-NLS-0$\r\n\t\t\tnode.removeEventListener(type, handler, capture === true);\r\n\t\t} else {\r\n\t\t\tnode.detachEvent(\"on\" + type, handler); //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\t/** @private */\r\n\tfunction compare(s1, s2) {\r\n\t\tif (s1 === s2) { return true; }\r\n\t\tif (s1 && !s2 || !s1 && s2) { return false; }\r\n\t\tif ((s1 && s1.constructor === String) || (s2 && s2.constructor === String)) { return false; }\r\n\t\tif (s1 instanceof Array || s2 instanceof Array) {\r\n\t\t\tif (!(s1 instanceof Array && s2 instanceof Array)) { return false; }\r\n\t\t\tif (s1.length !== s2.length) { return false; }\r\n\t\t\tfor (var i = 0; i < s1.length; i++) {\r\n\t\t\t\tif (!compare(s1[i], s2[i])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!(s1 instanceof Object) || !(s2 instanceof Object)) { return false; }\r\n\t\tvar p;\r\n\t\tfor (p in s1) {\r\n\t\t\tif (s1.hasOwnProperty(p)) {\r\n\t\t\t\tif (!s2.hasOwnProperty(p)) { return false; }\r\n\t\t\t\tif (!compare(s1[p], s2[p])) {return false; }\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (p in s2) {\r\n\t\t\tif (!s1.hasOwnProperty(p)) { return false; }\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t/** @private */\r\n\tfunction contains(topNode, node) {\r\n\t\tif (!node) { return false; }\r\n\t\tif (!topNode.compareDocumentPosition) {\r\n\t\t\tvar temp = node;\r\n\t\t\twhile (temp) {\r\n\t\t\t\tif (topNode === temp) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\ttemp = temp.parentNode;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn topNode === node || (topNode.compareDocumentPosition(node) & 16) !== 0;\r\n\t}\r\n\t/** @private */\r\n\tfunction getNodeStyle(node, prop, defaultValue) {\r\n\t\tvar value;\r\n\t\tif (node) {\r\n\t\t\tvalue = node.style[prop];\r\n\t\t\tif (!value) {\r\n\t\t\t\tif (node.currentStyle) {\r\n\t\t\t\t\tvar index = 0, p = prop;\r\n\t\t\t\t\twhile ((index = p.indexOf(\"-\", index)) !== -1) { //$NON-NLS-0$\r\n\t\t\t\t\t\tp = p.substring(0, index) + p.substring(index + 1, index + 2).toUpperCase() + p.substring(index + 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue = node.currentStyle[p];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar css = node.ownerDocument.defaultView.getComputedStyle(node, null);\r\n\t\t\t\t\tvalue = css ? css.getPropertyValue(prop) : null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value || defaultValue;\r\n\t}\r\n\r\n\t/**\r\n\t * @class\r\n\t * @private\r\n\t * @name orion.editor.Animation\r\n\t * @description Creates an animation.\r\n\t * @param {Object} options Options controlling the animation.\r\n\t * @param {Array} options.curve Array of 2 values giving the start and end points for the animation.\r\n\t * @param {Number} [options.duration=350] Duration of the animation, in milliseconds.\r\n\t * @param {Function} [options.easing]\r\n\t * @param {Function} [options.onAnimate]\r\n\t * @param {Function} [options.onEnd]\r\n\t * @param {Number} [options.rate=20] The time between frames, in milliseconds.\r\n\t */\r\n\tvar Animation = /** @ignore */ (function() {\r\n\t\tfunction Animation(options) {\r\n\t\t\tthis.options = options;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Plays this animation.\r\n\t\t * @function\r\n\t\t * @memberOf orion.editor.Animation.prototype\r\n\t\t * @name play\r\n\t\t */\r\n\t\tAnimation.prototype.play = function() {\r\n\t\t\tvar duration = (typeof this.options.duration === \"number\") ? this.options.duration : 350, //$NON-NLS-0$\r\n\t\t\t    rate = (typeof this.options.rate === \"number\") ? this.options.rate : 20, //$NON-NLS-0$\r\n\t\t\t    easing = this.options.easing || this.defaultEasing,\r\n\t\t\t    onAnimate = this.options.onAnimate || function() {},\r\n\t\t\t    start = this.options.curve[0],\r\n\t\t\t    end = this.options.curve[1],\r\n\t\t\t    range = (end - start),\r\n\t\t\t    startedAt = -1,\r\n\t\t\t\tpropertyValue,\r\n\t\t\t\tself = this;\r\n\r\n\t\t\tfunction onFrame() {\r\n\t\t\t\tstartedAt = (startedAt === -1) ? Date.now() : startedAt;\r\n\t\t\t\tvar now = Date.now(),\r\n\t\t\t\t    percentDone = (now - startedAt) / duration;\r\n\t\t\t\tif (percentDone < 1) {\r\n\t\t\t\t\tvar eased = easing(percentDone);\r\n\t\t\t\t\tpropertyValue = start + (eased * range);\r\n\t\t\t\t\tonAnimate(propertyValue);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonAnimate(end);\r\n\t\t\t\t\tself.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.interval = this.options.window.setInterval(onFrame, rate);\r\n\t\t};\r\n\t\t/**\r\n\t\t * Stops this animation.\r\n\t\t * @function\r\n\t\t * @memberOf orion.editor.Animation.prototype\r\n\t\t */\r\n\t\tAnimation.prototype.stop = function() {\r\n\t\t\tthis.options.window.clearInterval(this.interval);\r\n\t\t    var onEnd = this.options.onEnd || function () {};\r\n\t\t\tonEnd();\r\n\t\t};\r\n\t\tAnimation.prototype.defaultEasing = function(x) {\r\n\t\t\treturn Math.sin(x * (Math.PI / 2));\r\n\t\t};\r\n\t\treturn Animation;\r\n\t}());\r\n\r\n\treturn {\r\n\t\tcompare: compare,\r\n\t\tcontains: contains,\r\n\t\tgetNodeStyle: getNodeStyle,\r\n\t\taddEventListener: addEventListener,\r\n\t\tremoveEventListener: removeEventListener,\r\n\t\tAnimation: Animation\r\n\t};\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n *******************************************************************************/\ndefine ('orion/bidiFormat',[], function() {\n\n    var TextSegment = (function() {\n        var TextSegment = function (obj) {\n            this.content = \"\";\n            this.actual = \"\";\n            this.textDirection = \"\";\n            this.localGui = \"\";\n            this.isVisible = true;\n            this.isSeparator = false;\n            this.isParsed = false;\n            this.keep = false;\n            this.inBounds = false;\n            this.inPoints = false;\n            var prop = \"\";\n            for (prop in obj) {\n                if (obj.hasOwnProperty(prop)) {\n                    this[prop] = obj[prop];\n                }\n            }\n        };\n        return TextSegment;\n    })();\n\n    var tools = (function() {\n        function initBounds(bounds) {\n            if (!bounds) {\n                return false;\n            }\n            if (typeof(bounds.start) === \"undefined\") {\n                bounds.start = \"\";\n            }\n            if (typeof(bounds.end) === \"undefined\") {\n                bounds.end = \"\";\n            }\n            if (typeof(bounds.startAfter) !== \"undefined\") {\n                bounds.start = bounds.startAfter;\n                bounds.after = true;\n            } else {\n                bounds.after = false;\n            }\n            if (typeof(bounds.endBefore) !== \"undefined\") {\n                bounds.end = bounds.endBefore;\n                bounds.before = true;\n            } else {\n                bounds.before = false;\n            }\n            var startPos = parseInt(bounds.startPos, 10);\n            if (!isNaN(startPos)) {\n                bounds.usePos = true;\n            } else {\n                bounds.usePos = false;\n            }\n            var bLength = parseInt(bounds.length, 10);\n            if (!isNaN(bLength)) {\n                bounds.useLength = true;\n            } else {\n                bounds.useLength = false;\n            }\n            bounds.loops = typeof(bounds.loops) !== \"undefined\" ? !!bounds.loops : true;\n            return true;\n        }\n\n        function getBounds(segment, src) {\n            var bounds = {};\n            for (var prop in src) {\n                if (src.hasOwnProperty(prop)) {\n                    bounds[prop] = src[prop];\n                }\n            }\n            var content = segment.content;\n            var usePos = bounds.usePos && bounds.startPos < content.length;\n            if (usePos) {\n                bounds.start = \"\";\n                bounds.loops = false;\n            }\n            bounds.bStart = usePos ? bounds.startPos : bounds.start.length > 0 ? content.indexOf(bounds.start) : 0;\n            var useLength = bounds.useLength && bounds.length > 0 && bounds.bStart + bounds.length < content.length;\n            if (useLength) {\n                bounds.end = \"\";\n            }\n            bounds.bEnd = useLength ? bounds.bStart + bounds.length : bounds.end.length > 0 ?\n                    content.indexOf(bounds.end, bounds.bStart + bounds.start.length) + 1 : content.length;\n            if (!bounds.after) {\n                bounds.start = \"\";\n            }\n            if (!bounds.before) {\n                bounds.end = \"\";\n            }\n            return bounds;\n        }\n\n        return {\n            handleSubcontents: function (segments, args, subs, origContent, locale) { // jshint unused: false\n                if (!subs.content || typeof(subs.content) !== \"string\" || subs.content.length === 0) {\n                    return segments;\n                }\n                var sLoops = true;\n                if (typeof(subs.loops) !== \"undefined\") {\n                    sLoops = !!subs.loops;\n                }\n                for (var j = 0; true; j++) {\n                    if (j >= segments.length) {\n                        break;\n                    }\n                    if (segments[j].isParsed || segments.keep || segments[j].isSeparator) {\n                        continue;\n                    }\n                    var content = segments[j].content;\n                    var start = content.indexOf(subs.content);\n                    if (start < 0) {\n                        continue;\n                    }\n                    var end;\n                    var length = 0;\n                    if (subs.continued) {\n                        do {\n                            length++;\n                            end = content.indexOf(subs.content, start + length * subs.content.length);\n                        } while (end === 0);\n                    } else {\n                        length = 1;\n                    }\n                    end = start + length * subs.content.length;\n                    segments.splice(j, 1);\n                    if (start > 0) {\n                        segments.splice(j, 0, new TextSegment({\n                            content: content.substring(0, start),\n                            localGui: args.dir,\n                            keep: true\n                        }));\n                        j++;\n                    }\n                    segments.splice(j, 0, new TextSegment({\n                        content: content.substring(start, end),\n                        textDirection: subs.subDir,\n                        localGui: args.dir\n                    }));\n                    if (end < content.length) {\n                        segments.splice(j + 1, 0, new TextSegment({\n                            content: content.substring(end, content.length),\n                            localGui: args.dir,\n                            keep: true\n                        }));\n                    }\n                    if (!sLoops) {\n                        break;\n                    }\n                }\n            },\n\n            handleBounds: function (segments, args, aBounds, origContent, locale) {\n                for (var i = 0; i < aBounds.length; i++) {\n                    if (!initBounds(aBounds[i])) {\n                        continue;\n                    }\n                    for (var j = 0; true; j++) {\n                        if (j >= segments.length) {\n                            break;\n                        }\n                        if (segments[j].isParsed || segments[j].inBounds || segments.keep || segments[j].isSeparator) {\n                            continue;\n                        }\n                        var bounds = getBounds(segments[j], aBounds[i]);\n                        var start = bounds.bStart;\n                        var end = bounds.bEnd;\n                        if (start < 0 || end < 0) {\n                            continue;\n                        }\n                        var content = segments[j].content;\n\n                        segments.splice(j, 1);\n                        if (start > 0) {\n                            segments.splice(j, 0, new TextSegment({\n                                content: content.substring(0, start),\n                                localGui: args.dir,\n                                keep: true\n                            }));\n                            j++;\n                        }\n                        if (bounds.start) {\n                            segments.splice(j, 0, new TextSegment({\n                                content: bounds.start,\n                                localGui: args.dir,\n                                isSeparator: true\n                            }));\n                            j++;\n                        }\n                        segments.splice(j, 0, new TextSegment({\n                            content: content.substring(start + bounds.start.length, end - bounds.end.length),\n                            textDirection: bounds.subDir,\n                            localGui: args.dir,\n                            inBounds: true\n                        }));\n                        if (bounds.end) {\n                            j++;\n                            segments.splice(j, 0, new TextSegment({\n                                content: bounds.end,\n                                localGui: args.dir,\n                                isSeparator: true\n                            }));\n                        }\n                        if (end + bounds.end.length < content.length) {\n                            segments.splice(j + 1, 0, new TextSegment({\n                                content: content.substring(end + bounds.end.length, content.length),\n                                localGui: args.dir,\n                                keep: true\n                            }));\n                        }\n                        if (!bounds.loops) {\n                            break;\n                        }\n                    }\n                }\n                for (i = 0; i < segments.length; i++) {\n                    segments[i].inBounds = false;\n                }\n                return segments;\n            },\n\n            handleCases: function (segments, args, cases, origContent, locale) {\n                if (cases.length === 0) {\n                    return segments;\n                }\n                var hArgs = {};\n                for (var prop in args) {\n                    if (args.hasOwnProperty(prop)) {\n                        hArgs[prop] = args[prop];\n                    }\n                }\n                for (var i =  0; i < cases.length; i++) {\n                    if (!cases[i].handler || typeof(cases[i].handler.handle) !== \"function\") {\n                        cases[i].handler = args.commonHandler;\n                    }\n                    if (cases[i].args) {\n                        hArgs.cases = cases[i].args.cases;\n                        hArgs.points = cases[i].args.points;\n                        hArgs.bounds = cases[i].args.bounds;\n                        hArgs.subs = cases[i].args.subs;\n                    } else {\n                        hArgs.cases = [];\n                        hArgs.points = [];\n                        hArgs.bounds = [];\n                        hArgs.subs = {};\n                    }\n                    cases[i].handler.handle(origContent, segments, hArgs, locale);\n                }\n                return segments;\n            },\n\n            handlePoints: function (segments, args, points, origContent, locale) { //jshint unused: false\n                for (var i = 0; i < points.length; i++) {\n                    for (var j = 0; true; j++) {\n                        if (j >= segments.length) {\n                            break;\n                        }\n                        if (segments[j].isParsed || segments[j].keep || segments[j].isSeparator) {\n                            continue;\n                        }\n                        var content = segments[j].content;\n                        var pos = content.indexOf(points[i]);\n                        if (pos >= 0) {\n                            segments.splice(j, 1);\n                            if (pos > 0) {\n                                segments.splice(j, 0, new TextSegment({\n                                    content: content.substring(0, pos),\n                                    textDirection: args.subDir,\n                                    localGui: args.dir,\n                                    inPoints: true\n                                }));\n                                j++;\n                            }\n                            segments.splice(j, 0, new TextSegment({\n                                content: points[i],\n                                localGui: args.dir,\n                                isSeparator: true\n                            }));\n                            if (pos + points[i].length + 1 <= content.length) {\n                                segments.splice(j + 1, 0, new TextSegment({\n                                    content: content.substring(pos + points[i].length),\n                                    textDirection: args.subDir,\n                                    localGui: args.dir,\n                                    inPoints: true\n                                }));\n                            }\n                        }\n                    }\n                }\n                for (i = 0; i < segments.length; i++) {\n                    if (segments[i].keep) {\n                        segments[i].keep = false;\n                    } else if(segments[i].inPoints){\n                        segments[i].isParsed = true;\n                        segments[i].inPoints = false;\n                    }\n                }\n                return segments;\n            }\n        };\n    })();\n\n    var common = (function() {\n        return {\n            handle: function (content, segments, args, locale) {\n                var cases = [];\n                if (Array.isArray(args.cases)) {\n                    cases = args.cases;\n                }\n                var points = [];\n                if (typeof(args.points) !== \"undefined\") {\n                    if (Array.isArray(args.points)) {\n                        points = args.points;\n                    } else if (typeof(args.points) === \"string\") {\n                        points = args.points.split(\"\");\n                    }\n                }\n                var subs = {};\n                if (typeof(args.subs) === \"object\") {\n                    subs = args.subs;\n                }\n                var aBounds = [];\n                if (Array.isArray(args.bounds)) {\n                    aBounds = args.bounds;\n                }\n\n                tools.handleBounds(segments, args, aBounds, content, locale);\n                tools.handleSubcontents(segments, args, subs, content, locale);\n                tools.handleCases(segments, args, cases, content, locale);\n                tools.handlePoints(segments, args, points, content, locale);\n                return segments;\n            }\n        };\n    })();\n\n    var misc = (function() {\n        var isBidiLocale = function (locale) {\n            var lang = !locale ? \"\" : locale.split(\"-\")[0];\n            if (!lang || lang.length < 2) {\n                return false;\n            }\n            return [\"iw\", \"he\", \"ar\", \"fa\", \"ur\"].some(function (bidiLang) {\n                return bidiLang === lang;\n            });\n        };\n        var LRE = \"\\u202A\";\n        var RLE = \"\\u202B\";\n        var PDF = \"\\u202C\";\n        var LRM = \"\\u200E\";\n        var RLM = \"\\u200F\";\n        var LRO = \"\\u202D\";\n        var RLO = \"\\u202E\";\n\n        return {\n            LRE: LRE,\n            RLE: RLE,\n            PDF: PDF,\n            LRM: LRM,\n            RLM: RLM,\n            LRO: LRO,\n            RLO: RLO,\n\n            getLocaleDetails: function (locale) {\n                if (!locale) {\n                    locale = typeof navigator === \"undefined\" ? \"\" :\n                        (navigator.language ||\n                        navigator.userLanguage ||\n                        \"\");\n                }\n                locale = locale.toLowerCase();\n                if (isBidiLocale(locale)) {\n                    var full = locale.split(\"-\");\n                    return {lang: full[0], country: full[1] ? full[1] : \"\"};\n                }\n                return {lang: \"not-bidi\"};\n            },\n\n            removeUcc: function (text) {\n                if (text) {\n                    return text.replace(/[\\u200E\\u200F\\u202A-\\u202E]/g, \"\");\n                }\n                return text;\n            },\n\n            removeTags: function (text) {\n                if (text) {\n                    return text.replace(/<[^<]*>/g, \"\");\n                }\n                return text;\n            },\n\n            getDirection: function (text, dir, guiDir, checkEnd) {\n                if (dir !== \"auto\" && (/^(rtl|ltr)$/i).test(dir)) {\n                    return dir;\n                }\n                guiDir = (/^(rtl|ltr)$/i).test(guiDir) ? guiDir : \"ltr\";\n                var txt = !checkEnd ? text : text.split(\"\").reverse().join(\"\");\n                var fdc = /[A-Za-z\\u05d0-\\u065f\\u066a-\\u06ef\\u06fa-\\u07ff\\ufb1d-\\ufdff\\ufe70-\\ufefc]/.exec(txt);\n                return fdc ? (fdc[0] <= \"z\" ? \"ltr\" : \"rtl\") : guiDir;\n            },\n\n            hasArabicChar: function (text) {\n                var fdc = /[\\u0600-\\u065f\\u066a-\\u06ef\\u06fa-\\u07ff\\ufb1d-\\ufdff\\ufe70-\\ufefc]/.exec(text);\n                return !!fdc;\n            },\n\n            showMarks: function (text, guiDir) {\n                var result = \"\";\n                for (var i = 0; i < text.length; i++) {\n                    var c = \"\" + text.charAt(i);\n                    switch (c) {\n                    case LRM:\n                        result += \"<LRM>\";\n                        break;\n                    case RLM:\n                        result += \"<RLM>\";\n                        break;\n                    case LRE:\n                        result += \"<LRE>\";\n                        break;\n                    case RLE:\n                        result += \"<RLE>\";\n                        break;\n                    case LRO:\n                        result += \"<LRO>\";\n                        break;\n                    case RLO:\n                        result += \"<RLO>\";\n                        break;\n                    case PDF:\n                        result += \"<PDF>\";\n                        break;\n                    default:\n                        result += c;\n                    }\n                }\n                var mark = typeof(guiDir) === \"undefined\" || !((/^(rtl|ltr)$/i).test(guiDir)) ? \"\" :\n                    guiDir === \"rtl\" ? RLO : LRO;\n                return mark + result + (mark === \"\" ? \"\" : PDF);\n            },\n\n            hideMarks: function (text) {\n                var txt = text.replace(/<LRM>/g, this.LRM).replace(/<RLM>/g, this.RLM).replace(/<LRE>/g, this.LRE);\n                return txt.replace(/<RLE>/g, this.RLE).replace(/<LRO>/g, this.LRO).replace(/<RLO>/g, this.RLO).replace(/<PDF>/g, this.PDF);\n            },\n\n            showTags: function (text) {\n                return \"<xmp>\" + text + \"</xmp>\";\n            },\n\n            hideTags: function (text) {\n                return text.replace(/<xmp>/g,\"\").replace(/<\\/xmp>/g,\"\");\n            }\n        };\n    })();\n\n    var stext = (function() {\n        var stt = {};\n\n        // args\n        //   handler: main handler (default - dbidi/stt/handlers/common)\n        //   guiDir: GUI direction (default - \"ltr\")\n        //   dir: main stt direction (default - guiDir)\n        //   subDir: direction of subsegments\n        //   points: array of delimiters (default - [])\n        //   bounds: array of definitions of bounds in which handler works\n        //   subs: object defines special handling for some substring if found\n        //   cases: array of additional modules with their args for handling special cases (default - [])\n        function parseAndDisplayStructure(content, fArgs, isHtml, locale) {\n            if (!content || !fArgs) {\n                return content;\n            }\n            return displayStructure(parseStructure(content, fArgs, locale), fArgs, isHtml);\n        }\n\n        function checkArguments(fArgs, fullCheck) {\n            var args = Array.isArray(fArgs)? fArgs[0] : fArgs;\n            if (!args.guiDir) {\n                args.guiDir = \"ltr\";\n            }\n            if (!args.dir) {\n                args.dir = args.guiDir;\n            }\n            if (!fullCheck) {\n                return args;\n            }\n            if (typeof(args.points) === \"undefined\") {\n                args.points = [];\n            }\n            if (!args.cases) {\n                args.cases = [];\n            }\n            if (!args.bounds) {\n                args.bounds = [];\n            }\n            args.commonHandler = common;\n            return args;\n        }\n\n        function parseStructure(content, fArgs, locale) {\n            if (!content || !fArgs) {\n                return new TextSegment({content: \"\"});\n            }\n            var args = checkArguments(fArgs, true);\n            var segments = [new TextSegment(\n                {\n                    content: content,\n                    actual: content,\n                    localGui: args.dir\n                })];\n            var parse = common.handle;\n            if (args.handler && typeof(args.handler) === \"function\") {\n                parse = args.handler.handle;\n            }\n            parse(content, segments, args, locale);\n            return segments;\n        }\n\n        function displayStructure(segments, fArgs, isHtml) {\n            var args = checkArguments(fArgs, false);\n            if (isHtml) {\n                return getResultWithHtml(segments, args);\n            }\n            else {\n                return getResultWithUcc(segments, args);\n            }\n        }\n\n        function getResultWithUcc(segments, args, isHtml) {\n            var result = \"\";\n            var checkedDir = \"\";\n            var prevDir = \"\";\n            var stop = false;\n            for (var i = 0; i < segments.length; i++) {\n                if (segments[i].isVisible) {\n                    var dir = segments[i].textDirection;\n                    var lDir = segments[i].localGui;\n                    if (lDir !== \"\" && prevDir === \"\") {\n                        result += (lDir === \"rtl\" ? misc.RLE : misc.LRE);\n                    }\n                    else if(prevDir !== \"\" && (lDir === \"\" || lDir !== prevDir || stop)) {\n                        result += misc.PDF + (i == segments.length - 1 && lDir !== \"\"? \"\" : args.dir === \"rtl\" ? misc.RLM : misc.LRM);\n                        if (lDir !== \"\") {\n                            result += (lDir === \"rtl\" ? misc.RLE : misc.LRE);\n                        }\n                    }\n                    if (dir === \"auto\") {\n                        dir = misc.getDirection(segments[i].content, dir, args.guiDir);\n                    }\n                    if ((/^(rtl|ltr)$/i).test(dir)) {\n                        result += (dir === \"rtl\" ? misc.RLE : misc.LRE) + segments[i].content + misc.PDF;\n                        checkedDir = dir;\n                    }\n                    else {\n                        result += segments[i].content;\n                        checkedDir = misc.getDirection(segments[i].content, dir, args.guiDir, true);\n                    }\n                    if (i < segments.length - 1) {\n                        var locDir = lDir && segments[i+1].localGui? lDir : args.dir;\n                        result += locDir === \"rtl\" ? misc.RLM : misc.LRM;\n                    }\n                    else if(prevDir !== \"\") {\n                        result += misc.PDF;\n                    }\n                    prevDir = lDir;\n                    stop = false;\n                }\n                else {\n                    stop = true;\n                }\n            }\n            var sttDir = args.dir === \"auto\" ? misc.getDirection(segments[0].actual, args.dir, args.guiDir) : args.dir;\n            if (sttDir !== args.guiDir) {\n                result = (sttDir === \"rtl\" ? misc.RLE : misc.LRE) + result + misc.PDF;\n            }\n            return result;\n        }\n\n        function getResultWithHtml(segments, args, isHtml) {\n            var result = \"\";\n            var checkedDir = \"\";\n            var prevDir = \"\";\n            for (var i = 0; i < segments.length; i++) {\n                if (segments[i].isVisible) {\n                    var dir = segments[i].textDirection;\n                    var lDir = segments[i].localGui;\n                    if (lDir !== \"\" && prevDir === \"\") {\n                        result += \"<bdi dir='\" + (lDir === \"rtl\" ? \"rtl\" : \"ltr\") + \"'>\";\n                    }\n                    else if(prevDir !== \"\" && (lDir === \"\" || lDir !== prevDir || stop)) {\n                        result += \"</bdi>\" + (i == segments.length - 1 && lDir !== \"\"? \"\" : \"<span style='unicode-bidi: embed; direction: \" + (args.dir === \"rtl\" ? \"rtl\" : \"ltr\") + \";'></span>\");\n                        if (lDir !== \"\") {\n                            result += \"<bdi dir='\" + (lDir === \"rtl\" ? \"rtl\" : \"ltr\") + \"'>\";\n                        }\n                    }\n\n                    if (dir === \"auto\") {\n                        dir = misc.getDirection(segments[i].content, dir, args.guiDir);\n                    }\n                    if ((/^(rtl|ltr)$/i).test(dir)) {\n                        //result += \"<span style='unicode-bidi: embed; direction: \" + (dir === \"rtl\" ? \"rtl\" : \"ltr\") + \";'>\" + segments[i].content + \"</span>\";\n                        result += \"<bdi dir='\" + (dir === \"rtl\" ? \"rtl\" : \"ltr\") + \"'>\" + segments[i].content + \"</bdi>\";\n                        checkedDir = dir;\n                    }\n                    else {\n                        result += segments[i].content;\n                        checkedDir = misc.getDirection(segments[i].content, dir, args.guiDir, true);\n                    }\n                    if (i < segments.length - 1) {\n                        var locDir = lDir && segments[i+1].localGui? lDir : args.dir;\n                        result += \"<span style='unicode-bidi: embed; direction: \" + (locDir === \"rtl\" ? \"rtl\" : \"ltr\") + \";'></span>\";\n                    }\n                    else if(prevDir !== \"\") {\n                        result += \"</bdi>\";\n                    }\n                    prevDir = lDir;\n                    stop = false;\n                }\n                else {\n                    stop = true;\n                }\n            }\n            var sttDir = args.dir === \"auto\" ? misc.getDirection(segments[0].actual, args.dir, args.guiDir) : args.dir;\n            if (sttDir !== args.guiDir) {\n                result = \"<bdi dir='\" + (sttDir === \"rtl\" ? \"rtl\" : \"ltr\") + \"'>\" + result + \"</bdi>\";\n            }\n            return result;\n        }\n\n        //TBD ?\n        function restore(text, isHtml) {\n            return text;\n        }\n\n        stt.parseAndDisplayStructure = parseAndDisplayStructure;\n        stt.parseStructure = parseStructure;\n        stt.displayStructure = displayStructure;\n        stt.restore = restore;\n\n        return stt;\n    })();\n\n    var breadcrumb = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: args.dir ? args.dir : isRtl ? \"rtl\" : \"ltr\",\n                        subs: {\n                            content: \">\",\n                            continued: true,\n                            subDir: isRtl ? \"rtl\" : \"ltr\"\n                        },\n                        cases: [{\n                            args: {\n                                subs: {\n                                    content: \"<\",\n                                    continued: true,\n                                    subDir: isRtl ? \"ltr\" : \"rtl\"\n                                }\n                            }\n                        }]\n                };\n\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var comma = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: \"ltr\",\n                        points: \",\"\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var email = (function() {\n        function getDir(text, locale) {\n            if (misc.getLocaleDetails(locale).lang !== \"ar\") {\n                return \"ltr\";\n            }\n            var ind = text.indexOf(\"@\");\n            if (ind > 0 && ind < text.length - 1) {\n                return misc.hasArabicChar(text.substring(ind + 1)) ? \"rtl\" : \"ltr\";\n            }\n            return \"ltr\";\n        }\n\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: getDir(text, locale),\n                        points: \"<>.:,;@\",\n                        cases: [{\n                            handler: common,\n                            args: {\n                                bounds: [{\n                                    startAfter: \"\\\"\",\n                                    endBefore: \"\\\"\"\n                                },\n                                {\n                                    startAfter: \"(\",\n                                    endBefore: \")\"\n                                }\n                                ],\n                                points: \"\"\n                            }\n                        }]\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var filepath = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: \"ltr\",\n                        subDir : args.subDir,\n                        points: \"/\\\\:.&<>\"\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var formula = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: \"ltr\",\n                        points: \" /%^&[]<>=!?~:.,|()+-*{}\",\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n\n    var sql = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: \"ltr\",\n                        points: \"\\t!#%&()*+,-./:;<=>?|[]{}\",\n                        cases: [{\n                            handler: common,\n                            args: {\n                                bounds: [{\n                                    startAfter: \"/*\",\n                                    endBefore: \"*/\"\n                                },\n                                {\n                                    startAfter: \"--\",\n                                    end: \"\\n\"\n                                },\n                                {\n                                    startAfter: \"--\"\n                                }\n                                ]\n                            }\n                        },\n                        {\n                            handler: common,\n                            args: {\n                                subs: {\n                                    content: \" \",\n                                    continued: true\n                                }\n                            }\n                        },\n                        {\n                            handler: common,\n                            args: {\n                                bounds: [{\n                                    startAfter: \"'\",\n                                    endBefore: \"'\"\n                                },\n                                {\n                                    startAfter: \"\\\"\",\n                                    endBefore: \"\\\"\"\n                                }\n                                ]\n                            }\n                        }\n                        ]\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var underscore = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: \"ltr\",\n                        points: \"_\"\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var url = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: \"ltr\",\n                        points: \":?#/@.[]=&<>\"\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var word = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: args.dir ? args.dir : isRtl ? \"rtl\" : \"ltr\",\n                        points: \" ,.!?;:\",\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var xpath = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var fArgs =\n                {\n                        guiDir: isRtl ? \"rtl\" : \"ltr\",\n                        dir: \"ltr\",\n                        points: \" /[]<>=!:@.|()+-*\",\n                        cases: [{\n                            handler: common,\n                            args: {\n                                bounds: [{\n                                    startAfter: \"\\\"\",\n                                    endBefore: \"\\\"\"\n                                },\n                                {\n                                    startAfter: \"'\",\n                                    endBefore: \"'\"\n                                }\n                                ],\n                                points: \"\"\n                            }\n                        }\n                        ]\n                };\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, fArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, fArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var custom = (function() {\n        return {\n            format: function (text, args, isRtl, isHtml, locale, parseOnly) {\n                var hArgs = {};\n                var prop = \"\";\n                var sArgs = Array.isArray(args)? args[0] : args;\n                for (prop in sArgs) {\n                    if (sArgs.hasOwnProperty(prop)) {\n                        hArgs[prop] = sArgs[prop];\n                    }\n                }\n                hArgs.guiDir = isRtl ? \"rtl\" : \"ltr\";\n                hArgs.dir = hArgs.dir ? hArgs.dir : hArgs.guiDir;\n                if (!parseOnly) {\n                    return stext.parseAndDisplayStructure(text, hArgs, !!isHtml, locale);\n                }\n                else {\n                    return stext.parseStructure(text, hArgs, !!isHtml, locale);\n                }\n            }\n        };\n    })();\n\n    var message = (function() {\n        var params = {msgLang: \"en\", msgDir: \"\", phLang: \"\", phDir: \"\", phPacking: [\"{\",\"}\"], phStt: {type: \"none\", args: {}}, guiDir: \"\"};\n        var parametersChecked = false;\n\n        function getDirectionOfLanguage(lang) {\n            if (lang === \"he\" || lang === \"iw\" || lang === \"ar\") {\n                return \"rtl\";\n            }\n            return \"ltr\";\n        }\n\n        function checkParameters(obj) {\n            if (obj.msgDir.length === 0) {\n                obj.msgDir = getDirectionOfLanguage(obj.msgLang);\n            }\n            obj.msgDir = obj.msgDir !== \"ltr\" && obj.msgDir !== \"rtl\" && obj.msgDir != \"auto\"? \"ltr\" : obj.msgDir;\n            if (obj.guiDir.length === 0) {\n                obj.guiDir = obj.msgDir;\n            }\n            obj.guiDir = obj.guiDir !== \"rtl\"? \"ltr\" : \"rtl\";\n            if (obj.phDir.length === 0) {\n                obj.phDir = obj.phLang.length === 0? obj.msgDir : getDirectionOfLanguage(obj.phLang);\n            }\n            obj.phDir = obj.phDir !== \"ltr\" && obj.phDir !== \"rtl\" && obj.phDir != \"auto\"? \"ltr\" : obj.phDir;\n            if (typeof (obj.phPacking) === \"string\") {\n                obj.phPacking = obj.phPacking.split(\"\");\n            }\n            if (obj.phPacking.length < 2) {\n                obj.phPacking = [\"{\",\"}\"];\n            }\n        }\n\n        return {\n            setDefaults: function (args) {\n                for (var prop in args) {\n                    if (params.hasOwnProperty(prop)) {\n                        params[prop] = args[prop];\n                    }\n                }\n                checkParameters(params);\n                parametersChecked = true;\n            },\n\n            format: function (text) {\n                if (!parametersChecked) {\n                    checkParameters(params);\n                    parametersChecked = true;\n                }\n                var isHtml = false;\n                var hasHtmlArg = false;\n                var spLength = params.phPacking[0].length;\n                var epLength = params.phPacking[1].length;\n                if (arguments.length > 0) {\n                    var last = arguments[arguments.length-1];\n                    if (typeof (last) === \"boolean\") {\n                        isHtml = last;\n                        hasHtmlArg = true;\n                    }\n                }\n                //Message\n                var re = new RegExp(params.phPacking[0] + \"\\\\d+\" + params.phPacking[1]);\n                var m;\n                var tSegments = [];\n                var offset = 0;\n                var txt = text;\n                while ((m = re.exec(txt)) != null) {\n                    var lastIndex = txt.indexOf(m[0]) + m[0].length;\n                    if (lastIndex > m[0].length) {\n                        tSegments.push({text: txt.substring(0, lastIndex - m[0].length), ph: false});\n                    }\n                    tSegments.push({text: m[0], ph: true});\n                    offset += lastIndex;\n                    txt = txt.substring(lastIndex, txt.length);\n                }\n                if (offset < text.length) {\n                    tSegments.push({text: text.substring(offset, text.length), ph: false});\n                }\n                //Parameters\n                var tArgs = [];\n                for (var i = 1; i < arguments.length - (hasHtmlArg? 1 : 0); i++) {\n                    var arg = arguments[i];\n                    var checkArr = arg;\n                    var inLoop = false;\n                    var indArr = 0;\n                    if (Array.isArray(checkArr)) {\n                        arg = checkArr[0];\n                        if (typeof(arg) === \"undefined\") {\n                            continue;\n                        }\n                        inLoop = true;\n                    }\n                    do {\n                        if (typeof (arg) === \"string\") {\n                            tArgs.push({text: arg, dir: params.phDir, stt: params.stt});\n                        }\n                        else if(typeof (arg) === \"boolean\") {\n                            isHtml = arg;\n                        }\n                        else if(typeof (arg) === \"object\") {\n                            tArgs.push(arg);\n                            if (!arg.hasOwnProperty(\"text\")) {\n                                tArgs[tArgs.length-1].text = \"{???}\";\n                            }\n                            if (!arg.hasOwnProperty(\"dir\") || arg.dir.length === 0) {\n                                tArgs[tArgs.length-1].dir = params.phDir;\n                            }\n                            if (!arg.hasOwnProperty(\"stt\") || (typeof (arg.stt) === \"string\" && arg.stt.length === 0) ||\n                                (typeof (arg.stt) === \"object\" && Object.keys(arg.stt).length === 0)) {\n                                tArgs[tArgs.length-1].stt = params.phStt;\n                            }\n                        }\n                        else {\n                            tArgs.push({text: \"\" + arg, dir: params.phDir, stt: params.phStt});\n                        }\n                        if (inLoop) {\n                            indArr++;\n                            if (indArr == checkArr.length) {\n                                inLoop = false;\n                            }\n                            else {\n                                arg = checkArr[indArr];\n                            }\n                        }\n                    } while(inLoop);\n                }\n                //Indexing\n                var segments = [];\n                for (i = 0; i < tSegments.length; i++) {\n                    var t = tSegments[i];\n                    if (!t.ph) {\n                        segments.push(new TextSegment({content: t.text, textDirection: params.msgDir}));\n                    }\n                    else {\n                        var ind = parseInt(t.text.substring(spLength, t.text.length - epLength));\n                        if (isNaN(ind) || ind >= tArgs.length) {\n                            segments.push(new TextSegment({content: t.text, textDirection: params.msgDir}));\n                            continue;\n                        }\n                        var sttType = \"none\";\n                        if (!tArgs[ind].stt) {\n                            tArgs[ind].stt = params.phStt;\n                        }\n                        if (tArgs[ind].stt) {\n                            if (typeof (tArgs[ind].stt) === \"string\") {\n                                sttType = tArgs[ind].stt;\n                            }\n                            else if(tArgs[ind].stt.hasOwnProperty(\"type\")) {\n                                sttType = tArgs[ind].stt.type;\n                            }\n                        }\n                        if (sttType.toLowerCase() !== \"none\") {\n                            var sttSegs =  getHandler(sttType).format(tArgs[ind].text, tArgs[ind].stt.args || {},\n                                    params.msgDir === \"rtl\", false, params.msgLang, true);\n                            for (var j = 0; j < sttSegs.length; j++) {\n                                segments.push(sttSegs[j]);\n                            }\n                            segments.push(new TextSegment({isVisible: false}));\n                        }\n                        else {\n                            segments.push(new TextSegment({content: tArgs[ind].text, textDirection: (tArgs[ind].dir? tArgs[ind].dir : params.phDir)}));\n                        }\n                    }\n                }\n                var result =  stext.displayStructure(segments, {guiDir: params.guiDir, dir: params.msgDir}, isHtml);\n                return result;\n            }\n        };\n    })();\n\n    var event = null;\n\n    function getHandler(type) {\n        switch (type) {\n        case \"breadcrumb\" :\n            return breadcrumb;\n        case \"comma\" :\n            return comma;\n        case \"email\" :\n            return email;\n        case \"filepath\" :\n            return filepath;\n        case \"formula\" :\n            return formula;\n        case \"sql\" :\n            return sql;\n        case \"underscore\" :\n            return underscore;\n        case \"url\" :\n            return url;\n        case \"word\" :\n            return word;\n        case \"xpath\" :\n            return xpath;\n        default:\n            return custom;\n        }\n    }\n\n    function isInputEventSupported(element) {\n        var agent = window.navigator.userAgent;\n        if (agent.indexOf(\"MSIE\") >=0 || agent.indexOf(\"Trident\") >=0 || agent.indexOf(\"Edge\") >=0) {\n            return false;\n        }\n        var checked = document.createElement(element.tagName);\n        checked.contentEditable = true;\n        var isSupported = (\"oninput\" in checked);\n        if (!isSupported) {\n          checked.setAttribute('oninput', 'return;');\n          isSupported = typeof checked['oninput'] == 'function';\n        }\n        checked = null;\n        return isSupported;\n    }\n\n    function attachElement(element, type, args, isRtl, locale) {\n        //if (!element || element.nodeType != 1 || !element.isContentEditable)\n        if (!element || element.nodeType != 1) {\n            return false;\n        }\n        if (!event) {\n            event = document.createEvent('Event');\n            event.initEvent('TF', true, true);\n        }\n        element.setAttribute(\"data-tf-type\", type);\n        var sArgs = args === \"undefined\"? \"{}\" : JSON.stringify(Array.isArray(args)? args[0] : args);\n        element.setAttribute(\"data-tf-args\", sArgs);\n        var dir = \"ltr\";\n        if (isRtl === \"undefined\") {\n            if (element.dir) {\n                dir = element.dir;\n            }\n            else if(element.style && element.style.direction) {\n                dir = element.style.direction;\n            }\n            isRtl = dir.toLowerCase() === \"rtl\";\n        }\n        element.setAttribute(\"data-tf-dir\", isRtl);\n        element.setAttribute(\"data-tf-locale\", misc.getLocaleDetails(locale).lang);\n        if (isInputEventSupported(element)) {\n            var ehandler = element.oninput;\n            element.oninput = function(event) {\n                displayWithStructure(event.target);\n            };\n        }\n        else {\n            element.onkeyup = function(e) {\n                displayWithStructure(e.target);\n                element.dispatchEvent(event);\n            };\n            element.onmouseup = function(e) {\n                displayWithStructure(e.target);\n                element.dispatchEvent(event);\n            };\n        }\n        displayWithStructure(element);\n\n        return true;\n    }\n\n    function detachElement(element) {\n        if (!element || element.nodeType != 1) {\n            return;\n        }\n        element.removeAttribute(\"data-tf-type\");\n        element.removeAttribute(\"data-tf-args\");\n        element.removeAttribute(\"data-tf-dir\");\n        element.removeAttribute(\"data-tf-locale\");\n        element.innerHTML = element.textContent || \"\";\n    }\n\n    // This function is called for each user's input into the attached editable html element\n    // (see function attachElement()). It controls correct display of the structured text\n    // in the element, contents of which is changed dynamically.\n    // Arguments, needed to display the structure, added previously as a custom attributes of \n    // the element. The main attribute is the type of the structure (\"data-tf-type\"), which can \n    // declare one of predefined types of text structure or CUSTOM type. Some types of text structure \n    // additionally require flow direction (e.g. direction, in which seprate segments of the text\n    // are displayed) and locale(e.g. language of the text). CUSTOM structure can require some \n    // additional parameters.\n    function displayWithStructure(element) {\n        var txt = element.textContent || \"\";\n        var selection = document.getSelection();\n        if (txt.length === 0 || !selection || selection.rangeCount <= 0) {\n            element.dispatchEvent(event);\n            return;\n        }\n        \n        var range = selection.getRangeAt(0);\n        var tempRange = range.cloneRange(), startNode, startOffset;\n        startNode = range.startContainer;\n        startOffset = range.startOffset;\n        var textOffset = 0;\n        if (startNode.nodeType === 3) {\n            textOffset += startOffset;\n        }\n        tempRange.setStart(element,0);\n        tempRange.setEndBefore(startNode);\n        var div = document.createElement('div');\n        div.appendChild(tempRange.cloneContents());\n        textOffset += div.textContent.length;\n\n        element.innerHTML = getHandler(element.getAttribute(\"data-tf-type\")).\n            format(txt, JSON.parse(element.getAttribute(\"data-tf-args\")), (element.getAttribute(\"data-tf-dir\") === \"true\"? true : false),\n            true, element.getAttribute(\"data-tf-locale\"));\n        var parent = element;\n        var node = element;\n        var newOffset = 0;\n        var inEnd = false;\n        selection.removeAllRanges();\n        range.setStart(element,0);\n        range.setEnd(element,0);\n        while (node) {\n            if (node.nodeType === 3) {\n                if (newOffset + node.nodeValue.length >= textOffset) {\n                    range.setStart(node, textOffset - newOffset);\n                    break;\n                }\n                else {\n                    newOffset += node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n            }\n            else if(node.hasChildNodes()) {\n                parent = node;\n                node = parent.firstChild;\n                continue;\n            }\n            else {\n                node = node.nextSibling;\n            }\n            while (!node) {\n                if (parent === element) {\n                    inEnd = true;\n                    break;\n                }\n                node = parent.nextSibling;\n                parent = parent.parentNode;\n            }\n            if (inEnd) {\n                break;\n            }\n        }\n\n        selection.addRange(range);\n        element.dispatchEvent(event);\n    }\n\n    return {\n        /**\n        * Returns the HTML representation of a given structured text\n        * @param text - the structured text\n        * @param type - could be one of filepath, url, email\n        * @param args - pass additional arguments to the handler. generally null.\n        * @param isRtl - indicates if the GUI is mirrored\n        * @param locale - the browser locale\n        */\n        getHtml: function (text, type, args, isRtl, locale) {\n            return getHandler(type).format(text, args, isRtl, true, locale);\n        },\n        /**\n        * Handle Structured text correct display for a given HTML element.\n        * @param element - the element  : should be of type div contenteditable=true\n        * @param type - could be one of filepath, url, email\n        * @param args - pass additional arguments to the handler. generally null.\n        * @param isRtl - indicates if the GUI is mirrored\n        * @param locale - the browser locale\n        */\n        attach: function (element, type, args, isRtl, locale) {\n            return attachElement(element, type, args, isRtl, locale);\n        },\n        /**\n         * Adds UCCs (Unicode Control Chars) to a given structured text for a correct display\n         * @param text - the structured text\n         * @param type - could be one of filepath, url, email\n         * @param args - pass additional arguments to the handler. generally null.\n         * @param isRtl - indicates if the GUI is mirrored\n         * @param locale - the browser locale\n         */\n        getString:  function (text, type, args, isRtl, locale) {\n\t\t\treturn getHandler(type).format(text, args, isRtl, false, locale);\n\t\t}      \n    };\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n *******************************************************************************/\ndefine ('orion/bidiUtils',[\n\t\"orion/util\",\n\t\"orion/bidiFormat\"\n],\nfunction(util, bidiFormat) { /* BDL */\n\t\n\tvar bidiEnabledStorage = \"/orion/preferences/bidi/bidiEnabled\"; //$NON-NLS-0$\n\tvar bidiLayoutStorage = \"/orion/preferences/bidi/bidiLayout\"; //$NON-NLS-0$\t\n\tvar LRE = \"\\u202A\";\t//$NON-NLS-0$\n\tvar PDF = \"\\u202C\"; //$NON-NLS-0$\n\tvar RLE = \"\\u202B\"; //$NON-NLS-0$\n\t\t\n\tfunction setBrowserLangDirection() {\n\t\t\n\t\tvar lang;\n\t\tif (window.dojoConfig) {\n\t\t\tlang = window.dojoConfig.locale;\n\t\t}\n\t\tif (!lang) {\n\t\t\tlang = navigator.languages ? navigator.languages[0] : navigator.language || navigator.userLanguage;\n\t\t}\n\t\tvar isBidi = lang && \"ar iw he\".indexOf(lang.substring(0, 2)) !== - 1;\n\n\t\tif (isBidi && isBidiEnabled()) {\n\t\t\tvar htmlElement = document.getElementsByTagName(\"html\")[0];\n\t\t\tif (htmlElement){ //should be always true\n\t\t\t\thtmlElement.setAttribute (\"dir\", \"rtl\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\tsetBrowserLangDirection();\n\t\n\tvar bidiLayout = getBidiLayout();\n\n\t/**\n\t * checks if directionality should be applied in Orion.\n\t * @returns {Boolean} true if globalization settings exist and bidi is enabled.\n\t */\t\t\n\tfunction isBidiEnabled() {\n\t\tvar bidiEnabled = localStorage.getItem(bidiEnabledStorage);\n\t\tif (bidiEnabled && bidiEnabled === \"true\") {\t\t//$NON-NLS-0$\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n\t/**\n\t * returns bidiLayout value set in globalization settings.\n\t * @returns {String} text direction.\n\t */\t\n\tfunction getBidiLayout() {\n\t\tvar _bidiLayout = localStorage.getItem(bidiLayoutStorage);\n\t\tif (_bidiLayout && (_bidiLayout === \"rtl\" || _bidiLayout === \"ltr\" || _bidiLayout === \"auto\")) {\t//$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn _bidiLayout;\n\t\t}\n\t\treturn \"ltr\";\t//$NON-NLS-0$\n\t}\n\t\n\t/**\n\t * returns text direction.\n\t * this method is used for handling direction by adding a dir attribute in an HTML element.\n\t * if bidiLayout is set to ltr > return ltr\n\t * if bidiLayout is set to rtl > return rtl\n\t * if bidiLayout is set to auto > check for first strong character in text and return ltr or rtl accordingly.\n\t * @param {String} the text on which to set directionality\n\t * @returns {String} text direction. rtl or ltr.\n\t */\t\n\tfunction getTextDirection(text) {\n\t\tbidiLayout = getBidiLayout();\n\t\tif (!isBidiEnabled()) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (bidiLayout === \"auto\" && util.isIE) {\t//$NON-NLS-0$\n\t\t\treturn checkContextual(text);\n\t\t}\n\t\treturn bidiLayout;\n\t}\n\t\n\t/**\n\t * Wraps text by UCC (Unicode control characters) according to text direction\n\t * In some cases defining the dir attribute in a different direction than the GUI orientation, \n\t * changes the alignment of the text and/or adjacent elements such as icons.\n\t * This doesn't follow the bidi standards (static text should be aligned following GUI direction).\n\t * Therefore the only solution is to use UCC (Unicode control characters) to display the text in a correct orientation.\n\t * (the text is changed for display purposes only. The original text in the repository remains unchanged)\n\t * @param {String} the text to be wrapped\n\t * @returns {String} text after adding ucc characters.\n\t */\t\t\n\tfunction enforceTextDirWithUcc ( text ) {\n\t\tif (isBidiEnabled() && text.trim()) {\n\t\t\tbidiLayout = getBidiLayout();\n\t\t\tvar dir = bidiLayout === \"auto\" ? checkContextual( text ) : bidiLayout;\t//$NON-NLS-0$\n\t\t\treturn ( dir === \"ltr\" ? LRE : RLE ) + text + PDF;\t//$NON-NLS-0$\n\t\t}\n\t\treturn text;\t\n\t}\n\t\n\t/**\n\t * Finds the first strong (directional) character.\n\t * If it is Latin, return ltr. If it is bidi, return rtl. Otherwise, return ltr as default. \n\t * @param {String} the text to be examined\n\t * @returns {String} text direction. rtl or ltr.\n\t */\t\t\t\n\tfunction checkContextual ( text ) {\n\t\t// look for strong (directional) characters\n\t\tvar fdc = /[A-Za-z\\u05d0-\\u065f\\u066a-\\u06ef\\u06fa-\\u07ff\\ufb1d-\\ufdff\\ufe70-\\ufefc]/.exec( text );\n\t\t// if found, return the direction that defined by the character, else return ltr as defult.\n\t\treturn fdc ? fdc[0] <= \"z\" ? \"ltr\" : \"rtl\"  : \"ltr\";\t//$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\n\t}\n\t\n\tfunction addBidiEventListeners ( input ) {\n\t\tif (!input._hasBidiEventListeners) {\n\t\t\tinput._hasBidiEventListeners = true;\n\n\t\t\tvar eventTypes = [\"keyup\", \"cut\", \"paste\"];\n\t\t\tfor (var i = 0; i < eventTypes.length; ++i) {\n\t\t\t\tinput.addEventListener(eventTypes[i], handleInputEvent.bind(this),\n\t\t\t\t\tfalse);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction handleInputEvent ( event ) {\n\t\tvar input = event.target;\n\t\tif (input) {\n\t\t\tinput.dir = getTextDirection(input.value || input.textContent); // resolve dir attribute of the element\n\t\t}\n\t}\n\t\n\tfunction initInputField ( input ) {\n\t\tif (isBidiEnabled() && input) {\n\t\t\tinput.dir = getTextDirection(input.value || input.textContent); // resolve dir attribute of the element\n\n\t\t\tif (util.isIE) {\n\t\t\t\taddBidiEventListeners(input);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction enforceTextDir(range) {\n\t\tvar comments = [{name:\"comment block\"}, \n\t\t                {name:\"comment line double-slash\"},\n\t\t                {name:\"comment block documentation\"},\n\t\t                {name:\"comment line double-slash jade\"},\n\t\t                {name:\"comment line\"},\n\t\t                {name:\"comment line number-sign php\"},\n\t\t                {name:\"comment block xml\"}\n\t\t];\n\t\tvar text = range.text;\n\t\tvar style = range.style;\n\t\tif (isBidiEnabled() && style && style.styleClass && style.styleClass.startsWith(\"comment\") && text.length > 0) {\n\t\t\tfor (var i = 0; i < comments.length; i++) {\n\t\t\t\tif (style.styleClass === comments[i].name) {\n\t\t\t\t\tvar newStyle = style;\n\t\t\t\t\tif (typeof newStyle.attributes === \"undefined\") {\n\t\t\t\t\t\tnewStyle.attributes = {};\n\t\t\t\t\t}\n\t\t\t\t\tnewStyle.attributes.dir = getTextDirection(text);\n\t\t\t\t\trange.style = newStyle;\t\t\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn range;\n\t}\n\t\n\tfunction enforceSTT(text, type) {\n\t\tif (isBidiEnabled() && text && type) {\n\t\t\treturn bidiFormat.getString(text, type, {subDir : getBidiLayout()} , false, 'en');\n\t\t}\n\t    return text;\n\t}\n\n\t\t\n\treturn {\n\t\tisBidiEnabled: isBidiEnabled,\n\t\tgetTextDirection: getTextDirection,\t\t\n\t\tenforceTextDirWithUcc: enforceTextDirWithUcc,\n\t\tinitInputField: initInputField,\n\t\tenforceTextDir: enforceTextDir,\n\t\tenforceSTT: enforceSTT\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2014, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/metrics',[\n], function() {\n\n\tvar _services = [];\n\tvar timingVars = Object.create(null);\n\n\t/**\n\t * @name Metrics\n\t * @description Creates a new instance of the metrics service\n\t * @param {Object} serviceRegistry The backing service registry to register the new service with\n\t * @param {Object} args An object of additional arguments\n\t * @param {Array} serviceArray An array of logging services (optional; for use when no service registry is present) \n\t * @returns {Metrics} A new Metrics instance\n\t * @since 12.0\n\t */\n\tfunction Metrics(serviceRegistry, args, serviceArray) {\n\t\tvar services = serviceArray || [];\n\t\tif (serviceRegistry) {\n\t\t\tvar refs = serviceRegistry.getServiceReferences(\"orion.metrics\"); //$NON-NLS-0$\n\t\t\trefs.forEach(function(current) {\n\t\t\t\tservices.push(serviceRegistry.getService(current));\n\t\t\t});\n\t\t}\n\t\t\n\t\t/* the following definitions are from https://developers.google.com/analytics/devguides/collection/analyticsjs/pages */\n\t\tvar href = window.location.protocol + '//' + window.location.hostname + window.location.pathname + window.location.search; //$NON-NLS-0$\n\t\tvar page = window.location.pathname + window.location.search;\n\t\tvar title = document.title;\n\n\t\t_services = services;\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.pageLoad(href, page, title, args);\n\t\t});\n\n\t\tif (serviceRegistry) {\n\t\t\tserviceRegistry.registerService(\"orion.core.metrics.client\", this); //$NON-NLS-1$\n\t\t}\n\t}\n\t\n\t/** @callback */\n\tfunction _logTiming(timingCategory, timingVar, timingValue, timingLabel) {\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.logTiming(timingCategory, timingVar, timingValue, timingLabel);\n\t\t});\n\t}\n\t/** @callback */\n\tfunction _logEvent(category, action, label, value, details) {\n\t\t_services.forEach(function(current) {\n\t\t\tcurrent.logEvent(category, action, label || \"\", value, details);\n\t\t});\n\t}\n\t/** @callback */\n\tfunction _logPageLoadTiming(timingVar, timingLabel) {\n\t\t/* \n\t\t * The level of window.performance implementation varies across the browsers,\n\t\t * so check for the existence of all utilized functions up-front.\n\t\t */\n\t\tif (window.performance) {\n\t\t\t /* ensure that no more timings of this type are logged for this page */\n\t\t\tif (window.performance.getEntriesByName && window.performance.mark) {\n\t\t\t\tif (window.performance.getEntriesByName(timingVar).length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twindow.performance.mark(timingVar);\n\t\t\t} else {\n\t\t\t\tif (timingVars[timingVar]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttimingVars[timingVar] = Date.now();\t\t\t\t\n\t\t\t}\n\t\t\t_logTiming(\"page\", timingVar, window.performance.now(), timingLabel); //$NON-NLS-0$\n\t\t}\n\t}\n\t\n\tMetrics.prototype = {\n\t\t/**\n\t\t * @description Log a timing\n\t\t * @function\n\t\t * @param {String} timingCategory The name of the category to log to\n\t\t * @param {String} timingVar The name of the variable to log to\n\t\t * @param {Number} timingValue The timing to log\n\t\t * @param {String} timingLabel A label for the new timing\n\t\t */\n\t\tlogTiming: function(timingCategory, timingVar, timingValue, timingLabel) {\n\t\t\t_logTiming(timingCategory, timingVar, timingValue, timingLabel);\n\t\t},\n\t\t/**\n\t\t * @description Log an event\n\t\t * @function\n\t\t * @param {String} category The name of the category to log to\n\t\t * @param {String} action The name of the action logged\n\t\t * @param {String} label A label for the event\n\t\t * @param {String} value The event value to log\n\t\t * @param {String} details Additional details about the event being logged\n\t\t */\n\t\tlogEvent: function(category, action, label, value, details) {\n\t\t\t_logEvent(category, action, label, value, details);\n\t\t},\n\t\t/**\n\t\t * @description Log how long it took to load a page\n\t\t * @function\n\t\t * @param {Number} timingVar The timing to log\n\t\t * @param {String} timingLabel A label for the new timing\n\t\t */\n\t\tlogPageLoadTiming: function(timingVar, timingLabel) {\n\t\t\t_logPageLoadTiming(timingVar, timingLabel);\n\t\t}\n\t};\n\t\n\treturn {\n\t\tMetrics: Metrics,\n\t\tlogTiming: _logTiming,\n\t\tlogEvent: _logEvent,\n\t\tlogPageLoadTiming: _logPageLoadTiming\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2017 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n *\t\tMihai Sucan (Mozilla Foundation) - fix for Bug#334583 Bug#348471 Bug#349485 Bug#350595 Bug#360726 Bug#361180 Bug#362835 Bug#362428 Bug#362286 Bug#354270 Bug#361474 Bug#363945 Bug#366312 Bug#370584\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textView\", [\n\t'i18n!orion/editor/nls/messages',\n\t'orion/editor/textModel',\n\t'orion/editor/keyModes',\n\t'orion/editor/eventTarget',\n\t'orion/editor/textTheme',\n\t'orion/editor/util',\n\t'orion/util',\n\t'orion/bidiUtils',\n\t'orion/metrics'\n], function(messages, mTextModel, mKeyModes, mEventTarget, mTextTheme, textUtil, util, bidiUtils, mMetrics) {\n\n\t/** @private */\n\tfunction getWindow(doc) {\n\t\treturn doc.defaultView || doc.parentWindow;\n\t}\n\tfunction newArray(len) {\n\t\treturn new Array(len);\n\t}\n\tvar addHandler = textUtil.addEventListener;\n\tvar removeHandler = textUtil.removeEventListener;\n\t/** @private */\n\tfunction applyStyle(style, node, reset) {\n\t\tif (reset) {\n\t\t\tnode.className = \"\";\n\t\t\tvar attrs = node.attributes;\n\t\t\tfor (var i= attrs.length; i-->0;) {\n\t\t\t\tif (!util.isIE || util.isIE >= 9 || (util.isIE < 9 && attrs[i].specified)) {\n\t\t\t\t\tnode.removeAttribute(attrs[i].name); \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!style) {\n\t\t\treturn;\n\t\t}\n\t\tif (style.styleClass) {\n\t\t\tnode.className = style.styleClass;\n\t\t}\n\t\tvar properties = style.style;\n\t\tif (properties) {\n\t\t\tfor (var s in properties) {\n\t\t\t\tif (properties.hasOwnProperty(s)) {\n\t\t\t\t\tnode.style[s] = properties[s];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar attributes = style.attributes;\n\t\tif (attributes) {\n\t\t\tfor (var a in attributes) {\n\t\t\t\tif (attributes.hasOwnProperty(a)) {\n\t\t\t\t\tnode.setAttribute(a, attributes[a]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/** @private */\n\tfunction clone(obj) {\n\t\t/*Note that this code only works because of the limited types used in TextViewOptions */\n\t\tif (obj instanceof Array) {\n\t\t\treturn obj.slice(0);\n\t\t}\n\t\treturn obj;\n\t}\n\t/**\t@private */\n\tfunction merge(obj1, obj2) {\n\t\tif (!obj1) {\n\t\t\treturn obj2;\n\t\t}\n\t\tif (!obj2) {\n\t\t\treturn obj1;\n\t\t}\n\t\tfor (var p in obj2) {\n\t\t\tif (obj2.hasOwnProperty(p)) {\n\t\t\t\tif (!obj1.hasOwnProperty(p)) {\n\t\t\t\t\tobj1[p] = obj2[p];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn obj1;\n\t}\n\t/** @private */\n\tvar compare = textUtil.compare;\n\t/** @private */\n\tfunction convertDelimiter(text, addTextFunc, addDelimiterFunc) {\n\t\tvar cr = 0, lf = 0, index = 0, len = text.length;\n\t\twhile (index < len) {\n\t\t\tif (cr !== -1 && cr <= index) { cr = text.indexOf(\"\\r\", index); } //$NON-NLS-1$\n\t\t\tif (lf !== -1 && lf <= index) { lf = text.indexOf(\"\\n\", index); } //$NON-NLS-1$\n\t\t\tvar start = index, end;\n\t\t\tif (lf === -1 && cr === -1) {\n\t\t\t\taddTextFunc(text.substring(index));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (cr !== -1 && lf !== -1) {\n\t\t\t\tif (cr + 1 === lf) {\n\t\t\t\t\tend = cr;\n\t\t\t\t\tindex = lf + 1;\n\t\t\t\t} else {\n\t\t\t\t\tend = cr < lf ? cr : lf;\n\t\t\t\t\tindex = (cr < lf ? cr : lf) + 1;\n\t\t\t\t}\n\t\t\t} else if (cr !== -1) {\n\t\t\t\tend = cr;\n\t\t\t\tindex = cr + 1;\n\t\t\t} else {\n\t\t\t\tend = lf;\n\t\t\t\tindex = lf + 1;\n\t\t\t}\n\t\t\taddTextFunc(text.substring(start, end));\n\t\t\tif (addDelimiterFunc) {\n\t\t\t\taddDelimiterFunc();\n\t\t\t} else {\n\t\t\t\tif (index === len) addTextFunc(\"\");\n\t\t\t}\n\t\t}\n\t}\n\t/** @private */\n\tfunction getBorder(node) {\n\t\tvar left,_top,right,bottom;\n\t\tvar win = getWindow(node.ownerDocument);\n\t\tif (win.getComputedStyle) {\n\t\t\tvar style = win.getComputedStyle(node, null);\n\t\t\tleft = style.getPropertyValue(\"border-left-width\"); //$NON-NLS-1$\n\t\t\t_top = style.getPropertyValue(\"border-top-width\"); //$NON-NLS-1$\n\t\t\tright = style.getPropertyValue(\"border-right-width\"); //$NON-NLS-1$\n\t\t\tbottom = style.getPropertyValue(\"border-bottom-width\"); //$NON-NLS-1$\n\t\t} else if (node.currentStyle) {\n\t\t\tleft = node.currentStyle.borderLeftWidth;\n\t\t\t_top = node.currentStyle.borderTopWidth;\n\t\t\tright = node.currentStyle.borderRightWidth;\n\t\t\tbottom = node.currentStyle.borderBottomWidth;\n\t\t}\n\t\treturn {\n\t\t\tleft: parseInt(left, 10) || 0,\n\t\t\ttop: parseInt(_top, 10) || 0,\n\t\t\tright: parseInt(right, 10) || 0,\n\t\t\tbottom: parseInt(bottom, 10) || 0\n\t\t};\n\t}\n\t/** @private */\n\tfunction getPadding(node) {\n\t\tvar left,_top,right,bottom;\n\t\tvar win = getWindow(node.ownerDocument);\n\t\tif (win.getComputedStyle) {\n\t\t\tvar style = win.getComputedStyle(node, null);\n\t\t\tleft = style.getPropertyValue(\"padding-left\"); //$NON-NLS-1$\n\t\t\t_top = style.getPropertyValue(\"padding-top\"); //$NON-NLS-1$\n\t\t\tright = style.getPropertyValue(\"padding-right\"); //$NON-NLS-1$\n\t\t\tbottom = style.getPropertyValue(\"padding-bottom\"); //$NON-NLS-1$\n\t\t} else if (node.currentStyle) {\n\t\t\tleft = node.currentStyle.paddingLeft;\n\t\t\t_top = node.currentStyle.paddingTop;\n\t\t\tright = node.currentStyle.paddingRight;\n\t\t\tbottom = node.currentStyle.paddingBottom;\n\t\t}\n\t\treturn {\n\t\t\tleft: parseInt(left, 10) || 0, \n\t\t\ttop: parseInt(_top, 10) || 0,\n\t\t\tright: parseInt(right, 10) || 0,\n\t\t\tbottom: parseInt(bottom, 10) || 0\n\t\t};\n\t}\n\t/** @private */\n\tfunction getLineTrim(line) {\n\t\tvar trim = line._trim;\n\t\tif (!trim) {\n\t\t\ttrim = getPadding(line);\n\t\t\tvar border = getBorder(line);\n\t\t\ttrim.left += border.left;\n\t\t\ttrim.top += border.top;\n\t\t\ttrim.right += border.right;\n\t\t\ttrim.bottom += border.bottom;\n\t\t\tline._trim = trim;\n\t\t}\n\t\treturn trim;\n\t}\n\t/** @private */\n\tfunction DOMReady(doc, _parent, className, callback) {\n\t\tclassName = \"_\" + className + \"DOMReady\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t_parent.className = _parent.className ? _parent.className + \" \" + className : className; //$NON-NLS-1$\n\t\t_parent.__DOMReady = callback;\n\t\tvar id = className + \"Style\"; //$NON-NLS-1$\n\t\tif (doc.getElementById(id)) { return; }\n\t\tvar animationName = className + \"Animation\"; //$NON-NLS-1$\n\t\tfunction insertListener(evt) {\n\t\t\tif (evt.animationName === animationName) {\n\t\t\t\tvar target = evt.target;\n\t\t\t\tif (typeof target.__DOMReady === \"function\") { //$NON-NLS-1$\n\t\t\t\t\tgetWindow(doc).setTimeout(function() {\n\t\t\t\t\t\ttarget.__DOMReady();\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfunction template(className, animationName) {\n\t\t\tvar props = [\"\", \"-webkit-\", \"-moz-\", \"-ms-\", \"-o-\"]; //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-4$\n\t\t\tvar _frames = \"\", classRule = \"body .\" + className + \" {\\n\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tfor (var i=0; i<props.length; i++) {\n\t\t\t\t_frames +=\n\t\t\t\t\"@\" + props[i] + \"keyframes \" + animationName + \" {\\n\" + //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"from { opacity: 0.99; }\\n\" + //$NON-NLS-1$\n\t\t\t\t\"to { opacity: 1; }\\n\" + //$NON-NLS-1$\n\t\t\t\t\"}\\n\"; //$NON-NLS-1$\n\t\t\t\tclassRule +=\n\t\t\t\tprops[i] + \"animation-duration: 0.001s;\\n\" + //$NON-NLS-1$\n\t\t\t\tprops[i] + \"animation-name: \" + animationName + \";\\n\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tclassRule += \"}\"; //$NON-NLS-1$\n\t\t\treturn _frames + classRule;\n\t\t}\n\t\taddHandler(doc, \"animationstart\", insertListener, false); //$NON-NLS-1$\n\t\taddHandler(doc, \"MSAnimationStart\", insertListener, false);  //$NON-NLS-1$\n\t\taddHandler(doc, \"webkitAnimationStart\", insertListener, false); //$NON-NLS-1$\n\t\tvar style = doc.createElement(\"style\"); //$NON-NLS-1$\n\t\tstyle.id = id;\n\t\tvar head = doc.getElementsByTagName(\"head\")[0] || doc.documentElement; //$NON-NLS-1$\n\t\tstyle.appendChild(doc.createTextNode(template(className, animationName)));\n\t\thead.insertBefore(style, head.firstChild);\n\t}\n\t\n\tvar Animation = textUtil.Animation;\n\t\n\t/** \n\t * Constructs a new Selection object.\n\t * \n\t * @class A Selection represents a range of selected text in the view.\n\t * @name orion.editor.Selection\n\t */\n\tfunction Selection (start, end, caret) {\n\t\t/**\n\t\t * The selection start offset.\n\t\t *\n\t\t * @name orion.editor.Selection#start\n\t\t */\n\t\tthis.start = start;\n\t\t/**\n\t\t * The selection end offset.\n\t\t *\n\t\t * @name orion.editor.Selection#end\n\t\t */\n\t\tthis.end = end;\n\t\t/** @private */\n\t\tthis.caret = caret; //true if the start, false if the caret is at end\n\t\t/** @private */\n\t\tthis._columnX = -1;\n\t}\n\t/** @private */\n\tSelection.compare = function(s1, s2) {\n\t\tif (s1.length !== s2.length) return false;\n\t\tfor (var i = 0; i < s1.length; i++) {\n\t\t\tif (!s1[i].equals(s2[i])) return false;\n\t\t}\n\t\treturn true;\n\t};\n\tSelection.editing = function(selections, back) {\n\t\tvar i;\n\t\tif (back) {\n\t\t\tfor (i = selections.length - 1; i >= 0; i--) {\n\t\t\t\tif (selections[i]._editing) return selections[i];\n\t\t\t}\n\t\t\treturn selections[selections.length - 1];\n\t\t}\n\t\tfor (i = 0; i < selections.length; i++) {\n\t\t\tif (selections[i]._editing) return selections[i];\n\t\t}\n\t\treturn selections[0];\n\t};\n\t/** @private */\n\tSelection.convert = function(selections) {\n\t\tif (selections.length === 1) return selections[0];\n\t\treturn selections;\n\t};\n\t/** @private */\n\tSelection.contains = function(selections, offset) {\n\t\treturn selections.some(function(selection) {\n\t\t\treturn selection.contains(offset);\n\t\t});\n\t};\n\t/** @private */\n\tSelection.merge = function(selections) {\n\t\tif (selections.length <= 1) return selections;\n\t\tselections.sort(function(a, b) {\n\t\t\treturn a.start - b.start;\n\t\t});\n\t\tvar result = [];\n\t\tvar current = selections[0];\n\t\tfor (var i = 1; i < selections.length; i++) {\n\t\t\tif (selections[i].start >= current.end || current._editing || selections[i]._editing) {\n\t\t\t\tresult.push(current);\n\t\t\t\tcurrent = selections[i];\n\t\t\t} else {\n\t\t\t\tcurrent.end = Math.max(current.end, selections[i].end);\n\t\t\t}\n\t\t}\n\t\tresult.push(current);\n\t\treturn result;\n\t};\n\tSelection.prototype = /** @lends orion.editor.Selection.prototype */ {\n\t\t/** @private */\n\t\tclone: function() {\n\t\t\tvar result = new Selection(this.start, this.end, this.caret);\n\t\t\tresult._columnX = this._columnX;\n\t\t\tresult._editing = this._editing;\n\t\t\tresult._docX = this._docX;\n\t\t\treturn result;\n\t\t},\n\t\t/** @private */\n\t\tcontains: function(offset) {\n\t\t\tif (this.start <= offset && offset < this.end) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/** @private */\n\t\tcollapse: function() {\n\t\t\tif (this.caret) {\n\t\t\t\tthis.end = this.start;\n\t\t\t} else {\n\t\t\t\tthis.start = this.end;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\textend: function (offset) {\n\t\t\tif (this.caret) {\n\t\t\t\tthis.start = offset;\n\t\t\t} else {\n\t\t\t\tthis.end = offset;\n\t\t\t}\n\t\t\tif (this.start > this.end) {\n\t\t\t\tvar tmp = this.start;\n\t\t\t\tthis.start = this.end;\n\t\t\t\tthis.end = tmp;\n\t\t\t\tthis.caret = !this.caret;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\tsetCaret: function(offset) {\n\t\t\tthis.start = offset;\n\t\t\tthis.end = offset;\n\t\t\tthis.caret = false;\n\t\t},\n\t\t/** @private */\n\t\tgetCaret: function() {\n\t\t\treturn this.caret ? this.start : this.end;\n\t\t},\n\t\t/** @private */\n\t\tgetAnchor: function() {\n\t\t\treturn this.caret ? this.end : this.start;\n\t\t},\n\t\t/** @private */\n\t\tgetOrientedSelection: function() {\n\t\t\treturn {start: this.getAnchor(), end: this.getCaret()};\n\t\t},\n\t\t/** @private */\n\t\ttoString: function() {\n\t\t\treturn \"start=\" + this.start + \" end=\" + this.end + (this.caret ? \" caret is at start\" : \" caret is at end\"); //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-4$\n\t\t},\n\t\t/** @private */\n\t\tisEmpty: function() {\n\t\t\treturn this.start === this.end;\n\t\t},\n\t\t/** @private */\n\t\tequals: function(object) {\n\t\t\treturn this.caret === object.caret && this.start === object.start && this.end === object.end && this._editing === object._editing;\n\t\t}\n\t};\n\t/** @private */\n\tfunction DOMSelection (view) {\n\t\tthis._view = view;\n\t\tthis._divs = [];\n\t\tvar _parent = view._clipDiv || view._rootDiv;\n\t\tfor (var i=0; i<3; i++) {\n\t\t\tvar div = view._createSelectionDiv();\n\t\t\t_parent.appendChild(div);\n\t\t\tthis._divs.push(div);\n\t\t}\n\t}\n\tDOMSelection.prototype = /** @lends orion.editor.DOMSelection.prototype */ {\n\t\t/** @private */\n\t\tdestroy: function() {\n\t\t\tif (!this._divs) return;\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t});\n\t\t\tthis._divs = null;\n\t\t},\n\t\t/** @private */\n\t\tsetPrimary: function(enabled) {\n\t\t\tthis.primary = enabled;\n\t\t},\n\t\t/** @private */\n\t\tupdate: function() {\n\t\t\tvar view = this._view;\n\t\t\tvar primary = this.primary;\n\t\t\tvar focused = view._hasFocus;\n\t\t\tvar visible = view._cursorVisible;\n\t\t\tvar cursor = !this.primary && this._selection && this._selection.isEmpty();\n\t\t\tvar className;\n\t\t\tif (cursor) {\n\t\t\t\tclassName = \"textviewSelectionCaret\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tclassName = focused ? \"textviewSelection\" : \"textviewSelectionUnfocused\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tthis._divs[0].style.visibility = (cursor && visible && focused) || !cursor ? \"visible\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._divs[0].style.zIndex = visible && cursor ? \"2\" : \"0\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.className = className;\n\t\t\t\tif (util.isWebkit < 537.36 && primary) {\n\t\t\t\t\tdiv.style.background = focused ? \"transparent\" : \"\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/** @private */\n\t\tsetSelection: function (selection) {\n\t\t\tthis._selection = selection;\n\t\t\tthis.update();\n\t\t\tvar view = this._view;\n\t\t\tvar model = view._model;\n\t\t\tvar startLine = model.getLineAtOffset(selection.start);\n\t\t\tvar endLine = model.getLineAtOffset(selection.end);\n\t\t\tvar firstNode = view._getLineNext();\n\t\t\t/*\n\t\t\t* Bug in Firefox. For some reason, after a update page sometimes the \n\t\t\t* firstChild returns null incorrectly. The fix is to ignore show selection.\n\t\t\t*/\n\t\t\tif (!firstNode) { return; }\n\t\t\tvar lastNode = view._getLinePrevious();\n\t\t\t\n\t\t\tvar topNode, bottomNode, topOffset, bottomOffset;\n\t\t\tif (startLine < firstNode.lineIndex) {\n\t\t\t\ttopNode = firstNode;\n\t\t\t\ttopOffset = model.getLineStart(firstNode.lineIndex);\n\t\t\t} else if (startLine > lastNode.lineIndex) {\n\t\t\t\ttopNode = lastNode;\n\t\t\t\ttopOffset = model.getLineStart(lastNode.lineIndex);\n\t\t\t} else {\n\t\t\t\ttopNode = view._getLineNode(startLine);\n\t\t\t\ttopOffset = selection.start;\n\t\t\t}\n\n\t\t\tif (endLine < firstNode.lineIndex) {\n\t\t\t\tbottomNode = firstNode;\n\t\t\t\tbottomOffset = model.getLineStart(firstNode.lineIndex);\n\t\t\t} else if (endLine > lastNode.lineIndex) {\n\t\t\t\tbottomNode = lastNode;\n\t\t\t\tbottomOffset = model.getLineStart(lastNode.lineIndex);\n\t\t\t} else {\n\t\t\t\tbottomNode = view._getLineNode(endLine);\n\t\t\t\tbottomOffset = selection.end;\n\t\t\t}\n\t\t\tthis._setDOMSelection(topNode, topOffset, bottomNode, bottomOffset, selection.caret);\n\t\t},\n\t\t/** @private */\n\t\t_setDOMSelection: function (startNode, startOffset, endNode, endOffset, startCaret) {\n\t\t\tthis._setDOMFullSelection(startNode, startOffset, endNode, endOffset);\n\t\t\tif (!this.primary) { return; }\n\t\t\tvar view = this._view;\n\t\t\tvar start = startNode._line.getNodeOffset(startOffset);\n\t\t\tvar end = endNode._line.getNodeOffset(endOffset);\n\t\t\tif (!start.node || !end.node) return;\n\t\t\tvar range;\n\t\t\tvar win = view._getWindow();\n\t\t\tvar doc = view._parent.ownerDocument;\n\t\t\tif (win.getSelection) {\n\t\t\t\t//W3C\n\t\t\t\tvar sel = win.getSelection();\n\t\t\t\trange = doc.createRange();\n\t\t\t\trange.setStart(start.node, start.offset);\n\t\t\t\trange.setEnd(end.node, end.offset);\n\t\t\t\tif (view._hasFocus && (\n\t\t\t\t\tsel.anchorNode !== start.node || sel.anchorOffset !== start.offset ||\n\t\t\t\t\tsel.focusNode !== end.node || sel.focusOffset !== end.offset ||\n\t\t\t\t\tsel.anchorNode !== end.node || sel.anchorOffset !== end.offset ||\n\t\t\t\t\tsel.focusNode !== start.node || sel.focusOffset !== start.offset))\n\t\t\t\t{\n\t\t\t\t\tview._anchorNode = start.node;\n\t\t\t\t\tview._anchorOffset = start.offset;\n\t\t\t\t\tview._focusNode = end.node;\n\t\t\t\t\tview._focusOffset = end.offset;\n\t\t\t\t\tview._ignoreSelect = false;\n\t\t\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\tview._ignoreSelect = true;\n\t\t\t\t}\n\t\t\t\tif (view._cursorDiv) {\n\t\t\t\t\trange = doc.createRange();\n\t\t\t\t\tif (startCaret) {\n\t\t\t\t\t\trange.setStart(start.node, start.offset);\n\t\t\t\t\t\trange.setEnd(start.node, start.offset);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trange.setStart(end.node, end.offset);\n\t\t\t\t\t\trange.setEnd(end.node, end.offset);\n\t\t\t\t\t}\n\t\t\t\t\tvar rect = range.getClientRects()[0];\n\t\t\t\t\tvar cursorParent = view._cursorDiv.parentNode;\n\t\t\t\t\tvar clientRect = cursorParent.getBoundingClientRect();\n\t\t\t\t\tif (rect && clientRect) {\n\t\t\t\t\t\tview._cursorDiv.style.top = (rect.top - clientRect.top + cursorParent.scrollTop) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\tview._cursorDiv.style.left = (rect.left - clientRect.left + cursorParent.scrollLeft) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (doc.selection) {\n\t\t\t\tif (!view._hasFocus) { return; }\n\t\t\t\t//IE < 9\n\t\t\t\tvar body = doc.body;\n\n\t\t\t\t/*\n\t\t\t\t* Bug in IE. For some reason when text is deselected the overflow\n\t\t\t\t* selection at the end of some lines does not get redrawn.  The\n\t\t\t\t* fix is to create a DOM element in the body to force a redraw.\n\t\t\t\t*/\n\t\t\t\tvar child = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tbody.appendChild(child);\n\t\t\t\tbody.removeChild(child);\n\t\t\t\t\n\t\t\t\trange = body.createTextRange();\n\t\t\t\trange.moveToElementText(start.node.parentNode);\n\t\t\t\trange.moveStart(\"character\", start.offset); //$NON-NLS-1$\n\t\t\t\tvar endRange = body.createTextRange();\n\t\t\t\tendRange.moveToElementText(end.node.parentNode);\n\t\t\t\tendRange.moveStart(\"character\", end.offset); //$NON-NLS-1$\n\t\t\t\trange.setEndPoint(\"EndToStart\", endRange); //$NON-NLS-1$\n\t\t\t\tview._ignoreSelect = false;\n\t\t\t\trange.select();\n\t\t\t\tview._ignoreSelect = true;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\t_setDOMFullSelection: function(startNode, startOffset, endNode, endOffset) {\n\t\t\tthis._divs.forEach(function(div) {\n\t\t\t\tdiv.style.width = div.style.height = \"0px\"; //$NON-NLS-1$\n\t\t\t});\n\t\t\tvar view = this._view;\n\t\t\tif (!view._fullSelection) { return; }\n\t\t\tif (util.isIOS) { return; }\n\t\t\tif (startNode === endNode && startOffset === endOffset && this.primary) { return; }\n\t\t\tvar viewPad = view._getViewPadding();\n\t\t\tvar clientRect = view._clientDiv.getBoundingClientRect();\n\t\t\tvar viewRect = view._viewDiv.getBoundingClientRect();\n\t\t\tvar left = viewRect.left + viewPad.left;\n\t\t\tvar right = clientRect.right;\n\t\t\tvar _top = viewRect.top + viewPad.top;\n\t\t\tvar bottom = clientRect.bottom;\n\t\t\tvar hd = 0, vd = 0;\n\t\t\tif (view._clipDiv) {\n\t\t\t\tvar clipRect = view._clipDiv.getBoundingClientRect();\n\t\t\t\thd = clipRect.left - view._clipDiv.scrollLeft;\n\t\t\t\tvd = clipRect.top;\n\t\t\t} else {\n\t\t\t\tvar rootpRect = view._rootDiv.getBoundingClientRect();\n\t\t\t\thd = rootpRect.left;\n\t\t\t\tvd = rootpRect.top;\n\t\t\t}\n\t\t\tview._ignoreDOMSelection = true;\n\t\t\tvar startLine = new TextLine(view, startNode.lineIndex, startNode);\n\t\t\tvar startRect = startLine.getBoundingClientRect(startOffset, false);\n\t\t\tvar l = startRect.left, endLine, endRect;\n\t\t\tif (startNode === endNode && startOffset === endOffset) {\n\t\t\t\tendLine = startLine;\n\t\t\t\tendRect = startRect;\n\t\t\t} else {\n\t\t\t\tendLine = new TextLine(view, endNode.lineIndex, endNode);\n\t\t\t\tendRect = endLine.getBoundingClientRect(endOffset, false);\n\t\t\t}\n\t\t\tvar r = endRect.left;\n\t\t\tview._ignoreDOMSelection = false;\n\t\t\tvar sel1Div = this._divs[0];\n\t\t\tvar sel1Left = Math.min(right, Math.max(left, l));\n\t\t\tvar sel1Top = Math.min(bottom, Math.max(_top, startRect.top));\n\t\t\tvar sel1Right = right;\n\t\t\tvar sel1Bottom = Math.min(bottom, Math.max(_top, startRect.bottom));\n\t\t\tsel1Div.style.left = (sel1Left - hd) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.top = (sel1Top - vd) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.width = Math.max(0, sel1Right - sel1Left) + \"px\"; //$NON-NLS-1$\n\t\t\tsel1Div.style.height = Math.max(0, sel1Bottom - sel1Top) + \"px\"; //$NON-NLS-1$\n\t\t\tif (startNode.lineIndex === endNode.lineIndex) {\n\t\t\t\tsel1Right = Math.min(r, right);\n\t\t\t\tsel1Div.style.width = Math.max(this.primary ? 0 : 1, sel1Right - sel1Left) + \"px\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tvar sel3Left = left;\n\t\t\t\tvar sel3Top = Math.min(bottom, Math.max(_top, endRect.top));\n\t\t\t\tvar sel3Right = Math.min(right, Math.max(left, r));\n\t\t\t\tvar sel3Bottom = Math.min(bottom, Math.max(_top, endRect.bottom));\n\t\t\t\tvar sel3Div = this._divs[2];\n\t\t\t\tsel3Div.style.left = (sel3Left - hd) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.top = (sel3Top - vd) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.width = Math.max(0, sel3Right - sel3Left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tsel3Div.style.height = Math.max(0, sel3Bottom - sel3Top) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (Math.abs(startNode.lineIndex - endNode.lineIndex) > 1) {\n\t\t\t\t\tvar sel2Div = this._divs[1];\n\t\t\t\t\tsel2Div.style.left = (left - hd)  + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.top = (sel1Bottom - vd) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.width = Math.max(0, right - left) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tsel2Div.style.height = Math.max(0, sel3Top - sel1Bottom) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t/** @private */\n\tfunction TextRect (rect) {\n\t\tthis.left = rect.left;\n\t\tthis.top = rect.top;\n\t\tthis.right = rect.right;\n\t\tthis.bottom = rect.bottom;\n\t}\n\tTextRect.prototype = /** @lends orion.editor.TextRect.prototype */ {\n\t\t/** @private */\n\t\ttoString: function() {\n\t\t\treturn \"{l=\" + this.left + \", t=\" + this.top + \", r=\" + this.right + \", b=\" + this.bottom + \"}\"; //$NON-NLS-4$ //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t}\n\t};\n\t/** \n\t * Constructs a new TextLine object.\n\t * \n\t * @class A TextLine represents a line of text in the view.\n\t * @name orion.editor.TextLine\n\t * @private\n\t */\n\tfunction TextLine (view, lineIndex, lineDiv) {\n\t\t/**\n\t\t * The view.\n\t\t *\n\t\t * @name orion.editor.TextLine#view\n\t\t * @private\n\t\t */\n\t\tthis.view = view;\n\t\t/**\n\t\t * The line index.\n\t\t *\n\t\t * @name orion.editor.TextLine#lineIndex\n\t\t * @private\n\t\t */\n\t\tthis.lineIndex = lineIndex;\n\t\t\n\t\tthis._lineDiv = lineDiv;\n\t}\n\tTextLine.prototype = /** @lends orion.editor.TextLine.prototype */ {\n\t\t/** @private */\n\t\tcreate: function(_parent, div, drawing) {\n\t\t\tif (this._lineDiv) { return; }\n\t\t\tthis.drawing = drawing;\n\t\t\tvar child = this._lineDiv = this._createLine(_parent, div, this.lineIndex);\n\t\t\tchild._line = this;\n\t\t\treturn child;\n\t\t},\n\t\t_createLine: function(_parent, div, lineIndex) {\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar e = {type:\"LineStyle\", textView: view, lineIndex: lineIndex, lineText: lineText, lineStart: lineStart}; //$NON-NLS-1$\n\t\t\tview.onLineStyle(e);\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar lineDiv = div || util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tif (!div || !compare(div.viewStyle, e.style)) {\n\t\t\t\tapplyStyle(e.style, lineDiv, div);\n\t\t\t\tif (div) { div._trim = null; }\n\t\t\t\tlineDiv.viewStyle = e.style;\n\t\t\t}\n\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\n\t\t\tif (div && lineDiv.viewLineText === lineText && compare(e.ranges, lineDiv.viewRanges)) {\n\t\t\t\treturn lineDiv;\n\t\t\t}\n\t\t\tlineDiv.viewRanges = e.ranges;\n\t\t\tlineDiv.viewLineText = lineText;\n\t\t\t\n\t\t\tvar ranges = [];\n\t\t\tvar data = {tabOffset: 0, ranges: ranges};\n\t\t\tthis._createRanges(e.ranges, lineText, 0, lineText.length, lineStart, data);\n\t\t\t\n\t\t\t/*\n\t\t\t* A trailing span with a whitespace is added for three different reasons:\n\t\t\t* 1. Make sure the height of each line is the largest of the default font\n\t\t\t* in normal, italic, bold, and italic-bold.\n\t\t\t* 2. When full selection is off, Firefox, Opera and IE9 do not extend the \n\t\t\t* selection at the end of the line when the line is fully selected. \n\t\t\t* 3. The height of a div with only an empty span is zero.\n\t\t\t*/\n\t\t\tvar c = \" \"; //$NON-NLS-1$\n\t\t\tif (!view._fullSelection && util.isIE < 9) {\n\t\t\t\t/* \n\t\t\t\t* IE8 already selects extra space at end of a line fully selected,\n\t\t\t\t* adding another space at the end of the line causes the selection \n\t\t\t\t* to look too big. The fix is to use a zero-width space (\\uFEFF) instead. \n\t\t\t\t*/\n\t\t\t\tc = \"\\uFEFF\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar range = {text: c, style: view._metrics.largestFontStyle, ignoreChars: 1};\n\t\t\tif (ranges.length === 0 || !ranges[ranges.length - 1].style || ranges[ranges.length - 1].style.tagName !== \"div\") { //$NON-NLS-1$\n\t\t\t\tranges.push(range);\n\t\t\t} else {\n\t\t\t\tranges.splice(ranges.length - 1, 0, range);\n\t\t\t}\n\t\t\n\t\t\tvar span, style, oldSpan, oldStyle, text, oldText, end = 0, oldEnd = 0, next, i;\n\t\t\tif (util.isFirefox && lineText.length > 2000) {\n\t\t\t\tif (div) {\n\t\t\t\t\tlineDiv.innerHTML = \"\";\n\t\t\t\t\tdiv.lineWidth = undefined;\n\t\t\t\t}\n\t\t\t\tvar frag = doc.createDocumentFragment();\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\trange = ranges[i];\n\t\t\t\t\ttext = range.text;\n\t\t\t\t\tstyle = range.style;\n\t\t\t\t\tspan = this._createSpan(lineDiv, text, style, range.ignoreChars);\n\t\t\t\t\tfrag.appendChild(span);\n\t\t\t\t}\n\t\t\t\tlineDiv.appendChild(frag);\n\t\t\t} else {\n\t\t\t\tvar changeCount, changeStart;\n\t\t\t\tif (div) {\n\t\t\t\t\tvar modelChangedEvent = div.modelChangedEvent;\n\t\t\t\t\tif (modelChangedEvent) {\n\t\t\t\t\t\tif (modelChangedEvent.removedLineCount === 0 && modelChangedEvent.addedLineCount === 0) {\n\t\t\t\t\t\t\tchangeStart = modelChangedEvent.start - lineStart;\n\t\t\t\t\t\t\tchangeCount = modelChangedEvent.addedCharCount - modelChangedEvent.removedCharCount;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchangeStart = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiv.modelChangedEvent = undefined;\n\t\t\t\t\t}\n\t\t\t\t\toldSpan = div.firstChild;\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\trange = ranges[i];\n\t\t\t\t\ttext = range.text;\n\t\t\t\t\tend += text.length;\n\t\t\t\t\tstyle = range.style;\n\t\t\t\t\tif (oldSpan) {\n\t\t\t\t\t\toldText = oldSpan.firstChild ? oldSpan.firstChild.data : \" \";\n\t\t\t\t\t\toldStyle = oldSpan.viewStyle;\n\t\t\t\t\t\tif (oldText === text && compare(style, oldStyle)) {\n\t\t\t\t\t\t\toldEnd += oldText.length;\n\t\t\t\t\t\t\toldSpan._rectsCache = undefined;\n\t\t\t\t\t\t\tspan = oldSpan = oldSpan.nextSibling;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twhile (oldSpan) {\n\t\t\t\t\t\t\t\tif (changeStart !== -1) {\n\t\t\t\t\t\t\t\t\tvar spanEnd = end;\n\t\t\t\t\t\t\t\t\tif (spanEnd >= changeStart) {\n\t\t\t\t\t\t\t\t\t\tspanEnd -= changeCount;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar t = oldSpan.firstChild ? oldSpan.firstChild.data : \" \";\n\t\t\t\t\t\t\t\t\tvar len = t ? t.length : 0;\n\t\t\t\t\t\t\t\t\tif (oldEnd + len > spanEnd) { break; }\n\t\t\t\t\t\t\t\t\toldEnd += len;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnext = oldSpan.nextSibling;\n\t\t\t\t\t\t\t\tlineDiv.removeChild(oldSpan);\n\t\t\t\t\t\t\t\toldSpan = next;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tspan = this._createSpan(lineDiv, text, style, range.ignoreChars);\n\t\t\t\t\tif (oldSpan) {\n\t\t\t\t\t\tlineDiv.insertBefore(span, oldSpan);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineDiv.appendChild(span);\n\t\t\t\t\t}\n\t\t\t\t\tif (div) {\n\t\t\t\t\t\tdiv.lineWidth = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (div) {\n\t\t\t\t\tvar tmp = span ? span.nextSibling : null;\n\t\t\t\t\twhile (tmp) {\n\t\t\t\t\t\tnext = tmp.nextSibling;\n\t\t\t\t\t\tdiv.removeChild(tmp);\n\t\t\t\t\t\ttmp = next;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!lineDiv.parentNode) {\n\t\t\t\t_parent.appendChild(lineDiv);\n\t\t\t}\n\t\t\treturn lineDiv;\n\t\t},\n\t\t_createRanges: function(ranges, text, start, end, lineStart, data) {\n\t\t\tif (start > end) { return; }\n\t\t\tif (ranges) {\n\t\t\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\t\t\tvar range = ranges[i];\n\t\t\t\t\tif (range.end < lineStart + start) { continue; }\n\t\t\t\t\tvar styleStart = Math.max(lineStart + start, range.start) - lineStart;\n\t\t\t\t\tif (styleStart > end) { break; }\n\t\t\t\t\tvar styleEnd = Math.min(lineStart + end, range.end) - lineStart;\n\t\t\t\t\tif (styleStart <= styleEnd) {\n\t\t\t\t\t\tstyleStart = Math.max(start, styleStart);\n\t\t\t\t\t\tstyleEnd = Math.min(end, styleEnd);\n\t\t\t\t\t\tif (start < styleStart) {\n\t\t\t\t\t\t\tthis._createRange(text, start, styleStart, null, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!range.style || !range.style.unmergeable) {\n\t\t\t\t\t\t\twhile (i + 1 < ranges.length && ranges[i + 1].start - lineStart === styleEnd && compare(range.style, ranges[i + 1].style)) {\n\t\t\t\t\t\t\t\trange = ranges[i + 1];\n\t\t\t\t\t\t\t\tstyleEnd = Math.min(lineStart + end, range.end) - lineStart;\n\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._createRange(text, styleStart, styleEnd, range.style, data);\n\t\t\t\t\t\tstart = styleEnd;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\tthis._createRange(text, start, end, null, data);\n\t\t\t}\n\t\t},\n\t\t_createRange: function(text, start, end, style, data) {\n\t\t\tif (start > end) { return; }\n\t\t\tvar tabSize = this.view._customTabSize, range;\n\t\t\tvar bidiStyle = {tagName:\"span\", bidi:true, style:{unicodeBidi:\"embed\", direction:\"ltr\"}};\n\t\t\tvar bidiRange = {text: \"\\u200E\", style: bidiStyle}; // We ensure segments flow from left to right by adding a LRM marker \\u200E\n\t\t\tif (tabSize && tabSize !== 8) {\n\t\t\t\tvar tabIndex = text.indexOf(\"\\t\", start); //$NON-NLS-1$\n\t\t\t\twhile (tabIndex !== -1 && tabIndex < end) {\n\t\t\t\t\tif (start < tabIndex) {\n\t\t\t\t\t\trange = {text: text.substring(start, tabIndex), style: style};\n\t\t\t\t\t\trange = bidiUtils.enforceTextDir(range);\n\t\t\t\t\t\tdata.ranges.push(range);\n\t\t\t\t\t\tif (bidiUtils.isBidiEnabled()) {\n\t\t\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t\t\t}\n\t\t\t\t\tvar spacesCount = tabSize - (data.tabOffset % tabSize);\n\t\t\t\t\tif (spacesCount > 0) {\n\t\t\t\t\t\t//TODO hack to preserve tabs in getDOMText()\n\t\t\t\t\t\tvar spaces = \"\\u00A0\"; //$NON-NLS-1$\n\t\t\t\t\t\tfor (var i = 1; i < spacesCount; i++) {\n\t\t\t\t\t\t\tspaces += \" \"; //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trange = {text: spaces, style: style, ignoreChars: spacesCount - 1};\n\t\t\t\t\t\tdata.ranges.push(range);\n\t\t\t\t\t\tif (bidiUtils.isBidiEnabled()) {\n\t\t\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t\t\t}\n\t\t\t\t\tstart = tabIndex + 1;\n\t\t\t\t\tif (start === end) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttabIndex = text.indexOf(\"\\t\", start); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (start <= end) {\n\t\t\t\trange = {text: text.substring(start, end), style: style};\n\t\t\t\trange = bidiUtils.enforceTextDir(range);\n\t\t\t\tdata.ranges.push(range);\n\t\t\t\tif (bidiUtils.isBidiEnabled()) {\n\t\t\t\t\tdata.ranges.push(bidiRange);\n\t\t\t\t}\n\t\t\t\tdata.tabOffset += range.text.length;\n\t\t\t}\n\t\t},\n\t\t_createSpan: function(_parent, text, style, ignoreChars) {\n\t\t\tvar view = this.view;\n\t\t\tvar tagName = \"span\"; //$NON-NLS-1$\n\t\t\tif (style && style.tagName) {\n\t\t\t\ttagName = style.tagName.toLowerCase();\n\t\t\t}\n\t\t\tvar isLink = tagName === \"a\"; //$NON-NLS-1$\n\t\t\tif (isLink) { this.hasLink = true; }\n\t\t\tif (isLink && !view._linksVisible) {\n\t\t\t\ttagName = \"span\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar child = util.createElement(_parent.ownerDocument, tagName);\n\t\t\tchild.appendChild(doc.createTextNode(style && style.text ? style.text : text));\n\t\t\tif (style && style.html) {\n\t\t\t\tchild.innerHTML = style.html;\n\t\t\t\tchild.ignore = true;\n\t\t\t} else if (style && style.node) {\n\t\t\t\tif (this.drawing) {\n\t\t\t\t\tchild.appendChild(style.node);\n\t\t\t\t} else {\n\t\t\t\t\tchild.appendChild(style.node.cloneNode(true));\n\t\t\t\t}\n\t\t\t\tchild.ignore = true;\n\t\t\t} else if (style && style.bidi) {\t\t\t\t\n\t\t\t\tchild.ignore = true;\n\t\t\t}\n\t\t\tapplyStyle(style, child);\n\t\t\tif (tagName === \"a\") { //$NON-NLS-1$\n\t\t\t\tvar win = view._getWindow();\n\t\t\t\taddHandler(child, \"click\", function(e) { return view._handleLinkClick(e ? e : win.event); }, false); //$NON-NLS-1$\n\t\t\t}\n\t\t\tchild.viewStyle = style;\n\t\t\tif (ignoreChars) {\n\t\t\t\tchild.ignoreChars = ignoreChars;\n\t\t\t}\n\t\t\treturn child;\n\t\t},\n\t\t_ensureCreated: function() {\n\t\t\tif (this._lineDiv) { return this._lineDiv; }\n\t\t\treturn (this._createdDiv = this.create(this.view._clientDiv, null));\n\t\t},\n\t\t/** @private */\n\t\tgetBoundingClientRect: function(offset, absolute) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar view = this.view;\n\t\t\tif (offset === undefined) {\n\t\t\t\treturn this._getLineBoundingClientRect(child, true);\n\t\t\t}\n\t\t\tvar model = view._model;\n\t\t\tvar doc = child.ownerDocument;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar result = null;\n\t\t\tif (offset < model.getLineEnd(lineIndex)) {\n\t\t\t\tvar lineOffset = model.getLineStart(lineIndex);\n\t\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\t\tvar nodeLength = this._nodeLength(lineChild); \n\t\t\t\t\tif (lineOffset + nodeLength > offset) {\n\t\t\t\t\t\tvar index = offset - lineOffset;\n\t\t\t\t\t\tvar range;\n\t\t\t\t\t\tif (textNode.length === 1) {\n\t\t\t\t\t\t\tresult = new TextRect(lineChild.getBoundingClientRect());\n\t\t\t\t\t\t} else if (view._isRangeRects) {\n\t\t\t\t\t\t\trange = doc.createRange();\n\t\t\t\t\t\t\trange.setStart(textNode, index);\n\t\t\t\t\t\t\trange.setEnd(textNode, index + 1);\n\t\t\t\t\t\t\tresult = new TextRect(range.getBoundingClientRect());\n\t\t\t\t\t\t} else if (util.isIE) {\n\t\t\t\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.collapse();\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t* Bug in IE8. TextRange.getClientRects() and TextRange.getBoundingClientRect() fails\n\t\t\t\t\t\t\t* if the line child is not the first element in the line and if the start offset is 0. \n\t\t\t\t\t\t\t* The fix is to use Node.getClientRects() left edge instead.\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tvar fixIE8 = index === 0 && util.isIE === 8;\n\t\t\t\t\t\t\tif (fixIE8) { index = 1; }\n\t\t\t\t\t\t\trange.moveEnd(\"character\", index + 1); //$NON-NLS-1$\n\t\t\t\t\t\t\trange.moveStart(\"character\", index); //$NON-NLS-1$\n\t\t\t\t\t\t\tresult = new TextRect(range.getBoundingClientRect());\n\t\t\t\t\t\t\tif (fixIE8) {\n\t\t\t\t\t\t\t\tresult.left = lineChild.getClientRects()[0].left;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar text = textNode.data;\n\t\t\t\t\t\t\tlineChild.removeChild(textNode);\n\t\t\t\t\t\t\tlineChild.appendChild(doc.createTextNode(text.substring(0, index)));\n\t\t\t\t\t\t\tvar span = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tspan.appendChild(doc.createTextNode(text.substring(index, index + 1)));\n\t\t\t\t\t\t\tlineChild.appendChild(span);\n\t\t\t\t\t\t\tlineChild.appendChild(doc.createTextNode(text.substring(index + 1)));\n\t\t\t\t\t\t\tresult = new TextRect(span.getBoundingClientRect());\n\t\t\t\t\t\t\tlineChild.innerHTML = \"\";\n\t\t\t\t\t\t\tlineChild.appendChild(textNode);\n\t\t\t\t\t\t\tif (!this._createdDiv) {\n\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t * Removing the element node that holds the selection start or end\n\t\t\t\t\t\t\t\t * causes the selection to be lost. The fix is to detect this case\n\t\t\t\t\t\t\t\t * and restore the selection. \n\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t\tvar s = view._getSelections()[0];\n\t\t\t\t\t\t\t\tif ((lineOffset <= s.start && s.start < lineOffset + nodeLength) ||  (lineOffset <= s.end && s.end < lineOffset + nodeLength)) {\n\t\t\t\t\t\t\t\t\tview._updateDOMSelection();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (util.isIE < 11) {\n\t\t\t\t\t\t\tvar win = getWindow(child.ownerDocument);\n\t\t\t\t\t\t\tvar xFactor = win.screen.logicalXDPI / win.screen.deviceXDPI;\n\t\t\t\t\t\t\tvar yFactor = win.screen.logicalYDPI / win.screen.deviceYDPI;\n\t\t\t\t\t\t\tresult.left = result.left * xFactor;\n\t\t\t\t\t\t\tresult.right = result.right * xFactor;\n\t\t\t\t\t\t\tresult.top = result.top * yFactor;\n\t\t\t\t\t\t\tresult.bottom = result.bottom * yFactor;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tlineOffset += nodeLength;\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar rect = this.getBoundingClientRect();\n\t\t\tif (!result) {\n\t\t\t\tif (view._wrapMode) {\n\t\t\t\t\tvar rects = this.getClientRects();\n\t\t\t\t\tresult = rects[rects.length - 1];\n\t\t\t\t\tresult.left = result.right;\n\t\t\t\t\tresult.left += rect.left;\n\t\t\t\t\tresult.top += rect.top;\n\t\t\t\t\tresult.right += rect.left;\n\t\t\t\t\tresult.bottom += rect.top;\n\t\t\t\t} else {\n\t\t\t\t\tresult = new TextRect(rect);\n\t\t\t\t\tresult.left = result.right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (absolute || absolute === undefined) {\n\t\t\t\tresult.left -= rect.left;\n\t\t\t\tresult.top -= rect.top;\n\t\t\t\tresult.right -= rect.left;\n\t\t\t\tresult.bottom -= rect.top;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tforEach: function(callback) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar lineChild = child.firstChild;\n\t\t\twhile (lineChild) {\n\t\t\t\tvar next = lineChild.nextSibling;\n\t\t\t\tif (!lineChild.ignore) {\n\t\t\t\t\tif (!callback.call(this, lineChild)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlineChild = next;\n\t\t\t}\n\t\t},\n\t\t/** @private */\n\t\t_getClientRects: function(element, parentRect) {\n\t\t\tvar rects, newRects, rect, i;\n\t\t\tif (!element._rectsCache) {\n\t\t\t\trects = element.getClientRects();\n\t\t\t\tnewRects = newArray(rects.length);\n\t\t\t\tfor (i = 0; i<rects.length; i++) {\n\t\t\t\t\trect = newRects[i] = new TextRect(rects[i]);\n\t\t\t\t\trect.left -= parentRect.left;\n\t\t\t\t\trect.top -= parentRect.top;\n\t\t\t\t\trect.right -= parentRect.left;\n\t\t\t\t\trect.bottom -= parentRect.top;\n\t\t\t\t}\n\t\t\t\telement._rectsCache = newRects;\n\t\t\t}\n\t\t\trects = element._rectsCache;\n\t\t\tnewRects = [rects.length];\n\t\t\tfor (i = 0; i<rects.length; i++) {\n\t\t\t\tnewRects[i] = new TextRect(rects[i]);\n\t\t\t}\n\t\t\treturn newRects;\n\t\t},\n\t\tgetClientRects: function(lineIndex) {\n\t\t\tif (!this.view._wrapMode) { return [this.getBoundingClientRect()]; }\n\t\t\tvar child = this._ensureCreated();\n\t\t\t//TODO [perf] cache rects\n\t\t\tvar result = [];\n\t\t\tvar parentRect = child.getBoundingClientRect();\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar rects = this._getClientRects(lineChild, parentRect);\n\t\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\t\tvar rect = rects[i], j, r;\n\t\t\t\t\tif (rect.top === rect.bottom) { continue; }\n\t\t\t\t\tvar center = rect.top + (rect.bottom - rect.top) / 2;\n\t\t\t\t\tfor (j = 0; j < result.length; j++) {\n\t\t\t\t\t\tr = result[j];\n\t\t\t\t\t\tif ((r.top <= center && center < r.bottom)) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (j === result.length) {\n\t\t\t\t\t\tresult.push(rect);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (rect.left < r.left) { r.left = rect.left; }\n\t\t\t\t\t\tif (rect.top < r.top) { r.top = rect.top; }\n\t\t\t\t\t\tif (rect.right > r.right) { r.right = rect.right; }\n\t\t\t\t\t\tif (rect.bottom > r.bottom) { r.bottom = rect.bottom; }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tif (lineIndex !== undefined) {\n\t\t\t\treturn result[lineIndex];\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/** @private */\n\t\t_getLineBoundingClientRect: function (child, noTrim) {\n\t\t\tvar rect = new TextRect(child.getBoundingClientRect());\n\t\t\tif (this.view._wrapMode) {\n\t\t\t} else {\n\t\t\t\trect.right = rect.left;\n\t\t\t\tvar lastChild = child.lastChild;\n\t\t\t\t//Remove any artificial trailing whitespace in the line\n\t\t\t\twhile (lastChild && lastChild.ignoreChars === lastChild.firstChild.length) {\n\t\t\t\t\tlastChild = lastChild.previousSibling;\n\t\t\t\t}\n\t\t\t\tif (lastChild) {\n\t\t\t\t\tvar lastRect = lastChild.getBoundingClientRect();\n\t\t\t\t\trect.right = lastRect.right + getLineTrim(child).right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (noTrim) {\n\t\t\t\tvar padding = getLineTrim(child);\n\t\t\t\trect.left = rect.left + padding.left;\n\t\t\t\trect.right = rect.right - padding.right;\n\t\t\t}\n\t\t\treturn rect;\n\t\t},\n\t\t/** @private */\n\t\tgetLineCount: function () {\n\t\t\tif (!this.view._wrapMode) { return 1; }\n\t\t\treturn this.getClientRects().length;\n\t\t},\n\t\t/** @private */\n\t\tgetLineIndex: function(offset) {\n\t\t\tif (!this.view._wrapMode) { return 0; }\n\t\t\tvar rects = this.getClientRects();\n\t\t\tvar rect = this.getBoundingClientRect(offset);\n\t\t\tvar center = rect.top + ((rect.bottom - rect.top) / 2);\n\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\tif (rects[i].top <= center && center < rects[i].bottom) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rects.length - 1;\n\t\t},\n\t\t/** @private */\n\t\tgetLineStart: function (lineIndex) {\n\t\t\tif (!this.view._wrapMode || lineIndex === 0) {\n\t\t\t\treturn this.view._model.getLineStart(this.lineIndex);\n\t\t\t}\n\t\t\tvar rects = this.getClientRects();\n\t\t\treturn this.getOffset(rects[lineIndex].left + 1, rects[lineIndex].top + 1);\n\t\t},\n\t\t_nodeLength: function(lineChild) {\n\t\t\tif (!lineChild || lineChild.ignore) return 0;\n\t\t\tvar len = lineChild.firstChild.length; \n\t\t\tif (lineChild.ignoreChars) {\n\t\t\t\tlen -= lineChild.ignoreChars;\n\t\t\t}\n\t\t\treturn len;\n\t\t},\n\t\tgetModelOffset: function(node, offset) {\n\t\t\tif (!node) { return 0; }\n\t\t\tvar lineOffset = 0;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\tif (textNode === node) {\n\t\t\t\t\tif (lineChild.ignoreChars) { lineOffset -= lineChild.ignoreChars; }\n\t\t\t\t\tlineOffset += offset;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (lineChild.ignoreChars) { lineOffset -= lineChild.ignoreChars; }\n\t\t\t\tlineOffset += textNode.data.length;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn Math.max(0, lineOffset) + this.view._model.getLineStart(this.lineIndex);\n\t\t},\n\t\tgetNodeOffset: function(modelOffset) {\n\t\t\tvar offset = 0;\n\t\t\tvar lineNode, lineNodeOffset;\n\t\t\tvar model = this.view._model;\n\t\t\tvar lineStart = model.getLineStart(this.lineIndex);\n\t\t\tvar lineOffset = modelOffset - lineStart;\n\t\t\tvar end = model.getLineEnd(this.lineIndex) - lineStart;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar node = lineChild.firstChild;\n\t\t\t\tvar nodeLength = this._nodeLength(lineChild);\n\t\t\t\tif (nodeLength + offset > lineOffset || offset + nodeLength >= end) {\n\t\t\t\t\tlineNode = node;\n\t\t\t\t\tlineNodeOffset = lineOffset - offset;\n\t\t\t\t\tif (lineChild.ignoreChars && nodeLength > 0 && lineNodeOffset === nodeLength) {\n\t\t\t\t\t\tlineNodeOffset += lineChild.ignoreChars; \n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\toffset += nodeLength;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn {node: lineNode, offset: lineNodeOffset};\n\t\t},\n\t\tgetText: function(offsetNode) {\n\t\t\tvar text = \"\", offset = 0;\n\t\t\tthis.forEach(function(lineChild) {\n\t\t\t\tvar textNode;\n\t\t\t\tif (lineChild.ignoreChars) {\n\t\t\t\t\ttextNode = lineChild.lastChild;\n\t\t\t\t\tvar ignored = 0, childText = [], childOffset = -1;\n\t\t\t\t\twhile (textNode) {\n\t\t\t\t\t\tvar data = textNode.data;\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tfor (var i = data.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\t\tvar ch = data.substring(i, i + 1);\n\t\t\t\t\t\t\t\tif (ignored < lineChild.ignoreChars && (ch === \" \" || ch === \"\\uFEFF\")) { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tignored++;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tchildText.push(ch === \"\\u00A0\" ? \"\\t\" : ch); //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (offsetNode === textNode) {\n\t\t\t\t\t\t\tchildOffset = childText.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttextNode = textNode.previousSibling;\n\t\t\t\t\t}\n\t\t\t\t\tchildText = childText.reverse().join(\"\");\n\t\t\t\t\tif (childOffset !== -1) {\n\t\t\t\t\t\toffset = text.length + childText.length - childOffset;\n\t\t\t\t\t}\n\t\t\t\t\ttext += childText;\n\t\t\t\t} else {\n\t\t\t\t\ttextNode = lineChild.firstChild;\n\t\t\t\t\twhile (textNode) {\n\t\t\t\t\t\tif (offsetNode === textNode) {\n\t\t\t\t\t\t\toffset = text.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext += textNode.data;\n\t\t\t\t\t\ttextNode = textNode.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn {text: text, offset: offset};\n\t\t},\n\t\t/** @private */\n\t\tgetOffset: function(x, y) {\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tif (lineStart === lineEnd) {\n\t\t\t\treturn lineStart;\n\t\t\t}\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar lineRect = this.getBoundingClientRect();\n\t\t\t\n\t\t\tvar that = this;\n\t\t\tfunction hitChild(lineChild, offset, rect) {\n\t\t\t\tvar textNode = lineChild.firstChild;\n\t\t\t\tvar nodeLength = that._nodeLength(lineChild);\n\t\t\t\tvar doc = child.ownerDocument;\n\t\t\t\tvar win = getWindow(doc);\n\t\t\t\tvar xFactor = util.isIE < 11 ? win.screen.logicalXDPI / win.screen.deviceXDPI : 1;\n\t\t\t\tvar yFactor = util.isIE < 11 ? win.screen.logicalYDPI / win.screen.deviceYDPI : 1;\n\t\t\t\tvar rangeLeft, rangeTop, rangeRight, rangeBottom;\n\t\t\t\tvar range, start, end;\n\t\t\t\tvar rl = rect.left + lineRect.left, fixIE8, rects1;\n\t\t\t\tif (util.isIE || view._isRangeRects) {\n\t\t\t\t\trange = view._isRangeRects ? doc.createRange() : doc.body.createTextRange();\n\t\t\t\t\tvar high = nodeLength;\n\t\t\t\t\tvar low = -1;\n\t\t\t\t\twhile ((high - low) > 1) {\n\t\t\t\t\t\tvar mid = Math.floor((high + low) / 2);\n\t\t\t\t\t\tstart = low + 1;\n\t\t\t\t\t\tend = mid === nodeLength - 1 && lineChild.ignoreChars ? textNode.length : mid + 1;\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t* Bug in IE8. TextRange.getClientRects() and TextRange.getBoundingClientRect() fails\n\t\t\t\t\t\t* if the line child is not the first element in the line and if the start offset is 0. \n\t\t\t\t\t\t* The fix is to use Node.getClientRects() left edge instead.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tfixIE8 = start === 0 && util.isIE === 8;\n\t\t\t\t\t\tif (view._isRangeRects) {\n\t\t\t\t\t\t\trange.setStart(textNode, start);\n\t\t\t\t\t\t\trange.setEnd(textNode, end);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (fixIE8) { start = 1; } \n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.move(\"character\", start); //$NON-NLS-1$\n\t\t\t\t\t\t\trange.moveEnd(\"character\", end - start); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trects1 = range.getClientRects();\n\t\t\t\t\t\tvar found = false;\n\t\t\t\t\t\tfor (var k = 0; k < rects1.length; k++) {\n\t\t\t\t\t\t\trect = rects1[k];\n\t\t\t\t\t\t\trangeLeft = (fixIE8 ? rl : rect.left) * xFactor - lineRect.left;\n\t\t\t\t\t\t\trangeRight = rect.right * xFactor - lineRect.left;\n\t\t\t\t\t\t\trangeTop = rect.top * yFactor - lineRect.top;\n\t\t\t\t\t\t\trangeBottom = rect.bottom * yFactor - lineRect.top;\n\t\t\t\t\t\t\tif (rangeLeft <= x && x < rangeRight && (!view._wrapMode || (rangeTop <= y && y <= rangeBottom))) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\thigh = mid;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlow = mid;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\toffset += high;\n\t\t\t\t\tstart = high;\n\t\t\t\t\tend = high === nodeLength - 1 && lineChild.ignoreChars ? textNode.length : Math.min(high + 1, textNode.length);\n\t\t\t\t\tif (view._isRangeRects) {\n\t\t\t\t\t\trange.setStart(textNode, start);\n\t\t\t\t\t\trange.setEnd(textNode, end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\trange.move(\"character\", start); //$NON-NLS-1$\n\t\t\t\t\t\trange.moveEnd(\"character\", end - start); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\trects1 = range.getClientRects();\n\t\t\t\t\tvar trailing = false;\n\t\t\t\t\tif (rects1.length > 0) {\n\t\t\t\t\t\trect = rects1[0];\n\t\t\t\t\t\trangeLeft = (fixIE8 ? rl : rect.left) * xFactor - lineRect.left;\n\t\t\t\t\t\trangeRight = rect.right * xFactor - lineRect.left;\n\t\t\t\t\t\t//TODO test for character trailing (wrong for bidi)\n\t\t\t\t\t\ttrailing = x > (rangeLeft + (rangeRight - rangeLeft) / 2);\n\t\t\t\t\t}\n\t\t\t\t\t// Handle Unicode surrogates\n\t\t\t\t\tvar offsetInLine = offset - lineStart;\n\t\t\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\t\t\tvar c = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF && trailing) {\n\t\t\t\t\t\tif (offsetInLine < lineText.length) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine + 1);\n\t\t\t\t\t\t\tif (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\t\t\t\t\toffset += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (0xDC00 <= c && c <= 0xDFFF && !trailing) {\n\t\t\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\t\t\toffset -= 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (trailing) {\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar newText = [];\n\t\t\t\t\tfor (var q = 0; q < nodeLength; q++) {\n\t\t\t\t\t\tnewText.push(\"<span>\"); //$NON-NLS-1$\n\t\t\t\t\t\tif (q === nodeLength - 1) {\n\t\t\t\t\t\t\tnewText.push(textNode.data.substring(q));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewText.push(textNode.data.substring(q, q + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewText.push(\"</span>\"); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\tlineChild.innerHTML = newText.join(\"\");\n\t\t\t\t\tvar rangeChild = lineChild.firstChild;\n\t\t\t\t\twhile (rangeChild) {\n\t\t\t\t\t\trect = rangeChild.getBoundingClientRect();\n\t\t\t\t\t\trangeLeft = rect.left - lineRect.left;\n\t\t\t\t\t\trangeRight = rect.right - lineRect.left;\n\t\t\t\t\t\tif (rangeLeft <= x && x < rangeRight) {\n\t\t\t\t\t\t\t//TODO test for character trailing (wrong for bidi)\n\t\t\t\t\t\t\tif (x > rangeLeft + (rangeRight - rangeLeft) / 2) {\n\t\t\t\t\t\t\t\toffset++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t\trangeChild = rangeChild.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\tif (!that._createdDiv) {\n\t\t\t\t\t\tlineChild.innerHTML = \"\";\n\t\t\t\t\t\tlineChild.appendChild(textNode);\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * Removing the element node that holds the selection start or end\n\t\t\t\t\t\t * causes the selection to be lost. The fix is to detect this case\n\t\t\t\t\t\t * and restore the selection. \n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar s = view._getSelections()[0];\n\t\t\t\t\t\tif ((offset <= s.start && s.start < offset + nodeLength) || (offset <= s.end && s.end < offset + nodeLength)) {\n\t\t\t\t\t\t\tview._updateDOMSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn offset;\n\t\t\t}\n\t\t\t\n\t\t\tvar rects, rect;\n\t\t\tif (view._wrapMode) {\n\t\t\t\trects = this.getClientRects();\n\t\t\t\tif (y < rects[0].top) {\n\t\t\t\t\ty = rects[0].top;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < rects.length; i++) {\n\t\t\t\t\trect = rects[i];\n\t\t\t\t\tif (rect.top <= y && y < rect.bottom) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (x < rect.left) { x = rect.left; }\n\t\t\t\tif (x > rect.right) { x = rect.right - 1; }\n\t\t\t} else {\n\t\t\t\tif (x < 0) { x = 0; }\n\t\t\t\tif (x > (lineRect.right - lineRect.left)) { x = lineRect.right - lineRect.left; }\n\t\t\t}\n\t\t\t\n\t\t\tfunction hitRects(child) {\n\t\t\t\tif (child.ignore) return null;\n\t\t\t\tvar rects1 = that._getClientRects(child, lineRect);\n\t\t\t\tfor (var j = 0; j < rects1.length; j++) {\n\t\t\t\t\tvar rect1 = rects1[j];\n\t\t\t\t\tif (rect1.left <= x && x < rect1.right && (!view._wrapMode || (rect1.top <= y && y <= rect1.bottom))) {\n\t\t\t\t\t\treturn rect1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\tvar offset, lineChild;\n\t\t\tif (this._lastHitChild && this._lastHitChild.parentNode) {\n\t\t\t\t// Search last hit child first, then search around the last hit child\n\t\t\t\toffset = this._lastHitOffset;\n\t\t\t\tlineChild = this._lastHitChild;\n\t\t\t\trect = hitRects(lineChild);\n\t\t\t\tif (!rect ) {\n\t\t\t\t\tvar previousOffset = offset, nextOffset = offset + this._nodeLength(lineChild);\n\t\t\t\t\tvar previousChild = lineChild.previousSibling, nextChild = lineChild.nextSibling;\n\t\t\t\t\twhile (previousChild || nextChild) {\n\t\t\t\t\t\tif (previousChild) {\n\t\t\t\t\t\t\tpreviousOffset -= this._nodeLength(previousChild);\n\t\t\t\t\t\t\tif ((rect = hitRects(previousChild))) {\n\t\t\t\t\t\t\t\tlineChild = previousChild;\n\t\t\t\t\t\t\t\toffset = previousOffset;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousChild = previousChild.previousSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (nextChild) {\n\t\t\t\t\t\t\tif ((rect = hitRects(nextChild))) {\n\t\t\t\t\t\t\t\tlineChild = nextChild;\n\t\t\t\t\t\t\t\toffset = nextOffset;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnextOffset += this._nodeLength(nextChild);\n\t\t\t\t\t\t\tnextChild = nextChild.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Start searching from the beginning of the line\n\t\t\t\toffset = lineStart;\n\t\t\t\tthis.forEach(function(c) {\n\t\t\t\t\tlineChild = c;\n\t\t\t\t\tif ((rect = hitRects(lineChild))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\toffset += this._nodeLength(lineChild);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif (lineChild && rect) {\n\t\t\t\t// Cache the last hit child\n\t\t\t\tthis._lastHitChild = lineChild;\n\t\t\t\tthis._lastHitOffset = offset;\n\n\t\t\t\toffset = hitChild(lineChild, offset, rect);\n\t\t\t}\n\n\t\t\treturn Math.min(lineEnd, Math.max(lineStart, offset));\n\t\t},\n\t\t/** @private */\n\t\tgetNextOffset: function (offset, data) {\n\t\t\tif (data.unit === \"line\") { //$NON-NLS-1$\n\t\t\t\tvar view = this.view;\n\t\t\t\tvar model = view._model;\n\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\tif (data.count > 0) {\n\t\t\t\t\tdata.count--;\n\t\t\t\t\treturn model.getLineEnd(lineIndex);\n\t\t\t\t}\n\t\t\t\tdata.count++;\n\t\t\t\treturn model.getLineStart(lineIndex);\n\t\t\t}\n\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordWS\" || data.unit === \"wordendWS\") { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\treturn this._getNextOffset_W3C(offset, data);\n\t\t\t}\n\t\t\treturn util.isIE ? this._getNextOffset_IE(offset, data) : this._getNextOffset_W3C(offset, data);\n\t\t},\n\t\t/** @private */\n\t\t_getNextOffset_W3C: function (offset, data) {\n\t\t\tfunction _isPunctuation(c) {\n\t\t\t\treturn (33 <= c && c <= 47) || (58 <= c && c <= 64) || (91 <= c && c <= 94) || c === 96 || (123 <= c && c <= 126);\n\t\t\t}\n\t\t\tfunction _isWhitespace(c) {\n\t\t\t\treturn c === 32 || c === 9;\n\t\t\t}\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tvar lineLength = lineText.length;\n\t\t\tvar offsetInLine = offset - lineStart;\n\t\t\tvar c;\n\t\t\tvar step = data.count < 0 ? -1 : 1;\n\t\t\tif (data.unit === \"word\" || data.unit === \"wordend\" || data.unit === \"wordWS\" || data.unit === \"wordendWS\") { //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tvar previousPunctuation, previousLetterOrDigit, punctuation, letterOrDigit;\n\t\t\t\twhile (data.count !== 0) {\n\t\t\t\t\tif (data.count > 0) {\n\t\t\t\t\t\tif (offsetInLine === lineLength) { return lineEnd; }\n\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\tpreviousPunctuation = _isPunctuation(c); \n\t\t\t\t\t\tpreviousLetterOrDigit = !previousPunctuation && !_isWhitespace(c);\n\t\t\t\t\t\toffsetInLine++;\n\t\t\t\t\t\twhile (offsetInLine < lineLength) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\t\tif (data.unit !== \"wordWS\" && data.unit !== \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tpunctuation = _isPunctuation(c);\n\t\t\t\t\t\t\t\tif (data.unit === \"wordend\") { //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tif (!punctuation && previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (punctuation && !previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletterOrDigit  = !punctuation && !_isWhitespace(c);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tletterOrDigit  = !_isWhitespace(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tif (!letterOrDigit && previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (letterOrDigit && !previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousLetterOrDigit = letterOrDigit;\n\t\t\t\t\t\t\tpreviousPunctuation = punctuation;\n\t\t\t\t\t\t\toffsetInLine++;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (offsetInLine === 0) { return lineStart; }\n\t\t\t\t\t\toffsetInLine--;\n\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t\tpreviousPunctuation = _isPunctuation(c); \n\t\t\t\t\t\tpreviousLetterOrDigit = !previousPunctuation && !_isWhitespace(c);\n\t\t\t\t\t\twhile (0 < offsetInLine) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (data.unit !== \"wordWS\" && data.unit !== \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$ \n\t\t\t\t\t\t\t\tpunctuation = _isPunctuation(c);\n\t\t\t\t\t\t\t\tif (data.unit === \"wordend\") { //$NON-NLS-1$\n\t\t\t\t\t\t\t\t\tif (punctuation && !previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!punctuation && previousPunctuation) { break; }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletterOrDigit  = !punctuation && !_isWhitespace(c);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tletterOrDigit  = !_isWhitespace(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.unit === \"wordend\" || data.unit === \"wordendWS\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\t\t\t\tif (letterOrDigit && !previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!letterOrDigit && previousLetterOrDigit) { break; }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousLetterOrDigit = letterOrDigit;\n\t\t\t\t\t\t\tpreviousPunctuation = punctuation;\n\t\t\t\t\t\t\toffsetInLine--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (offsetInLine === 0) {\n\t\t\t\t\t\t\t//get previous line\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata.count -= step;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (data.count !== 0 && (0 <= offsetInLine + step && offsetInLine + step <= lineLength)) {\n\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\tc = lineText.charCodeAt(offsetInLine);\n\t\t\t\t\t// Handle Unicode surrogates\n\t\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\t\tif (0xDFFB <= c && c <= 0xDFFF) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (0xD83C === c) {\n\t\t\t\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\t\t\t\tcontinue; // Skip skin tone modifiers\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (0xFE00 <= c && c <= 0xFE0F) { // Skip variation selectors\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata.count -= step;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lineStart + offsetInLine;\n\t\t},\n\t\t/** @private */\n\t\t_getNextOffset_IE: function (offset, data) {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tvar view = this.view;\n\t\t\tvar model = view._model;\n\t\t\tvar lineIndex = this.lineIndex;\n\t\t\tvar result = 0, range, len;\n\t\t\tvar lineOffset = model.getLineStart(lineIndex);\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar doc = child.ownerDocument;\n\t\t\tvar lineChild;\n\t\t\tvar step = data.count < 0 ? -1 : 1;\n\t\t\tif (offset === model.getLineEnd(lineIndex)) {\n\t\t\t\tlineChild = child.lastChild;\n\t\t\t\twhile (lineChild && lineChild.ignoreChars === lineChild.firstChild.length) {\n\t\t\t\t\tlineChild = lineChild.previousSibling;\n\t\t\t\t}\n\t\t\t\tif (!lineChild) {\n\t\t\t\t\treturn lineOffset;\n\t\t\t\t}\n\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\tlen = range.text.length;\n\t\t\t\trange.moveEnd(data.unit, step);\n\t\t\t\tresult = offset + range.text.length - len;\n\t\t\t} else if (offset === lineOffset && data.count < 0) {\n\t\t\t\tresult = lineOffset;\n\t\t\t} else {\n\t\t\t\tlineChild = child.firstChild;\n\t\t\t\twhile (lineChild) {\n\t\t\t\t\tvar nodeLength = this._nodeLength(lineChild);\n\t\t\t\t\tif (lineOffset + nodeLength > offset) {\n\t\t\t\t\t\trange = doc.body.createTextRange();\n\t\t\t\t\t\tif (offset === lineOffset && data.count < 0) {\n\t\t\t\t\t\t\tvar temp = lineChild.previousSibling;\n\t\t\t\t\t\t\t// skip empty nodes\n\t\t\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\t\t\tif (temp.firstChild && temp.firstChild.length) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttemp = temp.previousSibling;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trange.moveToElementText(temp ? temp : lineChild.previousSibling);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trange.moveToElementText(lineChild);\n\t\t\t\t\t\t\trange.collapse();\n\t\t\t\t\t\t\trange.moveEnd(\"character\", offset - lineOffset); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlen = range.text.length;\n\t\t\t\t\t\trange.moveEnd(data.unit, step);\n\t\t\t\t\t\tresult = offset + range.text.length - len;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tlineOffset = nodeLength + lineOffset;\n\t\t\t\t\tlineChild = lineChild.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar offsetInLine = result - lineStart;\n\t\t\tvar c = lineText.charCodeAt(offsetInLine);\n\t\t\t// Handle Unicode surrogates\n\t\t\tif (0xDC00 <= c && c <= 0xDFFF) {\n\t\t\t\tif (offsetInLine > 0) {\n\t\t\t\t\tc = lineText.charCodeAt(offsetInLine - 1);\n\t\t\t\t\tif (0xD800 <= c && c <= 0xDBFF) {\n\t\t\t\t\t\toffsetInLine += step;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult = offsetInLine + lineStart;\n\t\t\tdata.count -= step;\n\t\t\treturn result;\n\t\t},\n\t\tupdateLinks: function() {\n\t\t\tvar child = this._ensureCreated();\n\t\t\tif (!this.hasLink) { return; }\n\t\t\tvar that = this;\n\t\t\tthis.forEach(function(span) {\n\t\t\t\tvar style = span.viewStyle;\n\t\t\t\tif (style && style.tagName && style.tagName.toLowerCase() === \"a\") { //$NON-NLS-1$\n\t\t\t\t\tchild.replaceChild(that._createSpan(child, span.firstChild.data, style), span);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t},\n\t\t/** @private */\n\t\tdestroy: function() {\n\t\t\tvar div = this._createdDiv;\n\t\t\tif (div) {\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t\tthis._createdDiv = null;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * @class This object describes the options for the text view.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#setOptions}\n\t * {@link orion.editor.TextView#getOptions}\t \n\t * </p>\t\t \n\t * @name orion.editor.TextViewOptions\n\t *\n\t * @property {String|DOMElement} parent the parent element for the view, it can be either a DOM element or an ID for a DOM element.\n\t * @property {orion.editor.TextModel} [model] the text model for the view. If it is not set the view creates an empty {@link orion.editor.TextModel}.\n\t * @property {Boolean} [readonly=false] whether or not the view is read-only.\n\t * @property {Boolean} [fullSelection=true] whether or not the view is in full selection mode.\n\t * @property {Boolean} [tabMode=true] whether or not the tab keypress is consumed by the view or is used for focus traversal.\n\t * @property {Boolean} [expandTab=false] whether or not the tab key inserts white spaces.\n\t * @property {orion.editor.TextTheme} [theme=orion.editor.TextTheme.getTheme()] the TextTheme manager. TODO more info on this\n\t * @property {orion.editor.UndoStack} [undoStack] the Undo Stack.\n\t * @property {String} [themeClass] the CSS class for the view theming.\n\t * @property {Number} [tabSize=8] The number of spaces in a tab.\n\t * @property {Boolean} [overwriteMode=false] whether or not the view is in insert/overwrite mode.\n\t * @property {Boolean} [singleMode=false] whether or not the editor is in single line mode.\n\t * @property {Number} [marginOffset=0] the offset in a line where the print margin should be displayed. <code>0</code> means no print margin.\n\t * @property {Number} [wrapOffset=0] the offset in a line where text should wrap. <code>0</code> means wrap at the client area right edge.\n\t * @property {Boolean} [wrapMode=false] whether or not the view wraps lines.\n\t * @property {Boolean} [wrapable=false] whether or not the view is wrappable.\n\t * @property {Number} [scrollAnimation=0] the time duration in miliseconds for scrolling animation. <code>0</code> means no animation.\n\t * @property {Boolean} [blockCursorVisible=false] whether or not to show the block cursor.\n\t */\n\t/**\n\t * Constructs a new text view.\n\t * \n\t * @param {orion.editor.TextViewOptions} options the view options.\n\t * \n\t * @class A TextView is a user interface for editing text.\n\t * @name orion.editor.TextView\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction TextView (options) {\n\t\tthis._init(options || {});\n\t}\n\t\n\tTextView.prototype = /** @lends orion.editor.TextView.prototype */ {\n\t\t/**\n\t\t * Adds a keyMode to the text view at the specified position.\n\t\t *\n\t\t * @param {orion.editor.KeyMode} mode the editor keyMode.\n\t\t * @param {Number} [index=length] the index.\n\t\t */\n\t\taddKeyMode: function(mode, index) {\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tif (index !== undefined) {\n\t\t\t\tkeyModes.splice(index, 0, mode);\n\t\t\t} else {\n\t\t\t\tkeyModes.push(mode);\n\t\t\t}\n\t\t\t//TODO: API needed for this\n\t\t\tif (mode._modeAdded) {\n\t\t\t\tmode._modeAdded();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adds a ruler to the text view at the specified position.\n\t\t * <p>\n\t\t * The position is relative to the ruler location.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.Ruler} ruler the ruler.\n\t\t * @param {Number} [index=length] the ruler index.\n\t\t */\n\t\taddRuler: function (ruler, index) {\n\t\t\tvar rulers = this._rulers;\n\t\t\tif (index !== undefined) {\n\t\t\t\tvar i, sideIndex;\n\t\t\t\tfor (i = 0, sideIndex=0; i < rulers.length && sideIndex < index; i++) {\n\t\t\t\t\tif (ruler.getLocation() === rulers[i].getLocation()) {\n\t\t\t\t\t\tsideIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trulers.splice(sideIndex, 0, ruler);\n\t\t\t\tindex = sideIndex;\n\t\t\t} else {\n\t\t\t\trulers.push(ruler);\n\t\t\t}\n\t\t\tthis._createRuler(ruler, index);\n\t\t\truler.setView(this);\n\t\t\tthis._update();\n\t\t},\n\t\tcomputeSize: function() {\n\t\t\tvar w = 0, h = 0;\n\t\t\tvar model = this._model, clientDiv = this._clientDiv;\n\t\t\tif (!clientDiv) { return {width: w, height: h}; }\n\t\t\tvar clientWidth = clientDiv.style.width;\n\t\t\t/*\n\t\t\t* Feature in WekKit. Webkit limits the width of the lines\n\t\t\t* computed below to the width of the client div.  This causes\n\t\t\t* the lines to be wrapped even though \"pre\" is set.  The fix\n\t\t\t* is to set the width of the client div to a \"0x7fffffffpx\"\n\t\t\t* before computing the lines width.  Note that this value is\n\t\t\t* reset to the appropriate value further down.\n\t\t\t*/\n\t\t\tif (util.isWebkit) {\n\t\t\t\tclientDiv.style.width = \"0x7fffffffpx\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tfor (var lineIndex=0; lineIndex<lineCount; lineIndex++) {\n\t\t\t\tvar line = this._getLine(lineIndex);\n\t\t\t\tvar rect = line.getBoundingClientRect();\n\t\t\t\tw = Math.max(w, rect.right - rect.left);\n\t\t\t\th += rect.bottom - rect.top;\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tif (util.isWebkit) {\n\t\t\t\tclientDiv.style.width = clientWidth;\n\t\t\t}\n\t\t\tvar viewPadding = this._getViewPadding();\n\t\t\tw += viewPadding.right + viewPadding.left + this._metrics.scrollWidth;\n\t\t\th += viewPadding.bottom + viewPadding.top + this._metrics.scrollWidth;\n\t\t\treturn {width: w, height: h};\n\t\t},\n\t\t/**\n\t\t * Converts the given rectangle from one coordinate spaces to another.\n\t\t * <p>The supported coordinate spaces are:\n\t\t * <ul>\n\t\t *   <li>\"document\" - relative to document, the origin is the top-left corner of first line</li>\n\t\t *   <li>\"page\" - relative to html page that contains the text view</li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * <p>All methods in the view that take or return a position are in the document coordinate space.</p>\n\t\t *\n\t\t * @param rect the rectangle to convert.\n\t\t * @param rect.x the x of the rectangle.\n\t\t * @param rect.y the y of the rectangle.\n\t\t * @param rect.width the width of the rectangle.\n\t\t * @param rect.height the height of the rectangle.\n\t\t * @param {String} from the source coordinate space.\n\t\t * @param {String} to the destination coordinate space.\n\t\t *\n\t\t * @see orion.editor.TextView#getLocationAtOffset\n\t\t * @see orion.editor.TextView#getOffsetAtLocation\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t */\n\t\tconvert: function(rect, from, to) {\n\t\t\tif (!this._clientDiv) { return rect; }\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\tif (from === \"document\") { //$NON-NLS-1$\n\t\t\t\tif (rect.x !== undefined) {\n\t\t\t\t\trect.x += - _scroll.x + viewRect.left + viewPad.left;\n\t\t\t\t}\n\t\t\t\tif (rect.y !== undefined) {\n\t\t\t\t\trect.y += - _scroll.y + viewRect.top + viewPad.top;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//At this point rect is in the widget coordinate space\n\t\t\tif (to === \"document\") { //$NON-NLS-1$\n\t\t\t\tif (rect.x !== undefined) {\n\t\t\t\t\trect.x += _scroll.x - viewRect.left - viewPad.left;\n\t\t\t\t}\n\t\t\t\tif (rect.y !== undefined) {\n\t\t\t\t\trect.y += _scroll.y - viewRect.top - viewPad.top;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rect;\n\t\t},\n\t\t/**\n\t\t * Copies the selected text to the clipboard in plain text format.\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tcopy: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doCopy();\n\t\t},\n\t\t/**\n\t\t * Moves the selected text to the clipboard in plain text format.\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tcut: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doCut();\n\t\t},\n\t\t/**\n\t\t * Destroys the text view. \n\t\t * <p>\n\t\t * Removes the view from the page and frees all resources created by the view.\n\t\t * Calling this function causes the \"Destroy\" event to be fire so that all components\n\t\t * attached to view can release their references.\n\t\t * </p>\n\t\t *\n\t\t * @see orion.editor.TextView#onDestroy\n\t\t */\n\t\tdestroy: function() {\n\t\t\t/* Destroy rulers*/\n\t\t\tfor (var i=0; i< this._rulers.length; i++) {\n\t\t\t\tthis._rulers[i].setView(null);\n\t\t\t}\n\t\t\tthis.rulers = null;\n\t\t\t\n\t\t\tthis._destroyView();\n\n\t\t\tvar e = {type: \"Destroy\"}; //$NON-NLS-1$\n\t\t\tthis.onDestroy(e);\n\n\t\t\tthis._parent = null;\n\t\t\tif (this._model && this._model.destroy) {\n\t\t\t\tthis._model.destroy();\n\t\t\t}\n\t\t\tthis._model = null;\n\t\t\tthis._theme = null;\n\t\t\tthis._selection = null;\n\t\t\tthis._doubleClickSelection = null;\n\t\t\tthis._keyModes = null;\n\t\t\tthis._actions = null;\n\t\t},\n\t\t/**\n\t\t * Gives focus to the text view.\n\t\t */\n\t\tfocus: function() {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\t/*\n\t\t\t* Feature in Chrome. When focus is called in the clientDiv without\n\t\t\t* setting selection the browser will set the selection to the first dom \n\t\t\t* element, which can be above the client area. When this happen the \n\t\t\t* browser also scrolls the window to show that element.\n\t\t\t* The fix is to call _updateDOMSelection() before calling focus().\n\t\t\t*/\n\t\t\tthis._updateDOMSelection();\n\t\t\tthis._clientDiv.focus();\n\t\t\t/*\n\t\t\t* Feature in Safari. When focus is called the browser selects the clientDiv\n\t\t\t* itself. The fix is to call _updateDOMSelection() after calling focus().\n\t\t\t*/\n\t\t\tthis._updateDOMSelection();\n\t\t},\n\t\t/**\n\t\t * Check if the text view has focus.\n\t\t *\n\t\t * @returns {Boolean} <code>true</code> if the text view has focus, otherwise <code>false</code>.\n\t\t */\n\t\thasFocus: function() {\n\t\t\treturn this._hasFocus;\n\t\t},\n\t\t/**\n\t\t * Returns the action description for a given action ID.\n\t\t *\n\t\t * @returns {orion.editor.ActionDescrition} the action description\n\t\t */\n\t\tgetActionDescription: function(actionID) {\n\t\t\tvar action = this._actions[actionID];\n\t\t\tif (action) {\n\t\t\t\treturn action.actionDescription;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t\t/**\n\t\t * Returns all action IDs defined in the text view.\n\t\t * <p>\n\t\t * There are two types of actions, the predefined actions of the view \n\t\t * and the actions added by application code.\n\t\t * </p>\n\t\t * <p>\n\t\t * The predefined actions are:\n\t\t * <ul>\n\t\t *   <li>Navigation actions. These actions move the caret collapsing the selection.</li>\n\t\t *     <ul>\n\t\t *       <li>\"lineUp\" - moves the caret up by one line</li>\n\t\t *       <li>\"lineDown\" - moves the caret down by one line</li>\n\t\t *       <li>\"lineStart\" - moves the caret to beginning of the current line</li>\n\t\t *       <li>\"lineEnd\" - moves the caret to end of the current line </li>\n\t\t *       <li>\"charPrevious\" - moves the caret to the previous character</li>\n\t\t *       <li>\"charNext\" - moves the caret to the next character</li>\n\t\t *       <li>\"pageUp\" - moves the caret up by one page</li>\n\t\t *       <li>\"pageDown\" - moves the caret down by one page</li>\n\t\t *       <li>\"wordPrevious\" - moves the caret to the previous word</li>\n\t\t *       <li>\"wordNext\" - moves the caret to the next word</li>\n\t\t *       <li>\"textStart\" - moves the caret to the beginning of the document</li>\n\t\t *       <li>\"textEnd\" - moves the caret to the end of the document</li>\n\t\t *     </ul>\n\t\t *   <li>Selection actions. These actions move the caret extending the selection.</li>\n\t\t *     <ul>\n\t\t *       <li>\"selectLineUp\" - moves the caret up by one line</li>\n\t\t *       <li>\"selectLineDown\" - moves the caret down by one line</li>\n\t\t *       <li>\"selectLineStart\" - moves the caret to beginning of the current line</li>\n\t\t *       <li>\"selectLineEnd\" - moves the caret to end of the current line </li>\n\t\t *       <li>\"selectCharPrevious\" - moves the caret to the previous character</li>\n\t\t *       <li>\"selectCharNext\" - moves the caret to the next character</li>\n\t\t *       <li>\"selectPageUp\" - moves the caret up by one page</li>\n\t\t *       <li>\"selectPageDown\" - moves the caret down by one page</li>\n\t\t *       <li>\"selectWordPrevious\" - moves the caret to the previous word</li>\n\t\t *       <li>\"selectWordNext\" - moves the caret to the next word</li>\n\t\t *       <li>\"selectTextStart\" - moves the caret to the beginning of the document</li>\n\t\t *       <li>\"selectTextEnd\" - moves the caret to the end of the document</li>\n\t\t *       <li>\"selectAll\" - selects the entire document</li>\n\t\t *     </ul>\n\t\t *   <li>Edit actions. These actions modify the text view text</li>\n\t\t *     <ul>\n\t\t *       <li>\"deletePrevious\" - deletes the character preceding the caret</li>\n\t\t *       <li>\"deleteNext\" - deletes the charecter following the caret</li>\n\t\t *       <li>\"deleteWordPrevious\" - deletes the word preceding the caret</li>\n\t\t *       <li>\"deleteWordNext\" - deletes the word following the caret</li>\n\t\t *       <li>\"deleteLineStart\" - deletes characteres to the beginning of the line</li>\n\t\t *       <li>\"deleteLineEnd\" - deletes characteres to the end of the line</li>\n\t\t *       <li>\"tab\" - inserts a tab character at the caret</li>\n\t\t *       <li>\"shiftTab\" - noop</li>\n\t\t *       <li>\"enter\" - inserts a line delimiter at the caret</li>\n\t\t *       <li>\"uppercase\" - upper case the text at the caret</li>\n\t\t *       <li>\"lowercase\" - lower case the text at the caret</li>\n\t\t *       <li>\"capitalize\" - capitilize case the text at the caret</li>\n\t\t *       <li>\"reversecase\" - reverse the case the text at the caret</li>\n\t\t *     </ul>\n\t\t *   <li>Clipboard actions. These actions modify the view text as well</li>\n\t\t *     <ul>\n\t\t *       <li>\"copy\" - copies the selected text to the clipboard</li>\n\t\t *       <li>\"cut\" - copies the selected text to the clipboard and deletes the selection</li>\n\t\t *       <li>\"paste\" - replaces the selected text with the clipboard contents</li>\n\t\t *     </ul>\n\t\t *   <li>Scrolling actions.</li>\n\t\t *     <ul>\n\t\t *       <li>\"scrollLineUp\" - scrolls the view up by one line</li>\n\t\t *       <li>\"scrollLineDown\" - scrolls the view down by one line</li>\n\t\t *       <li>\"scrollPageUp\" - scrolls the view up by one page</li>\n\t\t *       <li>\"scrollPageDown\" - scrolls the view down by one page</li>\n\t\t *       <li>\"scrollTextStart\" - scrolls the view to the beginning of the document</li>\n\t\t *       <li>\"scrollTextEnd\" - scrolls the view to the end of the document</li>\n\t\t *     </ul>\n\t\t *   <li>Mode actions.</li>\n\t\t *     <ul>\n\t\t *       <li>\"toggleTabMode\" - toggles tab mode.</li>\n\t\t *       <li>\"toggleWrapMode\" - toggles wrap mode.</li>\n\t\t *       <li>\"toggleOverwriteMode\" - toggles overwrite mode.</li>\n\t\t *     </ul>\n\t\t * </ul>\n\t\t * </p>\n\t\t * \n\t\t * @param {Boolean} [defaultAction=false] whether or not the predefined actions are included.\n\t\t * @returns {String[]} an array of action IDs defined in the text view.\n\t\t *\n\t\t * @see orion.editor.TextView#invokeAction\n\t\t * @see orion.editor.TextView#setAction\n\t\t * @see orion.editor.TextView#setKeyBinding\n\t\t * @see orion.editor.TextView#getKeyBindings\n\t\t */\n\t\tgetActions: function (defaultAction) {\n\t\t\tvar result = [];\n\t\t\tvar actions = this._actions;\n\t\t\tfor (var i in actions) {\n\t\t\t\tif (actions.hasOwnProperty(i)) {\n\t\t\t\t\tif (!defaultAction && actions[i].defaultHandler) { continue; }\n\t\t\t\t\tresult.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns the bottom index.\n\t\t * <p>\n\t\t * The bottom index is the line that is currently at the bottom of the view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view. The parameter\n\t\t * <code>fullyVisible</code> determines whether to return only fully visible lines. \n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} [fullyVisible=false] if <code>true</code>, returns the index of the last fully visible line. This\n\t\t *    parameter is ignored if the view is not big enough to show one line.\n\t\t * @returns {Number} the index of the bottom line.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopIndex\n\t\t * @see orion.editor.TextView#setTopIndex\n\t\t */\n\t\tgetBottomIndex: function(fullyVisible) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getBottomIndex(fullyVisible);\n\t\t},\n\t\t/**\n\t\t * Returns the bottom pixel.\n\t\t * <p>\n\t\t * The bottom pixel is the pixel position that is currently at\n\t\t * the bottom edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the bottom pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetBottomPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().y + this._getClientHeight();\n\t\t},\n\t\t/**\n\t\t * Returns the caret offset relative to the start of the document.\n\t\t *\n\t\t * @returns {Number} the caret offset relative to the start of the document.\n\t\t *\n\t\t * @see orion.editor.TextView#setCaretOffset\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tgetCaretOffset: function () {\n\t\t\tvar s = this._getSelection();\n\t\t\treturn s.getCaret();\n\t\t},\n\t\t/**\n\t\t * Returns the client area.\n\t\t * <p>\n\t\t * The client area is the portion in pixels of the document that is visible. The\n\t\t * client area position is relative to the beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Object} the client area rectangle {x, y, width, height}.\n\t\t *\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#getHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetClientArea: function() {\n\t\t\tif (!this._clientDiv) { return {x: 0, y: 0, width: 0, height: 0}; }\n\t\t\tvar _scroll = this._getScroll();\n\t\t\treturn {x: _scroll.x, y: _scroll.y, width: this._getClientWidth(), height: this._getClientHeight()};\n\t\t},\n\t\t/**\n\t\t * Returns the horizontal pixel.\n\t\t * <p>\n\t\t * The horizontal pixel is the pixel position that is currently at\n\t\t * the left edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the horizontal pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#setHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetHorizontalPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().x;\n\t\t},\n\t\t/**\n\t\t * Returns all the key bindings associated to the given action ID.\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @returns {orion.KeyBinding[]} the array of key bindings associated to the given action ID.\n\t\t *\n\t\t * @see orion.editor.TextView#setKeyBinding\n\t\t * @see orion.editor.TextView#setAction\n\t\t */\n\t\tgetKeyBindings: function (actionID) {\n\t\t\tvar result = [];\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (var i = 0; i < keyModes.length; i++) {\n\t\t\t\tresult = result.concat(keyModes[i].getKeyBindings(actionID));\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns all the key modes added to text view.\n\t\t *\n\t\t * @returns {orion.editor.KeyMode[]} the array of key modes.\n\t\t *\n\t\t * @see orion.editor.TextView#addKeyMode\n\t\t * @see orion.editor.TextView#removeKeyMode\n\t\t */\n\t\tgetKeyModes: function() {\n\t\t\treturn this._keyModes.slice(0);\n\t\t},\n\t\t/**\n\t\t * Returns the line height for a given line index.  Returns the default line\n\t\t * height if the line index is not specified.\n\t\t *\n\t\t * @param {Number} [lineIndex] the line index.\n\t\t * @returns {Number} the height of the line in pixels.\n\t\t *\n\t\t * @see orion.editor.TextView#getLinePixel\n\t\t */\n\t\tgetLineHeight: function(lineIndex) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLineHeight(lineIndex);\n\t\t},\n\t\t/**\n\t\t * Returns the line index for a given line pixel position relative to the document.\n\t\t *\n\t\t * @param {Number} [y] the line pixel.\n\t\t * @returns {Number} the line index for the specified pixel position.\n\t\t *\n\t\t * @see orion.editor.TextView#getLinePixel\n\t\t */\n\t\tgetLineIndex: function(y) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLineIndex(y);\n\t\t},\n\t\t/**\n\t\t * @name isValidTextPosition\n\t\t * @description Return whether the given x/y pixel position, relative to the document, is inside of document text. \n\t\t * \t\t\t\tThis tests both whether the y position is below the text lines of the document as we as whether the\n\t\t * \t\t\t\tx position is within the text of the line.\n\t\t * @function\n\t\t * @param x {Number} [x] the x pixel position\n\t\t * @param y {Number} [y] the line pixel position\n\t\t * @returns returns {Boolean} true if the pixel position is over text content\n\t\t */\n\t\tisValidTextPosition: function(x, y){\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\t// Check if we are within a valid line\n\t\t\tvar lineIndex = this._getLineIndex(y, true);\n\t\t\tif (lineIndex < 0){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Get the closest offset to the position\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = this.getOffsetAtLocation(x, y);\n\t\t\t// If the closest offset is to the left of the character's bounds then position is outside the text on the line\n\t\t\tvar bounds = line.getBoundingClientRect(offset);\n\t\t\tline.destroy();\n\t\t\tif (x > bounds.right){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * Returns the top pixel position of a given line index relative to the beginning\n\t\t * of the document.\n\t\t * <p>\n\t\t * Clamps out of range indices.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} lineIndex the line index.\n\t\t * @returns {Number} the pixel position of the line.\n\t\t *\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#getLineIndex\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetLinePixel: function(lineIndex) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getLinePixel(lineIndex);\n\t\t},\n\t\t/**\n\t\t * Returns the {x, y} pixel location of the top-left corner of the character\n\t\t * bounding box at the specified offset in the document.  The pixel location\n\t\t * is relative to the document.\n\t\t * <p>\n\t\t * Clamps out of range offsets.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} offset the character offset\n\t\t * @returns {Object} the {x, y} pixel location of the given offset.\n\t\t *\n\t\t * @see orion.editor.TextView#getOffsetAtLocation\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetLocationAtOffset: function(offset) {\n\t\t\tif (!this._clientDiv) { return {x: 0, y: 0}; }\n\t\t\tvar model = this._model;\n\t\t\toffset = Math.min(Math.max(0, offset), model.getCharCount());\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar rect = line.getBoundingClientRect(offset);\n\t\t\tline.destroy();\n\t\t\tvar x = rect.left;\n\t\t\tvar y = this._getLinePixel(lineIndex) + rect.top;\n\t\t\treturn {x: x, y: y};\n\t\t},\n\t\t/**\n\t\t * Returns the next character offset after the given offset and options\n\t\t *\n\t\t * @param {Number} offset the offset to start from\n\t\t * @param {Object} options\n\t\t *   { unit: the type of unit to advance to (eg \"character\", \"word\", \"wordend\", \"wordWS\", \"wordendWS\"),\n\t\t *    count: the number of units to advance (negative to advance backwards) }\n\t\t * @returns {Number} the next character offset\n\t\t */\n\t\tgetNextOffset: function(offset, options) {\n\t\t\tvar selection = new Selection(offset, offset, false);\n\t\t\tthis._doMove(options, selection);\n\t\t\treturn selection.getCaret();\n\t\t},\n\t\t/**\n\t\t * Returns the specified view options.\n\t\t * <p>\n\t\t * The returned value is either a <code>orion.editor.TextViewOptions</code> or an option value. An option value is returned when only one string parameter\n\t\t * is specified. A <code>orion.editor.TextViewOptions</code> is returned when there are no paremeters, or the parameters are a list of options names or a\n\t\t * <code>orion.editor.TextViewOptions</code>. All view options are returned when there no paremeters.\n\t\t * </p>\n\t\t *\n\t\t * @param {String|orion.editor.TextViewOptions} [options] The options to return.\n\t\t * @return {Object|orion.editor.TextViewOptions} The requested options or an option value.\n\t\t *\n\t\t * @see orion.editor.TextView#setOptions\n\t\t */\n\t\tgetOptions: function() {\n\t\t\tvar options;\n\t\t\tif (arguments.length === 0) {\n\t\t\t\toptions = this._defaultOptions();\n\t\t\t} else if (arguments.length === 1) {\n\t\t\t\tvar arg = arguments[0];\n\t\t\t\tif (typeof arg === \"string\") { //$NON-NLS-1$\n\t\t\t\t\treturn clone(this[\"_\" + arg]); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\toptions = arg;\n\t\t\t} else {\n\t\t\t\toptions = {};\n\t\t\t\tfor (var index in arguments) {\n\t\t\t\t\tif (arguments.hasOwnProperty(index)) {\n\t\t\t\t\t\toptions[arguments[index]] = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var option in options) {\n\t\t\t\tif (options.hasOwnProperty(option)) {\n\t\t\t\t\toptions[option] = clone(this[\"_\" + option]); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t},\n\t\t/**\n\t\t * Returns the text model of the text view.\n\t\t *\n\t\t * @returns {orion.editor.TextModel} the text model of the view.\n\t\t */\n\t\tgetModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Returns the character offset nearest to the given pixel location.  The\n\t\t * pixel location is relative to the document.\n\t\t *\n\t\t * @param x the x of the location\n\t\t * @param y the y of the location\n\t\t * @returns {Number} the character offset at the given location.\n\t\t *\n\t\t * @see orion.editor.TextView#getLocationAtOffset\n\t\t */\n\t\tgetOffsetAtLocation: function(x, y) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\tvar lineIndex = this._getLineIndex(y);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = line.getOffset(x, y - this._getLinePixel(lineIndex));\n\t\t\tline.destroy();\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * @name getLineAtOffset\n\t\t * @description Compute the editor line number for the given offset\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} offset The offset into the editor\n\t\t * @returns {Number} Returns the line number in the editor corresponding to the given offset or <code>-1</code> if the offset is \n\t\t * out of range\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\treturn this.getModel().getLineAtOffset(offset);\n\t\t},\n\t\t/**\n\t\t * @name getLineStart\n\t\t * @description Compute the editor start offset of the given line number\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} line The line number in the editor\n\t\t * @returns {Number} Returns the start offset of the given line number in the editor.\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineStart: function(line) {\n\t\t\treturn this.getModel().getLineStart(line);\n\t\t},\n\t\t/**\n\t\t * Get the view rulers.\n\t\t *\n\t\t * @returns {orion.editor.Ruler[]} the view rulers\n\t\t *\n\t\t * @see orion.editor.TextView#addRuler\n\t\t */\n\t\tgetRulers: function() {\n\t\t\treturn this._rulers.slice(0);\n\t\t},\n\t\t/**\n\t\t * Returns the text view selection.\n\t\t * <p>\n\t\t * The selection is defined by a start and end character offset relative to the\n\t\t * document. The character at end offset is not included in the selection.\n\t\t * </p>\n\t\t * \n\t\t * @returns {orion.editor.Selection} the view selection\n\t\t *\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelection: function () {\n\t\t\treturn this._getSelection();\n\t\t},\n\t\tgetSelections: function () {\n\t\t\treturn this._getSelections();\n\t\t},\n\t\t/**\n\t\t * Returns the text view selection text.\n\t\t * <p>\n\t\t * If there are multiple selection ranges, the result is concatenated with the specified delimiter.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} delimiter The offset into the editor\n\t\t * @returns {String} the view selection text\n\t\t * @since 10.0\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelectionText: function(delimiter) {\n\t\t\tvar text = [];\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty()) {\n\t\t\t\t\ttext.push(that._getBaseText(selection.start, selection.end));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn text.join(delimiter !== undefined ? delimiter : this._model.getLineDelimiter());\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The text does not include the character at the end offset.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextView#setText \t\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tvar model = this._model;\n\t\t\treturn model.getText(start, end);\n\t\t},\n\t\t/**\n\t\t * Returns the top index.\n\t\t * <p>\n\t\t * The top index is the line that is currently at the top of the view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view. The parameter\n\t\t * <code>fullyVisible</code> determines whether to return only fully visible lines. \n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} [fullyVisible=false] if <code>true</code>, returns the index of the first fully visible line. This\n\t\t *    parameter is ignored if the view is not big enough to show one line.\n\t\t * @returns {Number} the index of the top line.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomIndex\n\t\t * @see orion.editor.TextView#setTopIndex\n\t\t */\n\t\tgetTopIndex: function(fullyVisible) {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getTopIndex(fullyVisible);\n\t\t},\n\t\t/**\n\t\t * Returns the top pixel.\n\t\t * <p>\n\t\t * The top pixel is the pixel position that is currently at\n\t\t * the top edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @returns {Number} the top pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#setTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tgetTopPixel: function() {\n\t\t\tif (!this._clientDiv) { return 0; }\n\t\t\treturn this._getScroll().y;\n\t\t},\n\t\t/**\n\t\t * Executes the action handler associated with the given action ID.\n\t\t * <p>\n\t\t * The application defined action takes precedence over predefined actions unless\n\t\t * the <code>defaultAction</code> paramater is <code>true</code>.\n\t\t * </p>\n\t\t * <p>\n\t\t * If the application defined action returns <code>false</code>, the text view predefined\n\t\t * action is executed if present.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @param {Boolean} [defaultAction] whether to always execute the predefined action only.\n\t\t * @param {Object} [actionOptions] action specific options to be passed to the action handlers.\n\t\t * @returns {Boolean} <code>true</code> if the action was executed.\n\t\t *\n\t\t * @see orion.editor.TextView#setAction\n\t\t * @see orion.editor.TextView#getActions\n\t\t */\n\t\tinvokeAction: function (actionID, defaultAction, actionOptions) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar action = this._actions[actionID];\n\t\t\tif (action) {\n\t\t\t\tif (action.actionDescription && action.actionDescription.id) {\n\t\t\t\t\tmMetrics.logEvent(\"editor\", \"action\", action.actionDescription.id); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t}\n\t\t\t\tif (!defaultAction && action.handler) {\n\t\t\t\t\tif (action.handler(actionOptions)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (action.defaultHandler) {\n\t\t\t\t\treturn typeof action.defaultHandler(actionOptions) === \"boolean\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t* Returns if the view is destroyed.\n\t\t* @returns {Boolean} <code>true</code> if the view is destroyed.\n\t\t*/\n\t\tisDestroyed: function () {\n\t\t\treturn !this._clientDiv;\n\t\t},\n\t\t/** \n\t\t * @class This is the event sent when the user right clicks or otherwise invokes the context menu of the view. \n\t\t * <p> \n\t\t * <b>See:</b><br/> \n\t\t * {@link orion.editor.TextView}<br/> \n\t\t * {@link orion.editor.TextView#event:onContextMenu} \n\t\t * </p> \n\t\t * \n\t\t * @name orion.editor.ContextMenuEvent \n\t\t * \n\t\t * @property {Number} x The pointer location on the x axis, relative to the document the user is editing. \n\t\t * @property {Number} y The pointer location on the y axis, relative to the document the user is editing. \n\t\t * @property {Number} screenX The pointer location on the x axis, relative to the screen. This is copied from the DOM contextmenu event.screenX property. \n\t\t * @property {Number} screenY The pointer location on the y axis, relative to the screen. This is copied from the DOM contextmenu event.screenY property. \n\t\t * @property {Boolean} defaultPrevented Determines whether the user agent context menu should be shown. It is shown by default.\n\t\t * @property {Function} preventDefault If called prevents the user agent context menu from showing.\n\t\t */ \n\t\t/** \n\t\t * This event is sent when the user invokes the view context menu. \n\t\t * \n\t\t * @event \n\t\t * @param {orion.editor.ContextMenuEvent} contextMenuEvent the event \n\t\t */ \n\t\tonContextMenu: function(contextMenuEvent) {\n\t\t\treturn this.dispatchEvent(contextMenuEvent); \n\t\t}, \n\t\tonDragStart: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDrag: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragEnd: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragEnter: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragOver: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDragLeave: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\tonDrop: function(dragEvent) {\n\t\t\treturn this.dispatchEvent(dragEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view is destroyed.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onDestroy}\n\t\t * </p>\n\t\t * @name orion.editor.DestroyEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view has been destroyed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.DestroyEvent} destroyEvent the event\n\t\t *\n\t\t * @see orion.editor.TextView#destroy\n\t\t */\n\t\tonDestroy: function(destroyEvent) {\n\t\t\treturn this.dispatchEvent(destroyEvent);\n\t\t},\n\t\t/**\n\t\t * @description This event is sent when the file is being saved\n\t\t * @function\n\t\t * @param {Object} savingEvent the event\n\t\t * @since 8.0\n\t\t */\n\t\tonSaving: function onSaving(savingEvent) {\n\t\t    return this.dispatchEvent(savingEvent);\n\t\t},\n\t\t/**\n\t\t * @description This event is sent when the file has been saved\n\t\t * @function\n\t\t * @param {Object} inputChangedEvent the event\n\t\t * @since 8.0\n\t\t */\n\t\tonInputChanged: function onInputChanged(inputChangedEvent) {\n\t\t    return this.dispatchEvent(inputChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @class This object is used to define style information for the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.Style\n\t\t * \n\t\t * @property {String} styleClass A CSS class name.\n\t\t * @property {Object} style An object with CSS properties.\n\t\t * @property {String} tagName A DOM tag name.\n\t\t * @property {Object} attributes An object with DOM attributes.\n\t\t */\n\t\t/**\n\t\t * @class This object is used to style range.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.StyleRange\n\t\t * \n\t\t * @property {Number} start The start character offset, relative to the document, where the style should be applied.\n\t\t * @property {Number} end The end character offset (exclusive), relative to the document, where the style should be applied.\n\t\t * @property {orion.editor.Style} style The style for the range.\n\t\t */\n\t\t/**\n\t\t * @class This is the event sent when the text view needs the style information for a line.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onLineStyle}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.LineStyleEvent\n\t\t * \n\t\t * @property {orion.editor.TextView} textView The text view.\t\t \n\t\t * @property {Number} lineIndex The line index.\n\t\t * @property {String} lineText The line text.\n\t\t * @property {Number} lineStart The character offset, relative to document, of the first character in the line.\n\t\t * @property {orion.editor.Style} style The style for the entire line (output argument).\n\t\t * @property {orion.editor.StyleRange[]} ranges An array of style ranges for the line (output argument).\t\t \n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view needs the style information for a line.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.LineStyleEvent} lineStyleEvent the event\n\t\t */\n\t\tonLineStyle: function(lineStyleEvent) {\n\t\t\treturn this.dispatchEvent(lineStyleEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent for all keyboard events.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyDown}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyPress}<br/>\n\t\t * {@link orion.editor.TextView#event:onKeyUp}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.KeyEvent\n\t\t * \n\t\t * @property {String} type The type of event.\n\t\t * @property {DOMEvent} event The key DOM event.\n\t\t * @property {Boolean} defaultPrevented Determines whether the user agent context menu should be shown. It is shown by default.\n\t\t * @property {Function} preventDefault If called prevents the user agent context menu from showing.\n\t\t */\n\t\t/**\n\t\t * This event is sent for key down events.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyDown: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * This event is sent for key press events. Key press events are only sent\n\t\t * for printable characters.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyPress: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * This event is sent for key up events.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.KeyEvent} keyEvent the event\n\t\t */\n\t\tonKeyUp: function(keyEvent) {\n\t\t\treturn this.dispatchEvent(keyEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text in the model has changed.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModelChanged}<br/>\n\t\t * {@link orion.editor.TextModel#onChanged}\n\t\t * </p>\n\t\t * @name orion.editor.ModelChangedEvent\n\t\t * \n\t\t * @property {Number} start The character offset in the model where the change has occurred.\n\t\t * @property {Number} removedCharCount The number of characters removed from the model.\n\t\t * @property {Number} addedCharCount The number of characters added to the model.\n\t\t * @property {Number} removedLineCount The number of lines removed from the model.\n\t\t * @property {Number} addedLineCount The number of lines added to the model.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text in the model has changed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModelChangedEvent} modelChangedEvent the event\n\t\t */\n\t\tonModelChanged: function(modelChangedEvent) {\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text in the model is about to change.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModelChanging}<br/>\n\t\t * {@link orion.editor.TextModel#onChanging}\n\t\t * </p>\n\t\t * @name orion.editor.ModelChangingEvent\n\t\t * \n\t\t * @property {String} text The text that is about to be inserted in the model.\n\t\t * @property {Number} start The character offset in the model where the change will occur.\n\t\t * @property {Number} removedCharCount The number of characters being removed from the model.\n\t\t * @property {Number} addedCharCount The number of characters being added to the model.\n\t\t * @property {Number} removedLineCount The number of lines being removed from the model.\n\t\t * @property {Number} addedLineCount The number of lines being added to the model.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text in the model is about to change.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModelChangingEvent} modelChangingEvent the event\n\t\t */\n\t\tonModelChanging: function(modelChangingEvent) {\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text is modified by the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onModify}\n\t\t * </p>\n\t\t * @name orion.editor.ModifyEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view has changed text in the model.\n\t\t * <p>\n\t\t * If the text is changed directly through the model API, this event\n\t\t * is not sent.\n\t\t * </p>\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ModifyEvent} modifyEvent the event\n\t\t */\n\t\tonModify: function(modifyEvent) {\n\t\t\treturn this.dispatchEvent(modifyEvent);\n\t\t},\n\t\tonMouseDown: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseUp: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseMove: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseOver: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonMouseOut: function(mouseEvent) {\n\t\t\treturn this.dispatchEvent(mouseEvent);\n\t\t},\n\t\tonTouchStart: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonTouchMove: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonTouchEnd: function(touchEvent) {\n\t\t\treturn this.dispatchEvent(touchEvent);\n\t\t},\n\t\tonOptions: function(optionsEvent) {\n\t\t\treturn this.dispatchEvent(optionsEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the selection changes in the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onSelection}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.SelectionEvent\n\t\t * \n\t\t * @property {orion.editor.Selection} oldValue The old selection.\n\t\t * @property {orion.editor.Selection} newValue The new selection.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view selection has changed.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.SelectionEvent} selectionEvent the event\n\t\t */\n\t\tonSelection: function(selectionEvent) {\n\t\t\treturn this.dispatchEvent(selectionEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view scrolls.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onScroll}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.ScrollEvent\n\t\t * \n\t\t * @property {Object} oldValue The old scroll {x,y}.\n\t\t * @property {Object} newValue The new scroll {x,y}.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view scrolls vertically or horizontally.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.ScrollEvent} scrollEvent the event\n\t\t */\n\t\tonScroll: function(scrollEvent) {\n\t\t\treturn this.dispatchEvent(scrollEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text is about to be modified by the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onVerify}\n\t\t * </p>\n\t\t * @name orion.editor.VerifyEvent\n\t\t * \n\t\t * @property {String} text The text being inserted.\n\t\t * @property {Number} start The start offset of the text range to be replaced.\n\t\t * @property {Number} end The end offset (exclusive) of the text range to be replaced.\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view is about to change text in the model.\n\t\t * <p>\n\t\t * If the text is changed directly through the model API, this event\n\t\t * is not sent.\n\t\t * </p>\n\t\t * <p>\n\t\t * Listeners are allowed to change these parameters. Setting text to null\n\t\t * or undefined stops the change.\n\t\t * </p>\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.VerifyEvent} verifyEvent the event\n\t\t */\n\t\tonVerify: function(verifyEvent) {\n\t\t\treturn this.dispatchEvent(verifyEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view is focused.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onFocus}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.FocusEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view is focused.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.FocusEvent} focusEvent the event\n\t\t */\n\t\tonFocus: function(focusEvent) {\n\t\t\treturn this.dispatchEvent(focusEvent);\n\t\t},\n\t\t/**\n\t\t * @class This is the event sent when the text view goes out of focus.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#event:onBlur}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.BlurEvent\n\t\t */\n\t\t/**\n\t\t * This event is sent when the text view goes out of focus.\n\t\t *\n\t\t * @event\n\t\t * @param {orion.editor.BlurEvent} blurEvent the event\n\t\t */\n\t\tonBlur: function(blurEvent) {\n\t\t\treturn this.dispatchEvent(blurEvent);\n\t\t},\n\t\t/**\n\t\t * Replaces the selection with the text on the clipboard or, if there is no selection, inserts the text at the current caret offset.\n\t\t * <p>\n\t\t * If the single mode is on and the clipboard text contains more than one line, all lines will be concatenated.\n\t\t * </p>\n\t\t * @returns {Boolean} <code>true</code> if the operation succeded.\n\t\t * @since 10.0\n\t\t */\n\t\tpaste: function() {\n\t\t\tif (!this._clientDiv) { return false; }\n\t\t\treturn this._doPaste();\n\t\t},\n\t\t/**\n\t\t * Redraws the entire view, including rulers.\n\t\t *\n\t\t * @see orion.editor.TextView#redrawLines\n\t\t * @see orion.editor.TextView#redrawRange\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredraw: function() {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar lineCount = this._model.getLineCount();\n\t\t\tthis.redrawRulers(0, lineCount);\n\t\t\tthis.redrawLines(0, lineCount); \n\t\t},\n\t\tredrawRulers: function(startLine, endLine) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar rulers = this.getRulers();\n\t\t\tfor (var i = 0; i < rulers.length; i++) {\n\t\t\t\tthis.redrawLines(startLine, endLine, rulers[i]);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Redraws the text in the given line range.\n\t\t * <p>\n\t\t * The line at the end index is not redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [startLine=0] the start line\n\t\t * @param {Number} [endLine=line count] the end line\n\t\t *\n\t\t * @see orion.editor.TextView#redraw\n\t\t * @see orion.editor.TextView#redrawRange\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredrawLines: function(startLine, endLine, ruler) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (startLine === undefined) { startLine = 0; }\n\t\t\tif (endLine === undefined) { endLine = this._model.getLineCount(); }\n\t\t\tif (startLine === endLine) { return; }\n\t\t\tvar div = this._clientDiv;\n\t\t\tif (!div) { return; }\n\t\t\tif (ruler) {\n\t\t\t\tvar divRuler = this._getRulerParent(ruler);\n\t\t\t\tdiv = divRuler.firstChild;\n\t\t\t\twhile (div) {\n\t\t\t\t\tif (div._ruler === ruler) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ruler) {\n\t\t\t\tdiv.rulerChanged = true;\n\t\t\t} else {\n\t\t\t\tif (this._lineHeight) {\n\t\t\t\t\tthis._resetLineHeight(startLine, endLine);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar imeLineIndex = -1;\n\t\t\tif (!ruler && this._imeOffset !== -1) {\n\t\t\t\timeLineIndex = this._model.getLineAtOffset(this._imeOffset);\n\t\t\t}\n\t\t\tif (!ruler || ruler.getOverview() === \"page\") { //$NON-NLS-1$\n\t\t\t\tvar child = div.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tvar lineIndex = child.lineIndex;\n\t\t\t\t\tif (startLine <= lineIndex && lineIndex < endLine && lineIndex !== imeLineIndex) {\n\t\t\t\t\t\tchild.lineChanged = true;\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!ruler) {\n\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\tif (startLine <= this._maxLineIndex && this._maxLineIndex < endLine) {\n\t\t\t\t\t\tthis._checkMaxLineIndex = this._maxLineIndex;\n\t\t\t\t\t\tthis._maxLineIndex = -1;\n\t\t\t\t\t\tthis._maxLineWidth = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dispatchEvent({type: \"Redraw\", startLine: startLine, endLine: endLine, ruler: ruler}); //$NON-NLS-1$\n\t\t\tthis._queueUpdate();\n\t\t},\n\t\t/**\n\t\t * Redraws the text in the given range.\n\t\t * <p>\n\t\t * The character at the end offset is not redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range\n\t\t * @param {Number} [end=char count] the end offset of text range\n\t\t *\n\t\t * @see orion.editor.TextView#redraw\n\t\t * @see orion.editor.TextView#redrawLines\n\t\t * @see orion.editor.TextView#setRedraw\n\t\t */\n\t\tredrawRange: function(start, end) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tvar model = this._model;\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tif (end === undefined) { end = model.getCharCount(); }\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar endLine = model.getLineAtOffset(Math.max(start, end - 1)) + 1;\n\t\t\tthis.redrawLines(startLine, endLine);\n\t\t},\t\n\t\t/**\n\t\t * Removes a key mode from the text view.\n\t\t *\n\t\t * @param {orion.editor.KeyMode} mode the key mode.\n\t\t */\n\t\tremoveKeyMode: function (mode) {\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (var i=0; i<keyModes.length; i++) {\n\t\t\t\tif (keyModes[i] === mode) {\n\t\t\t\t\tkeyModes.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//TODO: API needed for this\n\t\t\tif (mode._modeRemoved) {\n\t\t\t\tmode._modeRemoved();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Removes a ruler from the text view.\n\t\t *\n\t\t * @param {orion.editor.Ruler} ruler the ruler.\n\t\t */\n\t\tremoveRuler: function (ruler) {\n\t\t\tvar rulers = this._rulers;\n\t\t\tfor (var i=0; i<rulers.length; i++) {\n\t\t\t\tif (rulers[i] === ruler) {\n\t\t\t\t\trulers.splice(i, 1);\n\t\t\t\t\truler.setView(null);\n\t\t\t\t\tthis._destroyRuler(ruler);\n\t\t\t\t\tthis._update();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tresize: function() {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._handleResize(null);\n\t\t},\n\t\t/**\n\t\t * @class This object describes an action for the text view.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView}<br/>\n\t\t * {@link orion.editor.TextView#setAction}\n\t\t * </p>\t\t \n\t\t * @name orion.editor.ActionDescription\n\t\t *\n\t\t * @property {String} [name] the name to be used when showing the action as text.\n\t\t */\n\t\t/**\n\t\t * Associates an application defined handler to an action ID.\n\t\t * <p>\n\t\t * If the action ID is a predefined action, the given handler executes before\n\t\t * the default action handler.  If the given handler returns <code>true</code>, the\n\t\t * default action handler is not called.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} actionID the action ID.\n\t\t * @param {Function} handler the action handler.\n\t\t * @param {orion.editor.ActionDescription} [actionDescription=undefined] the action description.\n\t\t *\n\t\t * @see orion.editor.TextView#getActions\n\t\t * @see orion.editor.TextView#invokeAction\n\t\t */\n\t\tsetAction: function(actionID, handler, actionDescription) {\n\t\t\tif (!actionID) { return; }\n\t\t\tvar actions = this._actions;\n\t\t\tvar action = actions[actionID];\n\t\t\tif (!action) { \n\t\t\t\taction = actions[actionID] = {};\n\t\t\t}\n\t\t\taction.handler = handler;\n\t\t\tif (actionDescription !== undefined) {\n\t\t\t\taction.actionDescription = actionDescription;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Associates a key binding with the given action ID. Any previous\n\t\t * association with the specified key binding is overwriten. If the\n\t\t * action ID is <code>null</code>, the association is removed.\n\t\t * \n\t\t * @param {orion.KeyBinding} keyBinding the key binding\n\t\t * @param {String} actionID the action ID\n\t\t */\n\t\tsetKeyBinding: function(keyBinding, actionID) {\n\t\t\tthis._keyModes[0].setKeyBinding(keyBinding, actionID);\n\t\t},\n\t\t/**\n\t\t * Sets the caret offset relative to the start of the document.\n\t\t *\n\t\t * @param {Number} caret the caret offset relative to the start of the document.\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getCaretOffset\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tsetCaretOffset: function(offset, show, callback) {\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\toffset = Math.max(0, Math.min (offset, charCount));\n\t\t\tvar selection = new Selection(offset, offset, false);\n\t\t\tthis._setSelection (selection, show === undefined || show, true, callback);\n\t\t},\n\t\t/**\n\t\t * Sets the horizontal pixel.\n\t\t * <p>\n\t\t * The horizontal pixel is the pixel position that is currently at\n\t\t * the left edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} pixel the horizontal pixel.\n\t\t *\n\t\t * @see orion.editor.TextView#getHorizontalPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tsetHorizontalPixel: function(pixel) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tpixel = Math.max(0, pixel);\n\t\t\tthis._scrollView(pixel - this._getScroll().x, 0);\n\t\t},\n\t\t/**\n\t\t * Sets whether the view should update the DOM.\n\t\t * <p>\n\t\t * This can be used to improve the performance.\n\t\t * </p><p>\n\t\t * When the flag is set to <code>true</code>,\n\t\t * the entire view is marked as needing to be redrawn. \n\t\t * Nested calls to this method are stacked.\n\t\t * </p>\n\t\t *\n\t\t * @param {Boolean} redraw the new redraw state\n\t\t * \n\t\t * @see orion.editor.TextView#redraw\n\t\t */\n\t\tsetRedraw: function(redraw) {\n\t\t\tif (redraw) {\n\t\t\t\tif (--this._redrawCount === 0) {\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._redrawCount++;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the text model of the text view.\n\t\t *\n\t\t * @param {orion.editor.TextModel} model the text model of the view.\n\t\t */\n\t\tsetModel: function(model) {\n\t\t\tif (model === this._model) { return; }\n\t\t\tmodel = model || new mTextModel.TextModel();\n\t\t\tthis._model.removeEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.removeEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tvar oldLineCount = this._model.getLineCount();\n\t\t\tvar oldCharCount = this._model.getCharCount();\n\t\t\tvar newLineCount = model.getLineCount();\n\t\t\tvar newCharCount = model.getCharCount();\n\t\t\tvar newText = model.getText();\n\t\t\tvar e = {\n\t\t\t\ttype: \"ModelChanging\", //$NON-NLS-1$\n\t\t\t\ttext: newText,\n\t\t\t\tstart: 0,\n\t\t\t\tremovedCharCount: oldCharCount,\n\t\t\t\taddedCharCount: newCharCount,\n\t\t\t\tremovedLineCount: oldLineCount,\n\t\t\t\taddedLineCount: newLineCount\n\t\t\t};\n\t\t\tthis.onModelChanging(e);\n\t\t\tthis._model = model;\n\t\t\te = {\n\t\t\t\ttype: \"ModelChanged\", //$NON-NLS-1$\n\t\t\t\tstart: 0,\n\t\t\t\tremovedCharCount: oldCharCount,\n\t\t\t\taddedCharCount: newCharCount,\n\t\t\t\tremovedLineCount: oldLineCount,\n\t\t\t\taddedLineCount: newLineCount\n\t\t\t};\n\t\t\tthis.onModelChanged(e); \n\t\t\tthis._model.addEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.addEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._reset();\n\t\t\tthis._update();\n\t\t},\n\t\t/**\n\t\t * Sets the view options for the view.\n\t\t *\n\t\t * @param {orion.editor.TextViewOptions} options the view options.\n\t\t * \n\t\t * @see orion.editor.TextView#getOptions\n\t\t */\n\t\tsetOptions: function (options) {\n\t\t\tvar defaultOptions = this._defaultOptions();\n\t\t\tfor (var option in options) {\n\t\t\t\tif (options.hasOwnProperty(option)) {\n\t\t\t\t\tvar newValue = options[option], oldValue = this[\"_\" + option]; //$NON-NLS-1$\n\t\t\t\t\tif (compare(oldValue, newValue)) { continue; }\n\t\t\t\t\tvar update = defaultOptions[option] ? defaultOptions[option].update : null;\n\t\t\t\t\tif (update) {\n\t\t\t\t\t\tupdate.call(this, newValue);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis[\"_\" + option] = clone(newValue); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.onOptions({type: \"Options\", options: options}); //$NON-NLS-1$\n\t\t},\n\t\t/**\n\t\t * @class This object describes the selection show options.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.TextView#setSelection}\n\t\t * {@link orion.editor.TextView#setCaretOffset}\t \n\t\t * {@link orion.editor.TextView#showSelection}\t \n\t\t * </p>\t\t \n\t\t * @name orion.editor.TextViewShowOptions\n\t\t *\n\t\t * @property {String} viewAnchor the view anchor.  The view anchor can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"top\" - align the selection to the top of the view client area.</li>\n\t\t *   <li>\"bottom\" - align the selection to the bottom of the view client area.</li>\n\t\t *   <li>\"center\" - align the selection to the center of the view client area.</li>\n\t\t *   <li> by default - align the selection to the top or bottom of the client area depending on whether the caret is above or below the client area respectively. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * @property {Number} [viewAnchorOffset=0] an offset from the view anchor. The offset is a percentage of the client area height and it is clamped to [0-1] range.\n\t\t * @property {String} [selectionAnchor=caret] the selection anchor. The seleciton anchor can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"top\" - align the top of the selection to the view anchor.</li>\n\t\t *   <li>\"bottom\" - align the bottom of the selection to the view anchor.</li>\n\t\t *   <li>\"center\" - align the center of the selection to the view anchor.</li>\n\t\t *   <li> by default - align the top or bottom of the selection to the view anchor depending on whether the caret is at the start or end of the selection. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t * @property {String} [scrollPolicy] the scroll policy. The scroll policy can be one of these values:\n\t\t * <p>\n\t\t * <ul>\n\t\t *   <li>\"always\" - always scroll vertically to the desired pixel offset even if the caret is already visible.</li>\n\t\t *   <li> by default - only scroll if the caret is not visible. </li>\n\t\t * </ul>\n\t\t * </p>\n\t\t */\n\t\t/**\n\t\t * Sets the text view selection.\n\t\t * <p>\n\t\t * The selection is defined by a start and end character offset relative to the\n\t\t * document. The character at end offset is not included in the selection.\n\t\t * </p>\n\t\t * <p>\n\t\t * The caret is always placed at the end offset. The start offset can be\n\t\t * greater than the end offset to place the caret at the beginning of the\n\t\t * selection.\n\t\t * </p>\n\t\t * <p>\n\t\t * Clamps out of range offsets.\n\t\t * </p>\n\t\t * \n\t\t * @param {Number} start the start offset of the selection\n\t\t * @param {Number} end the end offset of the selection\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getSelection\n\t\t */\n\t\tsetSelection: function (start, end, show, callback) {\n\t\t\tvar caret = start > end;\n\t\t\tif (caret) {\n\t\t\t\tvar tmp = start;\n\t\t\t\tstart = end;\n\t\t\t\tend = tmp;\n\t\t\t}\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\tstart = Math.max(0, Math.min (start, charCount));\n\t\t\tend = Math.max(0, Math.min (end, charCount));\n\t\t\tvar selection = new Selection(start, end, caret);\n\t\t\tthis._setSelection(selection, show === undefined || show, true, callback);\n\t\t},\n\t\tsetSelections: function (ranges, show, callback) {\n\t\t\tvar selections = this._rangesToSelections(ranges);\n\t\t\tthis._setSelection(selections, show === undefined || show, true, callback);\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The character at the end offset is not replaced.\n\t\t * </p>\n\t\t * <p>\n\t\t * When both <code>start</code> and <code>end</code> parameters\n\t\t * are not specified, the text view places the caret at the beginning\n\t\t * of the document and scrolls to make it visible.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} text the new text.\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t * @param {Boolean|Number|orion.editor.TextViewShowOptions} [show=true]\n\t\t * \t\t\t\t\tif <code>true</code>, the view will scroll the minimum amount necessary to show the caret location. If\n\t\t *\t\t\t\t\t<code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  In either case, the view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getText\n\t\t */\n\t\tsetText: function (text, start, end, show, callback) {\n\t\t\tvar isSingle = typeof text === \"string\"; //$NON-NLS-1$\n\t\t\tvar reset = start === undefined && end === undefined && isSingle;\n\t\t\tvar edit;\n\t\t\tif (isSingle) {\n\t\t\t\tif (start === undefined) { start = 0; }\n\t\t\t\tif (end === undefined) { end = this._model.getCharCount(); }\n\t\t\t\tedit = {text: text, selection: [new Selection(start, end, false)]};\n\t\t\t} else {\n\t\t\t\tedit = text;\n\t\t\t\tedit.selection = this._rangesToSelections(edit.selection);\n\t\t\t}\n\t\t\tedit._code = true;\n\t\t\tif (reset) {\n\t\t\t\tthis._variableLineHeight = false;\n\t\t\t}\n\t\t\tthis._modifyContent(edit, !reset, show === undefined || show, callback);\n\t\t\tif (reset) {\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, the caret does not show after the\n\t\t\t\t* view is refreshed.  The fix is to toggle the contentEditable state and\n\t\t\t\t* force the clientDiv to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tif (util.isFirefox < 13) {\n\t\t\t\t\tthis._fixCaret();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the top index.\n\t\t * <p>\n\t\t * The top index is the line that is currently at the top of the text view.  This\n\t\t * line may be partially visible depending on the vertical scroll of the view.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} topIndex the index of the top line.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomIndex\n\t\t * @see orion.editor.TextView#getTopIndex\n\t\t */\n\t\tsetTopIndex: function(topIndex, callback) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._scrollViewAnimated(0, this._getLinePixel(Math.max(0, topIndex)) - this._getScroll().y, callback);\n\t\t},\n\t\t/**\n\t\t * Sets the top pixel.\n\t\t * <p>\n\t\t * The top pixel is the pixel position that is currently at\n\t\t * the top edge of the view.  This position is relative to the\n\t\t * beginning of the document.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} pixel the top pixel.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @see orion.editor.TextView#getBottomPixel\n\t\t * @see orion.editor.TextView#getTopPixel\n\t\t * @see orion.editor.TextView#convert\n\t\t */\n\t\tsetTopPixel: function(pixel, callback) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tthis._scrollViewAnimated(0, Math.max(0, pixel) - this._getScroll().y, callback);\n\t\t},\n\t\t/**\n\t\t * Scrolls the selection into view if needed.\n\t\t *\n \t\t * @param {Number|orion.editor.TextViewShowOptions} [show=0]\n\t\t * \t\t\t\t\tIf <code>show</code> is a <code>Number</code>, the view will scroll the minimum amount necessary to show the caret location plus a\n\t\t *\t\t\t\t\tpercentage of the client area height. The parameter is clamped to the [0,1] range.  The view will only scroll\n\t\t *\t\t\t\t\tif the new caret location is not visible already.  The <code>show</code> parameter can also be a <code>orion.editor.TextViewShowOptions</code> object. See\n\t\t * \t\t\t\t\t{@link orion.editor.TextViewShowOptions} for further information in how the options can be used to control the scrolling behavior.\n\t\t * @param {Function} [callback] if callback is specified and <code>scrollAnimation</code> is not zero, view scrolling is animated and\n\t\t *\t\t\t\t\tthe callback is called when the animation is done. Otherwise, callback is callback right away.\n\t\t *\n\t\t * @returns {Boolean} true if the view was scrolled.\n\t\t *\n\t\t * @see orion.editor.TextView#getSelection\n\t\t * @see orion.editor.TextView#setSelection\n\t\t * @see orion.editor.TextView#setCaretOffset\n\t\t */\n\t\tshowSelection: function(show, callback) {\n\t\t\treturn this._showCaret(show ? false : true, callback, show);\n\t\t},\n\t\tupdate: function(styleChanged, sync) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tif (styleChanged || this._metrics.invalid) {\n\t\t\t\tthis._updateStyle();\n\t\t\t}\n\t\t\tif (sync === undefined || sync) {\n\t\t\t\tthis._update();\n\t\t\t} else {\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**************************************** Event handlers *********************************/\n\t\t_handleRootMouseDown: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13 && e.which === 1) {\n\t\t\t\tthis._clientDiv.contentEditable = false;\n\t\t\t\t(this._overlayDiv || this._clientDiv).draggable = true;\n\t\t\t\tthis._ignoreBlur = true;\n\t\t\t}\n\t\t\t\n\t\t\t/* Prevent clicks outside of the client div from taking focus away. */\n\t\t\tvar topNode = this._overlayDiv || this._clientDiv;\n\t\t\t/* Use view div on IE 8 otherwise it is not possible to scroll. */\n\t\t\tif (util.isIE < 9) { topNode = this._viewDiv; }\n\t\t\tvar temp = e.target ? e.target : e.srcElement;\n\t\t\twhile (temp) {\n\t\t\t\tif (topNode === temp) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (temp.className && temp.className.indexOf(\"textViewFind\") !== -1) { //$NON-NLS-1$\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttemp = temp.parentNode;\n\t\t\t}\n\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\tif (e.stopPropagation){ e.stopPropagation(); }\n\t\t\tif (!this._isW3CEvents) {\n\t\t\t\t/*\n\t\t\t\t* In IE 8 is not possible to prevent the default handler from running\n\t\t\t\t* during mouse down event using usual API. The workaround is to give\n\t\t\t\t* focus back to the client div.\n\t\t\t\t*/ \n\t\t\t\tvar that = this;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\tthat._clientDiv.focus();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t},\n\t\t_handleRootMouseUp: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13 && e.which === 1) {\n\t\t\t\tthis._clientDiv.contentEditable = true;\n\t\t\t\t(this._overlayDiv || this._clientDiv).draggable = false;\n\t\t\t}\n\t\t\tif (util.isFirefox && e.which === 1) {\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, Firefox stops showing the caret\n\t\t\t\t* in some cases. For example when the user cancels a drag operation \n\t\t\t\t* by pressing ESC.  The fix is to detect that the drag operation was\n\t\t\t\t* cancelled,  toggle the contentEditable state and force the clientDiv\n\t\t\t\t* to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tthis._fixCaret();\n\t\t\t\tthis._ignoreBlur = false;\n\t\t\t}\n\t\t},\n\t\t_handleBlur: function () {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreBlur) { return; }\n\t\t\tthis._commitIME();\n\t\t\tthis._hasFocus = false;\n\t\t\t/*\n\t\t\t* Bug in IE 8 and earlier. For some reason when text is deselected\n\t\t\t* the overflow selection at the end of some lines does not get redrawn.\n\t\t\t* The fix is to create a DOM element in the body to force a redraw.\n\t\t\t*/\n\t\t\tif (util.isIE < 9) {\n\t\t\t\tif (!this._getSelections()[0].isEmpty()) {\n\t\t\t\t\tvar rootDiv = this._rootDiv;\n\t\t\t\t\tvar child = util.createElement(rootDiv.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\t\t\trootDiv.appendChild(child);\n\t\t\t\t\trootDiv.removeChild(child);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._cursorDiv) {\n\t\t\t\tthis._cursorDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (this._domSelection) {\n\t\t\t\tthis._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t\t/* Clear browser selection if selection is within clientDiv */\n\t\t\t\tvar temp;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\t\tif (win.getSelection) {\n\t\t\t\t\tvar sel = win.getSelection();\n\t\t\t\t\ttemp = sel.anchorNode;\n\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\tif (temp === this._clientDiv) {\n\t\t\t\t\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t\t}\n\t\t\t\t} else if (doc.selection) {\n\t\t\t\t\tthis._ignoreSelect = false;\n\t\t\t\t\ttemp = doc.selection.createRange().parentElement();\n\t\t\t\t\twhile (temp) {\n\t\t\t\t\t\tif (temp === this._clientDiv) {\n\t\t\t\t\t\t\tdoc.selection.empty();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t\t}\n\t\t\t\t\tthis._ignoreSelect = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._ignoreFocus) {\n\t\t\t\tthis.onBlur({type: \"Blur\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleCompositionStart: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._imeTimeout) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._imeTimeout);\n\t\t\t\tthis._imeTimeout = null;\n\t\t\t}\n\t\t\tif (this._imeText) {\n\t\t\t\tthis._commitIME(this._imeText);\n\t\t\t\tthis._imeText = null;\n\t\t\t}\n\t\t\tthis._startIME();\n\t\t\tif (this._mutationObserver) {\n\t\t\t\tthis._mutationObserver.disconnect();\n\t\t\t\tthis._mutationObserver = null;\n\t\t\t}\n\t\t},\n\t\t_handleCompositionUpdate: function(e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._imeText = e.data;\n\t\t},\n\t\t_handleCompositionEnd: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._imeText = e.data;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._imeTimeout = win.setTimeout(function() {\n\t\t\t\tthis._commitIME(this._imeText);\n\t\t\t\tthis._imeText = this._imeTimeout = null;\n\t\t\t}.bind(this), 0);\n\t\t},\n\t\t_handleContextMenu: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isIE && this._lastMouseButton === 3) {\n\t\t\t\t// We need to update the DOM selection, because on\n\t\t\t\t// right-click the caret moves to the mouse location.\n\t\t\t\t// See bug 366312 and 376508.\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t\tvar preventDefault = false;\n\t\t\tif (this.isListening(\"ContextMenu\")) { //$NON-NLS-1$\n\t\t\t\tvar evt = this._createMouseEvent(\"ContextMenu\", e); //$NON-NLS-1$\n\t\t\t\tevt.screenX = e.screenX;\n\t\t\t\tevt.screenY = e.screenY;\n\t\t\t\tthis.onContextMenu(evt);\n\t\t\t\tpreventDefault = evt.defaultPrevented;\n\t\t\t} else if (util.isMac && util.isFirefox && e.button === 0) {\n\t\t\t\t// hack to prevent CTRL+Space from showing the browser context menu\n\t\t\t\tpreventDefault = true;\n\t\t\t}\n\t\t\tif (preventDefault) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthis._contextMenuOpen = true;\n\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\tthis._checkSelectionChange = true;\n\t\t\t\t\tthis._pollSelectionChange(true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleCopy: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._ignoreCopy) { return; }\n\t\t\tif (this._doCopy(e)) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleCut: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._doCut(e)) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDataModified: function(e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._startIME();\n\t\t},\n\t\t_handleDblclick: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar time = e.timeStamp ? e.timeStamp : Date.now();\n\t\t\tthis._lastMouseTime = time;\n\t\t\tif (this._clickCount !== 2) {\n\t\t\t\tthis._clickCount = 2;\n\t\t\t\tthis._handleMouse(e);\n\t\t\t}\n\t\t},\n\t\t_handleDragStart: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (util.isFirefox < 13) {\n\t\t\t\tvar that = this;\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\tthat._clientDiv.contentEditable = true;\n\t\t\t\t\tthat._clientDiv.draggable = false;\n\t\t\t\t\tthat._ignoreBlur = false;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tif (this.isListening(\"DragStart\") && this._dragOffset !== -1) { //$NON-NLS-1$\n\t\t\t\tthis._isMouseDown = false;\n\t\t\t\tthis.onDragStart(this._createMouseEvent(\"DragStart\", e)); //$NON-NLS-1$\n\t\t\t\tthis._dragOffset = -1;\n\t\t\t} else {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDrag: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this.isListening(\"Drag\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDrag(this._createMouseEvent(\"Drag\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleDragEnd: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tthis._dragOffset = -1;\n\t\t\tif (this.isListening(\"DragEnd\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDragEnd(this._createMouseEvent(\"DragEnd\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (util.isFirefox < 13) {\n\t\t\t\tthis._fixCaret();\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, Firefox stops showing the caret when the \n\t\t\t\t* selection is dropped onto itself. The fix is to detected the case and \n\t\t\t\t* call fixCaret() a second time.\n\t\t\t\t*/\n\t\t\t\tif (e.dataTransfer.dropEffect === \"none\" && !e.dataTransfer.mozUserCancelled) { //$NON-NLS-1$\n\t\t\t\t\tthis._fixCaret();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleDragEnter: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar prevent = true;\n\t\t\tthis._dropTarget = true;\n\t\t\tif (this.isListening(\"DragEnter\")) { //$NON-NLS-1$\n\t\t\t\tprevent = false;\n\t\t\t\tthis.onDragEnter(this._createMouseEvent(\"DragEnter\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* Webkit will not send drop events if this event is not prevented, as spec in HTML5.\n\t\t\t* Firefox and IE do not follow this spec for contentEditable. Note that preventing this \n\t\t\t* event will result is loss of functionality (insertion mark, etc).\n\t\t\t*/\n\t\t\tif (util.isWebkit || prevent) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDragOver: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tvar prevent = true;\n\t\t\tif (this.isListening(\"DragOver\")) { //$NON-NLS-1$\n\t\t\t\tprevent = false;\n\t\t\t\tthis.onDragOver(this._createMouseEvent(\"DragOver\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* Webkit will not send drop events if this event is not prevented, as spec in HTML5.\n\t\t\t* Firefox and IE do not follow this spec for contentEditable. Note that preventing this \n\t\t\t* event will result is loss of functionality (insertion mark, etc).\n\t\t\t*/\n\t\t\tif (util.isWebkit || prevent) {\n\t\t\t\tif (prevent) { e.dataTransfer.dropEffect = \"none\"; } //$NON-NLS-1$\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleDragLeave: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tif (this.isListening(\"DragLeave\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDragLeave(this._createMouseEvent(\"DragLeave\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleDrop: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tthis._dropTarget = false;\n\t\t\tif (this.isListening(\"Drop\")) { //$NON-NLS-1$\n\t\t\t\tthis.onDrop(this._createMouseEvent(\"Drop\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t\t/*\n\t\t\t* This event must be prevented otherwise the user agent will modify\n\t\t\t* the DOM. Note that preventing the event on some user agents (i.e. IE)\n\t\t\t* indicates that the operation is cancelled. This causes the dropEffect to \n\t\t\t* be set to none  in the dragend event causing the implementor to not execute\n\t\t\t* the code responsible by the move effect.\n\t\t\t*/\n\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\treturn false;\n\t\t},\n\t\t_handleFocus: function () {\n\t\t\tthis._hasFocus = true;\n\t\t\tif (util.isIOS && this._lastTouchOffset !== undefined) {\n\t\t\t\tthis.setCaretOffset(this._lastTouchOffset, true);\n\t\t\t\tthis._lastTouchOffset = undefined;\n\t\t\t} else {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t\tif (this._cursorDiv) {\n\t\t\t\tthis._cursorDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (this._domSelection) {\n\t\t\t\tthis._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t}\n\t\t\tif (!this._ignoreFocus) {\n\t\t\t\tthis.onFocus({type: \"Focus\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleKeyDown: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) {\treturn;\t}\n\t\t\tif (this.isListening(\"KeyDown\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyDown\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyDown(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\t/*\n\t\t\t\t\t* Feature in Firefox. Keypress events still happen even if the keydown event\n\t\t\t\t\t* was prevented. The fix is to remember that keydown was prevented and prevent\n\t\t\t\t\t* the keypress ourselves.\n\t\t\t\t\t*/\n\t\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\t\tthis._keyDownPrevented = true;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar modifier = false;\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 16: /* Shift */\n\t\t\t\tcase 17: /* Control */\n\t\t\t\tcase 18: /* Alt */\n\t\t\t\tcase 91: /* Command */\n\t\t\t\t\tmodifier = true;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis._setLinksVisible(false);\n\t\t\t}\n\t\t\tif (e.keyCode === 229) {\n\t\t\t\tif (this._readonly) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar startIME = true;\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Bug in Safari. Some Control+key combinations send key events\n\t\t\t\t* with keyCode equals to 229. This is unexpected and causes the\n\t\t\t\t* view to start an IME composition. The fix is to ignore these\n\t\t\t\t* events.\n\t\t\t\t*/\n\t\t\t\tif (util.isSafari && util.isMac) {\n\t\t\t\t\tif (e.ctrlKey) {\n\t\t\t\t\t\tstartIME = false;\n\t\t\t\t\t\te.keyCode = 0x81;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (startIME) {\n\t\t\t\t\tthis._startIME();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!modifier) {\n\t\t\t\t\tthis._commitIME();\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*\n\t\t\t* Feature in Firefox. When a key is held down the browser sends \n\t\t\t* right number of keypress events but only one keydown. This is\n\t\t\t* unexpected and causes the view to only execute an action\n\t\t\t* just one time. The fix is to ignore the keydown event and \n\t\t\t* execute the actions from the keypress handler.\n\t\t\t* Note: This only happens on the Mac and Linux (Firefox 3.6).\n\t\t\t*\n\t\t\t* Feature in Opera < 12.16.  Opera sends keypress events even for non-printable\n\t\t\t* keys.  The fix is to handle actions in keypress instead of keydown.\n\t\t\t*/\n\t\t\tif (((util.isMac || util.isLinux) && util.isFirefox < 4) || util.isOpera < 12.16) {\n\t\t\t\tthis._keyDownEvent = e;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._doAction(e)) {\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} else {\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\te.returnValue = false;\n\t\t\t\t\te.keyCode = 0;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleKeyPress: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\t/*\n\t\t\t* Feature in Firefox. Keypress events still happen even if the keydown event\n\t\t\t* was prevented. The fix is to remember that keydown was prevented and prevent\n\t\t\t* the keypress ourselves.\n\t\t\t*/\n\t\t\tif (this._keyDownPrevented) { \n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} \n\t\t\t\tthis._keyDownPrevented = undefined;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t* Feature in Embedded WebKit.  Embedded WekKit on Mac runs in compatibility mode and\n\t\t\t* generates key press events for these Unicode values (Function keys).  This does not\n\t\t\t* happen in Safari or Chrome.  The fix is to ignore these key events.\n\t\t\t*/\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tif ((0xF700 <= e.keyCode && e.keyCode <= 0xF7FF) || e.keyCode === 13 || e.keyCode === 8) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (((util.isMac || util.isLinux) && util.isFirefox < 4) || util.isOpera < 12.16) {\n\t\t\t\tif (this._doAction(this._keyDownEvent)) {\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (e.charCode !== undefined) {\n\t\t\t\tif (ctrlKey) {\n\t\t\t\t\tswitch (e.charCode) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t* In Firefox and Safari if ctrl+v, ctrl+c ctrl+x is canceled\n\t\t\t\t\t\t* the clipboard events are not sent. The fix to allow\n\t\t\t\t\t\t* the browser to handles these key events.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tcase 99://c\n\t\t\t\t\t\tcase 118://v\n\t\t\t\t\t\tcase 120://x\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.isListening(\"KeyPress\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyPress\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyPress(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._doAction(e)) {\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\te.preventDefault(); \n\t\t\t\t\te.stopPropagation(); \n\t\t\t\t} else {\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\te.returnValue = false;\n\t\t\t\t\te.keyCode = 0;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar ignore = false;\n\t\t\tif (util.isMac) {\n\t\t\t\tif (e.ctrlKey || e.metaKey) { ignore = true; }\n\t\t\t} else {\n\t\t\t\tif (util.isFirefox) {\n\t\t\t\t\t//Firefox clears the state mask when ALT GR generates input\n\t\t\t\t\tif (e.ctrlKey || e.altKey) { ignore = true; }\n\t\t\t\t} else {\n\t\t\t\t\t//IE and Chrome only send ALT GR when input is generated\n\t\t\t\t\tif (e.ctrlKey ^ e.altKey) { ignore = true; }\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!ignore) {\n\t\t\t\tvar key = util.isOpera ? e.which : (e.charCode !== undefined ? e.charCode : e.keyCode);\n\t\t\t\tif (key > 31) {\n\t\t\t\t\tthis._doContent(String.fromCharCode (key));\n\t\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleDocKeyUp: function (e) {\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (!ctrlKey) {\n\t\t\t\tthis._setLinksVisible(false);\n\t\t\t}\n\t\t},\n\t\t_handleKeyUp: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this.isListening(\"KeyUp\")) { //$NON-NLS-1$\n\t\t\t\tvar keyEvent = this._createKeyEvent(\"KeyUp\", e); //$NON-NLS-1$\n\t\t\t\tthis.onKeyUp(keyEvent); //$NON-NLS-1$\n\t\t\t\tif (keyEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._handleDocKeyUp(e);\n\t\t\t// don't commit for space (it happens during JP composition)  \n\t\t\tif (e.keyCode === 13) {\n\t\t\t\tthis._commitIME();\n\t\t\t}\n\t\t},\n\t\t_handleLinkClick: function (e) {\n\t\t\tvar ctrlKey = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tif (!ctrlKey) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleMouse: function (e) {\n\t\t\tvar win = this._getWindow();\n\t\t\tvar result = true;\n\t\t\tvar target = win;\n\t\t\tif (util.isIE || (util.isFirefox && !this._overlayDiv)) { target = this._clientDiv; }\n\t\t\tif (this._overlayDiv) {\n\t\t\t\tif (this._hasFocus) {\n\t\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\t}\n\t\t\t\tvar that = this;\n\t\t\t\twin.setTimeout(function () {\n\t\t\t\t\tthat.focus();\n\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tvar extend = e.shiftKey;\n\t\t\tvar block = e.altKey;\n\t\t\tvar add = util.isMac ? e.metaKey : e.ctrlKey;\n\t\t\tthis._blockSelection = this._doubleClickSelection = null;\n\t\t\tif (this._clickCount === 1) {\n\t\t\t\tvar drag = (!util.isOpera || util.isOpera >= 12.16) && this._hasFocus && this.isListening(\"DragStart\"); //$NON-NLS-1$\n\t\t\t\tresult = this._setSelectionTo(e.clientX, e.clientY, true, extend, add, drag);\n\t\t\t\tif (result) { this._setGrab(target); }\n\t\t\t} else {\n\t\t\t\t/*\n\t\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t\t* for a doule-click is:\n\t\t\t\t*\n\t\t\t\t*\tdown\n\t\t\t\t*\tup\n\t\t\t\t*\tup\n\t\t\t\t*\tdblclick\n\t\t\t\t*\n\t\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t\t*/\n\t\t\t\tif (this._isW3CEvents) { this._setGrab(target); }\n\t\t\t\t\n\t\t\t\tthis._setSelectionTo(e.clientX, e.clientY, true, extend, add, false);\n\t\t\t\tthis._doubleClickSelection = Selection.editing(this._getSelections());\n\t\t\t}\n\t\t\tif (block) {\n\t\t\t\tthis._blockSelection = Selection.editing(this._getSelections());\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_handleMouseDown: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._linksVisible) {\n\t\t\t\tvar target = e.target || e.srcElement;\n\t\t\t\tif (target.tagName !== \"A\") { //$NON-NLS-1$\n\t\t\t\t\tthis._setLinksVisible(false);\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._commitIME();\n\n\t\t\tvar button = e.which; // 1 - left, 2 - middle, 3 - right\n\t\t\tif (!button) { \n\t\t\t\t// if IE 8 or older\n\t\t\t\tif (e.button === 4) { button = 2; }\n\t\t\t\tif (e.button === 2) { button = 3; }\n\t\t\t\tif (e.button === 1) { button = 1; }\n\t\t\t}\n\n\t\t\t// For middle click we always need getTime(). See _getClipboardText().\n\t\t\tvar time = button !== 2 && e.timeStamp ? e.timeStamp : Date.now();\n\t\t\tvar timeDiff = time - this._lastMouseTime;\n\t\t\tvar deltaX = Math.abs(this._lastMouseX - e.clientX);\n\t\t\tvar deltaY = Math.abs(this._lastMouseY - e.clientY);\n\t\t\tvar sameButton = this._lastMouseButton === button;\n\t\t\tthis._lastMouseX = e.clientX;\n\t\t\tthis._lastMouseY = e.clientY;\n\t\t\tthis._lastMouseTime = time;\n\t\t\tthis._lastMouseButton = button;\n\n\t\t\tif (button === 1) {\n\t\t\t\tthis._isMouseDown = true;\n\t\t\t\tif (sameButton && timeDiff <= this._clickTime && deltaX <= this._clickDist && deltaY <= this._clickDist) {\n\t\t\t\t\tthis._clickCount++;\n\t\t\t\t} else {\n\t\t\t\t\tthis._clickCount = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.isListening(\"MouseDown\")) { //$NON-NLS-1$\n\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseDown\", e); //$NON-NLS-1$\n\t\t\t\tthis.onMouseDown(mouseEvent);\n\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (button === 1) {\n\t\t\t\tif (this._handleMouse(e) && (util.isIE >= 9 || util.isOpera || util.isChrome || util.isSafari || (util.isFirefox && !this._overlayDiv))) {\n\t\t\t\t\tif (!this._hasFocus) {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (util.isFirefox && this._lastMouseButton === 3) {\n\t\t\t\t// We need to update the DOM selection, because on\n\t\t\t\t// right-click the caret moves to the mouse location.\n\t\t\t\t// See bug 366312 and 376508.\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t},\n\t\t_handleMouseOver: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._animation) { return; }\n\t\t\tif (this.isListening(\"MouseOver\")) { //$NON-NLS-1$\n\t\t\t\tthis.onMouseOver(this._createMouseEvent(\"MouseOver\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleMouseOut: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._animation) { return; }\n\t\t\tif (this.isListening(\"MouseOut\")) { //$NON-NLS-1$\n\t\t\t\tthis.onMouseOut(this._createMouseEvent(\"MouseOut\", e)); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleMouseMove: function (e) {\n\t\t\tif (this._animation) { return; }\n\t\t\tvar inClient = this._isClientDiv(e);\n\t\t\tif (this.isListening(\"MouseMove\")) { //$NON-NLS-1$\n\t\t\t\tif (inClient || this._isMouseDown){\n\t\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseMove\", e); //$NON-NLS-1$\n\t\t\t\t\tthis.onMouseMove(mouseEvent);\n\t\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._dropTarget) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t* Bug in IE9. IE sends one mouse event when the user changes the text by\n\t\t\t* pasting or undo.  These operations usually happen with the Ctrl key\n\t\t\t* down which causes the view to enter link mode.  Link mode does not end\n\t\t\t* because there are no further events.  The fix is to only enter link\n\t\t\t* mode when the coordinates of the mouse move event have changed.\n\t\t\t*/\n\t\t\tvar changed = this._linksVisible || this._lastMouseMoveX !== e.clientX || this._lastMouseMoveY !== e.clientY;\n\t\t\tthis._lastMouseMoveX = e.clientX;\n\t\t\tthis._lastMouseMoveY = e.clientY;\n\t\t\tthis._setLinksVisible(changed && !this._isMouseDown && e.altKey && (util.isMac ? e.metaKey : e.ctrlKey));\n\n\t\t\tthis._checkOverlayScroll();\n\n\t\t\t/*\n\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t* for a doule-click is:\n\t\t\t*\n\t\t\t*\tdown\n\t\t\t*\tup\n\t\t\t*\tup\n\t\t\t*\tdblclick\n\t\t\t*\n\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t*\n\t\t\t* In order to detect double-click and drag gestures, it is necessary to send\n\t\t\t* a mouse down event from mouse move when the button is still down and isMouseDown\n\t\t\t* flag is not set.\n\t\t\t*/\n\t\t\tif (!this._isW3CEvents) {\n\t\t\t\tif (e.button === 0) {\n\t\t\t\t\tthis._setGrab(null);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (!this._isMouseDown && e.button === 1 && (this._clickCount & 1) !== 0 && inClient) {\n\t\t\t\t\tthis._clickCount = 2;\n\t\t\t\t\treturn this._handleMouse(e, this._clickCount);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._isMouseDown || this._dragOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tvar x = e.clientX;\n\t\t\tvar y = e.clientY;\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\tvar width = this._getClientWidth (), height = this._getClientHeight();\n\t\t\tvar leftEdge = viewRect.left + viewPad.left;\n\t\t\tvar topEdge = viewRect.top + viewPad.top;\n\t\t\tvar rightEdge = viewRect.left + viewPad.left + width;\n\t\t\tvar bottomEdge = viewRect.top + viewPad.top + height;\n\t\t\tif (y < topEdge) {\n\t\t\t\tthis._doAutoScroll(\"up\", x, y - topEdge); //$NON-NLS-1$\n\t\t\t} else if (y > bottomEdge) {\n\t\t\t\tthis._doAutoScroll(\"down\", x, y - bottomEdge); //$NON-NLS-1$\n\t\t\t} else if (x < leftEdge && !this._wrapMode) {\n\t\t\t\tthis._doAutoScroll(\"left\", x - leftEdge, y); //$NON-NLS-1$\n\t\t\t} else if (x > rightEdge && !this._wrapMode) {\n\t\t\t\tthis._doAutoScroll(\"right\", x - rightEdge, y); //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tthis._endAutoScroll();\n\t\t\t\tthis._setSelectionTo(x, y, false, true);\n\t\t\t}\n\t\t},\n\t\t_isClientDiv: function(e) {\n\t\t\tvar topNode = this._overlayDiv || this._clientDiv;\n\t\t\tvar temp = e.target ? e.target : e.srcElement;\n\t\t\twhile (temp) {\n\t\t\t\tif (topNode === temp) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\ttemp = temp.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_createKeyEvent: function(type, e) {\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_createMouseEvent: function(type, e) {\n\t\t\tvar pt = this.convert({x: e.clientX, y: e.clientY}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\tclickCount: this._clickCount,\n\t\t\t\tx: pt.x,\n\t\t\t\ty: pt.y,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_createTouchEvent: function(type, e) {\n\t\t\tvar pt = e.touches.length ? this.convert({x: e.touches[0].clientX, y: e.touches[0].clientY}, \"page\", \"document\") : {}; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tevent: e,\n\t\t\t\ttouchCount: e.touches.length,\n\t\t\t\tx: pt.x,\n\t\t\t\ty: pt.y,\n\t\t\t\tpreventDefault: function() {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t_handleMouseUp: function (e) {\n\t\t\tvar left = e.which ? e.button === 0 : e.button === 1;\n\t\t\tif (this.isListening(\"MouseUp\")) { //$NON-NLS-1$\n\t\t\t\tif (this._isClientDiv(e) || (left && this._isMouseDown)) {\n\t\t\t\t\tvar mouseEvent = this._createMouseEvent(\"MouseUp\", e); //$NON-NLS-1$\n\t\t\t\t\tthis.onMouseUp(mouseEvent);\n\t\t\t\t\tif (mouseEvent.defaultPrevented) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis._isMouseDown = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._linksVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (left && this._isMouseDown) {\n\t\t\t\tvar selections = this._getSelections();\n\t\t\t\tvar selection = Selection.editing(selections);\n\t\t\t\tselections.forEach(function(sel) {\n\t\t\t\t\tsel._editing = false;\n\t\t\t\t});\n\t\t\t\tif (this._dragOffset !== -1) {\n\t\t\t\t\tselection.extend(this._dragOffset);\n\t\t\t\t\tselection.collapse();\n\t\t\t\t\tselections = selection;\n\t\t\t\t\tthis._dragOffset = -1;\n\t\t\t\t}\n\t\t\t\tthis._setSelection(selections, false);\n\t\t\t\tthis._isMouseDown = false;\n\t\t\t\tthis._endAutoScroll();\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t* Feature in IE8 and older, the sequence of events in the IE8 event model\n\t\t\t\t* for a doule-click is:\n\t\t\t\t*\n\t\t\t\t*\tdown\n\t\t\t\t*\tup\n\t\t\t\t*\tup\n\t\t\t\t*\tdblclick\n\t\t\t\t*\n\t\t\t\t* Given that the mouse down/up events are not balanced, it is not possible to\n\t\t\t\t* grab on mouse down and ungrab on mouse up.  The fix is to grab on the first\n\t\t\t\t* mouse down and ungrab on mouse move when the button 1 is not set.\n\t\t\t\t*/\n\t\t\t\tif (this._isW3CEvents) { this._setGrab(null); }\n\t\t\t}\n\t\t\t/*\n\t\t\t* Note that there cases when Firefox sets the DOM selection in mouse up.\n\t\t\t* This happens for example after a cancelled drag operation.\n\t\t\t*\n\t\t\t* Note that on Chrome and IE, the caret stops blicking if mouse up is\n\t\t\t* prevented.\n\t\t\t*/\n\t\t\tif (left && this._isMouseDown && util.isFirefox) {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\t\t_handleMouseWheel: function (e) {\n\t\t\tif (this._noScroll) return;\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar pixelX = 0, pixelY = 0;\n\t\t\t// Note: On the Mac the correct behaviour is to scroll by pixel.\n\t\t\tif (util.isIE || util.isOpera) {\n\t\t\t\tpixelY = (-e.wheelDelta / 40) * lineHeight;\n\t\t\t} else if (util.isFirefox) {\n\t\t\t\tvar limit = 256;\n\t\t\t\tif (e.type === \"wheel\") { //$NON-NLS-1$\n\t\t\t\t\tif (e.deltaMode) { // page or line\n\t\t\t\t\t\tpixelX = Math.max(-limit, Math.min(limit, e.deltaX)) * lineHeight;\n\t\t\t\t\t\tpixelY = Math.max(-limit, Math.min(limit, e.deltaY)) * lineHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixelX = e.deltaX;\n\t\t\t\t\t\tpixelY = e.deltaY;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar pixel;\n\t\t\t\t\tif (util.isMac) {\n\t\t\t\t\t\tpixel = e.detail * 3;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixel = Math.max(-limit, Math.min(limit, e.detail)) * lineHeight;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.axis === e.HORIZONTAL_AXIS) {\n\t\t\t\t\t\tpixelX = pixel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixelY = pixel;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//Webkit\n\t\t\t\tif (util.isMac) {\n\t\t\t\t\t/*\n\t\t\t\t\t* In Safari, the wheel delta is a multiple of 120. In order to\n\t\t\t\t\t* convert delta to pixel values, it is necessary to divide delta\n\t\t\t\t\t* by 40.\n\t\t\t\t\t*\n\t\t\t\t\t* In Chrome and Safari 5, the wheel delta depends on the type of the\n\t\t\t\t\t* mouse. In general, it is the pixel value for Mac mice and track pads,\n\t\t\t\t\t* but it is a multiple of 120 for other mice. There is no presise\n\t\t\t\t\t* way to determine if it is pixel value or a multiple of 120.\n\t\t\t\t\t* \n\t\t\t\t\t* Note that the current approach does not calculate the correct\n\t\t\t\t\t* pixel value for Mac mice when the delta is a multiple of 120.\n\t\t\t\t\t*\n\t\t\t\t\t* For values that are multiples of 120, the denominator varies on\n\t\t\t\t\t* the time between events.\n\t\t\t\t\t*/\n\t\t\t\t\tvar denominatorX, denominatorY;\n\t\t\t\t\tvar deltaTime = e.timeStamp - this._wheelTimeStamp;\n\t\t\t\t\tthis._wheelTimeStamp = e.timeStamp;\n\t\t\t\t\tif (e.wheelDeltaX % 120 !== 0) { \n\t\t\t\t\t\tdenominatorX = 1; \n\t\t\t\t\t} else {\n\t\t\t\t\t\tdenominatorX = deltaTime < 40 ? 40/(40-deltaTime) : 40;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.wheelDeltaY % 120 !== 0) { \n\t\t\t\t\t\tdenominatorY = 1; \n\t\t\t\t\t} else {\n\t\t\t\t\t\tdenominatorY = deltaTime < 40 ? 40/(40-deltaTime) : 40; \n\t\t\t\t\t}\n\t\t\t\t\tpixelX = Math.ceil(-e.wheelDeltaX / denominatorX);\n\t\t\t\t\tif (-1 < pixelX && pixelX < 0) { pixelX = -1; }\n\t\t\t\t\tif (0 < pixelX && pixelX < 1) { pixelX = 1; }\n\t\t\t\t\tpixelY = Math.ceil(-e.wheelDeltaY / denominatorY);\n\t\t\t\t\tif (-1 < pixelY && pixelY < 0) { pixelY = -1; }\n\t\t\t\t\tif (0 < pixelY && pixelY < 1) { pixelY = 1; }\n\t\t\t\t} else {\n\t\t\t\t\tpixelX = -e.wheelDeltaX;\n\t\t\t\t\tvar linesToScroll = 8;\n\t\t\t\t\tpixelY = (-e.wheelDeltaY / 120 * linesToScroll) * lineHeight;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* \n\t\t\t* Feature in Safari. If the event target is removed from the DOM \n\t\t\t* safari stops smooth scrolling. The fix is keep the element target\n\t\t\t* in the DOM and remove it on a later time. \n\t\t\t*\n\t\t\t* Note: Using a timer is not a solution, because the timeout needs to\n\t\t\t* be at least as long as the gesture (which is too long).\n\t\t\t*/\n\t\t\tif (util.isSafari || (util.isChrome && util.isMac)) {\n\t\t\t\tvar lineDiv = e.target;\n\t\t\t\twhile (lineDiv && lineDiv.lineIndex === undefined) {\n\t\t\t\t\tlineDiv = lineDiv.parentNode;\n\t\t\t\t}\n\t\t\t\tthis._mouseWheelLine = lineDiv;\n\t\t\t}\n\t\t\tvar oldScroll = this._getScroll();\n\t\t\tthis._scrollView(pixelX, pixelY);\n\t\t\tvar newScroll = this._getScroll();\n\t\t\tif (oldScroll.x !== newScroll.x || oldScroll.y !== newScroll.y) {\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handlePaste: function (e) {\n\t\t\tthis._cancelCheckSelection();\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._ignorePaste) { return; }\n\t\t\tif (this._doPaste(e)) {\n\t\t\t\tif (util.isIE) {\n\t\t\t\t\t/*\n\t\t\t\t\t * Bug in IE,  \n\t\t\t\t\t */\n\t\t\t\t\tvar that = this;\n\t\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\t\tvar win = this._getWindow();\n\t\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\t\tthat._updateDOMSelection();\n\t\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_handleResize: function () {\n\t\t\tvar newWidth = this._rootDiv.clientWidth;\n\t\t\tvar newHeight = this._rootDiv.clientHeight;\n\t\t\tif (this._rootWidth !== newWidth || this._rootHeight !== newHeight) {\n\t\t\t\tif (this._rootWidth !== newWidth && this._wrapMode) {\n\t\t\t\t\tthis._resetLineHeight();\n\t\t\t\t}\n\t\t\t\tthis._rootWidth = newWidth;\n\t\t\t\tthis._rootHeight = newHeight;\n\t\t\t\t/*\n\t\t\t\t* Feature in IE7. For some reason, sometimes Internet Explorer 7 \n\t\t\t\t* returns incorrect values for element.getBoundingClientRect() when \n\t\t\t\t* inside a resize handler. The fix is to queue the work.\n\t\t\t\t*/\t\t\t\n\t\t\t\tvar queue = util.isIE < 9;\n\n\t\t\t\t/*\n\t\t\t\t* The calculated metrics may be out of date when the zoom level changes.\n\t\t\t\t*/\n\t\t\t\tvar metrics = this._calculateMetrics();\n\t\t\t\tif (!compare(metrics, this._metrics)) {\n\t\t\t\t\tif (this._metrics.invalid && !metrics.invalid) {\n\t\t\t\t\t\tthis._updateStyle(false, metrics);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this._variableLineHeight) {\n\t\t\t\t\t\t\tthis._variableLineHeight = false;\n\t\t\t\t\t\t\tthis._resetLineHeight();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._metrics = metrics;\n\t\t\t\t\t}\n\t\t\t\t\tqueue = true;\n\t\t\t\t}\n\n\t\t\t\tif (queue) {\n\t\t\t\t\tthis._queueUpdate();\n\t\t\t\t} else {\n\t\t\t\t\tthis._update();\n\t\t\t\t}\n\t\t\t\tthis.dispatchEvent({type: \"Resize\"}); //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_handleRulerEvent: function (e) {\n\t\t\tvar target = e.target ? e.target : e.srcElement;\n\t\t\tvar lineIndex = target.lineIndex;\n\t\t\tvar element = target;\n\t\t\twhile (element && !element._ruler) {\n\t\t\t\tif (lineIndex === undefined && element.lineIndex !== undefined) {\n\t\t\t\t\tlineIndex = element.lineIndex;\n\t\t\t\t}\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\t\t\tvar ruler = element ? element._ruler : null;\n\t\t\tif (lineIndex === undefined && ruler && ruler.getOverview() === \"document\") { //$NON-NLS-1$\n\t\t\t\tvar clientHeight = this._getClientHeight ();\n\t\t\t\tvar lineCount = this._model.getLineCount ();\n\t\t\t\tvar viewPad = this._getViewPadding();\n\t\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\t\tvar contentHeight = lineHeight * lineCount;\n\t\t\t\tvar trackHeight = clientHeight + viewPad.top + viewPad.bottom - 2 * this._metrics.scrollWidth;\n\t\t\t\tvar divHeight, arrowWidth;\n\t\t\t\tif (contentHeight < trackHeight) {\n\t\t\t\t\tdivHeight = lineHeight;\n\t\t\t\t\tarrowWidth = viewPad.top;\n\t\t\t\t} else {\n\t\t\t\t\tdivHeight = trackHeight / lineCount;\n\t\t\t\t\tarrowWidth = this._metrics.scrollWidth;\n\t\t\t\t}\n\t\t\t\tlineIndex = Math.floor(((e.clientY - viewRect.top) - arrowWidth) / divHeight);\n\t\t\t\tif (!(0 <= lineIndex && lineIndex < lineCount)) {\n\t\t\t\t\tlineIndex = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ruler) {\n\t\t\t\tswitch (e.type) {\n\t\t\t\t\tcase \"click\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onClick) { ruler.onClick(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"dblclick\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onDblClick) { ruler.onDblClick(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mousemove\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseMove) { ruler.onMouseMove(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mouseover\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseOver) { ruler.onMouseOver(lineIndex, e); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"mouseout\": //$NON-NLS-1$\n\t\t\t\t\t\tif (ruler.onMouseOut) { \n\t\t\t\t\t\t\tvar tmp = e.relatedTarget;\n\t\t\t\t\t\t\twhile (tmp && tmp !== this._rootDiv) {\n\t\t\t\t\t\t\t\tif (tmp === element) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttmp = tmp.parentNode;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\truler.onMouseOut(lineIndex, e); \n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleScroll: function () {\n\t\t\tthis._lastScrollTime = Date.now();\n\t\t\tvar _scroll = this._getScroll(false);\n\t\t\tvar oldX = this._hScroll;\n\t\t\tvar oldY = this._vScroll;\n\t\t\tif (oldX !== _scroll.x || oldY !== _scroll.y) {\n\t\t\t\tthis._hScroll = _scroll.x;\n\t\t\t\tthis._vScroll = _scroll.y;\n\t\t\t\tthis._commitIME();\n\t\t\t\tthis._update(oldY === _scroll.y);\n\t\t\t\tvar e = {\n\t\t\t\t\ttype: \"Scroll\", //$NON-NLS-1$\n\t\t\t\t\toldValue: {x: oldX, y: oldY},\n\t\t\t\t\tnewValue: _scroll\n\t\t\t\t};\n\t\t\t\tthis.onScroll(e);\n\t\t\t}\n\t\t},\n\t\t_handleSelectStart: function (e) {\n\t\t\tvar menuOpen = this._contextMenuOpen;\n\t\t\tthis._contextMenuOpen = false;\n\t\t\tif (menuOpen) {\n\t\t\t\tthis._checkSelectionChange = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._ignoreSelect) {\n\t\t\t\tif (e && e.preventDefault) { e.preventDefault(); }\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t_getModelOffset: function(node, offset) {\n\t\t\tif (!node) { return; }\n\t\t\tvar lineNode;\n\t\t\tif (node.tagName === \"DIV\") { //$NON-NLS-1$\n\t\t\t\tlineNode = node;\n\t\t\t} else {\n\t\t\t\tlineNode = node.parentNode.parentNode;\n\t\t\t}\n\t\t\tif (!lineNode._line) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn lineNode._line.getModelOffset (node, offset);\n\t\t},\n\t\t_updateSelectionFromDOM: function() {\n\t\t\tif (!(util.isIOS || util.isAndroid || this._checkSelectionChange)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tvar selection = win.getSelection();\n\t\t\tvar start = this._getModelOffset(selection.anchorNode, selection.anchorOffset);\n\t\t\tvar end = this._getModelOffset(selection.focusNode, selection.focusOffset);\n\t\t\tvar sel = this._getSelections()[0];\n\t\t\tif (start === undefined || end === undefined || (sel.start === start && sel.end === end)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._checkSelectionChange) {\n\t\t\t\tvar firstLine = this._getLineNext();\n\t\t\t\tvar lastLine = this._getLinePrevious();\n\t\t\t\t\n\t\t\t\t// Selection is unchanged and bigger than the visible buffer region\n\t\t\t\tif (selection.anchorNode === firstLine.firstChild.firstChild && selection.anchorOffset === 0 &&\n\t\t\t\t\tselection.focusNode === lastLine.firstChild.firstChild && selection.focusOffset === 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Detect select all\n\t\t\t\tif (\n\t\t\t\t(selection.anchorNode === firstLine.firstChild.firstChild && selection.anchorOffset === 0 && selection.focusNode === lastLine.lastChild.firstChild)\n\t\t\t\t|| (selection.anchorNode === this._clientDiv && selection.focusNode === this._clientDiv)\n\t\t\t\t) {\n\t\t\t\t\tstart = 0;\n\t\t\t\t\tend = this.getModel().getCharCount();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setSelection(new Selection(start, end), false, false);\n\t\t\tthis._checkSelectionChange = false;\n\t\t\treturn true;\n\t\t},\n\t\t_cancelCheckSelection: function() {\n\t\t\tif (this._checkSelectionChange) {\n\t\t\t\tthis._checkSelectionChange = false;\n\t\t\t\tthis._cancelPollSelectionChange();\n\t\t\t}\n\t\t},\n\t\t_cancelPollSelectionChange: function() {\n\t\t\tif (this._selPollTimer) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._selPollTimer);\n\t\t\t\tthis._selPollTimer = null; \n\t\t\t}\n\t\t},\n\t\t_pollSelectionChange: function(retryPoll) {\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._cancelPollSelectionChange();\n\t\t\tthis._selPollTimer = win.setTimeout(function() {\n\t\t\t\tthat._selPollTimer = null; \n\t\t\t\tif (!that._clientDiv) { return; }\n\t\t\t\tvar changed = that._updateSelectionFromDOM();\n\t\t\t\tif (!changed && retryPoll) {\n\t\t\t\t\tthat._pollSelectionChange(retryPoll);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t},\n\t\t_handleSelectionChange: function () {\n\t\t\tif (this._imeOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t/*\n\t\t\t * Feature in Android. The selection handles are hidden when the DOM changes. Sending\n\t\t\t * selection events to the application while the user is moving the selection handles\n\t\t\t * may hide the handles unexpectedly.  The fix is to delay updating the selection and\n\t\t\t * sending the event to the application.\n\t\t\t */\n\t\t\tif (util.isAndroid) {\n\t\t\t\tthis._pollSelectionChange();\n\t\t\t} else {\n\t\t\t\tthis._updateSelectionFromDOM();\n\t\t\t}\n\t\t},\n\t\t_handleTextInput: function (e) {\n\t\t\tif (this._ignoreEvent(e)) { return; }\n\t\t\tif (this._imeOffset !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar selection = this._getWindow().getSelection();\n\t\t\tif (\n\t\t\t\tselection.anchorNode !== this._anchorNode || selection.focusNode !== this._focusNode ||\n\t\t\t\tselection.anchorOffset !== this._anchorOffset || selection.focusOffset !== this._focusOffset\n\t\t\t) {\n\t\t\t\tvar temp = selection.anchorNode;\n\t\t\t\twhile (temp) {\n\t\t\t\t\tif (temp.lineIndex !== undefined) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttemp = temp.parentNode;\n\t\t\t\t}\n\t\t\t\tif (temp) {\n\t\t\t\t\tvar model = this._model;\n\t\t\t\t\tvar lineIndex = temp.lineIndex;\n\t\t\t\t\tvar oldText = model.getLine(lineIndex), text = oldText;\n\t\t\t\t\tvar offset = 0;\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tif (selection.rangeCount > 0) {\n\t\t\t\t\t\tselection.getRangeAt(0).deleteContents();\n\t\t\t\t\t\tvar node = temp.ownerDocument.createTextNode(e.data);\n\t\t\t\t\t\tselection.getRangeAt(0).insertNode(node);\n\t\t\t\t\t\tvar nodeText = this._getDOMText(temp, node);\n\t\t\t\t\t\ttext = nodeText.text;\n\t\t\t\t\t\toffset = nodeText.offset;\n\t\t\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\t\t}\n\t\t\t\t\ttemp.lineRemoved = true;\n\t\t\t\t\t\n\t\t\t\t\tvar start = 0;\n\t\t\t\t\twhile (oldText.charCodeAt(start) === text.charCodeAt(start) && start < offset) {\n\t\t\t\t\t\tstart++;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tvar end = oldText.length - 1, delta = text.length - oldText.length;\n\t\t\t\t\twhile (oldText.charCodeAt(end) === text.charCodeAt(end + delta) && end + delta >= offset + e.data.length) {\n\t\t\t\t\t\tend--;\n\t\t\t\t\t}\n\t\t\t\t\tend++;\n\t\t\t\t\t\n\t\t\t\t\tvar deltaText = text.substring(start, end + delta);\n\t\t\t\t\tstart += lineStart;\n\t\t\t\t\tend += lineStart;\n\t\t\t\t\t\n\t\t\t\t\tvar selections = this._getSelections();\n\t\t\t\t\tvar deltaStart = selections[0].start - start;\n\t\t\t\t\tvar deltaEnd = selections[0].end - end;\n\t\t\t\t\tselections[0].start = start;\n\t\t\t\t\tselections[0].end = end;\n\t\t\t\t\tfor (var i=1; i<selections.length; i++) {\n\t\t\t\t\t\tselections[i].start -= deltaStart;\n\t\t\t\t\t\tselections[i].end -= deltaEnd;\n\t\t\t\t\t}\n\t\t\t\t\tthis._modifyContent({text: deltaText, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._doContent(e.data);\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t},\n\t\t_handleTouchStart: function (e) {\n\t\t\tif (this.isListening(\"TouchStart\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchStart\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchStart(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._commitIME();\n\t\t\tvar win = this._getWindow();\n\t\t\tif (this._touchScrollTimer) {\n\t\t\t\tthis._vScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\twin.clearInterval(this._touchScrollTimer);\n\t\t\t\tthis._touchScrollTimer = null;\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 1) {\n\t\t\t\tvar touch = touches[0];\n\t\t\t\tvar x = touch.clientX, y = touch.clientY;\n\t\t\t\tthis._touchStartX = x;\n\t\t\t\tthis._touchStartY = y;\n\t\t\t\tif (util.isAndroid) {\n\t\t\t\t\t/*\n\t\t\t\t\t* Bug in Android 4.  The clientX/Y coordinates of the touch events\n\t\t\t\t\t* include the page scrolling offsets.\n\t\t\t\t\t*/\n\t\t\t\t    if (y < (touch.pageY - win.pageYOffset) || x < (touch.pageX - win.pageXOffset) ) {\n\t\t\t\t\t\tx = touch.pageX - win.pageXOffset;\n\t\t\t\t\t\ty = touch.pageY - win.pageYOffset;\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t\tvar pt = this.convert({x: x, y: y}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tthis._lastTouchOffset = this.getOffsetAtLocation(pt.x, pt.y);\n\t\t\t\tthis._touchStartTime = e.timeStamp;\n\t\t\t\tthis._touching = true;\n\t\t\t}\n\t\t},\n\t\t_handleTouchMove: function (e) {\n\t\t\tif (this.isListening(\"TouchMove\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchMove\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchMove(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 1) {\n\t\t\t\tvar touch = touches[0];\n\t\t\t\tthis._touchCurrentX = touch.clientX;\n\t\t\t\tthis._touchCurrentY = touch.clientY;\n\t\t\t\tvar interval = 10;\n\t\t\t\tif (!this._touchScrollTimer && (e.timeStamp - this._touchStartTime) < (interval*20)) {\n\t\t\t\t\tthis._vScrollDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\t\tthis._hScrollDiv.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t\tvar that = this;\n\t\t\t\t\tvar win = this._getWindow();\n\t\t\t\t\tthis._touchScrollTimer = win.setInterval(function() {\n\t\t\t\t\t\tvar deltaX = 0, deltaY = 0;\n\t\t\t\t\t\tif (that._touching) {\n\t\t\t\t\t\t\tdeltaX = that._touchStartX - that._touchCurrentX;\n\t\t\t\t\t\t\tdeltaY = that._touchStartY - that._touchCurrentY;\n\t\t\t\t\t\t\tthat._touchSpeedX = deltaX / interval;\n\t\t\t\t\t\t\tthat._touchSpeedY = deltaY / interval;\n\t\t\t\t\t\t\tthat._touchStartX = that._touchCurrentX;\n\t\t\t\t\t\t\tthat._touchStartY = that._touchCurrentY;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (Math.abs(that._touchSpeedX) < 0.1 && Math.abs(that._touchSpeedY) < 0.1) {\n\t\t\t\t\t\t\t\tthat._vScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\t\tthat._hScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\t\twin.clearInterval(that._touchScrollTimer);\n\t\t\t\t\t\t\t\tthat._touchScrollTimer = null;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdeltaX = that._touchSpeedX * interval;\n\t\t\t\t\t\t\t\tdeltaY = that._touchSpeedY * interval;\n\t\t\t\t\t\t\t\tthat._touchSpeedX *= 0.95;\n\t\t\t\t\t\t\t\tthat._touchSpeedY *= 0.95;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthat._scrollView(deltaX, deltaY);\n\t\t\t\t\t}, interval);\n\t\t\t\t}\n\t\t\t\tif (this._touchScrollTimer) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_handleTouchEnd: function (e) {\n\t\t\tif (this.isListening(\"TouchEnd\")) { //$NON-NLS-1$\n\t\t\t\tvar touchEvent = this._createTouchEvent(\"TouchEnd\", e); //$NON-NLS-1$\n\t\t\t\tthis.onTouchEnd(touchEvent);\n\t\t\t\tif (touchEvent.defaultPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._noScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar touches = e.touches;\n\t\t\tif (touches.length === 0) {\n\t\t\t\tthis._touching = false;\n\t\t\t}\n\t\t},\n\n\t\t/************************************ Actions ******************************************/\n\t\t_doAction: function (e) {\n\t\t\tvar mode, i;\n\t\t\tvar keyModes = this._keyModes;\n\t\t\tfor (i = keyModes.length - 1 ; i >= 0; i--) {\n\t\t\t\tmode = keyModes[i];\n\t\t\t\tif (typeof mode.match === \"function\") { //$NON-NLS-1$\n\t\t\t\t\tvar actionID = mode.match(e);\n\t\t\t\t\tif (actionID !== undefined) {\n\t\t\t\t\t\treturn this.invokeAction(actionID);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_doMove: function(args, selection) {\n\t\t\tvar model = this._model;\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar lineIndex = model.getLineAtOffset(caret);\n\t\t\tif (!args.count) {\n\t\t\t\targs.count = 1;\n\t\t\t}\n\t\t\twhile (args.count !== 0) {\n\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\tif (args.count < 0 && caret === lineStart) {\n\t\t\t\t\tif (lineIndex > 0) {\n\t\t\t\t\t\tif (args.unit === \"character\") { //$NON-NLS-1$\n\t\t\t\t\t\t\targs.count++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\tselection.extend(model.getLineEnd(lineIndex));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if (args.count > 0 && caret === model.getLineEnd(lineIndex)) {\n\t\t\t\t\tif (lineIndex + 1 < model.getLineCount()) {\n\t\t\t\t\t\tif (args.unit === \"character\") { //$NON-NLS-1$\n\t\t\t\t\t\t\targs.count--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t\tselection.extend(model.getLineStart(lineIndex));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar removeTab = false;\n\t\t\t\t\tif (args.expandTab && args.unit === \"character\" && (caret - lineStart) % this._tabSize === 0) { //$NON-NLS-1$\n\t\t\t\t\t\tvar lineText = model.getText(lineStart, caret);\n\t\t\t\t\t\tremoveTab = !/[^ ]/.test(lineText); // Only spaces between line start and caret.\n\t\t\t\t\t}\n\t\t\t\t\tif (removeTab) {\n\t\t\t\t\t\tselection.extend(caret - this._tabSize);\n\t\t\t\t\t\targs.count += args.count < 0 ? 1 : -1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar line = this._getLine(lineIndex);\n\t\t\t\t\t\tselection.extend(line.getNextOffset(caret, args));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcaret = selection.getCaret();\n\t\t\t}\n\t\t\treturn selection;\n\t\t},\n\t\t_doBackspace: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\tif (!args.count) {\n\t\t\t\t\t\targs.count = 1;\n\t\t\t\t\t}\n\t\t\t\t\targs.count *= -1;\n\t\t\t\t\targs.expandTab = that._expandTab;\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCase: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar changes = [];\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tthat._doMove(args, selection);\n\t\t\t\tvar text = that.getText(selection.start, selection.end);\n\t\t\t\tswitch (args.type) {\n\t\t\t\t\tcase \"lower\": text = text.toLowerCase(); break; //$NON-NLS-1$\n\t\t\t\t\tcase \"capitalize\": text = text.replace(/(?:^|\\s)\\S/g, function(a) { return a.toUpperCase(); }); break; //$NON-NLS-1$\n\t\t\t\t\tcase \"reverse\":  //$NON-NLS-1$\n\t\t\t\t\t\tvar newText = \"\";\n\t\t\t\t\t\tfor (var i=0; i<text.length; i++) {\n\t\t\t\t\t\t\tvar s = text[i];\n\t\t\t\t\t\t\tvar l = s.toLowerCase();\n\t\t\t\t\t\t\tif (l !== s) {\n\t\t\t\t\t\t\t\ts = l;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ts = s.toUpperCase();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnewText += s;\n\t\t\t\t\t\t} \n\t\t\t\t\t\ttext = newText;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault: text = text.toUpperCase(); break;\n\t\t\t\t}\n\t\t\t\tchanges.push(text);\n\t\t\t});\n\t\t\treturn this._modifyContent({text: changes, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doContent: function (text) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (that._overwriteMode && selection.isEmpty()) {\n\t\t\t\t\tvar model = that._model;\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(selection.end);\n\t\t\t\t\tif (selection.end < model.getLineEnd(lineIndex)) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tselection.extend(line.getNextOffset(selection.getCaret(), {unit:\"character\", count:1})); //$NON-NLS-1$\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this._modifyContent({text: text, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doCopy: function (e) {\n\t\t\tvar text = this.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\treturn this._setClipboardText(text, e);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doCursorNext: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty() && !args.select) {\n\t\t\t\t\tselection.start = selection.end;\n\t\t\t\t} else {\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCursorPrevious: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (!selection.isEmpty() && !args.select) {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t} else {\n\t\t\t\t\tif (!args.count) {\n\t\t\t\t\t\targs.count = 1;\n\t\t\t\t\t}\n\t\t\t\t\targs.count *= -1;\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doCut: function (e) {\n\t\t\tvar text = this.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\tif (!this._setClipboardText(text, e)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis._doContent(\"\");\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doDelete: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\tthat._doMove(args, selection);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doEnd: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (args.ctrl) {\n\t\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\t\tif (that._wrapMode) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tvar visualIndex = line.getLineIndex(offset);\n\t\t\t\t\t\tif (visualIndex === line.getLineCount() - 1) {\n\t\t\t\t\t\t\toffset = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toffset = line.getLineStart(visualIndex + 1) - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\t\tlineIndex = Math.min (lineIndex  + args.count - 1, model.getLineCount() - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset = model.getLineEnd(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(offset);\n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, args.ctrl ? function() {} : null);\n\t\t\treturn true;\n\t\t},\n\t\t_doEnter: function (args) {\n\t\t\tif (this._singleMode) return true;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tthis._doContent(model.getLineDelimiter()); \n\t\t\tif (args && args.noCursor) {\n\t\t\t\tselections.forEach(function(selection) {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t});\n\t\t\t\tthis._setSelection(selections, true);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doEscape: function () {\n\t\t\tvar selections = this._getSelections();\n\t\t\tif (selections.length > 1) {\n\t\t\t\tthis._setSelection(selections[0], true);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doHome: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (args.ctrl) {\n\t\t\t\t\tselection.extend(0);\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\t\tif (that._wrapMode) {\n\t\t\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\t\t\tvar visualIndex = line.getLineIndex(offset);\n\t\t\t\t\t\toffset = line.getLineStart(visualIndex);\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t} else {\n\t\t\t\t\t\toffset = model.getLineStart(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(offset); \n\t\t\t\t}\n\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, args.ctrl ? function() {} : null);\n\t\t\treturn true;\n\t\t},\n\t\t_doLineDown: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caret), visualIndex;\n\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\tvar x = selection._columnX, y = 1, lastLine = false;\n\t\t\t\tif (x === -1 || args.wholeLine || (args.select && util.isIE)) {\n\t\t\t\t\tvar offset = args.wholeLine ? model.getLineEnd(lineIndex + 1) : caret;\n\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(offset).left;\n\t\t\t\t}\n\t\t\t\tif ((visualIndex = line.getLineIndex(caret)) < line.getLineCount() - 1) {\n\t\t\t\t\ty = line.getClientRects(visualIndex + 1).top + 1;\n\t\t\t\t} else {\n\t\t\t\t\tvar lastLineCount = model.getLineCount() - 1;\n\t\t\t\t\tlastLine = lineIndex === lastLineCount;\n\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\tlineIndex = Math.min (lineIndex + args.count, lastLineCount);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar select = false;\n\t\t\t\tif (lastLine) {\n\t\t\t\t\tif (args.select || (util.isMac || util.isLinux)) {\n\t\t\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t\t\t\tselect = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (line.lineIndex !== lineIndex) {\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(line.getOffset(x, y));\n\t\t\t\t\tselect = true;\n\t\t\t\t}\n\t\t\t\tif (select) {\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t}\n\t\t\t\tline.destroy();\n\t\t\t});\n\t\t\tthat._setSelection(selections, true, true, null, 0, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doLineUp: function (args) {\n\t\t\tvar model = this._model;\n\t\t\tvar that = this;\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caret), visualIndex;\n\t\t\t\tvar line = that._getLine(lineIndex);\n\t\t\t\tvar x = selection._columnX, firstLine = false, y;\n\t\t\t\tif (x === -1 || args.wholeLine || (args.select && util.isIE)) {\n\t\t\t\t\tvar offset = args.wholeLine ? model.getLineStart(lineIndex - 1) : caret;\n\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(offset).left;\n\t\t\t\t}\n\t\t\t\tif ((visualIndex = line.getLineIndex(caret)) > 0) {\n\t\t\t\t\ty = line.getClientRects(visualIndex - 1).top + 1;\n\t\t\t\t} else {\n\t\t\t\t\tfirstLine = lineIndex === 0;\n\t\t\t\t\tif (!firstLine) {\n\t\t\t\t\t\tif (args.count && args.count > 0) {\n\t\t\t\t\t\t\tlineIndex = Math.max (lineIndex - args.count, 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ty = that._getLineHeight(lineIndex) - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar select = false;\n\t\t\t\tif (firstLine) {\n\t\t\t\t\tif (args.select || (util.isMac || util.isLinux)) {\n\t\t\t\t\t\tselection.extend(0);\n\t\t\t\t\t\tselect = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (line.lineIndex !== lineIndex) {\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\t}\n\t\t\t\t\tselection.extend(line.getOffset(x, y));\n\t\t\t\t\tselect = true;\n\t\t\t\t}\n\t\t\t\tif (select) {\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t}\n\t\t\t\tline.destroy();\n\t\t\t});\n\t\t\tthat._setSelection(selections, true, true, null, 0, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doNoop: function () {\n\t\t\treturn true;\n\t\t},\n\t\t_doPageDown: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar lines = Math.floor(clientHeight / lineHeight);\n\t\t\tvar x, line, pageScroll;\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar caretLine = model.getLineAtOffset(caret);\n\t\t\t\tif (that._lineHeight) {\n\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\tvar caretRect = that._getBoundsAtOffset(caret);\n\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\tx = selection._columnX = caretRect.left;\n\t\t\t\t\t}\n\t\t\t\t\tvar lineIndex = that._getLineIndex(caretRect.top + clientHeight);\n\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\tvar linePixel = that._getLinePixel(lineIndex);\n\t\t\t\t\tvar y = caretRect.top + clientHeight - linePixel;\n\t\t\t\t\tcaret = line.getOffset(x, y);\n\t\t\t\t\tvar rect = line.getBoundingClientRect(caret);\n\t\t\t\t\tline.destroy();\n\t\t\t\t\tselection.extend(caret);\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.min(pageScroll, rect.top + linePixel - caretRect.top) : rect.top + linePixel - caretRect.top;\n\t\t\t\t} else {\n\t\t\t\t\tif (caretLine < lineCount - 1) {\n\t\t\t\t\t\tvar scrollLines = Math.min(lineCount - caretLine - 1, lines);\n\t\t\t\t\t\tscrollLines = Math.max(1, scrollLines);\n\t\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\t\tline = that._getLine(caretLine);\n\t\t\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(caret).left;\n\t\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = that._getLine(caretLine + scrollLines);\n\t\t\t\t\t\tselection.extend(line.getOffset(x, 0));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\t\tvar verticalMaximum = lineCount * lineHeight;\n\t\t\t\t\t\tvar scrollOffset = _scroll.y + scrollLines * lineHeight;\n\t\t\t\t\t\tif (scrollOffset + clientHeight > verticalMaximum) {\n\t\t\t\t\t\t\tscrollOffset = verticalMaximum - clientHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.min(pageScroll, scrollOffset - _scroll.y) : scrollOffset - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, function() {}, pageScroll, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doPageUp: function (args) {\n\t\t\tvar that = this;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar lines = Math.floor(clientHeight / lineHeight);\n\t\t\tvar x, line, pageScroll;\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\tvar caretLine = model.getLineAtOffset(caret);\n\t\t\t\tif (that._lineHeight) {\n\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\tvar caretRect = that._getBoundsAtOffset(caret);\n\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\tx = selection._columnX = caretRect.left;\n\t\t\t\t\t}\n\t\t\t\t\tvar lineIndex = that._getLineIndex(caretRect.bottom - clientHeight);\n\t\t\t\t\tline = that._getLine(lineIndex);\n\t\t\t\t\tvar linePixel = that._getLinePixel(lineIndex);\n\t\t\t\t\tvar y = (caretRect.bottom - clientHeight) - linePixel;\n\t\t\t\t\tcaret = line.getOffset(x, y);\n\t\t\t\t\tvar rect = line.getBoundingClientRect(caret);\n\t\t\t\t\tline.destroy();\n\t\t\t\t\tselection.extend(caret);\n\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\tpageScroll = pageScroll !== undefined ? Math.max(pageScroll, rect.top + linePixel - caretRect.top) : rect.top + linePixel - caretRect.top;\n\t\t\t\t} else {\n\t\t\t\t\tif (caretLine > 0) {\n\t\t\t\t\t\tvar scrollLines = Math.max(1, Math.min(caretLine, lines));\n\t\t\t\t\t\tx = selection._columnX;\n\t\t\t\t\t\tif (x === -1 || (args.select && util.isIE)) {\n\t\t\t\t\t\t\tline = that._getLine(caretLine);\n\t\t\t\t\t\t\tx = selection._columnX = line.getBoundingClientRect(caret).left;\n\t\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = that._getLine(caretLine - scrollLines);\n\t\t\t\t\t\tselection.extend(line.getOffset(x, that._getLineHeight(caretLine - scrollLines) - 1));\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t\tif (!args.select) { selection.collapse(); }\n\t\t\t\t\t\tvar scrollOffset = Math.max(0, _scroll.y - scrollLines * lineHeight);\n\t\t\t\t\t\tpageScroll = pageScroll !== undefined  ? Math.max(pageScroll, scrollOffset - _scroll.y) : scrollOffset - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true, true, function() {}, pageScroll, false, true);\n\t\t\treturn true;\n\t\t},\n\t\t_doPaste: function(e) {\n\t\t\tvar that = this;\n\t\t\tvar result = this._getClipboardText(e, function(text) {\n\t\t\t\tif (text.length) {\n\t\t\t\t\tif (util.isLinux && that._lastMouseButton === 2) {\n\t\t\t\t\t\tvar timeDiff = Date.now() - that._lastMouseTime;\n\t\t\t\t\t\tif (timeDiff <= that._clickTime) {\n\t\t\t\t\t\t\tthat._setSelectionTo(that._lastMouseX, that._lastMouseY, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar selections = that._getSelections();\n\t\t\t\t\tvar delimiter = that._singleMode ? \"\" : that._model.getLineDelimiter();\n\t\t\t\t\tthat._doContent(selections.length > 1 && selections.length === text.length ? text : text.join(delimiter));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result !== null;\n\t\t},\n\t\t_doScroll: function (args) {\n\t\t\tvar type = args.type;\n\t\t\tvar model = this._model;\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar verticalMaximum = this._lineHeight ? this._scrollHeight : lineCount * lineHeight;\n\t\t\tvar verticalScrollOffset = this._getScroll().y;\n\t\t\tvar pixel;\n\t\t\tswitch (type) {\n\t\t\t\tcase \"textStart\": pixel = 0; break; //$NON-NLS-1$\n\t\t\t\tcase \"textEnd\": pixel = verticalMaximum - clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"pageDown\": pixel = verticalScrollOffset + clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"pageUp\": pixel = verticalScrollOffset - clientHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"lineDown\": pixel = verticalScrollOffset + lineHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"lineUp\": pixel = verticalScrollOffset - lineHeight; break; //$NON-NLS-1$\n\t\t\t\tcase \"centerLine\": //$NON-NLS-1$\n\t\t\t\t\tvar selection = this._getSelections()[0];\n\t\t\t\t\tvar lineStart = model.getLineAtOffset(selection.start);\n\t\t\t\t\tvar lineEnd = model.getLineAtOffset(selection.end);\n\t\t\t\t\tvar selectionHeight = (lineEnd - lineStart + 1) * lineHeight;\n\t\t\t\t\tpixel = (lineStart * lineHeight) - (clientHeight / 2) + (selectionHeight / 2);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (pixel !== undefined) {\n\t\t\t\tpixel = Math.min(Math.max(0, pixel), verticalMaximum - clientHeight);\n\t\t\t\tthis._scrollViewAnimated(0, pixel - verticalScrollOffset, function() {});\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_doSelectAll: function () {\n\t\t\tvar model = this._model;\n\t\t\tthis._setSelection(new Selection(0, model.getCharCount()), false);\n\t\t\treturn true;\n\t\t},\n\t\t_doTab: function () {\n\t\t\tif (!this._tabMode || this._readonly) { return; }\n\t\t\tvar text = \"\\t\"; //$NON-NLS-1$\n\t\t\tvar selections = this._getSelections();\n\t\t\tif (this._expandTab) {\n\t\t\t\ttext = [];\n\t\t\t\tvar model = this._model;\n\t\t\t\tvar tabSize = this._tabSize;\n\t\t\t\tselections.forEach(function(selection) {\n\t\t\t\t\tvar caret = selection.getCaret();\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(caret);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tvar spaces = tabSize - ((caret - lineStart) % tabSize);\n\t\t\t\t\ttext.push((newArray(spaces + 1)).join(\" \")); //$NON-NLS-1$\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this._modifyContent({text: text, selection: selections, _ignoreDOMSelection: true}, true);\n\t\t},\n\t\t_doShiftTab: function () {\n\t\t\tif (!this._tabMode || this._readonly) { return; }\n\t\t\treturn true;\n\t\t},\n\t\t_doOverwriteMode: function () {\n\t\t\tif (this._readonly) { return; }\n\t\t\tthis.setOptions({overwriteMode: !this.getOptions(\"overwriteMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_doTabMode: function () {\n\t\t\tthis.setOptions({tabMode: !this.getOptions(\"tabMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_doWrapMode: function () {\n\t\t\tthis.setOptions({wrapMode: !this.getOptions(\"wrapMode\")}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t\n\t\t/************************************ Internals ******************************************/\n\t\t_autoScroll: function () {\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar selection = Selection.editing(selections, this._autoScrollDir === \"down\"); //$NON-NLS-1$\n\t\t\tvar pt = this.convert({x: this._autoScrollX, y: this._autoScrollY}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar caretLine = model.getLineAtOffset(caret), lineIndex, line;\n\t\t\tif (this._autoScrollDir === \"up\" || this._autoScrollDir === \"down\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tvar _scroll = this._autoScrollY / this._getLineHeight();\n\t\t\t\t_scroll = _scroll < 0 ? Math.floor(_scroll) : Math.ceil(_scroll);\n\t\t\t\tlineIndex = caretLine;\n\t\t\t\tlineIndex = Math.max(0, Math.min(lineCount - 1, lineIndex + _scroll));\n\t\t\t} else if (this._autoScrollDir === \"left\" || this._autoScrollDir === \"right\") { //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\tlineIndex = this._getLineIndex(pt.y);\n\t\t\t\tline = this._getLine(caretLine); \n\t\t\t\tpt.x += line.getBoundingClientRect(caret, false).left;\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tif (this._blockSelection) {\n\t\t\t\tselections = this._getBlockSelections(selections, lineIndex, pt);\n\t\t\t} else if (lineIndex === 0 && (util.isMac || util.isLinux)) {\n\t\t\t\tselection.extend(0);\n\t\t\t} else if (lineIndex === lineCount - 1 && (util.isMac || util.isLinux)) {\n\t\t\t\tselection.extend(model.getCharCount());\n\t\t\t} else {\n\t\t\t\tline = this._getLine(lineIndex);\n\t\t\t\tselection.extend(line.getOffset(pt.x, pt.y - this._getLinePixel(lineIndex)));\n\t\t\t\tline.destroy();\n\t\t\t}\n\t\t\tthis._setSelection(selections, true);\n\t\t},\n\t\t_autoScrollTimer: function () {\n\t\t\tthis._autoScroll();\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._autoScrollTimerID = win.setTimeout(function () {that._autoScrollTimer();}, this._AUTO_SCROLL_RATE);\n\t\t},\n\t\t_calculateLineHeightTimer: function(calculate) {\n\t\t\tif (!this._lineHeight) { return; }\n\t\t\tif (this._calculateLHTimer) { return; }\n\t\t\tvar lineCount = this._model.getLineCount(), i = 0;\n\t\t\tif (calculate) {\n\t\t\t\tvar c = 0;\n\t\t\t\tvar MAX_TIME = 100;\n\t\t\t\tvar start = Date.now(), firstLine = 0;\n\t\t\t\twhile (i < lineCount) {\n\t\t\t\t\tif (!this._lineHeight[i]) {\n\t\t\t\t\t\tc++;\n\t\t\t\t\t\tif (!firstLine) { firstLine = i; }\n\t\t\t\t\t\tthis._lineHeight[i] = this._calculateLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t\ti++;\n\t\t\t\t\tif ((Date.now() - start) > MAX_TIME) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.redrawRulers(0, lineCount);\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tif (i !== lineCount) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._calculateLHTimer = win.setTimeout(function() {\n\t\t\t\t\tthat._calculateLHTimer = null;\n\t\t\t\t\tthat._calculateLineHeightTimer(true);\n\t\t\t\t}, 0);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._calculateLHTimer) {\n\t\t\t\twin.clearTimeout(this._calculateLHTimer);\n\t\t\t\tthis._calculateLHTimer = undefined;\n\t\t\t}\n\t\t},\n\t\t_calculateLineHeight: function(lineIndex) {\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar rect = line.getBoundingClientRect();\n\t\t\tline.destroy();\n\t\t\treturn Math.max(1, rect.bottom - rect.top);\n\t\t},\n\t\t_calculateMetrics: function() {\n\t\t\tvar _parent = this._clientDiv;\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar c = \" \"; //$NON-NLS-1$\n\t\t\tvar line = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tline.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\tvar model = this._model;\n\t\t\tvar lineText = model.getLine(0);\n\t\t\tvar e = {type:\"LineStyle\", textView: this, 0: 0, lineText: lineText, lineStart: 0}; //$NON-NLS-1$\n\t\t\tthis.onLineStyle(e);\n\t\t\tapplyStyle(e.style, line);\n\t\t\tline.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tline.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tvar span1 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan1.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span1);\n\t\t\tvar span2 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan2.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\tspan2.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span2);\n\t\t\tvar span3 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan3.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\tspan3.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span3);\n\t\t\tvar span4 = util.createElement(doc, \"span\"); //$NON-NLS-1$\n\t\t\tspan4.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\tspan4.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\tspan4.appendChild(doc.createTextNode(c));\n\t\t\tline.appendChild(span4);\n\t\t\t_parent.appendChild(line);\n\t\t\tvar lineRect = line.getBoundingClientRect();\n\t\t\tvar spanRect1 = span1.getBoundingClientRect();\n\t\t\tvar spanRect2 = span2.getBoundingClientRect();\n\t\t\tvar spanRect3 = span3.getBoundingClientRect();\n\t\t\tvar spanRect4 = span4.getBoundingClientRect();\n\t\t\tvar h1 = spanRect1.bottom - spanRect1.top;\n\t\t\tvar h2 = spanRect2.bottom - spanRect2.top;\n\t\t\tvar h3 = spanRect3.bottom - spanRect3.top;\n\t\t\tvar h4 = spanRect4.bottom - spanRect4.top;\n\t\t\tvar fontStyle = 0;\n\t\t\tvar invalid = (lineRect.bottom - lineRect.top) <= 0;\n\t\t\tvar lineHeight = Math.max(1, lineRect.bottom - lineRect.top);\n\t\t\tif (h2 > h1) {\n\t\t\t\tfontStyle = 1;\n\t\t\t}\n\t\t\tif (h3 > h2) {\n\t\t\t\tfontStyle = 2;\n\t\t\t}\n\t\t\tif (h4 > h3) {\n\t\t\t\tfontStyle = 3;\n\t\t\t}\n\t\t\tvar style;\n\t\t\tif (fontStyle !== 0) {\n\t\t\t\tstyle = {style: {}};\n\t\t\t\tif ((fontStyle & 1) !== 0) {\n\t\t\t\t\tstyle.style.fontStyle = \"italic\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif ((fontStyle & 2) !== 0) {\n\t\t\t\t\tstyle.style.fontWeight = \"bold\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar trim = getLineTrim(line);\n\t\t\t_parent.removeChild(line);\n\t\t\t\n\t\t\t// calculate pad and scroll width\n\t\t\tvar pad = getPadding(this._viewDiv);\n\t\t\tvar div1 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingLeft = pad.left + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingTop = pad.top + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingRight = pad.right + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.paddingBottom = pad.bottom + \"px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.width = \"100px\"; //$NON-NLS-1$\n\t\t\tdiv1.style.height = \"100px\"; //$NON-NLS-1$\n\t\t\tvar div2 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv2.style.width = \"100%\"; //$NON-NLS-1$\n\t\t\tdiv2.style.height = \"100%\"; //$NON-NLS-1$\n\t\t\tdiv1.appendChild(div2);\n\t\t\t_parent.appendChild(div1);\n\t\t\tvar rect1 = div1.getBoundingClientRect();\n\t\t\tvar rect2 = div2.getBoundingClientRect();\n\t\t\tvar scrollWidth = 0;\n\t\t\tif (!this._singleMode && !this._noScroll) {\n\t\t\t\tdiv1.style.overflow = 'hidden'; //$NON-NLS-1$\n\t\t\t\tdiv2.style.height = \"200px\"; //$NON-NLS-1$\n\t\t\t\tvar w1 = div1.clientWidth;\n\t\t\t\tdiv1.style.overflow = 'scroll'; //$NON-NLS-1$\n\t\t\t\tvar w2 = div1.clientWidth;\n\t\t\t\tscrollWidth = w1 - w2;\n\t\t\t}\n\t\t\t_parent.removeChild(div1);\n\t\t\tpad = {\n\t\t\t\tleft: rect2.left - rect1.left,\n\t\t\t\ttop: rect2.top - rect1.top,\n\t\t\t\tright: rect1.right - rect2.right,\n\t\t\t\tbottom: rect1.bottom - rect2.bottom\n\t\t\t};\n\t\t\tvar wrapWidth = 0, marginWidth = 0, charWidth = 0;\n\t\t\tif (!invalid) {\n\t\t\t\tdiv1 = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\t_parent.appendChild(div1);\n\t\t\t\tdiv1.innerHTML = newArray(2).join(\"a\"); //$NON-NLS-1$\n\t\t\t\trect1 = div1.getBoundingClientRect();\n\t\t\t\tcharWidth = Math.ceil(rect1.right - rect1.left);\n\t\t\t\tif (this._wrapOffset || this._marginOffset) {\n\t\t\t\t\tdiv1.innerHTML = newArray(this._wrapOffset + 1 + (util.isWebkit ? 0 : 1)).join(\" \"); //$NON-NLS-1$\n\t\t\t\t\trect1 = div1.getBoundingClientRect();\n\t\t\t\t\twrapWidth = Math.ceil(rect1.right - rect1.left);\n\t\t\t\t\tdiv1.innerHTML = newArray(this._marginOffset + 1).join(\" \"); //$NON-NLS-1$\n\t\t\t\t\trect2 = div1.getBoundingClientRect();\n\t\t\t\t\tmarginWidth = Math.ceil(rect2.right - rect2.left);\n\t\t\t\t}\n\t\t\t\t_parent.removeChild(div1);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tlineHeight: lineHeight,\n\t\t\t\tlargestFontStyle: style,\n\t\t\t\tlineTrim: trim,\n\t\t\t\tviewPadding: pad,\n\t\t\t\tscrollWidth: scrollWidth,\n\t\t\t\twrapWidth: wrapWidth,\n\t\t\t\tmarginWidth: marginWidth,\n\t\t\t\tcharWidth: charWidth,\n\t\t\t\tinvalid: invalid\n\t\t\t};\n\t\t},\n\t\t_cancelAnimation: function() {\n\t\t\tif (this._animation) {\n\t\t\t\tthis._animation.stop();\n\t\t\t\tthis._animation = null;\n\t\t\t}\n\t\t},\n\t\t_clearSelection: function (direction) {\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (direction === \"next\") { //$NON-NLS-1$\n\t\t\t\t\tselection.start = selection.end;\n\t\t\t\t} else {\n\t\t\t\t\tselection.end = selection.start;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, true);\n\t\t\treturn true;\n\t\t},\n\t\t_commitIME: function (insertText) {\n\t\t\tif (this._imeOffset === -1) { return; }\n\t\t\tvar model = this._model;\n\t\t\tvar lineIndex = model.getLineAtOffset(this._imeOffset);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar line = this._getLineNode(lineIndex);\n\t\t\tif (!insertText) {\n\t\t\t\t// make the state of the IME match the state the view expects it be in\n\t\t\t\t// when the view commits the text and IME also need to be committed\n\t\t\t\t// this can be accomplished by changing the focus around\n\t\t\t\tthis._scrollDiv.focus();\n\t\t\t\tthis._clientDiv.focus();\n\t\t\t\t\n\t\t\t\tvar newText = this._getDOMText(line).text;\n\t\t\t\tvar oldText = model.getLine(lineIndex);\n\t\t\t\tvar start = this._imeOffset - lineStart;\n\t\t\t\tvar end = start + newText.length - oldText.length;\n\t\t\t\tif (start !== end) {\n\t\t\t\t\tinsertText = newText.substring(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._imeOffset = -1;\n\t\t\tif (insertText) {\n\t\t\t\tif (!this._doContent(insertText) && !util.isWebkit) {\n\t\t\t\t\tline.lineRemoved = true;\n\t\t\t\t\tthis._queueUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_createActions: function () {\n\t\t\tthis.addKeyMode(new mKeyModes.DefaultKeyMode(this));\n\t\t\t//1 to 1, no duplicates\n\t\t\tvar that = this;\n\t\t\tthis._actions = {\n\t\t\t\t\"noop\": {defaultHandler: function() {return that._doNoop();}}, //$NON-NLS-1$\n\n\t\t\t\t\"lineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: false}));}, actionDescription: {name: messages.lineUp}}, //$NON-NLS-1$\n\t\t\t\t\"lineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: false}));}, actionDescription: {name: messages.lineDown}}, //$NON-NLS-1$\n\t\t\t\t\"lineStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: false, ctrl:false}));}, actionDescription: {name: messages.lineStart}}, //$NON-NLS-1$\n\t\t\t\t\"lineEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: false, ctrl:false}));}, actionDescription: {name: messages.lineEnd}}, //$NON-NLS-1$\n\t\t\t\t\"charPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: false, unit:\"character\"}));}, actionDescription: {name: messages.charPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"charNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: false, unit:\"character\"}));}, actionDescription: {name: messages.charNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"pageUp\": {defaultHandler: function(data) {return that._doPageUp(merge(data,{select: false}));}, actionDescription: {name: messages.pageUp}}, //$NON-NLS-1$\n\t\t\t\t\"pageDown\": {defaultHandler: function(data) {return that._doPageDown(merge(data,{select: false}));}, actionDescription: {name: messages.pageDown}}, //$NON-NLS-1$\n\t\t\t\t\"scrollPageUp\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"pageUp\"}));}, actionDescription: {name: messages.scrollPageUp}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollPageDown\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"pageDown\"}));}, actionDescription: {name: messages.scrollPageDown}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollLineUp\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"lineUp\"}));}, actionDescription: {name: messages.scrollLineUp}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollLineDown\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"lineDown\"}));}, actionDescription: {name: messages.scrollLineDown}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"wordPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: false, unit:\"word\"}));}, actionDescription: {name: messages.wordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"wordNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: false, unit:\"word\"}));}, actionDescription: {name: messages.wordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"textStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: false, ctrl:true}));}, actionDescription: {name: messages.textStart}}, //$NON-NLS-1$\n\t\t\t\t\"textEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: false, ctrl:true}));}, actionDescription: {name: messages.textEnd}}, //$NON-NLS-1$\n\t\t\t\t\"scrollTextStart\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"textStart\"}));}, actionDescription: {name: messages.scrollTextStart}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"scrollTextEnd\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"textEnd\"}));}, actionDescription: {name: messages.scrollTextEnd}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"centerLine\": {defaultHandler: function(data) {return that._doScroll(merge(data,{type: \"centerLine\"}));}, actionDescription: {name: messages.centerLine}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"selectLineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: true}));}, actionDescription: {name: messages.selectLineUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: true}));}, actionDescription: {name: messages.selectLineDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectWholeLineUp\": {defaultHandler: function(data) {return that._doLineUp(merge(data,{select: true, wholeLine: true}));}, actionDescription: {name: messages.selectWholeLineUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectWholeLineDown\": {defaultHandler: function(data) {return that._doLineDown(merge(data,{select: true, wholeLine: true}));}, actionDescription: {name: messages.selectWholeLineDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: true, ctrl:false}));}, actionDescription: {name: messages.selectLineStart}}, //$NON-NLS-1$\n\t\t\t\t\"selectLineEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: true, ctrl:false}));}, actionDescription: {name: messages.selectLineEnd}}, //$NON-NLS-1$\n\t\t\t\t\"selectCharPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: true, unit:\"character\"}));}, actionDescription: {name: messages.selectCharPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectCharNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: true, unit:\"character\"}));}, actionDescription: {name: messages.selectCharNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectPageUp\": {defaultHandler: function(data) {return that._doPageUp(merge(data,{select: true}));}, actionDescription: {name: messages.selectPageUp}}, //$NON-NLS-1$\n\t\t\t\t\"selectPageDown\": {defaultHandler: function(data) {return that._doPageDown(merge(data,{select: true}));}, actionDescription: {name: messages.selectPageDown}}, //$NON-NLS-1$\n\t\t\t\t\"selectWordPrevious\": {defaultHandler: function(data) {return that._doCursorPrevious(merge(data,{select: true, unit:\"word\"}));}, actionDescription: {name: messages.selectWordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectWordNext\": {defaultHandler: function(data) {return that._doCursorNext(merge(data,{select: true, unit:\"word\"}));}, actionDescription: {name: messages.selectWordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"selectTextStart\": {defaultHandler: function(data) {return that._doHome(merge(data,{select: true, ctrl:true}));}, actionDescription: {name: messages.selectTextStart}}, //$NON-NLS-1$\n\t\t\t\t\"selectTextEnd\": {defaultHandler: function(data) {return that._doEnd(merge(data,{select: true, ctrl:true}));}, actionDescription: {name: messages.selectTextEnd}}, //$NON-NLS-1$\n\n\t\t\t\t\"deletePrevious\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit:\"character\"}));}, actionDescription: {name: messages.deletePrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteNext\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit:\"character\"}));}, actionDescription: {name: messages.deleteNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteWordPrevious\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit:\"word\"}));}, actionDescription: {name: messages.deleteWordPrevious}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteWordNext\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit:\"word\"}));}, actionDescription: {name: messages.deleteWordNext}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteLineStart\": {defaultHandler: function(data) {return that._doBackspace(merge(data,{unit: \"line\"}));}, actionDescription: {name: messages.deleteLineStart}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"deleteLineEnd\": {defaultHandler: function(data) {return that._doDelete(merge(data,{unit: \"line\"}));}, actionDescription: {name: messages.deleteLineEnd}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"tab\": {defaultHandler: function(data) {return that._doTab(merge(data,{}));}, actionDescription: {name: messages.tab}}, //$NON-NLS-1$\n\t\t\t\t\"shiftTab\": {defaultHandler: function(data) {return that._doShiftTab(merge(data,{}));}, actionDescription: {name: messages.shiftTab}}, //$NON-NLS-1$\n\t\t\t\t\"enter\": {defaultHandler: function(data) {return that._doEnter(merge(data,{}));}, actionDescription: {name: messages.enter}}, //$NON-NLS-1$\n\t\t\t\t\"enterNoCursor\": {defaultHandler: function(data) {return that._doEnter(merge(data,{noCursor:true}));}, actionDescription: {name: messages.enterNoCursor}}, //$NON-NLS-1$\n\t\t\t\t\"escape\": {defaultHandler: function(data) {return that._doEscape(merge(data,{}));}, actionDescription: {name: messages.escape}}, //$NON-NLS-1$\n\t\t\t\t\"selectAll\": {defaultHandler: function(data) {return that._doSelectAll(merge(data,{}));}, actionDescription: {name: messages.selectAll}}, //$NON-NLS-1$\n\t\t\t\t\"copy\": {defaultHandler: function(data) {return that._doCopy(merge(data,{}));}, actionDescription: {name: messages.copy}}, //$NON-NLS-1$\n\t\t\t\t\"cut\": {defaultHandler: function(data) {return that._doCut(merge(data,{}));}, actionDescription: {name: messages.cut}}, //$NON-NLS-1$\n\t\t\t\t\"paste\": {defaultHandler: function(data) {return that._doPaste(merge(data,{}));}, actionDescription: {name: messages.paste}}, //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"uppercase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"upper\"}));}, actionDescription: {name: messages.uppercase}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"lowercase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"lower\"}));}, actionDescription: {name: messages.lowercase}}, //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"capitalize\": {defaultHandler: function(data) {return that._doCase(merge(data,{unit: \"word\", type: \"capitalize\"}));}, actionDescription: {name: messages.capitalize}}, //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\"reversecase\": {defaultHandler: function(data) {return that._doCase(merge(data,{type: \"reverse\"}));}, actionDescription: {name: messages.reversecase}}, //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\"toggleOverwriteMode\": {defaultHandler: function(data) {return that._doOverwriteMode(merge(data,{}));}, actionDescription: {name: messages.toggleOverwriteMode}}, //$NON-NLS-1$\n\t\t\t\t\"toggleTabMode\": {defaultHandler: function(data) {return that._doTabMode(merge(data,{}));}, actionDescription: {name: messages.toggleTabMode}}, //$NON-NLS-1$\n\t\t\t\t\"toggleWrapMode\": {defaultHandler: function(data) {return that._doWrapMode(merge(data,{}));}, actionDescription: {name: messages.toggleWrapMode}} //$NON-NLS-1$\n\t\t\t};\n\t\t},\n\t\t_createRulerParent: function(doc, className) {\n\t\t\tvar div = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tdiv.className = className;\n\t\t\tdiv.tabIndex = -1;\n\t\t\tdiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\tdiv.style.MozUserSelect = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.WebkitUserSelect = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tdiv.style.top = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.bottom = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.cursor = \"default\"; //$NON-NLS-1$\n\t\t\tdiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._rootDiv.appendChild(div);\n\t\t\treturn div;\n\t\t},\n\t\t_createRuler: function(ruler, index) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar rulerParent = this._getRulerParent(ruler);\n\t\t\tif (!rulerParent) { return; }\n\t\t\tif (rulerParent !== this._marginDiv || this._marginOffset) {\n\t\t\t\trulerParent.style.display = \"block\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\trulerParent.rulerWidth = undefined;\n\t\t\tvar div = util.createElement(rulerParent.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\tdiv._ruler = ruler;\n\t\t\truler.node = div;\n\t\t\tdiv.rulerChanged = true;\n\t\t\tdiv.style.position = \"relative\"; //$NON-NLS-1$\n\t\t\tdiv.style.cssFloat = \"left\"; //$NON-NLS-1$\n\t\t\tdiv.style.styleFloat = \"left\"; //$NON-NLS-1$\n\t\t\tdiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tif (index === undefined || index < 0 || index >= rulerParent.children.length) {\n\t\t\t\trulerParent.appendChild(div);\n\t\t\t} else {\n\t\t\t\tvar sibling = rulerParent.firstChild;\n\t\t\t\twhile (sibling && index-- > 0) {\n\t\t\t\t\tsibling = sibling.nextSibling;\n\t\t\t\t}\n\t\t\t\trulerParent.insertBefore(div, sibling);\n\t\t\t}\n\t\t},\n\t\t_createSelectionDiv: function() {\n\t\t\tvar div = util.createElement(this._parent.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\tdiv.className = \"textviewSelection\"; //$NON-NLS-1$\n\t\t\tdiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tdiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tdiv.style.width = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.height = \"0px\"; //$NON-NLS-1$\n\t\t\tdiv.style.zIndex = \"0\"; //$NON-NLS-1$\n\t\t\treturn div;\n\t\t},\n\t\t_createView: function() {\n\t\t\tif (this._clientDiv) { return; }\n\t\t\tvar _parent = this._parent;\n\t\t\twhile (_parent.hasChildNodes()) { _parent.removeChild(_parent.lastChild); }\n\n\t\t\tvar doc = _parent.ownerDocument;\n\t\t\tvar rootDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tthis._rootDiv = rootDiv;\n\t\t\trootDiv.tabIndex = -1;\n\t\t\trootDiv.style.position = \"relative\"; //$NON-NLS-1$\n\t\t\trootDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\trootDiv.style.width = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.style.height = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\trootDiv.style.WebkitTextSizeAdjust = \"100%\"; //$NON-NLS-1$\n\t\t\trootDiv.setAttribute(\"role\", \"application\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\trootDiv.setAttribute(\"aria-label\", \"Text View\"); //$NON-NLS-1$\n\t\t\t_parent.appendChild(rootDiv);\n\t\t\t\n\t\t\tvar leftDiv = this._createRulerParent(doc, \"textviewLeftRuler\"); //$NON-NLS-1$\n\t\t\tthis._leftDiv = leftDiv;\n\n\t\t\tvar viewDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tviewDiv.className = \"textviewScroll\"; //$NON-NLS-1$\n\t\t\tthis._viewDiv = viewDiv;\n\t\t\tviewDiv.tabIndex = -1;\n\t\t\tviewDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.top = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.bottom = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tviewDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\trootDiv.appendChild(viewDiv);\n\t\t\t\n\t\t\tvar rightDiv = this._createRulerParent(doc, \"textviewRightRuler\"); //$NON-NLS-1$\n\t\t\tthis._rightDiv = rightDiv;\n\t\t\tif (document.dir == \"rtl\") { /* ACGC */\n\t\t\t\trightDiv.style.left = \"0px\"; //$NON-NLS-1$\n\t\t\t}else{\n\t\t\t\trightDiv.style.right = \"0px\"; //$NON-NLS-1$\t  \n\t\t\t}\n\n\t\t\tvar innerRightDiv = this._createRulerParent(doc, \"textviewInnerRightRuler\"); //$NON-NLS-1$\n\t\t\tthis._innerRightDiv = innerRightDiv;\n\t\t\tinnerRightDiv.style.zIndex = \"1\"; //$NON-NLS-1$\n\n\t\t\tvar scrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tthis._scrollDiv = scrollDiv;\n\t\t\tscrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tscrollDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tscrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tviewDiv.appendChild(scrollDiv);\n\t\t\t\n\t\t\tvar marginDiv = this._marginDiv = this._createRulerParent(doc, \"textviewMarginRuler\"); //$NON-NLS-1$\n\t\t\tmarginDiv.style.zIndex = \"4\"; //$NON-NLS-1$\n\t\t\t\n\t\t\tif (!util.isIE && !util.isIOS) {\n\t\t\t\tvar clipDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._clipDiv = clipDiv;\n\t\t\t\tclipDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(clipDiv);\n\t\t\t\t\n\t\t\t\tvar clipScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._clipScrollDiv = clipScrollDiv;\n\t\t\t\tclipScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.height = \"1px\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.top = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\tclipScrollDiv.style.background = \"transparent\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.appendChild(clipScrollDiv);\n\t\t\t}\n\n\t\t\tvar clientDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\tclientDiv.className = \"textviewContent\"; //$NON-NLS-1$\n\t\t\tthis._clientDiv = clientDiv;\n\t\t\tclientDiv.tabIndex = 0;\n\t\t\tclientDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.borderWidth = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.zIndex = \"1\"; //$NON-NLS-1$\n\t\t\tclientDiv.style.WebkitUserSelect = \"text\"; //$NON-NLS-1$\n\t\t\tclientDiv.setAttribute(\"spellcheck\", \"false\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\tclientDiv.style.WebkitTapHighlightColor = \"transparent\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\t(this._clipDiv || rootDiv).appendChild(clientDiv);\n\t\t\t\n\t\t\tthis._setFullSelection(this._fullSelection, true);\n\t\t\t\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\tvar vScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv = vScrollDiv;\n\t\t\t\tvScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderWidth = \"1px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderColor = \"white\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderStyle = \"solid\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.borderRadius = \"4px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.backgroundColor = \"black\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.opacity = \"0.5\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.zIndex = \"3\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.width = \"8px\"; //$NON-NLS-1$\n\t\t\t\tvScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(vScrollDiv);\n\t\t\t\tvar hScrollDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv = hScrollDiv;\n\t\t\t\thScrollDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderWidth = \"1px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderColor = \"white\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderStyle = \"solid\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.borderRadius = \"4px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.backgroundColor = \"black\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.opacity = \"0.5\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.margin = \"0px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.padding = \"0px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.outline = \"none\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.zIndex = \"3\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.height = \"8px\"; //$NON-NLS-1$\n\t\t\t\thScrollDiv.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\trootDiv.appendChild(hScrollDiv);\n\t\t\t}\n\n\t\t\tif (util.isFirefox && !clientDiv.setCapture) {\n\t\t\t\tvar overlayDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\tthis._overlayDiv = overlayDiv;\n\t\t\t\toverlayDiv.style.position = clientDiv.style.position;\n\t\t\t\toverlayDiv.style.borderWidth = clientDiv.style.borderWidth;\n\t\t\t\toverlayDiv.style.margin = clientDiv.style.margin;\n\t\t\t\toverlayDiv.style.padding = clientDiv.style.padding;\n\t\t\t\toverlayDiv.style.cursor = \"text\"; //$NON-NLS-1$\n\t\t\t\toverlayDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t(this._clipDiv || rootDiv).appendChild(overlayDiv);\n\t\t\t}\n\t\t\tclientDiv.contentEditable = \"true\"; //$NON-NLS-1$\n\t\t\tthis._setWrapMode(this._wrapMode, true);\n\t\t\tthis._setReadOnly(this._readonly);\n\t\t\tthis._setThemeClass(this._themeClass, true);\n\t\t\tthis._setTabSize(this._tabSize, true);\n\t\t\tthis._setMarginOffset(this._marginOffset, true);\n\t\t\tthis._hookEvents();\n\t\t\tbidiUtils.initInputField(clientDiv);\n\t\t\tvar rulers = this._rulers;\n\t\t\tfor (var i=0; i<rulers.length; i++) {\n\t\t\t\tthis._createRuler(rulers[i]);\n\t\t\t}\n\t\t\tthis._update();\n\t\t\t// Detect when the parent is attached to the DOM or display\n\t\t\tvar that = this;\n\t\t\tfunction checkDOMReady() {\n\t\t\t\tif (!that._rootDiv) { return; }\n\t\t\t\tthat.update(true);\n\t\t\t\tif (that._metrics.invalid) {\n\t\t\t\t\tthat._getWindow().setTimeout(function() {\n\t\t\t\t\t\tcheckDOMReady();\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t}\n\t\t\tDOMReady(doc, rootDiv, \"textview\", checkDOMReady); //$NON-NLS-1$\n\t\t},\n\t\t_defaultOptions: function() {\n\t\t\treturn {\n\t\t\t\tparent: {value: undefined, update: null},\n\t\t\t\tmodel: {value: undefined, update: this.setModel},\n\t\t\t\tscrollAnimation: {value: 0, update: null},\n\t\t\t\treadonly: {value: false, update: this._setReadOnly},\n\t\t\t\tfullSelection: {value: true, update: this._setFullSelection},\n\t\t\t\ttabMode: { value: true, update: null },\n\t\t\t\ttabSize: {value: 8, update: this._setTabSize},\n\t\t\t\texpandTab: {value: false, update: null},\n\t\t\t\tsingleMode: {value: false, update: this._setSingleMode},\n\t\t\t\tnoScroll: {value: false, update: this._setNoScroll},\n\t\t\t\toverwriteMode: { value: false, update: this._setOverwriteMode },\n\t\t\t\tblockCursorVisible: { value: false, update: this._setBlockCursor},\n\t\t\t\tmarginOffset: {value: 0, update: this._setMarginOffset},\n\t\t\t\twrapOffset: {value: 0, update: this._setWrapOffset},\n\t\t\t\twrapMode: {value: false, update: this._setWrapMode},\n\t\t\t\twrappable: {value: false, update: null},\n\t\t\t\tundoStack: {value: null, update: this._setUndoStack},\n\t\t\t\ttheme: {value: mTextTheme.TextTheme.getTheme(), update: this._setTheme},\n\t\t\t\tthemeClass: {value: undefined, update: this._setThemeClass}\n\t\t\t};\n\t\t},\n\t\t_destroyRuler: function(ruler) {\n\t\t\tvar rulerParent = this._getRulerParent(ruler);\n\t\t\tif (rulerParent) {\n\t\t\t\tvar div = rulerParent.firstChild;\n\t\t\t\twhile (div) {\n\t\t\t\t\tif (div._ruler === ruler) {\n\t\t\t\t\t\tdiv._ruler = undefined;\n\t\t\t\t\t\trulerParent.removeChild(div);\n\t\t\t\t\t\tif (rulerParent.children.length === 0 && (rulerParent !== this._marginDiv || !this._marginOffset)) {\n\t\t\t\t\t\t\trulerParent.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t\trulerParent.rulerWidth = undefined;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_destroyView: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (!clientDiv) { return; }\n\t\t\tthis._setGrab(null);\n\t\t\tthis._unhookEvents();\n\n\t\t\t/* Destroy timers */\n\t\t\tvar win = this._getWindow();\n\t\t\tif (this._autoScrollTimerID) {\n\t\t\t\twin.clearTimeout(this._autoScrollTimerID);\n\t\t\t\tthis._autoScrollTimerID = null;\n\t\t\t}\n\t\t\tif (this._updateTimer) {\n\t\t\t\twin.clearTimeout(this._updateTimer);\n\t\t\t\tthis._updateTimer = null;\n\t\t\t}\n\t\t\tif (this._calculateLHTimer) {\n\t\t\t\twin.clearTimeout(this._calculateLHTimer);\n\t\t\t\tthis._calculateLHTimer = null;\n\t\t\t}\n\t\t\tif (this._cursorTimer) {\n\t\t\t\twin.clearInterval(this._cursorTimer);\n\t\t\t\tthis._cursorTimer = null;\n\t\t\t}\n\t\t\tif (this._imeTimeout) {\n\t\t\t\twin.clearInterval(this._imeTimeout);\n\t\t\t\tthis._imeTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\tvar rootDiv = this._rootDiv;\n\t\t\trootDiv.parentNode.removeChild(rootDiv);\n\n\t\t\t/* Destroy DOM */\n\t\t\tthis._domSelection = null;\n\t\t\tthis._clipboardDiv = null;\n\t\t\tthis._rootDiv = null;\n\t\t\tthis._scrollDiv = null;\n\t\t\tthis._viewDiv = null;\n\t\t\tthis._clipDiv = null;\n\t\t\tthis._clipScrollDiv = null;\n\t\t\tthis._clientDiv = null;\n\t\t\tthis._overlayDiv = null;\n\t\t\tthis._leftDiv = null;\n\t\t\tthis._rightDiv = null;\n\t\t\tthis._innerRightDiv = null;\n\t\t\tthis._marginDiv = null;\n\t\t\tthis._cursorDiv = null;\n\t\t\tthis._vScrollDiv = null;\n\t\t\tthis._hScrollDiv = null;\n\t\t},\n\t\t_doAutoScroll: function (direction, x, y) {\n\t\t\tthis._autoScrollDir = direction;\n\t\t\tthis._autoScrollX = x;\n\t\t\tthis._autoScrollY = y;\n\t\t\tif (!this._autoScrollTimerID) {\n\t\t\t\tthis._autoScrollTimer();\n\t\t\t}\n\t\t},\n\t\t_endAutoScroll: function () {\n\t\t\tif (this._autoScrollTimerID) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._autoScrollTimerID);\n\t\t\t}\n\t\t\tthis._autoScrollDir = undefined;\n\t\t\tthis._autoScrollTimerID = undefined;\n\t\t},\n\t\t_fixCaret: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar hasFocus = this._hasFocus;\n\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\tif (hasFocus) { clientDiv.blur(); }\n\t\t\t\tclientDiv.contentEditable = false;\n\t\t\t\tclientDiv.contentEditable = true;\n\t\t\t\tif (hasFocus) { clientDiv.focus(); }\n\t\t\t\tthis._ignoreFocus = false;\n\t\t\t}\n\t\t},\n\t\t_getBaseText: function(start, end) {\n\t\t\tvar model = this._model;\n\t\t\t/* This is the only case the view access the base model, alternatively the view could use a event to application to customize the text */\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tend = model.mapOffset(end);\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model.getText(start, end);\n\t\t},\n\t\t_getBottomIndex: function (fullyVisible) {\n\t\t\tvar child = this._bottomChild;\n\t\t\tif (fullyVisible && this._getClientHeight() > this._getLineHeight()) {\n\t\t\t\tvar rect = child.getBoundingClientRect();\n\t\t\t\tvar clientRect = this._clientDiv.getBoundingClientRect();\n\t\t\t\tif (rect.bottom > clientRect.bottom) {\n\t\t\t\t\tchild = this._getLinePrevious(child) || child;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child.lineIndex;\n\t\t},\n\t\t_getBlockSelections: function(selections, lineIndex, pt) {\n\t\t\tvar model = this._model;\n\t\t\tselections = selections.filter(function(sel) { return !sel._editing; });\n\t\t\tvar firstLine = model.getLineAtOffset(this._blockSelection.getAnchor()), lastLine;\n\t\t\tif (lineIndex > firstLine) {\n\t\t\t\tlastLine = lineIndex;\n\t\t\t} else {\n\t\t\t\tlastLine = firstLine;\n\t\t\t\tfirstLine = lineIndex;\n\t\t\t}\n\t\t\tfor (var l = firstLine; l <= lastLine; l++) {\n\t\t\t\tvar line = this._getLine(l);\n\t\t\t\tvar o1 = line.getOffset(pt.x, 1);\n\t\t\t\tvar o2 = line.getOffset(this._blockSelection._docX, 1);\n\t\t\t\tline.destroy();\n\t\t\t\tif (o1 === o2 && o1 === model.getLineEnd(l)) continue;\n\t\t\t\tvar caret = o1 < o2;\n\t\t\t\tvar sel = new Selection(caret ? o1 : o2, caret ? o2 : o1, caret);\n\t\t\t\tsel._editing = true;\n\t\t\t\tselections.push(sel);\n\t\t\t}\n\t\t\treturn selections;\n\t\t},\n\t\t_getBoundsAtOffset: function(offset) {\n\t\t\tvar model = this._model;\n\t\t\tvar line = this._getLine(model.getLineAtOffset(offset));\n\t\t\tvar result = line.getBoundingClientRect(offset);\n\t\t\tvar linePixel = this._getLinePixel(line.lineIndex);\n\t\t\tresult.top += linePixel;\n\t\t\tresult.bottom += linePixel;\n\t\t\tline.destroy();\n\t\t\treturn result;\n\t\t},\n\t\t_getClientHeight: function() {\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\treturn Math.max(0, this._viewDiv.clientHeight - viewPad.top - viewPad.bottom);\n\t\t},\n\t\t_getInnerRightWidth: function() {\n\t\t\tvar innerRightWidth = this._innerRightDiv.rulerWidth;\n\t\t\tif (innerRightWidth === undefined) {\n\t\t\t\tvar innerRightRect = this._innerRightDiv.getBoundingClientRect();\n\t\t\t\tthis._innerRightDiv.rulerWidth = innerRightWidth = innerRightRect.right - innerRightRect.left;\n\t\t\t}\n\t\t\treturn innerRightWidth;\n\t\t},\n\t\t_getClientWidth: function() {\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar innerRightWidth = this._getInnerRightWidth();\n\t\t\treturn Math.max(0, this._viewDiv.clientWidth - viewPad.left - viewPad.right - innerRightWidth);\n\t\t},\n\t\t_getClipboardText: function (evt, handler) {\n\t\t\t// IE\n\t\t\tvar win = this._getWindow();\n\t\t\tvar clipboardData = win.clipboardData;\n\t\t\t// WebKit and Firefox > 21\n\t\t\tif (!clipboardData && evt) {\n\t\t\t\tclipboardData = evt.clipboardData;\n\t\t\t}\n\t\t\tfunction convert(wholeText) {\n\t\t\t\tvar clipboardText = [];\n\t\t\t\tconvertDelimiter(wholeText, function(t) {clipboardText.push(t);}, null);\n\t\t\t\tif (handler) { handler(clipboardText); }\n\t\t\t\treturn clipboardText;\n\t\t\t}\n\t\t\tif (clipboardData) {\n\t\t\t\treturn convert(clipboardData.getData(util.isIE ? \"Text\" : \"text/plain\")); //$NON-NLS-1$\"//$NON-NLS-2$\n\t\t\t}\n\t\t\tif (util.isElectron && !evt) {\n\t\t\t\treturn convert(window.__electron.clipboard.readText());\n\t\t\t}\n\t\t\tif (util.isFirefox) {\n\t\t\t\tthis._ignoreFocus = true;\n\t\t\t\tvar clipboardDiv = this._clipboardDiv;\n\t\t\t\tvar doc = this._rootDiv.ownerDocument;\n\t\t\t\tif (!clipboardDiv) {\n\t\t\t\t\tclipboardDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\tthis._clipboardDiv = clipboardDiv;\n\t\t\t\t\tclipboardDiv.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\t\t\tclipboardDiv.style.whiteSpace = \"pre\"; //$NON-NLS-1$\n\t\t\t\t\tclipboardDiv.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\t\t\tthis._rootDiv.appendChild(clipboardDiv);\n\t\t\t\t}\n\t\t\t\tclipboardDiv.innerHTML = \"<pre contenteditable=''></pre>\"; //$NON-NLS-1$\n\t\t\t\tclipboardDiv.firstChild.focus();\n\t\t\t\tvar that = this;\n\t\t\t\tvar _getText = function() {\n\t\t\t\t\tvar noteText = that._getTextFromElement(clipboardDiv);\n\t\t\t\t\tclipboardDiv.innerHTML = \"\";\n\t\t\t\t\treturn convert(noteText);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t/* Try execCommand first. Works on firefox with clipboard permission. */\n\t\t\t\tvar result = false;\n\t\t\t\tthis._ignorePaste = true;\n\n\t\t\t\t/* Do not try execCommand if middle-click is used, because if we do, we get the clipboard text, not the primary selection text. */\n\t\t\t\tif (!util.isLinux || this._lastMouseButton !== 2) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresult = doc.execCommand(\"paste\", false, null); //$NON-NLS-1$\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t/* Firefox can throw even when execCommand() works, see bug 362835. */\n\t\t\t\t\t\tresult = clipboardDiv.childNodes.length > 1 || clipboardDiv.firstChild && clipboardDiv.firstChild.childNodes.length > 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._ignorePaste = false;\n\t\t\t\tif (!result) {\n\t\t\t\t\t/* Try native paste in DOM, works for firefox during the paste event. */\n\t\t\t\t\tif (evt) {\n\t\t\t\t\t\twin.setTimeout(function() {\n\t\t\t\t\t\t\tthat.focus();\n\t\t\t\t\t\t\t_getText();\n\t\t\t\t\t\t\tthat._ignoreFocus = false;\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t/* no event and no clipboard permission, paste can't be performed */\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis._ignoreFocus = false;\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.focus();\n\t\t\t\tthis._ignoreFocus = false;\n\t\t\t\treturn _getText();\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\t\t_getDOMText: function(child, offsetNode) {\n\t\t\treturn child._line.getText(offsetNode);\n\t\t},\n\t\t_getTextFromElement: function(element) {\n\t\t\tvar doc = element.ownerDocument;\n\t\t\tvar win = doc.defaultView;\n\t\t\tif (!win.getSelection) {\n\t\t\t\treturn element.innerText || element.textContent;\n\t\t\t}\n\n\t\t\tvar newRange = doc.createRange();\n\t\t\tnewRange.selectNode(element);\n\n\t\t\tvar selection = win.getSelection();\n\t\t\tvar oldRanges = [], i;\n\t\t\tfor (i = 0; i < selection.rangeCount; i++) {\n\t\t\t\toldRanges.push(selection.getRangeAt(i));\n\t\t\t}\n\n\t\t\tthis._ignoreSelect = true;\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(newRange);\n\n\t\t\tvar text = selection.toString();\n\n\t\t\tselection.removeAllRanges();\n\t\t\tfor (i = 0; i < oldRanges.length; i++) {\n\t\t\t\tselection.addRange(oldRanges[i]);\n\t\t\t}\n\n\t\t\tthis._ignoreSelect = false;\n\t\t\treturn text;\n\t\t},\n\t\t_getViewPadding: function() {\n\t\t\treturn this._metrics.viewPadding;\n\t\t},\n\t\t_getLine: function(lineIndex) {\n\t\t\tvar child = this._getLineNode(lineIndex);\n\t\t\tif (child && !child.lineChanged && !child.lineRemoved) {\n\t\t\t\treturn child._line;\n\t\t\t}\n\t\t\treturn new TextLine(this, lineIndex);\n\t\t},\n\t\t_getLineHeight: function(lineIndex, calculate) {\n\t\t\tif (lineIndex !== undefined && this._lineHeight) {\n\t\t\t\tvar lineHeight = this._lineHeight[lineIndex];\n\t\t\t\tif (lineHeight) { return lineHeight; }\n\t\t\t\tif (calculate || calculate === undefined) {\n\t\t\t\t\tvar height = this._lineHeight[lineIndex] = this._calculateLineHeight(lineIndex);\n\t\t\t\t\treturn height;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this._metrics.lineHeight;\n\t\t},\n\t\t_getLineNode: function (lineIndex) {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tvar child = clientDiv.firstChild;\n\t\t\twhile (child) {\n\t\t\t\tif (lineIndex === child.lineIndex) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t\t_getLineNext: function (lineNode) {\n\t\t\tvar node = lineNode ? lineNode.nextSibling : this._clientDiv.firstChild;\n\t\t\twhile (node && (node.lineIndex === -1 || !node._line)) {\n\t\t\t\tnode = node.nextSibling;\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\t\t_getLinePrevious: function (lineNode) {\n\t\t\tvar node = lineNode ? lineNode.previousSibling : this._clientDiv.lastChild;\n\t\t\twhile (node && (node.lineIndex === -1 || !node._line)) {\n\t\t\t\tnode = node.previousSibling;\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\t\t_getLinePixel: function(lineIndex) {\n\t\t\tlineIndex = Math.min(Math.max(0, lineIndex), this._model.getLineCount());\n\t\t\tif (this._lineHeight) {\n\t\t\t\tvar topIndex = this._getTopIndex();\n\t\t\t\tvar pixel = -this._topIndexY + this._getScroll().y, i;\n\t\t\t\tif (lineIndex > topIndex) {\n\t\t\t\t\tfor (i = topIndex; i < lineIndex; i++) {\n\t\t\t\t\t\tpixel += this._getLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = topIndex - 1; i >= lineIndex; i--) {\n\t\t\t\t\t\tpixel -= this._getLineHeight(i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn pixel;\n\t\t\t}\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\treturn lineHeight * lineIndex;\n\t\t},\n\t\t/**\n\t\t * @name _getLineIndex\n\t\t * @description Returns the line index closest to the given text view relative location.  Will return -1\n\t\t * \t\t\t\tif restrictToValidLines is true and y location is outside of text lines.\n\t\t * @function\n\t\t * @private\n\t\t * @param y location to search\n\t\t * @param restrictToValidLines whether to return -1 if the location is outside a valid line, otherwise return the closest valid line index\n\t\t * @returns returns The line index closest to the location or -1 if restrictToValidLines is true and location is outside text area\n\t\t */\n\t\t_getLineIndex: function(y, restrictToValidLines) {\n\t\t\tvar lineHeight, lineIndex = 0;\n\t\t\tvar lineCount = this._model.getLineCount();\n\t\t\tif (this._lineHeight) {\n\t\t\t\tlineIndex = this._getTopIndex();\n\t\t\t\tvar pixel = -this._topIndexY + this._getScroll().y;\n\t\t\t\tif (y !== pixel) {\n\t\t\t\t\tif (y < pixel) {\n\t\t\t\t\t\twhile (y < pixel && lineIndex > 0) {\n\t\t\t\t\t\t\ty += this._getLineHeight(--lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineHeight = this._getLineHeight(lineIndex);\n\t\t\t\t\t\twhile (y - lineHeight >= pixel && lineIndex < lineCount - 1) {\n\t\t\t\t\t\t\ty -= lineHeight;\n\t\t\t\t\t\t\tlineHeight = this._getLineHeight(++lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlineHeight = this._getLineHeight();\n\t\t\t\tlineIndex = Math.floor(y / lineHeight);\n\t\t\t}\n\t\t\tif (restrictToValidLines){\n\t\t\t\tif (lineCount === 0 || lineIndex < 0 || lineIndex > (lineCount-1)){\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Math.max(0, Math.min(lineCount - 1, lineIndex));\n\t\t},\n\t\t_getRulerParent: function(ruler) {\n\t\t\tswitch (ruler.getLocation()) {\n\t\t\t\tcase \"left\": return this._leftDiv; //$NON-NLS-1$\n\t\t\t\tcase \"right\": return this._rightDiv; //$NON-NLS-1$\n\t\t\t\tcase \"innerRight\": return this._innerRightDiv; //$NON-NLS-1$\n\t\t\t\tcase \"margin\": return this._marginDiv; //$NON-NLS-1$\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_getScroll: function(cancelAnimation) {\n\t\t\tif (cancelAnimation === undefined || cancelAnimation) {\n\t\t\t\tthis._cancelAnimation();\n\t\t\t}\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\treturn {x: viewDiv.scrollLeft, y: viewDiv.scrollTop};\n\t\t},\n\t\t_getSelection: function () {\n\t\t\treturn (Array.isArray(this._selection) ? this._selection[0] : this._selection).clone();\n\t\t},\n\t\t_getSelections: function () {\n\t\t\treturn (Array.isArray(this._selection) ? this._selection : [this._selection]).map(function(s) {\n\t\t\t\treturn s.clone();\n\t\t\t});\n\t\t},\n\t\t_getTopIndex: function (fullyVisible) {\n\t\t\tvar child = this._topChild;\n\t\t\tif (fullyVisible && this._getClientHeight() > this._getLineHeight()) {\n\t\t\t\tvar rect = child.getBoundingClientRect();\n\t\t\t\tvar viewPad = this._getViewPadding();\n\t\t\t\tvar viewRect = this._viewDiv.getBoundingClientRect();\n\t\t\t\tif (rect.top < viewRect.top + viewPad.top) {\n\t\t\t\t\tchild = this._getLineNext(child) || child;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child.lineIndex;\n\t\t},\n\t\t_hookEvents: function() {\n\t\t\tvar that = this;\n\t\t\tthis._modelListener = {\n\t\t\t\t/** @private */\n\t\t\t\tonChanging: function(modelChangingEvent) {\n\t\t\t\t\tthat._onModelChanging(modelChangingEvent);\n\t\t\t\t},\n\t\t\t\t/** @private */\n\t\t\t\tonChanged: function(modelChangedEvent) {\n\t\t\t\t\tthat._onModelChanged(modelChangedEvent);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._model.addEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.addEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\t\n\t\t\tthis._themeListener = {\n\t\t\t\tonChanged: function() {\n\t\t\t\t\tthat._setThemeClass(that._themeClass);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._theme.addEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t\n\t\t\tvar handlers = this._handlers = [];\n\t\t\tvar clientDiv = this._clientDiv, viewDiv = this._viewDiv, rootDiv = this._rootDiv;\n\t\t\tvar topNode = this._overlayDiv || clientDiv;\n\t\t\tvar doc = clientDiv.ownerDocument;\n\t\t\tvar win = this._getWindow();\n\t\t\tvar grabNode = util.isIE ? doc : win;\n\t\t\thandlers.push({target: win, type: \"resize\", handler: function(e) { return that._handleResize(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"blur\", handler: function(e) { return that._handleBlur(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"focus\", handler: function(e) { return that._handleFocus(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: viewDiv, type: \"focus\", handler: function() { clientDiv.focus(); }}); //$NON-NLS-1$\n\t\t\tvar textModel = that.getModel();\n\t\t\tif(textModel && typeof textModel.deferScroll === \"function\") {//If textModel is extended to defer the scroll handler for segmental contents\n\t\t\t\tvar deferredHandler = textModel.deferScroll(that, that._handleScroll.bind(that));\n\t\t\t\thandlers.push({target: viewDiv, type: \"scroll\", handler: function(e) { return deferredHandler(e ? e : win.event);}}); //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\thandlers.push({target: viewDiv, type: \"scroll\", handler: function(e) { return that._handleScroll(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: clientDiv, type: \"textInput\", handler: function(e) { return that._handleTextInput(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keydown\", handler: function(e) { return that._handleKeyDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keypress\", handler: function(e) { return that._handleKeyPress(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"keyup\", handler: function(e) { return that._handleKeyUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\tif (util.isIE) {\n\t\t\t\thandlers.push({target: doc, type: \"keyup\", handler: function(e) { return that._handleDocKeyUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: clientDiv, type: \"contextmenu\", handler: function(e) { return that._handleContextMenu(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"copy\", handler: function(e) { return that._handleCopy(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"cut\", handler: function(e) { return that._handleCut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: clientDiv, type: \"paste\", handler: function(e) { return that._handlePaste(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\thandlers.push({target: doc, type: \"selectionchange\", handler: function(e) { return that._handleSelectionChange(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchstart\", handler: function(e) { return that._handleTouchStart(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchmove\", handler: function(e) { return that._handleTouchMove(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"touchend\", handler: function(e) { return that._handleTouchEnd(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\thandlers.push({target: clientDiv, type: \"selectstart\", handler: function(e) { return that._handleSelectStart(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mousedown\", handler: function(e) { return that._handleMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mouseover\", handler: function(e) { return that._handleMouseOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: clientDiv, type: \"mouseout\", handler: function(e) { return that._handleMouseOut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: grabNode, type: \"mouseup\", handler: function(e) { return that._handleMouseUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: grabNode, type: \"mousemove\", handler: function(e) { return that._handleMouseMove(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: rootDiv, type: \"mousedown\", handler: function(e) { return that._handleRootMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: rootDiv, type: \"mouseup\", handler: function(e) { return that._handleRootMouseUp(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragstart\", handler: function(e) { return that._handleDragStart(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"drag\", handler: function(e) { return that._handleDrag(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragend\", handler: function(e) { return that._handleDragEnd(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragenter\", handler: function(e) { return that._handleDragEnter(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragover\", handler: function(e) { return that._handleDragOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"dragleave\", handler: function(e) { return that._handleDragLeave(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: topNode, type: \"drop\", handler: function(e) { return that._handleDrop(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\thandlers.push({target: this._clientDiv, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\t\tif (this._clipDiv) {\n\t\t\t\t\thandlers.push({target: this._clipDiv, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\t\t}\n\t\t\t\tif (util.isFirefox && (!util.isWindows || util.isFirefox >= 15)) {\n\t\t\t\t\tvar MO = win.MutationObserver || win.MozMutationObserver;\n\t\t\t\t\tif (MO) {\n\t\t\t\t\t\tthis._mutationObserver = new MO(function(mutations) { that._handleDataModified(mutations); });\n\t\t\t\t\t\tthis._mutationObserver.observe(clientDiv, {subtree: true, characterData: true});\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"DOMCharacterDataModified\", handler: function (e) { return that._handleDataModified(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((util.isFirefox && (!util.isWindows || util.isFirefox >= 15)) || util.isIE || util.isWebkit) {\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionstart\", handler: function (e) { return that._handleCompositionStart(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionend\", handler: function (e) { return that._handleCompositionEnd(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"compositionupdate\", handler: function (e) { return that._handleCompositionUpdate(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (this._overlayDiv) {\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mousedown\", handler: function(e) { return that._handleMouseDown(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mouseover\", handler: function(e) { return that._handleMouseOver(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"mouseout\", handler: function(e) { return that._handleMouseOut(e ? e : win.event);}}); //$NON-NLS-1$\n\t\t\t\t\thandlers.push({target: this._overlayDiv, type: \"contextmenu\", handler: function(e) { return that._handleContextMenu(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (!this._isW3CEvents) {\n\t\t\t\t\thandlers.push({target: this._clientDiv, type: \"dblclick\", handler: function(e) { return that._handleDblclick(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._hookRulerEvents(this._leftDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._rightDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._innerRightDiv, handlers);\n\t\t\tthis._hookRulerEvents(this._marginDiv, handlers);\n\t\t\t\n\t\t\tfor (var i=0; i<handlers.length; i++) {\n\t\t\t\tvar h = handlers[i];\n\t\t\t\taddHandler(h.target, h.type, h.handler, h.capture);\n\t\t\t}\n\t\t},\n\t\t_hookRulerEvents: function(div, handlers) {\n\t\t\tif (!div) { return; }\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tif (util.isIE) {\n\t\t\t\thandlers.push({target: div, type: \"selectstart\", handler: function() {return false;}}); //$NON-NLS-1$\n\t\t\t}\n\t\t\thandlers.push({target: div, type: util.isFirefox > 26 ? \"wheel\" : util.isFirefox ? \"DOMMouseScroll\" : \"mousewheel\", handler: function(e) { return that._handleMouseWheel(e ? e : win.event); }}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-3$\n\t\t\thandlers.push({target: div, type: \"click\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"dblclick\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mousemove\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mouseover\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t\thandlers.push({target: div, type: \"mouseout\", handler: function(e) { that._handleRulerEvent(e ? e : win.event); }}); //$NON-NLS-1$\n\t\t},\n\t\t_getWindow: function() {\n\t\t\treturn getWindow(this._parent.ownerDocument);\n\t\t},\n\t\t_ignoreEvent: function(e) {\n\t\t\tvar node = e.target;\n\t\t\twhile (node && node !== this._clientDiv) {\n\t\t\t\tif (node.ignore) { return true; }\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_init: function(options) {\n\t\t\tvar _parent = options.parent;\n\t\t\tif (typeof(_parent) === \"string\") { //$NON-NLS-1$\n\t\t\t\t_parent = (options.document || document).getElementById(_parent);\n\t\t\t}\n\t\t\tif (!_parent) { throw new Error(\"no parent\"); } //$NON-NLS-1$\n\t\t\toptions.parent = _parent;\n\t\t\toptions.model = options.model || new mTextModel.TextModel();\n\t\t\tvar defaultOptions = this._defaultOptions();\n\t\t\tfor (var option in defaultOptions) {\n\t\t\t\tif (defaultOptions.hasOwnProperty(option)) {\n\t\t\t\t\tvar value;\n\t\t\t\t\tif (options[option] !== undefined) {\n\t\t\t\t\t\tvalue = options[option];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = defaultOptions[option].value;\n\t\t\t\t\t}\n\t\t\t\t\tthis[\"_\" + option] = value; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._keyModes = [];\n\t\t\tthis._rulers = [];\n\t\t\tthis._selection = [new Selection(0, 0, false)];\n\t\t\tthis._linksVisible = false;\n\t\t\tthis._redrawCount = 0;\n\t\t\tthis._maxLineWidth = 0;\n\t\t\tthis._maxLineIndex = -1;\n\t\t\tthis._ignoreSelect = true;\n\t\t\tthis._ignoreFocus = false;\n\t\t\tthis._hasFocus = false;\n\t\t\tthis._dragOffset = -1;\n\t\t\tthis._isRangeRects = (!util.isIE || util.isIE >= 9) && typeof _parent.ownerDocument.createRange().getBoundingClientRect === \"function\"; //$NON-NLS-1$\n\t\t\tthis._isW3CEvents = _parent.addEventListener;\n\n\t\t\t/* Auto scroll */\n\t\t\tthis._autoScrollX = null;\n\t\t\tthis._autoScrollY = null;\n\t\t\tthis._autoScrollTimerID = null;\n\t\t\tthis._AUTO_SCROLL_RATE = 50;\n\t\t\tthis._grabControl = null;\n\t\t\tthis._moseMoveClosure  = null;\n\t\t\tthis._mouseUpClosure = null;\n\t\t\t\n\t\t\t/* Double click */\n\t\t\tthis._lastMouseX = 0;\n\t\t\tthis._lastMouseY = 0;\n\t\t\tthis._lastMouseTime = 0;\n\t\t\tthis._clickCount = 0;\n\t\t\tthis._clickTime = 250;\n\t\t\tthis._clickDist = 5;\n\t\t\tthis._isMouseDown = false;\n\t\t\tthis._doubleClickSelection = null;\n\t\t\t\n\t\t\t/* Scroll */\n\t\t\tthis._hScroll = 0;\n\t\t\tthis._vScroll = 0;\n\n\t\t\t/* IME */\n\t\t\tthis._imeOffset = -1;\n\t\t\t\n\t\t\t/* Create elements */\n\t\t\tthis._createActions();\n\t\t\tthis._createView();\n\t\t},\n\t\t_checkOverlayScroll: function() {\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tif (!this._metrics.invalid && this._metrics.scrollWidth === 0) {\n\t\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\t\tvar overlay = this._isOverOverlayScroll();\n\t\t\t\t\tif (overlay.vertical || overlay.horizontal) {\n\t\t\t\t\t\tviewDiv.style.pointerEvents = \"\"; //$NON-NLS-1$\n\t\t\t\t\t} else {\n\t\t\t\t\t\tviewDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t},\n\t\t_isOverOverlayScroll: function() {\n\t\t\tvar scrollShowing = Date.now() - this._lastScrollTime < 1000;\n\t\t\tif (!scrollShowing) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tvar rect = this._viewDiv.getBoundingClientRect();\n\t\t\tvar x = this._lastMouseMoveX;\n\t\t\tvar y = this._lastMouseMoveY;\n\t\t\tvar overlayScrollWidth = 15;\n\t\t\treturn {\n\t\t\t\tvertical: rect.top <= y && y < rect.bottom && rect.right - overlayScrollWidth <= x && x < rect.right,\n\t\t\t\thorizontal: rect.bottom - overlayScrollWidth <= y && y < rect.bottom && rect.left <= x && x < rect.right\n\t\t\t};\n\t\t},\n\t\t_startUndo: function() {\n\t\t\tif (this._undoStack) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._compoundChange = this._undoStack.startCompoundChange({\n\t\t\t\t\tend: function() {\n\t\t\t\t\t\tthat._compoundChange = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_endUndo: function() {\n\t\t\tif (this._undoStack) {\n\t\t\t\tthis._undoStack.endCompoundChange();\n\t\t\t}\n\t\t},\n\t\t_modifyContent: function(e, caretAtEnd, show, callback) {\n\t\t\tif (this._readonly && !e._code) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\te.type = \"Verify\"; //$NON-NLS-1$\n\t\t\tvar oldStart = e.start = e.selection[0].start;\n\t\t\tvar oldEnd = e.end = e.selection[0].end;\n\t\t\tthis.onVerify(e);\n\t\t\tif (oldStart !== e.start) e.selection[0].start = e.start;\n\t\t\tif (oldEnd !== e.end) e.selection[0].end = e.end;\n\n\t\t\tif (e.text === null || e.text === undefined) { return false; }\n\t\t\t\n\t\t\tvar previousSelection;\n\t\t\tif (e.preserveSelection) {\n\t\t\t\tpreviousSelection = this._getSelections();\n\t\t\t}\n\t\t\t\n\t\t\tif (e.selection.length > 1) this.setRedraw(false);\n\t\t\t\n\t\t\tvar undo = this._compoundChange;\n\t\t\tif (undo) {\n\t\t\t\tif (!Selection.compare(previousSelection || this._getSelections(), undo.owner.selection)) {\n\t\t\t\t\tthis._endUndo();\n\t\t\t\t\tif (e.selection.length > 1) this._startUndo();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e.selection.length > 1) this._startUndo();\n\t\t\t}\n\n\t\t\tvar model = this._model;\n\t\t\ttry {\n\t\t\t\tif (e._ignoreDOMSelection) { this._ignoreDOMSelection = true; }\n\t\t\t\tvar offset = 0;\n\t\t\t\te.selection.forEach(function(selection, i) {\n\t\t\t\t\tselection.start += offset;\n\t\t\t\t\tselection.end += offset;\n\t\t\t\t\tvar text = Array.isArray(e.text) ? e.text[i] : e.text;\n\t\t\t\t\tmodel.setText(text, selection.start, selection.end);\n\t\t\t\t\tvar delta = selection.start - selection.end + text.length;\n\t\t\t\t\toffset += delta;\n\t\t\t\t\tif (previousSelection) {\n\t\t\t\t\t\tpreviousSelection.forEach(function(ps) {\n\t\t\t\t\t\t\tif (ps.start > selection.start) ps.start += delta;\n\t\t\t\t\t\t\tif (ps.end > selection.start) ps.end += delta;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tselection.setCaret(caretAtEnd ? selection.start + text.length : selection.start);\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tif (e._ignoreDOMSelection) { this._ignoreDOMSelection = false; }\n\t\t\t}\n\t\t\tthis._setSelection(previousSelection || e.selection, show, true, callback);\n\t\t\tundo = this._compoundChange;\n\t\t\tif (undo) {\n\t\t\t\tundo.owner.selection = previousSelection || e.selection;\n\t\t\t}\n\t\t\t\n\t\t\tif (e.selection.length > 1) this.setRedraw(true);\n\n\t\t\tthis.onModify({type: \"Modify\"}); //$NON-NLS-1$\n\t\t\treturn true;\n\t\t},\n\t\t_onModelChanged: function(modelChangedEvent) {\n\t\t\tmodelChangedEvent.type = \"ModelChanged\"; //$NON-NLS-1$\n\t\t\tthis.onModelChanged(modelChangedEvent);\n\t\t\tmodelChangedEvent.type = \"Changed\"; //$NON-NLS-1$\n\t\t\tvar start = modelChangedEvent.start;\n\t\t\tvar addedCharCount = modelChangedEvent.addedCharCount;\n\t\t\tvar removedCharCount = modelChangedEvent.removedCharCount;\n\t\t\tvar addedLineCount = modelChangedEvent.addedLineCount;\n\t\t\tvar removedLineCount = modelChangedEvent.removedLineCount;\n\t\t\t\n\t\t\tvar selections = this._getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (selection.end > start) {\n\t\t\t\t\tif (selection.end > start && selection.start < start + removedCharCount) {\n\t\t\t\t\t\t// selection intersects replaced text. set caret behind text change\n\t\t\t\t\t\tselection.setCaret(start + addedCharCount);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// move selection to keep same text selected\n\t\t\t\t\t\tselection.start +=  addedCharCount - removedCharCount;\n\t\t\t\t\t\tselection.end +=  addedCharCount - removedCharCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setSelection(selections, false, false);\n\t\t\t\n\t\t\tvar model = this._model;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar child = this._getLineNext();\n\t\t\twhile (child) {\n\t\t\t\tvar lineIndex = child.lineIndex;\n\t\t\t\tif (startLine <= lineIndex && lineIndex <= startLine + removedLineCount) {\n\t\t\t\t\tif (startLine === lineIndex && !child.modelChangedEvent && !child.lineRemoved) {\n\t\t\t\t\t\tchild.modelChangedEvent = modelChangedEvent;\n\t\t\t\t\t\tchild.lineChanged = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchild.lineRemoved = true;\n\t\t\t\t\t\tchild.lineChanged = false;\n\t\t\t\t\t\tchild.modelChangedEvent = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lineIndex > startLine + removedLineCount) {\n\t\t\t\t\tchild.lineIndex = lineIndex + addedLineCount - removedLineCount;\n\t\t\t\t\tchild._line.lineIndex = child.lineIndex;\n\t\t\t\t}\n\t\t\t\tchild = this._getLineNext(child);\n\t\t\t}\n\t\t\tif (this._lineHeight) {\n\t\t\t\tvar args = [startLine, removedLineCount].concat(newArray(addedLineCount));\n\t\t\t\tArray.prototype.splice.apply(this._lineHeight, args);\n\t\t\t}\n\t\t\tif (!this._wrapMode) {\n\t\t\t\tif (startLine <= this._maxLineIndex && this._maxLineIndex <= startLine + removedLineCount) {\n\t\t\t\t\tthis._checkMaxLineIndex = this._maxLineIndex;\n\t\t\t\t\tthis._maxLineIndex = -1;\n\t\t\t\t\tthis._maxLineWidth = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._update();\n\t\t},\n\t\t_onModelChanging: function(modelChangingEvent) {\n\t\t\tmodelChangingEvent.type = \"ModelChanging\"; //$NON-NLS-1$\n\t\t\tthis.onModelChanging(modelChangingEvent);\n\t\t\tmodelChangingEvent.type = \"Changing\"; //$NON-NLS-1$\n\t\t},\n\t\t_queueUpdate: function() {\n\t\t\tif (this._updateTimer || this._ignoreQueueUpdate) { return; }\n\t\t\tvar that = this;\n\t\t\tvar win = this._getWindow();\n\t\t\tthis._updateTimer = win.setTimeout(function() { \n\t\t\t\tthat._updateTimer = null;\n\t\t\t\tthat._update();\n\t\t\t}, 0);\n\t\t},\n\t\t_rangesToSelections: function(ranges) {\n\t\t\tvar selections = [];\n\t\t\tvar charCount = this._model.getCharCount();\n\t\t\tranges.forEach(function(range) {\n\t\t\t\tvar selection;\n\t\t\t\tif (range instanceof Selection) {\n\t\t\t\t\tselection = range.clone();\n\t\t\t\t} else {\n\t\t\t\t\tvar start = range.start;\n\t\t\t\t\tvar end = range.end;\n\t\t\t\t\tvar caret = start > end;\n\t\t\t\t\tif (caret) {\n\t\t\t\t\t\tvar tmp = start;\n\t\t\t\t\t\tstart = end;\n\t\t\t\t\t\tend = tmp;\n\t\t\t\t\t}\n\t\t\t\t\tstart = Math.max(0, Math.min (start, charCount));\n\t\t\t\t\tend = Math.max(0, Math.min (end, charCount));\n\t\t\t\t\tselection = new Selection(start, end, caret);\n\t\t\t\t}\n\t\t\t\tselections.push(selection);\n\t\t\t});\n\t\t\treturn selections;\n\t\t},\n\t\t_resetLineHeight: function(startLine, endLine) {\n\t\t\tif (this._wrapMode || this._variableLineHeight) {\n\t\t\t\tif (startLine !== undefined && endLine !== undefined) {\n\t\t\t\t\tfor (var i = startLine; i < endLine; i++) {\n\t\t\t\t\t\tthis._lineHeight[i] = undefined;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._lineHeight = newArray(this._model.getLineCount());\n\t\t\t\t}\n\t\t\t\tthis._calculateLineHeightTimer();\n\t\t\t} else {\n\t\t\t\tthis._lineHeight = null;\n\t\t\t}\n\t\t},\n\t\t_resetLineWidth: function() {\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tchild.lineWidth = undefined;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_reset: function() {\n\t\t\tthis._maxLineIndex = -1;\n\t\t\tthis._maxLineWidth = 0;\n\t\t\tthis._topChild = null;\n\t\t\tthis._bottomChild = null;\n\t\t\tthis._topIndexY = 0;\n\t\t\tthis._variableLineHeight = false;\n\t\t\tthis._resetLineHeight();\n\t\t\tthis._setSelection(new Selection(0, 0, false), false, false);\n\t\t\tif (this._viewDiv) {\n\t\t\t\tthis._viewDiv.scrollLeft = 0;\n\t\t\t\tthis._viewDiv.scrollTop = 0;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (clientDiv) {\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tchild.lineRemoved = true;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\t* Bug in Firefox.  For some reason, the caret does not show after the\n\t\t\t\t* view is refreshed.  The fix is to toggle the contentEditable state and\n\t\t\t\t* force the clientDiv to loose and receive focus if it is focused.\n\t\t\t\t*/\n\t\t\t\tif (util.isFirefox < 13) {\n\t\t\t\t\tthis._fixCaret ();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_scrollViewAnimated: function (pixelX, pixelY, callback) {\n\t\t\tvar win = this._getWindow();\n\t\t\tif (callback && this._scrollAnimation) {\n\t\t\t\tvar that = this;\n\t\t\t\tthis._animation = new Animation({\n\t\t\t\t\twindow: win,\n\t\t\t\t\tduration: this._scrollAnimation,\n\t\t\t\t\tcurve: [pixelY, 0],\n\t\t\t\t\tonAnimate: function(x) {\n\t\t\t\t\t\tvar deltaY = pixelY - Math.floor(x);\n\t\t\t\t\t\tthat._scrollView (0, deltaY);\n\t\t\t\t\t\tpixelY -= deltaY;\n\t\t\t\t\t},\n\t\t\t\t\tonEnd: function() {\n\t\t\t\t\t\tthat._animation = null;\n\t\t\t\t\t\tthat._scrollView (pixelX, pixelY);\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\twin.setTimeout(callback, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._animation.play();\n\t\t\t} else {\n\t\t\t\tthis._scrollView (pixelX, pixelY);\n\t\t\t\tif (callback) {\n\t\t\t\t\twin.setTimeout(callback, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}, \n\t\t_scrollView: function (pixelX, pixelY) {\n\t\t\t/*\n\t\t\t* Always set _ensureCaretVisible to false so that the view does not scroll\n\t\t\t* to show the caret when scrollView is not called from showCaret().\n\t\t\t*/\n\t\t\tthis._ensureCaretVisible = false;\n\t\t\t\n\t\t\t/*\n\t\t\t* Scrolling is done only by setting the scrollLeft and scrollTop fields in the\n\t\t\t* view div. This causes an update from the scroll event. In some browsers \n\t\t\t* this event is asynchronous and forcing update page to run synchronously\n\t\t\t* leads to redraw problems. \n\t\t\t* On Chrome 11, the view redrawing at times when holding PageDown/PageUp key.\n\t\t\t* On Firefox 4 for Linux, the view redraws the first page when holding \n\t\t\t* PageDown/PageUp key, but it will not redraw again until the key is released.\n\t\t\t*/\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (pixelX) { viewDiv.scrollLeft += pixelX; }\n\t\t\tif (pixelY) { viewDiv.scrollTop += pixelY; }\n\t\t},\n\t\t_setClipboardText: function (text, evt) {\n\t\t\tif (util.isElectron && !evt) {\n\t\t\t\twindow.__electron.clipboard.writeText(text);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar clipboardText;\n\t\t\t// IE\n\t\t\tvar win = this._getWindow();\n\t\t\tvar clipboardData = win.clipboardData;\n\t\t\t// WebKit and Firefox > 21\n\t\t\tif (!clipboardData && evt) {\n\t\t\t\tclipboardData = evt.clipboardData;\n\t\t\t}\n\t\t\tif (clipboardData) {\n\t\t\t\tclipboardText = [];\n\t\t\t\tconvertDelimiter(text, function(t) {clipboardText.push(t);}, function() {clipboardText.push(util.platformDelimiter);});\n\t\t\t\t/*\n\t\t\t\t* Note that setData() succeeds on Firefox > 21 and WebKit, but the return value is not a boolean like IE.\n\t\t\t\t*/\n\t\t\t\tvar success = clipboardData.setData(util.isIE ? \"Text\" : \"text/plain\", clipboardText.join(\"\")); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\tif (success || (evt && (util.isFirefox > 21 || util.isWebkit))) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (!evt) return false;\n\t\t\t}\n\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\tvar child = util.createElement(doc, \"pre\"); //$NON-NLS-1$\n\t\t\tchild.style.position = \"fixed\"; //$NON-NLS-1$\n\t\t\tchild.style.left = \"-1000px\"; //$NON-NLS-1$\n\t\t\tconvertDelimiter(text, \n\t\t\t\tfunction(t) {\n\t\t\t\t\tchild.appendChild(doc.createTextNode(t));\n\t\t\t\t}, \n\t\t\t\tfunction() {\n\t\t\t\t\tchild.appendChild(util.createElement(doc, \"br\")); //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t);\n\t\t\tchild.appendChild(doc.createTextNode(\" \")); //$NON-NLS-1$\n\t\t\tthis._clientDiv.appendChild(child);\n\t\t\tvar range = doc.createRange();\n\t\t\trange.setStart(child.firstChild, 0);\n\t\t\trange.setEndBefore(child.lastChild);\n\t\t\tvar sel = win.getSelection();\n\t\t\tif (sel.rangeCount > 0) { sel.removeAllRanges(); }\n\t\t\tsel.addRange(range);\n\t\t\tvar that = this;\n\t\t\t/** @ignore */\n\t\t\tvar cleanup = function() {\n\t\t\t\tif (child && child.parentNode === that._clientDiv) {\n\t\t\t\t\tthat._clientDiv.removeChild(child);\n\t\t\t\t}\n\t\t\t\tthat._updateDOMSelection();\n\t\t\t};\n\t\t\tvar result = false;\n\t\t\t/* \n\t\t\t* Try execCommand first, it works on firefox with clipboard permission,\n\t\t\t* chrome 5, safari 4.\n\t\t\t*/\n\t\t\tthis._ignoreCopy = true;\n\t\t\ttry {\n\t\t\t\tresult = doc.execCommand(\"copy\", false, null); //$NON-NLS-1$\n\t\t\t} catch (e) {}\n\t\t\tthis._ignoreCopy = false;\n\t\t\tif (!result) {\n\t\t\t\tif (evt) {\n\t\t\t\t\twin.setTimeout(cleanup, 0);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* no event and no permission, copy cannot be done */\n\t\t\tcleanup();\n\t\t\treturn true;\n\t\t},\n\t\t_setGrab: function (target) {\n\t\t\tif (target === this._grabControl) { return; }\n\t\t\tif (target) {\n\t\t\t\tif (target.setCapture) { target.setCapture(); }\n\t\t\t\tthis._grabControl = target;\n\t\t\t} else {\n\t\t\t\tif (this._grabControl.releaseCapture) { this._grabControl.releaseCapture(); }\n\t\t\t\tthis._grabControl = null;\n\t\t\t}\n\t\t},\n\t\t_setLinksVisible: function(visible) {\n\t\t\tif (this._linksVisible === visible) { return; }\n\t\t\tthis._linksVisible = visible;\n\t\t\t/*\n\t\t\t* Feature in IE.  The client div looses focus and does not regain it back\n\t\t\t* when the content editable flag is reset. The fix is to remember that it\n\t\t\t* had focus when the flag is cleared and give focus back to the div when\n\t\t\t* the flag is set.\n\t\t\t*/\n\t\t\tif (util.isIE && visible) {\n\t\t\t\tthis._hadFocus = this._hasFocus;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tclientDiv.contentEditable = !visible;\n\t\t\tif (this._hadFocus && !visible) {\n\t\t\t\tclientDiv.focus();\n\t\t\t}\n\t\t\tif (this._overlayDiv) {\n\t\t\t\tthis._overlayDiv.style.zIndex = visible ? \"-1\" : \"1\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t}\n\t\t\tvar line = this._getLineNext();\n\t\t\twhile (line) {\n\t\t\t\tline._line.updateLinks();\n\t\t\t\tline = this._getLineNext(line);\n\t\t\t}\n\t\t\tthis._updateDOMSelection();\n\t\t},\n\t\t_setSelection: function (selection, _scroll, update, callback, pageScroll, add, preserveCursorX) {\n\t\t\tif (selection) {\n\t\t\t\tif (update === undefined) { update = true; }\n\t\t\t\tvar oldSelection = this._getSelections(), newSelection;\n\t\t\t\tif (Array.isArray(selection)) {\n\t\t\t\t\tnewSelection = selection;\n\t\t\t\t} else if (add) {\n\t\t\t\t\tnewSelection = oldSelection.concat([selection]);\n\t\t\t\t} else {\n\t\t\t\t\tnewSelection = [selection];\n\t\t\t\t}\n\t\t\t\tthis._selection = Selection.merge(newSelection);\n\t\t\t\t\n\t\t\t\tif (!preserveCursorX) {\n\t\t\t\t\tnewSelection.forEach(function(sel) {\n\t\t\t\t\t\tsel._columnX = -1;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t/* \n\t\t\t\t* Always showCaret(), even when the selection is not changing, to ensure the\n\t\t\t\t* caret is visible. Note that some views do not scroll to show the caret during\n\t\t\t\t* keyboard navigation when the selection does not chanage. For example, line down\n\t\t\t\t* when the caret is already at the last line.\n\t\t\t\t*/\n\t\t\t\tif (_scroll !== false) { /*update = !*/this._showCaret(false, callback, _scroll, pageScroll); }\n\t\t\t\t\n\t\t\t\t/* \n\t\t\t\t* Sometimes the browser changes the selection \n\t\t\t\t* as result of method calls or \"leaked\" events. \n\t\t\t\t* The fix is to set the visual selection even\n\t\t\t\t* when the logical selection is not changed.\n\t\t\t\t*/\n\t\t\t\tif (update) { this._updateDOMSelection(); }\n\t\t\t\t\n\t\t\t\tif (!Selection.compare(oldSelection, newSelection)) {\n\t\t\t\t\tvar e = {\n\t\t\t\t\t\ttype: \"Selection\", //$NON-NLS-1$\n\t\t\t\t\t\toldValue: Selection.convert(oldSelection),\n\t\t\t\t\t\tnewValue: Selection.convert(newSelection)\n\t\t\t\t\t};\n\t\t\t\t\tthis.onSelection(e);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setSelectionTo: function (x, y, down, extent, add, drag) {\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar pt = this.convert({x: x, y: y}, \"page\", \"document\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar lineIndex = this._getLineIndex(pt.y);\n\t\t\tvar line = this._getLine(lineIndex);\n\t\t\tvar offset = line.getOffset(pt.x, pt.y - this._getLinePixel(lineIndex));\n\t\t\tif (drag && !extent) {\n\t\t\t\tif (Selection.contains(selections, offset)) {\n\t\t\t\t\tthis._dragOffset = offset;\n\t\t\t\t\tline.destroy();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._blockSelection) {\n\t\t\t\tselections = this._getBlockSelections(selections, lineIndex, pt);\n\t\t\t} else {\n\t\t\t\tvar selection;\n\t\t\t\tif (!down) {\n\t\t\t\t\tselection = Selection.editing(selections);\n\t\t\t\t} else if (extent) {\n\t\t\t\t\tselection = selections[selections.length - 1];\n\t\t\t\t\tselection._editing = true;\n\t\t\t\t} else {\n\t\t\t\t\tselection = new Selection(0, 0);\n\t\t\t\t\tselection._editing = true;\n\t\t\t\t\tif (add) {\n\t\t\t\t\t\tselections.push(selection);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselections = [selection];\n\t\t\t\t\t}\n\t\t\t\t\tselection._docX = pt.x;\n\t\t\t\t}\n\t\t\t\tif (this._clickCount === 1) {\n\t\t\t\t\tselection.extend(offset);\n\t\t\t\t\tif (!extent) { selection.collapse(); }\n\t\t\t\t} else {\n\t\t\t\t\tvar word = (this._clickCount & 1) === 0;\n\t\t\t\t\tvar start, end;\n\t\t\t\t\tif (word) {\n\t\t\t\t\t\tif (this._doubleClickSelection) {\n\t\t\t\t\t\t\tif (offset >= this._doubleClickSelection.start) {\n\t\t\t\t\t\t\t\tstart = this._doubleClickSelection.start;\n\t\t\t\t\t\t\t\tend = line.getNextOffset(offset, {unit:\"wordend\", count:1}); //$NON-NLS-1$\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstart = line.getNextOffset(offset, {unit:\"word\", count:-1}); //$NON-NLS-1$\n\t\t\t\t\t\t\t\tend = this._doubleClickSelection.end;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = line.getNextOffset(offset, {unit:\"word\", count:-1}); //$NON-NLS-1$\n\t\t\t\t\t\t\tend = line.getNextOffset(start, {unit:\"wordend\", count:1}); //$NON-NLS-1$\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this._doubleClickSelection) {\n\t\t\t\t\t\t\tvar doubleClickLine = model.getLineAtOffset(this._doubleClickSelection.start);\n\t\t\t\t\t\t\tif (lineIndex >= doubleClickLine) {\n\t\t\t\t\t\t\t\tstart = model.getLineStart(doubleClickLine);\n\t\t\t\t\t\t\t\tend = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\t\tend = model.getLineEnd(doubleClickLine);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tend = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tselection.setCaret(start);\n\t\t\t\t\tselection.extend(end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._setSelection(selections, true, true, null, false);\n\t\t\tline.destroy();\n\t\t\treturn true;\n\t\t},\n\t\t_setFullSelection: function(fullSelection, init) {\n\t\t\tthis._fullSelection = fullSelection;\n\t\t\tif (util.isWebkit < 537.36) {\n\t\t\t\tthis._fullSelection = fullSelection = true;\n\t\t\t}\n\t\t\tif (!this._domSelection) {\n\t\t\t\tthis._domSelection = [];\n\t\t\t\tthis._cursorVisible = true;\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis._updateDOMSelection();\n\t\t\t}\n\t\t},\n\t\t_setBlockCursor: function (visible) {\n\t\t\tthis._blockCursorVisible = visible;\n\t\t\tthis._updateBlockCursorVisible();\n\t\t},\n\t\t_setOverwriteMode: function (overwrite) {\n\t\t\tthis._overwriteMode = overwrite;\n\t\t\tthis._updateBlockCursorVisible();\n\t\t},\n\t\t_updateBlockCursorVisible: function () {\n\t\t\tif (this._blockCursorVisible || this._overwriteMode) {\n\t\t\t\tif (!this._cursorDiv) {\n\t\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\t\tvar cursorDiv = util.createElement(viewDiv.ownerDocument, \"div\"); //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.className = \"textviewBlockCursor\"; //$NON-NLS-1$\n\t\t\t\t\tthis._cursorDiv = cursorDiv;\n\t\t\t\t\tcursorDiv.tabIndex = -1;\n\t\t\t\t\tcursorDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.color = \"transparent\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\tcursorDiv.innerHTML = \"&nbsp;\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.appendChild(cursorDiv);\n\t\t\t\t\tthis._updateDOMSelection();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._cursorDiv) {\n\t\t\t\t\tthis._cursorDiv.parentNode.removeChild(this._cursorDiv);\n\t\t\t\t\tthis._cursorDiv = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setMarginOffset: function(marginOffset, init) {\n\t\t\tthis._marginOffset = marginOffset;\n\t\t\tthis._marginDiv.style.display = marginOffset ? \"block\" : \"none\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tif (!init) {\n\t\t\t\tthis._metrics = this._calculateMetrics();\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_setWrapOffset: function(wrapOffset, init) {\n\t\t\tthis._wrapOffset = wrapOffset;\n\t\t\tif (!init) {\n\t\t\t\tthis._metrics = this._calculateMetrics();\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_setReadOnly: function (readOnly) {\n\t\t\tthis._readonly = readOnly;\n\t\t},\n\t\t_setSingleMode: function (singleMode, init) {\n\t\t\tthis._singleMode = singleMode;\n\t\t\tthis._updateOverflow();\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setNoScroll: function (noScroll, init) {\n\t\t\tthis._noScroll = noScroll;\n\t\t\tthis._updateOverflow();\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setTabSize: function (tabSize, init) {\n\t\t\tthis._tabSize = tabSize;\n\t\t\tthis._customTabSize = undefined;\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (util.isOpera) {\n\t\t\t\tif (clientDiv) { clientDiv.style.OTabSize = this._tabSize+\"\"; }\n\t\t\t} else if (util.isWebkit >= 537.1) {\n\t\t\t\tif (clientDiv) { clientDiv.style.tabSize = this._tabSize+\"\"; }\n\t\t\t} else if (util.isFirefox >= 4) {\n\t\t\t\tif (clientDiv) {  clientDiv.style.MozTabSize = this._tabSize+\"\"; }\n\t\t\t} else if (this._tabSize !== 8) {\n\t\t\t\tthis._customTabSize = this._tabSize;\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis.redrawLines();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t},\n\t\t_setTheme: function(theme) {\n\t\t\tif (this._theme) {\n\t\t\t\tthis._theme.removeEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._theme = theme;\n\t\t\tif (this._theme) {\n\t\t\t\tthis._theme.addEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._setThemeClass(this._themeClass);\n\t\t},\n\t\t_setThemeClass: function (themeClass, init) {\n\t\t\tthis._themeClass = themeClass;\n\t\t\tvar viewContainerClass = \"textview\"; //$NON-NLS-1$\n\t\t\tvar globalThemeClass = this._theme.getThemeClass();\n\t\t\tif (globalThemeClass) { viewContainerClass += \" \" + globalThemeClass; } //$NON-NLS-1$\n\t\t\tif (this._themeClass && globalThemeClass !== this._themeClass) { viewContainerClass += \" \" + this._themeClass; } //$NON-NLS-1$\n\t\t\tthis._rootDiv.className = viewContainerClass;\n\t\t\tthis._updateStyle(init);\n\t\t},\n\t\t_setUndoStack: function (undoStack) {\n\t\t\tthis._undoStack = undoStack;\n\t\t},\n\t\t_setWrapMode: function (wrapMode, init) {\n\t\t\tthis._wrapMode = wrapMode && this._wrappable;\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tif (this._wrapMode) {\n\t\t\t\tclientDiv.style.whiteSpace = \"pre-wrap\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.wordWrap = \"break-word\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tclientDiv.style.whiteSpace = \"pre\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.wordWrap = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._updateOverflow();\n\t\t\tif (!init) {\n\t\t\t\tthis.redraw();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t\tthis._resetLineHeight();\n\t\t},\n\t\t_showCaret: function (allSelection, callback, showOptions, pageScroll) {\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._ignoreDOMSelection) { return; }\n\t\t\tif (this._imeOffset !== -1) return;\n\t\t\tvar model = this._model;\n\t\t\tvar selections = this._getSelections();\n\t\t\tvar selection = Selection.editing(selections, this._autoScrollDir === \"down\"); //$NON-NLS-1$\n\t\t\tvar _scroll = this._getScroll();\n\t\t\tvar caret = selection.getCaret();\n\t\t\tvar start = selection.start;\n\t\t\tvar end = selection.end;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tvar endLine = model.getLineAtOffset(end);\n\t\t\tvar endInclusive = Math.max(Math.max(start, model.getLineStart(endLine)), end - 1);\n\t\t\tvar clientWidth = this._getClientWidth();\n\t\t\tvar clientHeight = this._getClientHeight();\n\t\t\tvar minScroll = clientWidth / 4;\n\t\t\tvar bounds = this._getBoundsAtOffset(caret === start ? start : endInclusive);\n\t\t\tvar left = bounds.left;\n\t\t\tvar right = bounds.right;\n\t\t\tvar _top = bounds.top;\n\t\t\tvar bottom = bounds.bottom;\n\t\t\tvar selectionHeight = 0;\n\t\t\tvar hasShowOptions = typeof showOptions === \"object\"; //$NON-NLS-1$\n\t\t\tif ((allSelection || hasShowOptions) && !selection.isEmpty()) {\n\t\t\t\tbounds = this._getBoundsAtOffset(caret === end ? start : endInclusive);\n\t\t\t\tselectionHeight = (bounds.bottom > bottom ? bounds.bottom : bottom) - (bounds.top < _top ? bounds.top : _top);\n\t\t\t\tif (allSelection) {\n\t\t\t\t\tif (bounds.top === _top) {\n\t\t\t\t\t\tif (caret === start) {\n\t\t\t\t\t\t\tright = left + Math.min(bounds.right - left, clientWidth);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tleft = right - Math.min(right - bounds.left, clientWidth);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (caret === start) {\n\t\t\t\t\t\t\tbottom = _top + Math.min(bounds.bottom - _top, clientHeight);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_top = bottom - Math.min(bottom - bounds.top, clientHeight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar pixelX = 0;\n\t\t\tif (left < _scroll.x) {\n\t\t\t\tpixelX = Math.min(left - _scroll.x, -minScroll);\n\t\t\t}\n\t\t\tif (right > _scroll.x + clientWidth) {\n\t\t\t\tpixelX = Math.max(right - _scroll.x - clientWidth, minScroll);\n\t\t\t}\n\t\t\tvar pixelY = 0;\n\t\t\tif (_top < _scroll.y) {\n\t\t\t\tpixelY = _top - _scroll.y;\n\t\t\t} else if (bottom > _scroll.y + clientHeight) {\n\t\t\t\tpixelY = bottom - _scroll.y - clientHeight;\n\t\t\t}\n\t\t\tif (pageScroll) {\n\t\t\t\tif (pageScroll > 0) {\n\t\t\t\t\tif (pixelY > 0) {\n\t\t\t\t\t\tpixelY = Math.max(pixelY, pageScroll);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (pixelY < 0) {\n\t\t\t\t\t\tpixelY = Math.min(pixelY, pageScroll);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar alwaysScroll = hasShowOptions && showOptions.scrollPolicy === \"always\"; //$NON-NLS-1$\n\t\t\tif (pixelX !== 0 || pixelY !== 0 || alwaysScroll) {\n\t\t\t\tif (hasShowOptions) {\n\t\t\t\t\tvar flag = pixelY > 0;\n\t\t\t\t\tif (pixelY === 0) {\n\t\t\t\t\t\tpixelY = _top - _scroll.y;\n\t\t\t\t\t}\n\t\t\t\t\tvar viewAnchor = showOptions.viewAnchor;\n\t\t\t\t\tvar selectionAnchor = showOptions.selectionAnchor;\n\t\t\t\t\tvar viewAnchorOffset = Math.min(Math.max(0, showOptions.viewAnchorOffset || 0));\n//\t\t\t\t\tvar selectionAnchorOffset = Math.min(Math.max(0, showOptions.selectionAnchorOffset || 0));\n\t\t\t\t\tif (viewAnchor === \"top\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? (1 - viewAnchorOffset) * clientHeight : -viewAnchorOffset * clientHeight);\n\t\t\t\t\t} else if (viewAnchor === \"bottom\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? viewAnchorOffset * clientHeight : -(1 - viewAnchorOffset) * clientHeight);\n\t\t\t\t\t} else if (viewAnchor === \"center\") { //$NON-NLS-1$\n\t\t\t\t\t\tpixelY += Math.floor(flag ? clientHeight / 2 + viewAnchorOffset * clientHeight : clientHeight / 2  - (1 - viewAnchorOffset) * clientHeight);\n\t\t\t\t\t} else { // caret is the default\n\t\t\t\t\t\tpixelY += Math.floor(flag ? viewAnchorOffset * clientHeight : -viewAnchorOffset * clientHeight);\n\t\t\t\t\t}\n\t\t\t\t\tif (startLine !== endLine) {\n\t\t\t\t\t\tif (selectionAnchor === \"top\" && caret !== start) { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(-selectionHeight);\n\t\t\t\t\t\t} else if (selectionAnchor === \"bottom\" && caret !== end) { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(selectionHeight);\n\t\t\t\t\t\t} else if (selectionAnchor === \"center\") { //$NON-NLS-1$\n\t\t\t\t\t\t\tpixelY += Math.floor(selectionHeight / 2);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// caret is the default\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (pixelY !== 0 && typeof showOptions === \"number\") { //$NON-NLS-1$\n\t\t\t\t\tif (showOptions < 0) { showOptions = 0; }\n\t\t\t\t\tif (showOptions > 1) { showOptions = 1; }\n\t\t\t\t\tpixelY += Math.floor(pixelY > 0 ? showOptions * clientHeight : -showOptions * clientHeight);\n\t\t\t\t}\n\t\t\t\tthis._scrollViewAnimated(pixelX, pixelY, callback);\n\t\t\t\t/*\n\t\t\t\t* When the view scrolls it is possible that one of the scrollbars can show over the caret.\n\t\t\t\t* Depending on the browser scrolling can be synchronous (Safari), in which case the change \n\t\t\t\t* can be detected before showCaret() returns. When scrolling is asynchronous (most browsers), \n\t\t\t\t* the detection is done during the next update page.\n\t\t\t\t*/\n\t\t\t\tif (clientHeight !== this._getClientHeight() || clientWidth !== this._getClientWidth()) {\n\t\t\t\t\tthis._showCaret();\n\t\t\t\t} else {\n\t\t\t\t\tthis._ensureCaretVisible = true;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_startIME: function () {\n\t\t\tif (this._imeOffset !== -1) { return; }\n\t\t\tvar selected = false;\n\t\t\tvar selections = this._getSelections();\n\t\t\tfor (var i=0; i<selections.length && !selected; i++) {\n\t\t\t\tselected = !selections[i].isEmpty();\n\t\t\t}\n\t\t\tif (selected) {\n\t\t\t\tthis._modifyContent({text: \"\", selection: selections}, true);\n\t\t\t}\n\t\t\tthis._imeOffset = selections[0].start;\n\t\t},\n\t\t_unhookEvents: function() {\n\t\t\tthis._model.removeEventListener(\"preChanging\", this._modelListener.onChanging); //$NON-NLS-1$\n\t\t\tthis._model.removeEventListener(\"postChanged\", this._modelListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._theme.removeEventListener(\"ThemeChanged\", this._themeListener.onChanged); //$NON-NLS-1$\n\t\t\tthis._modelListener = null;\n\t\t\tfor (var i=0; i<this._handlers.length; i++) {\n\t\t\t\tvar h = this._handlers[i];\n\t\t\t\tremoveHandler(h.target, h.type, h.handler);\n\t\t\t}\n\t\t\tthis._handlers = null;\n\t\t\tif (this._mutationObserver) {\n\t\t\t\tthis._mutationObserver.disconnect();\n\t\t\t}\n\t\t},\n\t\t_updateDOMSelection: function () {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._ignoreDOMSelection) { return; }\n\t\t\tif (this._imeOffset !== -1) return;\n\t\t\tif (!this._clientDiv) { return; }\n\t\t\tvar selection = this._getSelections();\n\t\t\tvar domSelection = this._domSelection, i;\n\t\t\tif (domSelection.length < selection.length) {\n\t\t\t\tfor (i=domSelection.length; i<selection.length; i++) {\n\t\t\t\t\tdomSelection.push(new DOMSelection(this));\n\t\t\t\t}\n\t\t\t} else if (domSelection.length > selection.length) {\n\t\t\t\tdomSelection.splice(selection.length).forEach(function(s) {\n\t\t\t\t\ts.destroy();\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (i=0; i<domSelection.length; i++) {\n\t\t\t\tdomSelection[i].setPrimary(i === 0);\n\t\t\t\tdomSelection[i].setSelection(selection[i]);\n\t\t\t}\n\t\t\tvar win = this._getWindow();\n\t\t\tvar that = this;\n\t\t\tif (domSelection.length > 1) {\n\t\t\t\tif (!this._cursorTimer) {\n\t\t\t\t\tthis._cursorTimer = win.setInterval(function() {\n\t\t\t\t\t\tthat._cursorVisible = !that._cursorVisible;\n\t\t\t\t\t\tthat._domSelection.forEach(function(domSelection) { domSelection.update(); });\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._cursorTimer) {\n\t\t\t\t\twin.clearInterval(this._cursorTimer);\n\t\t\t\t\tthis._cursorTimer = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_update: function(hScrollOnly) {\n\t\t\tif (this._redrawCount > 0) { return; }\n\t\t\tif (this._updateTimer) {\n\t\t\t\tvar win = this._getWindow();\n\t\t\t\twin.clearTimeout(this._updateTimer);\n\t\t\t\tthis._updateTimer = null;\n\t\t\t\thScrollOnly = false;\n\t\t\t}\n\t\t\tvar clientDiv = this._clientDiv;\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (!clientDiv) { return; }\n\t\t\tif (this._metrics.invalid) {\n\t\t\t\tthis._ignoreQueueUpdate = true;\n\t\t\t\tthis._updateStyle();\n\t\t\t\tthis._ignoreQueueUpdate = false;\n\t\t\t}\n\t\t\tvar model = this._model;\n\t\t\tvar _scroll = this._getScroll(false);\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar needUpdate = false;\n\t\t\tvar hScroll = false, vScroll = false;\n\t\t\tvar scrollbarWidth = this._metrics.scrollWidth;\n\t\t\t\n\t\t\tif (this._wrapMode) {\n\t\t\t\tclientDiv.style.width = (this._metrics.wrapWidth || this._getClientWidth()) + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\t\n\t\t\t/*\n\t\t\t* topIndex - top line index of the view (maybe be particialy visible)\n\t\t\t* lineStart - top line minus one line (if any)\n\t\t\t* topIndexY - portion of the top line that is NOT visible.\n\t\t\t* top - topIndexY plus height of the line before top line (if any)\n\t\t\t*/\n\t\t\tvar topIndex, lineStart, _top, topIndexY,\n\t\t\t\tleftWidth, leftRect,\n\t\t\t\tclientWidth, clientHeight, scrollWidth, scrollHeight,\n\t\t\t\ttotalHeight = 0, totalLineIndex = 0, tempLineHeight;\n\t\t\tif (this._lineHeight) {\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex);\n\t\t\t\t\tif (totalHeight + tempLineHeight > _scroll.y) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\ttopIndex = totalLineIndex;\n\t\t\t\tlineStart = Math.max(0, topIndex - 1);\n\t\t\t\ttopIndexY = _top = _scroll.y - totalHeight;\n\t\t\t\tif (topIndex > 0) {\n\t\t\t\t\t_top += this._getLineHeight(topIndex - 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar firstLine = Math.max(0, _scroll.y) / lineHeight;\n\t\t\t\ttopIndex = Math.floor(firstLine);\n\t\t\t\tlineStart = Math.max(0, topIndex - 1);\n\t\t\t\t_top = Math.round((firstLine - lineStart) * lineHeight);\n\t\t\t\ttopIndexY = Math.round((firstLine - topIndex) * lineHeight);\n\t\t\t\tscrollHeight = lineCount * lineHeight;\n\t\t\t}\n\t\t\tthis._topIndexY = topIndexY;\n\t\t\tvar rootDiv = this._rootDiv;\n\t\t\tvar rootWidth = rootDiv.clientWidth;\n\t\t\tvar rootHeight = rootDiv.clientHeight;\n\t\t\tif (hScrollOnly) {\n\t\t\t\tleftWidth = 0;\n\t\t\t\tif (this._leftDiv) {\n\t\t\t\t\tleftRect = this._leftDiv.getBoundingClientRect();\n\t\t\t\t\tleftWidth = leftRect.right - leftRect.left;\n\t\t\t\t}\n\t\t\t\tclientWidth = this._getClientWidth();\n\t\t\t\tclientHeight = this._getClientHeight();\n\t\t\t\tscrollWidth = clientWidth;\n\t\t\t\tif (this._wrapMode) {\n\t\t\t\t\tif (this._metrics.wrapWidth) {\n\t\t\t\t\t\tscrollWidth = this._metrics.wrapWidth;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscrollWidth = Math.max(this._maxLineWidth, scrollWidth);\n\t\t\t\t}\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex, false);\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\tscrollHeight = totalHeight;\n\t\t\t} else {\n\t\t\t\tclientHeight = this._getClientHeight();\n\n\t\t\t\tvar linesPerPage = Math.floor((clientHeight + topIndexY) / lineHeight);\n\t\t\t\tvar bottomIndex = Math.min(topIndex + linesPerPage, lineCount - 1);\n\t\t\t\tvar lineEnd = Math.min(bottomIndex + 1, lineCount - 1);\n\t\t\t\t\n\t\t\t\tvar lineIndex, lineWidth;\n\t\t\t\tvar child = clientDiv.firstChild;\n\t\t\t\twhile (child) {\n\t\t\t\t\tlineIndex = child.lineIndex;\n\t\t\t\t\tvar nextChild = child.nextSibling;\n\t\t\t\t\tif (!(lineStart <= lineIndex && lineIndex <= lineEnd) || child.lineRemoved || child.lineIndex === -1) {\n\t\t\t\t\t\tif (this._mouseWheelLine === child) {\n\t\t\t\t\t\t\tchild.style.display = \"none\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tchild.lineIndex = -1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclientDiv.removeChild(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tchild = nextChild;\n\t\t\t\t}\n\t\n\t\t\t\tchild = this._getLineNext();\n\t\t\t\tvar doc = viewDiv.ownerDocument;\n\t\t\t\tvar frag = doc.createDocumentFragment();\n\t\t\t\tfor (lineIndex=lineStart; lineIndex<=lineEnd; lineIndex++) {\n\t\t\t\t\tif (!child || child.lineIndex > lineIndex) {\n\t\t\t\t\t\tnew TextLine(this, lineIndex).create(frag, null, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (frag.firstChild) {\n\t\t\t\t\t\t\tclientDiv.insertBefore(frag, child);\n\t\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (child && child.lineChanged) {\n\t\t\t\t\t\t\tchild = new TextLine(this, lineIndex).create(frag, child, true);\n\t\t\t\t\t\t\tchild.lineChanged = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild = this._getLineNext(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (frag.firstChild) { clientDiv.insertBefore(frag, child); }\n\t\n\t\t\t\t/*\n\t\t\t\t* Feature in WekKit. Webkit limits the width of the lines\n\t\t\t\t* computed below to the width of the client div.  This causes\n\t\t\t\t* the lines to be wrapped even though \"pre\" is set.  The fix\n\t\t\t\t* is to set the width of the client div to \"0x7fffffffpx\"\n\t\t\t\t* before computing the lines width.  Note that this value is\n\t\t\t\t* reset to the appropriate value further down.\n\t\t\t\t*/ \n\t\t\t\tif (util.isWebkit && !this._wrapMode) {\n\t\t\t\t\tclientDiv.style.width = \"0x7fffffffpx\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\n\t\t\t\tvar rect;\n\t\t\t\tchild = this._getLineNext();\n\t\t\t\tvar bottomHeight = clientHeight + _top;\n\t\t\t\tvar foundBottomIndex = false;\n\t\t\t\twhile (child) {\n\t\t\t\t\tlineWidth = child.lineWidth;\n\t\t\t\t\tif (lineWidth === undefined) {\n\t\t\t\t\t\trect = child._line.getBoundingClientRect();\n\t\t\t\t\t\tlineWidth = child.lineWidth = Math.ceil(rect.right - rect.left);\n\t\t\t\t\t\tvar lh = rect.bottom - rect.top;\n\t\t\t\t\t\tif (this._lineHeight) {\n\t\t\t\t\t\t\tthis._lineHeight[child.lineIndex] = lh;\n\t\t\t\t\t\t} else if (lineHeight !== 0 && lh !== 0 && Math.ceil(lineHeight) !== Math.ceil(lh)) {\n\t\t\t\t\t\t\tthis._variableLineHeight = true;\n\t\t\t\t\t\t\tthis._lineHeight = [];\n\t\t\t\t\t\t\tthis._lineHeight[child.lineIndex] = lh;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (this._lineHeight && !foundBottomIndex) {\n\t\t\t\t\t\tbottomHeight -= this._lineHeight[child.lineIndex];\n\t\t\t\t\t\tif (bottomHeight < 0) {\n\t\t\t\t\t\t\tbottomIndex = child.lineIndex;\n\t\t\t\t\t\t\tfoundBottomIndex = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!this._wrapMode) {\n\t\t\t\t\t\tif (lineWidth >= this._maxLineWidth) {\n\t\t\t\t\t\t\tthis._maxLineWidth = lineWidth;\n\t\t\t\t\t\t\tthis._maxLineIndex = child.lineIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this._checkMaxLineIndex === child.lineIndex) { this._checkMaxLineIndex = -1; }\n\t\t\t\t\t}\n\t\t\t\t\tif (child.lineIndex === topIndex) { this._topChild = child; }\n\t\t\t\t\tif (child.lineIndex === bottomIndex) { this._bottomChild = child; }\n\t\t\t\t\tchild = this._getLineNext(child);\n\t\t\t\t}\n\t\t\t\tif (this._checkMaxLineIndex !== -1) {\n\t\t\t\t\tlineIndex = this._checkMaxLineIndex;\n\t\t\t\t\tthis._checkMaxLineIndex = -1;\n\t\t\t\t\tif (0 <= lineIndex && lineIndex < lineCount) {\n\t\t\t\t\t\tvar line = new TextLine(this, lineIndex);\n\t\t\t\t\t\trect = line.getBoundingClientRect();\n\t\t\t\t\t\tlineWidth = rect.right - rect.left;\n\t\t\t\t\t\tif (lineWidth >= this._maxLineWidth) {\n\t\t\t\t\t\t\tthis._maxLineWidth = lineWidth;\n\t\t\t\t\t\t\tthis._maxLineIndex = lineIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\twhile (totalLineIndex < lineCount) {\n\t\t\t\t\ttempLineHeight = this._getLineHeight(totalLineIndex, totalLineIndex <= bottomIndex);\n\t\t\t\t\ttotalHeight += tempLineHeight;\n\t\t\t\t\ttotalLineIndex++;\n\t\t\t\t}\n\t\t\t\tscrollHeight = totalHeight;\n\t\n\t\t\t\t// Update rulers\n\t\t\t\tthis._updateRuler(this._leftDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._rightDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._innerRightDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\tthis._updateRuler(this._marginDiv, topIndex, lineEnd, rootHeight);\n\t\t\t\t\n\t\t\t\tleftWidth = 0;\n\t\t\t\tif (this._leftDiv) {\n\t\t\t\t\tleftRect = this._leftDiv.getBoundingClientRect();\n\t\t\t\t\tleftWidth = leftRect.right - leftRect.left;\n\t\t\t\t}\n\t\t\t\tvar rightWidth = 0;\n\t\t\t\tif (this._rightDiv) {\n\t\t\t\t\tvar rightRect = this._rightDiv.getBoundingClientRect();\n\t\t\t\t\trightWidth = rightRect.right - rightRect.left;\n\t\t\t\t}\n\t\t\t\tviewDiv.style.left = leftWidth + \"px\"; //$NON-NLS-1$\n\t\t\t\tviewDiv.style.right = rightWidth + \"px\"; //$NON-NLS-1$\n\n\t\t\t\t/* Need to set the height first in order for the width to consider the vertical scrollbar */\n\t\t\t\tvar scrollDiv = this._scrollDiv;\n\t\t\t\tscrollDiv.style.height = (scrollHeight + (util.isWebkit ? 0 : viewPad.bottom)) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\tclientWidth = this._getClientWidth();\n\t\t\t\tif (!this._singleMode && !this._wrapMode && !this._noScroll) {\n\t\t\t\t\tvar clientHeightNoScroll = clientHeight, clientHeightScroll = clientHeight;\n\t\t\t\t\tvar oldHScroll = viewDiv.style.overflowX === \"scroll\"; //$NON-NLS-1$\n\t\t\t\t\tif (oldHScroll) {\n\t\t\t\t\t\tclientHeightNoScroll += scrollbarWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclientHeightScroll -= scrollbarWidth;\n\t\t\t\t\t}\n\t\t\t\t\tvar clientWidthNoScroll = clientWidth, clientWidthScroll = clientWidth;\n\t\t\t\t\tvar oldVScroll = viewDiv.style.overflowY === \"scroll\"; //$NON-NLS-1$\n\t\t\t\t\tif (oldVScroll) {\n\t\t\t\t\t\tclientWidthNoScroll += scrollbarWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclientWidthScroll -= scrollbarWidth;\n\t\t\t\t\t}\n\t\t\t\t\tclientHeight = clientHeightNoScroll;\n\t\t\t\t\tclientWidth = clientWidthNoScroll;\n\t\t\t\t\tif (scrollHeight > clientHeight) {\n\t\t\t\t\t\tvScroll = true;\n\t\t\t\t\t\tclientWidth = clientWidthScroll;\n\t\t\t\t\t}\n\t\t\t\t\tif (this._maxLineWidth > clientWidth) {\n\t\t\t\t\t\thScroll = true;\n\t\t\t\t\t\tclientHeight = clientHeightScroll;\n\t\t\t\t\t\tif (scrollHeight > clientHeight) {\n\t\t\t\t\t\t\tvScroll = true;\n\t\t\t\t\t\t\tclientWidth = clientWidthScroll;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (oldHScroll !== hScroll) {\n\t\t\t\t\t\tviewDiv.style.overflowX = hScroll ? \"scroll\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t\t}\n\t\t\t\t\tif (oldVScroll !== vScroll) {\n\t\t\t\t\t\tviewDiv.style.overflowY = vScroll ? \"scroll\" : \"hidden\"; //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\t\t}\n\t\t\t\t\tneedUpdate = oldHScroll !== hScroll || oldVScroll !== vScroll;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar width = clientWidth;\n\t\t\t\tif (this._wrapMode) {\n\t\t\t\t\tif (this._metrics.wrapWidth) {\n\t\t\t\t\t\twidth = this._metrics.wrapWidth;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twidth = Math.max(this._maxLineWidth + this._getInnerRightWidth(), width);\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\t* Except by IE 8 and earlier, all other browsers are not allocating enough space for the right padding \n\t\t\t\t* in the scrollbar. It is possible this a bug since all other paddings are considered.\n\t\t\t\t*/\n\t\t\t\tscrollWidth = width;\n\t\t\t\tif ((!util.isIE || util.isIE >= 9) && this._maxLineWidth > clientWidth) { width += viewPad.right + viewPad.left; }\n\t\t\t\tscrollDiv.style.width = width + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (this._clipScrollDiv) {\n\t\t\t\t\tthis._clipScrollDiv.style.width = width + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\t/* Get the left scroll after setting the width of the scrollDiv as this can change the horizontal scroll offset. */\n\t\t\t\t_scroll = this._getScroll(false);\n\n\t\t\t\tvar innerRightDiv = this._innerRightDiv;\n\t\t\t\tif (innerRightDiv) {\n\t\t\t\t\tinnerRightDiv.style.right = rightWidth + (viewDiv.style.overflowY === \"scroll\" ? this._metrics.scrollWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t\tinnerRightDiv.style.bottom = (viewDiv.style.overflowX === \"scroll\" ? scrollbarWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._scrollHeight = scrollHeight;\n\t\t\tif (this._vScrollDiv) {\n\t\t\t\tvar trackHeight = clientHeight - 8;\n\t\t\t\tvar thumbHeight = Math.max(15, Math.ceil(Math.min(1, trackHeight / (scrollHeight + viewPad.top + viewPad.bottom)) * trackHeight));\n\t\t\t\tthis._vScrollDiv.style.left = (leftWidth + clientWidth - 8) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv.style.top = Math.floor(Math.max(0, (_scroll.y * trackHeight / scrollHeight))) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._vScrollDiv.style.height = thumbHeight + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (!this._wrapMode && this._hScrollDiv) {\n\t\t\t\tvar trackWidth = clientWidth - 8;\n\t\t\t\tvar thumbWidth = Math.max(15, Math.ceil(Math.min(1, trackWidth / (this._maxLineWidth + viewPad.left + viewPad.right)) * trackWidth));\n\t\t\t\tthis._hScrollDiv.style.left = leftWidth + Math.floor(Math.max(0, Math.floor(_scroll.x * trackWidth / this._maxLineWidth))) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.top = (clientHeight - 9) + \"px\"; //$NON-NLS-1$\n\t\t\t\tthis._hScrollDiv.style.width = thumbWidth + \"px\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tvar left = _scroll.x;\t\n\t\t\tvar clipDiv = this._clipDiv;\n\t\t\tvar overlayDiv = this._overlayDiv;\n\t\t\tvar marginDiv = this._marginDiv;\n\t\t\tvar clipLeft, clipTop;\n\t\t\tif (marginDiv) {\n\t\t\t\tmarginDiv.style.left = (-left + leftWidth + this._metrics.marginWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tmarginDiv.style.bottom = (viewDiv.style.overflowX === \"scroll\" ? scrollbarWidth : 0) + \"px\"; //$NON-NLS-1$ //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (clipDiv) {\n\t\t\t\tclipDiv.scrollLeft = left;\n\t\t\t\tclipDiv.scrollTop = 0;\n\t\t\t\tclipLeft = leftWidth + viewPad.left;\n\t\t\t\tclipTop = viewPad.top;\n\t\t\t\tvar clipWidth = clientWidth;\n\t\t\t\tvar clipHeight = clientHeight;\n\t\t\t\tvar clientLeft = 0, clientTop = -_top;\n\t\t\t\tif (_scroll.x === 0) {\n\t\t\t\t\tclipLeft -= viewPad.left;\n\t\t\t\t\tclipWidth += viewPad.left;\n\t\t\t\t\tclientLeft = viewPad.left;\n\t\t\t\t} \n\t\t\t\tif (_scroll.x + clientWidth === scrollWidth) {\n\t\t\t\t\tclipWidth += viewPad.right;\n\t\t\t\t}\n\t\t\t\tif (_scroll.y === 0) {\n\t\t\t\t\tclipTop -= viewPad.top;\n\t\t\t\t\tclipHeight += viewPad.top;\n\t\t\t\t\tclientTop += viewPad.top;\n\t\t\t\t}\n\t\t\t\tif (_scroll.y + clientHeight === scrollHeight) { \n\t\t\t\t\tclipHeight += viewPad.bottom; \n\t\t\t\t}\n\t\t\t\tclipDiv.style.left = clipLeft + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.top = clipTop + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.right = (rootWidth - clipWidth - clipLeft) + \"px\"; //$NON-NLS-1$\n\t\t\t\tclipDiv.style.bottom = (rootHeight - clipHeight - clipTop) + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.left = clientLeft + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.top = clientTop + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.width = scrollWidth + \"px\"; //$NON-NLS-1$\n\t\t\t\tclientDiv.style.height = (clientHeight + _top) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (overlayDiv) {\n\t\t\t\t\toverlayDiv.style.left = clientDiv.style.left;\n\t\t\t\t\toverlayDiv.style.top = clientDiv.style.top;\n\t\t\t\t\toverlayDiv.style.width = clientDiv.style.width;\n\t\t\t\t\toverlayDiv.style.height = clientDiv.style.height;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tclipLeft = left;\n\t\t\t\tclipTop = _top;\n\t\t\t\tvar clipRight = left + clientWidth;\n\t\t\t\tvar clipBottom = _top + clientHeight;\n\t\t\t\tif (clipLeft === 0) { clipLeft -= viewPad.left; }\n\t\t\t\tif (clipTop === 0) { clipTop -= viewPad.top; }\n\t\t\t\tif (clipRight === scrollWidth) { clipRight += viewPad.right; }\n\t\t\t\tif (_scroll.y + clientHeight === scrollHeight) { clipBottom += viewPad.bottom; }\n\t\t\t\tclientDiv.style.clip = \"rect(\" + clipTop + \"px,\" + clipRight + \"px,\" + clipBottom + \"px,\" + clipLeft + \"px)\"; //$NON-NLS-4$ //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-5$\n\t\t\t\tif (document.dir == \"rtl\") { /* ACGC */\n\t\t\t\t\tclientDiv.style.right = (-left + leftWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}else{\n\t\t\t\t\tclientDiv.style.left = (-left + leftWidth + viewPad.left) + \"px\"; //$NON-NLS-1$\t  \n\t\t\t\t}\n\t\t\t\tclientDiv.style.width = (this._wrapMode || util.isWebkit ? scrollWidth : clientWidth + left) + \"px\"; //$NON-NLS-1$\n\t\t\t\tif (!hScrollOnly) {\n\t\t\t\t\tclientDiv.style.top = (-_top + viewPad.top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\tclientDiv.style.height = (clientHeight + _top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t\tif (overlayDiv) {\n\t\t\t\t\toverlayDiv.style.clip = clientDiv.style.clip;\n\t\t\t\t\toverlayDiv.style.left = clientDiv.style.left;\n\t\t\t\t\toverlayDiv.style.width = clientDiv.style.width;\n\t\t\t\t\tif (!hScrollOnly) {\n\t\t\t\t\t\toverlayDiv.style.top = clientDiv.style.top;\n\t\t\t\t\t\toverlayDiv.style.height = clientDiv.style.height;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._updateDOMSelection();\n\n\t\t\tif (needUpdate) {\n\t\t\t\tvar ensureCaretVisible = this._ensureCaretVisible;\n\t\t\t\tthis._ensureCaretVisible = false;\n\t\t\t\tif (ensureCaretVisible) {\n\t\t\t\t\tthis._showCaret();\n\t\t\t\t}\n\t\t\t\tthis._queueUpdate();\n\t\t\t}\n\t\t},\n\t\t_updateOverflow: function() {\n\t\t\tvar viewDiv = this._viewDiv;\n\t\t\tif (this._noScroll) {\n\t\t\t\tviewDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t} else if (this._wrapMode) {\n\t\t\t\tviewDiv.style.overflowX = \"hidden\"; //$NON-NLS-1$\n\t\t\t\tviewDiv.style.overflowY = \"scroll\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tviewDiv.style.overflow = \"hidden\"; //$NON-NLS-1$\n\t\t\t}\n\t\t},\n\t\t_updateRuler: function (divRuler, topIndex, bottomIndex, rootHeight) {\n\t\t\tif (!divRuler) { return; }\n\t\t\tvar doc = this._parent.ownerDocument;\n\t\t\tvar lineHeight = this._getLineHeight();\n\t\t\tvar viewPad = this._getViewPadding();\n\t\t\tvar div = divRuler.firstChild;\n\t\t\twhile (div) {\n\t\t\t\tvar ruler = div._ruler;\n\t\t\t\tvar overview = ruler.getOverview();\n\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\tapplyStyle(ruler.getRulerStyle(), div);\n\t\t\t\t\tdivRuler.rulerWidth = undefined;\n\t\t\t\t}\n\t\t\t\tif (overview === \"fixed\") { //$NON-NLS-1$\n\t\t\t\t\tdiv.rulerChanged = false;\n\t\t\t\t\tdiv = div.nextSibling;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar offset = lineHeight;\n\t\t\t\tif (overview === \"page\") { offset += this._topIndexY; } //$NON-NLS-1$\n\t\t\t\tdiv.style.top = -offset + \"px\"; //$NON-NLS-1$\n\t\t\t\tdiv.style.height = (rootHeight + offset) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvar widthDiv;\n\t\t\t\tvar child = div.firstChild;\n\t\t\t\tif (child) {\n\t\t\t\t\twidthDiv = child;\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t} else {\n\t\t\t\t\twidthDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\twidthDiv.style.visibility = \"hidden\"; //$NON-NLS-1$\n\t\t\t\t\tdiv.appendChild(widthDiv);\n\t\t\t\t}\n\t\t\t\tvar lineIndex, annotation;\n\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\tif (widthDiv) {\n\t\t\t\t\t\tlineIndex = -1;\n\t\t\t\t\t\tannotation = ruler.getWidestAnnotation();\n\t\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t\tapplyStyle(annotation.style, widthDiv);\n\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\twidthDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidthDiv.lineIndex = lineIndex;\n\t\t\t\t\t\twidthDiv.style.height = (lineHeight + viewPad.top) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar lineDiv, frag, annotations;\n\t\t\t\tif (overview === \"page\") { //$NON-NLS-1$\n\t\t\t\t\tannotations = ruler.getAnnotations(topIndex, bottomIndex + 1);\n\t\t\t\t\twhile (child) {\n\t\t\t\t\t\tlineIndex = child.lineIndex;\n\t\t\t\t\t\tvar nextChild = child.nextSibling;\n\t\t\t\t\t\tif (!(topIndex <= lineIndex && lineIndex <= bottomIndex) || child.lineChanged) {\n\t\t\t\t\t\t\tdiv.removeChild(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild = nextChild;\n\t\t\t\t\t}\n\t\t\t\t\tchild = div.firstChild.nextSibling;\n\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\tfor (lineIndex=topIndex; lineIndex<=bottomIndex; lineIndex++) {\n\t\t\t\t\t\tif (!child || child.lineIndex > lineIndex) {\n\t\t\t\t\t\t\tlineDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tannotation = annotations[lineIndex];\n\t\t\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t\t\tapplyStyle(annotation.style, lineDiv);\n\t\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\t\tlineDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlineDiv.annotation = annotation;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\t\t\t\tlineDiv.style.height = this._getLineHeight(lineIndex) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tfrag.appendChild(lineDiv);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (frag.firstChild) {\n\t\t\t\t\t\t\t\tdiv.insertBefore(frag, child);\n\t\t\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (child) {\n\t\t\t\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (frag.firstChild) { div.insertBefore(frag, child); }\n\t\t\t\t} else {\n\t\t\t\t\tvar clientHeight = this._getClientHeight ();\n\t\t\t\t\tvar lineCount = this._model.getLineCount ();\n\t\t\t\t\tvar contentHeight = lineHeight * lineCount;\n\t\t\t\t\tvar trackHeight = clientHeight + viewPad.top + viewPad.bottom - 2 * this._metrics.scrollWidth;\n\t\t\t\t\tvar divHeight, arrowWidth;\n\t\t\t\t\tif (contentHeight < trackHeight) {\n\t\t\t\t\t\tdivHeight = lineHeight;\n\t\t\t\t\t\tarrowWidth = viewPad.top;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdivHeight = trackHeight / lineCount;\n\t\t\t\t\t\tarrowWidth = this._metrics.scrollWidth;\n\t\t\t\t\t}\n\t\t\t\t\tif (div.rulerChanged) {\n\t\t\t\t\t\tvar count = div.childNodes.length;\n\t\t\t\t\t\twhile (count > 1) {\n\t\t\t\t\t\t\tdiv.removeChild(div.lastChild);\n\t\t\t\t\t\t\tcount--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tannotations = ruler.getAnnotations(0, lineCount);\n\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\tfor (var prop in annotations) {\n\t\t\t\t\t\t\tlineIndex = prop >>> 0;\n\t\t\t\t\t\t\tif (lineIndex < 0) { continue; }\n\t\t\t\t\t\t\tlineDiv = util.createElement(doc, \"div\"); //$NON-NLS-1$\n\t\t\t\t\t\t\tannotation = annotations[prop];\n\t\t\t\t\t\t\tapplyStyle(annotation.style, lineDiv);\n\t\t\t\t\t\t\tlineDiv.style.position = \"absolute\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tlineDiv.style.top = arrowWidth + lineHeight + Math.floor(lineIndex * divHeight) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tif (annotation.html) {\n\t\t\t\t\t\t\t\tlineDiv.innerHTML = annotation.html;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineDiv.annotation = annotation;\n\t\t\t\t\t\t\tlineDiv.lineIndex = lineIndex;\n\t\t\t\t\t\t\tfrag.appendChild(lineDiv);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiv.appendChild(frag);\n\t\t\t\t\t} else if (div._oldTrackHeight !== trackHeight) {\n\t\t\t\t\t\tlineDiv = div.firstChild ? div.firstChild.nextSibling : null;\n\t\t\t\t\t\twhile (lineDiv) {\n\t\t\t\t\t\t\tlineDiv.style.top = this._metrics.scrollWidth + lineHeight + Math.floor(lineDiv.lineIndex * divHeight) + \"px\"; //$NON-NLS-1$\n\t\t\t\t\t\t\tlineDiv = lineDiv.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdiv._oldTrackHeight = trackHeight;\n\t\t\t\t}\n\t\t\t\tdiv.rulerChanged = false;\n\t\t\t\tdiv = div.nextSibling;\n\t\t\t}\n\t\t},\n\t\t_updateStyleSheet: function() {\n\t\t\tvar styleText = \"\";\n\t\t\tif (util.isWebkit && this._metrics.scrollWidth > 0) {\n\t\t\t\tstyleText += \"\\n.textview ::-webkit-scrollbar-corner {background: #eeeeee;}\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tif (styleText) {\n\t\t\t\tvar doc = this._clientDiv.ownerDocument;\n\t\t\t\tvar node = doc.getElementById(\"_textviewStyle\"); //$NON-NLS-1$\n\t\t\t\tif (!node) {\n\t\t\t\t\tnode = util.createElement(doc, \"style\"); //$NON-NLS-1$\n\t\t\t\t\tnode.id = \"_textviewStyle\"; //$NON-NLS-1$\n\t\t\t\t\tvar head = doc.getElementsByTagName(\"head\")[0] || doc.documentElement; //$NON-NLS-1$\n\t\t\t\t\tnode.appendChild(doc.createTextNode(styleText));\n\t\t\t\t\thead.insertBefore(node, head.firstChild);\n\t\t\t\t} else {\n\t\t\t\t\tnode.removeChild(node.firstChild);\n\t\t\t\t\tnode.appendChild(doc.createTextNode(styleText));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_updateStyle: function (init, metrics) {\n\t\t\tif (!init && util.isIE) {\n\t\t\t\tthis._rootDiv.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tmetrics = this._metrics = metrics || this._calculateMetrics();\n\t\t\tif (this._variableLineHeight) {\n\t\t\t\tthis._variableLineHeight = false;\n\t\t\t\tthis._resetLineHeight();\n\t\t\t}\n\t\t\tif (util.isIE) {\n\t\t\t\tthis._rootDiv.style.lineHeight = (metrics.lineHeight - (metrics.lineTrim.top + metrics.lineTrim.bottom)) + \"px\"; //$NON-NLS-1$\n\t\t\t} else {\n\t\t\t\tthis._rootDiv.style.lineHeight = \"normal\"; //$NON-NLS-1$\n\t\t\t}\n\t\t\tthis._updateStyleSheet();\n\t\t\tif (util.isMac && util.isWebkit) {\n\t\t\t\tvar viewDiv = this._viewDiv;\n\t\t\t\tif (!metrics.invalid && metrics.scrollWidth === 0) {\n\t\t\t\t\tviewDiv.style.pointerEvents = \"none\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.style.zIndex = \"2\"; //$NON-NLS-1$\n\t\t\t\t} else {\n\t\t\t\t\tviewDiv.style.pointerEvents = \"\"; //$NON-NLS-1$\n\t\t\t\t\tviewDiv.style.zIndex = \"\"; //$NON-NLS-1$\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!init) {\n\t\t\t\tthis.redraw();\n\t\t\t\tthis._resetLineWidth();\n\t\t\t}\n\t\t}\n\t};//end prototype\n\tmEventTarget.EventTarget.addMixin(TextView.prototype);\n\t\n\treturn {TextView: TextView};\n});\n\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/projectionTextModel\", ['orion/editor/textModel', 'orion/editor/eventTarget'], function(mTextModel, mEventTarget) { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\n\t/**\n\t * @class This object represents a projection range. A projection specifies a\n\t * range of text and the replacement text. The range of text is relative to the\n\t * base text model associated to a projection model.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.ProjectionTextModel}<br/>\n\t * {@link orion.editor.ProjectionTextModel#addProjection}<br/>\n\t * </p>\t\t \n\t * @name orion.editor.Projection\n\t * \n\t * @property {Number} start The start offset of the projection range. \n\t * @property {Number} end The end offset of the projection range. This offset is exclusive.\n\t * @property {String|orion.editor.TextModel} [text=\"\"] The projection text to be inserted\n\t */\n\t/**\n\t * Constructs a new <code>ProjectionTextModel</code> based on the specified <code>TextModel</code>.\n\t *\n\t * @param {orion.editor.TextModel} baseModel The base text model.\n\t *\n\t * @name orion.editor.ProjectionTextModel\n\t * @class The <code>ProjectionTextModel</code> represents a projection of its base text\n\t * model. Projection ranges can be added to the projection text model to hide and/or insert\n\t * ranges to the base text model.\n\t * <p>\n\t * The contents of the projection text model is modified when changes occur in the base model,\n\t * projection model or by calls to {@link #addProjection} and {@link #removeProjection}.\n\t * </p>\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextModel}\n\t * {@link orion.editor.TextView#setModel}\n\t * </p>\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction ProjectionTextModel(baseModel) {\n\t\tthis._model = baseModel;\n\t\tthis._projections = [];\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onChanged(e);\n\t\t\t},\n\t\t\tonChanging: function(e) {\n\t\t\t\tself._onChanging(e);\n\t\t\t}\n\t\t};\n\t\tbaseModel.addEventListener(\"postChanged\", this._listener.onChanged); //$NON-NLS-0$\n\t\tbaseModel.addEventListener(\"preChanging\", this._listener.onChanging); //$NON-NLS-0$\n\t}\n\n\tProjectionTextModel.prototype = /** @lends orion.editor.ProjectionTextModel.prototype */ {\n\t\t/**\n\t\t * Destroys this projection text model.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"postChanged\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tthis._model.removeEventListener(\"preChanging\", this._listener.onChanging); //$NON-NLS-0$\n\t\t\t\tthis._model = null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adds a projection range to the model.\n\t\t * <p>\n\t\t * The model must notify the listeners before and after the the text is\n\t\t * changed by calling {@link #onChanging} and {@link #onChanged} respectively. \n\t\t * </p>\n\t\t * @param {orion.editor.Projection} projection The projection range to be added.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#removeProjection\n\t\t */\n\t\taddProjection: function(projection) {\n\t\t\tif (!projection) {return;}\n\t\t\t//start and end can't overlap any exist projection\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tprojection._lineIndex = model.getLineAtOffset(projection.start);\n\t\t\tprojection._lineCount = model.getLineAtOffset(projection.end) - projection._lineIndex;\n\t\t\tvar text = projection.text;\n\t\t\tif (!text) { text = \"\"; }\n\t\t\tif (typeof text === \"string\") { //$NON-NLS-0$\n\t\t\t\tprojection._model = new mTextModel.TextModel(text, model.getLineDelimiter());\n\t\t\t} else {\n\t\t\t\tprojection._model = text;\n\t\t\t}\n\t\t\tvar eventStart = this.mapOffset(projection.start, true);\n\t\t\tvar removedCharCount = projection.end - projection.start;\n\t\t\tvar removedLineCount = projection._lineCount;\n\t\t\tvar addedCharCount = projection._model.getCharCount();\n\t\t\tvar addedLineCount = projection._model.getLineCount() - 1;\n\t\t\tvar changedText = projection._model.getText();\n\t\t\tvar modelChangingEvent = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: changedText,\n\t\t\t\tstart: eventStart,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\tvar index = this._binarySearch(projections, projection.start);\n\t\t\tprojections.splice(index, 0, projection);\n\t\t\tvar modelChangedEvent = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: eventStart,\n\t\t\t\tchangedText: text,\n\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\taddedLineCount: addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Returns all projection ranges of this model.\n\t\t * \n\t\t * @return {orion.editor.Projection[]} The projection ranges.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#addProjection\n\t\t */\n\t\tgetProjections: function() {\n\t\t\treturn this._projections.slice(0);\n\t\t},\n\t\t/**\n\t\t * Gets the base text model.\n\t\t *\n\t\t * @return {orion.editor.TextModel} The base text model.\n\t\t */\n\t\tgetBaseModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Maps offsets between the projection model and its base model.\n\t\t *\n\t\t * @param {Number} offset The offset to be mapped.\n\t\t * @param {Boolean} [baseOffset=false] <code>true</code> if <code>offset</code> is in base model and\n\t\t *\tshould be mapped to the projection model.\n\t\t * @return {Number} The mapped offset\n\t\t */\n\t\tmapOffset: function(offset, baseOffset) {\n\t\t\tvar projections = this._projections, delta = 0, i, projection;\n\t\t\tif (baseOffset) {\n\t\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > offset) { break; }\n\t\t\t\t\tif (projection.end > offset) { return -1; }\n\t\t\t\t\tdelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\treturn offset + delta;\n\t\t\t}\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn offset - delta;\n\t\t},\n\t\t/**\n\t\t * Removes a projection range from the model.\n\t\t * <p>\n\t\t * The model must notify the listeners before and after the the text is\n\t\t * changed by calling {@link #onChanging} and {@link #onChanged} respectively. \n\t\t * </p>\n\t\t * \n\t\t * @param {orion.editor.Projection} projection The projection range to be removed.\n\t\t * \n\t\t * @see orion.editor.ProjectionTextModel#addProjection\n\t\t */\n\t\tremoveProjection: function(projection) {\n\t\t\tthis._removeProjection(projection);\n\t\t},\n\t\t_removeProjection: function(projection, noEvents) {\n\t\t\tvar i, delta = 0;\n\t\t\tfor (i = 0; i < this._projections.length; i++) {\n\t\t\t\tvar p = this._projections[i];\n\t\t\t\tif (p === projection) {\n\t\t\t\t\tprojection = p;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdelta += p._model.getCharCount() - (p.end - p.start);\n\t\t\t}\n\t\t\tif (i < this._projections.length) {\n\t\t\t\tvar model = this._model;\n\t\t\t\tvar eventStart = projection.start + delta;\n\t\t\t\tvar addedCharCount = projection.end - projection.start;\n\t\t\t\tvar addedLineCount = projection._lineCount;\n\t\t\t\tvar removedCharCount = projection._model.getCharCount();\n\t\t\t\tvar removedLineCount = projection._model.getLineCount() - 1;\n\t\t\t\tvar changedText = model.getText(projection.start, projection.end);\n\t\t\t\tif (!noEvents) {\n\t\t\t\t\tvar modelChangingEvent = {\n\t\t\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\t\t\ttext: changedText,\n\t\t\t\t\t\tstart: eventStart,\n\t\t\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\t\t\taddedLineCount: addedLineCount\n\t\t\t\t\t};\n\t\t\t\t\tthis.onChanging(modelChangingEvent);\n\t\t\t\t}\n\t\t\t\tthis._projections.splice(i, 1);\n\t\t\t\tif (!noEvents) {\n\t\t\t\t\tvar modelChangedEvent = {\n\t\t\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\t\t\tstart: eventStart,\n\t\t\t\t\t\ttext: changedText,\n\t\t\t\t\t\tremovedCharCount: removedCharCount,\n\t\t\t\t\t\taddedCharCount: addedCharCount,\n\t\t\t\t\t\tremovedLineCount: removedLineCount,\n\t\t\t\t\t\taddedLineCount: addedLineCount\n\t\t\t\t\t};\n\t\t\t\t\tthis.onChanged(modelChangedEvent);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\t_binarySearch: function (array, offset) {\n\t\t\tvar high = array.length, low = -1, index;\n\t\t\twhile (high - low > 1) {\n\t\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\t\tif (offset <= array[index].start) {\n\t\t\t\t\thigh = index;\n\t\t\t\t} else {\n\t\t\t\t\tlow = index;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn high;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getCharCount\n\t\t */\n\t\tgetCharCount: function() {\n\t\t\tvar count = this._model.getCharCount(), projections = this._projections;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tcount += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLine\n\t\t */\n\t\tgetLine: function(lineIndex, includeDelimiter) {\n\t\t\tif (lineIndex < 0) { return null; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, result = [], offset = 0, i, lineCount, projection;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection._lineIndex >= lineIndex - delta) { break; }\n\t\t\t\tlineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount >= lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\tif (projectionLineIndex < lineCount) {\n\t\t\t\t\t\treturn projection._model.getLine(projectionLineIndex, includeDelimiter);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.push(projection._model.getLine(lineCount));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\toffset = projection.end;\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\toffset = Math.max(offset, model.getLineStart(lineIndex - delta));\n\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection._lineIndex > lineIndex - delta) { break; }\n\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\tlineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount > lineIndex - delta) {\n\t\t\t\t\tresult.push(projection._model.getLine(0, includeDelimiter));\n\t\t\t\t\treturn result.join(\"\");\n\t\t\t\t}\n\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\toffset = projection.end;\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\tvar end = model.getLineEnd(lineIndex - delta, includeDelimiter);\n\t\t\tif (offset < end) {\n\t\t\t\tresult.push(model.getText(offset, end));\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineAtOffset\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, lineDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\tvar projectionOffset = offset - (projection.start + delta);\n\t\t\t\t\tlineDelta += projection._model.getLineAtOffset(projectionOffset);\n\t\t\t\t\tdelta += projectionOffset;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlineDelta += projection._model.getLineCount() - 1 - projection._lineCount;\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\treturn model.getLineAtOffset(offset - delta) + lineDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineCount\n\t\t */\n\t\tgetLineCount: function() {\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar count = model.getLineCount();\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tcount += projection._model.getLineCount() - 1 - projection._lineCount;\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineDelimiter\n\t\t */\n\t\tgetLineDelimiter: function() {\n\t\t\treturn this._model.getLineDelimiter();\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineEnd\n\t\t */\n\t\tgetLineEnd: function(lineIndex, includeDelimiter) {\n\t\t\tif (lineIndex < 0) { return -1; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, offsetDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection._lineIndex > lineIndex - delta) { break; }\n\t\t\t\tvar lineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount > lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\treturn projection._model.getLineEnd (projectionLineIndex, includeDelimiter) + projection.start + offsetDelta;\n\t\t\t\t}\n\t\t\t\toffsetDelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\treturn model.getLineEnd(lineIndex - delta, includeDelimiter) + offsetDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getLineStart\n\t\t */\n\t\tgetLineStart: function(lineIndex) {\n\t\t\tif (lineIndex < 0) { return -1; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, offsetDelta = 0;\n\t\t\tfor (var i = 0; i < projections.length; i++) {\n\t\t\t\tvar projection = projections[i];\n\t\t\t\tif (projection._lineIndex >= lineIndex - delta) { break; }\n\t\t\t\tvar lineCount = projection._model.getLineCount() - 1;\n\t\t\t\tif (projection._lineIndex + lineCount >= lineIndex - delta) {\n\t\t\t\t\tvar projectionLineIndex = lineIndex - (projection._lineIndex + delta);\n\t\t\t\t\treturn projection._model.getLineStart (projectionLineIndex) + projection.start + offsetDelta;\n\t\t\t\t}\n\t\t\t\toffsetDelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\tdelta += lineCount - projection._lineCount;\n\t\t\t}\n\t\t\treturn model.getLineStart(lineIndex - delta) + offsetDelta;\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#getText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\tif (start === undefined) { start = 0; }\n\t\t\tvar model = this._model, projections = this._projections;\n\t\t\tvar delta = 0, result = [], i, projection, charCount;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start > start - delta) { break; }\n\t\t\t\tcharCount = projection._model.getCharCount();\n\t\t\t\tif (projection.start + charCount > start - delta) {\n\t\t\t\t\tif (end !== undefined && projection.start + charCount > end - delta) {\n\t\t\t\t\t\treturn projection._model.getText(start - (projection.start + delta), end - (projection.start + delta));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.push(projection._model.getText(start - (projection.start + delta)));\n\t\t\t\t\t\tstart = projection.end + delta + charCount - (projection.end - projection.start);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t}\n\t\t\tvar offset = start - delta;\n\t\t\tif (end !== undefined) {\n\t\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > end - delta) { break; }\n\t\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\t\tcharCount = projection._model.getCharCount();\n\t\t\t\t\tif (projection.start + charCount > end - delta) {\n\t\t\t\t\t\tresult.push(projection._model.getText(0, end - (projection.start + delta)));\n\t\t\t\t\t\treturn result.join(\"\");\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\t\toffset = projection.end;\n\t\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\tresult.push(model.getText(offset, end - delta));\n\t\t\t} else {\n\t\t\t\tfor (; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tresult.push(model.getText(offset, projection.start));\n\t\t\t\t\tresult.push(projection._model.getText());\n\t\t\t\t\toffset = projection.end;\n\t\t\t\t}\n\t\t\t\tresult.push(model.getText(offset));\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t},\n\t\t/** @ignore */\n\t\t_onChanged: function(modelChangedEvent) {\n\t\t\tvar change = this._change;\n\t\t\tvar start = change.baseStart, end = change.baseEnd, i;\n\t\t\tvar projection, projections = this._projections;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.end > start) { break; }\n\t\t\t}\n\t\t\tvar rangeStart = i;\n\t\t\tfor (i = 0; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tif (projection.start >= end) { break; }\n\t\t\t}\n\t\t\tvar rangeEnd = i;\n\t\t\tvar model = this._model;\n\t\t\tvar changeCount = change.baseText.length - (end - start);\n\t\t\tfor (i = rangeEnd; i < projections.length; i++) {\n\t\t\t\tprojection = projections[i];\n\t\t\t\tprojection.start += changeCount;\n\t\t\t\tprojection.end += changeCount;\n\t\t\t\tprojection._lineIndex = model.getLineAtOffset(projection.start);\n\t\t\t}\n\t\t\tvar removed = projections.splice(rangeStart, rangeEnd - rangeStart);\n\t\t\tfor (i = 0; i < removed.length; i++) {\n\t\t\t\tif (removed[i].annotation) {\n\t\t\t\t\tremoved[i].annotation._expand();\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar modelChangedEvent1 = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tstart: change.start,\n\t\t\t\ttext: change.text,\n\t\t\t\tremovedCharCount: change.removedCharCount,\n\t\t\t\taddedCharCount: change.addedCharCount,\n\t\t\t\tremovedLineCount: change.removedLineCount,\n\t\t\t\taddedLineCount: change.addedLineCount\n\t\t\t};\n\t\t\tthis.onChanged(modelChangedEvent1);\n\t\t\tthis._change = undefined;\n\t\t},\n\t\t_onChanging: function(modelChangingEvent) {\n\t\t\tvar hasChange = !!this._change;\n\t\t\tvar change = this._change || {};\n\t\t\tvar start = modelChangingEvent.start, end = start + modelChangingEvent.removedCharCount;\n\t\t\tchange.baseStart = start;\n\t\t\tchange.baseEnd = end;\n\t\t\tchange.baseText = modelChangingEvent.text;\n\t\t\tchange.addedLineCount = modelChangingEvent.addedLineCount;\n\t\t\tif (!hasChange) {\n\t\t\t\tthis._change = change;\n\t\t\t\tchange.text = modelChangingEvent.text;\n\t\t\t\tvar projections = this._projections, delta, i, projection;\n\t\t\t\tfunction mapOffset(offset) {\n\t\t\t\t\tfor (i = 0, delta = 0; i < projections.length; i++) {\n\t\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\t\tif (projection.start > offset) { break; }\n\t\t\t\t\t\tif (projection.end > offset) { return -1; }\n\t\t\t\t\t\tdelta += projection._model.getCharCount() - (projection.end - projection.start);\n\t\t\t\t\t}\n\t\t\t\t\treturn offset + delta;\n\t\t\t\t}\n\t\t\t\tchange.start = mapOffset(start);\n\t\t\t\tif (change.start === -1) {\n\t\t\t\t\tchange.text = this._model.getText(projection.start, start) + change.text;\n\t\t\t\t\tchange.addedLineCount += this._model.getLineAtOffset(start) - this._model.getLineAtOffset(projection.start);\n\t\t\t\t\tchange.start = projection.start + delta;\n\t\t\t\t}\n\t\t\t\tchange.end = mapOffset(end);\n\t\t\t\tif (change.end === -1) {\n\t\t\t\t\tchange.text += this._model.getText(end, projection.end);\n\t\t\t\t\tchange.addedLineCount += this._model.getLineAtOffset(projection.end) - this._model.getLineAtOffset(end);\n\t\t\t\t\tchange.end = projection.start + delta;\n\t\t\t\t}\n\t\t\t}\n\t\t\tchange.addedCharCount = change.text.length;\n\t\t\tchange.removedCharCount = change.end - change.start;\n\t\t\tchange.removedLineCount = this.getLineAtOffset(change.end) - this.getLineAtOffset(change.start);\n\t\t\tvar modelChangingEvent1 = {\n\t\t\t\ttype: \"Changing\", //$NON-NLS-0$\n\t\t\t\ttext: change.text,\n\t\t\t\tstart: change.start,\n\t\t\t\tremovedCharCount: change.removedCharCount,\n\t\t\t\taddedCharCount: change.addedCharCount,\n\t\t\t\tremovedLineCount: change.removedLineCount,\n\t\t\t\taddedLineCount: change.addedLineCount\n\t\t\t};\n\t\t\tthis.onChanging(modelChangingEvent1);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#onChanging\n\t\t */\n\t\tonChanging: function(modelChangingEvent) {\n\t\t\treturn this.dispatchEvent(modelChangingEvent);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#onChanged\n\t\t */\n\t\tonChanged: function(modelChangedEvent) {\n\t\t\treturn this.dispatchEvent(modelChangedEvent);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#setLineDelimiter\n\t\t */\n\t\tsetLineDelimiter: function(lineDelimiter) {\n\t\t\tthis._model.setLineDelimiter(lineDelimiter);\n\t\t},\n\t\t/**\n\t\t * @see orion.editor.TextModel#setText\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tthis._change = {\n\t\t\t\ttext: text || \"\",\n\t\t\t\tstart: start || 0,\n\t\t\t\tend: end === undefined ? this.getCharCount() : end\n\t\t\t};\n\t\t\tvar projections = this._projections, delta, i, projection;\n\t\t\tfunction mapOffset(offset) {\n\t\t\t\tfor (i = 0, delta = 0; i < projections.length; i++) {\n\t\t\t\t\tprojection = projections[i];\n\t\t\t\t\tif (projection.start > offset - delta) { break; }\n\t\t\t\t\tvar charCount = projection._model.getCharCount();\n\t\t\t\t\tif (projection.start + charCount > offset - delta) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tdelta += charCount - (projection.end - projection.start);\n\t\t\t\t}\n\t\t\t\treturn offset - delta;\n\t\t\t}\n\t\t\tvar startProjection, endProjection;\n\t\t\tvar mapStart = mapOffset(this._change.start);\n\t\t\tif (mapStart === -1) {\n\t\t\t\tstartProjection = {\n\t\t\t\t\tprojection: projection,\n\t\t\t\t\tstart: this._change.start - (projection.start + delta)\n\t\t\t\t};\n\t\t\t\tmapStart = projection.end;\n\t\t\t}\n\t\t\tvar mapEnd = mapOffset(this._change.end);\n\t\t\tif (mapEnd === -1) {\n\t\t\t\tendProjection = {\n\t\t\t\t\tprojection: projection,\n\t\t\t\t\tend: this._change.end - (projection.start + delta)\n\t\t\t\t};\n\t\t\t\tmapEnd = projection.start;\n\t\t\t}\n\t\t\tif (startProjection && endProjection && startProjection.projection === endProjection.projection) {\n\t\t\t\t//TODO events - special case - change is completely inside of a projection\n\t\t\t\tprojection._model.setText(this._change.text, startProjection.start, endProjection.end);\n\t\t\t} else {\n\t\t\t\tthis._model.setText(this._change.text, mapStart, mapEnd);\n\t\t\t\tif (startProjection) {\n\t\t\t\t\tprojection = startProjection.projection;\n\t\t\t\t\tprojection._model.setText(\"\", startProjection.start);\n\t\t\t\t}\t\t\n\t\t\t\tif (endProjection) {\n\t\t\t\t\tprojection = endProjection.projection;\n\t\t\t\t\tprojection._model.setText(\"\", 0, endProjection.end);\n\t\t\t\t\tprojection.start = projection.end;\n\t\t\t\t\tprojection._lineCount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._change = undefined;\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(ProjectionTextModel.prototype);\n\n\treturn {ProjectionTextModel: ProjectionTextModel};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd, node*/\n(function(root, factory) { // UMD\n    if (typeof define === \"function\" && define.amd) { //$NON-NLS-0$\n        define('orion/Deferred',factory);\n    } else if (typeof exports === \"object\") { //$NON-NLS-0$\n        module.exports = factory();\n    } else {\n        root.orion = root.orion || {};\n        root.orion.Deferred = factory();\n    }\n}(this, function() {\n    var queue = [],\n        running = false;\n\n    function run() {\n        var fn;\n        while ((fn = queue.shift())) {\n            fn();\n        }\n        running = false;\n    }\n\n\tvar runAsync = (function() {\n\t\tif (typeof process !== \"undefined\" && typeof process.nextTick === \"function\") {\n\t\t\tvar nextTick = process.nextTick;\n    \t\treturn function() {\n    \t\t\tnextTick(run);\n    \t\t};\n\t\t} else if (typeof MutationObserver === \"function\") {\n\t\t\tvar div = document.createElement(\"div\");\n\t\t\tvar observer = new MutationObserver(run);\n\t\t\tobserver.observe(div, {\n            \tattributes: true\n        \t});\n        \treturn function() {\n        \t\tdiv.setAttribute(\"class\", \"_tick\");\n        \t};\n\t\t}\n\t\treturn function() {\n\t\t\tsetTimeout(run, 0);\n\t\t};\n\t})();\n\n    function enqueue(fn) {\n        queue.push(fn);\n        if (!running) {\n            running = true;\n            runAsync();\n        }\n    }\n\n    function noReturn(fn) {\n        return function(result) {\n            fn(result);\n        };\n    }\n    \n    function settleDeferred(fn, result, deferred) {\n    \ttry {\n    \t\tvar listenerResult = fn(result);\n    \t\tvar listenerThen = listenerResult && (typeof listenerResult === \"object\" || typeof listenerResult === \"function\") && listenerResult.then;\n    \t\tif (typeof listenerThen === \"function\") {\n    \t\t\tif (listenerResult === deferred.promise) {\n    \t\t\t\tdeferred.reject(new TypeError());\n    \t\t\t} else {\n    \t\t\t\tvar listenerResultCancel = listenerResult.cancel;\n    \t\t\t\tif (typeof listenerResultCancel === \"function\") {\n    \t\t\t\t\tdeferred._parentCancel = listenerResultCancel.bind(listenerResult);\n    \t\t\t\t} else {\n    \t\t\t\t\tdelete deferred._parentCancel;\n    \t\t\t\t}\n    \t\t\t\tlistenerThen.call(listenerResult, noReturn(deferred.resolve), noReturn(deferred.reject), noReturn(deferred.progress));\n    \t\t\t}\n    \t\t} else {\n    \t\t\tdeferred.resolve(listenerResult);\n    \t\t}\n    \t} catch (e) {\n    \t\tdeferred.reject(e);\n    \t}\n    }\n\n\n    /**\n     * @name orion.Promise\n     * @class Interface representing an eventual value.\n     * @description Promise is an interface that represents an eventual value returned from the single completion of an operation.\n     *\n     * <p>For a concrete class that implements Promise and provides additional API, see {@link orion.Deferred}.</p>\n     * @see orion.Deferred\n     * @see orion.Deferred#promise\n     */\n    /**\n     * @name then\n     * @function\n     * @memberOf orion.Promise.prototype\n     * @description Adds handlers to be called on fulfillment or progress of this promise.\n     * @param {Function} [onResolve] Called when this promise is resolved.\n     * @param {Function} [onReject] Called when this promise is rejected.\n     * @param {Function} [onProgress] May be called to report progress events on this promise.\n     * @returns {orion.Promise} A new promise that is fulfilled when the given <code>onResolve</code> or <code>onReject</code>\n     * callback is finished. The callback's return value gives the fulfillment value of the returned promise.\n     */\n    /**\n     * Cancels this promise.\n     * @name cancel\n     * @function\n     * @memberOf orion.Promise.prototype\n     * @param {Object} reason The reason for canceling this promise.\n     * @param {Boolean} [strict]\n     */\n\n    /**\n     * @name orion.Deferred\n     * @borrows orion.Promise#then as #then\n     * @borrows orion.Promise#cancel as #cancel\n     * @class Provides abstraction over asynchronous operations.\n     * @description Deferred provides abstraction over asynchronous operations.\n     *\n     * <p>Because Deferred implements the {@link orion.Promise} interface, a Deferred may be used anywhere a Promise is called for.\n     * However, in most such cases it is recommended to use the Deferred's {@link #promise} field instead, which exposes a \n     * simplified, minimally <a href=\"https://github.com/promises-aplus/promises-spec\">Promises/A+</a>-compliant interface to callers.</p>\n     */\n    function Deferred() {\n        var result, state, listeners = [],\n            _this = this;\n\n        function notify() {\n            var listener;\n            while ((listener = listeners.shift())) {\n                var deferred = listener.deferred;\n                var methodName = state === \"fulfilled\" ? \"resolve\" : \"reject\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n                var fn = listener[methodName];\n                if (typeof fn === \"function\") { //$NON-NLS-0$\n                \tsettleDeferred(fn, result, deferred);\n                } else {\n                    deferred[methodName](result);\n                }\n            }\n        }\n\n        function _reject(error) {\n            delete _this._parentCancel;\n            state = \"rejected\";\n            result = error;\n            if (listeners.length) {\n                enqueue(notify);\n            }\n        }\n\n        function _resolve(value) {\n            function once(fn) {\n                return function(result) {\n                    if (!state || state === \"assumed\") {\n                          fn(result);\n                    }\n                };\n            }\n            delete _this._parentCancel;\n            try {\n                var valueThen = value && (typeof value === \"object\" || typeof value === \"function\") && value.then;\n                if (typeof valueThen === \"function\") {\n                    if (value === _this) {\n                        _reject(new TypeError());\n                    } else {\n                        state = \"assumed\";\n                        var valueCancel = value && value.cancel;\n                        if (typeof valueCancel !== \"function\") {\n                            var deferred = new Deferred();\n                            value = deferred.promise;\n                            try {\n                                valueThen(deferred.resolve, deferred.reject, deferred.progress);\n                            } catch (thenError) {\n                                deferred.reject(thenError);\n                            }\n                            valueCancel = value.cancel;\n                            valueThen = value.then;\n                        }\n                        result = value;\n                        valueThen.call(value, once(_resolve), once(_reject));\n                        _this._parentCancel = valueCancel.bind(value);\n                    }\n                } else {\n                    state = \"fulfilled\";\n                    result = value;\n                    if (listeners.length) {\n                        enqueue(notify);\n                    }\n                }\n            } catch (error) {\n                once(_reject)(error);\n            }\n        }\n\n        function cancel() {\n            var parentCancel = _this._parentCancel;\n            if (parentCancel) {\n                delete _this._parentCancel;\n                parentCancel();\n            } else if (!state) {\n                var cancelError = new Error(\"Cancel\");\n                cancelError.name = \"Cancel\";\n                _reject(cancelError);\n            }\n        }\n\n\n        /**\n         * Resolves this Deferred.\n         * @name resolve\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} value\n         * @returns {orion.Promise}\n         */\n        this.resolve = function(value) {\n            if (!state) {\n                _resolve(value);\n            }\n            return _this;\n        };\n\n        /**\n         * Rejects this Deferred.\n         * @name reject\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} error\n         * @param {Boolean} [strict]\n         * @returns {orion.Promise}\n         */\n        this.reject = function(error) {\n            if (!state) {\n                _reject(error);\n            }\n            return _this;\n        };\n\n        /**\n         * Notifies listeners of progress on this Deferred.\n         * @name progress\n         * @function\n         * @memberOf orion.Deferred.prototype\n         * @param {Object} update The progress update.\n         * @returns {orion.Promise}\n         */\n        this.progress = function(update) {\n            if (!state) {\n                listeners.forEach(function(listener) {\n                    if (listener.progress) {\n                        try {\n                            listener.progress(update);\n                        } catch (ignore) {\n                            // ignore\n                        }\n                    }\n                });\n            }\n            return _this.promise;\n        };\n\n        this.cancel = function() {\n            if (_this._parentCancel) {\n                setTimeout(cancel, 0);\n            } else {\n                cancel();\n            }\n            return _this;\n        };\n\n        // Note: \"then\" ALWAYS returns before having onResolve or onReject called as per http://promises-aplus.github.com/promises-spec/\n        this.then = function(onFulfill, onReject, onProgress) {\n        \tvar deferred = new Deferred();\n            deferred._parentCancel = _this.promise.cancel;\n            listeners.push({\n                resolve: onFulfill,\n                reject: onReject,\n                progress: onProgress,\n                deferred: deferred\n            });\n            if (state === \"fulfilled\" || state === \"rejected\") {\n                enqueue(notify);\n            }\n            return deferred.promise;\n        };\n\n        /**\n         * The promise exposed by this Deferred.\n         * @name promise\n         * @field\n         * @memberOf orion.Deferred.prototype\n         * @type orion.Promise\n         */\n        this.promise = {\n            then: _this.then,\n            cancel: _this.cancel\n        };\n    }\n\n    /**\n     * Returns a promise that represents the outcome of all the input promises.\n     * <p>When <code>all</code> is called with a single parameter, the returned promise has <dfn>eager</dfn> semantics,\n     * meaning that if any input promise rejects, the returned promise immediately rejects, without waiting for the rest of the\n     * input promises to fulfill.</p>\n     *\n     * To obtain <dfn>lazy</dfn> semantics (meaning the returned promise waits for every input promise to fulfill), pass the\n     * optional parameter <code>optOnError</code>.\n     * @name all\n     * @function\n     * @memberOf orion.Deferred\n     * @static\n     * @param {orion.Promise[]} promises The input promises.\n     * @param {Function} [optOnError] Handles a rejected input promise. <code>optOnError</code> is invoked for every rejected\n     * input promise, and is passed the reason the input promise was rejected. <p><code>optOnError</code> can return a value, which\n     * allows it to act as a transformer: the return value serves as the final fulfillment value of the rejected promise in the \n     * results array generated by <code>all</code>.\n     * @returns {orion.Promise} A new promise. The returned promise is generally fulfilled to an <code>Array</code> whose elements\n     * give the fulfillment values of the input promises. <p>However, if an input promise rejects and eager semantics is used, the \n     * returned promise will instead be fulfilled to a single error value.</p>\n     */\n    Deferred.all = function(promises, optOnError) {\n        var count = promises.length,\n            result = [],\n            rejected = false,\n            deferred = new Deferred();\n\n        deferred.then(undefined, function() {\n            rejected = true;\n            promises.forEach(function(promise) {\n                if (promise.cancel) {\n                    promise.cancel();\n                }\n            });\n        });\n\n        function onResolve(i, value) {\n            if (!rejected) {\n                result[i] = value;\n                if (--count === 0) {\n                    deferred.resolve(result);\n                }\n            }\n        }\n\n        function onReject(i, error) {\n            if (!rejected) {\n                if (optOnError) {\n                    try {\n                        onResolve(i, optOnError(error));\n                        return;\n                    } catch (e) {\n                        error = e;\n                    }\n                }\n                deferred.reject(error);\n            }\n        }\n\n        if (count === 0) {\n            deferred.resolve(result);\n        } else {\n            promises.forEach(function(promise, i) {\n                promise.then(onResolve.bind(undefined, i), onReject.bind(undefined, i));\n            });\n        }\n        return deferred.promise;\n    };\n\n    /**\n     * Applies callbacks to a promise or to a regular object.\n     * @name when\n     * @function\n     * @memberOf orion.Deferred\n     * @static\n     * @param {Object|orion.Promise} value Either a {@link orion.Promise}, or a normal value.\n     * @param {Function} onResolve Called when the <code>value</code> promise is resolved. If <code>value</code> is not a promise,\n     * this function is called immediately.\n     * @param {Function} onReject Called when the <code>value</code> promise is rejected. If <code>value</code> is not a promise, \n     * this function is never called.\n     * @param {Function} onProgress Called when the <code>value</code> promise provides a progress update. If <code>value</code> is\n     * not a promise, this function is never called.\n     * @returns {orion.Promise} A new promise.\n     */\n    Deferred.when = function(value, onResolve, onReject, onProgress) {\n        var promise, deferred;\n        if (value && typeof value.then === \"function\") { //$NON-NLS-0$\n            promise = value;\n        } else {\n            deferred = new Deferred();\n            deferred.resolve(value);\n            promise = deferred.promise;\n        }\n        return promise.then(onResolve, onReject, onProgress);\n    };\n\n    return Deferred;\n}));\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2012 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n * \r\n * Contributors: IBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine('orion/webui/littlelib',[\"orion/util\"], function(util) {\r\n\t/**\r\n\t * @name orion.webui.littlelib\r\n\t * @class A small library of DOM and UI helpers.\r\n\t */\r\n\r\n\t/**\r\n\t * Holds useful <code>keyCode</code> values.\r\n\t * @name orion.webui.littlelib.KEY\r\n\t * @static\r\n\t */\r\n\tvar KEY = {\r\n\t\tBKSPC: 8,\r\n\t\tTAB: 9,\r\n\t\tENTER: 13,\r\n\t\tSHIFT: 16,\r\n\t\tCONTROL: 17,\r\n\t\tALT: 18,\r\n\t\tESCAPE: 27,\r\n\t\tSPACE: 32,\r\n\t\tPAGEUP: 33,\r\n\t\tPAGEDOWN: 34,\r\n\t\tEND: 35,\r\n\t\tHOME: 36,\r\n\t\tLEFT: 37,\r\n\t\tUP: 38,\r\n\t\tRIGHT: 39,\r\n\t\tDOWN: 40,\r\n\t\tINSERT: 45,\r\n\t\tDEL: 46,\r\n\t\tCOMMAND: 91\r\n\t};\r\n\r\n\t/**\r\n\t * Alias for <code>node.querySelector()</code>.\r\n\t * @name orion.webui.littlelib.$\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {Element}\r\n\t */\r\n\tfunction $(selector, node) {\r\n\t\tif (!node) {\r\n\t\t\tnode = document;\r\n\t\t}\r\n\t\treturn node.querySelector(selector);\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for <code>node.querySelectorAll()</code>.\r\n\t * @name orion.webui.littlelib.$$\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {NodeList}\r\n\t */\r\n\tfunction $$(selector, node) {\r\n\t\tif (!node) {\r\n\t\t\tnode = document;\r\n\t\t}\r\n\t\treturn node.querySelectorAll(selector);\r\n\t}\r\n\r\n\t/**\r\n\t * Identical to {@link orion.webui.littlelib.$$}, but returns an Array instead of a NodeList.\r\n\t * @name orion.webui.littlelib.$$array\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} selectors Selectors to match on.\r\n\t * @param {Node} [node=document] Node to query under.\r\n\t * @returns {Element[]}\r\n\t */\r\n\tfunction $$array(selector, node) {\r\n\t\treturn Array.prototype.slice.call($$(selector,node));\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for <code>document.getElementById</code>, but returns the input unmodified when passed a Node (or other non-string).\r\n\t * @function\r\n\t * @param {String|Element} elementOrId\r\n\t * @returns {Element}\r\n\t */\r\n\tfunction node(either) {\r\n\t\tvar theNode = either;\r\n\t\tif (typeof(either) === \"string\") { //$NON-NLS-0$\r\n\t\t\ttheNode = document.getElementById(either);\r\n\t\t}\t\r\n\t\treturn theNode;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns whether <code>child</code> is a descendant of <code>parent</code> in the DOM order.\r\n\t * @function\r\n\t * @param {Node} parent\r\n\t * @param {Node} child\r\n\t * @returns {Boolean}\r\n\t */\r\n\tfunction contains(parent, child) {\r\n\t\tif (!parent || !child) { return false; }\r\n\t\tif (parent === child) { return true; }\r\n\t\tvar compare = parent.compareDocumentPosition(child);  // useful to break out for debugging\r\n\t\treturn Boolean(compare & 16);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the bounds of a node. The returned coordinates are absolute (not relative to the viewport).\r\n\t * @function\r\n\t * @param {Node} node\r\n\t * @returns {Object}\r\n\t */\r\n\tfunction bounds(node) {\r\n\t\tvar clientRect = node.getBoundingClientRect();\r\n\t\tvar scrollLeft = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\r\n\t\tvar scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n\t\treturn { \r\n\t\t\tleft: clientRect.left + scrollLeft,\r\n\t\t\ttop: clientRect.top + scrollTop,\r\n\t\t\twidth: clientRect.width,\r\n\t\t\theight: clientRect.height\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all children of the given node.\r\n\t * @name orion.webui.littlelib.empty\r\n\t * @function\r\n\t * @static\r\n\t * @param {Node} node\r\n\t */\r\n\tfunction empty(node) {\r\n\t\twhile (node.hasChildNodes()) {\r\n\t\t\tvar child = node.firstChild;\r\n\t\t\tnode.removeChild(child);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _getTabIndex(node) {\r\n\t\tvar result = node.tabIndex;\r\n\t\tif (result === 0 && util.isIE) {\r\n\t\t\t/*\r\n\t\t\t * The default value of tabIndex is 0 on IE, even for elements that are not focusable\r\n\t\t\t * by default (http://msdn.microsoft.com/en-us/library/ie/ms534654(v=vs.85).aspx).\r\n\t\t\t * Handle this browser difference by treating this value as -1 if the node is a type\r\n\t\t\t * that is not focusable by default according to the MS doc and has not had this\r\n\t\t\t * attribute value explicitly set on it.\r\n\t\t\t */\r\n\t\t\tvar focusableElements = {\r\n\t\t\t\ta: true,\r\n\t\t\t\tbody: true,\r\n\t\t\t\tbutton: true,\r\n\t\t\t\tframe: true,\r\n\t\t\t\tiframe: true,\r\n\t\t\t\timg: true,\r\n\t\t\t\tinput: true,\r\n\t\t\t\tisindex: true,\r\n\t\t\t\tobject: true,\r\n\t\t\t\tselect: true,\r\n\t\t\t\ttextarea: true\r\n\t\t\t};\r\n\t\t\tif (!focusableElements[node.nodeName.toLowerCase()] && !node.attributes.tabIndex) {\r\n\t\t\t\tresult = -1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\t/* \r\n\t * Inspired by http://brianwhitmer.blogspot.com/2009/05/jquery-ui-tabbable-what.html\r\n\t */\r\n\tfunction firstTabbable(node) {\r\n\t\tif (_getTabIndex(node) >= 0 && !node.disabled && node.offsetParent) {\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t\t\tvar result = firstTabbable(node.childNodes[i]);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction lastTabbable(node) {\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i = node.childNodes.length-1; i >= 0; i--) {\r\n\t\t\t\tvar result = lastTabbable(node.childNodes[i]);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_getTabIndex(node) >= 0 && !node.disabled && node.offsetParent) {\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/*\r\n\t * Special hook to show the context menu on Shift + F10 (macs only)\r\n\t */\r\n\tfunction installShowContextMenu() {\r\n\t\tif (util.isMac) {\r\n\t\t\tdocument.addEventListener(\"keydown\", function (evt) {\r\n\t\t\t\tif (evt.keyCode === 121 && evt.shiftKey) {\r\n\t\t\t\t\tvar rect, xPos, yPos;\r\n\t\t\t\t\tvar focusElement = document.activeElement;\r\n\t\r\n\t\t\t\t\tif (focusElement.contentEditable === \"true\") {\r\n\t\t\t\t\t\tvar selection = window.getSelection();\r\n\t\t\t\t\t\tvar range = selection.getRangeAt(0); //get the text range\r\n\t\t\t\t\t\trect = range.getBoundingClientRect();\r\n\t\t\t\t\t\txPos = rect.left;\r\n\t\t\t\t\t\tyPos = rect.top + rect.height;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trect = bounds(focusElement);\r\n\t\t\t\t\t\txPos = rect.left + (rect.width/2);\r\n\t\t\t\t\t\tyPos = rect.top + (rect.height/2);\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar e = focusElement.ownerDocument.createEvent(\"MouseEvents\");\r\n\t\t\t\t\te.initMouseEvent(\"contextmenu\", true, true,\r\n\t\t\t\t\t    focusElement.ownerDocument.defaultView, 1, 0, 0, xPos, yPos, false,\r\n\t\t\t\t\t    false, false, false,2, null);\r\n\t\t\t\t\treturn !focusElement.dispatchEvent(e);\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t}\r\n\t}\r\n\tinstallShowContextMenu();\r\n\t\r\n\t/* Trap the tabs within the given parent */\r\n\tfunction trapTabs(parentElement) {\r\n\t\tif (parentElement.tabTrapInstalled)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tparentElement.addEventListener(\"keydown\", function (e) { //$NON-NLS-0$\r\n\t\t\tif(e.keyCode === KEY.TAB) {\r\n\t\t\t\tvar first = firstTabbable(parentElement);\r\n\t\t\t\tvar last = lastTabbable(parentElement);\r\n\t\t\t\t\r\n\t\t\t\tif (first && last) {\r\n\t\t\t\t\tif (e.target === last && !e.shiftKey) {\r\n\t\t\t\t\t\t// wrap to first tabbable\r\n\t\t\t\t\t\tfirst.focus();\r\n\t\t\t\t\t\tstop(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (e.target === first && e.shiftKey) {\r\n\t\t\t\t\t\t// wrap to last tabbable\r\n\t\t\t\t\t\tlast.focus();\r\n\t\t\t\t\t\tstop(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t}, true);\r\n\t\tparentElement.tabTrapInstalled = true;\r\n\t}\r\n\t\r\n\tvar variableRegEx = /\\$\\{([^\\}]+)\\}/;\r\n\t// Internal helper\r\n\tfunction processNodes(node, replace) {\r\n\t\tif (node.nodeType === 3) { // TEXT_NODE\r\n\t\t\tvar matches = variableRegEx.exec(node.nodeValue);\r\n\t\t\tif (matches && matches.length > 1) {\r\n\t\t\t\treplace(node, matches);\r\n\t\t\t}\r\n\t\t} else if (node.nodeType === 1) { // ELEMENT_NODE\r\n\t\t\tprocessElementNode(node, replace, \"alt\"); //$NON-NLS-0$\r\n\t\t\t//processElementNode(node, replace, \"title\"); //$NON-NLS-0$\r\n\t\t\t//processElementNode(node, replace, \"placeholder\"); //$NON-NLS-0$\r\n\t\t\tprocessElementNode(node, replace, \"aria-label\"); //$NON-NLS-0$\r\n\t\t}\r\n\t\tif (node.hasChildNodes()) {\r\n\t\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t\t\tprocessNodes(node.childNodes[i], replace);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction processElementNode(node, replace, attribute) {\r\n\t\tvar value = node.getAttribute(attribute);\r\n\t\tif (value) {\r\n\t\t\tvar matches = variableRegEx.exec(value);\r\n\t\t\tif (matches && matches.length > 1) {\r\n\t\t\t\treplace(node, matches, attribute);\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t}\r\n\r\n\t/**\n\t * @name pixelValueOf\n\t * @description Returns the pixel value of the given CSS attribute\n\t * @param node The element whose style is to be checked\n\t * @param attrName The name of the attribute to check. Use the literal CSS name\r\n\t * (i.e. 'padding-left' rather than 'paddingLeft').\n\t * @returns returns The value (in pixels) of the attribute. If the value cannot be parsed to an int the zero is returned\n\t */\n\tfunction pixelValueOf(node, attrName) {\r\n\t\tif (!node || !attrName) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n\t\tvar doc = node.ownerDocument;\r\n\t\tvar win =  doc.defaultView || doc.parentWindow;\r\n\t\tif (win.getComputedStyle) {\r\n\t\t\tvar style = win.getComputedStyle(node, null);\r\n\t\t\tvar value = style.getPropertyValue(attrName);\r\n\t\t\t// Ensure that value ends in \"px\"\r\n\t\t\tif (value.length > 2 && value.indexOf(\"px\", value.length - 2) !== -1) {\r\n\t\t\t\tvalue = value.slice(0,-2);\r\n\t\t\t\tvar intVal = parseInt(value,10);\r\n\t\t\t\tif (intVal !== intVal) {\r\n\t\t\t\t\treturn 0;  // value was NaN\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn intVal;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Performs substitution of strings into textContent within the given node and its descendants. An occurrence of <code>${n}</code>\r\n\t * in text content will be replaced with the string <code>messages[n]</code>.\r\n\t * <p>This function is recommended for binding placeholder text in template-created DOM elements to actual display strings.</p>\r\n\t * @name orion.webui.littlelib.processTextNodes\r\n\t * @function\r\n\t * @param {Node} node The node to perform replacement under.\r\n\t * @param {String[]} messages The replacement strings.\r\n\t */\r\n\tfunction processTextNodes(node, messages) {\r\n\t\tprocessNodes(node, function(targetNode, matches, attribute) {\r\n\t\t\tvar replaceText = messages[matches[1]] || matches[1];\r\n\t\t\tif (targetNode.nodeType === 3) { // TEXT_NODE\r\n\t\t\t\ttargetNode.parentNode.replaceChild(document.createTextNode(replaceText), targetNode);\r\n\t\t\t} else if (targetNode.nodeType === 1 && attribute) { // ELEMENT_NODE\r\n\t\t\t\ttargetNode.setAttribute(attribute, replaceText); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Performs substitution of DOM nodes into textContent within the given node and its descendants. An occurrence of <code>${n}</code>\r\n\t * in text content will be replaced by the DOM node <code>replaceNodes[n]</code>.\r\n\t * <p>This function is recommended for performing rich-text replacement within a localized string. The use of actual DOM nodes\r\n\t * avoids the need for embedded HTML in strings.</p>\r\n\t * @name orion.webui.littlelib.processDOMNodes\r\n\t * @function\r\n\t * @param {Node} node The node to perform replacement under.\r\n\t * @param {Node[]} replaceNodes The replacement nodes.\r\n\t */\r\n\tfunction processDOMNodes(node, replaceNodes) {\r\n\t\tprocessNodes(node, function(targetNode, matches) {\r\n\t\t\tvar replaceNode = replaceNodes[matches[1]];\r\n\t\t\tif (replaceNode) {\r\n\t\t\t\tvar range = document.createRange();\r\n\t\t\t\tvar start = matches.index;\r\n\t\t\t\trange.setStart(targetNode, start);\r\n\t\t\t\trange.setEnd(targetNode, start + matches[0].length);\r\n\t\t\t\trange.deleteContents();\r\n\t\t\t\trange.insertNode(replaceNode);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Adds auto-dismiss functionality to the document. When a click event occurs whose <code>target</code> is not a descendant of\r\n\t * one of the <code>excludeNodes</code>, the <code>dismissFunction</code> is invoked.\r\n\t * @name orion.webui.littlelib.addAutoDismiss\r\n\t * @function\r\n\t * @static\r\n\t * @param {Node[]} excludeNodes Clicks targeting any descendant of these nodes will not trigger the dismissFunction.\r\n\t * @param {Function} dismissFunction The dismiss handler.\r\n\t */\r\n\t\r\n\tvar autoDismissNodes = null;\r\n\r\n\tfunction addAutoDismiss(excludeNodes, dismissFunction) {\r\n\t\t// auto dismissal.  Click anywhere else means close.\r\n\t\tfunction onclick(event) {\r\n\t\t\tautoDismissNodes.forEach(function(autoDismissNode) {\r\n\t\t\t\tvar excludeNodeInDocument = false;\r\n\t\t\t\tvar excluded = autoDismissNode.excludeNodes.some(function(excludeNode) {\r\n\t\t\t\t\tif(document.body.contains(excludeNode)) {\r\n\t\t\t\t\t\texcludeNodeInDocument = true;\r\n\t\t\t\t\t\treturn excludeNode.contains(event.target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\tif (excludeNodeInDocument && !excluded) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tautoDismissNode.dismiss(event);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tif (typeof console !== \"undefined\" && console) { //$NON-NLS-0$\r\n\t\t\t\t\t\t\tconsole.error(e && e.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tautoDismissNodes = autoDismissNodes.filter(function(autoDismissNode) {\r\n\t\t\t\t// true if at least one excludeNode is in document.body\r\n\t\t\t\treturn autoDismissNode.excludeNodes.some(function(excludeNode) {\r\n\t\t\t\t\treturn document.body.contains(excludeNode);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Hook listener only once\r\n\t\tif (autoDismissNodes === null) {\r\n\t\t\tautoDismissNodes = [];\r\n\t\t\tdocument.addEventListener(\"click\", onclick, true); //$NON-NLS-0$\r\n\t\t\tif (util.isIOS) {\r\n\t\t\t\tdocument.addEventListener(\"touchend\", function(event){\r\n\t\t\t\t\tfunction unhook(){\r\n\t\t\t\t\t\tevent.target.removeEventListener(\"click\", unhook);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (event.touches.length === 0) {\r\n\t\t\t\t\t\t// we need a click eventlistener on the target to have ios really trigger a click\r\n\t\t\t\t\t\tevent.target.addEventListener(\"click\", unhook);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tautoDismissNodes.push({excludeNodes: excludeNodes, dismiss: dismissFunction});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes all auto-dismiss nodes which trigger the specified dismiss function.\r\n\t * \r\n\t * @name orion.webui.littlelib.removeAutoDismiss\r\n\t * @function\r\n\t * @static\r\n\t * @param {Function} dismissFunction The dismiss function to look for.\r\n\t */\r\n\tfunction removeAutoDismiss(dismissFunction) {\r\n\t\tautoDismissNodes = autoDismissNodes.filter(function(autoDismissNode) {\r\n\t\t\treturn dismissFunction !== autoDismissNode.dismiss;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns the parent of the node that has the vertical scroll bar.\r\n\t * \r\n\t * @name orion.webui.littlelib.getOffsetParent\r\n\t * @function\r\n\t * @static\r\n\t * @param {Element} node The node to lookup the offset parent\r\n\t */\r\n\tfunction getOffsetParent(node) {\r\n\t\tvar offsetParent = node.parentNode, documentElement = document.documentElement;\r\n\t\twhile (offsetParent && offsetParent !== documentElement) {\r\n\t\t\tvar style = window.getComputedStyle(offsetParent, null);\r\n\t\t\tif (!style) { break; }\r\n\t\t\tvar overflow = style.getPropertyValue(\"overflow-y\"); //$NON-NLS-0$\r\n\t\t\tif (overflow === \"auto\" || overflow === \"scroll\") { break; } //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\toffsetParent = offsetParent.parentNode;\r\n\t\t}\r\n\t\treturn offsetParent;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Cancels the default behavior of an event and stops its propagation.\r\n\t * @name orion.webui.littlelib.stop\r\n\t * @function\r\n\t * @static\r\n\t * @param {Event} event\r\n\t */\r\n\tfunction stop(event) {\r\n\t\tif (window.document.all) { \r\n\t\t\tevent.keyCode = 0;\r\n\t\t}\r\n\t\tif (event.preventDefault) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction setFramesEnabled(enable) {\r\n\t\tvar frames = document.getElementsByTagName(\"iframe\"); //$NON-NLS-0$\r\n\t\tfor (var i = 0; i<frames.length; i++) {\r\n\t\t\tframes[i].parentNode.style.pointerEvents = enable ? \"\" : \"none\"; //$NON-NLS-0$\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Given a non-empty string, returns a string with no spaces in it (valid HTML5 id attribute).\r\n\t * Also removes any punctuation except for '_', '-', and '.' for compatibility with HTML4.\r\n\t * @name orion.webui.littlelib.validId\r\n\t * @function\r\n\t * @static\r\n\t * @param {String} str\tA non-empty string\r\n\t * @returns A valid html id string\r\n\t */\r\n\tfunction validId(str) {\r\n\t\treturn str.replace(/\\s/, '-').replace(/[^A-Za-z0-9_.-]/, '.');\r\n\t}\r\n\t\r\n\t/**\r\n\t * Maps a <code>keyCode</code> to <tt>KEY</tt> name. This is the inverse of {@link orion.webui.littlelib.KEY}.\r\n\t * @private\r\n\t */\r\n\tvar KEY_CODE = Object.create(null);\r\n\tObject.keys(KEY).forEach(function(name) {\r\n\t\tKEY_CODE[KEY[name]] = name;\r\n\t});\r\n\r\n\t/**\r\n\t * @param {Number} keyCode\r\n\t * @returns The name of the <code>lib.KEY</code> entry for keyCode, or null.\r\n\t */\r\n\tfunction keyName(keyCode) {\r\n\t\treturn KEY_CODE[keyCode] || null;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates DOM nodes from the specified template string.\r\n\t * \r\n\t * @param {String} templateString \tA string containing the HTML template to use\r\n\t * @param {Node} parentNode \t\tOptional. The parent node to insert the new nodes into. \r\n\t * \t\t\t\t\t\t\t\t\tThe parent's contents will be completely replaced.\r\n\t * @returns If the template string contains a single node or a wrapper node which\r\n\t * \t\t\twraps all the other nodes that single DOM node will be returned. \r\n\t * \t\t\tOtherwise if the template string contains multiple top-level nodes an\r\n\t * \t\t\t{HTMLCollection} object containing all the top-level nodes will be returned.\r\n\t */\r\n\tfunction createNodes(templateString, parentNode) {\r\n\t\tvar parent = parentNode;\r\n\t\tvar newNodes = null;\r\n\t\t\r\n\t\tif (undefined === parent) {\r\n\t\t\tparent = document.createElement(\"div\"); //$NON-NLS-0$\r\n\t\t}\r\n\r\n\t\tparent.innerHTML = templateString;\t\r\n\t\tif (parent.children.length > 1) {\r\n\t\t\tnewNodes = parent.children;\r\n\t\t} else {\r\n\t\t\tnewNodes = parent.firstChild;\r\n\t\t}\r\n\t\t\r\n\t\treturn newNodes;\r\n\t}\r\n\r\n\t//return module exports\r\n\treturn {\r\n\t\t$: $,\r\n\t\t$$: $$,\r\n\t\t$$array: $$array,\r\n\t\tnode: node,\r\n\t\tcontains: contains,\r\n\t\tbounds: bounds,\r\n\t\tempty: empty,\r\n\t\tfirstTabbable: firstTabbable,\r\n\t\tlastTabbable: lastTabbable,\r\n\t\ttrapTabs: trapTabs,\r\n\t\tpixelValueOf: pixelValueOf,\r\n\t\tstop: stop,\r\n\t\tprocessTextNodes: processTextNodes,\r\n\t\tprocessDOMNodes: processDOMNodes,\r\n\t\taddAutoDismiss: addAutoDismiss,\r\n\t\tsetFramesEnabled: setFramesEnabled,\r\n\t\tvalidId: validId,\r\n\t\tgetOffsetParent: getOffsetParent,\r\n\t\tremoveAutoDismiss: removeAutoDismiss,\r\n\t\tkeyName: keyName,\r\n\t\tKEY: KEY,\r\n\t\tcreateNodes: createNodes\r\n\t};\r\n});\r\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd, node*/\ndefine(\"orion/editor/tooltip\", [\n\t'i18n!orion/editor/nls/messages',\n\t'orion/editor/textView',\n\t'orion/editor/projectionTextModel',\n\t'orion/Deferred',\n\t'orion/editor/util',\n\t'orion/webui/littlelib',\n\t'orion/util'\n], function(messages, mTextView, mProjectionTextModel, Deferred, textUtil, lib, util) {\n\n/**\n * @name Tooltip\n * @description Tooltip support for text views\n * \n * show() - Opens the tooltip\n * update() - Updates the content of the open tooltip\n * onHover() - Checks if the x,y coordinates are outside the current tooltip area and updates the tooltip if necessary\n * hide() - Closes the tooltip\n * isVisible() - Returns whether the tooltip is currently showing\n * \n * The methods above ask for a tooltipInfo object, which must contain a callback function getTooltipInfo()\n * This function must return an info object with the following contents:\n * \n * Info {\n * \tContents {string, html element, annotation array, etc.} Contents to display, if undefined, the hover service will be asked for content\n * \tContext {source, offset, offsetStart, offsetEnd}} Information used to modify the tooltip position or contents\n * \tPosition {String} One of left, right, top, bottom used to position the tooltip relative to the anchor area\n * \tAnchorArea {top, left, width, height} rectangle defining the source of the tooltip and where to position relative to\n * \tTooltipArea {top, left, width, height} rectangle to define the tooltip's exact placement rather than a relative position to the anchor\n * \tTooltipOffsetX {Number} Hint to move the tooltip position horizontally\n * \tTooltipOffsetY {Number} Hint to move the tooltip position vertically\n * \n * @param view\n */\nfunction Tooltip (view, editor) {\n\t\tthis._view = view;\n\t\tthis._editor = editor;\n\t\tvar parent = view.getOptions(\"parent\"); //$NON-NLS-0$\n\t\tthis._create(parent ? parent.ownerDocument : document);\n\t}\n\t/**\n\t * Creates a new tooltip for the given text view.\n\t * @param view {TextView} the text view the tooltip belongs to\n\t * @param editor {Editor} the editor the tooltip belongs to, optional, allows quick fixes in tooltip to run on all annotations in the editor\n\t */\n\tTooltip.getTooltip = function(view, editor) {\n\t\tif (!view._tooltip) {\n\t\t\t view._tooltip = new Tooltip(view, editor);\n\t\t}\n\t\treturn view._tooltip;\n\t};\n\tTooltip.prototype = /** @lends orion.editor.Tooltip.prototype */ {\n\t\t_create: function(document) {\n\t\t\tif (this._tooltipDiv) { return; }\n\t\t\tvar tooltipDiv = this._tooltipDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\ttooltipDiv.tabIndex = 0;\n\t\t\ttooltipDiv.className = \"textviewTooltip\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.setAttribute(\"aria-live\", \"assertive\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\ttooltipDiv.setAttribute(\"aria-atomic\", \"true\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tthis._tooltipDiv.style.visibility = \"hidden\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = false;\n\t\t\tdocument.body.appendChild(tooltipDiv);\n\t\t\t\n\t\t\tlib.trapTabs(this._tooltipDiv);\n\t\t\t\n\t\t\tvar self = this;\n\t\t\ttextUtil.addEventListener(document, \"mousedown\", this._mouseDownHandler = function(event) {\n\t\t\t\tif (!self.isVisible()) { return; }\n\t\t\t\tif (textUtil.contains(tooltipDiv, event.target || event.srcElement)) { return; }\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself.hide();\n\t\t\t\t}\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(document, \"scroll\", this._scrollHandler = function(event) {\n\t\t\t\tif (!self.isVisible()){\n\t\t\t\t\treturn;\t\n\t\t\t\t} \n\n\t\t\t\t// Make sure the scroll isn't *inside* the tooltip...\n\t\t\t\tif (textUtil.contains(tooltipDiv, event.target || event.srcElement)) { return; }\n\n\t\t\t\tif (self._topPixel !== self._view.getTopPixel() || self._leftPixel !== self._view.getHorizontalPixel()) {\n\t\t\t\t\tself.hide();\n\t\t\t\t}\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(document, \"mousemove\", this._mouseMoveHandler = function(event) {\n\t\t\t\t// Ignore spurious mousemove events\n\t\t\t\tif (self._prevX && self._prevX === event.clientX && self._prevY && self._prevY === event.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tself._prevX = event.clientX;\n\t\t\t\tself._prevY = event.clientY;\n\t\t\t\t\n\t\t\t\tif (!self.isVisible() || self._locked || self._hasFocus()) { return; }\n\t\t\t\tif (self._isInRect(self._outerArea, event.clientX, event.clientY)){ return; }\n\t\t\t\tself.hide();\n\t\t\t}, true);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"focus\", /* @callback */ function(event) {\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself._tooltipDiv.classList.add('textViewTooltipOnFocus'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"blur\", /* @callback */ function(event) {\n\t\t\t\tself._tooltipDiv.classList.remove('textViewTooltipOnFocus'); //$NON-NLS-0$\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"mouseenter\", /* @callback */ function(event) {\n\t\t\t\tif (!self._locked){\n\t\t\t\t\tself._tooltipDiv.classList.add('textViewTooltipOnHover'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"mouseleave\", /* @callback */ function(event) {\n\t\t\t\tif (!self._hasFocus()){\n\t\t\t\t\tself._tooltipDiv.classList.remove('textViewTooltipOnHover'); //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\ttextUtil.addEventListener(tooltipDiv, \"keydown\", function(event) {\n\t\t\t\tif (event.keyCode === 27) {\n\t\t\t\t\tif (!self._locked){\n\t\t\t\t\t\tself.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\tthis._view.addEventListener(\"Destroy\", function() {\n\t\t\t\tself.destroy();\n\t\t\t});\n\t\t},\n\t\tdestroy: function() {\n\t\t\tif (!this._tooltipDiv) { return; }\n\t\t\tthis.hide();\n\t\t\tvar parent = this._tooltipDiv.parentNode;\n\t\t\tif (parent) { parent.removeChild(this._tooltipDiv); }\n\t\t\tvar doc = this._tooltipDiv.ownerDocument;\n\t\t\ttextUtil.removeEventListener(doc, \"mousedown\", this._mouseDownHandler, true);\n\t\t\ttextUtil.removeEventListener(doc, \"scroll\", this._scrollHandler, true);\n\t\t\ttextUtil.removeEventListener(doc, \"mousemove\", this._mouseMoveHandler, true);\n\t\t\tthis._tooltipDiv = null;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name show\n\t\t * @description Show the tooltip using the given target information\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the tooltip contents (see _processInfo())\n\t\t * @param target The target through which the info is obtained\n\t\t * @param locked If true locks the tooltip (never hides unless 'hide' is called)\n\t\t * @param giveFocus If true forces the focus onto the tooltip (used for F2 processing)\n\t\t */\n\t\tshow: function(tooltipInfo, locked, giveFocus) {\n\t\t\tthis._locked = locked;\n\t\t\tthis._giveFocus = giveFocus;\n\t\t\tthis._topPixel = this._view.getTopPixel();\n\t\t\tthis._leftPixel = this._view.getHorizontalPixel();\n\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo());\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name update\n\t\t * @description Updates the information in an already visible tooltip\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the parameters need to update the information (see _processInfo())\n\t\t * @param noContent If true makes no attempt to gather new info and just updates the tooltip's position\n\t\t */\n\t\tupdate: function(tooltipInfo, noContent) {\n\t\t\tif (!tooltipInfo){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (noContent) {\n\t\t\t\tthis._showContents(null, tooltipInfo.getTooltipInfo(), true);\n\t\t\t} else {\n\t\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo(), true);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name onHover\n\t\t * @description Checks the x,y location and updates the tooltip contents or hides the tooltip as appropriate\n\t\t * @function\n\t\t * @param tooltipInfo a function that will return the parameters need to update the information (see _processInfo())\n\t\t * @param x coordinates of the mouse event\n\t\t * @param y coordinates of the mouse event\n\t\t */\n\t\tonHover: function(tooltipInfo, x, y) {\n\t\t\tif (!tooltipInfo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Don't process if we're in the anchor or tooltip\n\t\t\tif (this._isInRect(this._anchorArea, x, y)\n\t\t\t\t\t|| this._isInRect(this._tooltipArea, x, y)\n\t\t\t\t\t|| this._locked\n\t\t\t\t\t|| this._hasFocus()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._processInfo(tooltipInfo.getTooltipInfo());\n\t\t},\t\t\n\t\n\t\t/**\n\t\t * @name hide\n\t\t * @description Hides the current tooltip (if it's showing)\n\t\t * @function\n\t\t * @public\n\t\t*/\n\t\thide: function(clearLock) {\n\t\t\tif (clearLock) {\n\t\t\t\tthis._locked = undefined;\n\t\t\t}\n\t\t\t\n\t\t\tif (this._locked || !this.isVisible()){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\t\n\t\t\tif (this.hover) {\n\t\t\t\tthis.hover.clearQuickFixes();\n\t\t\t}\n\n\t\t\tif (this._hasFocus()) {\n\t\t\t\tthis._view.focus();\n\t\t\t}\n\t\t\tif (this._tooltipContents) {\n\t\t\t\tthis._tooltipDiv.removeChild(this._tooltipContents);\n\t\t\t\tthis._tooltipContents = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Code projections are displayed using the editor theme colors\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipCodeProjection\"); //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipOnHover\"); //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.classList.remove(\"textviewTooltipOnFocus\"); //$NON-NLS-0$\n\t\t\t\n\t\t\tthis._tooltipDiv.style.visibility = \"hidden\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = false;\n\t\t\tthis._tooltipDiv.style.left = \"\";\n\t\t\tthis._tooltipDiv.style.right = \"\";\n\t\t\tthis._tooltipDiv.style.top = \"\";\n\t\t\tthis._tooltipDiv.style.bottom = \"\";\n\t\t\tthis._tooltipDiv.style.width = \"auto\";\t\t //$NON-NLS-0$\n\t\t\tthis._tooltipDiv.style.maxWidth = \"\";\n\t\t\tthis._tooltipDiv.style.height = \"auto\";\t\t //$NON-NLS-0$\t\n\t\t\tthis._tooltipDiv.style.maxHeight = \"\";\n\t\t\tthis._tooltipDiv.style.overflowX = \"\";\n\t\t\tthis._tooltipDiv.style.overflowY = \"\";\n\t\t\t\n\t\t\tthis._anchorArea = undefined;  // Area of text/ruler/etc. we are showing a tooltip for\n\t\t\tthis._tooltipArea = undefined;  // The area the tooltip covers\n\t\t\tthis._outerArea = undefined; // The rectangle encapsulating both anchor and tooltip areas where we want to keep the tooltip open\n\t\t\t\n\t\t\t// cancel any outstanding defers\n\t\t\tif (this._hoverPromises) {\n\t\t\t\tthis._hoverPromises.forEach(function(info) {\n\t\t\t\t\tif (!info.resolved) {\n\t\t\t\t\t\tinfo.cancel();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._hoverPromises = undefined;\n\t\t\t\n\t\t\t// values that are calculated\n\t\t\tthis._tipRect = undefined;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name isVisible\n\t\t * @description Returns a boolean indicating whether the tooltip is currently visible\n\t\t * @function\n\t\t * @public\n\t\t * @returns {boolean} 'true' iff the tooltip is currently visible\n\t\t*/\n\t\tisVisible: function() {\n\t\t\treturn this._tipShowing;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _processInfo\n\t\t * @description Renders the content, positions the tooltip then makes the tooltip visible\n\t\t * @function\n\t\t * @private\n\t\t * @param info {Object} The info object passed by the caller\n\t\t * \n\t\t * Info:\n\t\t * 1) Contents\n\t\t * 2) Context\n\t\t * 3) Position string left, right, top, bottom\n\t\t * 4) AnchorArea x, y, width, height\n\t\t * 5) TooltipArea x, y, width, height\n\t\t * 6) TooltipOffsetX\n\t\t * 7) TooltipOffsetY\n\t\t * 8) AllowFullWidth\n\t\t * \n\t\t * @param update Whether to update the existing tooltip contents or open a new tooltip\n\t\t */\n\t\t_processInfo: function(info, update) {\n\t\t\tif (!this._tooltipDiv){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tvar newTooltipContents;\n\t\t\tif (update && this._tooltipContents) {\n\t\t\t\tthis._tooltipContents.innerHTML = \"\";\n\t\t\t\tnewTooltipContents = this._tooltipContents;\n\t\t\t} else {\n \t\t\t\tnewTooltipContents = util.createElement(this._tooltipDiv.ownerDocument, \"div\"); //$NON-NLS-0$\n \t\t\t}\n \t\t\t\n\t\t\tif (info) {\n\t\t\t\t// Render provided content\n\t\t\t\tif (info.contents) {\n\t\t\t\t\tif (this._renderImmediateInfo(newTooltipContents, info.contents, info.context)) {\n\t\t\t\t\t\tthis._showContents(newTooltipContents, info, update);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// If no immediate content, check if hover service plug-ins have content\n\t\t\t\tif (this.hover && info.context){\n\t\t\t\t\tthis._hoverPromises = this.hover.computeHoverInfo(info.context);\n\t\t\t\t\tif (this._hoverPromises) {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tvar promises = this._hoverPromises.slice(0);\n\t\t\t\t\t\tpromises.forEach(function(hoverPromise) {\n\t\t\t\t\t\t\tDeferred.when(hoverPromise, function (data) {\n\t\t\t\t\t\t\t\t// Remove this promise from the list so we don't try cancelling it while processing (see hide())\n\t\t\t\t\t\t\t\tif (self._hoverPromises){\n\t\t\t\t\t\t\t\t\tvar index = self._hoverPromises.indexOf(hoverPromise);\n\t\t\t\t\t\t\t\t\tif (index >= 0){\n\t\t\t\t\t\t\t\t\t\tself._hoverPromises.splice(index, 1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\t\tif (self._renderPluginContent(newTooltipContents, data)) {\n\t\t\t\t\t\t\t\t\t\tif (data.offsetStart){\n\t\t\t\t\t\t\t\t\t\t\tinfo.context.offsetStart = data.offsetStart;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.offsetEnd){\n\t\t\t\t\t\t\t\t\t\t\tinfo.context.offsetEnd = data.offsetEnd;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.allowFullWidth){\n\t\t\t\t\t\t\t\t\t\t\tinfo.allowFullWidth = data.allowFullWidth;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tself._showContents(newTooltipContents, info, update);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\t\t\tif (console && error && error.name !== 'Cancel') {\n\t\t\t\t\t\t\t\t\tconsole.log(\"Error computing hover tooltip\"); //$NON-NLS-0$\n\t\t\t\t\t\t\t\t\tconsole.log(error && error.stack);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @name _showContents\n\t\t * @description Takes the rendered contents, positions the tooltip, opens the tooltip\n\t\t * @function\n\t\t * @private\n\t\t * @param newContentsDiv\n\t\t * @param info\n\t\t * @param update\n\t\t */\n\t\t_showContents: function _showContents(newContentsDiv, info, update) {\n\t\t\tif (!update){\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\t// If update is called but the set tooltip area is different, recreate the tooltip with the new sizing (ex: content assist resizing)\n\t\t\t\t// We could also check if the set anchor area is different, but no one would be using it\n\t\t\t\tif (this._tooltipArea && info.tooltipArea){\n\t\t\t\t\tif (this._tooltipArea.left !== info.tooltipArea.left || this._tooltipArea.top !== info.tooltipArea.top || this._tooltipArea.width !== info.tooltipArea.width || this._tooltipArea.height !== info.tooltipArea.height){\n\t\t\t\t\t\tthis._anchorArea = null;\n\t\t\t\t\t\tthis._tooltipArea = null;\n\t\t\t\t\t\tthis._outerArea = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (newContentsDiv) {\n\t\t\t\tif (this._tooltipContents) {\n\t\t\t\t\tthis._tooltipDiv.removeChild(this._tooltipContents);\n\t\t\t\t}\n\t\t\t\tthis._tooltipContents = newContentsDiv;\n\t\t\t\tthis._tooltipDiv.appendChild(newContentsDiv);\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif (!this._anchorArea){\n\t\t\t\tthis._anchorArea = this._computeAnchorArea(info);\n\t\t\t}\n\t\t\tif (!this._tooltipArea){\n\t\t\t\t// This function performs two tasks, computing the rectangle and setting all the style properties\n\t\t\t\tthis._tooltipArea = this._computeTooltipArea(info, this._anchorArea, this._tooltipDiv);\n\t\t\t}\n\t\t\tif (!this._outerArea){\n\t\t\t\tthis._outerArea = this._computeOuterArea(this._anchorArea, this._tooltipArea);\n\t\t\t}\n\t\t\t\n\t\t\tthis._tooltipDiv.style.visibility = \"visible\"; //$NON-NLS-0$\n\t\t\tthis._tipShowing = true;\n\t\t\t\n\t\t\tif (this._giveFocus) {\n\t\t\t\tthis._setInitialFocus(this._tooltipDiv);\n\t\t\t\tthis._giveFocus = undefined;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _computeAnchorArea\n\t\t * @description Computes and returns the rectangle that the tooltip is anchored to.  For example the anchor for an annotation \n\t\t * \t\t\t\tmay be its text range.\n\t\t * @function\n\t\t * @private\n\t\t * @param info {Object} the info object passed by the caller.\n\t\t * @returns returns the computed rectangle anchor area\n\t\t */\n\t\t_computeAnchorArea: function _computeAnchorArea(info){\n\t\t\tif (info.anchorArea){\n\t\t\t\tif (info.anchorArea.top && info.anchorArea.left && info.anchorArea.height && info.anchorArea.width){\n\t\t\t\t\treturn info.anchorArea;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (info.context){\n\t\t\t\tif (info.context.offsetStart && info.context.offsetEnd){\n\t\t\t\t\t// The full text content of the editor is given to the plug-in hover service, so we must adjust the offsets\n\t\t\t\t\t// for the projection model as folded comments will change the offsets/coordinates in the displayed editor\n\t\t\t\t\tvar mappedStart = this.mapOffset(info.context.offsetStart, false);\n\t\t\t\t\tvar mappedEnd = this.mapOffset(info.context.offsetEnd, false);\n\t\t\t\t\treturn this._computeRectangleFromOffset(mappedStart, mappedEnd);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (info.context.offset >= 0){\n\t\t\t\t\t// The provided offset is based on the full text content, not the projection model\n\t\t\t\t\t// Adjust the offset before finding the closest enclosing word\n\t\t\t\t\tvar mappedOffset = this.mapOffset(info.context.offset, false);\n\t\t\t\t\tvar end = this._view.getNextOffset(mappedOffset, { unit: \"wordend\", count: 0}); //$NON-NLS-0$\n\t\t\t\t\tvar start = this._view.getNextOffset(end, { unit: \"word\", count: -1}); //$NON-NLS-0$\n\t\t\t\t\treturn this._computeRectangleFromOffset(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn {top: 0, left: 0, height: 0, width: 0};\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _computeTooltipPosition\n\t\t * @description Defines the tooltip area and placement.  Returns the rectangle defining the tooltip area and sets the tooltipDiv\n\t\t * \t\t\t\tstyle to match the rectangles values.\n\t\t * @param info the tooltip info object passed by the caller\n\t\t * @param anchorArea the computed tooltip anchor area to which the tooltip will be positioned\n\t\t * @param tooltipDiv the div for the tooltip, this function will modify its style to match the computed position/size\n\t\t * @returns returns the computed tooltip area rectangle\n\t\t * @function\n\t\t * @private\n\t\t */\n\t\t_computeTooltipArea: function _computeTooltipArea(info, anchorArea, tooltipDiv){\n\t\t\tvar documentElement = tooltipDiv.ownerDocument.documentElement;\n\t\t\t\n\t\t\t// TODO This padding must match what is in tooltip.css\n\t\t\tvar padding = 16;\n\t\t\t\n\t\t\t// Callers can specify the exact placement of the tooltip\n\t\t\tif (info.tooltipArea && info.tooltipArea.top && info.tooltipArea.left && info.tooltipArea.height && info.tooltipArea.width){\t\t\t\t\t\t\t\t\t\t \n\t\t\t\ttooltipDiv.style.overflowY = \"auto\"; //$NON-NLS-0$ // If caller specifies a height, allow scrolling\n\t\t\t\ttooltipDiv.style.resize = \"none\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.top = (info.tooltipArea.top) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.left = (info.tooltipArea.left) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.height = (info.tooltipArea.height - padding) + \"px\"; //$NON-NLS-0$\n\t\t\t\ttooltipDiv.style.width = (info.tooltipArea.width - padding) + \"px\"; //$NON-NLS-0$\n\t\t\t\treturn info.tooltipArea;\n\t\t\t}\n\t\t\t\n\t\t\tvar divBounds = tooltipDiv.getBoundingClientRect();\n\t\t\tvar tipRect = {\n\t\t\t\twidth: divBounds.width,\n\t\t\t\theight: divBounds.height\n\t\t\t};\n\t\t\t\n\t\t\t// If there is an unloaded image its width will not be included in the calculated size, add some buffer space so tooltip doesn't wrap (See bug 478357)\n\t\t\tvar image = tooltipDiv.getElementsByTagName('img')[0]; //$NON-NLS-1$\n\t\t\tif (image && !image.complete && image.width === 0){\n\t\t\t\ttipRect.width += 30;\n\t\t\t}\n\t\t\t\n\t\t\tvar position = info.position ? info.position : \"below\"; //$NON-NLS-0$\n\t\t\t\n\t\t\tvar viewBounds = (this._view._rootDiv ? this._view._rootDiv : documentElement).getBoundingClientRect();\n\t\t\tvar viewportLeft = viewBounds.left;\n\t\t\tvar viewportTop = viewBounds.top;\n\t\t\tvar viewportWidth = viewBounds.width;\n\t\t\tvar viewportHeight = viewBounds.height;\n\t\t\t\n\t\t\t// Set a default size for the tooltip\n\t\t\tvar defWidth = viewportWidth;\n\t\t\tvar defHeight = viewportHeight;\n\t\t\tif (!info.allowFullWidth){\n\t\t\t\tdefWidth = Math.min(viewportWidth/2, 600);\n\t\t\t\tdefHeight = Math.min(viewportHeight/2, 400);\n\t\t\t\ttipRect.width = Math.min(tipRect.width, defWidth);\n\t\t\t\ttipRect.height = Math.min(tipRect.height, defHeight);\n\t\t\t} else if (tipRect.width > viewportWidth){\n\t\t\t\ttipRect.width = viewportWidth;\n\t\t\t}\n\t\t\t\n\t\t\t// Now that we have our width recalculate the desired height...\n\t\t\ttooltipDiv.style.width = (tipRect.width - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttipRect.height = Math.min(tooltipDiv.clientHeight, defHeight);\n\t\t\t\n\t\t\t// If there will be Y overflow, increase width to fit the scrollbar\n\t\t\tif (tooltipDiv.clientHeight > defHeight){\n\t\t\t\tvar contentWidth = this._tooltipContents.offsetWidth;\n\t\t\t\ttooltipDiv.style.overflowY = \"scroll\";\n\t\t\t\tvar scrollWidth = contentWidth - this._tooltipContents.offsetWidth;\n\t\t\t\tif (scrollWidth > 0){\n\t\t\t\t\ttipRect.width += scrollWidth;\n\t\t\t\t\tif (tipRect.width > viewportWidth){\n\t\t\t\t\t\ttipRect.width = viewportWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttooltipDiv.style.overflowY = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Hack for single line tooltips that wrap, set a minimum height to make them show 2 lines without scrolling\n\t\t\t// The largest line height was MacOS Chrome with 20px+padding.  So 25 is the minimum height we are sure we are one two lines\n\t\t\t// Similarly, the minimum height for the tooltip is two lines (20px x 2 + padding) (this will actually show three lines on Win7 Chrome)\n\t\t\tif ((25+padding) > tipRect.height && tipRect.width > (defWidth-padding)){\n\t\t\t\ttipRect.height = 40+padding;\n\t\t\t}\n\n\t\t\tvar spaceBelow = viewportHeight - (anchorArea.top + anchorArea.height - viewportTop);\n\t\t\tvar spaceAbove = anchorArea.top - viewportTop;\n\t\t\tvar spaceRight = viewportWidth - (anchorArea.left + anchorArea.width - viewportLeft);\n\t\t\t\n\t\t\t// If there is not enough space above or below, swap the position.  Can't do the same for right/left because rulers are at client bounds\n\t\t\tif (position === \"above\" && tipRect.height > spaceAbove && tipRect.height <= spaceBelow){\n\t\t\t\tposition = \"below\"; //$NON-NLS-0$\n\t\t\t} else if (position === \"below\" && tipRect.height > spaceBelow && tipRect.height <= spaceAbove){\n\t\t\t\tposition = \"above\"; //$NON-NLS-0$\n\t\t\t}\n\t\t\t\n\t\t\tvar offsetX = info.tooltipOffsetX ? info.tooltipOffsetX : 0;\n\t\t\tvar offsetY = info.tooltipOffsetY ? info.tooltipOffsetY : 0;\n\t\t\t\n\t\t\t// Attempt to line up tooltip with the anchor area\n\t\t\t// If not enough space, shift the tooltip horiz (above/below) or vert (left/right) until it fits\n\t\t\t// Force the tooltip to start within the viewport area\n\t\t\t// Set maximum sizes for remaining area in the viewport area\n\t\t\tswitch (position){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tif ((tipRect.height + offsetY) > (spaceBelow + anchorArea.height)){\n\t\t\t\t\t\t// Shift the top of the tooltip upwards to fit, ignore the offset value\n\t\t\t\t\t\ttipRect.top = viewportHeight + viewportTop - tipRect.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.top = anchorArea.top + offsetY;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.top = Math.max(tipRect.top, viewportTop);\n\t\t\t\t\ttipRect.left = Math.max(anchorArea.left - tipRect.width + offsetX, viewportLeft);\n\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tif ((tipRect.height + offsetY) > (spaceBelow + anchorArea.height)){\n\t\t\t\t\t\t// Shift the top of the tooltip upwards to fit, ignore the offset value\n\t\t\t\t\t\ttipRect.top = viewportHeight + viewportTop - tipRect.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.top = anchorArea.top + offsetY;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.top = Math.max(tipRect.top, viewportTop);\n\t\t\t\t\ttipRect.left = Math.max(anchorArea.left + anchorArea.width + offsetX, viewportLeft);\n\t\t\t\tbreak;\n\t\t\t\tcase \"above\":\n\t\t\t\t\tif ((tipRect.width + offsetX) > (spaceRight + anchorArea.width)){\n\t\t\t\t\t\t// Shift the left side of the tooltip to the left, ignore the offset value\n\t\t\t\t\t\ttipRect.left = viewportWidth + viewportLeft - tipRect.width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.left = anchorArea.left + offsetX;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.left = Math.max(tipRect.left, viewportLeft);\n\t\t\t\t\ttipRect.top = Math.max(anchorArea.top - tipRect.height + offsetY, viewportTop);\n\t\t\t\tbreak;\n\t\t\t\tcase \"below\":\n\t\t\t\t\tif ((tipRect.width + offsetX) > (spaceRight + anchorArea.width)){\n\t\t\t\t\t\t// Shift the left side of the tooltip to the left, ignore the offset value\n\t\t\t\t\t\ttipRect.left = viewportWidth + viewportLeft - tipRect.width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttipRect.left = anchorArea.left + offsetX;\n\t\t\t\t\t}\n\t\t\t\t\ttipRect.left = Math.max(tipRect.left, viewportLeft);\n\t\t\t\t\ttipRect.top = Math.max(anchorArea.top + anchorArea.height + offsetY, viewportTop);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\ttipRect.maxWidth = Math.min(viewportWidth + viewportLeft - tipRect.left, viewportWidth);\n\t\t\ttipRect.maxHeight = Math.min(viewportHeight + viewportTop - tipRect.top, viewportHeight);\n\t\t\t\n\t\t\t// Adjust sizes for div padding, but not the actual tooltip box.\n\t\t\ttooltipDiv.style.maxWidth = (tipRect.maxWidth - padding) + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.maxHeight = (tipRect.maxHeight - padding) + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.width = (tipRect.width - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttooltipDiv.style.height = (tipRect.height - padding) + \"px\"; //$NON-NLS-1$\n\t\t\ttooltipDiv.style.left = tipRect.left + \"px\"; //$NON-NLS-0$\n\t\t\ttooltipDiv.style.top = tipRect.top + \"px\"; //$NON-NLS-0$\n\t\t\treturn tipRect;\n\t\t},\n\t\t\n\t\t_computeOuterArea: function _computeOuterArea(anchorArea, tooltipArea){\n\t\t\tvar left = Math.min(anchorArea.left, tooltipArea.left);\n\t\t\tvar top = Math.min(anchorArea.top, tooltipArea.top);\n\t\t\tvar positionRight = anchorArea.left + anchorArea.width;\n\t\t\tvar tipRight = tooltipArea.left + tooltipArea.width;\n\t\t\tvar right = Math.max(positionRight, tipRight);\n\t\t\tvar positionBottom = anchorArea.top + anchorArea.height;\n\t\t\tvar tipBottom = tooltipArea.top + tooltipArea.height;\n\t\t\tvar bottom = Math.max(positionBottom, tipBottom);\n\t\t\t\t\n\t\t\treturn {\n\t\t\t\t\tleft: left,\n\t\t\t\t\ttop : top,\n\t\t\t\t\twidth: right - left,\n\t\t\t\t\theight: bottom - top\n\t\t\t\t};\n\t\t},\n\t\t\n\t\t/*\n\t\t ******************************************************************************************************************* \n\t\t * Utility: This section contains various utility methods\n\t\t ******************************************************************************************************************* \n\t\t */\n\t\t_hasFocus: function() {\n\t\t\tvar tooltipDiv = this._tooltipDiv;\n\t\t\tif (!tooltipDiv) { return false; }\n\t\t\treturn textUtil.contains(tooltipDiv, tooltipDiv.ownerDocument.activeElement);\n\t\t},\n\t\t_isNode: function (obj) {\n\t\t\treturn typeof Node === \"object\" ? obj instanceof Node :\n\t\t\t\tobj && typeof obj === \"object\" && typeof obj.nodeType === \"number\" && typeof obj.nodeName === \"string\";\n\t\t},\n\t\t_setInitialFocus: function(tooltipDiv) {\n\t\t\t// Any buttons ?\n\t\t\tvar button = lib.$(\"button\", tooltipDiv); //$NON-NLS-0$\n\t\t\tif (button) {\n\t\t\t\tbutton.focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Any links ?\n\t\t\tvar link = lib.$(\"a\", tooltipDiv); //$NON-NLS-0$\n\t\t\tif (link) {\n\t\t\t\tlink.focus();\n\t\t\t\tvar self = this;\n\t\t\t\tlink.addEventListener(\"click\", function() {\n\t\t\t\t\tself.hide();\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Give up and focus on the first tabbable\n\t\t\tvar toFocus = lib.firstTabbable(tooltipDiv);\n\t\t\tif (toFocus) {\n\t\t\t\ttoFocus.focus();\n\t\t\t}\n\t\t},\n\t\t_isInRect: function(rect, x, y) {\n\t\t\tif (!rect){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar xOK = x >= rect.left && x <= (rect.left + rect.width);\n\t\t\tvar yOK = y >= rect.top && y <= (rect.top + rect.height);\n\t\t\treturn xOK && yOK;\n\t\t},\n\t\tmapOffset: function(offset) {\n\t\t\tvar textView = this._view;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\toffset = model.mapOffset(offset, true);\n\t\t\t}\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * Note that the offsets passed here must already be mapped to the base model being displayed (i.e. reduced by collapsed comments)\n\t\t */\n\t\t_computeRectangleFromOffset: function(start, end) {\n\t\t\tvar tv = this._view;\n\t\t\tvar curLine = tv.getLineAtOffset(start);\n\t\t\tvar endLine = tv.getLineAtOffset(end);\n\t\t\t\n\t\t\tvar height, viewRect;\n\t\t\t\n\t\t\tif (curLine !== endLine) {\n\t\t\t\tvar y = tv.getLocationAtOffset(start).y;\n\t\t\t\theight = 0;\n\t\t\t\tvar maxX = 0;\n\t\t\t\twhile (curLine <= endLine){\n\t\t\t\t\theight += tv.getLineHeight(curLine);\n\t\t\t\t\tvar lineEnd = tv.getModel().getLineEnd(curLine);\n\t\t\t\t\tvar possibleEnd = tv.getLocationAtOffset(lineEnd).x;\n\t\t\t\t\tif (possibleEnd > end){\n\t\t\t\t\t\tmaxX = possibleEnd;\n\t\t\t\t\t}\n\t\t\t\t\tcurLine++;\n\t\t\t\t}\n\t\t\t\tvar lineStart = tv.getModel().getLineStart(endLine);\n\t\t\t\tvar x = tv.getLocationAtOffset(lineStart).x;\n\t\t\t\t\n\t\t\t\tviewRect = { x: x, y: y, width: maxX - x, height: height};\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tvar startPos = tv.getLocationAtOffset(start);\n\t\t\t\tvar endPos = tv.getLocationAtOffset(end);\n\t\t\t\theight = tv.getLineHeight(curLine);\n\t\t\t\tviewRect = { x: startPos.x, y: startPos.y, \n\t\t\t\t\t\t\twidth: endPos.x - startPos.x, height: height};\n\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\tviewRect = this._view.convert(viewRect, \"document\", \"page\"); //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\treturn {left: viewRect.x, top: viewRect.y, width: viewRect.width, height: viewRect.height};\n\t\t},\n\t\t/*\n\t\t ******************************************************************************************************************* \n\t\t * Rendering: This section deals with rendering supplied data into HTML for inclusion into the Info Popup.\n\t\t ******************************************************************************************************************* \n\t\t */\n\t\t_renderPluginContent: function(contentsDiv, data) {\n\t\t\tvar document = this._tooltipDiv.ownerDocument;\n\t\t\t// data object should be an object containing the type and content.  If no type or unknown type, default to string.\n\t\t\tif (typeof data !== 'string' && typeof data.content === 'undefined') {\n\t\t\t    return false;\n\t\t\t}\n\t\t\t\n\t\t\tvar sectionDiv = util.createElement(document, \"div\"); //$NON-NLS-0$;\n\t\t\t// render the title, if any\n\t\t\tif (data.title && !data.hiddenTitle) {\n\t\t\t\tvar titleDiv = util.createElement(document, \"div\"); //$NON-NLS-0$;\n\t\t\t\tif (this.hover.renderMarkDown) {\n\t\t\t\t\ttitleDiv.innerHTML = this.hover.renderMarkDown(data.title);\n\t\t\t\t} else {\n\t\t\t\t\ttitleDiv.textContent = data.title;\n\t\t\t\t}\n\t\t\t\ttitleDiv.classList.add(\"hoverTooltipTitle\"); //$NON-NLS-0$\n\t\t\t\tsectionDiv.appendChild(titleDiv);\n\t\t\t}\n\t\t\tvar contentDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\n\t\t\tif (typeof data === 'string'){\n\t\t\t\tcontentDiv.appendChild(document.createTextNode(data));\n\t\t\t} else {\n\t\t\t\tswitch(data.type) {\n\t\t\t\t\tcase 'delegatedUI': {\n\t\t\t\t\t\t// The delegated UI is not included in the 8.0 release, see Bug 449240.\n\t\t\t\t\t}\n\t\t\t\t\tcase 'html': {\n\t\t\t\t\t\tif (data.content){\n\t\t\t\t\t\t\tvar iframe = document.createElement(\"iframe\");\n\t\t\t\t\t\t\tiframe.id = 'HtmlHover'; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.name = 'HTML Hover'; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.type = \"text/html\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.title = data.title || \"HTML\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.sandbox = \"allow-scripts allow-same-origin allow-forms\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.border = \"none\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.width = \"100%\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.height = \"100%\"; //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.style.overflow = \"auto\";  //$NON-NLS-1$\n\t\t\t\t\t\t\t// TODO The iframe computed height is always 3px smaller than the tooltip, giving the impression of inconsistent padding\n\t\t\t\t\t\t\tthis._tooltipDiv.style.paddingBottom = \"5px\";  //$NON-NLS-0$\n\t\t\t\t\t\t\tiframe.srcdoc = data.content;\n\t\t\t\t\t\t\tif (data.width) {\n\t\t\t\t\t\t\t\tiframe.style.width = data.width;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.height) {\n\t\t\t\t\t\t\t\tiframe.style.height = data.height;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsectionDiv.style.height = '100%';  //$NON-NLS-0$ // Height should grow on resize\n\t\t\t\t\t\t\tcontentsDiv.style.height = '100%';  //$NON-NLS-0$\n\t\t\t\t\t\t\tsectionDiv.appendChild(iframe);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'markdown': {\n\t\t\t\t\t\tif (this.hover.renderMarkDown) {\n\t\t\t\t\t\t\tcontentDiv.innerHTML = this.hover.renderMarkDown(data.content);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tcontentDiv.appendChild(document.createTextNode(data.content));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsectionDiv.appendChild(contentDiv);\n\t\t\tcontentsDiv.appendChild(sectionDiv);\n\t\t\treturn true;\n\t\t},\n\t\t/*\n\t\t * Empty or empty array = call hover service for dynamic content\n\t\t * Array = annotations\n\t\t * String = HTML text\n\t\t * Node = HTML node\n\t\t * ProjectionTextModel = code projection\n\t\t */\n\t\t_renderImmediateInfo: function _renderImmediateInfo(contentsDiv, contents, context) {\t\t\t\t\t\t\n\t\t\t// If it's an annotation then process the annotation(s) to get the actual data\n\t\t\tif (contents instanceof Array) {\n\t\t\t\tcontents = this._getAnnotationContents(contents, context);\t\t\t\n\t\t\t\tif (!contents) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (typeof contents === \"string\") {\n\t\t\t\tcontentsDiv.textContent = contents;\n\t\t\t\treturn true;\n\t\t\t} else if (this._isNode(contents)) {\n\t\t\t\tcontentsDiv.appendChild(contents);\n\t\t\t\treturn true;\n\t\t\t} else if (contents instanceof mProjectionTextModel.ProjectionTextModel) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar options = view.getOptions();\n\t\t\t\toptions.wrapMode = false;\n\t\t\t\toptions.parent = contentsDiv;\n\t\t\t\tvar tooltipTheme = \"tooltipTheme\"; //$NON-NLS-0$\n\t\t\t\tvar theme = options.themeClass;\n\t\t\t\tif (theme) {\n\t\t\t\t\ttheme = theme.replace(tooltipTheme, \"\");\n\t\t\t\t\tif (theme) { theme = \" \" + theme; } //$NON-NLS-0$\n\t\t\t\t\ttheme = tooltipTheme + theme;\n\t\t\t\t} else {\n\t\t\t\t\ttheme = tooltipTheme;\n\t\t\t\t}\n\t\t\t\toptions.themeClass = theme;\n\t\t\t\tvar contentsView = this._contentsView = new mTextView.TextView(options);\n\t\t\t\t//TODO need to find a better way of sharing the styler for multiple views\n\t\t\t\tvar listener = {\n\t\t\t\t\tonLineStyle: function(e) {\n\t\t\t\t\t\tview.onLineStyle(e);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tcontentsView.addEventListener(\"LineStyle\", listener.onLineStyle);\n\t\t\t\tcontentsView.setModel(contents);\n\t\t\t\t\n\t\t\t\t// TODO This is a hack to compute the projection size we will have in the tooltip, we remove the child after computing\n\t\t\t\tthis._tooltipDiv.appendChild(contentsDiv);\n\t\t\t\t// Use the editor colors with a simple border\n\t\t\t\tthis._tooltipDiv.classList.add(\"textviewTooltipCodeProjection\"); //$NON-NLS-0$\n\t\t\t\tvar size = contentsView.computeSize();\n\t\t\t\t// Adjust the size for the padding\n\t\t\t\tcontentsDiv.style.width = (size.width+16) + \"px\"; //$NON-NLS-0$\n\t\t\t\tcontentsDiv.style.height = (size.height+16) + \"px\"; //$NON-NLS-0$\n\t\t\t\tcontentsView.resize();\n\t\t\t\tthis._tooltipDiv.removeChild(contentsDiv);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t\n\t\t/**\n\t\t * @name _getAnnotationContents\n\t\t * @description Takes a list of annotation and renders them in the tooltip\n\t\t * @function\n\t\t * @private\n\t\t * @param annotations the list of annotations to render\n\t\t * @param context optional object containing where the annotations are displayed (ruler, editor, etc.)\n\t\t * @returns returns document node containing rendered tooltip content\n\t\t */\n\t\t_getAnnotationContents: function(annotations, context) {\n\t\t\tvar self = this;\n\t\t\tvar inEditor = self.hover ? true : false;\n\t\t\tif (inEditor && context && context.source && context.source.indexOf('ruler') >= 0 && annotations.length > 1){ //$NON-NLS-0$\n\t\t\t\tinEditor = false;\n\t\t\t}\n\t\t\t\n\t\t\tvar annotation;\n\t\t\tvar newAnnotations = [];\n\t\t\tfor (var j = 0; j < annotations.length; j++) {\n\t\t\t\tannotation = annotations[j];\n\t\t\t\tif (annotation.title !== \"\" && !annotation.groupAnnotation) {\n\t\t\t\t\t// Don't display untitled annotations in the editor such as occurrences as the code is already visible\n\t\t\t\t\tif (!inEditor || annotation.title || annotation.type === \"orion.annotation.folding\"){\n\t\t\t\t\t\tnewAnnotations.push(annotation); \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotations = newAnnotations;\n\t\t\tif (annotations.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tvar html;\n\t\t\tvar document = this._tooltipDiv.ownerDocument;\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar baseModel = model.getBaseModel ? model.getBaseModel() : model;\n\t\t\t\n\t\t\t// If this is a code folding annotation, display code projection\n\t\t\tif (annotations.length === 1 && annotations[0].type === \"orion.annotation.folding\") {\n\t\t\t\tvar newModel = new mProjectionTextModel.ProjectionTextModel(baseModel);\n\t\t\t\tvar lineStart = baseModel.getLineStart(baseModel.getLineAtOffset(annotations[0].start));\n\t\t\t\tvar charCount = baseModel.getCharCount();\n\t\t\t\tif (annotations[0].end !== charCount) {\n\t\t\t\t\tnewModel.addProjection({start: annotations[0].end, end: charCount});\n\t\t\t\t}\n\t\t\t\tif (lineStart > 0) {\n\t\t\t\t\tnewModel.addProjection({start: 0, end: lineStart});\n\t\t\t\t}\n\t\t\t\treturn newModel;\n\t\t\t}\n\t\t\t\n\t\t\tvar allAnnotations;\n\t\t\tif (annotations.length > 0 && this._editor){\n\t\t\t\tallAnnotations = this._editor.getAnnotationModel().getAnnotations();\n\t\t\t}\n\t\t\tif (annotations.length === 1) {\n\t\t\t\thtml = getAnnotationHTML(annotations[0], allAnnotations, inEditor);\n\t\t\t\tif (html && html.firstChild) {\n\t\t\t\t\tvar className = html.firstChild.className;\n\t\t\t\t\tif (className) { className += \" \"; } //$NON-NLS-0$\n\t\t\t\t\tclassName += \"single\"; //$NON-NLS-0$\n\t\t\t\t\thtml.firstChild.className = className;\n\t\t\t\t}\n\t\t\t\treturn html;\n\t\t\t} else {\n\t\t\t\tvar tooltipHTML = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\tvar em = util.createElement(document, \"multi_anno\"); //$NON-NLS-0$\n\t\t\t\tem.appendChild(document.createTextNode(messages.multipleAnnotations));\n\t\t\t\ttooltipHTML.appendChild(em);\n\t\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\t\thtml = getAnnotationHTML(annotations[i], allAnnotations, inEditor);\n\t\t\t\t\tif (html) {\n\t\t\t\t\t\ttooltipHTML.appendChild(html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn tooltipHTML;\n\t\t\t}\n\t\t\t\n\t\t\tfunction getAnnotationHTML(annotation, allAnnotations, inEditor) {\n\t\t\t\tvar title = annotation.title;\n\t\t\t\tvar result = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\tresult.className = \"tooltipRow\"; //$NON-NLS-0$\n\t\t\t\tif (annotation.html) {\n\t\t\t\t\tvar htmlHolder = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\t\thtmlHolder.className = \"tooltipImage\"; //$NON-NLS-0$\n\t\t\t\t\thtmlHolder.innerHTML = annotation.html;\n\t\t\t\t\tif (htmlHolder.lastChild) {\n\t\t\t\t\t\ttextUtil.addEventListener(htmlHolder.lastChild, \"click\", function() {\n\t\t\t\t\t\t\tvar start = annotation.start, end = annotation.end;\n\t\t\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar evt = {\n\t\t\t\t\t\t\t\ttype: \"AnnotationClicked\",\n\t\t\t\t\t\t\t\ttarget: self,\n\t\t\t\t\t\t\t\ttargetType: \"Tooltip\",\n\t\t\t\t\t\t\t\tannotation: annotation,\n\t\t\t\t\t\t\t\tselection: {\n\t\t\t\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\t\t\t\tend: end,\n\t\t\t\t\t\t\t\t\tviewportOffset: 1 / 3\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tview.dispatchEvent(evt);\n\t\t\t\t\t\t\tif (evt.selection) {\n\t\t\t\t\t\t\t\tview.setSelection(evt.selection.start, evt.selection.end, evt.selection.viewportOffset, function() { self.hide(); });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t}\n\t\t\t\t\tresult.appendChild(htmlHolder);\n\t\t\t\t}\n\t\t\t\tif (!title) {\n\t\t\t\t\tvar textStart = baseModel.getLineStart(baseModel.getLineAtOffset(annotation.start));\n\t\t\t\t\tvar textEnd = baseModel.getLineEnd(baseModel.getLineAtOffset(annotation.end), true);\n\t\t\t\t\ttitle = baseModel.getText(textStart, textEnd);\n\t\t\t\t}\n\t\t\t\tif (typeof title === \"function\") {\n\t\t\t\t\ttitle = annotation.title();\n\t\t\t\t}\n\t\t\t\tif (typeof title === \"string\") {\n\t\t\t\t\tvar span = util.createElement(document, \"span\"); //$NON-NLS-0$\n\t\t\t\t\tspan.className = \"tooltipTitle\"; //$NON-NLS-0$\n\t\t\t\t\tspan.appendChild(document.createTextNode(title));\n\t\t\t\t\ttitle = span;\n\t\t\t\t}\n\t\t\t\tresult.appendChild(title);\n\t\t\t\t\n\t\t\t\t// Handle quick fixes\n\t\t\t\tif (inEditor) {\n\t\t\t\t\tself.hover.renderQuickFixes(annotation, allAnnotations, result, function(){ self.hide(true)});\n\t\t\t\t}\n\t\t\t\tif (context){\t\n\t\t\t\t\t// Set the hover area to the annotation if it's not already set\n\t\t\t\t\tcontext.offsetStart = annotation.start;\n\t\t\t\t\tcontext.offsetEnd = annotation.end;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\t\n\t};\n\treturn {Tooltip: Tooltip};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2017 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors:\n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/annotations\", ['i18n!orion/editor/nls/messages', 'orion/editor/eventTarget'], function(messages, mEventTarget) { //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\t\n\t/**\n\t * @class This object represents a regitry of annotation types.\n\t * @name orion.editor.AnnotationType\n\t */\n\tfunction AnnotationType() {\n\t}\n\t\n\t/**\n\t * @class This object represents a decoration attached to a range of text. Annotations are added to a\n\t * <code>AnnotationModel</code> which is attached to a <code>TextModel</code>.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.AnnotationModel}<br/>\n\t * {@link orion.editor.Ruler}<br/>\n\t * </p>\n\t * @name orion.editor.Annotation\n\t *\n\t * @property {String} type The annotation type (for example, orion.annotation.error).\n\t * @property {Number} start The start offset of the annotation in the text model.\n\t * @property {Number} end The end offset of the annotation in the text model.\n\t * @property {String} html The HTML displayed for the annotation.\n\t * @property {String} title The text description for the annotation.\n\t * @property {orion.editor.Style} style The style information for the annotation used in the annotations ruler and tooltips.\n\t * @property {orion.editor.Style} overviewStyle The style information for the annotation used in the overview ruler.\n\t * @property {orion.editor.Style} rangeStyle The style information for the annotation used in the text view to decorate a range of text.\n\t * @property {orion.editor.Style} lineStyle The style information for the annotation used in the text view to decorate a line of text.\n\t */\n\t/**\n\t * Constructs a new folding annotation.\n\t *\n\t * @param {Number} start The start offset of the annotation in the text model.\n\t * @param {Number} end The end offset of the annotation in the text model.\n\t * @param {orion.editor.ProjectionTextModel} projectionModel The projection text model.\n\t *\n\t * @class This object represents a folding annotation.\n\t * @name orion.editor.FoldingAnnotation\n\t */\n\tfunction FoldingAnnotation (start, end, projectionModel) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis._projectionModel = projectionModel;\n\t\tthis.html = this._expandedHTML;\n\t\tthis.style = this._expandedStyle;\n\t\tthis.expanded = true;\n\t}\n\n\tFoldingAnnotation.prototype = /** @lends orion.editor.FoldingAnnotation.prototype */ {\n\t\t_expandedHTML: \"<div class='annotationHTML expanded'></div>\", //$NON-NLS-0$\n\t\t_expandedStyle: {styleClass: \"annotation expanded\"}, //$NON-NLS-0$\n\t\t_collapsedHTML: \"<div class='annotationHTML collapsed'></div>\", //$NON-NLS-0$\n\t\t_collapsedStyle: {styleClass: \"annotation collapsed\"}, //$NON-NLS-0$\n\t\t_collapse: function() {\n\t\t\tif (!this.expanded) { return false; }\n\t\t\tthis.expanded = false;\n\t\t\tthis.html = this._collapsedHTML;\n\t\t\tthis.style = this._collapsedStyle;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.modifyAnnotation(this);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_expand: function() {\n\t\t\tif (this.expanded) { return false; }\n\t\t\tthis.expanded = true;\n\t\t\tthis.html = this._expandedHTML;\n\t\t\tthis.style = this._expandedStyle;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.modifyAnnotation(this);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t_collapseImpl: function (checkOverlaping) {\n\t\t\tif (this._collapse()) {\n\t\t\t\tif (checkOverlaping) {\n\t\t\t\t\tthis._forEachOverlaping(function(annotation) {\n\t\t\t\t\t\tif (!annotation.expanded) {\n\t\t\t\t\t\t\tannotation._expandImpl(false);\n\t\t\t\t\t\t\tannotation._recollapse = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tvar projectionModel = this._projectionModel;\n\t\t\t\tvar baseModel = projectionModel.getBaseModel();\n\t\t\t\tthis._projection = {\n\t\t\t\t\tannotation: this,\n\t\t\t\t\tstart: baseModel.getLineStart(baseModel.getLineAtOffset(this.start) + 1),\n\t\t\t\t\tend: baseModel.getLineEnd(baseModel.getLineAtOffset(this.end), true)\n\t\t\t\t};\n\t\t\t\tprojectionModel.addProjection(this._projection);\n\t\t\t}\n\t\t},\n\t\t_expandImpl: function(checkOverlaping) {\n\t\t\tif (this._expand()) {\n\t\t\t\tthis._projectionModel._removeProjection(this._projection, !this._annotationModel);\n\t\t\t\tif (checkOverlaping) {\n\t\t\t\t\tthis._forEachOverlaping(function(annotation) {\n\t\t\t\t\t\tif (annotation._recollapse) {\n\t\t\t\t\t\t\tannotation._collapseImpl(false);\n\t\t\t\t\t\t\tannotation._recollapse = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_forEachOverlaping: function(callback) {\n\t\t\tif (!this._annotationModel) { return; }\n\t\t\tvar annotations = this._annotationModel.getAnnotations(this.start, this.end);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (annotation !== this && annotation.type === AnnotationType.ANNOTATION_FOLDING) {\n\t\t\t\t\tcallback.call(this, annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Collapses the annotation.\n\t\t */\n\t\tcollapse: function () {\n\t\t\tthis._recollapse = false;\n\t\t\tthis._collapseImpl(true);\n\t\t},\n\t\t/**\n\t\t * Expands the annotation.\n\t\t */\n\t\texpand: function () {\n\t\t\tthis._recollapse = false;\n\t\t\tthis._expandImpl(true);\n\t\t}\n\t};\n\t \n\t/**\n\t * Error annotation type.\n\t */\n\tAnnotationType.ANNOTATION_ERROR = \"orion.annotation.error\"; //$NON-NLS-0$\n\t/**\n\t * Warning annotation type.\n\t */\n\tAnnotationType.ANNOTATION_WARNING = \"orion.annotation.warning\"; //$NON-NLS-0$\n\t/**\n\t * Info annotation type.\n\t * @since 14.0\n\t */\n\tAnnotationType.ANNOTATION_INFO = \"orion.annotation.info\"; //$NON-NLS-0$\n\t/**\n\t * Task annotation type.\n\t */\n\tAnnotationType.ANNOTATION_TASK = \"orion.annotation.task\"; //$NON-NLS-0$\n\t/**\n\t * Breakpoint annotation type.\n\t */\n\tAnnotationType.ANNOTATION_BREAKPOINT = \"orion.annotation.breakpoint\"; //$NON-NLS-0$\n\t/**\n\t * Breakpoint annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CONDITIONAL_BREAKPOINT = \"orion.annotation.conditionalBreakpoint\"; //$NON-NLS-0$\n\t/**\n\t * Bookmark annotation type.\n\t */\n\tAnnotationType.ANNOTATION_BOOKMARK = \"orion.annotation.bookmark\"; //$NON-NLS-0$\n\t/**\n\t * Folding annotation type.\n\t */\n\tAnnotationType.ANNOTATION_FOLDING = \"orion.annotation.folding\"; //$NON-NLS-0$\n\t/**\n\t * Curent bracket annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_BRACKET = \"orion.annotation.currentBracket\"; //$NON-NLS-0$\n\t/**\n\t * Matching bracket annotation type.\n\t */\n\tAnnotationType.ANNOTATION_MATCHING_BRACKET = \"orion.annotation.matchingBracket\"; //$NON-NLS-0$\n\t/**\n\t * Current line annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_LINE = \"orion.annotation.currentLine\"; //$NON-NLS-0$\n\t/**\n\t * Current search annotation type.\n\t */\n\tAnnotationType.ANNOTATION_HIGHLIGHTED_LINE = \"orion.annotation.highlightedLine\"; //$NON-NLS-0$\n\t/**\n\t * Current search annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_SEARCH = \"orion.annotation.currentSearch\"; //$NON-NLS-0$\n\t/**\n\t * Matching search annotation type.\n\t */\n\tAnnotationType.ANNOTATION_MATCHING_SEARCH = \"orion.annotation.matchingSearch\"; //$NON-NLS-0$\n\t/**\n\t * Search range annotation type.\n\t */\n\tAnnotationType.ANNOTATION_SEARCH_RANGE = \"orion.annotation.searchRange\"; //$NON-NLS-0$\n\t/**\n\t * Read Occurrence annotation type.\n\t */\n\tAnnotationType.ANNOTATION_READ_OCCURRENCE = \"orion.annotation.readOccurrence\"; //$NON-NLS-0$\n\t/**\n\t * Write Occurrence annotation type.\n\t */\n\tAnnotationType.ANNOTATION_WRITE_OCCURRENCE = \"orion.annotation.writeOccurrence\"; //$NON-NLS-0$\n\t/**\n\t * Selected linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_SELECTED_LINKED_GROUP = \"orion.annotation.selectedLinkedGroup\"; //$NON-NLS-0$\n\t/**\n\t * Current linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_CURRENT_LINKED_GROUP = \"orion.annotation.currentLinkedGroup\"; //$NON-NLS-0$\n\t/**\n\t * Linked group annotation type.\n\t */\n\tAnnotationType.ANNOTATION_LINKED_GROUP = \"orion.annotation.linkedGroup\"; //$NON-NLS-0$\n\t/**\n\t* Blame annotation type.\n\t*/\n\tAnnotationType.ANNOTATION_BLAME = \"orion.annotation.blame\"; //$NON-NLS-0$\n\t/**\n\t* Current Blame annotation type.\n\t*/\n\tAnnotationType.ANNOTATION_CURRENT_BLAME = \"orion.annotation.currentBlame\"; //$NON-NLS-0$\n\t/**\n\t * Diff Added annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_ADDED = \"orion.annotation.diffAdded\"; //$NON-NLS-0$\n\t/**\n\t * Diff Deleted annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_DELETED = \"orion.annotation.diffDeleted\"; //$NON-NLS-0$\n\t/**\n\t * Diff Modification annotation type.\n\t */\n\tAnnotationType.ANNOTATION_DIFF_MODIFIED = \"orion.annotation.diffModified\"; //$NON-NLS-0$\n\t/**\n\t * Collab Line Change annotation type.\n\t */\n\tAnnotationType.ANNOTATION_COLLAB_LINE_CHANGED = \"orion.annotation.collabLineChanged\"; //$NON-NLS-0$\n\n\t/** @private */\n\tvar annotationTypes = {};\n\n\t/**\n\t * Register an annotation type.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @param {Object|Function} properties The common annotation properties of the registered\n\t *\t\tannotation type. All annotations create with this annotation type will expose these\n\t *\t\tproperties.\n\t */\n\tAnnotationType.registerType = function(type, properties) {\n\t\tvar constructor = properties;\n\t\tif (typeof constructor !== \"function\") { //$NON-NLS-0$\n\t\t\tconstructor = function(start, end, title) {\n\t\t\t\tthis.start = start;\n\t\t\t\tthis.end = end;\n\t\t\t\tif (title !== undefined) { this.title = title; }\n\t\t\t};\n\t\t\tconstructor.prototype = properties;\n\t\t}\n\t\tconstructor.prototype.type = type;\n\t\tannotationTypes[type] = constructor;\n\t\treturn type;\n\t};\n\n\t/**\n\t * Creates an annotation of a given type with the specified start end end offsets.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @param {Number} start The start offset of the annotation in the text model.\n\t * @param {Number} end The end offset of the annotation in the text model.\n\t * @param {String} [title] The text description for the annotation if different then the type description.\n\t * @return {orion.editor.Annotation} the new annotation\n\t */\n\tAnnotationType.createAnnotation = function(type, start, end, title) {\n\t\treturn new (this.getType(type))(start, end, title);\n\t};\n\n\t/**\n\t * Gets the registered annotation type with specified type. The returned\n\t * value is a constructor that can be used to create annotations of the\n\t * speficied type.  The constructor takes the start and end offsets of\n\t * the annotation.\n\t *\n\t * @param {String} type The annotation type (for example, orion.annotation.error).\n\t * @return {Function} The annotation type constructor ( i.e function(start, end, title) ).\n\t */\n\tAnnotationType.getType = function(type) {\n\t\treturn annotationTypes[type];\n\t};\n\n\t/** @private */\n\tfunction registerType(type, lineStyling) {\n\t\tvar index = type.lastIndexOf('.'); //$NON-NLS-0$\n\t\tvar suffix = type.substring(index + 1);\n\t\tvar properties = {\n\t\t\ttitle: messages[suffix],\n\t\t\tstyle: {styleClass: \"annotation \" + suffix}, //$NON-NLS-0$\n\t\t\thtml: \"<div class='annotationHTML \" + suffix + \"'></div>\", //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\toverviewStyle: {styleClass: \"annotationOverview \" + suffix} //$NON-NLS-0$\n\t\t};\n\t\tif (lineStyling) {\n\t\t\tproperties.lineStyle = {styleClass: \"annotationLine \" + suffix}; //$NON-NLS-0$\n\t\t} else {\n\t\t\tproperties.rangeStyle = {styleClass: \"annotationRange \" + suffix}; //$NON-NLS-0$\n\t\t}\n\t\tAnnotationType.registerType(type, properties);\n\t}\n\tregisterType(AnnotationType.ANNOTATION_ERROR);\n\tregisterType(AnnotationType.ANNOTATION_WARNING);\n\tregisterType(AnnotationType.ANNOTATION_INFO);\n\tregisterType(AnnotationType.ANNOTATION_TASK);\n\tregisterType(AnnotationType.ANNOTATION_BREAKPOINT);\n\tregisterType(AnnotationType.ANNOTATION_CONDITIONAL_BREAKPOINT);\n\tregisterType(AnnotationType.ANNOTATION_BOOKMARK);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_BRACKET);\n\tregisterType(AnnotationType.ANNOTATION_MATCHING_BRACKET);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_SEARCH);\n\tregisterType(AnnotationType.ANNOTATION_MATCHING_SEARCH);\n\tregisterType(AnnotationType.ANNOTATION_SEARCH_RANGE, true);\n\tregisterType(AnnotationType.ANNOTATION_READ_OCCURRENCE);\n\tregisterType(AnnotationType.ANNOTATION_WRITE_OCCURRENCE);\n\tregisterType(AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_LINKED_GROUP);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_LINE, true);\n\tregisterType(AnnotationType.ANNOTATION_HIGHLIGHTED_LINE, true);\n\tregisterType(AnnotationType.ANNOTATION_BLAME, true);\n\tregisterType(AnnotationType.ANNOTATION_CURRENT_BLAME, true);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_ADDED);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_DELETED);\n\tregisterType(AnnotationType.ANNOTATION_DIFF_MODIFIED);\n\tregisterType(AnnotationType.ANNOTATION_COLLAB_LINE_CHANGED, true);\n\n\tAnnotationType.registerType(AnnotationType.ANNOTATION_FOLDING, FoldingAnnotation);\n\n\t/**\n\t * Constructs a new AnnotationTypeList object.\n\t *\n\t * @class This represents an interface of prioritized annotation types.\n\t * @name orion.editor.AnnotationTypeList\n\t */\n\tfunction AnnotationTypeList () {\n\t}\n\t/**\n\t * Adds in the annotation type interface into the specified object.\n\t *\n\t * @param {Object} object The object to add in the annotation type interface.\n\t */\n\tAnnotationTypeList.addMixin = function(object) {\n\t\tvar proto = AnnotationTypeList.prototype;\n\t\tfor (var p in proto) {\n\t\t\tif (proto.hasOwnProperty(p)) {\n\t\t\t\tobject[p] = proto[p];\n\t\t\t}\n\t\t}\n\t};\n\tAnnotationTypeList.prototype = /** @lends orion.editor.AnnotationTypeList.prototype */ {\n\t\t/**\n\t\t * Adds an annotation type to the receiver.\n\t\t * <p>\n\t\t * Only annotations of the specified types will be shown by\n\t\t * the receiver.\n\t\t * </p>\n\t\t * <p>\n\t\t * If the priority is not specified, the annotation type will be added\n\t\t * to the end of the receiver's list (lowest pririoty).\n\t\t * </p>\n\t\t *\n\t\t * @param {Object} type the annotation type to be shown\n\t\t * @param {Number} priority the priority for the annotation type\n\t\t * \n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t * @see orion.editor.AnnotationTypeList#getAnnotationTypePriority\n\t\t */\n\t\taddAnnotationType: function(type, priority) {\n\t\t\tif (!this._annotationTypes) { this._annotationTypes = []; }\n\t\t\tvar index = priority - 1;\n\t\t\tif (priority == undefined || !(0 <= index && index < this._annotationTypes.length)) {\n\t\t\t\tthis._annotationTypes.push(type);\n\t\t\t} else {\n\t\t\t\tthis._annotationTypes.splice(index, 0, type);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Gets the annotation type priority.  The priority is determined by the\n\t\t * order the annotation type is added to the receiver.  Annotation types\n\t\t * added first have higher priority.\n\t\t * <p>\n\t\t * Returns <code>0</code> if the annotation type is not added.\n\t\t * </p>\n\t\t *\n\t\t * @param {Object} type the annotation type\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t */\n\t\tgetAnnotationTypePriority: function(type) {\n\t\t\tif (this._annotationTypes) {\n\t\t\t\tfor (var i = 0; i < this._annotationTypes.length; i++) {\n\t\t\t\t\tif (this._annotationTypes[i] === type) {\n\t\t\t\t\t\treturn i + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\t/**\n\t\t * Returns an array of annotations in the specified annotation model for the given range of text sorted by type.\n\t\t *\n\t\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model.\n\t\t * @param {Number} start the start offset of the range.\n\t\t * @param {Number} end the end offset of the range.\n\t\t * @return {orion.editor.Annotation[]} an annotation array.\n\t\t */\n\t\tgetAnnotationsByType: function(annotationModel, start, end) {\n\t\t\tvar iter = annotationModel.getAnnotations(start, end);\n\t\t\tvar annotation, annotations = [];\n\t\t\twhile (iter.hasNext()) {\n\t\t\t\tannotation = iter.next();\n\t\t\t\tif (!this.isAnnotationTypeVisible(annotation.type)) { continue; }\n\t\t\t\tannotations.push(annotation);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tannotations.sort(function(a, b) {\n\t\t\t\treturn self.getAnnotationTypePriority(a.type) - self.getAnnotationTypePriority(b.type);\n\t\t\t});\n\t\t\treturn annotations;\n\t\t},\n\t\t/**\n\t\t * Returns whether the receiver shows annotations of the specified type.\n\t\t *\n\t\t * @param {Object} type the annotation type\n\t\t * @returns {Boolean} whether the specified annotation type is shown\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#removeAnnotationType\n\t\t */\n\t\tisAnnotationTypeVisible: function(type) {\n\t\t\tif (this.getAnnotationTypePriority(type) === 0) return false;\n\t\t\treturn !this._visibleAnnotationTypes || this._visibleAnnotationTypes[type] === undefined || this._visibleAnnotationTypes[type] === true;\n\t\t},\n\t\t/**\n\t\t * Sets whether annotations of the given annotation type are visble. By default\n\t\t * all annotations added to the receiver are visible.\n\t\t * \n\t\t * @param {Object} type\n\t\t * @param {Boolean} visible\n\t\t * @since 14.0\n\t\t */\n\t\tsetAnnotationTypeVisible: function(type, visible) {\n\t\t\tif (typeof type === \"object\") {\n\t\t\t\tthis._visibleAnnotationTypes = type;\n\t\t\t} else {\n\t\t\t\tif (!this._visibleAnnotationTypes) this._visibleAnnotationTypes = {};\n\t\t\t\tthis._visibleAnnotationTypes[type] = visible;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Removes an annotation type from the receiver.\n\t\t *\n\t\t * @param {Object} type the annotation type to be removed\n\t\t *\n\t\t * @see orion.editor.AnnotationTypeList#addAnnotationType\n\t\t * @see orion.editor.AnnotationTypeList#isAnnotationTypeVisible\n\t\t */\n\t\tremoveAnnotationType: function(type) {\n\t\t\tif (!this._annotationTypes) { return; }\n\t\t\tfor (var i = 0; i < this._annotationTypes.length; i++) {\n\t\t\t\tif (this._annotationTypes[i] === type) {\n\t\t\t\t\tthis._annotationTypes.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/** @private */\n\tfunction binarySearch(array, offset, inclusive, low, high) {\n\t\tvar index;\n\t\tif (low === undefined) { low = -1; }\n\t\tif (high === undefined) { high = array.length; }\n\t\twhile (high - low > 1) {\n\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\tif (offset <= array[index].start) {\n\t\t\t\thigh = index;\n\t\t\t} else if (inclusive && offset < array[index].end) {\n\t\t\t\thigh = index;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tlow = index;\n\t\t\t}\n\t\t}\n\t\treturn high;\n\t}\n\t\n\t/**\n\t * Constructs an annotation model.\n\t * \n\t * @param {orion.editor.TextModel} textModel The text model.\n\t * \n\t * @class This object manages annotations for a <code>TextModel</code>.\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.Annotation}<br/>\n\t * {@link orion.editor.TextModel}<br/> \n\t * </p>\t\n\t * @name orion.editor.AnnotationModel\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction AnnotationModel(textModel) {\n\t\tthis._annotations = [];\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(modelChangedEvent) {\n\t\t\t\tself._onChanged(modelChangedEvent);\n\t\t\t}\n\t\t};\n\t\tthis.setTextModel(textModel);\n\t}\n\n\tAnnotationModel.prototype = /** @lends orion.editor.AnnotationModel.prototype */ {\n\t\t/**\n\t\t * Adds an annotation to the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation to be added.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\taddAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar index = binarySearch(annotations, annotation.start);\n\t\t\tannotations.splice(index, 0, annotation);\n\t\t\tannotation._annotationModel = this;\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [annotation],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Returns the text model.\n\t\t *\n\t\t * @return {orion.editor.TextModel} The text model.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#setTextModel\n\t\t */\n\t\tgetTextModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * @class This object represents an annotation iterator.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.AnnotationModel#getAnnotations}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.AnnotationIterator\n\t\t *\n\t\t * @property {Function} hasNext Determines whether there are more annotations in the iterator.\n\t\t * @property {Function} next Returns the next annotation in the iterator.\n\t\t */\n\t\t/**\n\t\t * Returns an iterator of annotations for the given range of text. If called with no parameters,\n\t\t * returns all annotations in the model.\n\t\t *\n\t\t * @param {Number} start the start offset of the range.\n\t\t * @param {Number} end the end offset of the range.\n\t\t * @return {orion.editor.AnnotationIterator} an annotation iterartor.\n\t\t */\n\t\tgetAnnotations: function(start, end) {\n\t\t\tvar annotations = this._annotations, current;\n\t\t\tvar i = 0, skip;\n\t\t\tif (start === undefined && end === undefined) {\n\t\t\t\tskip = function() {\n\t\t\t\t\treturn (i < annotations.length) ? annotations[i++] : null;\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t//TODO binary search does not work for range intersection when there are overlaping ranges, need interval search tree for this\n\t\t\t\tskip = function() {\n\t\t\t\t\twhile (i < annotations.length) {\n\t\t\t\t\t\tvar a =  annotations[i++];\n\t\t\t\t\t\tif ((start === a.start) || (a.start === a.end && a.end === end) || (start > a.start ? start < a.end : a.start < end)) {\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (a.start >= end) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t};\n\t\t\t}\n\t\t\tcurrent = skip();\n\t\t\treturn {\n\t\t\t\tnext: function() {\n\t\t\t\t\tvar result = current;\n\t\t\t\t\tif (result) { current = skip(); }\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\t\t\t\thasNext: function() {\n\t\t\t\t\treturn current !== null;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Notifies the annotation model that the given annotation has been modified.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the modified annotation.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t */\n\t\tmodifyAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar index = this._getAnnotationIndex(annotation);\n\t\t\tif (index < 0) { return; }\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: [annotation]\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Notifies all listeners that the annotation model has changed.\n\t\t *\n\t\t * @param {orion.editor.Annotation[]} added The list of annotation being added to the model.\n\t\t * @param {orion.editor.Annotation[]} changed The list of annotation modified in the model.\n\t\t * @param {orion.editor.Annotation[]} removed The list of annotation being removed from the model.\n\t\t * @param {ModelChangedEvent} textModelChangedEvent the text model changed event that trigger this change, can be null if the change was trigger by a method call (for example, {@link #addAnnotation}).\n\t\t */\n\t\tonChanged: function(e) {\n\t\t\treturn this.dispatchEvent(e);\n\t\t},\n\t\t/**\n\t\t * Removes all annotations of the given <code>type</code>. All annotations\n\t\t * are removed if the type is not specified.\n\t\t * <p>The annotation model listeners are notified of this change.  Only one changed event is generated.</p>\n\t\t *\n\t\t * @param {Object} type the type of annotations to be removed.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\tremoveAnnotations: function(type) {\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar removed, i;\n\t\t\tif (type) {\n\t\t\t\tremoved = [];\n\t\t\t\tfor (i = annotations.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar annotation = annotations[i];\n\t\t\t\t\tif (annotation.type === type) {\n\t\t\t\t\t\tannotations.splice(i, 1);\n\t\t\t\t\t\tremoved.splice(0, 0, annotation);\n\t\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tremoved = annotations;\n\t\t\t\tannotations = [];\n\t\t\t}\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: removed,\n\t\t\t\tadded: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Removes an annotation from the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation to be removed.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t */\n\t\tremoveAnnotation: function(annotation) {\n\t\t\tif (!annotation) { return; }\n\t\t\tvar index = this._getAnnotationIndex(annotation);\n\t\t\tif (index < 0) { return; }\n\t\t\tannotation._annotationModel = null;\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: this._annotations.splice(index, 1),\n\t\t\t\tadded: [],\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Removes and adds the specifed annotations to the annotation model.\n\t\t * <p>The annotation model listeners are notified of this change.  Only one changed event is generated.</p>\n\t\t *\n\t\t * @param {orion.editor.Annotation} remove the annotations to be removed.\n\t\t * @param {orion.editor.Annotation} add the annotations to be added.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#addAnnotation\n\t\t * @see orion.editor.AnnotationModel#removeAnnotation\n\t\t */\n\t\treplaceAnnotations: function(remove, add) {\n\t\t\tvar annotations = this._annotations, i, index, annotation, removed = [];\n\t\t\tif (remove) {\n\t\t\t\tfor (i = remove.length - 1; i >= 0; i--) {\n\t\t\t\t\tannotation = remove[i];\n\t\t\t\t\tindex = this._getAnnotationIndex(annotation);\n\t\t\t\t\tif (index < 0) { continue; }\n\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\tannotations.splice(index, 1);\n\t\t\t\t\tremoved.splice(0, 0, annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!add) { add = []; }\n\t\t\tfor (i = 0; i < add.length; i++) {\n\t\t\t\tannotation = add[i];\n\t\t\t\tindex = binarySearch(annotations, annotation.start);\n\t\t\t\tannotation._annotationModel = this;\n\t\t\t\tannotations.splice(index, 0, annotation);\n\t\t\t}\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tremoved: removed,\n\t\t\t\tadded: add,\n\t\t\t\tchanged: []\n\t\t\t};\n\t\t\t\n\t\t\tthis.onChanged(e);\n\t\t},\n\t\t/**\n\t\t * Sets the text model of the annotation model.  The annotation\n\t\t * model listens for changes in the text model to update and remove\n\t\t * annotations that are affected by the change.\n\t\t *\n\t\t * @param {orion.editor.TextModel} textModel the text model.\n\t\t *\n\t\t * @see orion.editor.AnnotationModel#getTextModel\n\t\t */\n\t\tsetTextModel: function(textModel) {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._model = textModel;\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\t_getAnnotationIndex: function(annotation) {\n\t\t\tvar annotations = this._annotations;\n\t\t\tvar index = binarySearch(annotations, annotation.start);\n\t\t\twhile (index < annotations.length && annotations[index].start === annotation.start) {\n\t\t\t\tif (annotations[index] === annotation) {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t\t/** @ignore */\n\t\t_onChanged: function(modelChangedEvent) {\n\t\t\tvar start = modelChangedEvent.start;\n\t\t\tvar addedCharCount = modelChangedEvent.addedCharCount;\n\t\t\tvar removedCharCount = modelChangedEvent.removedCharCount;\n\t\t\tvar annotations = this._annotations, end = start + removedCharCount;\n\t\t\t//TODO binary search does not work for range intersection when there are overlaping ranges, need interval search tree for this\n\t\t\tvar startIndex = 0;\n\t\t\tif (!(0 <= startIndex && startIndex < annotations.length)) { return; }\n\t\t\tvar e = {\n\t\t\t\ttype: \"Changed\", //$NON-NLS-0$\n\t\t\t\tadded: [],\n\t\t\t\tremoved: [],\n\t\t\t\tchanged: [],\n\t\t\t\ttextModelChangedEvent: modelChangedEvent\n\t\t\t};\n\t\t\tvar changeCount = addedCharCount - removedCharCount, i;\n\t\t\tfor (i = startIndex; i < annotations.length; i++) {\n\t\t\t\tvar annotation = annotations[i];\n\t\t\t\tif (annotation.start >= end) {\n\t\t\t\t\tannotation._oldStart = annotation.start;\n\t\t\t\t\tannotation._oldEnd = annotation.end;\n\t\t\t\t\tannotation.start += changeCount;\n\t\t\t\t\tannotation.end += changeCount;\n\t\t\t\t\te.changed.push(annotation);\n\t\t\t\t} else if (annotation.end <= start) {\n\t\t\t\t\t//nothing\n\t\t\t\t} else if (annotation.start <= start && end < annotation.end) {//Annotation renderer does not render the last character\n\t\t\t\t\tannotation._oldStart = annotation.start;\n\t\t\t\t\tannotation._oldEnd = annotation.end;\n\t\t\t\t\tannotation.end += changeCount;\n\t\t\t\t\te.changed.push(annotation);\n\t\t\t\t} else {\n\t\t\t\t\tannotations.splice(i, 1);\n\t\t\t\t\te.removed.push(annotation);\n\t\t\t\t\tannotation._annotationModel = null;\n\t\t\t\t\tif (annotation.expand) {\n\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t}\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.added.length > 0 || e.removed.length > 0 || e.changed.length > 0) {\n\t\t\t\tthis.onChanged(e);\n\t\t\t}\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(AnnotationModel.prototype);\n\n\t/**\n\t * Constructs a new styler for annotations.\n\t *\n\t * @param {orion.editor.TextView} view The styler view.\n\t * @param {orion.editor.AnnotationModel} view The styler annotation model.\n\t *\n\t * @class This object represents a styler for annotation attached to a text view.\n\t * @name orion.editor.AnnotationStyler\n\t * @borrows orion.editor.AnnotationTypeList#addAnnotationType as #addAnnotationType\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationTypePriority as #getAnnotationTypePriority\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationsByType as #getAnnotationsByType\n\t * @borrows orion.editor.AnnotationTypeList#isAnnotationTypeVisible as #isAnnotationTypeVisible\n\t * @borrows orion.editor.AnnotationTypeList#removeAnnotationType as #removeAnnotationType\n\t */\n\tfunction AnnotationStyler (view, annotationModel) {\n\t\tthis._view = view;\n\t\tthis._annotationModel = annotationModel;\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t},\n\t\t\tonLineStyle: function(e) {\n\t\t\t\tself._onLineStyle(e);\n\t\t\t},\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onAnnotationModelChanged(e);\n\t\t\t}\n\t\t};\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\tview.addEventListener(\"postLineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\tannotationModel.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t}\n\tAnnotationStyler.prototype = /** @lends orion.editor.AnnotationStyler.prototype */ {\n\t\t/**\n\t\t * Destroys the styler.\n\t\t * <p>\n\t\t * Removes all listeners added by this styler.\n\t\t * </p>\n\t\t */\n\t\tdestroy: function() {\n\t\t\tvar view = this._view;\n\t\t\tif (view) {\n\t\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tview.removeEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (annotationModel) {\n\t\t\t\tannotationModel.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tannotationModel = null;\n\t\t\t}\n\t\t},\n\t\t_mergeStyle: function(result, style) {\n\t\t\tif (style) {\n\t\t\t\tif (!result) { result = {}; }\n\t\t\t\tif (result.styleClass && style.styleClass && result.styleClass !== style.styleClass) {\n\t\t\t\t\tresult.styleClass += \" \" + style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tresult.styleClass = style.styleClass;\n\t\t\t\t}\n\t\t\t\tvar prop;\n\t\t\t\tif (style.tagName) {\n\t\t\t\t\tif (!result.tagName) {\n\t\t\t\t\t\tresult.tagName = style.tagName;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.style) {\n\t\t\t\t\tif (!result.style) { result.style  = {}; }\n\t\t\t\t\tfor (prop in style.style) {\n\t\t\t\t\t\tif (!result.style[prop]) {\n\t\t\t\t\t\t\tresult.style[prop] = style.style[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.attributes) {\n\t\t\t\t\tif (!result.attributes) { result.attributes  = {}; }\n\t\t\t\t\tfor (prop in style.attributes) {\n\t\t\t\t\t\tif (!result.attributes[prop]) {\n\t\t\t\t\t\t\tresult.attributes[prop] = style.attributes[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.html) {\n\t\t\t\t\tresult.html = style.html;\n\t\t\t\t}\n\t\t\t\tif (style.node) {\n\t\t\t\t\tresult.node = style.node;\n\t\t\t\t}\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_mergeStyleRanges: function(ranges, styleRange) {\n\t\t\tif (!ranges) {\n\t\t\t\tranges = [];\n\t\t\t}\n\t\t\tvar mergedStyle, i = binarySearch(ranges, styleRange.start, true);\n\t\t\tfor (; i<ranges.length && styleRange; i++) {\n\t\t\t\tvar range = ranges[i];\n\t\t\t\tif (styleRange.end <= range.start) { break; }\n\t\t\t\tif (styleRange.start >= range.end) { continue; }\n\t\t\t\tmergedStyle = this._mergeStyle({}, range.style);\n\t\t\t\tmergedStyle = this._mergeStyle(mergedStyle, styleRange.style);\n\t\t\t\tvar args = [];\n\t\t\t\targs.push(i, 1);\n\t\t\t\tif (styleRange.start < range.start) {\n\t\t\t\t\targs.push({start: styleRange.start, end: range.start, style: styleRange.style});\n\t\t\t\t}\n\t\t\t\tif (styleRange.start > range.start) {\n\t\t\t\t\targs.push({start: range.start, end: styleRange.start, style: range.style});\n\t\t\t\t}\n\t\t\t\targs.push({start: Math.max(range.start, styleRange.start), end: Math.min(range.end, styleRange.end), style: mergedStyle});\n\t\t\t\tif (styleRange.end < range.end) {\n\t\t\t\t\targs.push({start: styleRange.end, end: range.end, style: range.style});\n\t\t\t\t}\n\t\t\t\tif (styleRange.end > range.end) {\n\t\t\t\t\tstyleRange = {start: range.end, end: styleRange.end, style: styleRange.style};\n\t\t\t\t} else {\n\t\t\t\t\tstyleRange = null;\n\t\t\t\t}\n\t\t\t\tArray.prototype.splice.apply(ranges, args);\n\t\t\t}\n\t\t\tif (styleRange) {\n\t\t\t\tmergedStyle = this._mergeStyle({}, styleRange.style);\n\t\t\t\tranges.splice(i, 0, {start: styleRange.start, end: styleRange.end, style: mergedStyle});\n\t\t\t}\n\t\t\treturn ranges;\n\t\t},\n\t\t_onAnnotationModelChanged: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tvar self = this;\n\t\t\tvar model = view.getModel();\n\t\t\tfunction redrawRange(start, end) {\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\tif (start !== -1 && end !== -1) {\n\t\t\t\t\tview.redrawRange(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction redraw(changes, changed) {\n\t\t\t\tfor (var i = 0; i < changes.length; i++) {\n\t\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\t\tvar change = changes[i];\n\t\t\t\t\tredrawRange(change.start, change.end);\n\t\t\t\t\tif (changed && change._oldStart !== undefined && change._oldEnd) {\n\t\t\t\t\t\tredrawRange(change._oldStart, change._oldEnd);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tredraw(e.added);\n\t\t\tredraw(e.removed);\n\t\t\tredraw(e.changed, true);\n\t\t},\n\t\t_onDestroy: function(e) {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onLineStyle: function (e) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar viewModel = e.textView.getModel();\n\t\t\tvar baseModel = annotationModel.getTextModel();\n\t\t\tvar start = e.lineStart;\n\t\t\tvar end = e.lineStart + e.lineText.length;\n\t\t\tif (baseModel !== viewModel) {\n\t\t\t\tstart = viewModel.mapOffset(start);\n\t\t\t\tend = viewModel.mapOffset(end);\n\t\t\t}\n\t\t\tvar annotations = annotationModel.getAnnotations(start, end);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (!this.isAnnotationTypeVisible(annotation.type)) { continue; }\n\t\t\t\tif (annotation.rangeStyle) {\n\t\t\t\t\tvar annotationStart = annotation.start;\n\t\t\t\t\tvar annotationEnd = annotation.end;\n\t\t\t\t\tif (baseModel !== viewModel) {\n\t\t\t\t\t\tannotationStart = viewModel.mapOffset(annotationStart, true);\n\t\t\t\t\t\tannotationEnd = viewModel.mapOffset(annotationEnd, true);\n\t\t\t\t\t}\n\t\t\t\t\te.ranges = this._mergeStyleRanges(e.ranges, {start: annotationStart, end: annotationEnd, style: annotation.rangeStyle});\n\t\t\t\t}\n\t\t\t\tif (annotation.lineStyle) {\n\t\t\t\t\te.style = this._mergeStyle({}, e.style);\n\t\t\t\t\te.style = this._mergeStyle(e.style, annotation.lineStyle);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tAnnotationTypeList.addMixin(AnnotationStyler.prototype);\n\n\treturn {\n\t\tFoldingAnnotation: FoldingAnnotation,\n\t\tAnnotationType: AnnotationType,\n\t\tAnnotationTypeList: AnnotationTypeList,\n\t\tAnnotationModel: AnnotationModel,\n\t\tAnnotationStyler: AnnotationStyler\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine('orion/objects',[], function() {\n\tfunction mixin(target/*, source..*/) {\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\t\tfor (var j = 1, len = arguments.length; j < len; j++) {\n\t\t\tvar source = arguments[j];\n\t\t\tfor (var key in source) {\n\t\t\t\tif (hasOwnProperty.call(source, key)) {\n\t\t\t\t\ttarget[key] = source[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn target;\n\t}\n\n\t/**\n\t * @name orion.objects\n\t * @class Object-oriented helpers.\n\t */\n\treturn {\n\t\t/**\n\t\t * Creates a shallow clone of the given <code>object</code>.\n\t\t * @name orion.objects.clone\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object|Array} object The object to clone. Must be a \"normal\" Object or Array. Other built-ins,\n\t\t * host objects, primitives, etc, will not work.\n\t\t * @returns {Object|Array} A clone of <code>object</code>.\n\t\t */\n\t\tclone: function(object) {\n\t\t\tif (Array.isArray(object)) {\n\t\t\t\treturn Array.prototype.slice.call(object);\n\t\t\t}\n\t\t\tvar clone = Object.create(Object.getPrototypeOf(object));\n\t\t\tmixin(clone, object);\n\t\t\treturn clone;\n\t\t},\n\t\t/**\n\t\t * Mixes all <code>source</code>'s own enumerable properties into <code>target</code>. Multiple source objects\n\t\t * can be passed as varargs.\n\t\t * @name orion.objects.mixin\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object} target\n\t\t * @param {Object} source\n\t\t */\n\t\tmixin: mixin,\n\t\t/**\n\t\t * Wraps an object into an Array if necessary.\n\t\t * @name orion.objects.toArray\n\t\t * @function\n\t\t * @static\n\t\t * @param {Object} obj An object.\n\t\t * @returns {Array} Returns <code>obj</code> unchanged, if <code>obj</code> is an Array. Otherwise returns a 1-element Array\n\t\t * whose sole element is <code>obj</code>.\n\t\t */\n\t\ttoArray: function(o) {\n\t\t\treturn Array.isArray(o) ? o : [o];\n\t\t}\n\t};\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2009, 2017 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/editor\", [\n\t'i18n!orion/editor/nls/messages',\n\t'orion/editor/eventTarget',\n\t'orion/editor/tooltip',\n\t'orion/editor/annotations',\n\t'orion/objects',\n\t'orion/editor/util',\n\t'orion/util'\n], function(messages, mEventTarget, mTooltip, mAnnotations, objects, textUtil, util) {\n\t\n\tvar AT = mAnnotations.AnnotationType;\n\n\tvar HIGHLIGHT_ERROR_ANNOTATION = \"orion.annotation.highlightError\"; //$NON-NLS-0$\n\n\t/**\n\t * @name orion.editor.BaseEditor\n\t * @class This is the base interface for text and visual editors based on a text buffer.\n\t *\n\t * @description Creates a new Base Editor with the given options.\n\t * @param {Object} options Creation options for this editor.\n\t * @param {Object} options.domNode\n\t * @param {Object} options.statusReporter\n\t *\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\n\t */\n\tfunction BaseEditor(options) {\n\t\toptions = options || {};\n\t\tthis._domNode = options.domNode;\n\t\tthis._model = options.model;\n\t\tthis._undoStack = options.undoStack;\n\t\tthis._statusReporter = options.statusReporter;\n\t\tthis._title = null;\n\t\tvar that = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tthat.onChanged(e);\n\t\t\t}\n\t\t};\n\t\tif (this._model) {\n\t\t\tthis._model.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t}\n\t\tthis.checkDirty();\n\t}\n\tBaseEditor.prototype = /** @lends orion.editor.BaseEditor.prototype */ {\n\t\t/**\n\t\t * Destroys the editor. Uninstall the editor view.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis.uninstall();\n\t\t\tthis._statusReporter = this._domNode = null;\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\n\t\t/** @private */\n\t\tcheckDirty : function() {\n\t\t\tthis.setDirty(this._undoStack && !this._undoStack.isClean());\n\t\t},\n\t\t/**\n\t\t * Focus the the editor view. The default implementation does nothing.\n\t\t */\n\t\tfocus: function() {\n\t\t},\n\t\t/**\n\t\t * Returns the text model of the editor.\n\t\t *\n\t\t * @returns {orion.editor.TextModel} the text model of the view.\n\t\t */\n\t\tgetModel: function() {\n\t\t\treturn this._model;\n\t\t},\n\t\t/**\n\t\t * Returns the text for the given range.\n\t\t * <p>\n\t\t * The text does not include the character at the end offset.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t *\n\t\t * @see orion.editor.TextView#setText\n\t\t */\n\t\tgetText: function(start, end) {\n\t\t\treturn this.getModel().getText(start, end);\n\t\t},\n\t\t/**\n\t\t * Returns the editor title.\n\t\t *\n\t\t * @returns {String} the editor title.\n\t\t */\n\t\tgetTitle: function() {\n\t\t\treturn this._title;\n\t\t},\n\t\t/**\n\t\t * Returns the editor undo stack.\n\t\t *\n\t\t * @returns {orion.editor.UndoStack} the editor undo stack.\n\t\t */\n\t\tgetUndoStack: function() {\n\t\t\treturn this._undoStack;\n\t\t},\n\t\t/**\n\t\t * Creates the DOM hierarchy of the editor and add it to the document.\n\t\t */\n\t\tinstall: function() {\n\t\t\tthis.installed = true;\n\t\t},\n\t\t/**\n\t\t * Returns <code>true</code> if the editor is dirty; <code>false</code> otherwise.\n\t\t * @returns {Boolean} whether the editor is dirty\n\t\t */\n\t\tisDirty: function() {\n\t\t\tif (this._undoStack) return !this._undoStack.isClean();\n\t\t\treturn this._dirty;\n\t\t},\n\t\t/**\n\t\t * Marks the current state of the editor as clean. Meaning there are no unsaved modifications.\n\t\t */\n\t\tmarkClean: function() {\n\t\t\tthis.getUndoStack().markClean();\n\t\t\tthis.setDirty(false);\n\t\t},\n\t\t/**\n\t\t * Called when the dirty state of the editor changes.\n\t\t * @param {Event} dirtyChangedEvent\n\t\t */\n\t\tonDirtyChanged: function(dirtyChangedEvent) {\n\t\t\treturn this.dispatchEvent(dirtyChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Called when the editor's contents have been changed or saved.\n\t\t * @param {Event} inputChangedEvent\n\t\t */\n\t\tonInputChanged: function (inputChangedEvent) {\n\t\t\treturn this.dispatchEvent(inputChangedEvent);\n\t\t},\n\t\t/**\n\t\t * Called when the editor's text model has been changed.\n\t\t * @param {Event} inputChangedEvent\n\t\t * @callback\n\t\t */\n\t\tonChanged: function (modelChangedEvent) {\n\t\t\tthis.checkDirty();\n\t\t},\n\t\t/**\n\t\t * Report the message to the user.\n\t\t *\n\t\t * @param {String} message the message to show\n\t\t * @param {String} [type] the message type. Either normal or \"progress\" or \"error\";\n\t\t * @param {Boolean} [isAccessible] If <code>true</code>, a screen reader will read this message.\n\t\t * Otherwise defaults to the domNode default.\n\t\t */\n\t\treportStatus: function(message, type, isAccessible) {\n\t\t\tif (this._statusReporter) {\n\t\t\t\tthis._statusReporter(message, type, isAccessible);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Resizes the editor view. The default implementation does nothing.\n\t\t */\n\t\tresize: function() {\n\t\t},\n\t\t/**\n\t\t * Sets whether the editor is dirty.\n\t\t *\n\t\t * @param {Boolean} dirty\n\t\t */\n\t\tsetDirty: function(dirty) {\n\t\t\tthis._setSyntaxCheckRequired(dirty);\n\t\t\tif (this._dirty === dirty) { return; }\n\t\t\tthis._dirty = dirty;\n\t\t\tthis.onDirtyChanged({type: \"DirtyChanged\"}); //$NON-NLS-0$\n\t\t},\n\t\t/**\n\t\t * Sets a flag indicating whether the editor contents have been modified since\n\t\t * the last syntax check (validation) operation.\n\t\t * \n\t\t * @function\n\t\t * @param required {Boolean} what to set the flag to, true indicates the editor is dirty and needs syntax checking\n\t\t */\n\t\t_setSyntaxCheckRequired: function _setSyntaxCheckRequired(required){\n\t\t\tthis._syntaxCheckRequired = required;\n\t\t},\n\t\t/**\n\t\t * Returns the state of the syntax check required flag, indicating whether the editor contents have\n\t\t * been modified since the last syntax check (validation) operation.\n\t\t * \n\t\t * @function\n\t\t * @returns returns {Boolean} whether the flag has been set indicating a syntax check (validation) operation is required\n\t\t */\n\t\t_isSyntaxCheckRequired: function _isSyntaxCheckRequired() {\n\t\t\treturn this._syntaxCheckRequired;\n\t\t},\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_setModelText: function(contents) {\n\t\t\tif (this._model) {\n\t\t\t\tthis._model.setText(contents);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the editor's contents.\n\t\t *\n\t\t * @param {String} title the editor title\n\t\t * @param {String} message an error message\n\t\t * @param {String} contents the editor contents\n\t\t * @param {Boolean} contentsSaved whether the editor contents was saved.\n\t\t */\n\t\tsetInput: function(title, message, contents, contentsSaved) {\n\t\t\tthis._title = title;\n\t\t\tif (!contentsSaved) {\n\t\t\t\tif (message) {\n\t\t\t\t\tthis.reportStatus(message, \"error\"); //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tif (contents !== null && contents !== undefined) {\n\t\t\t\t\t\tif (typeof contents === \"string\") { //$NON-NLS-0$\n\t\t\t\t\t\t\tthis._setModelText(contents);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this._undoStack) {\n\t\t\t\t\t\t\tthis._undoStack.reset();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.checkDirty();\n\t\t\tthis.onInputChanged({\n\t\t\t\ttype: \"InputChanged\", //$NON-NLS-0$\n\t\t\t\ttitle: title,\n\t\t\t\tmessage: message,\n\t\t\t\tcontents: contents,\n\t\t\t\tcontentsSaved: contentsSaved\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Replaces the text in the given range with the given text.\n\t\t * <p>\n\t\t * The character at the end offset is not replaced.\n\t\t * </p>\n\t\t *\n\t\t * @param {String} text the new text.\n\t\t * @param {Number} [start=0] the start offset of text range.\n\t\t * @param {Number} [end=char count] the end offset of text range.\n\t\t */\n\t\tsetText: function(text, start, end) {\n\t\t\tthis.getModel().setText(text, start, end);\n\t\t},\n\t\t/**\n\t\t * Removes the DOM hierarchy of the editor from the document.\n\t\t */\n\t\tuninstall: function() {\n\t\t\tthis.installed = false;\n\t\t}\n\t};\n\tmEventTarget.EventTarget.addMixin(BaseEditor.prototype);\n\n\t/**\n\t * @name orion.editor.Editor\n\t * @augments orion.editor.BaseEditor\n\t * @class An <code>Editor</code> is a user interface for editing text that provides additional features over the basic {@link orion.editor.TextView}.\n\t * Some of <code>Editor</code>'s features include:\n\t * <ul>\n\t * <li>Additional actions and key bindings for editing text</li>\n\t * <li>Content assist</li>\n\t * <li>Find and Incremental Find</li>\n\t * <li>Rulers for displaying line numbers and annotations</li>\n\t * <li>Status reporting</li>\n\t * </ul>\n\t *\n\t * @description Creates a new Editor with the given options.\n\t * @param {Object} options Options controlling the features of this Editor.\n\t * @param {Object} options.annotationFactory\n\t * @param {Object} options.contentAssistFactory\n\t * @param {Object} options.domNode\n\t * @param {Object} options.keyBindingFactory\n\t * @param {Object} options.lineNumberRulerFactory\n\t * @param {Object} options.zoomRulerFactory\n\t * @param {Object} options.foldingRulerFactory\n\t * @param {Object} options.statusReporter\n\t * @param {Object} options.textViewFactory\n\t * @param {Object} options.undoStackFactory\n\t * @param {Object} options.textDNDFactory\n\t * @param {Object} options.hoverFactory\n\t */\n\tfunction Editor(options) {\n\t\toptions = options || {};\n\t\tBaseEditor.call(this, options);\n\t\tthis._textViewFactory = options.textViewFactory;\n\t\tthis._undoStackFactory = options.undoStackFactory;\n\t\tthis._textDNDFactory = options.textDNDFactory;\n\t\tthis._annotationFactory = options.annotationFactory;\n\t\tthis._zoomRulerFactory = options.zoomRulerFactory;\n\t\tthis._foldingRulerFactory = options.foldingRulerFactory;\n\t\tthis._lineNumberRulerFactory = options.lineNumberRulerFactory;\n\t\tthis._contentAssistFactory = options.contentAssistFactory;\n\t\tthis._keyBindingFactory = options.keyBindingFactory;\n\t\tthis._hoverFactory = options.hoverFactory;\n\t\tthis._syntaxHighlighter = options.syntaxHighlighter;\n\t\tthis._annotationStyler = null;\n\t\tthis._annotationModel = null;\n\t\tthis._annotationRuler = null;\n\t\tthis._lineNumberRuler = null;\n\t\tthis._overviewRuler = null;\n\t\tthis._zoomRuler = null;\n\t\tthis._foldingRuler = null;\n\t\tthis._contentAssist = null;\n\t}\n\tEditor.prototype = new BaseEditor();\n\tobjects.mixin(Editor.prototype, /** @lends orion.editor.Editor.prototype */ {\n\t\t/**\n\t\t * Destroys the editor.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tBaseEditor.prototype.destroy.call(this);\n\t\t\tthis._textViewFactory = this._undoStackFactory = this._textDNDFactory = \n\t\t\tthis._annotationFactory = this._foldingRulerFactory = this._lineNumberRulerFactory = \n\t\t\tthis._contentAssistFactory = this._keyBindingFactory = this._hoverFactory = this._zoomRulerFactory = null;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation model of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationModel}\n\t\t */\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationRuler}\n\t\t */\n\t\tgetAnnotationRuler: function() {\n\t\t\treturn this._annotationRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether annotation ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetAnnotationRulerVisible: function() {\n\t\t\treturn this._annotationRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation styler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationStyler}\n\t\t */\n\t\tgetAnnotationStyler: function() {\n\t\t\treturn this._annotationStyler;\n\t\t},\n\t\t/**\n\t\t * Returns the content assist of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetContentAssist: function() {\n\t\t\treturn this._contentAssist;\n\t\t},\n\t\t/**\n\t\t * Returns the folding ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.FoldingRuler}\n\t\t */\n\t\tgetFoldingRuler: function() {\n\t\t\treturn this._foldingRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether folding ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetFoldingRulerVisible: function() {\n\t\t\treturn this._foldingRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Creates and add a FoldingAnnotation to the editor.\n\t\t *\n\t\t * @param {Number} start The start offset of the annotation in the text model.\n\t\t * @param {Number} end The end offset of the annotation in the text model.\n\t\t * @returns {orion.editor.FoldingAnnotation} The FoldingAnnotation added to the editor.\n\t\t */\n\t\taddFoldingAnnotation: function(start, end) {\n\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\tif(annotationModel) {\n\t\t\t\tvar foldingAnnotation = new mAnnotations.FoldingAnnotation(start, end, this.getTextView().getModel());\n\t\t\t\tannotationModel.addAnnotation(foldingAnnotation);\n\t\t\t\treturn foldingAnnotation;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t/**\n\t\t * Returns the line number ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetLineNumberRuler: function() {\n\t\t\treturn this._lineNumberRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether lines ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetLineNumberRulerVisible: function() {\n\t\t\treturn this._lineNumberRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the Tooltip instance for this editor\n\t\t *\n\t\t * @returns {orion.editor.Tooltip}\n\t\t*/\n\t\tgetTooltip: function() {\n\t\t\treturn mTooltip.Tooltip.getTooltip(this._textView, this);\n\t\t},\n\t\t/**\n\t\t * Returns the zoom ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.LineNumberRuler}\n\t\t */\n\t\tgetZoomRuler: function() {\n\t\t\treturn this._zoomRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the whether zoom ruler of the editor is showning.\n\t\t *\n\t\t * @returns {Boolean}\n\t\t * @since 12\n\t\t */\n\t\tgetZoomRulerVisible: function() {\n\t\t\treturn this._zoomRulerVisible;\n\t\t},\n\t\t/**\n\t\t * Returns the base text model of this editor.\n\t\t *\n\t\t * @returns {orion.editor.TextModel}\n\t\t */\n\t\tgetModel: function() {\n\t\t\tif (!this._textView) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar model = this._textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model;\n\t\t},\n\t\t/**\n\t\t * Returns the overview ruler of the editor.\n\t\t *\n\t\t * @returns {orion.editor.OverviewRuler}\n\t\t */\n\t\tgetOverviewRuler: function() {\n\t\t\treturn this._overviewRuler;\n\t\t},\n\t\t/**\n\t\t * Returns the underlying <code>TextView</code> used by this editor.\n\t\t * @returns {orion.editor.TextView} the editor text view.\n\t\t */\n\t\tgetTextView: function() {\n\t\t\treturn this._textView;\n\t\t},\n\t\t/**\n\t\t * Returns the editor's key modes.\n\t\t *\n\t\t * @returns {Array} the editor key modes.\n\t\t */\n\t\tgetKeyModes: function() {\n\t\t\treturn this._textView.getKeyModes();\n\t\t},\n\t\t/**\n\t\t * Returns the editor source code actions.\n\t\t *\n\t\t * @returns {orion.editor.sourceCodeActions}\n\t\t */\n\t\tgetSourceCodeActions: function() {\n\t\t\treturn this._sourceCodeActions;\n\t\t},\n\t\t/**\n\t\t * Returns the editor linked mode.\n\t\t *\n\t\t * @returns {orion.editor.LinkedMode}\n\t\t */\n\t\tgetLinkedMode: function() {\n\t\t\treturn this._linkedMode;\n\t\t},\n\t\t/**\n\t\t * Returns the editor text actions.\n\t\t *\n\t\t * @returns {orion.editor.textActions}\n\t\t */\n\t\tgetTextActions: function() {\n\t\t\treturn this._textActions;\n\t\t},\n\t\t/**\n\t\t * Gives focus to the text view.\n\t\t */\n\t\tfocus: function() {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.focus();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Resizes the text view.\n\t\t */\n\t\tresize: function() {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.resize();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the annotation ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetAnnotationRulerVisible: function(visible, force) {\n\t\t\tif (this._annotationRulerVisible === visible && !force) { return; }\n\t\t\tthis._annotationRulerVisible = visible;\n\t\t\tif (!this._annotationRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._annotationRuler, 0);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._annotationRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the folding ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetFoldingRulerVisible: function(visible, force) {\n\t\t\tif (this._foldingRulerVisible === visible && !force) { return; }\n\t\t\tif (!visible) {\n\t\t\t\tvar textActions = this.getTextActions();\n\t\t\t\tif (textActions) {\n\t\t\t\t\ttextActions.expandAnnotations(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._foldingRulerVisible = visible;\n\t\t\tif (!this._foldingRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (!textView.getModel().getBaseModel) { return; }\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._foldingRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._foldingRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the line numbering ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetLineNumberRulerVisible: function(visible, force) {\n\t\t\tif (this._lineNumberRulerVisible === visible && !force) { return; }\n\t\t\tthis._lineNumberRulerVisible = visible;\n\t\t\tif (!this._lineNumberRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._lineNumberRuler, !this._annotationRulerVisible ? 0 : 1);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._lineNumberRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the overview ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetOverviewRulerVisible: function(visible, force) {\n\t\t\tif (this._overviewRulerVisible === visible && !force) { return; }\n\t\t\tthis._overviewRulerVisible = visible;\n\t\t\tif (!this._overviewRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._overviewRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._overviewRuler);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets whether the zoom ruler is visible.\n\t\t *\n\t\t * @param {Boolean} visible <code>true</code> to show ruler, <code>false</code> otherwise\n\t\t */\n\t\tsetZoomRulerVisible: function(visible, force) {\n\t\t\tif (this._zoomRulerVisible === visible && !force) { return; }\n\t\t\tthis._zoomRulerVisible = visible;\n\t\t\tif (!this._zoomRuler) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (visible) {\n\t\t\t\ttextView.addRuler(this._zoomRuler);\n\t\t\t} else {\n\t\t\t\ttextView.removeRuler(this._zoomRuler);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sets which annotations types are shown in the annotation ruler.  Annotations are visible by default.\n\t\t * \n\t\t * @param {Object} types a hash table mapping annotation type to visibility (i.e. AnnotationType.ANNOTATION_INFO -> true).\n\t\t * @since 14.0\n\t\t */\n\t\tsetAnnotationTypesVisible: function(types) {\n\t\t\tif (textUtil.compare(this._annotationTypesVisible, types)) return;\n\t\t\tthis._annotationTypesVisible = types;\n\t\t\tif (!this._annotationRuler || !this._textView || !this._annotationRulerVisible) { return; }\n\t\t\tthis._annotationRuler.setAnnotationTypeVisible(types);\n\t\t\tthis._textView.redrawLines(0, undefined, this._annotationRuler);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sets which annotations types are shown in the overview ruler.  Annotations are visible by default.\n\t\t * \n\t\t * @param {Object} types a hash table mapping annotation type to visibility (i.e. AnnotationType.ANNOTATION_INFO -> true).\n\t\t * @since 14.0\n\t\t */\n\t\tsetOverviewAnnotationTypesVisible: function(types) {\n\t\t\tif (textUtil.compare(this._overviewAnnotationTypesVisible, types)) return;\n\t\t\tthis._overviewAnnotationTypesVisible = types;\n\t\t\tif (!this._overviewRuler || !this._textView || !this._overviewRulerVisible) { return; }\n\t\t\tthis._overviewRuler.setAnnotationTypeVisible(types);\n\t\t\tthis._textView.redrawLines(0, undefined, this._overviewRuler);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sets which annotations types are shown in the text.  Annotations are visible by default.\n\t\t * \n\t\t * @param {Object} types a hash table mapping annotation type to visibility (i.e. AnnotationType.ANNOTATION_INFO -> true).\n\t\t * @since 14.0\n\t\t */\n\t\tsetTextAnnotationTypesVisible: function(types) {\n\t\t\tif (textUtil.compare(this._textAnnotationTypesVisible, types)) return;\n\t\t\tthis._textAnnotationTypesVisible = types;\n\t\t\tif (!this._annotationStyler || !this._textView) { return; }\n\t\t\tthis._annotationStyler.setAnnotationTypeVisible(types);\n\t\t\tthis._textView.redrawLines(0, undefined);\n\t\t},\n\n\t\tmapOffset: function(offset, _parent) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\toffset = model.mapOffset(offset, _parent);\n\t\t\t}\n\t\t\treturn offset;\n\t\t},\n\t\t/**\n\t\t * @name getLineAtOffset\n\t\t * @description Returns the line number corresponding to the given offset in the source\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.Editor\n\t\t * @param {Number} offset The offset into the source\n\t\t * @returns {Number} The line number corresponding to the given offset or <code>-1</code> if out of range\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineAtOffset: function(offset) {\n\t\t\treturn this.getModel().getLineAtOffset(this.mapOffset(offset));\n\t\t},\n\t\t/**\n\t\t * @name getLineStart\n\t\t * @description Compute the editor start offset of the given line number\n\t\t * @function\n\t\t * @public\n\t\t * @memberof orion.editor.TextView\n\t\t * @param {Number} line The line number in the editor\n\t\t * @returns {Number} Returns the start offset of the given line number in the editor.\n\t\t * @since 5.0\n\t\t */\n\t\tgetLineStart: function(line) {\n\t\t\treturn this.getModel().getLineStart(line);\n\t\t},\n\t\tgetCaretOffset: function() {\n\t\t\treturn this.mapOffset(this._textView.getCaretOffset());\n\t\t},\n\t\t\n\t\t/**\n\t\t * Returns the text view selection text.\n\t\t * <p>\n\t\t * If there are multiple selection ranges, the result is concatenated with the specified delimiter.\n\t\t * </p>\n\t\t * \n\t\t * @param {String} delimiter The offset into the editor\n\t\t * @returns {String} the view selection text\n\t\t * @since 10.0\n\t\t * @see orion.editor.TextView#setSelection\n\t\t */\n\t\tgetSelectionText: function(delimiter) {\n\t\t\tvar textView = this._textView;\n\t\t\treturn textView.getSelectionText(delimiter);\n\t\t},\n\t\t\n\t\tgetSelection: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tvar selection = textView.getSelection();\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tselection.start = model.mapOffset(selection.start);\n\t\t\t\tselection.end = model.mapOffset(selection.end);\n\t\t\t}\n\t\t\treturn selection;\n\t\t},\n\n\t\tgetSelections: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tvar selections = textView.getSelections();\n\t\t\tselections.forEach(function(selection) {\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tselection.start = model.mapOffset(selection.start);\n\t\t\t\t\tselection.end = model.mapOffset(selection.end);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn selections;\n\t\t},\n\n\t\tgetStyleAccessor: function() {\n\t\t\tvar styleAccessor = null;\n\t\t\tif (this._syntaxHighlighter) {\n\t\t\t\tvar styler = this._syntaxHighlighter.getStyler();\n\t\t\t\tif (styler && styler.getStyleAccessor) {\n\t\t\t\t\tstyleAccessor = styler.getStyleAccessor();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn styleAccessor;\n\t\t},\n\n\t\t_expandOffset: function(offset) {\n\t\t\tvar model = this._textView.getModel();\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel || !model.getBaseModel) { return; }\n\t\t\tvar annotations = annotationModel.getAnnotations(offset, offset + 1);\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (annotation.type === AT.ANNOTATION_FOLDING) {\n\t\t\t\t\tif (annotation.expand) {\n\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsetCaretOffset: function(caretOffset, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tthis._expandOffset(caretOffset);\n\t\t\t\tcaretOffset = model.mapOffset(caretOffset, true);\n\t\t\t}\n\t\t\ttextView.setCaretOffset(caretOffset, show, callback);\n\t\t},\n\n\t\tsetText: function(text, start, end, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tif (start !== undefined) {\n\t\t\t\t\tthis._expandOffset(start);\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t}\n\t\t\t\tif (end !== undefined) {\n\t\t\t\t\tthis._expandOffset(end);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttextView.setText(text, start, end, show, callback);\n\t\t},\n\n\t\tsetSelection: function(start, end, show, callback) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tthis._expandOffset(start);\n\t\t\t\tthis._expandOffset(end);\n\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t}\n\t\t\ttextView.setSelection(start, end, show, callback);\n\t\t},\n\t\tsetSelections: function(ranges, show, callback) {\n\t\t\tvar that = this;\n\t\t\tvar textView = this._textView;\n\t\t\tvar model = textView.getModel();\n\t\t\tranges.forEach(function(range) {\n\t\t\t\tvar start = range.start;\n\t\t\t\tvar end = range.end;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tthat._expandOffset(start);\n\t\t\t\t\tthat._expandOffset(end);\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\trange.start = start;\n\t\t\t\trange.end = end;\n\t\t\t});\n\t\t\ttextView.setSelections(ranges, show, callback);\n\t\t},\n\n\t\t/**\n\t\t * @param {Number} start\n\t\t * @param {Number} [end]\n\t\t * @param {function} [callback] if callback is specified, scrolling to show the selection is animated and callback is called when the animation is done.\n\t\t * @param {Boolean} [focused=true] whether the text view should be focused when the selection is done.\n\t\t * @private\n\t\t * @deprecated use #setSelection instead\n\t\t */\n\t\tmoveSelection: function(start, end, callback, focused) {\n\t\t\tend = end || start;\n\t\t\tvar textView = this._textView;\n\t\t\tthis.setSelection(start, end, 1 / 3, function() {\n\t\t\t\tif (focused === undefined || focused) {\n\t\t\t\t\ttextView.focus();\n\t\t\t\t}\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/** @private */\n\t\t_getTooltipInfo: function(x, y) {\n\t\t\tvar textView = this._textView;\n\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\tif (!annotationModel) { return null; }\n\t\t\tvar annotationStyler = this._annotationStyler;\n\t\t\tif (!annotationStyler) { return null; }\n\t\t\tif (!textView.isValidTextPosition(x, y)) { return null; }\n\t\t\tvar offset = textView.getOffsetAtLocation(x, y);\n\t\t\tif (offset === -1) { return null; }\n\t\t\toffset = this.mapOffset(offset);\n\t\t\tvar annotations = annotationStyler.getAnnotationsByType(annotationModel, offset, offset + 1);\n\t\t\tvar rangeAnnotations = [];\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tif (annotations[i].rangeStyle) {\n\t\t\t\t\trangeAnnotations.push(annotations[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar info = {\n\t\t\t\tcontents: rangeAnnotations,\n\t\t\t\tposition: \"below\", //$NON-NLS-0$\n\t\t\t\tcontext: {source: \"editor\", offset: offset} //$NON-NLS-0$\n\t\t\t};\n\t\t\treturn info;\n\t\t},\n\n\t\t/** @private */\n\t\t_highlightCurrentLine: function(newSelections, oldSelections) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) { return; }\n\t\t\tvar textView = this._textView;\n\t\t\tif (textView.getOptions(\"singleMode\")) { return; } //$NON-NLS-0$\n\t\t\toldSelections = Array.isArray(oldSelections) ? oldSelections : [oldSelections];\n\t\t\tnewSelections = Array.isArray(newSelections) ? newSelections : [newSelections];\n\t\t\tvar model = textView.getModel();\n\t\t\tfunction getHighlightLines(selections) {\n\t\t\t\tvar lines = {};\n\t\t\t\tif (selections && selections.some(function(selection) {\n\t\t\t\t\tif (selection && selection.isEmpty()) {\n\t\t\t\t\t\tlines[model.getLineAtOffset(selection.start).toString()] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t})) return {};\n\t\t\t\treturn lines;\n\t\t\t}\n\t\t\tvar oldLines = getHighlightLines(oldSelections);\n\t\t\tvar newLines = getHighlightLines(newSelections);\n\t\t\tfunction compare(o, n) {\n\t\t\t\tfor (var p1 in o) {\n\t\t\t\t\tif (!n[p1]) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!(compare(oldLines, newLines) || compare(newLines, oldLines))) return;\n\t\t\tvar remove = this._currentLineAnnotations;\n\t\t\tvar add = [];\n\t\t\tfor (var p in newLines) {\n\t\t\t\tvar lineIndex = p >> 0;\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tvar type = AT.ANNOTATION_CURRENT_LINE;\n\t\t\t\tvar annotation = AT.createAnnotation(type, start, end);\n\t\t\t\tadd.push(annotation);\n\t\t\t}\n\t\t\tthis._currentLineAnnotations = add;\n\t\t\tannotationModel.replaceAnnotations(remove, add);\n\t\t},\n\n\t\t/**\n\t\t * Creates the underlying TextView and installs the editor's features.\n\t\t */\n\t\tinstallTextView: function() {\n\t\t\tthis.install();\n\t\t},\n\n\t\t/**\n\t\t * Highlight a line.\n\t\t * @param {number} line\n\t\t */\n\t\thighlightLine: function(line) {\n\t\t\t// Find any existing annotation\n\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\tvar textModel = this.getModel();\n\t\t\tif (textModel.getBaseModel) {\n\t\t\t\ttextModel = textModel.getBaseModel();\n\t\t\t}\n\t\t\tvar type = AT.ANNOTATION_HIGHLIGHTED_LINE;\n\t\t\tvar annotations = annotationModel.getAnnotations(0, textModel.getCharCount());\n\t\t\tvar remove = null;\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (annotation.type === type) {\n\t\t\t\t\tremove = annotation;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lineStart = textModel.getLineStart(line);\n\t\t\tvar lineEnd = textModel.getLineEnd(line);\n\t\t\tvar add = AT.createAnnotation(type, lineStart, lineEnd);\n\t\t\t// Replace to or add the new annotation\n\t\t\tif (remove) {\n\t\t\t\tannotationModel.replaceAnnotations([remove], [add]);\n\t\t\t} else {\n\t\t\t\tannotationModel.addAnnotation(add);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Unhightlight the highlighted line\n\t\t */\n\t\tunhighlightLine: function() {\n\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\tvar textModel = this.getModel();\n\t\t\tif (textModel.getBaseModel) {\n\t\t\t\ttextModel = textModel.getBaseModel();\n\t\t\t}\n\t\t\tvar type = AT.ANNOTATION_HIGHLIGHTED_LINE;\n\t\t\tvar annotations = annotationModel.getAnnotations(0, textModel.getCharCount());\n\t\t\tvar remove = null;\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tvar annotation = annotations.next();\n\t\t\t\tif (annotation.type === type) {\n\t\t\t\t\tremove = annotation;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (remove) {\n\t\t\t\tannotationModel.removeAnnotation(remove);\n\t\t\t}\n\t\t},\n\n\t\tinstall : function() {\n\t\t\tif (this._textView) { return; }\n\n\t\t\t// Create textView and install optional features\n\t\t\tthis._textView = this._textViewFactory(this);\n\t\t\tif (this._undoStackFactory) {\n\t\t\t\tthis._undoStack = this._undoStackFactory.createUndoStack(this);\n\t\t\t\tthis._textView.setOptions({undoStack: this._undoStack});\n\t\t\t\tthis.checkDirty();\n\t\t\t}\n\t\t\tif (this._textDNDFactory) {\n\t\t\t\tthis._textDND = this._textDNDFactory.createTextDND(this, this._undoStack);\n\t\t\t}\n\t\t\tif (this._contentAssistFactory) {\n\t\t\t\tvar contentAssistMode = this._contentAssistFactory.createContentAssistMode(this);\n\t\t\t\tthis._contentAssist = contentAssistMode.getContentAssist();\n\t\t\t}\n\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._textView, this);\n\t\t\tif (this._hoverFactory) {\n\t\t\t\tthis._hover = this._hoverFactory.createHover(this);\n\t\t\t\ttooltip.hover = this._hover;\n\t\t\t}\n\t\t\t\n\t\t\tvar editor = this, textView = this._textView;\n\n\t\t\tvar that = this;\n\t\t\tthis._listener = {\n\t\t\t\tonModelChanged: /* @callback */ function(e) {\n\t\t\t\t\tthat.checkDirty();\n\t\t\t\t},\n\t\t\t\tonMouseOver: function(e) {\n\t\t\t\t\tthat._listener.onMouseMove(e);\n\t\t\t\t},\n\t\t\t\tonMouseDown: /* @callback */ function(e) {\n\t\t\t\t\tthat._listener.mouseDown = true;\n\t\t\t\t},\n\t\t\t\tonMouseUp: /* @callback */ function(e) {\n\t\t\t\t\tthat._listener.mouseDown = false;\n\t\t\t\t},\n\t\t\t\tonMouseMove: function(e) {\n\t\t\t\t\tif (!tooltip || that._listener.mouseDown) { return; }\n\n\t\t\t\t\t// Prevent spurious mouse event (e.g. on a scroll)\t\t\t\t\t\n\t\t\t\t\tif (e.event.clientX === that._listener.lastMouseX\n\t\t\t\t\t\t&& e.event.clientY === that._listener.lastMouseY) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthat._listener.lastMouseX = e.event.clientX;\n\t\t\t\t\tthat._listener.lastMouseY = e.event.clientY;\n\n\t\t\t\t\tif (that._hoverTimeout) {\n\t\t\t\t\t\twindow.clearTimeout(that._hoverTimeout);\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t}\n\t\t\t\t\tthat._hoverTimeout = window.setTimeout(function() {\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Re-check incase editor closed...\n\t\t\t\t\t\tif (!that._listener){\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\ttooltip.onHover({\n\t\t\t\t\t\t\ty: e.y,\n\t\t\t\t\t\t\tx: e.x,\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tgetTooltipInfo: function() {\n\t\t\t\t\t\t\t\treturn that._getTooltipInfo(this.x, this.y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, e.x, e.y);\n\t\t\t\t\t}, 175);\n\t\t\t\t},\n\t\t\t\tonMouseOut: /* @callback */ function(e) {\n\t\t\t\t\t// When mouse leaves the editor, ignore any pending onMouseMove events\n\t\t\t\t\tif (that._hoverTimeout) {\n\t\t\t\t\t\twindow.clearTimeout(that._hoverTimeout);\n\t\t\t\t\t\tthat._hoverTimeout = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSelection: function(e) {\n\t\t\t\t\tif (tooltip) { tooltip.hide(); }\n\t\t\t\t\tthat._updateCursorStatus();\n\t\t\t\t\tthat._highlightCurrentLine(e.newValue, e.oldValue);\n\t\t\t\t}\n\t\t\t};\n\t\t\ttextView.addEventListener(\"ModelChanged\", this._listener.onModelChanged); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseOver\", this._listener.onMouseOver); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseOut\", this._listener.onMouseOut); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseUp\", this._listener.onMouseUp); //$NON-NLS-0$\n\t\t\ttextView.addEventListener(\"MouseMove\", this._listener.onMouseMove); //$NON-NLS-0$\n\n\t\t\t// Set up keybindings\n\t\t\tif (this._keyBindingFactory) {\n\t\t\t\tvar keyBindings;\n\t\t\t\tif (typeof this._keyBindingFactory === \"function\") { //$NON-NLS-0$\n\t\t\t\t\tkeyBindings = this._keyBindingFactory(this, this.getKeyModes(), this._undoStack, this._contentAssist);\n\t\t\t\t} else {\n\t\t\t\t\tkeyBindings = this._keyBindingFactory.createKeyBindings(editor, this._undoStack, this._contentAssist);\n\t\t\t\t}\n\t\t\t\tif (keyBindings) {\n\t\t\t\t\tthis._textActions = keyBindings.textActions;\n\t\t\t\t\tthis._linkedMode = keyBindings.linkedMode;\n\t\t\t\t\tthis._sourceCodeActions = keyBindings.sourceCodeActions;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar rulerOnDblClick = /* @callback */ function(lineIndex, e) {\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\taddRemoveBookmark.call(this, lineIndex, e);\n\t\t\t\t} else if (e.altKey) {\n\t\t\t\t\taddRemoveConditionalBreakpoint.call(this, lineIndex, e);\n\t\t\t\t} else {\n\t\t\t\t\taddRemoveBreakpoint.call(this, lineIndex, e);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar addRemoveBookmark = /* @callback */ function(lineIndex, e) {\n\t\t\t\taddRemoveAnnotation.call(this, lineIndex, e, AT.ANNOTATION_BOOKMARK);\n\t\t\t};\n\n\t\t\tvar addRemoveBreakpoint = /* @callback */ function(lineIndex, e) {\n\t\t\t\taddRemoveAnnotation.call(this, lineIndex, e, AT.ANNOTATION_BREAKPOINT);\n\t\t\t};\n\n\t\t\tvar addRemoveConditionalBreakpoint = /* @callback */ function(lineIndex, e) {\n\t\t\t\taddRemoveAnnotation.call(this, lineIndex, e, AT.ANNOTATION_CONDITIONAL_BREAKPOINT);\n\t\t\t};\n\n\t\t\t/** @callback */\n\t\t\tfunction addRemoveAnnotation(lineIndex, e, annotationType) {\n\t\t\t\tif (lineIndex === undefined) { return; }\n\t\t\t\tif (lineIndex === -1) { return; }\n\t\t\t\tvar view = this.getView();\n\t\t\t\tvar viewModel = view.getModel();\n\t\t\t\tvar annotationModel = this.getAnnotationModel();\n\t\t\t\tvar lineStart = editor.mapOffset(viewModel.getLineStart(lineIndex));\n\t\t\t\tvar lineEnd = editor.mapOffset(viewModel.getLineEnd(lineIndex));\n\t\t\t\tvar annotations = annotationModel.getAnnotations(lineStart, lineEnd);\n\t\t\t\tvar bookmark = null;\n\t\t\t\twhile (annotations.hasNext()) {\n\t\t\t\t\tvar annotation = annotations.next();\n\t\t\t\t\tif (annotation.type === annotationType) {\n\t\t\t\t\t\tbookmark = annotation;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (bookmark) {\n\t\t\t\t\teditor.dispatchEvent({\n\t\t\t\t\t\t// This event will only be triggered by the user double clicking the side bar. (i.e. add/remove bookmark or breakpoint)\n\t\t\t\t\t\ttype: 'UserAnnotationModified',\n\t\t\t\t\t\tadded: [],\n\t\t\t\t\t\tremoved: [bookmark]\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbookmark = AT.createAnnotation(annotationType, lineStart, lineEnd, editor.getText(lineStart, lineEnd));\n\t\t\t\t\teditor.dispatchEvent({\n\t\t\t\t\t\ttype: 'UserAnnotationModified',\n\t\t\t\t\t\tadded: [bookmark],\n\t\t\t\t\t\tremoved: []\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Create rulers, annotation model and styler\n\t\t\tif (this._annotationFactory) {\n\t\t\t\tvar textModel = textView.getModel();\n\t\t\t\tif (textModel.getBaseModel) { textModel = textModel.getBaseModel(); }\n\t\t\t\tthis._annotationModel = this._annotationFactory.createAnnotationModel(textModel);\n\t\t\t\tif (this._annotationModel) {\n\t\t\t\t\tvar styler = this._annotationStyler = this._annotationFactory.createAnnotationStyler(textView, this._annotationModel);\n\t\t\t\t\tif (styler) {\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_SEARCH);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_MATCHING_SEARCH);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_SEARCH_RANGE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_INFO);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_MATCHING_BRACKET);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_BRACKET);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_LINE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_HIGHLIGHTED_LINE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_READ_OCCURRENCE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_WRITE_OCCURRENCE);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_SELECTED_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_CURRENT_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(AT.ANNOTATION_LINKED_GROUP);\n\t\t\t\t\t\tstyler.addAnnotationType(HIGHLIGHT_ERROR_ANNOTATION);\n\n\t\t\t\t\t\tstyler.setAnnotationTypeVisible(this._textAnnotationTypesVisible);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar rulers = this._annotationFactory.createAnnotationRulers(this._annotationModel);\n\t\t\t\tvar ruler = this._annotationRuler = rulers.annotationRuler;\n\t\t\t\tif (ruler) {\n\t\t\t\t\truler.onDblClick = rulerOnDblClick;\n\t\t\t\t\truler.setMultiAnnotationOverlay({html: \"<div class='annotationHTML overlay'></div>\"}); //$NON-NLS-0$\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_INFO);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_TASK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_BOOKMARK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_BREAKPOINT);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CONDITIONAL_BREAKPOINT);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\t\t\t\t\t\n\t\t\t\t\truler.setAnnotationTypeVisible(this._annotationTypesVisible);\n\t\t\t\t}\n\t\t\t\tthis.setAnnotationRulerVisible(this._annotationRulerVisible || this._annotationRulerVisible === undefined, true);\n\n\t\t\t\t// Overview Ruler Annotation Type\n\t\t\t\truler = this._overviewRuler = rulers.overviewRuler;\n\t\t\t\tif (ruler) {\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_SEARCH);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_MATCHING_SEARCH);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_READ_OCCURRENCE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WRITE_OCCURRENCE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_BLAME);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_ERROR);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_WARNING);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_INFO);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_TASK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_BOOKMARK);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_BREAKPOINT);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CONDITIONAL_BREAKPOINT);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_MATCHING_BRACKET);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_BRACKET);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_CURRENT_LINE);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\t\truler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\t\t\t\t\t\n\t\t\t\t\truler.setAnnotationTypeVisible(this._overviewAnnotationTypesVisible);\n\t\t\t\t}\n\t\t\t\tthis.setOverviewRulerVisible(this._overviewRulerVisible || this._overviewRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tif (this._zoomRulerFactory) {\n\t\t\t\tthis._zoomRuler = this._zoomRulerFactory.createZoomRuler(this._annotationModel);\n\t\t\t\tthis.setZoomRulerVisible(this._zoomRulerVisible, true);\n\t\t\t}\n\n\t\t\tif (this._lineNumberRulerFactory) {\n\t\t\t\tthis._lineNumberRuler = this._lineNumberRulerFactory.createLineNumberRuler(this._annotationModel);\n\t\t\t\tthis._lineNumberRuler.addAnnotationType(AT.ANNOTATION_CURRENT_BLAME);\n\t\t\t\tthis._lineNumberRuler.addAnnotationType(AT.ANNOTATION_BLAME);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_ADDED);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_MODIFIED);\n\t\t        this._lineNumberRuler.addAnnotationType(AT.ANNOTATION_DIFF_DELETED);\n\t\t\t\tthis._lineNumberRuler.onDblClick = rulerOnDblClick;\n\t\t\t\tthis.setLineNumberRulerVisible(this._lineNumberRulerVisible || this._lineNumberRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tif (this._foldingRulerFactory) {\n\t\t\t\tthis._foldingRuler = this._foldingRulerFactory.createFoldingRuler(this._annotationModel);\n\t\t\t\tthis._foldingRuler.addAnnotationType(AT.ANNOTATION_FOLDING);\n\t\t\t\tthis.setFoldingRulerVisible(this._foldingRulerVisible || this._foldingRulerVisible === undefined, true);\n\t\t\t}\n\n\t\t\tvar textViewInstalledEvent = {\n\t\t\t\ttype: \"TextViewInstalled\", //$NON-NLS-0$\n\t\t\t\ttextView: textView\n\t\t\t};\n\t\t\tthis.dispatchEvent(textViewInstalledEvent);\n\t\t\tBaseEditor.prototype.install.call(this);\n\t\t},\n\n\t\t/**\n\t\t * Destroys the underlying TextView.\n\t\t */\n\t\tuninstallTextView: function() {\n\t\t\tthis.uninstall();\n\t\t},\n\n\t\tuninstall: function() {\n\t\t\tvar textView = this._textView;\n\t\t\tif (!textView) { return; }\n\n\t\t\ttextView.destroy();\n\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.setTextModel(null);\n\t\t\t}\n\t\t\tthis._textView = this._undoStack = this._textDND = this._contentAssist =\n\t\t\t\tthis._listener = this._annotationModel = this._annotationStyler =\n\t\t\t\tthis._annotationRuler = this._overviewRuler = this._zoomRuler = this._lineNumberRuler =\n\t\t\t\tthis._foldingRuler = this._currentLineAnnotations = this._title = null;\n\t\t\tthis._dirty = false;\n\t\t\tthis._foldingRulerVisible = this._overviewRulerVisible = this._zoomRulerVisible =\n\t\t\t\tthis._lineNumberRulerVisible = this._annotationRulerVisible = undefined;\n\n\t\t\tvar textViewUninstalledEvent = {\n\t\t\t\ttype: \"TextViewUninstalled\", //$NON-NLS-0$\n\t\t\t\ttextView: textView\n\t\t\t};\n\t\t\tthis.dispatchEvent(textViewUninstalledEvent);\n\t\t\tBaseEditor.prototype.uninstall.call(this);\n\t\t},\n\n\t\t_updateCursorStatus: function() {\n\t\t\t// If we are in a mode and it owns status reporting, we bail out from reporting the cursor position.\n\t\t\tvar keyModes = this.getKeyModes();\n\t\t\tfor (var i=0; i<keyModes.length; i++) {\n\t\t\t\tvar mode = keyModes[i];\n\t\t\t\tif (mode.isActive() && mode.isStatusActive && mode.isStatusActive()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar _status;\n\t\t\tvar model = this.getModel();\n\t\t\tvar selections = this.getSelections();\n\t\t\tif (selections.length > 1) {\n\t\t\t\t_status = util.formatMessage(messages.multiSelections, selections.length);\n\t\t\t} else {\n\t\t\t\tvar caretOffset = selections[0].getCaret();\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caretOffset);\n\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\tvar offsetInLine = caretOffset - lineStart;\n\t\t\t\tif (localStorage.languageTools){\n\t\t\t\t\t_status = util.formatMessage(messages.lineColumnOffset, lineIndex + 1, offsetInLine + 1, caretOffset);\n\t\t\t\t} else {\n\t\t\t\t\t_status = util.formatMessage(messages.lineColumn, lineIndex + 1, offsetInLine + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.reportStatus(_status);\n\t\t},\n\n\t\tshowAnnotations: function(annotations, types, createAnnotation, getType) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar remove = [], add = [];\n\t\t\tvar model = annotationModel.getTextModel();\n\t\t\tvar iter = annotationModel.getAnnotations(), annotation;\n\t\t\twhile (iter.hasNext()) {\n\t\t\t\tannotation = iter.next();\n\t\t\t\tif (types.indexOf(annotation.type) !== -1) {\n\t\t\t\t\tif (annotation.creatorID === this) {\n\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (annotations) {\n\t\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\t\tannotation = annotations[i];\n\t\t\t\t\tif (!annotation) { continue; }\n\t\t\t\t\tif (createAnnotation) {\n\t\t\t\t\t\tannotation = createAnnotation(annotation);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar start, end, lineIndex, lineStart;\n\t\t\t\t\t\tif (annotation.lineStart && annotation.lineEnd){\n\t\t\t\t\t\t\tstart = model.getLineStart(annotation.lineStart);\n\t\t\t\t\t\t\t// If the closing line number of the modified range is on the last line,\n\t\t\t\t\t\t\t// get the line ending offset of the previous line\n\t\t\t\t\t\t\tend = model.getLineCount() === annotation.lineEnd\n\t\t\t\t\t\t\t\t\t\t? model.getLineEnd(annotation.lineEnd - 1)\n\t\t\t\t\t\t\t\t\t\t: model.getLineStart(annotation.lineEnd);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (typeof annotation.line === \"number\") { //$NON-NLS-0$\n\t\t\t\t\t\t\t// line/column\n\t\t\t\t\t\t\tlineIndex = annotation.line - 1;\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tstart = lineStart + annotation.start - 1;\n\t\t\t\t\t\t\tend = lineStart + annotation.end - 1;\n\t\t\t\t\t\t} else if (annotation.range) {\n\t\t\t\t\t\t\tlineIndex = annotation.range.start.line;\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tstart = lineStart + annotation.range.start.character;\n\t\t\t\t\t\t\tlineIndex = annotation.range.end.line;\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tend = lineStart + annotation.range.end.character;\n \t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// document offsets\n\t\t\t\t\t\t\tstart = annotation.start;\n\t\t\t\t\t\t\tend = annotation.end;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar type = getType(annotation);\n\t\t\t\t\t\tif (!type) { continue; }\n\t\t\t\t\t\tannotation = AT.createAnnotation(type, start, end, annotation.description);\n\t\t\t\t\t}\n\t\t\t\t\tannotation.id = annotations[i].id; //allow consumers to tag the annotation with their own identifier\n\t\t\t\t\tif(annotations[i].data) {\n\t\t\t\t\t\tannotation.data = annotations[i].data;\n\t\t\t\t\t}\n\t\t\t\t\tannotation.creatorID = this;\n\t\t\t\t\tadd.push(annotation);\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotationModel.replaceAnnotations(remove, add);\n\t\t},\n\n\t\tshowProblems: function(problems) {\n\t\t\tthis.showAnnotations(problems, [\n\t\t\t\tAT.ANNOTATION_ERROR,\n\t\t\t\tAT.ANNOTATION_WARNING,\n\t\t\t\tAT.ANNOTATION_TASK,\n\t\t\t\tAT.ANNOTATION_INFO\n\t\t\t], null, function(annotation) {\n\t\t\t\tswitch (annotation.severity) {\n\t\t\t\t\tcase \"error\": return AT.ANNOTATION_ERROR; //$NON-NLS-0$\n\t\t\t\t\tcase \"warning\": return AT.ANNOTATION_WARNING; //$NON-NLS-0$\n\t\t\t\t\tcase \"task\": return AT.ANNOTATION_TASK; //$NON-NLS-0$\n\t\t\t\t\tcase \"info\": return AT.ANNOTATION_INFO;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t});\n\t\t},\n\n\t\tshowOccurrences: function(occurrences) {\n\t\t\tthis.showAnnotations(occurrences, [\n\t\t\t\tAT.ANNOTATION_READ_OCCURRENCE,\n\t\t\t\tAT.ANNOTATION_WRITE_OCCURRENCE\n\t\t\t], null, function(annotation) {\n\t\t\t\treturn annotation.readAccess ? AT.ANNOTATION_READ_OCCURRENCE : AT.ANNOTATION_WRITE_OCCURRENCE;\n\t\t\t});\n\t\t},\n\n\t\tshowBlame : function(blameMarkers) {\n\t\t\tvar blameRGB = this._blameRGB;\n\t\t\tvar doc = this.getTextView().getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\n\t\t\tif (!blameRGB) {\n\t\t\t\tvar div = util.createElement(doc, \"div\"); //$NON-NLS-0$\n\t\t\t\tdiv.className = \"annotation blame\"; //$NON-NLS-0$\n\t\t\t\tdoc.body.appendChild(div);\n\t\t\t\tvar win = doc.defaultView || doc.parentWindow;\n\t\t\t\tvar blameStyle = win.getComputedStyle(div);\n\t\t\t\tvar color = blameStyle.getPropertyValue(\"background-color\"); //$NON-NLS-0$\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t\tvar i1 = color.indexOf(\"(\"); //$NON-NLS-0$\n\t\t\t\tvar i2 = color.indexOf(\")\"); //$NON-NLS-0$\n\t\t\t\tcolor = color.substring(i1 + 1, i2);\n\t\t\t\tthis._blameRGB = blameRGB = color.split(\",\").slice(0,3); //$NON-NLS-0$\n\t\t\t}\n\t\t\tvar createGroup = function() {\n\t\t\t\tvar annotation = mAnnotations.AnnotationType.createAnnotation(this.groupType, this.start, this.end, this.title);\n\t\t\t\tannotation.style = objects.mixin({}, annotation.style);\n\t\t\t\tannotation.style.style = objects.mixin({}, annotation.style.style);\n\t\t\t\tannotation.style.style.backgroundColor = \"\";\n\t\t\t\tthis.groupAnnotation = annotation;\n\t\t\t\tannotation.blame = this.blame;\n\t\t\t\tannotation.html = this.html;\n\t\t\t\tannotation.creatorID = this.creatorID;\n\t\t\t\treturn annotation;\n\t\t\t};\n\t\t\tvar title = function() {\n\t\t\t\tvar titleDiv = util.createElement(doc, \"div\"); //$NON-NLS-0$\n\t\t\t\ttitleDiv.className = \"tooltipTitle\"; //$NON-NLS-0$\n\t\t\t\tvar index = this.blame.Message.indexOf(\"\\n\"); //$NON-NLS-0$\n\t\t\t\tif (index === -1) { index = this.blame.Message.length; }\n\t\t\t\tvar commitLink = util.createElement(doc, \"a\"); //$NON-NLS-0$\n\t\t\t\tcommitLink.href = this.blame.CommitLink;\n\t\t\t\tif(util.isElectron){\n\t\t\t\t\tcommitLink.target = \"_blank\";\n\t\t\t\t}\n\t\t\t\tcommitLink.appendChild(doc.createTextNode(this.blame.Message.substring(0, index)));\n\t\t\t\ttitleDiv.appendChild(commitLink);\n\t\t\t\ttitleDiv.appendChild(util.createElement(doc, \"br\")); //$NON-NLS-0$\n\t\t\t\ttitleDiv.appendChild(doc.createTextNode(util.formatMessage(messages.committerOnTime, this.blame.AuthorName, this.blame.Time)));\n\t\t\t\treturn titleDiv;\n\t\t\t};\n\t\t\tvar model = this.getModel();\n\t\t\tthis.showAnnotations(blameMarkers, [\n\t\t\t\tAT.ANNOTATION_BLAME,\n\t\t\t\tAT.ANNOTATION_CURRENT_BLAME\n\t\t\t], function (blameMarker) {\n\t\t\t\tvar start = model.getLineStart(blameMarker.Start - 1);\n\t\t\t\tvar end = model.getLineEnd(blameMarker.End - 1, true);\n\t\t\t\tvar annotation = mAnnotations.AnnotationType.createAnnotation(AT.ANNOTATION_BLAME, start, end, title);\n\t\t\t\tvar blameColor = blameRGB.slice(0);\n\t\t\t\tblameColor.push(blameMarker.Shade);\n\t\t\t\tannotation.style = objects.mixin({}, annotation.style);\n\t\t\t\tannotation.style.style = objects.mixin({}, annotation.style.style);\n\t\t\t\tannotation.style.style.backgroundColor = \"rgba(\" + blameColor.join() + \")\"; //$NON-NLS-0$ //$NON-NLS-1$\n\t\t\t\tannotation.groupId = blameMarker.Name;\n\t\t\t\tannotation.groupType = AT.ANNOTATION_CURRENT_BLAME;\n\t\t\t\tannotation.createGroupAnnotation = createGroup;\n\t\t\t\tannotation.html = '<img class=\"annotationHTML blame\" src=\"' + blameMarker.AuthorImage + '\"/>'; //$NON-NLS-0$ //$NON-NLS-1$\n\t\t\t\tannotation.blame = blameMarker;\n\t\t\t\treturn annotation;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Display git diff annotation on the editor's annotation ruler and overview ruler.\n\t\t *\n\t\t * @param diffs [] with types \"added\", \"modified\", \"deleted\"\n\t\t * \t\tEach property in diffs contains an array of objects { lineStart, lineEnd } that\n\t\t * \t\tprovides the starting and ending line index for the specified property.\n\t\t */\n\t\tshowDiffAnnotations: function(diffs) {\n\t\t\tthis.showAnnotations(diffs, [\n\t\t\t\tAT.ANNOTATION_DIFF_ADDED,\n\t\t\t\tAT.ANNOTATION_DIFF_MODIFIED,\n\t\t\t\tAT.ANNOTATION_DIFF_DELETED\n\t\t\t], null, function(annotation) {\n\t\t\t\tif(annotation.type === \"added\")//$NON-NLS-0$\n\t\t\t\t\treturn AT.ANNOTATION_DIFF_ADDED;\n\t\t\t\telse if (annotation.type === \"modified\")//$NON-NLS-0$\n\t\t\t\t\treturn AT.ANNOTATION_DIFF_MODIFIED;\n\t\t\t\treturn AT.ANNOTATION_DIFF_DELETED; // assume deleted if not added or modified\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Reveals and selects a portion of text.\n\t\t * @param {Number} start\n\t\t * @param {Number} end\n\t\t * @param {Number} line\n\t\t * @param {Number} offset\n\t\t * @param {Number} length\n\t\t */\n\t\tshowSelection: function(start, end, line, offset, len) {\n\t\t\t// We use typeof because we need to distinguish the number 0 from an undefined or null parameter\n\t\t\tif (typeof(start) === \"number\") { //$NON-NLS-0$\n\t\t\t\tif (typeof(end) !== \"number\") { //$NON-NLS-0$\n\t\t\t\t\tend = start;\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(start, end);\n\t\t\t\treturn true;\n\t\t\t} else if (typeof(line) === \"number\") { //$NON-NLS-0$\n\t\t\t\tvar model = this.getModel();\n\t\t\t\tvar pos = model.getLineStart(line-1);\n\t\t\t\tif (typeof(offset) === \"number\") { //$NON-NLS-0$\n\t\t\t\t\tpos = pos + offset;\n\t\t\t\t}\n\t\t\t\tif (typeof(len) !== \"number\") { //$NON-NLS-0$\n\t\t\t\t\tlen = 0;\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(pos, pos+len);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_setModelText: function(contents) {\n\t\t\tif (this._textView) {\n\t\t\t\tthis._textView.setText(contents);\n\t\t\t\tthis._textView.getModel().setLineDelimiter(\"auto\"); //$NON-NLS-0$\n\t\t\t\tthis._highlightCurrentLine(this._textView.getSelections());\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sets the editor's noFocus flag.\n\t\t *\n\t\t * @param {Boolean} if true, does not set focus on the editor.\n\t\t * @param {Boolean} noFocus\n\t\t */\n\t\tsetNoFocus: function(noFocus) {\n\t\t\tthis._noFocus = noFocus;\n\t\t},\n\t\t/**\n\t\t * Sets the editor's contents.\n\t\t *\n\t\t * @param {String} title\n\t\t * @param {String} message\n\t\t * @param {String} contents\n\t\t * @param {Boolean} contentsSaved\n\t\t * @param {Boolean} noFocus\n\t\t */\n\t\tsetInput: function(title, message, contents, contentsSaved, noFocus) {\n\t\t\tBaseEditor.prototype.setInput.call(this, title, message, contents, contentsSaved);\n\t\t\tif (this._textView && !contentsSaved && !noFocus && !this._noFocus) {\n\t\t\t\tthis._textView.focus();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Reveals a line in the editor, and optionally selects a portion of the line.\n\t\t * @param {Number} line - document base line index\n\t\t * @param {Number|String} column\n\t\t * @param {Number} [end]\n\t\t */\n\t\tonGotoLine: function(line, column, end, callback) {\n\t\t\tif (this._textView) {\n\t\t\t\tvar model = this.getModel();\n\t\t\t\tline = Math.max(0, Math.min(line, model.getLineCount() - 1));\n\t\t\t\tvar lineStart = model.getLineStart(line);\n\t\t\t\tvar start = 0;\n\t\t\t\tif (end === undefined) {\n\t\t\t\t\tend = 0;\n\t\t\t\t}\n\t\t\t\tif (typeof column === \"string\") { //$NON-NLS-0$\n\t\t\t\t\tvar index = model.getLine(line).indexOf(column);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tstart = index;\n\t\t\t\t\t\tend = start + column.length;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstart = column;\n\t\t\t\t\tvar lineLength = model.getLineEnd(line) - lineStart;\n\t\t\t\t\tstart = Math.min(start, lineLength);\n\t\t\t\t\tend = Math.min(end, lineLength);\n\t\t\t\t}\n\t\t\t\tthis.moveSelection(lineStart + start, lineStart + end, callback);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tBaseEditor: BaseEditor,\n\t\tEditor: Editor\n\t};\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/find\", [ //$NON-NLS-0$\r\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\r\n\t'orion/keyBinding', //$NON-NLS-0$\r\n\t'orion/editor/keyModes', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/regex', //$NON-NLS-0$\r\n\t'orion/objects', //$NON-NLS-0$\r\n\t'orion/Deferred', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(messages, mKeyBinding, mKeyModes, mAnnotations, mRegex, objects, Deferred, util) {\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction IncrementalFind(editor) {\r\n\t\tvar textView = editor.getTextView();\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.editor = editor;\r\n\t\tthis._active = false;\r\n\t\tthis._success = true;\r\n\t\tthis._ignoreSelection = false;\r\n\t\tthis._prefix = \"\";\r\n\t\t\r\n\t\ttextView.setAction(\"incrementalFindCancel\", function() { //$NON-NLS-0$\r\n\t\t\tthis.setActive(false);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"incrementalFindBackspace\", function() { //$NON-NLS-0$\r\n\t\t\treturn this._backspace();\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis._listener = {\r\n\t\t\tonVerify: function(e){\r\n\t\t\t\tvar editor = self.editor;\r\n\t\t\t\tvar model = editor.getModel();\r\n\t\t\t\tvar start = editor.mapOffset(e.start), end = editor.mapOffset(e.end);\r\n\t\t\t\tvar txt = model.getText(start, end);\r\n\t\t\t\tvar prefix = self._prefix;\r\n\t\t\t\t// TODO: mRegex is pulled in just for this one call so we can get case-insensitive search\r\n\t\t\t\t// is it really necessary\r\n\t\t\t\tvar match = prefix.match(new RegExp(\"^\" + mRegex.escape(txt), \"i\")); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tif (match && match.length > 0) {\r\n\t\t\t\t\tprefix = self._prefix += e.text;\r\n\t\t\t\t\tself._success = true;\r\n\t\t\t\t\tself._status();\r\n\t\t\t\t\tself.find(self._forward, true);\r\n\t\t\t\t\te.text = null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonSelection: function() {\r\n\t\t\t\tif (!self._ignoreSelection) {\r\n\t\t\t\t\tself.setActive(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tIncrementalFind.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(IncrementalFind.prototype, {\r\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"incrementalFindBackspace\", keyBinding: new KeyBinding(8)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindCancel\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindReverse\", keyBinding: new KeyBinding(38)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFind\", keyBinding: new KeyBinding(40)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFindReverse\", keyBinding: new KeyBinding('k', true, true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"incrementalFind\", keyBinding: new KeyBinding('k', true)}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\tfind: function(forward, incremental) {\r\n\t\t\tthis._forward = forward;\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\tthis.setActive(true);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar prefix = this._prefix;\r\n\t\t\tif (prefix.length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar start;\r\n\t\t\tif (forward) {\r\n\t\t\t\tif (this._success) {\r\n\t\t\t\t\tstart = incremental ? this._start : editor.getCaretOffset() + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstart = 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this._success) {\r\n\t\t\t\t\tstart = incremental ? this._start : editor.getCaretOffset();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstart = model.getCharCount() - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tDeferred.when(editor.getModel().find({\r\n\t\t\t\tstring: prefix,\r\n\t\t\t\tstart: start,\r\n\t\t\t\treverse: !forward,\r\n\t\t\t\tcaseInsensitive: prefix.toLowerCase() === prefix}), \r\n\t\t\t\tfunction(iterator) {\r\n\t\t\t\t\tvar findResult = iterator.next();\r\n\t\t\t\t\tif (findResult) {\r\n\t\t\t\t\t\tif (!incremental) {\r\n\t\t\t\t\t\t\tthis._start = start;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._success = true;\r\n\t\t\t\t\t\tthis._ignoreSelection = true;\r\n\t\t\t\t\t\teditor.moveSelection(forward ? findResult.start : findResult.end, forward ? findResult.end : findResult.start);\r\n\t\t\t\t\t\tthis._ignoreSelection = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._success = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._status();\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tisActive: function() {\r\n\t\t\treturn this._active;\r\n\t\t},\r\n\t\tisStatusActive: function() {\r\n\t\t\treturn this.isActive();\r\n\t\t},\r\n\t\tsetActive: function(active) {\r\n\t\t\tif (this._active === active) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._active = active;\r\n\t\t\tthis._prefix = \"\";\r\n\t\t\tthis._success = true;\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tthis._start = this.editor.getCaretOffset();\r\n\t\t\tthis.editor.setCaretOffset(this._start);\r\n\t\t\tif (this._active) {\r\n\t\t\t\ttextView.addEventListener(\"Verify\", this._listener.onVerify); //$NON-NLS-0$\r\n\t\t\t\ttextView.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\r\n\t\t\t\ttextView.addKeyMode(this);\r\n\t\t\t} else {\r\n\t\t\t\ttextView.removeEventListener(\"Verify\", this._listener.onVerify); //$NON-NLS-0$\r\n\t\t\t\ttextView.removeEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\r\n\t\t\t\ttextView.removeKeyMode(this);\r\n\t\t\t}\r\n\t\t\tthis._status();\r\n\t\t},\r\n\t\t_backspace: function() {\r\n\t\t\tvar prefix = this._prefix;\r\n\t\t\tprefix = this._prefix = prefix.substring(0, prefix.length-1);\r\n\t\t\tif (prefix.length === 0) {\r\n\t\t\t\tthis._success = true;\r\n\t\t\t\tthis._ignoreSelection = true;\r\n\t\t\t\tthis.editor.setCaretOffset(this.editor.getSelection().start);\r\n\t\t\t\tthis._ignoreSelection = false;\r\n\t\t\t\tthis._status();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn this.find(this._forward, true);\r\n\t\t},\r\n\t\t_status: function() {\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\tthis.editor.reportStatus(\"\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar msg;\r\n\t\t\tif (this._forward) {\r\n\t\t\t\tmsg = this._success ? messages.incrementalFindStr : messages.incrementalFindStrNotFound;\r\n\t\t\t} else {\r\n\t\t\t\tmsg = this._success ? messages.incrementalFindReverseStr : messages.incrementalFindReverseStrNotFound;\r\n\t\t\t}\r\n\t\t\tmsg = util.formatMessage(msg, this._prefix);\r\n\t\t\tthis.editor.reportStatus(msg, this._success ? \"\" : \"error\"); //$NON-NLS-0$\r\n\t\t}\r\n\t});\r\n\texports.IncrementalFind = IncrementalFind;\r\n\t\r\n\t\r\n\tfunction Find(editor, undoStack, options) {\r\n\t\tif (!editor) { return; }\t\r\n\t\tthis._editor = editor;\r\n\t\tthis._undoStack = undoStack;\r\n\t\tthis._showAll = true;\r\n\t\tthis._selectedLines = false;\r\n\t\tthis._visible = false;\r\n\t\tthis._caseInsensitive = true;\r\n\t\tthis._wrap = true;\r\n\t\tthis._wholeWord = false;\r\n\t\tthis._incremental = true;\r\n\t\tthis._regex = false;\r\n\t\tthis._findAfterReplace = true;\r\n\t\tthis._hideAfterFind = false;\r\n\t\tthis._reverse = false;\r\n\t\tthis._start = undefined;\r\n\t\tthis._end = undefined;\r\n\t\tthis._timer = undefined;\r\n\t\tthis._lastString = \"\";\r\n\t\tvar that = this;\r\n\t\tthis._listeners = {\r\n\t\t\tonEditorFocus: function(e) {\r\n\t\t\t\tthat._removeCurrentAnnotation(e);\r\n\t\t\t\tthat.setOptions({selectedLines: false});\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.setOptions(options);\r\n\t}\r\n\tFind.prototype = {\r\n\t\tfind: function (forward, tempOptions, incremental) {\r\n\t\t\tthis.setOptions({\r\n\t\t\t\treverse : !forward\r\n\t\t\t});\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tvar count;\r\n\t\t\tif (tempOptions) {\r\n\t\t\t\tstring = tempOptions.findString || string;\r\n\t\t\t\tcount =  tempOptions.count;\r\n\t\t\t}\r\n\t\t\tvar savedOptions = this.getOptions();\r\n\t\t\tthis.setOptions(tempOptions);\r\n\t\t\tvar startOffset = incremental ? this._startOffset : this.getStartOffset();\r\n\t\t\treturn this._doFind(string, startOffset, count).then(function(result) {\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tif (!incremental) {\r\n\t\t\t\t\t\tthis._startOffset = result.start;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.setOptions(savedOptions);\r\n\t\t\t\tif (this._hideAfterFind) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tgetStartOffset: function() {\r\n\t\t\tif(this.isRangeSearch()) {\r\n\t\t\t\tvar where = this._editor.getCaretOffset();\r\n\t\t\t\tif (this._reverse) {\r\n\t\t\t\t\twhere = this._editor.getSelection().start -1;\r\n\t\t\t\t}\r\n\t\t\t\tif(where >= this._searchRangeModel.start && where <= this._searchRangeModel.end) {\r\n\t\t\t\t\treturn where;\r\n\t\t\t\t} \r\n\t\t\t\treturn this._searchRangeModel.start;\r\n\t\t\t}\r\n\t\t\tif (this._reverse) {\r\n\t\t\t\treturn this._editor.getSelection().start - 1;\r\n\t\t\t}\r\n\t\t\treturn this._editor.getCaretOffset();\r\n\t\t},\r\n\t\tgetFindString: function() {\r\n\t\t\tvar selection = this._editor.getSelection();\r\n\t\t\tvar searchString = this._editor.getText(selection.start, selection.end);\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tsearchString = mRegex.escape(searchString);\r\n\t\t\t}\r\n\t\t\treturn searchString || this._lastString;\r\n\t\t},\r\n\t\tgetOptions: function() {\r\n\t\t\treturn {\r\n\t\t\t\tshowAll: this._showAll, \r\n\t\t\t\tcaseInsensitive: this._caseInsensitive, \r\n\t\t\t\twrap: this._wrap, \r\n\t\t\t\twholeWord: this._wholeWord, \r\n\t\t\t\tincremental: this._incremental,\r\n\t\t\t\tregex: this._regex,\r\n\t\t\t\tfindAfterReplace: this._findAfterReplace,\r\n\t\t\t\thideAfterFind: this._hideAfterFind,\r\n\t\t\t\treverse: this._reverse,\r\n\t\t\t\tfindCallback: this._findCallback,\r\n\t\t\t\tstart: this._start,\r\n\t\t\t\tend: this._end\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetReplaceString: function() {\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tthis._visible = false;\r\n\t\t\tif (this._savedOptions) {\r\n\t\t\t\tthis.setOptions(this._savedOptions.pop());\r\n\t\t\t\tif (this._savedOptions.length === 0) {\r\n\t\t\t\t\tthis._savedOptions = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._removeAllAnnotations();\r\n\t\t\tif(this._selectedLines) {\r\n\t\t\t\tthis.setOptions({selectedLines: false});\r\n\t\t\t}\r\n\t\t\tvar textView = this._editor.getTextView();\r\n\t\t\tif (textView) {\r\n\t\t\t\ttextView.removeEventListener(\"Focus\", this._listeners.onEditorFocus); //$NON-NLS-0$\r\n\t\t\t\ttextView.focus();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_processReplaceString: function(str) {\r\n\t\t\tvar newStr = str;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tnewStr = \"\";\r\n\t\t\t\tvar escape = false;\r\n\t\t\t\tvar delimiter = this._editor.getModel().getLineDelimiter();\r\n\t\t\t\tfor (var i=0; i<str.length; i++) {\r\n\t\t\t\t\tvar c = str.substring(i, i + 1);\r\n\t\t\t\t\tif (escape) {\r\n\t\t\t\t\t\tswitch (c) {\r\n\t\t\t\t\t\t\tcase \"R\": newStr += delimiter; break;\r\n\t\t\t\t\t\t\tcase \"r\": newStr += \"\\r\"; break;\r\n\t\t\t\t\t\t\tcase \"n\": newStr += \"\\n\"; break;\r\n\t\t\t\t\t\t\tcase \"t\": newStr += \"\\t\"; break;\r\n\t\t\t\t\t\t\tcase \"\\\\\": newStr += \"\\\\\"; break;\r\n\t\t\t\t\t\t\tdefault: newStr += \"\\\\\" + c;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tescape = false;\r\n\t\t\t\t\t} else if (c === \"\\\\\") {\r\n\t\t\t\t\t\tescape = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewStr += c;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (escape) {\r\n\t\t\t\t\tnewStr += \"\\\\\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn newStr;\r\n\t\t},\r\n\t\tisVisible: function() {\r\n\t\t\treturn this._visible;\r\n\t\t},\r\n\t\treplace: function() {\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tif (string) {\r\n\t\t\t\tvar editor = this._editor;\r\n\t\t\t\tvar replaceString = this._processReplaceString(this.getReplaceString());\r\n\t\t\t\tvar selection = editor.getSelection();\r\n\t\t\t\tvar start = selection.start;\r\n\t\t\t\tDeferred.when(this._editor.getModel().find({\r\n\t\t\t\t\tstring: string,\r\n\t\t\t\t\tstart: start,\r\n\t\t\t\t\trangeStart: this._searchRangeModel ? this._searchRangeModel.start : undefined,\r\n\t\t\t\t\trangeEnd: this._searchRangeModel ? this._searchRangeModel.end : undefined,\r\n\t\t\t\t\treverse: false,\r\n\t\t\t\t\twrap: this._wrap,\r\n\t\t\t\t\tregex: this._regex,\r\n\t\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t\t})).then( function(iterator) {\r\n\t\t\t\t\tif(!iterator) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar result = iterator.next();\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t\t\tthis._doReplace(result.start, result.end, string, replaceString);\r\n\t\t\t\t\t\tthis.endUndo();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._findAfterReplace){\r\n\t\t\t\t\t\tthis._doFind(string, this.getStartOffset());\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\treplaceAll : function() {\r\n\t\t\tvar string = this.getFindString();\r\n\t\t\tif (string) {\r\n\t\t\t\tthis._replacingAll = true;\r\n\t\t\t\tvar editor = this._editor;\r\n\t\t\t\tvar textView = editor.getTextView();\r\n\t\t\t\teditor.reportStatus(messages.replacingAll);\r\n\t\t\t\tvar replaceString = this._processReplaceString(this.getReplaceString());\r\n\t\t\t\tvar self = this;\r\n\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\tvar startPos = 0;\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\t//For replace all, we need to ignore the wrap search from the user option\r\n\t\t\t\t\t\t//Otherwise the loop will be dead, see https://bugs.eclipse.org/bugs/show_bug.cgi?id=411813\r\n\t\t\t\t\t\tvar result = self._doFindForReplaceAll(string, startPos, null, true);\r\n\t\t\t\t\t\tif (!result) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\tif (count === 1) {\r\n\t\t\t\t\t\t\ttextView.setRedraw(false);\r\n\t\t\t\t\t\t\tself.startUndo();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself._doReplace(result.start, result.end, string, replaceString);\r\n\t\t\t\t\t\tstartPos = self.getStartOffset();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (count > 0) {\r\n\t\t\t\t\t\tself.endUndo();\r\n\t\t\t\t\t\ttextView.setRedraw(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (startPos > 0) {\r\n\t\t\t\t\t\teditor.reportStatus(util.formatMessage(messages.replacedMatches, count));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\teditor.reportStatus(messages.nothingReplaced, \"error\"); //$NON-NLS-0$ \r\n\t\t\t\t\t}\r\n\t\t\t\t\tself._replacingAll = false;\r\n\t\t\t\t}, 100);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @property {String} string the search string to be found.\r\n\t\t * @property {Boolean} [regex=false] whether or not the search string is a regular expression.\r\n\t\t * @property {Boolean} [wrap=false] whether or not to wrap search.\r\n\t\t * @property {Boolean} [wholeWord=false] whether or not to search only whole words.\r\n\t\t * @property {Boolean} [caseInsensitive=false] whether or not search is case insensitive.\r\n\t\t * @property {Boolean} [reverse=false] whether or not to search backwards.\r\n\t\t * @property {Number} [start=0] The start offset to start searching\r\n\t\t * @property {Number} [end=charCount] The end offset of the search. Used to search in a given range.\t\r\n\t\t */\r\n\t\tsetOptions : function(options) {\r\n\t\t\tif (options) {\r\n\t\t\t\tif ((options.showAll === true || options.showAll === false) && this._showAll !== options.showAll) {\r\n\t\t\t\t\tthis._showAll = options.showAll;\r\n\t\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\t\tif (this._showAll) {\r\n\t\t\t\t\t\t\tthis._markAllOccurrences();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\t\t\t\t\tif (annotationModel) {\r\n\t\t\t\t\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((options.selectedLines === true || options.selectedLines === false) && this._selectedLinesl !== options.selectedLines) {\r\n\t\t\t\t\tthis._selectedLines = options.selectedLines;\r\n\t\t\t\t\tif (this._selectedLines) {\r\n\t\t\t\t\t\tthis.annotateSearchRange(options.multipleLine);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.annotateSearchRange(options.multipleLine, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.postSelectedLines();\r\n\t\t\t\t}\r\n\t\t\t\tif (options.caseInsensitive === true || options.caseInsensitive === false) {\r\n\t\t\t\t\tthis._caseInsensitive = options.caseInsensitive;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.wrap === true || options.wrap === false) {\r\n\t\t\t\t\tthis._wrap = options.wrap;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.wholeWord === true || options.wholeWord === false) {\r\n\t\t\t\t\tthis._wholeWord = options.wholeWord;\r\n\t\t\t\t}\r\n\t\t\t\t//Allow extended TextModelFactory to disable incremental find\r\n\t\t\t\tif (options.incremental === true || options.incremental === false || options.incremental === \"disabled\") {\r\n\t\t\t\t\tif(options.incremental === \"disabled\") {\r\n\t\t\t\t\t\tthis._incremental = false;\r\n\t\t\t\t\t\tthis._incrementalDisabled = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._incremental = options.incremental;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (options.regex === true || options.regex === false) {\r\n\t\t\t\t\tthis._regex = options.regex;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.findAfterReplace === true || options.findAfterReplace === false) {\r\n\t\t\t\t\tthis._findAfterReplace = options.findAfterReplace;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hideAfterFind === true || options.hideAfterFind === false) {\r\n\t\t\t\t\tthis._hideAfterFind = options.hideAfterFind;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.reverse === true || options.reverse === false) {\r\n\t\t\t\t\tthis._reverse = options.reverse;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"findCallback\")) { //$NON-NLS-0$\r\n\t\t\t\t\tthis._findCallback = options.findCallback;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"start\")) { //$NON-NLS-0$\t\r\n\t\t\t\t\tthis._start = options.start;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.hasOwnProperty(\"end\")) { //$NON-NLS-0$\r\n\t\t\t\t\tthis._end = options.end;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshow: function(tempOptions) {\r\n\t\t\tthis._visible = true;\r\n\t\t\tif (tempOptions) {\r\n\t\t\t\tif (!this._savedOptions) {\r\n\t\t\t\t\tthis._savedOptions = [];\r\n\t\t\t\t}\t\r\n\t\t\t\tthis._savedOptions.push(this.getOptions());\r\n\t\t\t\tthis.setOptions(tempOptions);\r\n\t\t\t\tif(tempOptions.findString && this._regex) {\r\n\t\t\t\t\ttempOptions.findString = mRegex.escape(tempOptions.findString);\r\n\t\t\t\t\ttempOptions.findString = tempOptions.findString.split(\"\\n\").join(\"\\\\n\");\r\n\t\t\t\t\ttempOptions.findString = tempOptions.findString.split(\"\\r\").join(\"\\\\r\");\r\n\t\t\t\t\ttempOptions.findString = tempOptions.findString.split(\"\\t\").join(\"\\\\t\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._startOffset = this._editor.getSelection().start;\r\n\t\t\tthis._editor.getTextView().addEventListener(\"Focus\", this._listeners.onEditorFocus); //$NON-NLS-0$\r\n\t\t\tvar self = this;\r\n\t\t\twindow.setTimeout(function() {\r\n\t\t\t\tif (self._incremental) {\r\n\t\t\t\t\tself.find(true, null, true);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this._undoStack) {\r\n\t\t\t\tthis._undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t}, \r\n\t\tendUndo: function() {\r\n\t\t\tif (this._undoStack) {\r\n\t\t\t\tthis._undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\tisRangeSearch: function() {\r\n\t\t\treturn this._searchRangeModel !== null && this._searchRangeModel !== undefined;\r\n\t\t},\r\n\t\tannotateSearchRange: function(multipleLine, remove) {\r\n\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_SEARCH_RANGE;\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (annotationModel) {\r\n\t\t\t\tannotationModel.removeAnnotations(type);\r\n\t\t\t\tthis.setOptions({start: undefined, end: undefined});\r\n\t\t\t\tthis._selectedLines = false;\r\n\t\t\t\tthis._searchRangeModel = null;\r\n\t\t\t\tif(remove) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar selection = this._editor.getSelection();\r\n\t\t\t\tvar textModel = this._editor.getModel();\r\n\t\t\t\tvar startL = 0;\r\n\t\t\t\tvar endL = 0;\r\n\t\t\t\tif(textModel) {\r\n\t\t\t\t\tendL = startL = textModel.getLineAtOffset(selection.start);\r\n\t\t\t\t\tif(selection.start !== selection.end) {\r\n\t\t\t\t\t\tendL = textModel.getLineAtOffset(selection.end - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(endL > startL || !multipleLine) {\r\n\t\t\t\t\tthis._selectedLines = true;\r\n\t \t\t \t\tvar rangeStart = textModel.getLineStart(startL);\r\n\t \t\t \t\tvar rangeEnd = textModel.getLineEnd(endL, true);\r\n\t\t\t\t\tthis._editor.setSelection(rangeStart, rangeStart, true);\r\n\t\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_CURRENT_LINE);\r\n\t\t\t\t\tthis.setOptions({start: rangeStart, end: rangeEnd});\r\n\t\t\t\t\tthis._searchRangeModel = mAnnotations.AnnotationType.createAnnotation(type, rangeStart, rangeEnd);\r\n\t \t\t \t\tannotationModel.addAnnotation(this._searchRangeModel);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tpostSelectedLines: function(/*selectedLines*/) {\r\n\t\t},\r\n\t\t_findFromModel: function(string, startOffset, noWrap) {\r\n\t\t\treturn this._editor.getModel().find({\r\n\t\t\t\tstring: string,\r\n\t\t\t\tstart: startOffset,\r\n\t\t\t\trangeStart: this._searchRangeModel ? this._searchRangeModel.start : undefined,\r\n\t\t\t\trangeEnd: this._searchRangeModel ? this._searchRangeModel.end : undefined,\r\n\t\t\t\treverse: this._reverse,\r\n\t\t\t\twrap: noWrap ? false: this._wrap,\r\n\t\t\t\tregex: this._regex,\r\n\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t_find: function(editor, string, startOffset, noWrap) {\r\n\t\t\tvar iterator;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\titerator = this._findFromModel(string, startOffset, noWrap);\r\n\t\t\t\t} catch (ex) {\r\n\t\t\t\t\teditor.reportStatus(ex.message, \"error\"); //$NON-NLS-0$\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\titerator = this._findFromModel(string, startOffset, noWrap);\r\n\t\t\t}\r\n\t\t\treturn iterator;\r\n\t\t},\r\n\t\t\r\n\t\t_doFindForReplaceAll: function(string, startOffset, count, noWrap) {\r\n\t\t\tcount = count || 1;\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (!string) {\r\n\t\t\t\tthis._removeAllAnnotations();\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tthis._lastString = string;\r\n\t\t\tvar result, iterator;\r\n\t\t\titerator = this._find(editor, string, startOffset, noWrap);\r\n\t\t\tif(!iterator) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif(!iterator.hasNext || !iterator.next) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tfor (var i=0; i<count && iterator.hasNext(); i++) {\r\n\t\t\t\tresult = iterator.next();\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t\r\n\t\t_doFind: function(string, startOffset, count, noWrap) {\r\n\t\t\tcount = count || 1;\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (!string) {\r\n\t\t\t\tthis._removeAllAnnotations();\r\n\t\t\t\treturn new Deferred().resolve();\r\n\t\t\t}\r\n\t\t\tthis._lastString = string;\r\n\t\t\tvar result;\r\n\t\t\treturn Deferred.when(this._find(editor, string, startOffset, noWrap)).then( function(iterator) {\r\n\t\t\t\tif(!iterator) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0; i<count && iterator.hasNext(); i++) {\r\n\t\t\t\t\tresult = iterator.next();\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._replacingAll) {\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tthis._editor.reportStatus(\"\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._editor.reportStatus(messages.notFound, \"error\"); //$NON-NLS-0$\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH;\r\n\t\t\t\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\t\t\t\tif (annotationModel) {\r\n\t\t\t\t\t\t\tannotationModel.removeAnnotations(type);\r\n\t\t\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\t\t\tannotationModel.addAnnotation(mAnnotations.AnnotationType.createAnnotation(type, result.start, result.end));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this._showAll) {\r\n\t\t\t\t\t\t\tif (this._timer) {\r\n\t\t\t\t\t\t\t\twindow.clearTimeout(this._timer);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t\tthis._timer = window.setTimeout(function(){\r\n\t\t\t\t\t\t\t\tthat._markAllOccurrences();\r\n\t\t\t\t\t\t\t\tthat._timer = null;\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._findCallback) {\r\n\t\t\t\t\t\tthis._findCallback(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (result) {\r\n\t\t\t\t\t\teditor.moveSelection(result.start, result.end, null, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t_doReplace: function(start, end, searchStr, newStr) {\r\n\t\t\tvar editor = this._editor;\r\n\t\t\tif (this._regex) {\r\n\t\t\t\tnewStr = editor.getText(start, end).replace(new RegExp(searchStr, this._caseInsensitive ? \"i\" : \"\"), newStr); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\teditor.setText(newStr, start, end);\r\n\t\t\teditor.setSelection(start, start + newStr.length, true);\r\n\t\t},\r\n\t\t_markAllOccurrences: function() {\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH;\r\n\t\t\tvar iter = annotationModel.getAnnotations();\r\n\t\t\tvar remove = [], add;\r\n\t\t\twhile (iter.hasNext()) {\r\n\t\t\t\tvar annotation = iter.next();\r\n\t\t\t\tif (annotation.type === type) {\r\n\t\t\t\t\tremove.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.isVisible()) {\r\n\t\t\t\tvar string = this.getFindString();\r\n\t\t\t\tDeferred.when(this._editor.getModel().find({\r\n\t\t\t\t\tstring: string,\r\n\t\t\t\t\tstart: this._start,\r\n\t\t\t\t\trangeStart: this._searchRangeModel ? this._searchRangeModel.start : undefined,\r\n\t\t\t\t\trangeEnd: this._searchRangeModel ? this._searchRangeModel.end : undefined,\r\n\t\t\t\t\tregex: this._regex,\r\n\t\t\t\t\twholeWord: this._wholeWord,\r\n\t\t\t\t\tcaseInsensitive: this._caseInsensitive\r\n\t\t\t\t})).then( function(iterator) {\r\n\t\t\t\t\tif(!iterator) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadd = [];\r\n\t\t\t\t\twhile (iterator.hasNext()) {\r\n\t\t\t\t\t\tvar range = iterator.next();\r\n\t\t\t\t\t\tadd.push(mAnnotations.AnnotationType.createAnnotation(type, range.start, range.end));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeAllAnnotations: function() {\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (annotationModel) {\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH);\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_MATCHING_SEARCH);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeCurrentAnnotation: function(evt){\r\n\t\t\tvar annotationModel = this._editor.getAnnotationModel();\r\n\t\t\tif (annotationModel) {\r\n\t\t\t\tannotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_CURRENT_SEARCH);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\texports.Find = Find;\r\n\t\r\n\treturn exports;\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2014 IBM Corporation and others. All rights reserved.\r\n * This program and the accompanying materials are made available under the\r\n * terms of the Eclipse Public License v1.0\r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\r\n * \r\n * Contributors: \r\n *\tIBM Corporation - initial API and implementation\r\n ******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine('orion/editor/findUI',[\r\n\t'i18n!orion/editor/nls/messages',\r\n\t'orion/editor/find',\r\n\t'orion/objects',\r\n\t'orion/editor/util',\r\n\t'orion/util', \r\n], function(messages, mFind, objects, textUtil, util) {\r\n\t\r\n\tfunction FindUI(editor, undoStack, options) {\r\n\t\tmFind.Find.call(this, editor, undoStack, options);\r\n\t}\r\n\t\r\n\tFindUI.prototype = new mFind.Find();\r\n\t\r\n\tobjects.mixin(FindUI.prototype, {\r\n\t\tgetFindString: function() {\r\n\t\t\tvar input = this._findInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn mFind.Find.prototype.getFindString.call(this);\r\n\t\t\t}\r\n\t\t\treturn input.value;\r\n\t\t},\r\n\t\tgetReplaceString: function() {\r\n\t\t\tvar input = this._replaceInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn mFind.Find.prototype.getReplaceString(this);\r\n\t\t\t}\r\n\t\t\treturn input.value;\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tvar visible = this.isVisible();\r\n\t\t\tmFind.Find.prototype.hide.call(this);\r\n\t\t\tif (visible) {\r\n\t\t\t\tthis._rootDiv.className = \"textViewFind\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\tshow: function(options) {\r\n\t\t\tmFind.Find.prototype.show.call(this, options);\r\n\t\t\tvar findString = options.findString;\r\n\t\t\tvar replaceString = options.replaceString;\r\n\t\t\tvar input = this._findInput;\r\n\t\t\tif (!input) {\r\n\t\t\t\tthis._create();\r\n\t\t\t\tinput = this._findInput;\r\n\t\t\t}\r\n\t\t\tif (findString) {\r\n\t\t\t\tinput.value = findString;\r\n\t\t\t}\r\n\t\t\tif (replaceString) {\r\n\t\t\t\tvar replaceInput = this._replaceInput;\r\n\t\t\t\treplaceInput.value = replaceString;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tthis.setOptions({selectedLines: true, multipleLine: true});\r\n\t\t\twindow.setTimeout(function() {\r\n\t\t\t\tthat._rootDiv.className = \"textViewFind show\"; //$NON-NLS-0$\r\n\t\t\t\tinput.select();\r\n\t\t\t\tinput.focus();\r\n\t\t\t}, 0);\r\n\t\t},\r\n\t\tpostSelectedLines: function(/*selectedLines*/) {\r\n\t\t\tif(this._selectedLinesUI) {\r\n\t\t\t\tthis._checked(this._selectedLines, this._selectedLinesUI);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_create: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar view = this._editor.getTextView();\r\n\t\t\tvar parent = view.getOptions(\"parent\"); //$NON-NLS-0$\r\n\t\t\tvar document = parent.ownerDocument; //$NON-NLS-0$\r\n\t\t\tvar root = util.createElement(document, 'div'); //$NON-NLS-0$\r\n\t\t\troot.className = \"textViewFind\"; //$NON-NLS-0$\r\n\t\t\ttextUtil.addEventListener(root, \"keydown\", function(e) { that._handleKeyDown(e); }); //$NON-NLS-0$\r\n\t\t\tthis._rootDiv = root;\r\n\t\t\troot.setAttribute(\"role\", \"dialog\");\r\n\t\t\troot.setAttribute(\"aria-label\", messages.findReplace);\r\n\t\t\tthis._createContents(document, root);\r\n\t\t\tview._rootDiv.insertBefore(root, view._rootDiv.firstChild);\r\n\t\t},\r\n\t\t_createContents: function(document, parent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar findInput = util.createElement(document, 'input'); //$NON-NLS-0$\r\n\t\t\tfindInput.className = \"textViewFindInput\"; //$NON-NLS-0$\r\n\t\t\tthis._findInput = findInput;\r\n\t\t\tfindInput.type = \"text\"; //$NON-NLS-0$\r\n\t\t\tfindInput.placeholder = messages.findWith;\r\n\t\t\ttextUtil.addEventListener(findInput, \"input\", function(evt) { //$NON-NLS-0$\r\n\t\t\t\treturn that._handleInput(evt);\r\n\t\t\t});\r\n\t\t\tparent.appendChild(findInput);\r\n\r\n\t\t\tvar group = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.next, function() { that.find(true); });\r\n\t\t\tthat._createButton(document, group, messages.previous, function() { that.find(false); });\r\n\t\t\tparent.appendChild(group);\r\n\t\t\t\r\n\t\t\tvar readonly = that._editor.getTextView().getOptions(\"readonly\"); //$NON-NLS-0$\r\n\t\t\tif (!readonly) {\r\n\t\t\t\t// create replace text\r\n\t\t\t\tvar replaceInput = util.createElement(document, 'input'); //$NON-NLS-0$\r\n\t\t\t\treplaceInput.className = \"textViewReplaceInput\"; //$NON-NLS-0$\r\n\t\t\t\tthis._replaceInput = replaceInput;\r\n\t\t\t\treplaceInput.type = \"text\"; //$NON-NLS-0$\r\n\t\t\t\treplaceInput.placeholder = messages.replaceWith;\r\n\t\t\t\tparent.appendChild(replaceInput);\r\n\t\t\t\tgroup = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\t\tthat._createButton(document, group, messages.replace, function() { that.replace(); });\r\n\t\t\t\tthat._createButton(document, group, messages.replaceAll, function() { that.replaceAll(); });\r\n\t\t\t\tparent.appendChild(group);\r\n\t\t\t}\r\n\r\n\t\t\tgroup = util.createElement(document, 'span'); //$NON-NLS-0$\r\n\t\t\tthat._selectedLinesUI = that._createButton(document, group, messages.selectedLines, function(evt) { that._toggle(\"selectedLines\", evt.target); }, this._selectedLines, messages.selectedLinesTooltip, messages.selectedLinesTooltip); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.regex, function(evt) { that._toggle(\"regex\", evt.target); }, this._regex, messages.regexTooltip, messages.regexTooltip); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.caseInsensitive, function(evt) { that._toggle(\"caseInsensitive\", evt.target); }, this._caseInsensitive, messages.caseInsensitiveTooltip, messages.caseInsensitiveTooltip); //$NON-NLS-0$\r\n\t\t\tthat._createButton(document, group, messages.wholeWord, function(evt) { that._toggle(\"wholeWord\", evt.target); }, this._wholeWord, messages.wholeWordTooltip, messages.wholeWordTooltip); //$NON-NLS-0$\r\n\t\t\tparent.appendChild(group);\r\n\r\n\t\t\tvar close = that._createButton(document, parent, \"\", function() { that.hide(); }); //$NON-NLS-0$\r\n\t\t\tclose.className = \"textViewFindCloseButton\"; //$NON-NLS-0$\r\n\t\t\tclose.title = messages.closeTooltip;\r\n\t\t\tutil.confineDialogTab(findInput, close);\r\n\t\t},\r\n\t\t_createButton: function(document, parentDom, text, callback, checked, tooltip, ariaLabel) {\r\n\t\t\tvar button  = document.createElement(\"button\"); //$NON-NLS-0$\r\n\t\t\tbutton.type = \"button\"; //$NON-NLS-0$\r\n\t\t\tthis._checked(checked, button);\r\n\t\t\tif (tooltip) button.title = tooltip;\r\n\t\t\ttextUtil.addEventListener(button, \"click\", function(evt) { callback.call(this, evt); }, false); //$NON-NLS-0$\r\n\t\t\tif (text) {\r\n\t\t\t\tbutton.appendChild(document.createTextNode(text)); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\tif (ariaLabel) {\r\n\t\t\t\tbutton.setAttribute(\"aria-label\", ariaLabel);\r\n\t\t\t}\r\n\t\t\tparentDom.appendChild(button);\r\n\t\t\treturn button;\r\n\t\t},\r\n\t\t_toggle: function(prop, button) {\r\n\t\t\tvar options = {};\r\n\t\t\toptions[prop] = !this[\"_\" + prop]; //$NON-NLS-0$\r\n\t\t\tthis._checked(options[prop], button);\r\n\t\t\tthis.setOptions(options);\r\n\t\t},\r\n\t\t_checked: function(checked, button) {\r\n\t\t\tbutton.className = \"textViewFindButton\"; //$NON-NLS-0$\r\n\t\t\tif (checked) {\r\n\t\t\t\tbutton.className += \" checked\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t_handleInput: function() {\r\n\t\t\tif (this._incremental) {\r\n\t\t\t\tthis.find(true, null, true);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t_handleKeyDown: function(evt) {\r\n\t\t\tvar handled;\r\n\t\t\tvar ctrlKeyOnly = (util.isMac ? evt.metaKey : evt.ctrlKey) && !evt.altKey && !evt.shiftKey;\r\n\t\t\tif (ctrlKeyOnly && evt.keyCode === 70/*\"f\"*/ ) {\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\t//We can't use ctrlKeyOnly on \"k\" because ctrl+shift+k means find previous match when the find bar gets focus\r\n\t\t\tif (((util.isMac ? evt.metaKey : evt.ctrlKey) && !evt.altKey && evt.keyCode === 75/*\"k\"*/) || evt.keyCode === 13/*enter*/){\r\n\t\t\t\tif (evt.keyCode === 13) {\r\n\t\t\t\t\tthis.find(this._reverse ? evt.shiftKey : !evt.shiftKey);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.find(!evt.shiftKey);\r\n\t\t\t\t}\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (ctrlKeyOnly &&  evt.keyCode === 82 /*\"r\"*/){\r\n\t\t\t\tthis.replace();\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (evt.keyCode === 27/*ESC*/){\r\n\t\t\t\tthis.hide();\r\n\t\t\t\thandled = true;\r\n\t\t\t}\r\n\t\t\tif (handled) {\r\n\t\t\t\tif (evt.stopPropagation) { \r\n\t\t\t\t\tevt.stopPropagation(); \r\n\t\t\t\t}\r\n\t\t\t\tif (evt.preventDefault) { \r\n\t\t\t\t\tevt.preventDefault(); \r\n\t\t\t\t}\r\n\t\t\t\tevt.cancelBubble = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\r\n\treturn {FindUI: FindUI};\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013, 2017 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made\r\n * available under the terms of the Eclipse Public License v1.0\r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/actions\", [ //$NON-NLS-0$\r\n\t'i18n!orion/editor/nls/messages', //$NON-NLS-0$\r\n\t'orion/keyBinding', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/editor/tooltip', //$NON-NLS-0$\r\n\t'orion/editor/find', //$NON-NLS-0$\r\n\t'orion/editor/findUI', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(messages, mKeyBinding, mAnnotations, mTooltip, mFind, mFindUI, util) {\r\n\r\n\tvar AT = mAnnotations.AnnotationType;\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction forEachSelection(actions, compound, callback, noUndo) {\r\n\t\tvar offset = 0;\r\n\t\tvar editor = actions.editor;\r\n\t\tvar selections = editor.getSelections();\r\n\t\tif (!noUndo && (compound || selections.length > 1)){ actions.startUndo(); }\r\n\t\tfunction setText(text, start, end) {\r\n\t\t\teditor.setText(text, start, end);\r\n\t\t\toffset += (start - end) + text.length;\r\n\t\t}\r\n\t\tselections.forEach(function(selection) {\r\n\t\t\tselection.start += offset;\r\n\t\t\tselection.end += offset;\r\n\t\t\tcallback(selection, setText);\r\n\t\t});\r\n\t\teditor.setSelections(selections);\r\n\t\tif (!noUndo && (compound || selections.length > 1)){ actions.endUndo(); }\r\n\t}\r\n\r\n\t/**\r\n\t * TextActions connects common text editing keybindings onto an editor.\r\n\t */\r\n\tfunction TextActions(editor, undoStack, find) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis._incrementalFind = new mFind.IncrementalFind(editor);\r\n\t\tthis._find = find ? find : new mFindUI.FindUI(editor, undoStack);\r\n\t\tthis._lastEditLocation = null;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tTextActions.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tvar textView = this.editor.getTextView();\r\n\r\n\t\t\tthis._lastEditListener = {\r\n\t\t\t\tonModelChanged: function(e) {\r\n\t\t\t\t\tif (this.editor.isDirty()) {\r\n\t\t\t\t\t\tthis._lastEditLocation = e.start + e.addedCharCount;\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this)\r\n\t\t\t};\r\n\t\t\ttextView.addEventListener(\"ModelChanged\", this._lastEditListener.onModelChanged); //$NON-NLS-0$\r\n\r\n\t\t\ttextView.setAction(\"undo\", function(data) { //$NON-NLS-0$\r\n\t\t\t\tif (this.undoStack) {\r\n\t\t\t\t\tvar count = 1;\r\n\t\t\t\t\tif (data && data.count) {\r\n\t\t\t\t\t\tcount = data.count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (count > 0) {\r\n\t\t\t\t\t\tthis.undoStack.undo();\r\n\t\t\t\t\t\t--count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.undo});\r\n\r\n\t\t\ttextView.setAction(\"redo\", function(data) { //$NON-NLS-0$\r\n\t\t\t\tif (this.undoStack) {\r\n\t\t\t\t\tvar count = 1;\r\n\t\t\t\t\tif (data && data.count) {\r\n\t\t\t\t\t\tcount = data.count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (count > 0) {\r\n\t\t\t\t\t\tthis.undoStack.redo();\r\n\t\t\t\t\t\t--count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.redo});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"f\", true), \"find\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"find\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._find) {\r\n\t\t\t\t\tvar selection = this.editor.getSelection();\r\n\t\t\t\t\tthis._find.show({findString:this.editor.getText(selection.start, selection.end)});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.find});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"k\", true), \"findNext\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"findNext\", function(options) { //$NON-NLS-0$\r\n\t\t\t\tif (this._find){\r\n\t\t\t\t\tthis._find.find(true, options);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.findNext});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"k\", true, true), \"findPrevious\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"findPrevious\", function(options) { //$NON-NLS-0$\r\n\t\t\t\tif (this._find){\r\n\t\t\t\t\tthis._find.find(false, options);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}.bind(this), {name: messages.findPrevious});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"j\", true), \"incrementalFind\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"incrementalFind\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._incrementalFind) {\r\n\t\t\t\t\tthis._incrementalFind.find(true);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}.bind(this), {name: messages.incrementalFind});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"j\", true, true), \"incrementalFindReverse\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"incrementalFindReverse\", function() { //$NON-NLS-0$\r\n\t\t\t\tif (this._incrementalFind) {\r\n\t\t\t\t\tthis._incrementalFind.find(false);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}.bind(this), {name: messages.incrementalFindReverse});\r\n\r\n\t\t\ttextView.setAction(\"tab\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.indentLines();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"shiftTab\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.unindentLines();\r\n\t\t\t}.bind(this), {name: messages.unindentLines});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(38, false, false, true), \"moveLinesUp\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"moveLinesUp\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.moveLinesUp();\r\n\t\t\t}.bind(this), {name: messages.moveLinesUp});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(40, false, false, true), \"moveLinesDown\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"moveLinesDown\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.moveLinesDown();\r\n\t\t\t}.bind(this), {name: messages.moveLinesDown});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(38, true, false, true), \"copyLinesUp\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"copyLinesUp\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.copyLinesUp();\r\n\t\t\t}.bind(this), {name: messages.copyLinesUp});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(40, true, false, true), \"copyLinesDown\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"copyLinesDown\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.copyLinesDown();\r\n\t\t\t}.bind(this), {name: messages.copyLinesDown});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('d', true, false, false), \"deleteLines\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"deleteLines\", function(data) { //$NON-NLS-0$\r\n\t\t\t\treturn this.deleteLines(data);\r\n\t\t\t}.bind(this), {name: messages.deleteLines});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"l\", !util.isMac, false, false, util.isMac), \"gotoLine\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"gotoLine\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.gotoLine();\r\n\t\t\t}.bind(this), {name: messages.gotoLine});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(190, true), \"nextAnnotation\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"nextAnnotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.nextAnnotation(true);\r\n\t\t\t}.bind(this), {name: messages.nextAnnotation});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(188, true), \"previousAnnotation\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"previousAnnotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.nextAnnotation(false);\r\n\t\t\t}.bind(this), {name: messages.prevAnnotation});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"e\", true, false, true, false), \"expand\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"expand\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotation(true);\r\n\t\t\t}.bind(this), {name: messages.expand});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"c\", true, false, true, false), \"collapse\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"collapse\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotation(false);\r\n\t\t\t}.bind(this), {name: messages.collapse});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"e\", true, true, true, false), \"expandAll\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"expandAll\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotations(true);\r\n\t\t\t}.bind(this), {name: messages.expandAll});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"c\", true, true, true, false), \"collapseAll\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"collapseAll\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.expandAnnotations(false);\r\n\t\t\t}.bind(this), {name: messages.collapseAll});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"q\", !util.isMac, false, false, util.isMac), \"lastEdit\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"lastEdit\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.gotoLastEdit();\r\n\t\t\t}.bind(this), {name: messages.lastEdit});\r\n\t\t},\r\n\t\tcopyLinesDown: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tvar delimiter = \"\";\r\n\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\ttext = (delimiter = model.getLineDelimiter()) + text;\r\n\t\t\t\t}\r\n\t\t\t\tvar insertOffset = lineEnd;\r\n\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\tselection.start = insertOffset + delimiter.length;\r\n\t\t\t\tselection.end = insertOffset + text.length;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tcopyLinesUp: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tvar delimiter = \"\";\r\n\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\ttext += (delimiter = model.getLineDelimiter());\r\n\t\t\t\t}\r\n\t\t\t\tvar insertOffset = lineStart;\r\n\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\tselection.start = insertOffset;\r\n\t\t\t\tselection.end = insertOffset + text.length - delimiter.length;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tdeleteLines: function(data) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar count = 1;\r\n\t\t\tif (data && data.count) {\r\n\t\t\t\tcount = data.count;\r\n\t\t\t}\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lastLine;\r\n\t\t\t\tif (selection.start !== selection.end || count === 1) {\r\n\t\t\t\t\tlastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlastLine = Math.min(firstLine + count - 1, model.getLineCount() - 1);\r\n\t\t\t\t}\t\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\tselection.start = selection.end = lineStart;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\texpandAnnotation: function(expand) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tif (!editor.getFoldingRulerVisible()) return true;\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif(!annotationModel) { return true; }\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar currentOffset = editor.getCaretOffset();\r\n\t\t\tvar lineIndex = model.getLineAtOffset(currentOffset);\r\n\t\t\tvar start = model.getLineStart(lineIndex);\r\n\t\t\tvar end = model.getLineEnd(lineIndex, true);\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tstart = model.mapOffset(start);\r\n\t\t\t\tend = model.mapOffset(end);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\tvar annotation, iter = annotationModel.getAnnotations(start, end);\r\n\t\t\twhile (!annotation && iter.hasNext()) {\r\n\t\t\t\tvar a = iter.next();\r\n\t\t\t\tif (a.type !== mAnnotations.AnnotationType.ANNOTATION_FOLDING) { continue; }\r\n\t\t\t\tannotation = a;\r\n\t\t\t}\r\n\t\t\tif (annotation) {\r\n\t\t\t\tif (expand !== annotation.expanded) {\r\n\t\t\t\t\tif (expand) {\r\n\t\t\t\t\t\tannotation.expand();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\teditor.setCaretOffset(annotation.start);\r\n\t\t\t\t\t\tannotation.collapse();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\texpandAnnotations: function(expand) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tif (!editor.getFoldingRulerVisible()) return true;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif(!annotationModel) { return true; }\r\n\t\t\tvar annotation, iter = annotationModel.getAnnotations();\r\n\t\t\ttextView.setRedraw(false);\r\n\t\t\twhile (iter.hasNext()) {\r\n\t\t\t\tannotation = iter.next();\r\n\t\t\t\tif (annotation.type !== mAnnotations.AnnotationType.ANNOTATION_FOLDING) { continue; }\r\n\t\t\t\tif (expand !== annotation.expanded) {\r\n\t\t\t\t\tif (expand) {\r\n\t\t\t\t\t\tannotation.expand();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tannotation.collapse();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttextView.setRedraw(true);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tindentLines: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif(!textView.getOptions(\"tabMode\")) { return; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar offset = 0;\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\tif (selections.length > 1) { this.startUndo(); }\r\n\t\t\tif (selections.some(\r\n\t\t\t\tfunction(selection) {\r\n\t\t\t\t\tselection.start += offset;\r\n\t\t\t\t\tselection.end += offset;\r\n\t\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t\tif (firstLine !== lastLine || selections.length > 1) {\r\n\t\t\t\t\t\tvar lines = [];\r\n\t\t\t\t\t\tlines.push(\"\");\r\n\t\t\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\t\t\tlines.push(model.getLine(i, true));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\t\tvar text = lines.join(tab);\r\n\t\t\t\t\t\teditor.setText(text, lineStart, lineEnd);\r\n\t\t\t\t\t\tvar start = lineStart === selection.start ? selection.start : selection.start + tab.length;\r\n\t\t\t\t\t\tvar end = selection.end + ((lastLine - firstLine + 1) * tab.length);\r\n\t\t\t\t\t\toffset += (lineStart - lineEnd) + text.length;\r\n\t\t\t\t\t\tselection.start = start;\r\n\t\t\t\t\t\tselection.end = end;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t)){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\teditor.setSelections(selections);\r\n\t\t\tif (selections.length > 1) { this.endUndo(); }\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tgotoLastEdit: function() {\r\n\t\t\tif (typeof this._lastEditLocation === \"number\")  { //$NON-NLS-0$\r\n\t\t\t\tthis.editor.showSelection(this._lastEditLocation);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tgotoLine: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar line = model.getLineAtOffset(editor.getCaretOffset());\r\n\t\t\tline = prompt(messages.gotoLinePrompty, line + 1);\r\n\t\t\tif (line) {\r\n\t\t\t\tline = parseInt(line, 10);\r\n\t\t\t\teditor.onGotoLine(line - 1, 0);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tmoveLinesDown: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\tif (lastLine !== lineCount-1) {\r\n\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\tvar insertOffset = model.getLineEnd(lastLine+1, true) - (lineEnd - lineStart);\r\n\t\t\t\t\tvar text, delimiterLength = 0;\r\n\t\t\t\t\tif (lastLine !== lineCount-2) {\r\n\t\t\t\t\t\ttext = model.getText(lineStart, lineEnd);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Move delimiter following selection to front of the text\r\n\t\t\t\t\t\tvar lineEndNoDelimiter = model.getLineEnd(lastLine);\r\n\t\t\t\t\t\ttext = model.getText(lineEndNoDelimiter, lineEnd) + model.getText(lineStart, lineEndNoDelimiter);\r\n\t\t\t\t\t\tdelimiterLength += lineEnd - lineEndNoDelimiter;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\t\tselection.start = insertOffset + delimiterLength;\r\n\t\t\t\t\tselection.end = insertOffset + delimiterLength + text.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tmoveLinesUp: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tif (firstLine !== 0) {\r\n\t\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\t\t\tvar insertOffset = model.getLineStart(firstLine - 1);\r\n\t\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\t\tvar text = model.getText(lineStart, lineEnd);\r\n\t\t\t\t\tvar delimiterLength = 0;\r\n\t\t\t\t\tif (lastLine === lineCount-1) {\r\n\t\t\t\t\t\t// Move delimiter preceding selection to end of text\r\n\t\t\t\t\t\tvar delimiterStart = model.getLineEnd(firstLine - 1);\r\n\t\t\t\t\t\tvar delimiterEnd = model.getLineEnd(firstLine - 1, true);\r\n\t\t\t\t\t\ttext += model.getText(delimiterStart, delimiterEnd);\r\n\t\t\t\t\t\tlineStart = delimiterStart;\r\n\t\t\t\t\t\tdelimiterLength = delimiterEnd - delimiterStart;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetText(\"\", lineStart, lineEnd);\r\n\t\t\t\t\tsetText(text, insertOffset, insertOffset);\r\n\t\t\t\t\tselection.start = insertOffset;\r\n\t\t\t\t\tselection.end = insertOffset + text.length - delimiterLength;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tnextAnnotation: function (forward) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar annotationModel = editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) { return true; }\r\n\t\t\tvar list = editor.getOverviewRuler() || editor.getAnnotationStyler();\r\n\t\t\tif (!list) { return true; }\r\n\r\n\t\t\tfunction ignore(annotation, iterationMode) {\r\n\t\t\t\tswitch (iterationMode) {\r\n\t\t\t\t\tcase AT.ANNOTATION_ERROR:\r\n\t\t\t\t\t\treturn annotation.type !== AT.ANNOTATION_ERROR && annotation.type !== AT.ANNOTATION_WARNING && annotation.type !== AT.ANNOTATION_INFO;\r\n\t\t\t\t\tcase AT.ANNOTATION_READ_OCCURRENCE:\r\n\t\t\t\t\t\treturn annotation.type !== AT.ANNOTATION_READ_OCCURRENCE && annotation.type !== AT.ANNOTATION_WRITE_OCCURRENCE;\r\n\t\t\t\t\tcase AT.ANNOTATION_CURRENT_SEARCH:\r\n\t\t\t\t\t\treturn annotation.type !== AT.ANNOTATION_CURRENT_SEARCH && annotation.type !== AT.ANNOTATION_MATCHING_SEARCH;\r\n\t\t\t\t\tcase AT.ANNOTATION_TASK:\r\n\t\t\t\t\t\treturn annotation.type !== AT.ANNOTATION_TASK && annotation.type !== AT.ANNOTATION_BOOKMARK;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar currentOffset = editor.getCaretOffset();\r\n\r\n\t\t\t// reset the iteration mode if the cursor moves between invocations\t\t\t\r\n\t\t\tif (!this._lastPosition || this._lastPosition !== currentOffset) {\r\n\t\t\t\tvar curAnnotations = annotationModel.getAnnotations(currentOffset, currentOffset);\r\n\t\t\t\tvar theMode = null;\r\n\t\t\t\twhile (curAnnotations.hasNext()) {\r\n\t\t\t\t\tvar annotation = curAnnotations.next();\r\n\t\t\t\t\tif (annotation.type === AT.ANNOTATION_ERROR || annotation.type === AT.ANNOTATION_WARNING || annotation.type === AT.ANNOTATION_INFO) {\r\n\t\t\t\t\t\ttheMode = AT.ANNOTATION_ERROR;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (annotation.type === AT.ANNOTATION_READ_OCCURRENCE || annotation.type === AT.ANNOTATION_WRITE_OCCURRENCE) {\r\n\t\t\t\t\t\ttheMode = AT.ANNOTATION_READ_OCCURRENCE;\r\n\t\t\t\t\t} else if (annotation.type === AT.ANNOTATION_TASK || annotation.type === AT.ANNOTATION_BOOKMARK && theMode !== AT.ANNOTATION_READ_OCCURRENCE) {\r\n\t\t\t\t\t\ttheMode = AT.ANNOTATION_TASK;\r\n\t\t\t\t\t} else if (annotation.type === AT.ANNOTATION_CURRENT_SEARCH || annotation.type === AT.ANNOTATION_MATCHING_SEARCH && !theMode) {\r\n\t\t\t\t\t\ttheMode = AT.ANNOTATION_CURRENT_SEARCH;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._iterationMode = theMode ?  theMode : AT.ANNOTATION_ERROR; // Iterate Errors / Warnings by default;\r\n\t\t\t}\r\n\r\n\t\t\tvar annotations = annotationModel.getAnnotations(forward ? currentOffset : 0, forward ? model.getCharCount() : currentOffset);\r\n\t\t\tvar foundAnnotation = null;\r\n\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\tvar annotation = annotations.next();\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tif (annotation.start <= currentOffset) { continue; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (annotation.start >= currentOffset) { continue; }\r\n\t\t\t\t}\r\n\t\t\t\tif (ignore(annotation, this._iterationMode)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tfoundAnnotation = annotation;\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (foundAnnotation) {\r\n\t\t\t\tvar foundAnnotations = [foundAnnotation];\r\n\t\t\t\tannotations = annotationModel.getAnnotations(foundAnnotation.start, foundAnnotation.start);\r\n\t\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\t\tannotation = annotations.next();\r\n\t\t\t\t\tif (annotation !== foundAnnotation && !ignore(annotation, this._iterationMode)) {\r\n\t\t\t\t\t\tfoundAnnotations.push(annotation);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar view = editor.getTextView();\r\n\t\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(view, editor);\r\n\t\t\t\tthis._lastPosition = foundAnnotation.start;\r\n\t\t\t\tif (!tooltip) {\r\n\t\t\t\t\teditor.moveSelection(foundAnnotation.start);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\teditor.moveSelection(foundAnnotation.start, foundAnnotation.start, function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tvar tv = editor.getTextView();\r\n\t\t\t\t\t\tvar offset = foundAnnotation.start;\r\n\t\t\t\t\t\tvar pos = tv.getLocationAtOffset(offset);\r\n\t\t\t\t\t\ttooltip.show({\r\n\t\t\t\t\t\t\tx: pos.x,\r\n\t\t\t\t\t\t\ty: pos.y,\r\n\t\t\t\t\t\t\tgetTooltipInfo: function() {\r\n\t\t\t\t\t\t\t\treturn editor._getTooltipInfo(this.x, this.y);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, false, false);\t\t\t\t\t\t\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tunindentLines: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif(!textView.getOptions(\"tabMode\")) { return; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\t\t\t\tvar tabSize = textView.getOptions(\"tabSize\"); //$NON-NLS-0$\r\n\t\t\t\tvar spaceTab = new Array(tabSize + 1).join(\" \"); //$NON-NLS-0$\r\n\t\t\t\tvar lines = [], removeCount = 0, firstRemoveCount = 0;\r\n\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\tvar line = model.getLine(i, true);\r\n\t\t\t\t\tif (model.getLineStart(i) !== model.getLineEnd(i)) {\r\n\t\t\t\t\t\tif (line.indexOf(\"\\t\") === 0) { //$NON-NLS-0$\r\n\t\t\t\t\t\t\tline = line.substring(1);\r\n\t\t\t\t\t\t\tremoveCount++;\r\n\t\t\t\t\t\t} else if (line.indexOf(spaceTab) === 0) {\r\n\t\t\t\t\t\t\tline = line.substring(tabSize);\r\n\t\t\t\t\t\t\tremoveCount += tabSize;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i === firstLine) {\r\n\t\t\t\t\t\tfirstRemoveCount = removeCount;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlines.push(line);\r\n\t\t\t\t}\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tvar lineEnd = model.getLineEnd(lastLine, true);\r\n\t\t\t\tvar lastLineStart = model.getLineStart(lastLine);\r\n\t\t\t\tvar text = lines.join(\"\");\r\n\t\t\t\tsetText(text, lineStart, lineEnd);\r\n\t\t\t\tvar start = lineStart === selection.start ? selection.start : selection.start - firstRemoveCount;\r\n\t\t\t\tvar end = Math.max(start, selection.end - removeCount + (selection.end === lastLineStart+1 && selection.start !== selection.end ? 1 : 0));\r\n\t\t\t\tselection.start = start;\r\n\t\t\t\tselection.end = end;\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\texports.TextActions = TextActions;\r\n\r\n\t/**\r\n\t * @param {orion.editor.Editor} editor\r\n\t * @param {orion.editor.UndoStack} undoStack\r\n\t * @param {orion.editor.ContentAssist} [contentAssist]\r\n\t * @param {orion.editor.LinkedMode} [linkedMode]\r\n\t */\r\n\tfunction SourceCodeActions(editor, undoStack, contentAssist, linkedMode) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.linkedMode = linkedMode;\r\n\t\tif (this.contentAssist) {\r\n\t\t\tthis.contentAssist.addEventListener(\"ProposalApplied\", this.contentAssistProposalApplied.bind(this)); //$NON-NLS-0$\r\n\t\t}\r\n\t\tthis.init();\r\n\t}\r\n\tSourceCodeActions.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tvar textView = this.editor.getTextView();\r\n\r\n\t\t\ttextView.setAction(\"lineStart\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.lineStart();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"enter\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoIndent();\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"t\", true, false, true), \"trimTrailingWhitespaces\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"trimTrailingWhitespaces\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.trimTrailingWhitespaces();\r\n\t\t\t}.bind(this), {name: messages.trimTrailingWhitespaces});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(191, true), \"toggleLineComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"toggleLineComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.toggleLineComment();\r\n\t\t\t}.bind(this), {name: messages.toggleLineComment});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(191, true, !util.isMac, false, util.isMac), \"addBlockComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"addBlockComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.addBlockComment();\r\n\t\t\t}.bind(this), {name: messages.addBlockComment});\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(220, true, !util.isMac, false, util.isMac), \"removeBlockComment\"); //$NON-NLS-0$\r\n\t\t\ttextView.setAction(\"removeBlockComment\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.removeBlockComment();\r\n\t\t\t}.bind(this), {name: messages.removeBlockComment});\r\n\r\n\t\t\t// Autocomplete square brackets []\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"[\", false, false, false, false, \"keypress\"), \"autoPairSquareBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairSquareBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"[\", \"]\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(']', false, false, false, false, \"keypress\"), \"skipClosingSquareBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingSquareBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(']'); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete angle brackets <>\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"<\", false, false, false, false, \"keypress\"), \"autoPairAngleBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairAngleBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"<\", \">\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('>', false, false, false, false, \"keypress\"), \"skipClosingAngleBracket\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingAngleBracket\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket('>'); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete parentheses ()\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"(\", false, false, false, false, \"keypress\"), \"autoPairParentheses\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairParentheses\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"(\", \")\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(')', false, false, false, false, \"keypress\"), \"skipClosingParenthesis\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingParenthesis\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(\")\"); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete braces {}\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"{\", false, false, false, false, \"keypress\"), \"autoPairBraces\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"autoPairBraces\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairBrackets(\"{\", \"}\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('}', false, false, false, false, \"keypress\"), \"skipClosingBrace\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\ttextView.setAction(\"skipClosingBrace\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.handleClosingBracket(\"}\"); //$NON-NLS-0$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete single quotations\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding(\"'\", false, false, false, false, \"keypress\"), \"autoPairSingleQuotation\"); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\r\n\t\t\ttextView.setAction(\"autoPairSingleQuotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairQuotations(\"'\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t// Autocomplete double quotations\r\n\t\t\ttextView.setKeyBinding(new mKeyBinding.KeyBinding('\"', false, false, false, false, \"keypress\"), \"autoPairDblQuotation\"); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\r\n\t\t\ttextView.setAction(\"autoPairDblQuotation\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.autoPairQuotations('\"'); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\ttextView.setAction(\"deletePrevious\", function() { //$NON-NLS-0$\r\n\t\t\t\treturn this.deletePrevious();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tautoIndent: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tif (textView.getOptions(\"singleMode\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tvar lineDelimiter = model.getLineDelimiter();\r\n\t\t\tvar matchCommentStart = /^[\\s]*\\/\\*[\\*]*[\\s]*$/;\r\n\t\t\tvar matchCommentDelimiter = /^[\\s]*\\*/;\r\n\t\t\tvar matchCommentEnd = /\\*\\/[\\s]*$/;\r\n\t\t\tvar self = this;\r\n\t\t\tfunction indent(selection, setText) {\r\n\t\t\t\tif (selection.start === selection.end) {\r\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(selection.start);\r\n\t\t\t\t\tvar lineText = model.getLine(lineIndex, false);\r\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\tvar lineOffset = selection.start - lineStart;\r\n\t\t\t\t\tvar c;\r\n\t\t\t\t\twhile (index < lineOffset && ((c = lineText.charCodeAt(index)) === 32 || c === 9)) { index++; }\r\n\t\t\t\t\tvar prefix = lineText.substring(0, index);\r\n\t\t\t\t\tvar lineTextBeforeCaret = lineText.substring(0, lineOffset);\r\n\t\t\t\t\tvar lineTextAfterCaret = lineText.substring(lineOffset);\r\n\t\t\t\t\tvar text;\r\n\t\t\t\t\t// If the character before the caret is an opening brace, smart indent the next line.\r\n\t\t\t\t\tvar prevCharIdx;\r\n\t\t\t\t\tif (self.smartIndentation && lineText.charCodeAt(prevCharIdx = lineTextBeforeCaret.trimRight().length - 1) === 123) {\r\n\t\t\t\t\t\t// Remove any extra whitespace\r\n\t\t\t\t\t\tvar whitespaceBeforeCaret = lineOffset - prevCharIdx - 1;\r\n\t\t\t\t\t\tvar whitespaceAfterCaret = lineTextAfterCaret.length - lineTextAfterCaret.trimLeft().length;\r\n\t\r\n\t\t\t\t\t\ttext = lineText.charCodeAt(lineOffset + whitespaceAfterCaret) === 125 ?\r\n\t\t\t\t\t\t\t   lineDelimiter + prefix + tab + lineDelimiter + prefix :\r\n\t\t\t\t\t\t\t   lineDelimiter + prefix + tab;\r\n\t\r\n\t\t\t\t\t\tsetText(text, selection.start - whitespaceBeforeCaret, selection.end + whitespaceAfterCaret);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length + prefix.length + tab.length - whitespaceBeforeCaret;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t// Proceed with autocompleting multi-line comment if the text before the caret matches\r\n\t\t\t\t\t// the start or comment delimiter (*) of a multi-line comment\r\n\t\t\t\t\t} else if (self.autoCompleteComments && !matchCommentEnd.test(lineTextBeforeCaret) &&\r\n\t\t\t\t\t\t\t\t(matchCommentStart.test(lineTextBeforeCaret) || matchCommentDelimiter.test(lineTextBeforeCaret))) {\r\n\t\t\t\t\t\tvar caretOffset;\r\n\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Matches the start of a multi-line comment. Autocomplete the multi-line block comment,\r\n\t\t\t\t\t\t * moving any text after the caret into the block comment and setting the caret to be\r\n\t\t\t\t\t\t * after the comment delimiter.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tvar match = matchCommentStart.exec(lineTextBeforeCaret);\r\n\t\t\t\t\t\tif (match) {\r\n\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \" * \"; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t// Text added into the comment block are trimmed of all preceding and trailing whitespaces.\r\n\t\t\t\t\t\t\t// If the text after the caret contains the ending of a block comment, exclude the ending.\r\n\t\t\t\t\t\t\tif (matchCommentEnd.test(lineTextAfterCaret)) {\r\n\t\t\t\t\t\t\t\ttext += lineTextAfterCaret.substring(0, lineTextAfterCaret.length - 2).trim();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttext += lineTextAfterCaret.trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Add the closing to the multi-line block comment if the next line is not a\r\n\t\t\t\t\t\t\t// comment delimiter.\r\n\t\t\t\t\t\t\tif ((model.getLineCount() === lineIndex + 1) ||\r\n\t\t\t\t\t\t\t\t!matchCommentDelimiter.test(model.getLine(lineIndex + 1))) {\r\n\t\t\t\t\t\t\t\ttext += lineDelimiter + prefix + \" */\"; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetText(text, selection.start, selection.end + lineTextAfterCaret.length);\r\n\t\t\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length + prefix.length + 3;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Matches a comment delimiter (*) as the start of the line, and traverses up the lines to confirm if\r\n\t\t\t\t\t\t * it is a multi-line comment by matching the start of a block comment. If so, continue the\r\n\t\t\t\t\t\t * multi-line comment in the next line. Any text that follows after the caret is moved to the newly\r\n\t\t\t\t\t\t * added comment delimiter.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tmatch = matchCommentDelimiter.exec(lineTextBeforeCaret);\r\n\t\t\t\t\t\tif (match) {\r\n\t\t\t\t\t\t\tfor (var i = lineIndex - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tvar prevLine = model.getLine(i, false);\r\n\t\t\t\t\t\t\t\tif (matchCommentStart.test(prevLine)) {\r\n\t\t\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t\t\t * If the text after the caret matches the end of a comment block or the character in front of the\r\n\t\t\t\t\t\t\t\t\t * caret is a forward slash, continue the block comment with the caret and text after the caret on\r\n\t\t\t\t\t\t\t\t\t * the next line directly in front of the star (*).\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\tif (matchCommentEnd.test(lineTextAfterCaret) || lineText.charCodeAt(lineOffset) === 47) {\r\n\t\t\t\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \"*\" + lineTextAfterCaret; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\t\tcaretOffset = selection.start + lineDelimiter.length + prefix.length + 1;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\ttext = lineDelimiter + prefix + \"* \" + lineTextAfterCaret; //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\t\t\tcaretOffset = selection.start + lineDelimiter.length + prefix.length + 2;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetText(text, selection.start, selection.end + lineTextAfterCaret.length);\r\n\t\t\t\t\t\t\t\t\tselection.start = selection.end = caretOffset;\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t} else if (!matchCommentDelimiter.test(prevLine)) {\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else if (matchCommentEnd.test(lineTextBeforeCaret) && prefix.charCodeAt(prefix.length - 1) === 32) {\r\n\t\t\t\t\t\t// Matches the end of a block comment. Fix the indentation for the following line.\r\n\t\t\t\t\t\ttext = lineDelimiter + prefix.substring(0, prefix.length - 1);\r\n\t\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + text.length;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else if (index > 0) {\r\n\t\t\t\t\t\t//TODO still wrong when typing inside folding\r\n\t\t\t\t\t\tindex = lineOffset;\r\n\t\t\t\t\t\twhile (index < lineText.length && ((c = lineText.charCodeAt(index++)) === 32 || c === 9)) { selection.end++; }\r\n\t\t\t\t\t\ttext = model.getLineDelimiter() + prefix;\r\n\t\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start = selection.end = selection.start + text.length;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tif (!indent(selection, setText)) {\r\n\t\t\t\t\tsetText(lineDelimiter, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + lineDelimiter.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\taddBlockComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar open, close;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tvar delimiters = styleAccessor.getBlockCommentDelimiters(selection.start);\r\n\t\t\t\t\topen = delimiters[0];\r\n\t\t\t\t\tclose = delimiters[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* fallback values */\r\n\t\t\t\t\topen = \"/*\"; //$NON-NLS-0$\r\n\t\t\t\t\tclose = \"*/\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = this._findEnclosingComment(model, selection.start, selection.end, open, close);\r\n\t\t\t\tif (result.commentStart !== undefined && result.commentEnd !== undefined) {\r\n\t\t\t\t\treturn; // Already in a comment\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar text = model.getText(selection.start, selection.end);\r\n\t\t\t\tif (text.length === 0) { return; }\r\n\t\r\n\t\t\t\tvar oldLength = text.length;\r\n\t\t\t\ttext = text.replace(open, \"\");\r\n\t\t\t\ttext = text.replace(close, \"\");\r\n\t\t\t\tvar newLength = text.length;\r\n\t\t\t\ttext = open + text + close;\r\n\t\r\n\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\tselection.start += open.length;\r\n\t\t\t\tselection.end +=  open.length + (newLength - oldLength);\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called on an opening bracket keypress.\r\n\t\t * Automatically inserts the specified opening and closing brackets around the caret or selected text.\r\n\t\t */\r\n\t\tautoPairBrackets: function(openBracket, closeBracket) {\r\n\t\t\tif (openBracket === \"[\" && !this.autoPairSquareBrackets) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"{\" && !this.autoPairBraces) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"(\" && !this.autoPairParentheses) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (openBracket === \"<\" && !this.autoPairAngleBrackets) { //$NON-NLS-0$\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar isClosingBracket = new RegExp(\"^$|[)}\\\\]>]\"); //$NON-NLS-0$ // matches any empty string and closing bracket\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1).trim(); //$NON-NLS-0$\r\n\t\t\t\tvar text;\r\n\t\t\t\tif (selection.start === selection.end && isClosingBracket.test(nextChar)) {\r\n\t\t\t\t\t// No selection and subsequent character is not a closing bracket - wrap the caret with the opening and closing brackets,\r\n\t\t\t\t\t// and maintain the caret position inbetween the brackets\r\n\t\t\t\t\ttext = openBracket + closeBracket;\r\n\t\t\t\t\tsetText(text, selection.start, selection.start);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + 1;\r\n\t\t\t\t} else if (selection.start !== selection.end) {\r\n\t\t\t\t\t// Wrap the selected text with the specified opening and closing brackets and keep selection on text\r\n\t\t\t\t\ttext = openBracket + model.getText(selection.start, selection.end) + closeBracket;\r\n\t\t\t\t\tsetText(text, selection.start, selection.end);\r\n\t\t\t\t\tselection.start += 1;\r\n\t\t\t\t\tselection.end += 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetText(openBracket, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + openBracket.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called on a quotation mark keypress.\r\n\t\t * Automatically inserts a pair of the specified quotation around the caret the caret or selected text.\r\n\t\t */\r\n\t\tautoPairQuotations: function(quotation) {\r\n\t\t\tif (!this.autoPairQuotation) { return false; }\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar isQuotation = new RegExp(\"^\\\"$|^'$\"); //$NON-NLS-0$\r\n\t\t\tvar isAlpha = new RegExp(\"\\\\w\"); //$NON-NLS-0$\r\n\t\t\tvar isClosingBracket = new RegExp(\"^$|[)}\\\\]>]\"); //$NON-NLS-0$ // matches any empty string and closing bracket\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar prevChar = (selection.start === 0) ? \"\" : model.getText(selection.start - 1, selection.start).trim(); //$NON-NLS-0$\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1).trim(); //$NON-NLS-0$\r\n\t\t\t\tfunction insertQuotation() {\r\n\t\t\t\t\tsetText(quotation, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + quotation.length;\r\n\t\t\t\t}\r\n\t\t\t\t// Wrap the selected text with the specified opening and closing quotation marks and keep selection on text\r\n\t\t\t\tif (selection.start !== selection.end) {\r\n\t\t\t\t\tvar text = model.getText(selection.start, selection.end);\r\n\t\t\t\t\tif (isQuotation.test(text)) {\r\n\t\t\t\t\t\tinsertQuotation();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetText(quotation + text + quotation, selection.start, selection.end);\r\n\t\t\t\t\t\tselection.start += 1;\r\n\t\t\t\t\t\tselection.end += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (nextChar === quotation) {\r\n\t\t\t\t\t// Skip over the next character if it matches the specified quotation mark\r\n\t\t\t\t\tselection.start = selection.end = selection.start + 1;\r\n\t\t\t\t} else if (prevChar === quotation || isQuotation.test(nextChar) || isAlpha.test(prevChar) || !isClosingBracket.test(nextChar)) {\r\n\t\t\t\t\tinsertQuotation();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// No selection - wrap the caret with the opening and closing quotation marks, and maintain the caret position inbetween the quotations\r\n\t\t\t\t\tsetText(quotation + quotation, selection.start, selection.end);\r\n\t\t\t\t\tselection.start = selection.end = selection.start + quotation.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Called when a content assist proposal has been applied. Inserts the proposal into the\r\n\t\t * document. Activates Linked Mode if applicable for the selected proposal.\r\n\t\t * @param {orion.editor.ContentAssist#ProposalAppliedEvent} event\r\n\t\t */\r\n\t\tcontentAssistProposalApplied: function(event) {\r\n\t\t\t/*\r\n\t\t\t * The event.proposal is an object with this shape:\r\n\t\t\t * {   proposal: \"[proposal string]\", // Actual text of the proposal\r\n\t\t\t *     description: \"diplay string\", // Optional\r\n\t\t\t *     positions: [{\r\n\t\t\t *         offset: 10, // Offset of start position of parameter i\r\n\t\t\t *         length: 3  // Length of parameter string for parameter i\r\n\t\t\t *     }], // One object for each parameter; can be null\r\n\t\t\t *     escapePosition: 19, // Optional; offset that caret will be placed at after exiting Linked Mode.\r\n\t\t\t *     style: 'emphasis', // Optional: either emphasis, noemphasis, hr to provide custom styling for the proposal\r\n\t\t\t *     unselectable: false // Optional: if set to true, then this proposal cannnot be selected through the keyboard\r\n\t\t\t * }\r\n\t\t\t * Offsets are relative to the text buffer.\r\n\t\t\t */\r\n\t\t\tvar proposal = event.data.proposal;\r\n\r\n\t\t\t// If escapePosition is not provided, positioned the cursor at the end of the inserted text \r\n\t\t\tfunction escapePosition() {\r\n\t\t\t\tif (typeof proposal.escapePosition === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t\treturn proposal.escapePosition;\r\n\t\t\t\t}\r\n\t\t\t\treturn event.data.start + proposal.proposal.length;\r\n\t\t\t}\r\n\r\n\t\t\t//if the proposal specifies linked positions, build the model and enter linked mode\r\n\t\t\tif (Array.isArray(proposal.positions) && this.linkedMode) {\r\n\t\t\t\tvar positionGroups = [];\r\n\t\t\t\tproposal.positions.forEach(function(pos) {\r\n\t\t\t\t\t//ignore bad proposal values\r\n\t\t\t\t\t//@see https://bugs.eclipse.org/bugs/show_bug.cgi?id=513146\r\n\t\t\t\t\tif(typeof pos.offset === \"number\" && typeof pos.length === \"number\") {\r\n\t\t\t\t\t\tpositionGroups.push({positions: [{offset: pos.offset, length: pos.length}]});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(positionGroups.length > 0) {\r\n\t\t\t\t\tthis.linkedMode.enterLinkedMode({\r\n\t\t\t\t\t\tgroups: positionGroups,\r\n\t\t\t\t\t\tescapePosition: escapePosition()\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.editor.getTextView().setCaretOffset(escapePosition());\r\n\t\t\t\t}\r\n\t\t\t} else if (proposal.groups && proposal.groups.length > 0 && this.linkedMode) {\r\n\t\t\t\tthis.linkedMode.enterLinkedMode({\r\n\t\t\t\t\tgroups: proposal.groups,\r\n\t\t\t\t\tescapePosition: escapePosition()\r\n\t\t\t\t});\r\n\t\t\t} else if (typeof proposal.escapePosition === \"number\") { //$NON-NLS-0$\r\n\t\t\t\t//we don't want linked mode, but there is an escape position, so just set cursor position\r\n\t\t\t\tthis.editor.getTextView().setCaretOffset(proposal.escapePosition);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// On backspace keypress, checks if there are a pair of brackets or quotation marks to be deleted\r\n\t\tdeletePrevious: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tif (selection.start !== selection.end) { return; }\r\n\t\t\t\r\n\t\t\t\tvar prevChar = (selection.start === 0) ? \"\" : model.getText(selection.start - 1, selection.start); //$NON-NLS-0$\r\n\t\t\t\tvar nextChar = (selection.start === model.getCharCount()) ? \"\" : model.getText(selection.start, selection.start + 1); //$NON-NLS-0$\r\n\t\r\n\t\t\t\tif (prevChar === \"(\" && nextChar === \")\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"[\" && nextChar === \"]\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"{\" && nextChar === \"}\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"<\" && nextChar === \">\" || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === '\"' && nextChar === '\"' || //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tprevChar === \"'\" && nextChar === \"'\") { //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\t\t\tsetText(\"\", selection.start, selection.start + 1); //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t_findEnclosingComment: function(model, start, end, open, close) {\r\n\t\t\tvar firstLine = model.getLineAtOffset(start);\r\n\t\t\tvar lastLine = model.getLineAtOffset(end);\r\n\t\t\tvar i, line, extent, openPos, closePos;\r\n\t\t\tvar commentStart, commentEnd;\r\n\t\t\tfor (i = firstLine; i >= 0; i--) {\r\n\t\t\t\tline = model.getLine(i);\r\n\t\t\t\textent = (i === firstLine) ? start - model.getLineStart(firstLine) : line.length;\r\n\t\t\t\topenPos = line.lastIndexOf(open, extent);\r\n\t\t\t\tclosePos = line.lastIndexOf(close, extent);\r\n\t\t\t\tif (closePos > openPos) {\r\n\t\t\t\t\tbreak; // not inside a comment\r\n\t\t\t\t}\r\n\t\t\t\tif (openPos !== -1) {\r\n\t\t\t\t\tcommentStart = model.getLineStart(i) + openPos;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (i = lastLine; i < model.getLineCount(); i++) {\r\n\t\t\t\tline = model.getLine(i);\r\n\t\t\t\textent = (i === lastLine) ? end - model.getLineStart(lastLine) : 0;\r\n\t\t\t\topenPos = line.indexOf(open, extent);\r\n\t\t\t\tclosePos = line.indexOf(close, extent);\r\n\t\t\t\tif (openPos !== -1 && openPos < closePos) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (closePos !== -1) {\r\n\t\t\t\t\tcommentEnd = model.getLineStart(i) + closePos;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {commentStart: commentStart, commentEnd: commentEnd};\r\n\t\t},\r\n\t\tlineStart: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tforEachSelection(this, false, function(selection/*, setText*/) {\r\n\t\t\t\tvar caretOffset = selection.getCaret();\r\n\t\t\t\tvar lineIndex = model.getLineAtOffset(caretOffset);\r\n\t\t\t\tvar lineOffset = model.getLineStart(lineIndex);\r\n\t\t\t\tvar lineText = model.getLine(lineIndex);\r\n\t\t\t\tvar offset;\r\n\t\t\t\tfor (offset=0; offset<lineText.length; offset++) {\r\n\t\t\t\t\tvar c = lineText.charCodeAt(offset);\r\n\t\t\t\t\tif (!(c === 32 || c === 9)) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\toffset += lineOffset;\r\n\t\t\t\tif (caretOffset !== offset) {\r\n\t\t\t\t\tselection.setCaret(offset);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tselection.setCaret(lineOffset);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tremoveBlockComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\tforEachSelection(this, false, function(selection, setText) {\r\n\t\t\t\tvar open, close;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tvar delimiters = styleAccessor.getBlockCommentDelimiters(selection.start);\r\n\t\t\t\t\topen = delimiters[0];\r\n\t\t\t\t\tclose = delimiters[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/* fallback values, should not be needed */\r\n\t\t\t\t\topen = \"/*\"; //$NON-NLS-0$\r\n\t\t\t\t\tclose = \"*/\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Try to shrink selection to a comment block\r\n\t\t\t\tvar selectedText = model.getText(selection.start, selection.end);\r\n\t\t\t\tvar newStart, newEnd;\r\n\t\t\t\tvar i;\r\n\t\t\t\tfor (i = 0; i < selectedText.length; i++) {\r\n\t\t\t\t\tif (selectedText.substring(i, i + open.length) === open) {\r\n\t\t\t\t\t\tnewStart = selection.start + i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (; i < selectedText.length; i++) {\r\n\t\t\t\t\tif (selectedText.substring(i, i + close.length) === close) {\r\n\t\t\t\t\t\tnewEnd = selection.start + i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar text;\r\n\t\t\t\tif (newStart !== undefined && newEnd !== undefined) {\r\n\t\t\t\t\ttext = model.getText(newStart + open.length, newEnd);\r\n\t\t\t\t\tsetText(text, newStart, newEnd + close.length);\r\n\t\t\t\t\tselection.start = newStart;\r\n\t\t\t\t\tselection.end = newEnd;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Otherwise find enclosing comment block\r\n\t\t\t\t\tvar result = this._findEnclosingComment(model, selection.start, selection.end, open, close);\r\n\t\t\t\t\tif (!(result.commentStart === undefined || result.commentEnd === undefined)) {\r\n\t\t\t\t\t\ttext = model.getText(result.commentStart + open.length, result.commentEnd);\r\n\t\t\t\t\t\tsetText(text, result.commentStart, result.commentEnd + close.length);\r\n\t\t\t\t\t\tselection.start = selection.start - open.length;\r\n\t\t\t\t\t\tselection.end = selection.end - close.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\ttoggleLineComment: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar styleAccessor = editor.getStyleAccessor();\r\n\t\t\ttextView.setRedraw(false);\r\n\t\t\tforEachSelection(this, true, function(selection, setText) {\r\n\t\t\t\tvar firstLine = model.getLineAtOffset(selection.start);\r\n\t\t\t\tvar lastLine = model.getLineAtOffset(selection.end > selection.start ? selection.end - 1 : selection.end);\r\n\r\n\t\t\t\tvar comment;\r\n\t\t\t\tif (styleAccessor) {\r\n\t\t\t\t\tcomment = styleAccessor.getLineCommentDelimiter(model.getLineStart(firstLine));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcomment = \"//\"; /* fallback value */ //$NON-NLS-0$\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uncomment = true, lineIndices = [], index;\r\n\t\t\t\tfor (var i = firstLine; i <= lastLine; i++) {\r\n\t\t\t\t\tvar lineText = model.getLine(i, true);\r\n\t\t\t\t\tindex = lineText.indexOf(comment);\r\n\t\t\t\t\tlineIndices.push(index);\r\n\t\t\t\t\tif (!uncomment || index === -1) {\r\n\t\t\t\t\t\tuncomment = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (index !== 0) {\r\n\t\t\t\t\t\t\tvar j;\r\n\t\t\t\t\t\t\tfor (j = 0; j < index; j++) {\r\n\t\t\t\t\t\t\t\tvar c = lineText.charCodeAt(j);\r\n\t\t\t\t\t\t\t\tif (!(c === 32 || c === 9)) {\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuncomment = j === index;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar selStart, selEnd, l = comment.length, k;\r\n\t\t\t\tvar lineStart = model.getLineStart(firstLine);\r\n\t\t\t\tif (uncomment) {\r\n\t\t\t\t\tfor (k = lineIndices.length - 1; k >= 0; k--) {\r\n\t\t\t\t\t\tindex = lineIndices[k] + model.getLineStart(firstLine + k);\r\n\t\t\t\t\t\tsetText(\"\", index, index + l);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar lastLineStart = model.getLineStart(lastLine);\r\n\t\t\t\t\tselStart = lineStart === selection.start ? selection.start : selection.start - l;\r\n\t\t\t\t\tselEnd = selection.end - (l * (lastLine - firstLine + 1)) + (selection.end === lastLineStart + 1 ? l : 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (k = lineIndices.length - 1; k >= 0; k--) {\r\n\t\t\t\t\t\tindex = model.getLineStart(firstLine + k);\r\n\t\t\t\t\t\tsetText(comment, index, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tselStart = lineStart === selection.start ? selection.start : selection.start + l;\r\n\t\t\t\t\tselEnd = selection.end + (l * (lastLine - firstLine + 1));\r\n\t\t\t\t}\r\n\t\t\t\tselection.start = selStart;\r\n\t\t\t\tselection.end = selEnd;\r\n\t\t\t});\r\n\t\t\ttextView.setRedraw(true);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\ttrimTrailingWhitespaces: function() {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\teditor.getTextView().setRedraw(false);\r\n\t\t\tthis.startUndo();\r\n\t\t\tvar matchTrailingWhiteSpace = /(\\s+$)/;\r\n\t\t\tvar lineCount = model.getLineCount();\r\n\t\t\tfor (var i = 0; i < lineCount; i++) {\r\n\t\t\t\tvar lineText = model.getLine(i);\r\n\t\t\t\tvar match = matchTrailingWhiteSpace.exec(lineText);\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\tvar lineStartOffset = model.getLineStart(i);\r\n\t\t\t\t\tvar matchLength = match[0].length;\r\n\t\t\t\t\tvar start = lineStartOffset + match.index;\r\n\t\t\t\t\tmodel.setText(\"\", start, start + matchLength);\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Move the caret to its original position prior to the save. If the caret\r\n\t\t\t\t\t * was in the trailing whitespaces, move the caret to the end of the line.\r\n\t\t\t\t\t */\r\n\t\t\t\t\tselections.forEach(function(selection) {\r\n\t\t\t\t\t\tif (selection.start > start) {\r\n\t\t\t\t\t\t\tselection.start = Math.max(start, selection.start - matchLength);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (selection.start !== selection.end && selection.end > start) {\r\n\t\t\t\t\t\t\tselection.end = Math.max(start, selection.end - matchLength);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.endUndo();\r\n\t\t\teditor.setSelections(selections, false);\r\n\t\t\teditor.getTextView().setRedraw(true);\r\n\t\t},\r\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.startCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @name handleClosingBracket\r\n\t\t * @description When the user types a closing bracket we should skip auto-paired brackets and reduce indenting if\r\n\t\t * \t\t\t\twe are on a new line.\r\n\t\t * @function\r\n\t\t * @param closingChar {String} the closing bracket character\r\n\t\t * @returns returns <code>true</code> to skip printing the closing bracket, false to print it\r\n\t\t */\r\n\t\thandleClosingBracket: function(closingChar) {\r\n\t\t\tvar editor = this.editor;\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\tif (textView.getOptions(\"readonly\")) { return false; } //$NON-NLS-0$\r\n\t\t\tvar model = editor.getModel();\r\n\t\t\tvar selections = editor.getSelections();\r\n\t\t\tif (selections.length === 1 && selections[0].start === selections[0].end) {\r\n\t\t\t\t// If the next character is the same bracket close, skip it\r\n\t\t\t\tvar nextChar = selections[0].start === model.getCharCount() ? \"\" : model.getText(selections[0].start, selections[0].start + 1); //$NON-NLS-0$\r\n\t\t\t\tif (nextChar === closingChar) {\r\n\t\t\t\t\tselections[0].start = selections[0].end = selections[0].start + 1;\r\n\t\t\t\t\teditor.setSelections(selections);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t// If the close bracket is on a new line, reduce the indentation\r\n\t\t\t\tvar lineNum = model.getLineAtOffset(selections[0].start);\r\n\t\t\t\tvar line = model.getLine(lineNum, true);\r\n\t\t\t\tif (line.match(/^\\s*$/)){\r\n\t\t\t\t\tif(textView.getOptions(\"tabMode\")){ //$NON-NLS-1$\r\n\t\t\t\t\t\tvar tabSize = textView.getOptions(\"tabSize\"); //$NON-NLS-1$\r\n\t\t\t\t\t\tvar spaceTab = new Array(tabSize + 1).join(\" \"); //$NON-NLS-1$\r\n\t\t\t\t\t\tvar lineStart = model.getLineStart(lineNum);\r\n\t\t\t\t\t\tvar lineEnd = model.getLineEnd(lineNum);\r\n\t\t\t\t\t\tif (lineStart !== lineEnd) {\r\n\t\t\t\t\t\t\tif (line.indexOf(\"\\t\") === 0) { //$NON-NLS-1$\r\n\t\t\t\t\t\t\t\tline = line.substring(1);\r\n\t\t\t\t\t\t\t\tmodel.setText(line, lineStart, lineEnd);\r\n\t\t\t\t\t\t\t\teditor.setSelection(selections[0].start-1, selections[0].end-1);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t} else if (line.indexOf(spaceTab) === 0) {\r\n\t\t\t\t\t\t\t\tline = line.substring(tabSize);\r\n\t\t\t\t\t\t\t\tmodel.setText(line, lineStart, lineEnd);\r\n\t\t\t\t\t\t\t\teditor.setSelection(selections[0].start-tabSize, selections[0].end-tabSize);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetAutoPairParentheses: function(enabled) {\r\n\t\t\tthis.autoPairParentheses = enabled;\r\n\t\t},\r\n\t\tsetAutoPairBraces: function(enabled) {\r\n\t\t\tthis.autoPairBraces = enabled;\r\n\t\t},\r\n\t\tsetAutoPairSquareBrackets: function(enabled) {\r\n\t\t\tthis.autoPairSquareBrackets = enabled;\r\n\t\t},\r\n\t\tsetAutoPairAngleBrackets: function(enabled) {\r\n\t\t\tthis.autoPairAngleBrackets = enabled;\r\n\t\t},\r\n\t\tsetAutoPairQuotations: function(enabled) {\r\n\t\t\tthis.autoPairQuotation = enabled;\r\n\t\t},\r\n\t\tsetAutoCompleteComments: function(enabled) {\r\n\t\t\tthis.autoCompleteComments = enabled;\r\n\t\t},\r\n\t\tsetSmartIndentation: function(enabled) {\r\n\t\t\tthis.smartIndentation = enabled;\r\n\t\t}\r\n\t};\r\n\texports.SourceCodeActions = SourceCodeActions;\r\n\r\n\tif (!String.prototype.trimLeft) {\r\n\t\tString.prototype.trimLeft = function(){\r\n\t\t\treturn this.replace(/^\\s+/g, '');\r\n\t\t};\r\n\t}\r\n\tif (!String.prototype.trimRight) {\r\n\t\tString.prototype.trimRight = function(){\r\n\t\t\treturn this.replace(/\\s+$/g, '');\r\n\t\t};\r\n\t}\r\n\r\n\treturn exports;\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/undoStack\", [], function() { //$NON-NLS-0$\n\n\t/** \n\t * Constructs a new Change object.\n\t * \n\t * @class \n\t * @name orion.editor.Change\n\t * @private\n\t */\n\tfunction Change(model, offset, text, previousText, type) {\n\t\tthis.model = model;\n\t\tthis.offset = offset;\n\t\tthis.text = text;\n\t\tthis.previousText = previousText;\n\t\tthis.type = type;\n\t}\n\tChange.prototype = {\n\t\t/** @ignore */\n\t\tgetRedoChanges: function() {\n\t\t\treturn [{start: this.offset, end: this.offset + this.previousText.length, text: this.text}];\n\t\t},\n\t\t/** @ignore */\n\t\tgetUndoChanges: function() {\n\t\t\treturn [{start: this.offset, end: this.offset + this.text.length, text: this.previousText}];\n\t\t},\n\t\t/** @ignore */\n\t\tundo: function (view, select) {\n\t\t\tthis._doUndoRedo(this.offset, this.previousText, this.text, view, select);\n\t\t\treturn true;\n\t\t},\n\t\t/** @ignore */\n\t\tredo: function (view, select) {\n\t\t\tthis._doUndoRedo(this.offset, this.text, this.previousText, view, select);\n\t\t\treturn true;\n\t\t},\n\t\tmerge: function(start, text, previousText, type, end) {\n\t\t\tif (type === this.type) {\n\t\t\t\tif (type === 1 && start === this.offset + this.text.length) {\n\t\t\t\t\tthis.text += text;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (type === -1 && end === this.offset) {\n\t\t\t\t\tthis.offset = start;\n\t\t\t\t\tthis.previousText = previousText + this.previousText;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (type === -1 && start === this.offset) {\n\t\t\t\t\tthis.previousText = this.previousText + previousText;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_doUndoRedo: function(offset, text, previousText, view, select) {\n\t\t\tthis.model.setText(text, offset, offset + previousText.length);\n\t\t\tif (select && view) {\n\t\t\t\tvar model = view.getModel();\n\t\t\t\tif (model !== this.model) {\n\t\t\t\t\toffset = model.mapOffset(offset, true);\n\t\t\t\t}\n\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t}\n\t\t}\n\t};\n\n\t/** \n\t * Constructs a new CompoundChange object.\n\t * \n\t * @param owner the owner of the compound change\n\t *\n\t * @class \n\t * @name orion.editor.CompoundChange\n\t * @private\n\t */\n\tfunction CompoundChange (owner) {\n\t\tthis.owner = owner;\n\t\tthis.changes = [];\n\t}\n\tCompoundChange.prototype = {\n\t\t/** @ignore */\n\t\tgetRedoChanges: function() {\n\t\t\tvar changes = [];\n\t\t\tfor (var i=0; i<this.changes.length; i++) {\n\t\t\t\tchanges = changes.concat(this.changes[i].getRedoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/** @ignore */\n\t\tgetUndoChanges: function() {\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.changes.length - 1; i >= 0; i--) {\n\t\t\t\tchanges = changes.concat(this.changes[i].getUndoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/** @ignore */\n\t\tadd: function (change) {\n\t\t\tthis.changes.push(change);\n\t\t},\n\t\t/** @ignore */\n\t\tend: function (view) {\n\t\t\tif (view) {\n\t\t\t\tthis.endSelection = view.getSelections();\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.end) {\n\t\t\t\towner.end();\n\t\t\t}\n\t\t},\n\t\t/** @ignore */\n\t\tundo: function (view, select) {\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(false);\n\t\t\t}\n\t\t\tfor (var i=this.changes.length - 1; i >= 0; i--) {\n\t\t\t\tthis.changes[i].undo(view, false);\n\t\t\t}\n\t\t\tif (select && view) {\n\t\t\t\tview.setSelections(this.startSelection);\n\t\t\t}\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(true);\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.undo) {\n\t\t\t\towner.undo();\n\t\t\t}\n\t\t\treturn this.changes.length > 0;\n\t\t},\n\t\t/** @ignore */\n\t\tredo: function (view, select) {\n\t\t\tif (this.changes.length > 1 && view) {\n\t\t\t\tview.setRedraw(false);\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.changes.length; i++) {\n\t\t\t\tthis.changes[i].redo(view, false);\n\t\t\t}\n\t\t\tif (select && view) {\n\t\t\t\tview.setSelections(this.endSelection);\n\t\t\t}\n\t\t\tif (this.changes.length > 1, view) {\n\t\t\t\tview.setRedraw(true);\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.redo) {\n\t\t\t\towner.redo();\n\t\t\t}\n\t\t\treturn this.changes.length > 0;\n\t\t},\n\t\tmerge: function(start, text, previousText, type, end, compoundChange) {\n\t\t\tvar length = this.changes.length;\n\t\t\tif (length > 0 && this === compoundChange) {\n\t\t\t\treturn this.changes[length - 1].merge(start, text, previousText, type, end);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/** @ignore */\n\t\tstart: function (view) {\n\t\t\tif (view) {\n\t\t\t\tthis.startSelection = view.getSelections();\n\t\t\t}\n\t\t\tvar owner = this.owner;\n\t\t\tif (owner && owner.start) {\n\t\t\t\towner.start();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Constructs a new UndoStack on a text view.\n\t *\n\t * @param {orion.editor.TextView} view the text view for the undo stack.\n\t * @param {Number} [size=100] the size for the undo stack.\n\t *\n\t * @name orion.editor.UndoStack\n\t * @class The UndoStack is used to record the history of a text model associated to an view. Every\n\t * change to the model is added to stack, allowing the application to undo and redo these changes.\n\t *\n\t * <p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.TextView}<br/>\n\t * </p>\n\t */\n\tfunction UndoStack (view, size) {\n\t\tthis.size = size !== undefined ? size : 100;\n\t\tthis.reset();\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanging: function(e) {\n\t\t\t\tself._onChanging(e);\n\t\t\t},\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t}\n\t\t};\n\t\tif (view.getModel) {\n\t\t\tvar model = view.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\tthis.model = model;\n\t\t\tthis.setView(view);\n\t\t} else {\n\t\t\tthis.shared = true;\n\t\t\tthis.model = view;\n\t\t}\n\t\tthis.model.addEventListener(\"Changing\", this._listener.onChanging); //$NON-NLS-0$\n\t}\n\tUndoStack.prototype = /** @lends orion.editor.UndoStack.prototype */ {\n\t\t/**\n\t\t * Destroy the undo stack.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis._onDestroy();\n\t\t},\n\t\t/**\n\t\t * Adds a change to the stack.\n\t\t * \n\t\t * @param change the change to add.\n\t\t */\n\t\tadd: function (change) {\n\t\t\tif (this.compoundChange) {\n\t\t\t\tthis.compoundChange.add(change);\n\t\t\t} else {\n\t\t\t\tvar length = this.stack.length;\n\t\t\t\tthis.stack.splice(this.index, length-this.index, change);\n\t\t\t\tthis.index++;\n\t\t\t\tif (this.stack.length > this.size) {\n\t\t\t\t\tthis.stack.shift();\n\t\t\t\t\tthis.index--;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/** \n\t\t * Marks the current state of the stack as clean.\n\t\t *\n\t\t * <p>\n\t\t * This function is typically called when the content of view associated with the stack is saved.\n\t\t * </p>\n\t\t *\n\t\t * @see orion.editor.UndoStack#isClean\n\t\t */\n\t\tmarkClean: function() {\n\t\t\tthis._commitUndo();\n\t\t\tthis.cleanChange = this.stack[this.index - 1];\n\t\t\tif (this.cleanChange) {\n\t\t\t\tthis.cleanChange.type = 2;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Returns true if current state of stack is the same\n\t\t * as the state when markClean() was called.\n\t\t *\n\t\t * <p>\n\t\t * For example, the application calls markClean(), then calls undo() four times and redo() four times.\n\t\t * At this point isClean() returns true.  \n\t\t * </p>\n\t\t * <p>\n\t\t * This function is typically called to determine if the content of the view associated with the stack\n\t\t * has changed since the last time it was saved.\n\t\t * </p>\n\t\t *\n\t\t * @return {Boolean} returns if the state is the same as the state when markClean() was called.\n\t\t *\n\t\t * @see orion.editor.UndoStack#markClean\n\t\t */\n\t\tisClean: function() {\n\t\t\treturn this.cleanChange === this.stack[this.index - 1];\n\t\t},\n\t\t/**\n\t\t * Returns true if there is at least one change to undo.\n\t\t *\n\t\t * @return {Boolean} returns true if there is at least one change to undo.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t * @see orion.editor.UndoStack#undo\n\t\t */\n\t\tcanUndo: function() {\n\t\t\treturn this.index > 0;\n\t\t},\n\t\t/**\n\t\t * Returns true if there is at least one change to redo.\n\t\t *\n\t\t * @return {Boolean} returns true if there is at least one change to redo.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t * @see orion.editor.UndoStack#redo\n\t\t */\n\t\tcanRedo: function() {\n\t\t\treturn (this.stack.length - this.index) > 0;\n\t\t},\n\t\t/**\n\t\t * Finishes a compound change.\n\t\t *\n\t\t * @see orion.editor.UndoStack#startCompoundChange\n\t\t */\n\t\tendCompoundChange: function() {\n\t\t\tif (this.compoundChange) {\n\t\t\t\tthis.compoundChange.end(this.view);\n\t\t\t}\n\t\t\tthis.compoundChange = undefined;\n\t\t},\n\t\t/**\n\t\t * Returns the sizes of the stack.\n\t\t *\n\t\t * @return {object} a object where object.undo is the number of changes that can be un-done, \n\t\t *  and object.redo is the number of changes that can be re-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t */\n\t\tgetSize: function() {\n\t\t\treturn {\n\t\t\t\tundo: this.index,\n\t\t\t\tredo: this.stack.length - this.index\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * @class This object represents a text change.\n\t\t * <p>\n\t\t * <b>See:</b><br/>\n\t\t * {@link orion.editor.UndoStack}<br/>\n\t\t * {@link orion.editor.UndoStack#getUndoChanges}<br/>\n\t\t * {@link orion.editor.UndoStack#getRedoChanges}<br/>\n\t\t * </p>\n\t\t * @name orion.editor.TextChange\n\t\t * \n\t\t * @property {Number} start The start offset in the model of the range to be replaced.\n\t\t * @property {Number} end The end offset in the model of the range to be replaced\n\t\t * @property {String} text the text to be inserted\n\t\t */\n\t\t/**\n\t\t * Returns the redo changes.\n\t\t *\n\t\t * @return {orion.editor.TextChange[]} an array of TextChanges that are returned in the order\n\t\t * that they occurred (most recent change last).\n\t\t *\n\t\t * @see orion.editor.UndoStack#getUndoChanges\n\t\t */\n\t\tgetRedoChanges: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.index; i<this.stack.length; i++) {\n\t\t\t\tchanges = changes.concat(this.stack[i].getRedoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/**\n\t\t * Returns the undo changes.\n\t\t *\n\t\t * @return {orion.editor.TextChange[]} an array of TextChanges that are returned in the reverse order\n\t\t * that they occurred (most recent change first).\n\t\t *\n\t\t * @see orion.editor.UndoStack#getRedoChanges\n\t\t */\n\t\tgetUndoChanges: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar changes = [];\n\t\t\tfor (var i=this.index; i >= 0; i--) {\n\t\t\t\tchanges = changes.concat(this.stack[i].getUndoChanges());\n\t\t\t}\n\t\t\treturn changes;\n\t\t},\n\t\t/**\n\t\t * Undo the last change in the stack.\n\t\t *\n\t\t * @return {Boolean} returns true if a change was un-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#redo\n\t\t * @see orion.editor.UndoStack#canUndo\n\t\t */\n\t\tundo: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar change, result = false;\n\t\t\tthis._ignoreUndo = true;\n\t\t\tdo {\n\t\t\t\tif (this.index <= 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tchange = this.stack[--this.index];\n\t\t\t} while (!(result = change.undo(this.view, true)));\n\t\t\tthis._ignoreUndo = false;\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Redo the last change in the stack.\n\t\t *\n\t\t * @return {Boolean} returns true if a change was re-done.\n\t\t *\n\t\t * @see orion.editor.UndoStack#undo\n\t\t * @see orion.editor.UndoStack#canRedo\n\t\t */\n\t\tredo: function() {\n\t\t\tthis._commitUndo();\n\t\t\tvar change, result = false;\n\t\t\tthis._ignoreUndo = true;\n\t\t\tdo {\n\t\t\t\tif (this.index >= this.stack.length) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tchange = this.stack[this.index++];\n\t\t\t} while (!(result = change.redo(this.view, true)));\n\t\t\tthis._ignoreUndo = false;\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Reset the stack to its original state. All changes in the stack are thrown away.\n\t\t */\n\t\treset: function() {\n\t\t\tthis.index = 0;\n\t\t\tthis.cleanChange = undefined;\n\t\t\tthis.stack = [];\n\t\t\tthis._ignoreUndo = false;\n\t\t\tthis._compoundChange = undefined;\n\t\t},\n\t\tsetView: function(view) {\n\t\t\tif (this.view === view) { return; }\n\t\t\tif (this.view) {\n\t\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis.view = view;\n\t\t\tif (this.view) {\n\t\t\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Starts a compound change. \n\t\t * <p>\n\t\t * All changes added to stack from the time startCompoundChange() is called\n\t\t * to the time that endCompoundChange() is called are compound on one change that can be un-done or re-done\n\t\t * with one single call to undo() or redo().\n\t\t * </p>\n\t\t *\n\t\t * @param owner the owner of the compound change which is called for start, end, undo and redo.\n\t\t *\t\t \n\t\t * @return the compound change\n\t\t *\n\t\t * @see orion.editor.UndoStack#endCompoundChange\n\t\t */\n\t\tstartCompoundChange: function(owner) {\n\t\t\tthis._commitUndo();\n\t\t\tvar change = new CompoundChange(owner);\n\t\t\tthis.add(change);\n\t\t\tthis.compoundChange = change;\n\t\t\tthis.compoundChange.start(this.view);\n\t\t\treturn this.compoundChange;\n\t\t},\n\t\t_commitUndo: function () {\n\t\t\tthis.endCompoundChange();\n\t\t},\n\t\t_onDestroy: function(evt) {\n\t\t\tif (!evt /* undo stack destroyed */ || !this.shared) {\n\t\t\t\tthis.model.removeEventListener(\"Changing\", this._listener.onChanging); //$NON-NLS-0$\n\t\t\t}\n\t\t\tif (this.view) {\n\t\t\t\tthis.view.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t},\n\t\t_trackUnsavedChanges: function(e) {\n\t\t\tif (!this._unsavedChanges) return;\n\t\t\tvar length = this._unsavedChanges.length;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar start = e.start;\n\t\t\tvar end = e.start + removedCharCount;\n\t\t\tvar type = 0;\n\t\t\tif (addedCharCount === 0) {\n\t\t\t\ttype = -1;\n\t\t\t} else if (removedCharCount === 0) {\n\t\t\t\ttype = 1;\n\t\t\t}\n\t\t\tif (length > 0) {\n\t\t\t\tif (type === this._previousChangeType) {\n\t\t\t\t\tvar previousChange = this._unsavedChanges[length-1];\n\t\t\t\t\tif (removedCharCount === 0 && start === previousChange.end + previousChange.text.length) {\n\t\t\t\t\t\tpreviousChange.text += e.text;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.addedCharCount === 0 && end === previousChange.start) {\n\t\t\t\t\t\tpreviousChange.start = start;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._previousChangeType = type;\n\t\t\tthis._unsavedChanges.push({start:start, end:end, text:e.text});\n\t\t},\n\t\t_onChanging: function(e) {\n\t\t\tthis._trackUnsavedChanges(e);\n\t\t\tif (this._ignoreUndo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar text = e.text;\n\t\t\tvar start = e.start;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar end = start + removedCharCount;\n\t\t\tvar type = 0;\n\t\t\tif (addedCharCount === 0 && removedCharCount === 1) {\n\t\t\t\ttype = -1;\n\t\t\t} else if (addedCharCount === 1 && removedCharCount === 0) {\n\t\t\t\ttype = 1;\n\t\t\t}\n\t\t\tvar length = this.stack.length;\n\t\t\tvar previousText = this.model.getText(start, end);\n\t\t\tif (length > 0 && this.index === length) {\n\t\t\t\tvar change = this.stack[length - 1];\n\t\t\t\tif (change.merge(start, text, previousText, type, end, this.compoundChange)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.add(new Change(this.model, start, text, previousText, type));\n\t\t}\n\t};\n\t\n\treturn {\n\t\tUndoStack: UndoStack\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: IBM Corporation - initial API and implementation\n ******************************************************************************/\n\n/**\n * @class Provides the various rulers that show up on the left and right sides of the editor.  The rulers\n * \t\t\tcontain annotations with varying styles, hovers and on click behaviours.\n */\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/rulers\", [\n\t'i18n!orion/editor/nls/messages',\n\t'orion/editor/textView',\n\t'orion/editor/annotations',\n\t'orion/editor/tooltip', \n\t'orion/objects',\n\t'orion/editor/util',\n\t'orion/util'\n], function(messages, mTextView, mAnnotations, mTooltip, objects, textUtil, util) {\n\n\tfunction BaseRuler (rulerLocation, rulerOverview, rulerStyle) {\n\t\tthis._location = rulerLocation || \"left\"; //$NON-NLS-0$\n\t\tthis._overview = rulerOverview || \"page\"; //$NON-NLS-0$\n\t\tthis._rulerStyle = rulerStyle;\n\t\tthis._view = null;\n\t}\n\tBaseRuler.prototype = /** @lends orion.editor.BaseRuler.prototype */ {\n\t\t/**\n\t\t * Returns the ruler location.\n\t\t *\n\t\t * @returns {String} the ruler location, which is either \"left\" or \"right\" or \"margin\".\n\t\t *\n\t\t * @see orion.editor.Ruler#getOverview\n\t\t */\n\t\tgetLocation: function() {\n\t\t\treturn this._location;\n\t\t},\n\t\t/**\n\t\t * Returns the ruler overview type.\n\t\t *\n\t\t * @returns {String} the overview type, which is either \"page\" or \"document\" or \"fixed\".\n\t\t *\n\t\t * @see orion.editor.Ruler#getLocation\n\t\t */\n\t\tgetOverview: function() {\n\t\t\treturn this._overview;\n\t\t},\n\t\t/**\n\t\t * Returns the style information for the ruler.\n\t\t *\n\t\t * @returns {orion.editor.Style} the style information.\n\t\t */\n\t\tgetRulerStyle: function() {\n\t\t\treturn this._rulerStyle;\n\t\t},\n\t\t/**\n\t\t * Returns the text view.\n\t\t *\n\t\t * @returns {orion.editor.TextView} the text view.\n\t\t *\n\t\t * @see orion.editor.Ruler#setView\n\t\t */\n\t\tgetView: function() {\n\t\t\treturn this._view;\n\t\t},\n\t\t/**\n\t\t * Sets the view for the ruler.\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler\n\t\t * is added to the view.\n\t\t * </p>\n\t\t *\n\t\t * @param {orion.editor.TextView} view the text view.\n\t\t */\n\t\tsetView: function (view) {\n\t\t\tif (this._onTextModelChanged && this._view) {\n\t\t\t\tthis._view.removeEventListener(\"ModelChanged\", this._listener.onTextModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._view = view;\n\t\t\tif (this._onTextModelChanged && this._view) {\n\t\t\t\tthis._view.addEventListener(\"ModelChanged\", this._listener.onTextModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t};\n\n\t/**\n\t * Constructs a new ruler. \n\t * <p>\n\t * The default implementation does not implement all the methods in the interface\n\t * and is useful only for objects implementing rulers.\n\t * <p/>\n\t * \n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {String} [rulerOverview=\"page\"] the overview for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle] the style for the ruler. \n\t * \n\t * @class This interface represents a ruler for the text view.\n\t * <p>\n\t * A Ruler is a graphical element that is placed either on the left or on the right side of \n\t * the view. It can be used to provide the view with per line decoration such as line numbering,\n\t * bookmarks, breakpoints, folding disclosures, etc. \n\t * </p><p>\n\t * There are two types of rulers: page and document. A page ruler only shows the content for the lines that are\n\t * visible, while a document ruler always shows the whole content.\n\t * </p>\n\t * <b>See:</b><br/>\n\t * {@link orion.editor.LineNumberRuler}<br/>\n\t * {@link orion.editor.AnnotationRuler}<br/>\n\t * {@link orion.editor.OverviewRuler}<br/> \n\t * {@link orion.editor.TextView}<br/>\n\t * {@link orion.editor.TextView#addRuler}\n\t * </p>\t\t \n\t * @name orion.editor.Ruler\n\t * @borrows orion.editor.AnnotationTypeList#addAnnotationType as #addAnnotationType\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationTypePriority as #getAnnotationTypePriority\n\t * @borrows orion.editor.AnnotationTypeList#getAnnotationsByType as #getAnnotationsByType\n\t * @borrows orion.editor.AnnotationTypeList#isAnnotationTypeVisible as #isAnnotationTypeVisible\n\t * @borrows orion.editor.AnnotationTypeList#removeAnnotationType as #removeAnnotationType\n\t */\n\tfunction Ruler (annotationModel, rulerLocation, rulerOverview, rulerStyle) {\n\t\tBaseRuler.call(this, rulerLocation, rulerOverview, rulerStyle);\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonTextModelChanged: function(e) {\n\t\t\t\tself._onTextModelChanged(e);\n\t\t\t},\n\t\t\tonAnnotationModelChanged: function(e) {\n\t\t\t\tself._onAnnotationModelChanged(e);\n\t\t\t}\n\t\t};\n\t\tthis.setAnnotationModel(annotationModel);\n\t}\n\tRuler.prototype = objects.mixin(new BaseRuler(), /** @lends orion.editor.Ruler.prototype */ {\n\t\t/**\n\t\t * Returns the annotations for a given line range merging multiple\n\t\t * annotations when necessary.\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler is redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @param {Number} startLine the start line index\n\t\t * @param {Number} endLine the end line index\n\t\t * @return {orion.editor.Annotation[]} the annotations for the line range. The array might be sparse.\n\t\t */\n\t\tgetAnnotations: function(startLine, endLine) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tif (!annotationModel) { return []; }\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar start = model.getLineStart(startLine);\n\t\t\tvar end = model.getLineEnd(endLine - 1);\n\t\t\tvar baseModel = model;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tbaseModel = model.getBaseModel();\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tend = model.mapOffset(end);\n\t\t\t}\n\t\t\tvar result = [];\n\t\t\tvar annotations = this.getAnnotationsByType(annotationModel, start, end);\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tvar annotation = annotations[i];\n\t\t\t\tvar annotationLineStart = baseModel.getLineAtOffset(annotation.start);\n\t\t\t\tvar annotationLineEnd = baseModel.getLineAtOffset(Math.max(annotation.start, annotation.end - 1));\n\t\t\t\tfor (var lineIndex = annotationLineStart; lineIndex<=annotationLineEnd; lineIndex++) {\n\t\t\t\t\tvar visualLineIndex = lineIndex;\n\t\t\t\t\tif (model !== baseModel) {\n\t\t\t\t\t\tvar ls = baseModel.getLineStart(lineIndex);\n\t\t\t\t\t\tls = model.mapOffset(ls, true);\n\t\t\t\t\t\tif (ls === -1) { continue; }\n\t\t\t\t\t\tvisualLineIndex = model.getLineAtOffset(ls);\n\t\t\t\t\t}\n\t\t\t\t\tif (!(startLine <= visualLineIndex && visualLineIndex < endLine)) { continue; }\n\t\t\t\t\tvar rulerAnnotation = this._mergeAnnotation(result[visualLineIndex], annotation, lineIndex - annotationLineStart, annotationLineEnd - annotationLineStart + 1);\n\t\t\t\t\tif (rulerAnnotation) {\n\t\t\t\t\t\tresult[visualLineIndex] = rulerAnnotation;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this._multiAnnotation && this._multiAnnotationOverlay) {\n\t\t\t\tfor (var k in result) {\n\t\t\t\t\tif (result[k]._multiple) {\n\t\t\t\t\t\tresult[k].html = result[k].html + this._multiAnnotationOverlay.html;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Returns the annotation model.\n\t\t *\n\t\t * @returns {orion.editor.AnnotationModel} the ruler annotation model.\n\t\t *\n\t\t * @see orion.editor.Ruler#setAnnotationModel\n\t\t */\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\t/**\n\t\t * Returns the widest annotation which determines the width of the ruler.\n\t\t * <p>\n\t\t * If the ruler does not have a fixed width it should provide the widest\n\t\t * annotation to avoid the ruler from changing size as the view scrolls.\n\t\t * </p>\n\t\t * <p>\n\t\t * This method is called by the text view when the ruler is redrawn.\n\t\t * </p>\n\t\t *\n\t\t * @returns {orion.editor.Annotation} the widest annotation.\n\t\t *\n\t\t * @see orion.editor.Ruler#getAnnotations\n\t\t */\n\t\tgetWidestAnnotation: function() {\n\t\t\treturn null;\n\t\t},\n\t\t/**\n\t\t * Sets the annotation model for the ruler.\n\t\t *\n\t\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model.\n\t\t *\n\t\t * @see orion.editor.Ruler#getAnnotationModel\n\t\t */\n\t\tsetAnnotationModel: function (annotationModel) {\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.removeEventListener(\"Changed\", this._listener.onAnnotationModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._annotationModel = annotationModel;\n\t\t\tif (this._annotationModel) {\n\t\t\t\tthis._annotationModel.addEventListener(\"Changed\", this._listener.onAnnotationModelChanged); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Sets the annotation that is displayed when a given line contains multiple\n\t\t * annotations.  This annotation is used when there are different types of\n\t\t * annotations in a given line.\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation for lines with multiple annotations.\n\t\t * \n\t\t * @see orion.editor.Ruler#setMultiAnnotationOverlay\n\t\t */\n\t\tsetMultiAnnotation: function(annotation) {\n\t\t\tthis._multiAnnotation = annotation;\n\t\t},\n\t\t/**\n\t\t * Sets the annotation that overlays a line with multiple annotations.  This annotation is displayed on\n\t\t * top of the computed annotation for a given line when there are multiple annotations of the same type\n\t\t * in the line. It is also used when the multiple annotation is not set.\n\t\t *\n\t\t * @param {orion.editor.Annotation} annotation the annotation overlay for lines with multiple annotations.\n\t\t * \n\t\t * @see orion.editor.Ruler#setMultiAnnotation\n\t\t */\n\t\tsetMultiAnnotationOverlay: function(annotation) {\n\t\t\tthis._multiAnnotationOverlay = annotation;\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user clicks a line annotation. We select an annotation on the line using\n\t\t * the following logic:\n\t\t * 1) If no selection or selection is on another line, select the first annotation\n\t\t * 2) If an annotation is selected, select the next annotation in the model\n\t\t * 3) If there is a selection that does not match an annotation, select the first annotation after the selection start\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the click event.\n\t\t */\n\t\tonClick: function(lineIndex, e) {\n\t\t\tif (lineIndex === undefined) { return; }\n\t\t\tvar view = this._view;\n\t\t\t\n\t\t\tvar model = view.getModel();\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex, true);\n\t\t\tvar selectionStart = view.getSelection().start;\n\t\t\tvar selectionEnd = view.getSelection().end;\n\t\t\t\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar annotation, start, end;\n\t\t\tif (annotationModel){\n\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tlineStart = model.mapOffset(lineStart);\n\t\t\t\t\tlineEnd = model.mapOffset(lineEnd);\n\t\t\t\t\tselectionStart = model.mapOffset(selectionStart);\n\t\t\t\t\tselectionEnd = model.mapOffset(selectionEnd);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar self = this;\n\t\t\t\tannotation = this._findNextAnnotation(annotationModel, lineStart, lineEnd, selectionStart, selectionEnd, \n\t\t\t\t\tfunction(annotationType){\n\t\t\t\t\t\treturn self.isAnnotationTypeVisible(annotationType);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t// Select the annotation or the start of the line\n\t\t\t\tstart = annotation ? annotation.start : lineStart;\n\t\t\t\tend = annotation ? annotation.end : lineStart;\n\t\t\t\t\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// TODO What does this code do\n\t\t\t\tif (annotation && annotation.groupId !== undefined) {\n\t\t\t\t\tif (this._currentClickGroup === annotation.groupId) {\n\t\t\t\t\t\tthis._currentClickGroup = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._currentClickGroup = annotation.groupId;\n\t\t\t\t\t}\n\t\t\t\t\tthis._setCurrentGroup(lineIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar evt = {\n\t\t\t\ttype: \"AnnotationClicked\",\n\t\t\t\ttarget: self,\n\t\t\t\ttargetType: \"Ruler\",\n\t\t\t\tannotation: annotation,\n\t\t\t\tselection: {\n\t\t\t\t\tstart: start,\n\t\t\t\t\tend: end,\n\t\t\t\t\tviewportOffset: 1 / 3\n\t\t\t\t},\n\t\t\t\tshowTooltip: true\n\t\t\t};\n\t\t\tthis._view.dispatchEvent(evt);\n\t\t\t// Set the selection before opening the tooltip otherwise the tooltip will be closed immediately\n\t\t\tif(evt.selection) {\n\t\t\t\tthis._view.setSelection(evt.selection.start, evt.selection.end, evt.selection.viewportOffset, function(){});\n\t \t\t}\n\n\n\t\t\t// Open the tooltip for the selected annotation in the same location as the multi-annotation ruler tooltip.\n\t\t\tif(evt.showTooltip) {\n\t\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\t\tif (tooltip) {\n\t\t\t\t\tif (annotation && this.getLocation() === \"left\"){ //$NON-NLS-0$\n\t\t\t\t\t\ttooltip.show({getTooltipInfo: function() {\n\t\t\t\t\t\t\t\treturn self._getTooltipInfo([annotation]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, false, false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttooltip.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user double clicks a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the double click event.\n\t\t * @callback\n\t\t */\n\t\tonDblClick: function(lineIndex, e) {\n\t\t},\n\t\t/**\n\t\t * This event is sent when the user moves the mouse over a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse move event.\n\t\t */\n\t\tonMouseMove: function(lineIndex, e) {\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\tif (!tooltip) { return; }\n\t\t\tif (tooltip.isVisible() && this._tooltipLineIndex === lineIndex) { return; }\n\t\t\tthis._tooltipLineIndex = lineIndex;\n\t\t\t\n\t\t\t// Prevent spurious mouse event (e.g. on a scroll)\t\t\t\t\t\n\t\t\tif (e.clientX === this._lastMouseX\n\t\t\t\t&& e.clientY === this._lastMouseY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._lastMouseX = e.clientX;\n\t\t\tthis._lastMouseY = e.clientY;\n\n\t\t\tif (this._hoverTimeout) {\n\t\t\t\twindow.clearTimeout(this._hoverTimeout);\n\t\t\t\tthis._hoverTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\tvar target = e.target ? e.target : e.srcElement;\n\t\t\tvar bounds = target.getBoundingClientRect();\n\t\t\tthis._curElementBounds = Object.create(null);\n\t\t\tthis._curElementBounds.top = bounds.top;\n\t\t\tthis._curElementBounds.left = bounds.left;\n\t\t\tthis._curElementBounds.height = bounds.height;\n\t\t\tthis._curElementBounds.width = bounds.width;\n\t\t\t\n\t\t\t// If we have the entire ruler selected, just use a 1 pixel high area in the ruler (Bug 463486)\n\t\t\tif (target === this.node){\n\t\t\t\tthis._curElementBounds.top = e.clientY;\n\t\t\t\tthis._curElementBounds.height = 1;\n\t\t\t}\n\t\t\t\n\t\t\tvar self = this;\n\t\t\tself._hoverTimeout = window.setTimeout(function() {\n\t\t\t\tself._hoverTimeout = null;\n\t\t\t\ttooltip.onHover({\n\t\t\t\t\tgetTooltipInfo: function() {\n\t\t\t\t\t\tvar annotations = self._getAnnotationsAtLineIndex(self._tooltipLineIndex);\n\t\t\t\t\t\tvar content = self._getTooltipContents(self._tooltipLineIndex, annotations);\n\t\t\t\t\t\treturn self._getTooltipInfo(content, e.clientY, {source: \"ruler\", rulerLocation: self.getLocation()}); //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t\t}, e.clientX, e.clientY);\n\t\t\t}, 175);\n\t\t},\n\t\t/**\n\t\t * This event is sent when the mouse pointer enters a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse over event.\n\t\t */\n\t\tonMouseOver: function(lineIndex, e) {\n\t\t\tthis.onMouseMove(lineIndex, e);\n\t\t\tif (!this._currentClickGroup) {\n\t\t\t\tthis._setCurrentGroup(lineIndex);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This event is sent when the mouse pointer exits a line annotation.\n\t\t *\n\t\t * @event\n\t\t * @param {Number} lineIndex the line index of the annotation under the pointer.\n\t\t * @param {DOMEvent} e the mouse out event.\n\t\t * @callback\n\t\t */\n\t\tonMouseOut: function(lineIndex, e) {\n\t\t\tif (!this._currentClickGroup) {\n\t\t\t\tthis._setCurrentGroup(-1);\n\t\t\t}\n\n\t\t\tif (this._hoverTimeout) {\n\t\t\t\twindow.clearTimeout(this._hoverTimeout);\n\t\t\t\tthis._hoverTimeout = null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @name _findNextAnnotation\n\t\t * @description Looks at all annotations in the given range and attempt to find the next valid\n\t\t * \t\t\t\tannotation after the current selection.\n\t\t * @function\n\t\t * @private\n\t\t * @param annotationModel The annotation model to lookup annotations in\n\t\t * @param rangeStart The start range to search for annotations (required)\n\t\t * @param rangeEnd The end range to search for annotations (required)\n\t\t * @param selectionStart The start of the current selection (optional)\n\t\t * @param selectionEnd The end of the current selection (optional)\n\t\t * @param isAnnotationTypeVisible A function callback to check if a given annotation type is valid or visible (optional)\n\t\t * @returns The next annotation in the list or <code>null</code>\n\t\t */\n\t\t_findNextAnnotation: function(annotationModel, rangeStart, rangeEnd, selectionStart, selectionEnd, isAnnotationTypeVisible){\n\t\t\tvar annotation = null;\n\t\t\tvar selectedAnnotation;\n\t\t\tvar searchStart = rangeStart;\n\t\t\t\n\t\t\tif (selectionStart >= 0 && selectionEnd >= 0){\n\t\t\t\tif (selectionStart >= rangeStart && selectionStart < rangeEnd){\n\t\t\t\t\tsearchStart = selectionStart;\n\t\t\t\t\tvar selectedAnnotations = annotationModel.getAnnotations(selectionStart, selectionEnd);\n\t\t\t\t\twhile (!selectedAnnotation && selectedAnnotations.hasNext()){\n\t\t\t\t\t\tvar current = selectedAnnotations.next();\n\t\t\t\t\t\tif (isAnnotationTypeVisible && !isAnnotationTypeVisible(current.type)) { continue; }\n\t\t\t\t\t\tif (current.start === selectionStart && current.end === selectionEnd){\n\t\t\t\t\t\t\tselectedAnnotation = current;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar iter = annotationModel.getAnnotations(searchStart, rangeEnd);\n\t\t\tvar useNextValid;\n\t\t\twhile (iter.hasNext()){\n\t\t\t\tcurrent = iter.next();\n\t\t\t\tif (isAnnotationTypeVisible && !isAnnotationTypeVisible(current.type)) { continue; }\n\t\t\t\t// Default to first visible annotation\n\t\t\t\tif (!annotation){\n\t\t\t\t\tannotation = current;\n\t\t\t\t}\n\t\t\t\t// If no selected annotation, use the first in the list\n\t\t\t\tif (!selectedAnnotation){\n\t\t\t\t\tannotation = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// If the selected annotation was found, use the next annotation\n\t\t\t\t// NOTE: If two annotations have the same range, we skip to the next annotation so don't flip between them\n\t\t\t\tif (useNextValid && (selectedAnnotation.start !== current.start || selectedAnnotation.end !== current.end)){\n\t\t\t\t\tuseNextValid = false;\n\t\t\t\t\tannotation = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Found the selected annotation, use the next in the list\n\t\t\t\tif (selectedAnnotation && selectedAnnotation === current){\n\t\t\t\t\tuseNextValid = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useNextValid){\n\t\t\t\tannotation = null; // Last annotation on the line was selected, go to line start\n\t\t\t}\n\t\t\t\n\t\t\treturn annotation;\n\t\t},\n\t\t\n\t\t_getAnnotationsAtLineIndex: function _getAnnotationsAtLineIndex(lineIndex){\n\t\t\tif (lineIndex === undefined) { return; }\n\t\t\tvar view = this._view;\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar annotations = [];\n\t\t\tvar model;\n\t\t\t\n\t\t\t//check if the current view exists, if not return empty array\n\t\t\tif (view) {\n\t\t\t\tmodel = view.getModel();\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\t\n\t\t\t// check if both model exists\n\t\t\tif (annotationModel && model) {\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tannotations = this.getAnnotationsByType(annotationModel, start, end);\n\t\t\t}\n\t\t\treturn annotations;\n\t\t},\n\t\t/** @ignore */\n\t\t_getTooltipInfo: function(contents, y, context) {\n\t\t\tif (!contents) { return null; } // TODO: shouldn't this check the length, it'll never be null\n\t\t\n\t\t\tvar hoverArea = Object.create(null);\n\t\t\thoverArea.top = this._curElementBounds.top;\n\t\t\thoverArea.left = this._curElementBounds.left;\n\t\t\thoverArea.height = this._curElementBounds.height;\n\t\t\thoverArea.width = this._curElementBounds.width;\n\t\t\t\n\t\t\tif (typeof contents === 'string' && y) {\n\t\t\t\t// Hack for line numbers\n\t\t\t\thoverArea.top = y;\n\t\t\t\thoverArea.height = 1;\n\t\t\t}\n\t\t\t\n\t\t\tvar rulerLocation = this.getLocation();\n\t\t\tvar rulerStyle = this.getRulerStyle();\n\t\t\t// The tooltip is positioned opposite to where the ruler is\n\t\t\tvar position = rulerLocation === \"left\" ? \"right\" : \"left\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\t\n\t\t\tvar offsetX = 0;\n\t\t\tvar offsetY = 0;\n\t\t\tif (this._view){\n\t\t\t\tvar viewRect = this._view._clientDiv.getBoundingClientRect();\n\t\t\t\toffsetX = viewRect.left - (hoverArea.left + hoverArea.width);\n\t\t\t} else {\n\t\t\t\toffsetX = hoverArea.width;\n\t\t\t}\n\t\t\toffsetY = hoverArea.height;\n\t\t\tif (position === \"left\") {\n\t\t\t\toffsetX = -25;\n\t\t\t\t// Hack for when the hoverArea is a sliver of the ruler, ruler is 2px wider than annotations\n\t\t\t\tif (hoverArea.height === 1){\n\t\t\t\t\toffsetX += 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Adjust the tooltip for folding comments to exactly cover the unfolded text location\n\t\t\tif (rulerStyle.styleClass.indexOf(\"folding\") >= 0){ //$NON-NLS-0$\n\t\t\t\toffsetY -= 14;\n\t\t\t}\n\t\t\t\n\t\t\tvar info = {\n\t\t\t\tcontents: contents,\n\t\t\t\tposition: position,\n\t\t\t\ttooltipOffsetX: offsetX,\n\t\t\t\ttooltipOffsetY: offsetY,\n\t\t\t\tanchorArea: hoverArea,\n\t\t\t\tcontext: context\n\t\t\t};\n\t\t\treturn info;\n\t\t},\n\t\t/**\n\t\t * @name _getTooltipContents\n\t\t * @description Overridden by different rulers to provide customer tooltip content\n\t\t * @function\n\t\t * @private\n\t\t * @param lineIndex\n\t\t * @param annotations\n\t\t * @returns returns\n\t\t * @callback\n\t\t */\n\t\t_getTooltipContents: function _getTooltipContents(lineIndex, annotations){\n\t\t\treturn annotations;\n\t\t},\n\t\t\n\t\t_getOnClickTooltipInfo: function(annotation) {\n\t\t\tvar view = this._view;\n\t\t\tvar hoverArea = Object.create(null);\n\t\t\thoverArea.top = this._curElementBounds.top;\n\t\t\thoverArea.left = this._curElementBounds.left;\n\t\t\thoverArea.height = this._curElementBounds.height;\n\t\t\thoverArea.width = this._curElementBounds.width;\n\t\t\tvar rulerLocation = this.getLocation();\n\t\t\tvar position = rulerLocation === \"left\" ? \"right\" : \"left\"; //$NON-NLS-0$ //$NON-NLS-1$ //$NON-NLS-2$\n\t\t\tvar info = {\n\t\t\t\tcontents: [annotation],\n\t\t\t\tposition: position,\n\t\t\t\tanchorArea: hoverArea\n\t\t\t};\n\t\t\t\n\t\t\tif (view){\n\t\t\t\tvar viewRect = view._clientDiv.getBoundingClientRect();\n\t\t\t\tinfo.offsetX = viewRect.left - (hoverArea.left + hoverArea.width);\n\t\t\t} else {\n\t\t\t\tinfo.offsetX = hoverArea.width;\n\t\t\t}\n\n\t\t\tinfo.offsetY = hoverArea.height;\n\t\t\tif (info.position === \"left\") {\n\t\t\t\tinfo.offsetX = 20;\n\t\t\t}\n\t\t\treturn info;\n\t\t},\n\t\t/** @ignore */\n\t\t_onAnnotationModelChanged: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tvar model = view.getModel(), self = this;\n\t\t\tvar lineCount = model.getLineCount();\n\t\t\tif (e.textModelChangedEvent) {\n\t\t\t\tvar start = e.textModelChangedEvent.start;\n\t\t\t\tif (model.getBaseModel) { start = model.mapOffset(start, true); }\n\t\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\t\tview.redrawLines(startLine, lineCount, self);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfunction redraw(changes) {\n\t\t\t\tfor (var i = 0; i < changes.length; i++) {\n\t\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\t\tstart = changes[i].start;\n\t\t\t\t\tvar end = changes[i].end;\n\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t\t\tend = model.mapOffset(end, true);\n\t\t\t\t\t}\n\t\t\t\t\tif (start !== -1 && end !== -1) {\n\t\t\t\t\t\tview.redrawLines(model.getLineAtOffset(start), model.getLineAtOffset(Math.max(start, end - 1)) + 1, self);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tredraw(e.added);\n\t\t\tredraw(e.removed);\n\t\t\tredraw(e.changed);\n\t\t},\n\t\t/** @ignore */\n\t\t_mergeAnnotation: function(result, annotation, annotationLineIndex, annotationLineCount) {\n\t\t\tif (!result) { result = {}; }\n\t\t\tif (annotationLineIndex === 0) {\n\t\t\t\tif (result.html && annotation.html) {\n\t\t\t\t\tif (annotation.html !== result.html) {\n\t\t\t\t\t\tif (!result._multiple && this._multiAnnotation) {\n\t\t\t\t\t\t\tresult.html = this._multiAnnotation.html;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t\tresult._multiple = true;\n\t\t\t\t} else {\n\t\t\t\t\tresult.html = annotation.html;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.style = this._mergeStyle(result.style, annotation.style);\n\t\t\treturn result;\n\t\t},\n\t\t/** @ignore */\n\t\t_mergeStyle: function(result, style) {\n\t\t\tif (style) {\n\t\t\t\tif (!result) { result = {}; }\n\t\t\t\tif (result.styleClass && style.styleClass && result.styleClass !== style.styleClass) {\n\t\t\t\t\tresult.styleClass += \" \" + style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tresult.styleClass = style.styleClass;\n\t\t\t\t}\n\t\t\t\tvar prop;\n\t\t\t\tif (style.style) {\n\t\t\t\t\tif (!result.style) { result.style  = {}; }\n\t\t\t\t\tfor (prop in style.style) {\n\t\t\t\t\t\tif (result.style[prop] === undefined) {\n\t\t\t\t\t\t\tresult.style[prop] = style.style[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (style.attributes) {\n\t\t\t\t\tif (!result.attributes) { result.attributes  = {}; }\n\t\t\t\t\tfor (prop in style.attributes) {\n\t\t\t\t\t\tif (result.attributes[prop] === undefined) {\n\t\t\t\t\t\t\tresult.attributes[prop] = style.attributes[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_setCurrentGroup: function(lineIndex) {\n\t\t\tvar annotationModel = this._annotationModel;\n\t\t\tvar groupAnnotation = null;\n\t\t\tvar model = annotationModel.getTextModel();\n\t\t\tvar annotation;\n\t\t\tvar annotations;\n\t\t\tvar currentGroupAnnotation = this._currentGroupAnnotation;\n\t\t\tif (lineIndex !== -1) {\n\t\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\t\tvar end = model.getLineEnd(lineIndex);\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\t\tend = model.mapOffset(end);\n\t\t\t\t}\n\t\t\t\tannotations = annotationModel.getAnnotations(start, end);\n\t\t\t\twhile(annotations.hasNext()){\n\t\t\t\t\tannotation = annotations.next();\n\t\t\t\t\tif (!this.isAnnotationTypeVisible(annotation.type)) { continue; }\n\t\t\t\t\tif (annotation.start <= start && annotation.end >= end){\n\t\t\t\t\t\tif (annotation.groupId !== undefined) {\n\t\t\t\t\t\t\tgroupAnnotation = annotation;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (currentGroupAnnotation && groupAnnotation) {\n\t\t\t\t\tif (currentGroupAnnotation.groupId === groupAnnotation.groupId) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._currentGroupAnnotation = null;\n\t\t\tif (currentGroupAnnotation) {\n\t\t\t\tannotationModel.removeAnnotations(currentGroupAnnotation.groupType);\n\t\t\t}\n\t\t\tif (!groupAnnotation) { return; }\n\t\t\t\n\t\t\tif (lineIndex === -1) { return; }\n\t\t\tthis._currentGroupAnnotation = groupAnnotation;\n\t\t\tannotations = annotationModel.getAnnotations();\n\t\t\tvar add = [];\n\t\t\twhile (annotations.hasNext()) {\n\t\t\t\tannotation = annotations.next();\n\t\t\t\tdelete annotation.groupAnnotation;\n\t\t\t\tif (annotation.groupId === groupAnnotation.groupId) {\n\t\t\t\t\tannotation = annotation.createGroupAnnotation();\n\t\t\t\t\tadd.push(annotation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tannotationModel.replaceAnnotations(null, add);\n\t\t}\n\t});\n\tmAnnotations.AnnotationTypeList.addMixin(Ruler.prototype);\n\n\t/**\n\t * Constructs a new line numbering ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t * @param {orion.editor.Style} [oddStyle={style: {backgroundColor: \"white\"}] the style for lines with odd line index.\n\t * @param {orion.editor.Style} [evenStyle={backgroundColor: \"white\"}] the style for lines with even line index.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements a line numbering ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.Ruler}\n\t * </p>\n\t * @name orion.editor.LineNumberRuler\n\t */\n\tfunction LineNumberRuler (annotationModel, rulerLocation, rulerStyle, oddStyle, evenStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"page\", rulerStyle); //$NON-NLS-0$\n\t\tthis._oddStyle = oddStyle || {style: {backgroundColor: \"white\"}}; //$NON-NLS-0$\n\t\tthis._evenStyle = evenStyle || {style: {backgroundColor: \"white\"}}; //$NON-NLS-0$\n\t\tthis._numOfDigits = 0;\n\t\tthis._firstLine = 1;\n\t}\n\tLineNumberRuler.prototype = new Ruler(); \n\t/** @ignore */\n\tLineNumberRuler.prototype.getAnnotations = function(startLine, endLine) {\n\t\tvar result = Ruler.prototype.getAnnotations.call(this, startLine, endLine);\n\t\tvar model = this._view.getModel();\n\t\tfor (var lineIndex = startLine; lineIndex < endLine; lineIndex++) {\n\t\t\tvar style = (lineIndex - this._firstLine) & 1 ? this._oddStyle : this._evenStyle;\n\t\t\tvar mapLine = lineIndex;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tvar lineStart = model.getLineStart(mapLine);\n\t\t\t\tmapLine = model.getBaseModel().getLineAtOffset(model.mapOffset(lineStart));\n\t\t\t}\n\t\t\tif (!result[lineIndex]) { result[lineIndex] = {}; }\n\t\t\tresult[lineIndex].html = (this._firstLine + mapLine) + \"\";\n\t\t\tif (!result[lineIndex].style) { result[lineIndex].style = style; }\n\t\t}\n\t\treturn result;\n\t};\n\t/** @ignore */\n\tLineNumberRuler.prototype.getWidestAnnotation = function() {\n\t\tvar lineCount = this._view.getModel().getLineCount();\n\t\treturn this.getAnnotations(lineCount - 1, lineCount)[lineCount - 1];\n\t};\n\t/**\n\t * Sets the line index displayed for the first line. The default value is\n\t * <code>1</code>.\n\t *\n\t * @param {Number} [lineIndex=1] the first line index displayed\n\t */\n\tLineNumberRuler.prototype.setFirstLine = function(lineIndex) {\n\t\tthis._firstLine = lineIndex !== undefined ? lineIndex : 1;\n\t};\n\t/** @ignore */\n\tLineNumberRuler.prototype._onTextModelChanged = function(e) {\n\t\tvar start = e.start;\n\t\tvar model = this._view.getModel();\n\t\tvar lineCount = model.getBaseModel ? model.getBaseModel().getLineCount() : model.getLineCount();\n\t\tvar numOfDigits = ((this._firstLine + lineCount - 1)+\"\").length;\n\t\tif (this._numOfDigits !== numOfDigits) {\n\t\t\tthis._numOfDigits = numOfDigits;\n\t\t\tvar startLine = model.getLineAtOffset(start);\n\t\t\tthis._view.redrawLines(startLine,  model.getLineCount(), this);\n\t\t}\n\t};\n\t\n\t/** \n\t * @class This is class represents an annotation for the AnnotationRuler. \n\t * <p> \n\t * <b>See:</b><br/> \n\t * {@link orion.editor.AnnotationRuler}\n\t * </p> \n\t * \n\t * @name orion.editor.Annotation \n\t * \n\t * @property {String} [html=\"\"] The html content for the annotation, typically contains an image.\n\t * @property {orion.editor.Style} [style] the style for the annotation.\n\t * @property {orion.editor.Style} [overviewStyle] the style for the annotation in the overview ruler.\n\t */ \n\t/**\n\t * Constructs a new annotation ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t * @param {orion.editor.Annotation} [defaultAnnotation] the default annotation.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an annotation ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.Ruler}<br/>\n\t * {@link orion.editor.Annotation}\n\t * </p>\n\t * @name orion.editor.AnnotationRuler\n\t */\n\tfunction AnnotationRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"page\", rulerStyle); //$NON-NLS-0$\n\t}\n\tAnnotationRuler.prototype = new Ruler();\n\t\n\t/**\n\t * Constructs a new overview ruler. \n\t * <p>\n\t * The overview ruler is used in conjunction with a AnnotationRuler, for each annotation in the \n\t * AnnotationRuler this ruler displays a mark in the overview. Clicking on the mark causes the \n\t * view to scroll to the annotated line.\n\t * </p>\n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tfunction OverviewRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tRuler.call(this, annotationModel, rulerLocation, \"document\", rulerStyle); //$NON-NLS-0$\n\t}\n\tOverviewRuler.prototype = new Ruler();\n\t\n\t/** @ignore */\n\tOverviewRuler.prototype.getRulerStyle = function() {\n\t\tvar result = {style: {lineHeight: \"1px\", fontSize: \"1px\"}}; //$NON-NLS-1$ //$NON-NLS-0$\n\t\tresult = this._mergeStyle(result, this._rulerStyle);\n\t\treturn result;\n\t};\n\t/** @ignore */\n\tOverviewRuler.prototype._getTooltipContents = function(lineIndex, annotations) {\n\t\tif (annotations && annotations.length === 0) {\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar mapLine = lineIndex;\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tvar lineStart = model.getLineStart(mapLine);\n\t\t\t\tmapLine = model.getBaseModel().getLineAtOffset(model.mapOffset(lineStart));\n\t\t\t}\n\t\t\treturn util.formatMessage(messages.line, mapLine + 1);\n\t\t}\n\t\treturn Ruler.prototype._getTooltipContents.call(this, lineIndex, annotations);\n\t};\n\t/** @ignore */\n\tOverviewRuler.prototype._mergeAnnotation = function(previousAnnotation, annotation, annotationLineIndex, annotationLineCount) {\n\t\tif (annotationLineIndex !== 0) { return undefined; }\n\t\tvar result = previousAnnotation;\n\t\tif (!result) {\n\t\t\t//TODO annotationLineCount does not work when there are folded lines\n\t\t\tvar height = 3 * annotationLineCount;\n\t\t\tresult = {html: \"&nbsp;\", style: { style: {height: height + \"px\"}}}; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\tresult.style = this._mergeStyle(result.style, annotation.overviewStyle);\n\t\t}\n\t\treturn result;\n\t};\n\n\t/**\n\t * Constructs a new folding ruler. \n\t *\n\t * @param {orion.editor.AnnotationModel} annotationModel the annotation model for the ruler.\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tfunction FoldingRuler (annotationModel, rulerLocation, rulerStyle) {\n\t\tAnnotationRuler.call(this, annotationModel, rulerLocation, rulerStyle);\n\t}\n\tFoldingRuler.prototype = new AnnotationRuler();\n\t\n\t/** @ignore */\n\tFoldingRuler.prototype.onClick =  /* @callback */ function(lineIndex, e) {\n\t\tif (lineIndex === undefined) { return; }\n\t\tvar annotationModel = this._annotationModel;\n\t\tif (!annotationModel) { return; }\n\t\tvar view = this._view;\n\t\tvar model = view.getModel();\n\t\tvar start = model.getLineStart(lineIndex);\n\t\tvar end = model.getLineEnd(lineIndex, true);\n\t\tif (model.getBaseModel) {\n\t\t\tstart = model.mapOffset(start);\n\t\t\tend = model.mapOffset(end);\n\t\t\tmodel = model.getBaseModel();\n\t\t}\n\t\tvar annotation, iter = annotationModel.getAnnotations(start, end);\n\t\twhile (!annotation && iter.hasNext()) {\n\t\t\tvar a = iter.next();\n\t\t\tif (!this.isAnnotationTypeVisible(a.type)) { continue; }\n\t\t\tif (model.getLineAtOffset(a.start) !== model.getLineAtOffset(start)) { continue; }\n\t\t\tannotation = a;\n\t\t}\n\t\tif (annotation) {\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this._view);\n\t\t\tif (tooltip) {\n\t\t\t\ttooltip.hide();\n\t\t\t}\n\t\t\tif (annotation.expanded) {\n\t\t\t\tannotation.collapse();\n\t\t\t} else {\n\t\t\t\tannotation.expand();\n\t\t\t}\n\t\t}\n\t};\n\t/** @ignore */\n\tFoldingRuler.prototype._getTooltipContents = function(lineIndex, annotations) {\n\t\tif (annotations && annotations.length > 0) {\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar start = model.getLineStart(lineIndex);\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tstart = model.mapOffset(start);\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\tvar mapLineIndex = model.getLineAtOffset(start);\n\t\t\tfor (var i = 0; i < annotations.length; i++) {\n\t\t\t\tvar a = annotations[i];\n\t\t\t\tif (!this.isAnnotationTypeVisible(a.type)) { continue; }\n\t\t\t\tif (model.getLineAtOffset(a.start) !== mapLineIndex) { continue; }\n\t\t\t\tif (annotations[i].expanded) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn AnnotationRuler.prototype._getTooltipContents.call(this, lineIndex, [a]);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\t/** @ignore */\n\tFoldingRuler.prototype._onAnnotationModelChanged = function(e) {\n\t\tif (e.textModelChangedEvent) {\n\t\t\tAnnotationRuler.prototype._onAnnotationModelChanged.call(this, e);\n\t\t\treturn;\n\t\t}\n\t\tvar view = this._view;\n\t\tif (!view) { return; }\n\t\tvar model = view.getModel(), self = this, i;\n\t\tvar lineCount = model.getLineCount(), lineIndex = lineCount;\n\t\tfunction redraw(changes) {\n\t\t\tfor (i = 0; i < changes.length; i++) {\n\t\t\t\tif (!self.isAnnotationTypeVisible(changes[i].type)) { continue; }\n\t\t\t\tvar start = changes[i].start;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tstart = model.mapOffset(start, true);\n\t\t\t\t}\n\t\t\t\tif (start !== -1) {\n\t\t\t\t\tlineIndex = Math.min(lineIndex, model.getLineAtOffset(start));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tredraw(e.added);\n\t\tredraw(e.removed);\n\t\tredraw(e.changed);\n\t\tvar rulers = view.getRulers();\n\t\tfor (i = 0; i < rulers.length; i++) {\n\t\t\tview.redrawLines(lineIndex, lineCount, rulers[i]);\n\t\t}\n\t};\n\t\n\n\t/**\n\t * Constructs a new zoom ruler. \n\t *\n\t * @param {String} [rulerLocation=\"left\"] the location for the ruler.\n\t * @param {orion.editor.Style} [rulerStyle=undefined] the style for the ruler.\n\t *\n\t * @augments orion.editor.Ruler\n\t * @class This objects implements an overview ruler.\n\t *\n\t * <p><b>See:</b><br/>\n\t * {@link orion.editor.AnnotationRuler} <br/>\n\t * {@link orion.editor.Ruler} \n\t * </p>\n\t * @name orion.editor.OverviewRuler\n\t */\n\tvar ZoomRuler = function(rulerLocation, rulerStyle) {\n\t\tBaseRuler.call(this, rulerLocation, \"fixed\", rulerStyle); //$NON-NLS-0$\n\t};\n\t\n\tZoomRuler.prototype = objects.mixin(new BaseRuler(), {\n\t\tsetView: function (view) {\n\t\t\tthis._destroy();\n\t\t\tBaseRuler.prototype.setView.call(this, view);\n\t\t\tthis._create();\n\t\t},\n\t\t_create: function() {\n\t\t\tvar textView = this.getView();\n\t\t\tif (!textView) return;\n\t\t\tfunction getOptions(options) {\n\t\t\t\tvar rulerTheme = \"textviewZoom\"; //$NON-NLS-0$\n\t\t\t\tvar theme = options.themeClass;\n\t\t\t\tif (theme) {\n\t\t\t\t\ttheme = theme.replace(rulerTheme, \"\");\n\t\t\t\t\tif (theme) { theme = \" \" + theme; } //$NON-NLS-0$\n\t\t\t\t\ttheme = rulerTheme + theme;\n\t\t\t\t} else {\n\t\t\t\t\ttheme = rulerTheme;\n\t\t\t\t}\n\t\t\t\toptions.themeClass = theme;\n\t\t\t\toptions.noScroll = true;\n\t\t\t\toptions.readonly = true;\n\t\t\t\treturn options;\n\t\t\t}\n\t\t\tvar options = getOptions(textView.getOptions());\n\t\t\toptions.parent = this.node;\n\t\t\tvar zoomView = this._zoomView = new mTextView.TextView(options);\n\t\t\tzoomView._clientDiv.contentEditable = false;\n\t\t\tzoomView.setModel(textView.getModel());\n\t\t\tvar document = textView.getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\n\t\t\tvar windowDiv = this._windowDiv = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\twindowDiv.className =\"rulerZoomWindow\"; //$NON-NLS-0$\n\t\t\tthis.node.appendChild(windowDiv);\n\t\t\tvar border = parseInt(textUtil.getNodeStyle(windowDiv, \"border-top-width\", 0)) + //$NON-NLS-0$\n\t\t\t\t\tparseInt(textUtil.getNodeStyle(windowDiv, \"border-bottom-width\", 0)); //$NON-NLS-0$\n\t\t\tvar that = this;\n\t\t\tfunction updateWindow(scroll, p) {\n\t\t\t\tvar top = scroll.y * p.zoomFactor;\n\t\t\t\tvar height = p.clientHeight * p.zoomFactor;\n\t\t\t\tthat.top = top;\n\t\t\t\tthat.bottom = top + height;\n\t\t\t\ttop = zoomView.convert({y: top}, \"document\", \"page\").y; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\ttop = top - that.node.getBoundingClientRect().top;\n\t\t\t\twindowDiv.style.top = top + \"px\"; //$NON-NLS-0$\n\t\t\t\twindowDiv.style.height = (height - border) + \"px\"; //$NON-NLS-0$\n\t\t\t}\n\t\t\tfunction getProps() {\n\t\t\t\tvar padding = textView._metrics.viewPadding;\n\t\t\t\tvar zoomPadding = textView._metrics.viewPadding;\n\t\t\t\tvar lineHeight = textView.getLineHeight();\n\t\t\t\tvar zoomLineHeight = zoomView.getLineHeight();\n\t\t\t\tvar lineCount = textView.getModel().getLineCount();\n\t\t\t\tvar documentHeight = textView._lineHeight ? textView._scrollHeight : lineCount * lineHeight;\n\t\t\t\tvar zoomDocumentHeight = zoomView._lineHeight ? zoomView._scrollHeight : lineCount * zoomLineHeight;\n\t\t\t\tvar zoomFactor = zoomDocumentHeight / documentHeight;\n\t\t\t\tvar clientHeight = textView.getClientArea().height + padding.top + padding.bottom;\n\t\t\t\tvar zoomClientHeight = zoomView.getClientArea().height + zoomPadding.top + zoomPadding.bottom;\n\t\t\t\tvar windowHeight = clientHeight * zoomFactor;\n\t\t\t\tvar scrollWidth = textView._metrics.scrollWidth;\n\t\t\t\treturn {\n\t\t\t\t\tzoomFactor: zoomFactor,\n\t\t\t\t\tdocumentHeight: documentHeight,\n\t\t\t\t\tzoomDocumentHeight: zoomDocumentHeight,\n\t\t\t\t\tclientHeight: clientHeight,\n\t\t\t\t\tzoomClientHeight: zoomClientHeight,\n\t\t\t\t\tscrollWidth: scrollWidth,\n\t\t\t\t\twindowHeight: windowHeight,\n\t\t\t\t\tpadding: padding\n\t\t\t\t};\n\t\t\t}\n\t\t\tfunction toZoom(scroll, p) {\n\t\t\t\treturn scroll.y * (p.zoomFactor + (p.windowHeight - p.clientHeight - p.scrollWidth) / p.documentHeight);\n\t\t\t}\n\t\t\tfunction updateScroll(scroll) {\n\t\t\t\tscroll = scroll || {y: textView.getTopPixel()};\n\t\t\t\tvar p = getProps();\n\t\t\t\tvar y = toZoom(scroll, p);\n\t\t\t\tzoomView.setTopPixel(y);\n\t\t\t\tupdateWindow(scroll, p);\n\t\t\t}\n\t\t\tfunction updateWidth(options) {\n\t\t\t\tvar width;\n\t\t\t\tif (options.wrapMode && !options.wrapOffset && textView._metrics.charWidth) {\n\t\t\t\t\tvar div1 = util.createElement(document, \"div\"); //$NON-NLS-0$\n\t\t\t\t\tdiv1.style.position = \"fixed\"; //$NON-NLS-0$\n\t\t\t\t\tdiv1.style.left = \"-1000px\"; //$NON-NLS-0$\n\t\t\t\t\tzoomView._clientDiv.appendChild(div1);\n\t\t\t\t\tdiv1.textContent = new Array(Math.ceil(textView.getClientArea().width / textView._metrics.charWidth) + 1).join(\"a\"); //$NON-NLS-0$\n\t\t\t\t\tvar rect1 = div1.getBoundingClientRect();\n\t\t\t\t\twidth = Math.min(150, Math.ceil(rect1.right - rect1.left)) + \"px\"; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\twidth = \"\";\n\t\t\t\t}\n\t\t\t\tvar oldWidth = that.node.style.width;\n\t\t\t\tthat.node.style.width = width;\n\t\t\t\treturn oldWidth !== width;\n\t\t\t}\n\t\t\ttextView.addEventListener(\"Scroll\", this._scrollListener = function(event) { //$NON-NLS-0$\n\t\t\t\tupdateScroll(event.newValue);\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Resize\", this._resizeListener = function() { //$NON-NLS-0$\n\t\t\t\tupdateWidth(zoomView.getOptions());\n\t\t\t\tupdateScroll();\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Redraw\", this._redrawListener = function(event) { //$NON-NLS-0$\n\t\t\t\tif (!event.ruler) {\n\t\t\t\t\tzoomView.redrawLines(event.startLine, event.endLine);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttextView.addEventListener(\"Options\", this._optionsListener = function(event) { //$NON-NLS-0$\n\t\t\t\tvar options = getOptions(event.options);\n\t\t\t\tzoomView.setOptions(options);\n\t\t\t\tupdateWidth(zoomView.getOptions());\n\t\t\t});\n\t\t\tzoomView.addEventListener(\"LineStyle\", this._lineListener = function(e) { //$NON-NLS-0$\n\t\t\t\ttextView.onLineStyle(e);\n\t\t\t});\n\t\t\tfunction down(event, clientY, touch) {\n\t\t\t\tif (touch || (that.top <= event.y && event.y <= that.bottom)) {\n\t\t\t\t\tthat.mouseDown = true;\n\t\t\t\t\tthat.delta = clientY - windowDiv.getBoundingClientRect().top + that.node.getBoundingClientRect().top;\n\t\t\t\t} else {\n\t\t\t\t\tvar offset = zoomView.getOffsetAtLocation(event.x, event.y);\n\t\t\t\t\ttextView.setSelection(offset, offset, 0.5, function() {});\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction up() {\n\t\t\t\tthat.mouseDown = false;\n\t\t\t}\n\t\t\tfunction move(clientY) {\n\t\t\t\tif (that.mouseDown) {\n\t\t\t\t\tvar p = getProps();\n\t\t\t\t\tvar thumbPos = Math.min(p.zoomClientHeight - p.windowHeight, Math.max(0, clientY - that.delta));\n\t\t\t\t\ttextView.setTopPixel(thumbPos * (p.documentHeight - p.clientHeight) / Math.min(p.zoomDocumentHeight, p.zoomClientHeight - p.windowHeight));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction stop(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tif (util.isIOS || util.isAndroid) {\n\t\t\t\twindowDiv.addEventListener(\"touchstart\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 1) {\n\t\t\t\t\t\tdown(event, event.touches[0].clientY, true);\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twindowDiv.addEventListener(\"touchend\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 0) {\n\t\t\t\t\t\tup();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twindowDiv.addEventListener(\"touchmove\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar touches = event.touches;\n\t\t\t\t\tif (touches.length === 1) {\n\t\t\t\t\t\tmove(event.touches[0].clientY);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"TouchStart\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tif (event.touchCount === 1) {\n\t\t\t\t\t\tdown(event, event.event.touches[0].clientY);\n\t\t\t\t\t\tstop(event);\n\t\t\t\t\t}\n\t\t\t\t});\n//\t\t\t\twindowDiv.style.pointerEvents = \"none\"; //$NON-NLS-0$\n//\t\t\t\tzoomView.addEventListener(\"TouchEnd\", function(event) { //$NON-NLS-0$\n//\t\t\t\t\tif (event.touchCount === 0) {\n//\t\t\t\t\t\tup(event);\n//\t\t\t\t\t}\n//\t\t\t\t});\n//\t\t\t\tzoomView.addEventListener(\"TouchMove\", function(event) { //$NON-NLS-0$\n//\t\t\t\t\tif (event.touchCount === 1) {\n//\t\t\t\t\t\tmove(event.event.touches[0].clientY);\n//\t\t\t\t\t}\n//\t\t\t\t});\n\t\t\t} else {\n\t\t\t\twindowDiv.style.pointerEvents = \"none\"; //$NON-NLS-0$\n\t\t\t\tzoomView.addEventListener(\"MouseDown\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tvar e = event.event;\n\t\t\t\t\tif (e.which ? e.button === 0 : e.button === 1) {\n\t\t\t\t\t\tdown(event, e.clientY);\n\t\t\t\t\t}\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"MouseUp\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tup();\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t\tzoomView.addEventListener(\"MouseMove\", function(event) { //$NON-NLS-0$\n\t\t\t\t\tmove(event.event.clientY);\n\t\t\t\t\tstop(event);\n\t\t\t\t});\n\t\t\t}\n\t\t\t(document.defaultView || document.parentWindow).setTimeout(function() {\n\t\t\t\tupdateScroll();\n\t\t\t}, 0);\n\t\t},\n\t\t_destroy: function() {\n\t\t\tvar textView = this.getView();\n\t\t\tif (textView) {\n\t\t\t\ttextView.removeEventListener(\"Scroll\", this._scrollListener); //$NON-NLS-0$\n\t\t\t\tthis._scrollListener = null;\n\t\t\t\ttextView.removeEventListener(\"Resize\", this._resizeListener); //$NON-NLS-0$\n\t\t\t\tthis._resizeListener = null;\n\t\t\t\ttextView.removeEventListener(\"Redraw\", this._redrawListener); //$NON-NLS-0$\n\t\t\t\tthis._redrawListener = null;\n\t\t\t\ttextView.removeEventListener(\"Options\", this._optionsListener); //$NON-NLS-0$\n\t\t\t\tthis._optionsListener = null;\n\t\t\t}\n\t\t\tvar zoomView = this._zoomView;\n\t\t\tif (zoomView) {\n\t\t\t\tzoomView.removeEventListener(\"LineStyle\", this._lineListener); //$NON-NLS-0$\n\t\t\t\tzoomView.setModel(null);\n\t\t\t\tzoomView.destroy();\n\t\t\t\tthis._zoomView = null;\n\t\t\t}\n\t\t}\n\t});\n\t\n\treturn {\n\t\tBaseRuler: BaseRuler,\n\t\tRuler: Ruler,\n\t\tAnnotationRuler: AnnotationRuler,\n\t\tLineNumberRuler: LineNumberRuler,\n\t\tOverviewRuler: OverviewRuler,\n\t\tFoldingRuler: FoldingRuler,\n\t\tZoomRuler: ZoomRuler,\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2012 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n * \n * Contributors: \n *\t\tFelipe Heidrich (IBM Corporation) - initial API and implementation\n *\t\tSilenio Quarti (IBM Corporation) - initial API and implementation\n ******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textDND\", ['orion/util'], function(util) { //$NON-NLS-1$ //$NON-NLS-0$\n\n\tfunction TextDND(view, undoStack) {\n\t\tthis._view = view;\n\t\tthis._undoStack = undoStack;\n\t\tthis._dragSelection = null;\n\t\tthis._dropOffset = -1;\n\t\tthis._dropText = null;\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonDragStart: function (evt) {\n\t\t\t\tself._onDragStart(evt);\n\t\t\t},\n\t\t\tonDragEnd: function (evt) {\n\t\t\t\tself._onDragEnd(evt);\n\t\t\t},\n\t\t\tonDragEnter: function (evt) {\n\t\t\t\tself._onDragEnter(evt);\n\t\t\t},\n\t\t\tonDragOver: function (evt) {\n\t\t\t\tself._onDragOver(evt);\n\t\t\t},\n\t\t\tonDrop: function (evt) {\n\t\t\t\tself._onDrop(evt);\n\t\t\t},\n\t\t\tonDestroy: function (evt) {\n\t\t\t\tself._onDestroy(evt);\n\t\t\t}\n\t\t};\n\t\tview.addEventListener(\"DragStart\", this._listener.onDragStart); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragEnd\", this._listener.onDragEnd); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragEnter\", this._listener.onDragEnter); //$NON-NLS-0$\n\t\tview.addEventListener(\"DragOver\", this._listener.onDragOver); //$NON-NLS-0$\n\t\tview.addEventListener(\"Drop\", this._listener.onDrop); //$NON-NLS-0$\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t}\n\tTextDND.prototype = {\n\t\tdestroy: function() {\n\t\t\tvar view = this._view;\n\t\t\tif (!view) { return; }\n\t\t\tview.removeEventListener(\"DragStart\", this._listener.onDragStart); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragEnd\", this._listener.onDragEnd); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragEnter\", this._listener.onDragEnter); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"DragOver\", this._listener.onDragOver); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"Drop\", this._listener.onDrop); //$NON-NLS-0$\n\t\t\tview.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\tthis._view = null;\n\t\t},\n\t\t_onDestroy: function(e) {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onDragStart: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tvar text = view.getSelectionText();\n\t\t\tif (text) {\n\t\t\t\tthis._dragSelection = view.getSelections();\n\t\t\t\te.event.dataTransfer.effectAllowed = \"copyMove\"; //$NON-NLS-0$\n\t\t\t\te.event.dataTransfer.setData(\"Text\", text); //$NON-NLS-0$\n\t\t\t}\n\t\t},\n\t\t_onDragEnd: function(e) {\n\t\t\tif (this._dragSelection) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar dropEffect = e.event.dataTransfer.dropEffect;\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\tif (dropEffect !== \"none\" || this._dropText) { //$NON-NLS-0$\n\t\t\t\t\t\tdropEffect = e.event.dataTransfer.dropEffect = this._dropEffect;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this._undoStack) { this._undoStack.startCompoundChange(); }\n\t\t\t\tvar move = dropEffect === \"move\" && this._dropText; //$NON-NLS-0$\n\t\t\t\tif (move) {\n\t\t\t\t\tview.setText({text: \"\", selection: this._dragSelection});\n\t\t\t\t}\n\t\t\t\tif (this._dropText) {\n\t\t\t\t\tvar text = this._dropText;\n\t\t\t\t\tvar offset = this._dropOffset;\n\t\t\t\t\tif (move) {\n\t\t\t\t\t\tthis._dragSelection.forEach(function(selection) {\n\t\t\t\t\t\t\tif (offset >= selection.end) {\n\t\t\t\t\t\t\t\toffset -= selection.end - selection.start;\n\t\t\t\t\t\t\t} else if (offset >= selection.start) {\n\t\t\t\t\t\t\t\toffset = selection.start;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tview.setText(text, offset, offset);\n\t\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t\t\tthis._dropText = null;\n\t\t\t\t\tthis._dropOffset = -1;\n\t\t\t\t}\n\t\t\t\tif (this._undoStack) { this._undoStack.endCompoundChange(); }\n\t\t\t\tthis._dragSelection = null;\n\t\t\t}\n\t\t},\n\t\t_onDragEnter: function(e) {\n\t\t\tthis._onDragOver(e);\n\t\t},\n\t\t_onDragOver: function(e) {\n\t\t\tvar types = e.event.dataTransfer.types;\n\t\t\tvar allowed = !this._view.getOptions(\"readonly\"); //$NON-NLS-0$\n\t\t\tif (allowed) {\n\t\t\t\tif (types) {\n\t\t\t\t\tallowed = types.contains ? \n\t\t\t\t\t\ttypes.contains(\"text/plain\") || types.contains(\"Text\") : //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t\ttypes.indexOf(\"text/plain\") !== -1 || types.indexOf(\"Text\") !== -1; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (!allowed) {\n\t\t\t\te.event.dataTransfer.dropEffect = \"none\"; //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\tvar copy = util.isMac ? e.event.altKey : e.event.ctrlKey;\n\t\t\t\t\tthis._dropEffect = e.event.dataTransfer.dropEffect = copy ? \"copy\" : \"move\"; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_onDrop: function(e) {\n\t\t\tvar view = this._view;\n\t\t\tvar text = e.event.dataTransfer.getData(\"Text\"); //$NON-NLS-0$\n\t\t\tif (text) {\n\t\t\t\tif (!util.isFirefox) {\n\t\t\t\t\te.event.dataTransfer.dropEffect = this._dropEffect; //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t\tvar offset = view.getOffsetAtLocation(e.x, e.y);\n\t\t\t\tif (this._dragSelection) {\n\t\t\t\t\tthis._dropOffset = offset;\n\t\t\t\t\tthis._dropText = text;\n\t\t\t\t} else {\n\t\t\t\t\tview.setText(text, offset, offset);\n\t\t\t\t\tview.setSelection(offset, offset + text.length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn {TextDND: TextDND};\n});\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013, 2017 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/linkedMode\", [\r\n\t'i18n!orion/editor/nls/messages',\r\n\t'orion/keyBinding',\r\n\t'orion/editor/keyModes',\r\n\t'orion/editor/annotations',\r\n\t'orion/objects',\r\n\t'orion/util'\r\n], function(messages, mKeyBinding, mKeyModes, mAnnotations, objects) {\r\n\r\n\t/**\r\n\t * @name LinkedContentAssist\r\n\t * @description Creates a new LinkedContentAssist object which is used for linked data in templates\r\n\t * @constructor \r\n\t * @param {Object} linkedData The linked data\r\n\t * @returns A new LinkedContentAssist object\r\n\t * @since 9.0\r\n\t */\r\n\tfunction LinkedContentAssist(linkedData) {\r\n\t\tthis._data = linkedData;\r\n\t}\r\n\t\r\n\tLinkedContentAssist.prototype = {\r\n\t\t/**\n\t\t * @description Removes the prefix from the given string\n\t\t * @function\n\t\t * @param {String} prefix\n\t\t * @param {String} string\n\t\t * @returns {String} The substring after removing the prefix\n\t\t */\n\t\tchop: function(prefix, string) {\r\n\t\t\treturn string.substring(prefix.length);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @callback\r\n\t\t */\r\n\t\tcomputeProposals: function(buffer, offset, context) {\r\n\t\t\tvar prefix = context.prefix;\r\n\t\t\tvar proposals = [];\r\n\t\t\tvar linkedstyle = this._data.style ? this._data.style : null;\r\n\t\t\tlinkedstyle = linkedstyle ? linkedstyle : 'emphasis'; //$NON-NLS-1$\r\n\t\t\tvar values = this._data.values;\r\n\t\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\t\tvar val = values[i];\r\n\t\t\t\tif(typeof val === 'string' && val.indexOf(prefix) === 0) {\r\n\t\t\t\t\tproposals.push({proposal: this.chop(prefix, val), \r\n\t\t\t\t\t\tdescription: val,\r\n\t\t\t\t\t\thover: val,\r\n\t\t\t\t\t\tstyle: linkedstyle\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if(typeof val === 'object' && val.proposal) {\r\n\t\t\t\t\tproposals.push({proposal: this.chop(prefix, val.proposal), \r\n\t\t\t\t\t\tdescription: val.description ? val.description : val.proposal,\r\n\t\t\t\t\t\thover: val.hover ? val.hover : val.proposal,\r\n\t\t\t\t\t\tstyle: linkedstyle\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar linkedtitle = this._data.title ? this._data.title : null;\r\n\t\t\tif (0 < proposals.length) {\r\n\t\t\t\tproposals.splice(0, 0,{\r\n\t\t\t\t\tproposal: '',\r\n\t\t\t\t\tdescription: linkedtitle ? linkedtitle : 'Options', //$NON-NLS-0$\r\n\t\t\t\t\tstyle: 'noemphasis_title', //$NON-NLS-0$\r\n\t\t\t\t\tunselectable: true\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\treturn proposals;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\n\t * @name LinkedMode\n\t * @description Create a new LinkedMode\n\t * @param {Editor} editor The backing editor\n\t * @param {UndoStack} undoStack The undo stack\n\t * @param contentAssist\n\t * @returns returns\n\t */\n\tfunction LinkedMode(editor, undoStack, contentAssist) {\r\n\t\tvar textView = editor.getTextView();\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.editor = editor;\r\n\t\tthis.undoStack = undoStack;\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\t\r\n\t\tthis.linkedModeModel = null;\r\n\t\t\r\n\t\ttextView.setAction(\"linkedModeEnter\", function() { //$NON-NLS-0$\r\n\t\t\tthis.exitLinkedMode(true);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModeCancel\", function() { //$NON-NLS-0$\r\n\t\t\tthis.exitLinkedMode(true);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModeNextGroup\", function() { //$NON-NLS-0$\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup((model.selectedGroupIndex + 1) % model.groups.length);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"linkedModePreviousGroup\", function() { //$NON-NLS-0$\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup(model.selectedGroupIndex > 0 ? model.selectedGroupIndex-1 : model.groups.length-1);\r\n\t\t\treturn true;\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\t/**\r\n\t\t * Listener called when Linked Mode is active. Updates position's offsets and length\r\n\t\t * on user change. Also escapes the Linked Mode if the text buffer was modified outside of the Linked Mode positions.\r\n\t\t */\r\n\t\tthis.linkedModeListener = {\r\n\t\t\r\n\t\t\tonActivating: /* @callback */ function(evnt) {\r\n\t\t\t\tif (this._groupContentAssistProvider) {\r\n\t\t\t\t\tthis.contentAssist.setProviders([this._groupContentAssistProvider]);\r\n\t\t\t\t\tthis.contentAssist.setProgress(null);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this),\r\n\t\t\t\r\n\t\t\tonModelChanged: function(evnt) {\r\n\t\t\t\tif (this.ignoreVerify) { return; }\r\n\r\n\t\t\t\t// Get the position being modified\r\n\t\t\t\tvar start = this.editor.mapOffset(evnt.start);\r\n\t\t\t\tvar model = this.linkedModeModel, positionChanged, changed;\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tpositionChanged = this._getPositionChanged(model, start, start + evnt.removedCharCount);\r\n\t\t\t\t\tchanged = positionChanged.position;\r\n\t\t\t\t\tif (changed === undefined || changed.model !== model) {\r\n\t\t\t\t\t\t// The change has been done outside of the positions, exit the Linked Mode\r\n\t\t\t\t\t\tthis.exitLinkedMode(false);\r\n\t\t\t\t\t\tmodel = this.linkedModeModel;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!model) { return; }\r\n\r\n\t\t\t\t// Update position offsets for this change. Group changes are done in #onVerify\r\n\t\t\t\tvar deltaCount = 0;\r\n\t\t\t\tvar changeCount = evnt.addedCharCount - evnt.removedCharCount;\r\n\t\t\t\tvar sortedPositions = positionChanged.positions, position, pos;\r\n\t\t\t\tfor (var i = 0; i < sortedPositions.length; ++i) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tposition = pos.position;\r\n\t\t\t\t\tvar inside = position.offset <= start && start <= position.offset + position.length;\r\n\t\t\t\t\tif (inside && !pos.ansestor) {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\tdeltaCount += changeCount;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tif (pos.ansestor && inside) {\r\n\t\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pos.escape) {\r\n\t\t\t\t\t\tpos.model.escapePosition = position.offset;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._updateAnnotations(sortedPositions);\r\n\t\t\t}.bind(this),\r\n\r\n\t\t\tonVerify: function(evnt) {\r\n\t\t\t\tif (this.ignoreVerify) { return; }\r\n\r\n\t\t\t\t// Get the position being modified\r\n\t\t\t\tvar start = this.editor.mapOffset(evnt.start);\r\n\t\t\t\tvar end = this.editor.mapOffset(evnt.end);\r\n\t\t\t\tvar model = this.linkedModeModel, positionChanged, changed;\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tpositionChanged = this._getPositionChanged(model, start, end);\r\n\t\t\t\t\tchanged = positionChanged.position;\r\n\t\t\t\t\tif (changed === undefined || changed.model !== model) {\r\n\t\t\t\t\t\t// The change has been done outside of the positions, exit the Linked Mode\r\n\t\t\t\t\t\tthis.exitLinkedMode(false);\r\n\t\t\t\t\t\tmodel = this.linkedModeModel;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!model) { return; }\r\n\t\t\t\t\r\n\t\t\t\t// Make sure changes in a same group are compound\r\n\t\t\t\tvar undo = this._compoundChange;\r\n\t\t\t\tif (undo) {\r\n\t\t\t\t\tif (!(undo.owner.model === model && undo.owner.group === changed.group)) {\r\n\t\t\t\t\t\tthis.endUndo();\r\n\t\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.startUndo();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmodel.selectedGroupIndex = changed.group;\r\n\t\t\t\t\r\n\t\t\t\t// Update position offsets taking into account all positions in the same changing group\r\n\t\t\t\tvar deltaCount = 0;\r\n\t\t\t\tvar changeCount = evnt.text.length - (end - start);\r\n\t\t\t\tvar sortedPositions = positionChanged.positions, position, pos;\r\n\t\t\t\tvar deltaStart = start - changed.position.offset, deltaEnd = end - changed.position.offset;\r\n\t\t\t\tfor (var i = 0; i < sortedPositions.length; ++i) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tposition = pos.position;\r\n\t\t\t\t\tpos.oldOffset = position.offset;\r\n\t\t\t\t\tif (pos.model === model && pos.group === changed.group) {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tposition.length += changeCount;\r\n\t\t\t\t\t\tdeltaCount += changeCount;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition.offset += deltaCount;\r\n\t\t\t\t\t\tif (pos.ansestor) {\r\n\t\t\t\t\t\t\tposition.length += changed.count * changeCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pos.escape) {\r\n\t\t\t\t\t\tpos.model.escapePosition = position.offset;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Cancel this modification and apply same modification to all positions in changing group\r\n\t\t\t\tthis.ignoreVerify = true;\r\n\t\t\t\tfor (i = sortedPositions.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tpos = sortedPositions[i];\r\n\t\t\t\t\tif (pos.model === model && pos.group === changed.group) {\r\n\t\t\t\t\t\tvar text = evnt.text;\r\n\t\t\t\t\t\tif(Array.isArray(text)) {\r\n\t\t\t\t\t\t\ttext = evnt.text[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.editor.setText(text, pos.oldOffset + deltaStart , pos.oldOffset + deltaEnd, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.ignoreVerify = false;\r\n\t\t\t\tevnt.text = null;\r\n\t\t\t\tthis._updateAnnotations(sortedPositions);\r\n\t\t\t}.bind(this)\r\n\t\t};\r\n\t}\r\n\tLinkedMode.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(LinkedMode.prototype, {\r\n\t\t/**\n\t\t * @description Create the keybindings\n\t\t * @function\n\t\t * @returns {Array.<Object>} The keybindings\n\t\t */\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"linkedModeEnter\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModeCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModeNextGroup\", keyBinding: new KeyBinding(9)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"linkedModePreviousGroup\", keyBinding: new KeyBinding(9, false, true)}); //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Starts Linked Mode, selects the first position and registers the listeners.\r\n\t\t * @param {Object} linkedModeModel An object describing the model to be used by linked mode.\r\n\t\t * Contains one or more position groups. If a position in a group is edited, the other positions in\r\n\t\t * the same group are edited the same way. The model structure is as follows:\r\n\t\t * <pre>{\r\n\t\t *\t\tgroups: [{\r\n\t\t *\t\t\tdata: {},\r\n\t\t *\t\t\tpositions: [{\r\n\t\t *\t\t\t\toffset: 10, // Relative to the text buffer\r\n\t\t *\t\t\t\tlength: 3\r\n\t\t *\t\t\t}]\r\n\t\t *\t\t}],\r\n\t\t *\t\tescapePosition: 19, // Relative to the text buffer\r\n\t\t * }</pre>\r\n\t\t *\r\n\t\t * Each group in the model has an optional <code>data</code> property which can be\r\n\t\t * used to provide additional content assist for the group.  The <code>type</code> in\r\n\t\t * data determines what kind of content assist is provided. These are the support\r\n\t\t * structures for the <code>data</code> property.\r\n\t\t * <pre>{\r\n\t\t *\t\ttype: \"link\"\r\n\t\t *\t\tvalues: [\"proposal0\", \"proposal1\", ...]\r\n\t\t * }</pre>\r\n\t\t *\r\n\t\t * The \"link\" data struture provides static content assist proposals stored in the\r\n\t\t * <code>values</code> property.\r\n\t\t *\r\n\t\t * <p>\r\n\t\t * <b>See:</b><br/>\r\n\t\t * {@link orion.editor.Template}<br/>\r\n\t\t * {@link orion.editor.TemplateContentAssist}<br/>\r\n\t\t * </p>\r\n\t\t */\r\n\t\tenterLinkedMode: function(linkedModeModel) {\r\n\t\t\tif (!this.linkedModeModel) {\r\n\t\t\t\tvar textView = this.editor.getTextView();\r\n\t\t\t\ttextView.addKeyMode(this);\r\n\t\t\t\ttextView.addEventListener(\"Verify\", this.linkedModeListener.onVerify);\r\n\t\t\t\ttextView.addEventListener(\"ModelChanged\", this.linkedModeListener.onModelChanged);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tcontentAssist.addEventListener(\"Activating\", this.linkedModeListener.onActivating);\r\n\t\t\t\tthis.editor.reportStatus(messages.linkedModeEntered, null, true);\r\n\t\t\t}\r\n\t\t\tthis._sortedPositions = null;\r\n\t\t\tif (this.linkedModeModel) {\r\n\t\t\t\tlinkedModeModel.previousModel = this.linkedModeModel;\r\n\t\t\t\tlinkedModeModel.parentGroup = this.linkedModeModel.selectedGroupIndex;\r\n\t\t\t\tthis.linkedModeModel.nextModel = linkedModeModel;\r\n\t\t\t}\r\n\t\t\tthis.linkedModeModel = linkedModeModel;\r\n\t\t\tthis.selectLinkedGroup(0);\r\n\t\t},\r\n\t\t/** \r\n\t\t * Exits Linked Mode. Optionally places the caret at linkedMode escapePosition. \r\n\t\t * @param {Boolean} [escapePosition=false] if true, place the caret at the  escape position.\r\n\t\t */\r\n\t\texitLinkedMode: function(escapePosition) {\r\n\t\t\tif (!this.isActive()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._compoundChange) {\r\n\t\t\t\tthis.endUndo();\r\n\t\t\t\tthis._compoundChange = null;\r\n\t\t\t}\r\n\t\t\tthis._sortedPositions = null;\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tthis.linkedModeModel = model.previousModel;\r\n\t\t\tmodel.parentGroup = model.previousModel = undefined;\r\n\t\t\tif (this.linkedModeModel) {\r\n\t\t\t\tthis.linkedModeModel.nextModel = undefined;\r\n\t\t\t}\r\n\t\t\tif (!this.linkedModeModel) {\r\n\t\t\t\tvar editor = this.editor;\r\n\t\t\t\tvar textView = editor.getTextView();\r\n\t\t\t\ttextView.removeKeyMode(this);\r\n\t\t\t\ttextView.removeEventListener(\"Verify\", this.linkedModeListener.onVerify);\r\n\t\t\t\ttextView.removeEventListener(\"ModelChanged\", this.linkedModeListener.onModelChanged);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tcontentAssist.removeEventListener(\"Activating\", this.linkedModeListener.onActivating);\r\n\t\t\t\tcontentAssist.offset = undefined;\r\n\t\t\t\tthis.editor.reportStatus(messages.linkedModeExited, null, true);\r\n\t\t\t}\r\n\t\t\tif (escapePosition && typeof model.escapePosition === \"number\") {\r\n\t\t\t\teditor.setCaretOffset(model.escapePosition, false);\r\n\t\t\t}\r\n\t\t\tthis.selectLinkedGroup(0);\r\n\t\t},\r\n\t\t/**\n\t\t * @description Start undoing\n\t\t */\n\t\tstartUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tvar slf = this;\r\n\t\t\t\tvar model = this.linkedModeModel;\r\n\t\t\t\tthis._compoundChange = this.undoStack.startCompoundChange({\r\n\t\t\t\t\tmodel: model,\r\n\t\t\t\t\tgroup: model.selectedGroupIndex,\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @callback \n\t\t\t\t\t */\n\t\t\t\t\tend: function() {\r\n\t\t\t\t\t\tslf._compoundChange = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, \r\n\t\t/**\n\t\t * @description Ends the undo\n\t\t */\n\t\tendUndo: function() {\r\n\t\t\tif (this.undoStack) {\r\n\t\t\t\tthis.undoStack.endCompoundChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns if linked mode is active in the current editor\n\t\t * @function\n\t\t * @returns {Boolean} If linked mode is active\n\t\t */\n\t\tisActive: function() {\r\n\t\t\treturn Boolean(this.linkedModeModel);\r\n\t\t},\r\n\t\t/**\r\n\t\t * @description Returns if linked mode status is active in the current editor\r\n\t\t * @function\r\n\t\t * @returns {Boolean} If linked mode status is active\r\n\t\t */\r\n\t\tisStatusActive: function() {\r\n\t\t\treturn Boolean(this.linkedModeModel);\r\n\t\t},\r\n\t\t/**\r\n\t\t * @description Selects the group of the given index from the currently active model\r\n\t\t * @param {Number} index The group index to select\r\n\t\t */\r\n\t\tselectLinkedGroup: function(index) {\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tif (model) {\r\n\t\t\t\tmodel.selectedGroupIndex = index;\r\n\t\t\t\tvar group = model.groups[index];\r\n\t\t\t\tvar position = group.positions[0];\r\n\t\t\t\tvar editor = this.editor;\r\n\t\t\t\teditor.setSelection(position.offset, position.offset + position.length);\r\n\t\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\t\tif (contentAssist) {\r\n\t\t\t\t\tcontentAssist.offset = undefined;\r\n\t\t\t\t\tif (group.data && group.data.type === \"link\" && group.data.values) {\r\n\t\t\t\t\t\tvar provider = this._groupContentAssistProvider = new LinkedContentAssist(group.data);\r\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @callback \n\t\t\t\t\t\t */\n\t\t\t\t\t\tprovider.getPrefix = function() {\r\n\t\t\t\t\t\t\tvar selection = editor.getSelection();\r\n\t\t\t\t\t\t\tif (selection.start === selection.end) {\r\n\t\t\t\t\t\t\t\tvar caretOffset = editor.getCaretOffset();\r\n\t\t\t\t\t\t\t\tif (position.offset <= caretOffset && caretOffset <= position.offset + position.length) {\r\n\t\t\t\t\t\t\t\t\treturn editor.getText(position.offset, caretOffset);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn \"\";\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcontentAssist.offset = position.offset;\r\n\t\t\t\t\t\tcontentAssist.deactivate();\r\n\t\t\t\t\t\tcontentAssist.activate();\r\n\t\t\t\t\t} else if (this._groupContentAssistProvider) {\r\n\t\t\t\t\t\tthis._groupContentAssistProvider = null;\r\n\t\t\t\t\t\tcontentAssist.deactivate();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._updateAnnotations();\r\n\t\t},\r\n\t\t/**\n\t\t * @description Collect all model positions into the <code>all</code> array\n\t\t * @function\n\t\t * @private\n\t\t * @param {Array.<Object>} all The collector for the position objects\n\t\t * @param {Object} model The linked model to collect all positions from\n\t\t * @param {Object} delta The change in position\n\t\t */\n\t\t_getModelPositions: function(all, model, delta) {\r\n\t\t\tvar groups = model.groups;\r\n\t\t\tfor (var i = 0; i < groups.length; i++) {\r\n\t\t\t\tvar positions = groups[i].positions;\r\n\t\t\t\tfor (var j = 0; j < positions.length; j++) {\r\n\t\t\t\t\tvar position = positions[j];\r\n\t\t\t\t\tif (delta) {\r\n\t\t\t\t\t\tposition = {offset: position.offset + delta, length: position.length};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar pos = {\r\n\t\t\t\t\t\tindex: j,\r\n\t\t\t\t\t\tgroup: i,\r\n\t\t\t\t\t\tcount: positions.length,\r\n\t\t\t\t\t\tmodel: model,\r\n\t\t\t\t\t\tposition: position\r\n\t\t\t\t\t};\r\n\t\t\t\t\tall.push(pos);\r\n\t\t\t\t\tif (model.nextModel && model.nextModel.parentGroup === i) {\r\n\t\t\t\t\t\tpos.ansestor = true;\r\n\t\t\t\t\t\tthis._getModelPositions(all, model.nextModel, (delta || 0) + positions[j].offset - positions[0].offset);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns an array of all of the positions sorted \n\t\t * @function\n\t\t * @private\n\t\t * @param {Object} model The linked model to get and sort positions from\n\t\t * @returns {Array.<Object>} The sorted array of positions from the given model\n\t\t */\n\t\t_getSortedPositions: function(model) {\r\n\t\t\tvar all = this._sortedPositions;\r\n\t\t\tif (!all) {\r\n\t\t\t\tall = [];\r\n\t\t\t\t// Get the root linked model\r\n\t\t\t\twhile (model.previousModel) {\r\n\t\t\t\t\tmodel = model.previousModel;\r\n\t\t\t\t}\r\n\t\t\t\t// Get all positions under model expanding group positions of stacked linked modes\r\n\t\t\t\tthis._getModelPositions(all, model);\r\n\t\t\t\t// Add escape position for all models\r\n\t\t\t\twhile (model) {\r\n\t\t\t\t\tif (typeof model.escapePosition === \"number\") {\r\n\t\t\t\t\t\tall.push({\r\n\t\t\t\t\t\t\tescape: true,\r\n\t\t\t\t\t\t\tmodel: model,\r\n\t\t\t\t\t\t\tposition: {offset: model.escapePosition, length: 0}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmodel = model.nextModel;\r\n\t\t\t\t}\r\n\t\t\t\tall.sort(function(a, b) {\r\n\t\t\t\t\treturn a.position.offset - b.position.offset;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sortedPositions = all;\r\n\t\t\t}\r\n\t\t\treturn all;\r\n\t\t},\r\n\t\t/**\n\t\t * @description Returns if the given start - end position has changed in the given model\n\t\t * @function\n\t\t * @private\n\t\t * @param {Object} model The model to check\n\t\t * @param {Number} start The start\n\t\t * @param {Number} end The end\n\t\t * @returns {Object} The changed position\n\t\t */\n\t\t_getPositionChanged: function(model, start, end) {\r\n\t\t\tvar changed;\r\n\t\t\tvar sortedPositions = this._getSortedPositions(model);\r\n\t\t\tfor (var i = sortedPositions.length - 1; i >= 0; i--) {\r\n\t\t\t\tif (sortedPositions[i].escape) {\r\n\t\t\t\t\tcontinue;\n\t\t\t\t}\r\n\t\t\t\tvar position = sortedPositions[i].position;\r\n\t\t\t\tif (position.offset <= start && end <= position.offset + position.length) {\r\n\t\t\t\t\tchanged = sortedPositions[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {position: changed, positions: sortedPositions};\r\n\t\t},\r\n\t\t/**\n\t\t * @description Updates the editor annotations based on the given positions\n\t\t * @function\n\t\t * @private\n\t\t * @param {Array.<Object>} positions The positions\n\t\t */\n\t\t_updateAnnotations: function(positions) {\r\n\t\t\tvar annotationModel = this.editor.getAnnotationModel();\r\n\t\t\tif (!annotationModel) { return; }\r\n\t\t\tvar remove = [], add = [];\r\n\t\t\tvar annotations = annotationModel.getAnnotations(), annotation;\r\n\t\t\twhile (annotations.hasNext()) {\r\n\t\t\t\tannotation = annotations.next();\r\n\t\t\t\tswitch (annotation.type) {\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_LINKED_GROUP:\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP:\r\n\t\t\t\t\tcase mAnnotations.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP:\r\n\t\t\t\t\t\tremove.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar model = this.linkedModeModel;\r\n\t\t\tif (model) {\r\n\t\t\t\tpositions = positions || this._getSortedPositions(model);\r\n\t\t\t\tfor (var i = 0; i < positions.length; i++) {\r\n\t\t\t\t\tvar position = positions[i];\r\n\t\t\t\t\tif (position.model !== model) { continue; }\r\n\t\t\t\t\tif (position.escape) { continue; }\r\n\t\t\t\t\tvar type = mAnnotations.AnnotationType.ANNOTATION_LINKED_GROUP;\r\n\t\t\t\t\tif (position.group === model.selectedGroupIndex) {\r\n\t\t\t\t\t\tif (position.index === 0 && position.count > 1) {\r\n\t\t\t\t\t\t\ttype = mAnnotations.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttype = mAnnotations.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tposition = position.position;\r\n\t\t\t\t\tannotation = mAnnotations.AnnotationType.createAnnotation(type, position.offset, position.offset + position.length, \"\");\r\n\t\t\t\t\tadd.push(annotation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tannotationModel.replaceAnnotations(remove, add);\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tLinkedMode: LinkedMode\r\n\t};\r\n});\r\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2013 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\ndefine(\"orion/editor/factories\", [ //$NON-NLS-0$\r\n\t'orion/editor/actions', //$NON-NLS-0$\r\n\t'orion/editor/undoStack', //$NON-NLS-0$\r\n\t'orion/editor/rulers', //$NON-NLS-0$\r\n\t'orion/editor/annotations', //$NON-NLS-0$\r\n\t'orion/editor/textDND', //$NON-NLS-0$\r\n\t'orion/editor/linkedMode', //$NON-NLS-0$\r\n\t'orion/util' //$NON-NLS-0$\r\n], function(mActions, mUndoStack, mRulers, mAnnotations, mTextDND, mLinkedMode, util) {\r\n\r\n\tvar exports = {};\r\n\t\r\n\tfunction KeyBindingsFactory() {\r\n\t}\r\n\tKeyBindingsFactory.prototype = {\r\n\t\tcreateKeyBindings: function(editor, undoStack, contentAssist, searcher) {\r\n\t\t\t// Create keybindings for generic editing, no dependency on the service model\r\n\t\t\tvar textActions = new mActions.TextActions(editor, undoStack , searcher);\r\n\t\t\t// Linked Mode\r\n\t\t\tvar linkedMode = new mLinkedMode.LinkedMode(editor, undoStack, contentAssist);\r\n\t\t\t// create keybindings for source editing\r\n\t\t\t// TODO this should probably be something that happens more dynamically, when the editor changes input\r\n\t\t\tvar sourceCodeActions = new mActions.SourceCodeActions(editor, undoStack, contentAssist, linkedMode);\r\n\t\t\treturn {\r\n\t\t\t\ttextActions: textActions,\r\n\t\t\t\tlinkedMode: linkedMode,\r\n\t\t\t\tsourceCodeActions: sourceCodeActions\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\texports.KeyBindingsFactory = KeyBindingsFactory;\r\n\t\r\n\tfunction UndoFactory() {\r\n\t}\r\n\tUndoFactory.prototype = {\r\n\t\tcreateUndoStack: function(editor) {\r\n\t\t\tvar textView = editor.getTextView();\r\n\t\t\treturn new mUndoStack.UndoStack(textView, 200);\r\n\t\t}\r\n\t};\r\n\texports.UndoFactory = UndoFactory;\r\n\r\n\tfunction LineNumberRulerFactory() {\r\n\t}\r\n\tLineNumberRulerFactory.prototype = {\r\n\t\tcreateLineNumberRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.LineNumberRuler(annotationModel, \"left\", {styleClass: \"ruler lines\"}, {styleClass: \"rulerLines odd\"}, {styleClass: \"rulerLines even\"}); //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.LineNumberRulerFactory = LineNumberRulerFactory;\r\n\t\r\n\tfunction FoldingRulerFactory() {\r\n\t}\r\n\tFoldingRulerFactory.prototype = {\r\n\t\tcreateFoldingRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.FoldingRuler(annotationModel, \"left\", {styleClass: \"ruler folding\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.FoldingRulerFactory = FoldingRulerFactory;\r\n\t\r\n\tfunction ZoomRulerFactory() {\r\n\t}\r\n\tZoomRulerFactory.prototype = {\r\n\t\tcreateZoomRuler: function(annotationModel) {\r\n\t\t\treturn new mRulers.ZoomRuler(util.isIOS || util.isAndroid ? \"right\" : \"innerRight\", {styleClass: \"ruler zoom\"}); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t}\r\n\t};\r\n\texports.ZoomRulerFactory = ZoomRulerFactory;\r\n\t\r\n\tfunction AnnotationFactory() {\r\n\t}\r\n\tAnnotationFactory.prototype = {\r\n\t\tcreateAnnotationModel: function(model) {\r\n\t\t\treturn new mAnnotations.AnnotationModel(model);\r\n\t\t},\r\n\t\tcreateAnnotationStyler: function(annotationModel, view) {\r\n\t\t\treturn new mAnnotations.AnnotationStyler(annotationModel, view);\r\n\t\t},\r\n\t\tcreateAnnotationRulers: function(annotationModel) {\r\n\t\t\tvar annotationRuler = new mRulers.AnnotationRuler(annotationModel, \"left\", {styleClass: \"ruler annotations\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar overviewRuler = new mRulers.OverviewRuler(annotationModel, \"right\", {styleClass: \"ruler overview\"}); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn {annotationRuler: annotationRuler, overviewRuler: overviewRuler};\r\n\t\t}\r\n\t};\r\n\texports.AnnotationFactory = AnnotationFactory;\r\n\t\r\n\tfunction TextDNDFactory() {\r\n\t}\r\n\tTextDNDFactory.prototype = {\r\n\t\tcreateTextDND: function(editor, undoStack) {\r\n\t\t\treturn new mTextDND.TextDND(editor.getTextView(), undoStack);\r\n\t\t}\r\n\t};\r\n\texports.TextDNDFactory = TextDNDFactory;\r\n\t\r\n\treturn exports;\r\n});\n","/*******************************************************************************\n * @license\n * Copyright (c) 2011, 2013 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n ******************************************************************************/\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/editorFeatures\", [ //$NON-NLS-0$\n\t'orion/editor/factories', //$NON-NLS-0$\n\t'orion/editor/actions', //$NON-NLS-0$\n\t'orion/editor/linkedMode', //$NON-NLS-0$\n\t'orion/objects' //$NON-NLS-0$\n], function(mFactories, mActions, mLinkedMode, objects) {\n\treturn objects.mixin({}, mFactories, mActions, mLinkedMode);\n});\n\n","/*******************************************************************************\r\n * @license\r\n * Copyright (c) 2011, 2016 IBM Corporation and others.\r\n * All rights reserved. This program and the accompanying materials are made \r\n * available under the terms of the Eclipse Public License v1.0 \r\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \r\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \r\n *\r\n * Contributors:\r\n *     IBM Corporation - initial API and implementation\r\n *******************************************************************************/\r\n/*eslint-env browser, amd*/\r\n/*eslint-disable no-else-return, no-extra-parens*/\ndefine(\"orion/editor/contentAssist\", [\r\n\t'i18n!orion/editor/nls/messages',\r\n\t'orion/keyBinding',\r\n\t'orion/editor/keyModes',\r\n\t'orion/editor/eventTarget',\r\n\t'orion/Deferred',\r\n\t'orion/objects',\r\n\t'orion/editor/tooltip',\r\n\t'orion/editor/util',\r\n\t'orion/util',\r\n\t'orion/webui/littlelib',\r\n\t'orion/metrics'\r\n], function(messages, mKeyBinding, mKeyModes, mEventTarget, Deferred, objects, mTooltip, textUtil, util, lib, mMetrics) {\r\n\t/**\r\n\t * @name orion.editor.ContentAssistProvider\r\n\t * @class Interface defining a provider of content assist proposals.\r\n\t */\r\n\t/**\r\n\t * @memberOf orion.editor.ContentAssistProvider.prototype\r\n\t * @function\r\n\t * @name computeProposals\r\n\t * @param {String} buffer The buffer being edited.\r\n\t * @param {Number} offset The position in the buffer at which content assist is being requested.\r\n\t * @param {orion.editor.ContentAssistProvider.Context} context\r\n\t * @returns {Object[]} This provider's proposals for the given buffer and offset.\r\n\t */\r\n\t/**\r\n\t * @name orion.editor.ContentAssistProvider.Context\r\n\t * @class\r\n\t * @property {String} line The text of the line on which content assist is being requested.\r\n\t * @property {String} prefix Any non-whitespace, non-symbol characters preceding the offset.\r\n\t * @property {orion.editor.Selection} selection The current selection.\r\n\t */\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssist\r\n\t * @class Provides content assist for a TextView.\r\n\t * @description Creates a <code>ContentAssist</code> for a TextView. A ContentAssist consults a set of \r\n\t * {@link orion.editor.ContentAssistProvider}s to obtain proposals for text that may be inserted into a\r\n\t * TextView at a given offset.<p>\r\n\t * A ContentAssist is generally activated by its TextView action, at which point it computes the set of \r\n\t * proposals available. It will re-compute the proposals in response to subsequent changes on the TextView \r\n\t * (for example, user typing) for as long as the ContentAssist is active. A proposal may be applied by calling \r\n\t * {@link #apply}, after which the ContentAssist becomes deactivated. An active ContentAssist may be deactivated\r\n\t * by calling {@link #deactivate}.<p>\r\n\t * A ContentAssist dispatches events when it becomes activated or deactivated, and when proposals have been computed.\r\n\t * @param {orion.editor.TextView} textView The TextView to provide content assist for.\r\n\t * @borrows orion.editor.EventTarget#addEventListener as #addEventListener\r\n\t * @borrows orion.editor.EventTarget#removeEventListener as #removeEventListener\r\n\t * @borrows orion.editor.EventTarget#dispatchEvent as #dispatchEvent\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist is about to be activated.\r\n\t * @name orion.editor.ContentAssist#ActivatingEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist is about to be deactivated.\r\n\t * @name orion.editor.ContentAssist#DeactivatingEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched when a ContentAssist has applied a proposal. <p>This event's <code>data</code> field gives information\r\n\t * about the proposal that was applied.\r\n\t * @name orion.editor.ContentAssist#ProposalAppliedEvent\r\n\t * @event\r\n\t */\r\n\t/**\r\n\t * Dispatched whenever a ContentAssist has obtained proposals from its providers. <p>This event's\r\n\t * <code>data</code> field gives information about the proposals.\r\n\t * @name orion.editor.ContentAssist#ProposalsComputedEvent\r\n\t * @event\r\n\t */\r\n\t\t\r\n\t// INACTIVE --Ctrl+Space--> ACTIVE --ModelChanging--> FILTERING\r\n\tvar State = {\r\n\t\tINACTIVE: 1,\r\n\t\tACTIVE: 2,\r\n\t\tFILTERING: 3\r\n\t};\r\n\t\r\n\tvar STYLES = {\r\n\t\tselected : \"selected\", //$NON-NLS-0$\r\n\t\thr : \"proposal-hr\", //$NON-NLS-0$\r\n\t\temphasis : \"proposal-emphasis\", //$NON-NLS-0$\r\n\t\tstrikethrough: \"proposal-strikethrough\",\r\n\t\tnoemphasis : \"proposal-noemphasis\", //$NON-NLS-0$\r\n\t\tnoemphasis_title : \"proposal-noemphasis-title\", //$NON-NLS-0$\r\n\t\tnoemphasis_title_keywords : \"proposal-noemphasis-title-keywords\", //$NON-NLS-0$\r\n\t\tdfault : \"proposal-default\" //$NON-NLS-0$\r\n\t};\r\n\t\r\n\t/**\n\t * @name ContentAssist\n\t * @description Creates a new content assist manager for the given text view\n\t * @param textView The text view to provide content assist for\n\t * @param serviceRegistry Optional, used to look up page message service for status\n\t */\n\tfunction ContentAssist(textView, serviceRegistry) {\r\n\t\tthis.textView = textView;\r\n\t\tif (serviceRegistry){\r\n\t\t\tthis.pageMessage = serviceRegistry.getService(\"orion.page.message\"); //$NON-NLS-1$\r\n\t\t}\r\n\t\tthis.state = State.INACTIVE;\r\n\t\tthis.clearProviders();\r\n\t\tvar self = this;\r\n\t\tthis._textViewListeners = {\r\n\t\t\tonModelChanging: (function(event) {\r\n\t\t\t\tthis._latestModelChangingEvent = event;\r\n\t\t\t\tif (event) {\r\n\t\t\t\t\tthis._updateFilterText(event);\t\r\n\t\t\t\t}\r\n\t\t\t}).bind(this),\r\n\t\t\tonSelection: (function(event) {\r\n\t\t\t\tif (this.isDeactivatingChange(this._latestModelChangingEvent, event)) {\r\n\t\t\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.isActive()) {\r\n\t\t\t\t\t\tif (this.state === State.ACTIVE) {\r\n\t\t\t\t\t\t\tthis.setState(State.FILTERING);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.filterProposals();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._latestModelChangingEvent = null;\r\n\t\t\t}).bind(this),\r\n\t\t\tonScroll: (function(event) {\r\n\t\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\t}).bind(this)\r\n\t\t};\r\n\t\t\r\n\t\ttextView.setKeyBinding(util.isMac ? new mKeyBinding.KeyBinding(' ', false, false, false, true) : new mKeyBinding.KeyBinding(' ', true), \"contentAssist\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\ttextView.setKeyBinding(util.isMac ? new mKeyBinding.KeyBinding(' ', false, false, true, true) : new mKeyBinding.KeyBinding(' ', true, false, true), \"contentAssist\"); //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\ttextView.setAction(\"contentAssist\", function() { //$NON-NLS-0$\r\n\t\t\tif (!textView.getOptions(\"readonly\")) { //$NON-NLS-0$\r\n\t\t\t\tself.activate();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}, {name: messages.contentAssist});\r\n\t}\r\n\tContentAssist.prototype = /** @lends orion.editor.ContentAssist.prototype */ {\r\n\t\t/**\r\n\t\t * Applies the given proposal to the TextView.\r\n\t\t * @param {Object} [proposal]\r\n\t\t * @returns {Boolean} <code>true</code> if the proposal was applied; <code>false</code> if no proposal was provided.\r\n\t\t */\r\n\t\tapply: function(proposal) {\r\n\t\t\tif (!proposal) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\t// now handle prefixes\r\n\t\t\t// if there is a non-empty selection, then replace it,\r\n\t\t\t// if overwrite is truthy, then also replace the prefix\r\n\t\t\tvar view = this.textView;\r\n\t\t\tvar sel = view.getSelection();\r\n\t\t\tvar start = this._initialCaretOffset;\r\n\t\t\tvar mapStart = start;\r\n\t\t\tvar end = Math.max(sel.start, sel.end), mapEnd = end;\r\n\t\t\tvar model = view.getModel();\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tmapStart = model.mapOffset(mapStart);\r\n\t\t\t\tmapEnd = model.mapOffset(mapEnd);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (proposal.overwrite) {\r\n\t\t\t    if(typeof proposal.prefix === 'string') {\r\n\t\t\t        start = mapStart-proposal.prefix.length;\r\n\t\t\t    } else {\r\n\t\t\t\t    start = this.getPrefixStart(model, mapStart);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tproposal: proposal,\r\n\t\t\t\tstart: mapStart,\r\n\t\t\t\tend: mapEnd\r\n\t\t\t};\r\n\t\t\tthis.setState(State.INACTIVE);\r\n\t\t\tvar proposalText = typeof proposal === \"string\" ? proposal : proposal.proposal;\r\n\t\t\tview.setText(proposalText, start, end);\r\n\t\t\tif (proposal.additionalEdits) {\r\n\t\t\t\tvar edit;\r\n\t\t\t\tfor (var i = 0; i < proposal.additionalEdits.length; i++) {\r\n\t\t\t\t\tedit = proposal.additionalEdits[i];\r\n\t\t\t\t\tview.setText(edit.text, edit.offset, edit.offset + edit.length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dispatchEvent({type: \"ProposalApplied\", data: data}); //$NON-NLS-0$\r\n\t\t\tmMetrics.logEvent(\"contentAssist\", \"apply\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tactivate: function(providers, autoTriggered) {\r\n\t\t\tif (this.state === State.INACTIVE) {\r\n\t\t\t\tmMetrics.logEvent(\"contentAssist\", \"activate\", undefined, autoTriggered ? 0 : 1); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\tthis._autoTriggered = autoTriggered ? true : false;\r\n\t\t\t\tthis.setState(State.ACTIVE, providers);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeactivate: function() {\r\n\t\t\tthis.setState(State.INACTIVE);\r\n\t\t},\r\n\t\t/** @returns {orion.editor.TextView} */\r\n\t\tgetTextView: function() {\r\n\t\t\treturn this.textView;\r\n\t\t},\r\n\t\t/** @returns {Boolean} */\r\n\t\tisActive: function() {\r\n\t\t\treturn this.state === State.ACTIVE || this.state === State.FILTERING;\r\n\t\t},\r\n\t\t/** @returns {Boolean} <code>true</code> if the event describes a change that should deactivate content assist. */\r\n\t\tisDeactivatingChange: function(/**orion.editor.ModelChangingEvent*/ event, selectionEvent) {\r\n\t\t\tvar isDeactivating = false;\r\n\t\t\t\r\n\t\t\tvar selections = Array.isArray(selectionEvent.newValue) ? selectionEvent.newValue : [selectionEvent.newValue];\r\n\t\t\tvar isPriorToInitialCaretOffset = selections[0].start < this._initialCaretOffset;\r\n\t\t\t\r\n\t\t\tif (isPriorToInitialCaretOffset || !event) {\r\n\t\t\t\tisDeactivating = true;\r\n\t\t\t} else if (event) {\r\n\t\t\t\tisDeactivating = (event.removedLineCount > 0) || (event.addedLineCount > 0);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn isDeactivating;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tsetState: function(state, /* Optional. Array of providers to pass to dispatched event.*/ providers) {\r\n\t\t\tvar eventType;\r\n\t\t\tif (state === State.ACTIVE) {\r\n\t\t\t\teventType = \"Activating\"; //$NON-NLS-0$\r\n\t\t\t\tif (this._mode) { this._mode.setActive(true); }\r\n\t\t\t} else if (state === State.INACTIVE) {\r\n\t\t\t\teventType = \"Deactivating\"; //$NON-NLS-0$\r\n\t\t\t\tif (this._mode) { this._mode.setActive(false); }\r\n\t\t\t}\r\n\t\t\tif (eventType) {\r\n\t\t\t\tthis.dispatchEvent({type: eventType, providers: providers});\r\n\t\t\t}\r\n\t\t\tthis.state = state;\r\n\t\t\tthis.onStateChange(state);\r\n\t\t},\r\n\t\tsetMode: function(mode) {\r\n\t\t\tthis._mode = mode;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tonStateChange: function(state) {\r\n\t\t\tif (state === State.INACTIVE) {\r\n\t\t\t\tthis._removeTextViewListeners();\r\n\t\t\t\tthis._filterText = \"\";\r\n\t\t\t\tthis._initialCaretOffset = -1;\r\n\t\t\t\tthis._computedProposals = null;\r\n\t\t\t} else if (state === State.ACTIVE) {\r\n\t\t\t\tthis._filterText = \"\";\r\n\t\t\t\tthis._addTextViewListeners();\r\n\t\t\t\tthis.computeProposals();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Computes the proposals at the TextView's current caret offset.\r\n\t\t */\r\n\t\tcomputeProposals: function() {\r\n\t\t\t// figure out initial offset, it should be the minimum between \r\n\t\t\t// the beginning of the selection and the current caret offset\r\n\t\t\tvar offset = this.textView.getCaretOffset();\r\n\t\t\tvar sel = this.textView.getSelection();\r\n\t\t\tvar selectionStart = Math.min(sel.start, sel.end);\t\t\t\r\n\t\t\tthis._initialCaretOffset = Math.min(offset, selectionStart);\r\n\t\t\tthis._computedProposals = null;\r\n\t\t\tdelete this._autoApply;\r\n\t\t\tthis._computeProposals(this._initialCaretOffset).then(function(proposals) {\r\n\t\t\t\tif (this.isActive()) {\r\n\t\t\t\t\tvar flatProposalArray = this._flatten(proposals);\r\n\t\t\t\t\t//check if flattened proposals form a valid array with at least one entry\r\n\t\t\t\t\tif (flatProposalArray && Array.isArray(flatProposalArray) && (0 < flatProposalArray.length)) {\r\n\t\t\t\t\t\tthis._computedProposals = proposals;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar autoApply = typeof this._autoApply === 'boolean' ? this._autoApply : !this._autoTriggerEnabled;\r\n\t\t\t\t\tthis.dispatchEvent({type: \"ProposalsComputed\", data: {proposals: flatProposalArray}, autoApply: autoApply}); //$NON-NLS-0$\r\n\t\t\t\t\tif (this._computedProposals && this._filterText) {\r\n\t\t\t\t\t\t// force filtering here because user entered text after\r\n\t\t\t\t\t\t// computeProposals() was called but before the plugins\r\n\t\t\t\t\t\t// returned the computed proposals\r\n\t\t\t\t\t\tthis.filterProposals(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetPrefixStart: function(model, end) {\r\n\t\t\tvar index = end;\r\n\t\t\twhile (index > 0 && /[A-Za-z0-9_]/.test(model.getText(index - 1, index))) {\r\n\t\t\t\tindex--;\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\thandleError: function(error) {\r\n\t\t\tif (typeof console !== \"undefined\") {\r\n\t\t\t\tconsole.log(\"Error retrieving content assist proposals\"); //$NON-NLS-0$\r\n\t\t\t\tconsole.log(error && error.stack);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Initializes the providers. A provider must define an <tt>initialize()</tt> method to be initialized.\r\n\t\t * @since 6.0\r\n\t\t */\r\n\t\tinitialize: function() {\r\n\t\t\tthis._providers.forEach(function(info) {\r\n\t\t\t\tvar provider = info.provider;\r\n\t\t\t\tif (typeof provider.initialize === \"function\") {\r\n\t\t\t\t\tprovider.initialize();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Retrieves the proposals at the given offset.\r\n\t\t * @private\r\n\t\t * @param {Number} offset The caret offset.\r\n\t\t * @returns {Deferred} A promise that will provide the proposals.\r\n\t\t */\r\n\t\t_computeProposals: function(offset) {\r\n\t\t\tvar providerInfoArray = this._providers;\r\n\t\t\tvar textView = this.textView;\r\n\t\t\tvar sel = textView.getSelection();\r\n\t\t\tvar model = textView.getModel(), mapOffset = offset;\r\n\t\t\tif (model.getBaseModel) {\r\n\t\t\t\tmapOffset = model.mapOffset(mapOffset);\r\n\t\t\t\tsel.start = model.mapOffset(sel.start);\r\n\t\t\t\tsel.end = model.mapOffset(sel.end);\r\n\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t}\r\n\t\t\tvar line = model.getLine(model.getLineAtOffset(mapOffset));\r\n\t\t\tvar index = 0;\r\n\t\t\twhile (index < line.length && /\\s/.test(line.charAt(index))) {\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\tvar indentation = line.substring(0, index);\r\n\t\t\tvar options = textView.getOptions(\"tabSize\", \"expandTab\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar tab = options.expandTab ? new Array(options.tabSize + 1).join(\" \") : \"\\t\"; //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tvar lineDelimiter = model.getLineDelimiter();\r\n\t\t\tvar _self = this;\r\n\t\t\tvar promises = providerInfoArray.map(function(providerInfo) {\r\n\t\t\t\tvar provider = providerInfo.provider;\r\n\t\t\t\tvar computePrefixFunc = provider.computePrefix;\r\n\t\t\t\tvar ecProvider;\r\n\t\t\t\tvar editorContext;\r\n\t\t\t\tvar proposals;\r\n\t\t\t\tvar func;\r\n\t\t\t\tvar promise;\r\n\t\t\t\tvar params;\r\n\t\t\t\tif(typeof providerInfo.autoApply === 'boolean') {\r\n\t\t\t\t\t_self._autoApply = providerInfo.autoApply;\r\n\t\t\t\t}\r\n\t\t\t\tif (computePrefixFunc) {\r\n\t\t\t\t\tecProvider = _self.editorContextProvider;\r\n\t\t\t\t\teditorContext = ecProvider.getEditorContext();\r\n\t\t\t\t\tvar result = computePrefixFunc.apply(provider, [editorContext, mapOffset]);\r\n\t\t\t\t\treturn result.then(function(prefix) {\r\n\t\t\t\t\t\tparams = {\r\n\t\t\t\t\t\t\tline: line,\r\n\t\t\t\t\t\t\toffset: mapOffset,\r\n\t\t\t\t\t\t\tprefix: prefix,\r\n\t\t\t\t\t\t\tselection: sel,\r\n\t\t\t\t\t\t\tdelimiter: lineDelimiter,\r\n\t\t\t\t\t\t\ttab: tab,\r\n\t\t\t\t\t\t\tindentation: indentation\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tif ((func = provider.computeContentAssist)) {\r\n\t\t\t\t\t\t\t\tparams = objects.mixin(params, ecProvider.getOptions());\r\n\t\t\t\t\t\t\t\tpromise = func.apply(provider, [editorContext, params]);\r\n\t\t\t\t\t\t\t} else if ((func = provider.getProposals || provider.computeProposals)) {\r\n\t\t\t\t\t\t\t\t// old API\r\n\t\t\t\t\t\t\t\tpromise = func.apply(provider, [model.getText(), mapOffset, params]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tproposals = _self.progress ? _self.progress.progress(promise, \"Generating content assist proposal\") : promise; //$NON-NLS-0$\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\treturn new Deferred().reject(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn Deferred.when(proposals);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(err) {\r\n\t\t\t\t\t\treturn new Deferred().reject(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// no computePrefix function is defined for the provider. Use the default prefix\r\n\t\t\t\tparams = {\r\n\t\t\t\t\tline: line,\r\n\t\t\t\t\toffset: mapOffset,\r\n\t\t\t\t\tprefix: model.getText(_self.getPrefixStart(model, mapOffset), mapOffset),\r\n\t\t\t\t\tselection: sel,\r\n\t\t\t\t\tdelimiter: lineDelimiter,\r\n\t\t\t\t\ttab: tab,\r\n\t\t\t\t\tindentation: indentation\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif ((func = provider.computeContentAssist)) {\r\n\t\t\t\t\t\tecProvider = _self.editorContextProvider;\r\n\t\t\t\t\t\teditorContext = ecProvider.getEditorContext();\r\n\t\t\t\t\t\tparams = objects.mixin(params, ecProvider.getOptions());\r\n\t\t\t\t\t\tpromise = func.apply(provider, [editorContext, params]);\r\n\t\t\t\t\t} else if ((func = provider.getProposals || provider.computeProposals)) {\r\n\t\t\t\t\t\t// old API\r\n\t\t\t\t\t\tpromise = func.apply(provider, [model.getText(), mapOffset, params]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproposals = _self.progress ? _self.progress.progress(promise, \"Generating content assist proposal\") : promise; //$NON-NLS-0$\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn new Deferred().reject(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn Deferred.when(proposals);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// TODO should we allow error to propagate instead of handling here?\r\n\t\t\tvar allPromises = Deferred.all(promises, this.handleError);\r\n\t\t\t\r\n\t\t\tif (this.pageMessage){\r\n\t\t\t\tallPromises = Deferred.when(allPromises, function(proposals){\r\n\t\t\t\t\t_self.pageMessage.close();\r\n\t\t\t\t\tvar foundProposal = false;\r\n\t\t\t\t\tif (proposals && proposals.length > 0){\r\n\t\t\t\t\t\tfor (var i=0; i<proposals.length; i++) {\r\n\t\t\t\t\t\t\tif (Array.isArray(proposals[i]) && proposals[i].length > 0){\r\n\t\t\t\t\t\t\t\tfoundProposal = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!foundProposal){\r\n\t\t\t\t\t\t_self.pageMessage.setErrorMessage(messages[\"noProposals\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn proposals;\r\n\t\t\t\t});\r\n\t\t\t\tthis.pageMessage.showWhile(allPromises, messages[\"computingProposals\"]);\r\n\t\t\t}\r\n\t\t\treturn allPromises;\r\n\t\t},\r\n\r\n\t\tfilterProposals: function(force) {\r\n\t\t\tif (this._computedProposals && (this._latestModelChangingEvent || force)) {\r\n\t\t\t\tvar model = this.textView.getModel();\r\n\t\t\t\tif (model.getBaseModel) {\r\n\t\t\t\t\tmodel = model.getBaseModel();\r\n\t\t\t\t}\r\n\t\t\t\tvar prefixStart = this.getPrefixStart(model, this._initialCaretOffset);\r\n\t\t\t\tvar defaultPrefix = this.textView.getText(prefixStart, this._initialCaretOffset);\r\n\t\t\t\tvar prefixText = defaultPrefix;\r\n\t\t\t\t// filter proposals based on prefixes and _filterText\r\n\t\t\t\tvar proposals = []; //array of arrays of proposals\r\n\t\t\t\tthis._computedProposals.forEach(function(proposalArray) {\r\n\t\t\t\t\tif (proposalArray && Array.isArray(proposalArray)) {\r\n\t\t\t\t\t\tvar includedProposals = proposalArray.filter(function(proposal) {\r\n\t\t\t\t\t\t\tfunction getRegexp(prefix, filter) {\r\n\t\t\t\t\t\t\t\tvar modifiedFilter = filter.replace(/([.+^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\"); //add start of line character and escape all special characters except * and ? //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tmodifiedFilter = modifiedFilter.replace(/([*?])/g, \".$1\"); //convert user input * and ? to .* and .? //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\treturn new RegExp(\"^\" + prefix + modifiedFilter, \"i\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar pattern;\r\n\t\t\t\t\t\t\tif (!proposal) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(typeof proposal.prefix === 'string') {\r\n\t\t\t\t\t\t\t\tprefixText = proposal.prefix;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tprefixText = defaultPrefix;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (STYLES[proposal.style] === STYLES.hr\r\n\t\t\t\t\t\t\t\t|| STYLES[proposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar proposalString = \"\";\r\n\t\t\t\t\t\t\tif (proposal.overwrite) {\r\n\t\t\t\t\t\t\t\tif (proposal.name) {\r\n\t\t\t\t\t\t\t\t\tproposalString = proposal.name;\r\n\t\t\t\t\t\t\t\t} else if (proposal.proposal) {\r\n\t\t\t\t\t\t\t\t\tproposalString = proposal.proposal;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn false; // unknown format\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpattern = getRegexp(prefixText, this._filterText);\r\n\t\t\t\t\t\t\t\treturn pattern.test(proposalString);\r\n\t\t\t\t\t\t\t} else if (proposal.name || proposal.proposal) {\r\n\t\t\t\t\t\t\t\tvar activated = false;\r\n\t\t\t\t\t\t\t\t// try matching name\r\n\t\t\t\t\t\t\t\tif (proposal.name) {\r\n\t\t\t\t\t\t\t\t\tpattern = getRegexp(prefixText, this._filterText);\r\n\t\t\t\t\t\t\t\t\tactivated = pattern.test(proposal.name);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// try matching proposal text\r\n\t\t\t\t\t\t\t\tif (!activated && proposal.proposal) {\r\n\t\t\t\t\t\t\t\t\tpattern = getRegexp(\"\", this._filterText);\r\n\t\t\t\t\t\t\t\t\tactivated = pattern.test(proposal.proposal);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn activated;\r\n\t\t\t\t\t\t\t} else if (typeof proposal === \"string\") {\r\n\t\t\t\t\t\t\t\tpattern = getRegexp(\"\", this._filterText);\r\n\t\t\t\t\t\t\t\treturn pattern.test(proposal);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (includedProposals.length > 0) {\r\n\t\t\t\t\t\t\tproposals.push(includedProposals);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\t\r\n\t\t\t\tvar flatProposalArray = [];\r\n\t\t\t\tif (proposals) {\r\n\t\t\t\t\t// filter out extra separators and titles\r\n\t\t\t\t\tproposals = this._removeExtraUnselectableElements(proposals);\r\n\t\t\t\t\tflatProposalArray = this._flatten(proposals);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.dispatchEvent({type: \"ProposalsComputed\", data: {proposals: flatProposalArray}, autoApply: false}); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Helper method which removes extra separators and titles from\r\n\t\t * an array containing arrays of proposals from the various providers.\r\n\t\t * @param{Array[]} proposals An array with each element containing an array of proposals\r\n\t\t * @returns {Array} An array without the extra unselectable elements\r\n\t\t */\r\n\t\t_removeExtraUnselectableElements: function(proposals) {\r\n\t\t\t// get rid of extra separators and titles\r\n\t\t\tvar mappedProposals = proposals.map(function(proposalArray) {\r\n\t\t\t\tvar element = proposalArray.filter(function(proposal, index) {\r\n\t\t\t\t\tvar keepElement = true;\r\n\t\t\t\t\tif (STYLES[proposal.style] === STYLES.hr) {\r\n\t\t\t\t\t\tif ((0 === index) || ((proposalArray.length - 1) === index)) {\r\n\t\t\t\t\t\t\tkeepElement = false; // remove separators at first or last element\r\n\t\t\t\t\t\t} else if (STYLES.hr === STYLES[proposalArray[index - 1].style]) {\r\n\t\t\t\t\t\t\tkeepElement = false; // remove separator preceeded by another separator\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (STYLES[proposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\tvar nextProposal = proposalArray[index + 1];\r\n\t\t\t\t\t\tif (nextProposal) {\r\n\t\t\t\t\t\t\t// remove titles that preceed other titles, all of their subelements have already been filtered out\r\n\t\t\t\t\t\t\tif (STYLES[nextProposal.style] === STYLES.noemphasis_title) {\r\n\t\t\t\t\t\t\t\tkeepElement = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tkeepElement = false; //remove titles that are at the end of the array\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn keepElement;\r\n\t\t\t\t});\r\n\t\t\t\treturn element;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn mappedProposals;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Sets the provider that will be invoked to generate the Editor Context service and options to any\r\n\t\t * content assist providers that implement the v4.0 content assist API.\r\n\t\t * @param {Object} editorContextProvider\r\n\t\t */\r\n\t\tsetEditorContextProvider: function(editorContextProvider) {\r\n\t\t\tthis.editorContextProvider = editorContextProvider;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Helper method used to generate a unique ID for a provider.\r\n\t\t * Note that the uniqueness of the ID is only guaranteed for the life of this\r\n\t\t * object and if all of the other IDs are also generated using this method.\r\n\t\t */\r\n\t\t_generateProviderId: function() {\r\n\t\t\tif (this._idcount) {\r\n\t\t\t\tthis._idcount++;\r\n\t\t\t} else {\r\n\t\t\t\tthis._idcount = 0;\r\n\t\t\t}\r\n\t\t\treturn \"ContentAssistGeneratedID_\" +  this._idcount; //$NON-NLS-0$\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Sets whether or not automatic content assist triggering is enabled.\r\n\t\t * @param {Boolean} enableAutoTrigger\r\n\t\t */\r\n\t\tsetAutoTriggerEnabled: function(enableAutoTrigger) {\r\n\t\t\tthis._autoTriggerEnabled = enableAutoTrigger;\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @name orion.editor.ContentAssistProviderInfo\r\n\t\t * @class Encapsulates a content assist provider and its automatic triggers.\r\n\t\t *\r\n\t\t * @property {String} id Unique ID of this provider.\r\n\t\t * @property {RegExp} charTriggers A regular expression matching the characters that, when typed,\r\n\t\t * will cause this provider to be activated automatically by the content assist engine.\r\n\t\t * @property {RegExp} excludedStyles A regular expression matching the style names that are\r\n\t\t * exclusions to this provider's <tt>charTriggers</tt> matching.\r\n\t\t * @property {orion.editor.ContentAssistProvider} provider The actual content assist provider.\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * Sets the content assist providers that this ContentAssist will consult to obtain proposals.\r\n\t\t *\r\n\t\t * @param {orion.editor.ContentAssistProvider[]|orion.edit.ContentAssistProviderInfo[]} providers The\r\n\t\t * providers. Each element may be either a plain {@link orion.editor.ContentAssistProvider}, or a\r\n\t\t * {@link orion.edit.ContentAssistProviderInfo}.\r\n\t\t */\r\n\t\tsetProviders: function(providers) {\r\n\t\t\tvar _self = this;\r\n\t\t\tthis.setProviderInfoArray(providers.map(function(p) {\r\n\t\t\t\t// Wrap any plain Provider into a ProviderInfo\r\n\t\t\t\treturn p.id ? p : {\r\n\t\t\t\t\tprovider: p,\r\n\t\t\t\t\tid: _self._generateProviderId()\r\n\t\t\t\t};\r\n\t\t\t}));\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tsetProviderInfoArray: function(providerInfoArray) {\r\n\t\t\tthis.clearProviders();\r\n\t\t\t\r\n\t\t\tthis._providers = providerInfoArray;\r\n\t\t\tthis._charTriggersInstalled = providerInfoArray.some(function(info){\r\n\t\t\t\treturn info.charTriggers;\r\n\t\t\t});\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @returns orion.edit.ContentAssistProviderInfo[]\r\n\t\t */\r\n\t\tgetProviders: function() {\r\n\t\t\treturn this._providers.slice();\r\n\t\t},\r\n\r\n\t\tclearProviders: function() {\r\n\t\t\tthis._providers = [];\r\n\t\t\tthis._charTriggersInstalled = false;\r\n\t\t\tthis._updateAutoTriggerListenerState();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Sets the progress handler that will display progress information, if any are generated by content assist providers.\r\n\t\t */\r\n\t\tsetProgress: function(progress){\r\n\t\t\tthis.progress = progress;\r\n\t\t},\r\n\t\t\r\n\t\tsetStyleAccessor: function(styleAccessor) {\r\n\t\t\tthis._styleAccessor = styleAccessor;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Flattens an array of arrays into a one-dimensional array.\r\n\t\t * @param {Array[]} array\r\n\t\t * @returns {Array}\r\n\t\t */\r\n\t\t_flatten: function(arrayOrObjectArray) {\r\n\t\t\t\r\n\t\t\treturn arrayOrObjectArray.reduce(function(prev, curr) {\r\n\t\t\t\tvar returnValue = prev;\r\n\t\t\t\tvar filteredArray = null;\r\n\t\t\t\t\r\n\t\t\t\tif (curr && Array.isArray(curr)) {\r\n\t\t\t\t\tfilteredArray = curr.filter(function(element){\r\n\t\t\t\t\t\treturn element; //filter out falsy elements\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// add current proposal array to flattened array\r\n\t\t\t\t// skip current elements that are not arrays\r\n\t\t\t\tif (filteredArray && Array.isArray(filteredArray) && (filteredArray.length > 0)) {\r\n\t\t\t\t\tvar first = filteredArray;\r\n\t\t\t\t\tvar last = prev;\r\n\t\t\t\t\tvar filteredArrayStyle = filteredArray[0].style;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (filteredArrayStyle && STYLES[filteredArrayStyle] && (0 === STYLES[filteredArrayStyle].indexOf(STYLES.noemphasis))) {\r\n\t\t\t\t\t\t// the style of the first element starts with noemphasis\r\n\t\t\t\t\t\t// add these proposals to the end of the array\r\n\t\t\t\t\t\tfirst = prev;\r\n\t\t\t\t\t\tlast = filteredArray;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (first.length > 0) {\r\n\t\t\t\t\t\tvar firstArrayStyle = first[first.length - 1].style;\r\n\t\t\t\t\t\tif (firstArrayStyle && (STYLES.hr !== STYLES[firstArrayStyle])) {\r\n\t\t\t\t\t\t\t// add separator between proposals from different providers \r\n\t\t\t\t\t\t\t// if the previous array didn't already end with a separator\r\n\t\t\t\t\t\t\tfirst = first.concat({\r\n\t\t\t\t\t\t\t\tproposal: '',\r\n\t\t\t\t\t\t\t\tname: '',\r\n\t\t\t\t\t\t\t\tdescription: '---------------------------------', //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tstyle: 'hr', //$NON-NLS-0$\r\n\t\t\t\t\t\t\t\tunselectable: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturnValue = first.concat(last);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn returnValue;\r\n\t\t\t}, []);\r\n\t\t},\r\n\t\t\r\n\t\t_triggerListener: function(/*event*/) {\r\n\t\t\tvar caretOffset = this.textView.getCaretOffset();\r\n\t\t\tvar stylesAtOffset = null;\r\n\t\t\tvar providerInfosToActivate = [];\r\n\r\n\t\t\tif (this._charTriggersInstalled) {\r\n\t\t\t\tvar currentChar = this.textView.getText(caretOffset - 1, caretOffset);\r\n\r\n\t\t\t\tthis._providers.forEach(function(info) {\r\n\t\t\t\t\t// check if the charTriggers RegExp matches the currentChar\r\n\t\t\t\t\t// we're assuming that this will fail much more often than\r\n\t\t\t\t\t// the excludedStyles test so do this first for better performance\r\n\t\t\t\t\tvar charTriggers = info.charTriggers;\r\n\t\t\t\t\tif (charTriggers && charTriggers.test(currentChar)) {\r\n\t\t\t\t\t\tvar isExcluded = false;\r\n\t\t\t\t\t\tvar excludedStyles = info.excludedStyles;\r\n\t\t\t\t\t\tif (this._styleAccessor && excludedStyles) {\r\n\t\t\t\t\t\t\tif (!stylesAtOffset) {\r\n\t\t\t\t\t\t\t\t// lazily initialize this variable to avoid getting the styles\r\n\t\t\t\t\t\t\t\t// for every model modification, only ones that may trigger\r\n\t\t\t\t\t\t\t\tstylesAtOffset = this._styleAccessor.getStyles(caretOffset - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// check if any of the styles match the excludedStyles RegExp\r\n\t\t\t\t\t\t\tisExcluded = stylesAtOffset.some(function (element) {\r\n\t\t\t\t\t\t\t\treturn excludedStyles.test(element.style);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isExcluded) {\r\n\t\t\t\t\t\t\tproviderInfosToActivate.push(info);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tif (providerInfosToActivate.length > 0) {\r\n\t\t\t\t\tthis.activate(providerInfosToActivate, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Private helper to install/uninstall the automatic trigger\r\n\t\t * listener based on the state of the relevant booleans\r\n\t\t */\r\n\t\t_updateAutoTriggerListenerState: function() {\r\n\t\t\tif (!this._boundTriggerListener) {\r\n\t\t\t\tthis._boundTriggerListener = this._triggerListener.bind(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this._triggerListenerInstalled) {\r\n\t\t\t\t// uninstall the listener if necessary\r\n\t\t\t\tif (!this._autoTriggerEnabled || !this._charTriggersInstalled) {\r\n\t\t\t\t\tthis.textView.removeEventListener(\"Modify\", this._boundTriggerListener);\r\n\t\t\t\t\tthis._triggerListenerInstalled = false;\r\n\t\t\t\t}\r\n\t\t\t} else if (this._autoTriggerEnabled && this._charTriggersInstalled){\r\n\t\t\t\t// install the listener if necessary\r\n\t\t\t\tthis.textView.addEventListener(\"Modify\", this._boundTriggerListener);\r\n\t\t\t\tthis._triggerListenerInstalled = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_addTextViewListeners: function() {\r\n\t\t\tif (!this._textViewListenersAdded) {\r\n\t\t\t\tthis.textView.addEventListener(\"ModelChanging\", this._textViewListeners.onModelChanging);\r\n\t\t\t\tthis.textView.addEventListener(\"Scroll\", this._textViewListeners.onScroll);\r\n\t\t\t\tthis.textView.addEventListener(\"Selection\", this._textViewListeners.onSelection);\r\n\t\t\t\tthis._textViewListenersAdded = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_removeTextViewListeners: function() {\r\n\t\t\tif (this._textViewListenersAdded) {\r\n\t\t\t\tthis._latestModelChangingEvent = null;\r\n\t\t\t\tthis.textView.removeEventListener(\"ModelChanging\", this._textViewListeners.onModelChanging);\r\n\t\t\t\tthis.textView.removeEventListener(\"Scroll\", this._textViewListeners.onScroll);\r\n\t\t\t\tthis.textView.removeEventListener(\"Selection\", this._textViewListeners.onSelection);\r\n\t\t\t\tthis._textViewListenersAdded = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_updateFilterText: function(modelChangingEvent) {\r\n\t\t\t// update this._filterText based on the modification info\r\n\t\t\t// contained in the event\r\n\t\t\tvar removedCharCount = modelChangingEvent.removedCharCount;\r\n\t\t\tif (removedCharCount) {\r\n\t\t\t\tvar lastIndex = this._filterText.length - removedCharCount;\r\n\t\t\t\tthis._filterText = this._filterText.substring(0, lastIndex);\r\n\t\t\t}\r\n\t\t\tvar text = modelChangingEvent.text;\r\n\t\t\tif (text) {\r\n\t\t\t\tthis._filterText = this._filterText.concat(text);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmEventTarget.EventTarget.addMixin(ContentAssist.prototype);\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssistMode\r\n\t * @class Editor mode for interacting with content assist proposals.\r\n\t * @description Creates a ContentAssistMode. A ContentAssistMode is a key mode for {@link orion.editor.Editor}\r\n\t * that provides interaction with content assist proposals retrieved from an {@link orion.editor.ContentAssist}. \r\n\t * Interaction is performed via the {@link #lineUp}, {@link #lineDown}, and {@link #enter} actions. An \r\n\t * {@link orion.editor.ContentAssistWidget} may optionally be provided to display which proposal is currently selected.\r\n\t * @param {orion.editor.ContentAssist} contentAssist\r\n\t * @param {orion.editor.ContentAssistWidget} [ContentAssistWidget]\r\n\t */\r\n\tfunction ContentAssistMode(contentAssist, ContentAssistWidget) {\r\n\t\tvar textView = contentAssist.textView;\r\n\t\tmKeyModes.KeyMode.call(this, textView);\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.widget = ContentAssistWidget;\r\n\t\tthis.proposals = [];\r\n\t\tvar self = this;\r\n\t\tthis.contentAssist.addEventListener(\"ProposalsComputed\", function(event) {\r\n\t\t\tself.proposals = event.data.proposals;\r\n\t\t\tif (self.proposals.length === 0) {\r\n\t\t\t\tself.selectedIndex = -1;\r\n\t\t\t\tself.cancel();\r\n\t\t\t} else {\r\n\t\t\t\tself.selectedIndex = 0;\r\n\t\t\t\twhile(self.proposals[self.selectedIndex] && self.proposals[self.selectedIndex].unselectable) {\r\n\t\t\t\t\tself.selectedIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.proposals[self.selectedIndex]) {\r\n\t\t\t\t\tif (self.widget) {\r\n\t\t\t\t\t\tvar showWidget = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (event.autoApply) {\r\n\t\t\t\t\t\t\tvar nextIndex = self.selectedIndex + 1;\r\n\t\t\t\t\t\t\twhile (self.proposals[nextIndex] && self.proposals[nextIndex].unselectable) {\r\n\t\t\t\t\t\t\t\tnextIndex++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!self.proposals[nextIndex]) {\r\n\t\t\t\t\t\t\t\t// if there is only one selectable proposal apply it automatically\r\n\t\t\t\t\t\t\t\tshowWidget = false;\r\n\t\t\t\t\t\t\t\tself.contentAssist.apply(self.proposals[self.selectedIndex]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (showWidget) {\r\n\t\t\t\t\t\t\tself.widget.show();\r\n\t\t\t\t\t\t\tself.widget.selectNode(self.selectedIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.selectedIndex = -1; // didn't find any selectable items\r\n\t\t\t\t\tself.cancel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\ttextView.setAction(\"contentAssistApply\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.enter();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistCancel\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.cancel();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistNextProposal\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineDown();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistPreviousProposal\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineUp();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistNextPage\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.pageDown();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistPreviousPage\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.pageUp();\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistHome\", function() { //$NON-NLS-0$\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.scrollIndex(0, true);\r\n\t\t\t}\r\n\t\t\treturn this.lineDown(0); // select first selectable element starting at the top and moving downwards\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistEnd\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.lineUp(this.proposals.length - 1); // select first selectable element starting at the bottom and moving up\r\n\t\t}.bind(this));\r\n\t\ttextView.setAction(\"contentAssistTab\", function() { //$NON-NLS-0$\r\n\t\t\treturn this.tab();\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\tif (this.widget) {\r\n\t\t\tthis.widget.setContentAssistMode(this);\r\n\t\t\tthis.widget.createAccessible();\r\n\t\t}\r\n\t}\r\n\tContentAssistMode.prototype = new mKeyModes.KeyMode();\r\n\tobjects.mixin(ContentAssistMode.prototype, {\r\n\t\tcreateKeyBindings: function() {\r\n\t\t\tvar KeyBinding = mKeyBinding.KeyBinding;\r\n\t\t\tvar bindings = [];\r\n\t\t\tbindings.push({actionID: \"contentAssistApply\", keyBinding: new KeyBinding(13)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistCancel\", keyBinding: new KeyBinding(27)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistNextProposal\", keyBinding: new KeyBinding(40)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistPreviousProposal\", keyBinding: new KeyBinding(38)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistNextPage\", keyBinding: new KeyBinding(34)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistPreviousPage\", keyBinding: new KeyBinding(33)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistHome\", keyBinding: new KeyBinding(lib.KEY.HOME)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistEnd\", keyBinding: new KeyBinding(lib.KEY.END)}); //$NON-NLS-0$\r\n\t\t\tbindings.push({actionID: \"contentAssistTab\", keyBinding: new KeyBinding(9)}); //$NON-NLS-0$\r\n\t\t\treturn bindings;\r\n\t\t},\r\n\t\tcancel: function() {\r\n\t\t\tthis.getContentAssist().deactivate();\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetContentAssist: function() {\r\n\t\t\treturn this.contentAssist;\r\n\t\t},\r\n\t\tgetProposals: function() {\r\n\t\t\treturn this.proposals;\t\r\n\t\t},\r\n\t\tisActive: function() {\r\n\t\t\treturn this.getContentAssist().isActive();\r\n\t\t},\r\n\t\tsetActive: function(active) {\r\n\t\t\tif (active) {\r\n\t\t\t\tthis.contentAssist.textView.addKeyMode(this);\r\n\t\t\t} else {\r\n\t\t\t\tthis.contentAssist.textView.removeKeyMode(this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Selects a selectable item in the content assist widget\r\n\t\t * iterating backwards for .\r\n\t\t * \r\n\t\t * @param index {number} Optional. The index of the item to try and select. \r\n\t\t */\r\n\t\tlineUp: function(index, noWrap) {\r\n\t\t\treturn this.selectNew(index, noWrap, false);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Selects the item at the specified index or the next\r\n\t\t * selectable item\r\n\t\t */\r\n\t\tlineDown: function(index, noWrap) {\r\n\t\t\treturn this.selectNew(index, noWrap, true);\r\n\t\t},\r\n\t\tselectNew: function(index, noWrap, forward) {\r\n\t\t\tvar newIndex = index;\r\n\t\t\t\r\n\t\t\tif (forward) {\r\n\t\t\t\tif (undefined === newIndex) {\r\n\t\t\t\t\tnewIndex = this.selectedIndex + 1;\r\n\t\t\t\t}\r\n\t\t\t\t// handle wrap around\r\n\t\t\t\tif (newIndex >= this.proposals.length) {\r\n\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewIndex = 0;\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (undefined === newIndex) {\r\n\t\t\t\t\tnewIndex = this.selectedIndex - 1;\r\n\t\t\t\t}\r\n\t\t\t\t// handle wrap around\r\n\t\t\t\tif (0 > newIndex) {\r\n\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewIndex = this.proposals.length - 1;\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar startIndex = newIndex;\r\n\t\t\twhile (this.proposals[newIndex] && this.proposals[newIndex].unselectable) {\r\n\t\t\t\tif (forward) {\r\n\t\t\t\t\tnewIndex++;\r\n\t\t\t\t\t// handle wrap around\r\n\t\t\t\t\tif (newIndex >= this.proposals.length) {\r\n\t\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewIndex = 0;\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewIndex--;\r\n\t\t\t\t\t// handle wrap around\r\n\t\t\t\t\tif (0 > newIndex) {\r\n\t\t\t\t\t\tif (noWrap) {\r\n\t\t\t\t\t\t\treturn true; // do nothing\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewIndex = this.proposals.length - 1;\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (newIndex === startIndex) {\r\n\t\t\t\t\t// looped through all nodes and didn't find any that were selectable\r\n\t\t\t\t\tnewIndex = -1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.selectedIndex = newIndex;\r\n\t\t\t\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.selectNode(newIndex);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._showTooltip(true);\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Opens the tooltip for the selected proposal beside the content assist window\r\n\t\t * @param update if false, the tooltip will be hidden then reopened with the new contents\r\n\t\t * @param noContent if true the current tooltip contents will not be replaced, just size and position updated\r\n\t\t */\r\n\t\t_showTooltip: function(update, noContent) {\r\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this.contentAssist.textView);\r\n\t\t\tvar self = this;\r\n\t\t\tvar target = {\r\n\t\t\t\tgetTooltipInfo: function() {\r\n\t\t\t\t\tvar bounds = self.widget.parentNode.getBoundingClientRect();\r\n\t\t\t\t\tvar tipArea = {width: 350, height: bounds.height, top: bounds.top};\r\n\t\t\t\t\tif ((bounds.left + bounds.width) >= document.documentElement.clientWidth){\r\n\t\t\t\t\t\ttipArea.left = bounds.left - tipArea.width;\r\n\t\t\t\t\t\ttipArea.left -= 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttipArea.left = bounds.left + bounds.width;\r\n\t\t\t\t\t\ttipArea.left += 10;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar info = {\r\n\t\t\t\t\t\tcontext: {proposal: self.proposals[self.selectedIndex]},\r\n\t\t\t\t\t\tanchorArea: bounds,\r\n\t\t\t\t\t\ttooltipArea: tipArea\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn info;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (update) {\r\n\t\t\t\ttooltip.update(target, noContent);\r\n\t\t\t} else {\r\n\t\t\t\ttooltip.show(target, true, false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t_hideTooltip: function() {\r\n\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this.contentAssist.textView);\r\n\t\t\ttooltip.hide(true); // Clear the lock\r\n\t\t},\r\n\r\n\t\tpageUp: function() {\r\n\t\t\t//TODO find out why this doesn't always go to the very top\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tvar newSelected = this.widget.getTopIndex();\r\n\t\t\t\tif (newSelected === this.selectedIndex) {\r\n\t\t\t\t\tthis.widget.scrollIndex(newSelected, false);\r\n\t\t\t\t\tnewSelected = this.widget.getTopIndex();\r\n\t\t\t\t}\r\n\t\t\t\tif (0 === newSelected) {\r\n\t\t\t\t\t// if we're attempting to select the first item in the list\r\n\t\t\t\t\t// move down to the next one if it is not selectable\r\n\t\t\t\t\treturn this.lineDown(newSelected, true);\t\r\n\t\t\t\t}\r\n\t\t\t\treturn this.lineUp(newSelected, true);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.lineUp();\r\n\t\t\t}\r\n\t\t},\r\n\t\tpageDown: function() {\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tvar newSelected = this.widget.getBottomIndex();\r\n\t\t\t\tif (newSelected === this.selectedIndex) {\r\n\t\t\t\t\tthis.widget.scrollIndex(newSelected, true);\r\n\t\t\t\t\tnewSelected = this.widget.getBottomIndex();\r\n\t\t\t\t}\r\n\t\t\t\treturn this.lineDown(newSelected, true);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.lineDown();\r\n\t\t\t}\r\n\t\t},\r\n\t\tenter: function() {\r\n\t\t\tvar proposal = this.proposals[this.selectedIndex] || null;\r\n\t\t\treturn this.contentAssist.apply(proposal);\r\n\t\t},\r\n\t\ttab: function() {\r\n\t\t\tif (this.widget) {\r\n\t\t\t\tthis.widget.parentNode.focus();\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * @name orion.editor.ContentAssistWidget\r\n\t * @class Displays proposals from a {@link orion.editor.ContentAssist}.\r\n\t * @description Creates a ContentAssistWidget that will display proposals from the given {@link orion.editor.ContentAssist}\r\n\t * in the given <code>parentNode</code>. Clicking a proposal will cause the ContentAssist to apply that proposal.\r\n\t * @param {orion.editor.ContentAssist} contentAssist\r\n\t * @param {String|DomNode} [parentNode] The ID or DOM node to use as the parent for displaying proposals. If not provided,\r\n\t * a new DIV will be created inside &lt;body&gt; and assigned the CSS class <code>contentassist</code>.\r\n\t */\r\n\tfunction ContentAssistWidget(contentAssist, parentNode) {\r\n\t\tthis.contentAssist = contentAssist;\r\n\t\tthis.textView = this.contentAssist.getTextView();\r\n\t\tthis.isShowing = false;\r\n\t\tthis._useResizeTimer = false;\r\n\t\tvar document = this.textView.getOptions(\"parent\").ownerDocument; //$NON-NLS-0$\r\n\t\tthis.parentNode = typeof parentNode === \"string\" ? document.getElementById(parentNode) : parentNode;\r\n\t\tif (!this.parentNode) {\r\n\t\t\tthis.parentNode = util.createElement(document, \"div\"); //$NON-NLS-0$\r\n\t\t\tthis.parentNode.className = \"contentassist\"; //$NON-NLS-0$\r\n\t\t\tvar body = document.getElementsByTagName(\"body\")[0]; //$NON-NLS-0$\r\n\t\t\tif (body) {\r\n\t\t\t\tbody.appendChild(this.parentNode);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"parentNode is required\"); //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar MO = window.MutationObserver || window.MozMutationObserver;\r\n\t\tif (MO && util.isFirefox) {//MutationObserver does not work in chrome for resize https://code.google.com/p/chromium/issues/detail?id=293948\r\n\t\t\tthis._mutationObserver = new MO(function(mutations) {\r\n\t\t\t\tthis._contentAssistMode._showTooltip(true, true);\r\n\t\t\t}.bind(this));\r\n\t\t} else {\r\n\t\t\tthis._useResizeTimer = true;\r\n\t\t}\r\n\t\t\r\n\t\ttextUtil.addEventListener(this.parentNode, \"scroll\", this.onScroll.bind(this));\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.autoDismissFunctionAdded = false;\r\n\t\tthis.autoDismissFunction = function() {\r\n\t\t\tself.contentAssist.deactivate();\r\n\t\t};\r\n\t\tthis.contentAssist.addEventListener(\"Deactivating\", function(event) {\r\n\t\t\tself.hide();\r\n\t\t});\r\n\t\tthis.scrollListener = function(e) {\r\n\t\t\tif (self.isShowing) {\r\n\t\t\t\tself.position();\r\n\t\t\t\t//TODO: code edit widget : redo the tooltip positioning by the same new api\r\n\t\t\t}\r\n\t\t};\r\n\t\t//TODO: code edit widget : clean up the code to remove the listener here\r\n\t\ttextUtil.addEventListener(document, \"scroll\", this.scrollListener);\r\n\t}\r\n\tContentAssistWidget.prototype = /** @lends orion.editor.ContentAssistWidget.prototype */ {\r\n\t\t/** @private */\r\n\t\tonClick: function(e) {\r\n\t\t\tif (!e) { e = window.event; }\r\n\t\t\tthis.contentAssist.apply(this.getProposal(e.target || e.srcElement));\r\n\t\t\tthis.textView.focus();\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tonScroll: function(e) {\r\n\t\t\tif (this.previousCloneNode && !this.preserveCloneThroughScroll) {\r\n\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\tthis.previousSelectedNode.classList.add(STYLES.selected);\r\n\t\t\t}\r\n\t\t\tthis.preserveCloneThroughScroll = false;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tcreateDiv: function(proposal, parent, itemIndex) {\r\n\t\t\tvar document = parent.ownerDocument;\r\n\t\t\tvar div = util.createElement(document, \"div\"); //$NON-NLS-0$\r\n\t\t\tdiv.id = \"contentoption\" + itemIndex; //$NON-NLS-0$\r\n\t\t\tdiv.setAttribute(\"role\", \"option\"); //$NON-NLS-1$ //$NON-NLS-2$\r\n\t\t\tdiv.className = STYLES[proposal.style] ? STYLES[proposal.style] : STYLES.dfault;\r\n\t\t\tvar node;\r\n\t\t\tif (proposal.style === \"hr\") {\r\n\t\t\t\tnode = util.createElement(document, \"hr\"); //$NON-NLS-0$\r\n\t\t\t} else {\r\n\t\t\t\tnode = this._createDisplayNode(proposal, itemIndex);\r\n\t\t\t\tdiv.contentAssistProposalIndex = itemIndex; // make div clickable\r\n\t\t\t}\r\n\t\t\tdiv.appendChild(node);\r\n\t\t\tparent.appendChild(div);\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tcreateAccessible: function() {\r\n\t\t\tvar mode = this._contentAssistMode;\r\n\t\t\tvar self = this;\r\n\t\t\ttextUtil.addEventListener(this.parentNode, \"keydown\", function(evt) {\r\n\t\t\t\tif (!evt) { evt = window.event; }\r\n\t\t\t\tif (evt.preventDefault) {\r\n\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tif(evt.keyCode === lib.KEY.ESCAPE) {\r\n\t\t\t\t\treturn mode.cancel(); \r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.UP) {\r\n\t\t\t\t\treturn mode.lineUp();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.DOWN) {\r\n\t\t\t\t\treturn mode.lineDown();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.ENTER) {\r\n\t\t\t\t\treturn mode.enter(); \r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.PAGEDOWN) {\r\n\t\t\t\t\treturn mode.pageDown();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.PAGEUP) {\r\n\t\t\t\t\treturn mode.pageUp();\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.HOME) {\r\n\t\t\t\t\tself.scrollIndex(0, true);\r\n\t\t\t\t\treturn mode.lineDown(0); // select first selectable element starting at the top and moving downwards\r\n\t\t\t\t} else if(evt.keyCode === lib.KEY.END) {\r\n\t\t\t\t\treturn mode.lineUp(mode.getProposals().length - 1); // select first selectable element starting at the bottom and moving up\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_createDisplayNode: function(proposal, index) {\r\n\t\t\tvar node = document.createElement(\"span\");\r\n\t\t\t\r\n\t\t\tif (!proposal){\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (typeof proposal === \"string\"){\r\n\t\t\t\tvar simpleName = this._createNameNode(proposal);\r\n\t\t\t\tsimpleName.contentAssistProposalIndex = index;\r\n\t\t\t\treturn simpleName;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar nameNode;\r\n\t\t\tvar usingDescription; // Proposals are allowed to use the description as the name\r\n\t\t\tif (proposal.name && typeof proposal.name === \"string\") {\r\n\t\t\t\tnameNode = this._createNameNode(proposal.name);\r\n\t\t\t} else if (proposal.description && typeof proposal.description === \"string\"){\r\n\t\t\t\tnameNode = this._createNameNode(proposal.description);\r\n\t\t\t\tusingDescription = true;\r\n\t\t\t} else if (proposal.proposal && typeof proposal.proposal === \"string\"){\r\n\t\t\t\tnameNode = this._createNameNode(proposal.proposal);\r\n\t\t\t} else {\r\n\t\t\t\t// Must have a name\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar tagsNode = this._createTagsNode(proposal.tags);\r\n\t\t\t\r\n\t\t\tvar descriptionNode;\r\n\t\t\tif (!usingDescription && proposal.description && typeof proposal.description === \"string\") {\r\n\t\t\t\tdescriptionNode = document.createTextNode(proposal.description);\r\n\t\t\t}\r\n\r\n\t\t\tif (tagsNode) { node.appendChild(tagsNode); }\r\n\t\t\tnode.appendChild(nameNode);\r\n\t\t\tif (descriptionNode) { node.appendChild(descriptionNode); }\r\n\r\n\t\t\tnameNode.contentAssistProposalIndex = index;\r\n\t\t\tnode.contentAssistProposalIndex = index;\r\n\t\t\t\r\n\t\t\treturn node;\t\t\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_stopResizeTimer: function() {\r\n\t\t\tif (this._resizeTimer) {\r\n\t\t\t\twindow.clearInterval(this._resizeTimer);\r\n\t\t\t\tthis._resizeTimer = null; \r\n\t\t\t}\r\n\t\t},\r\n\t\t_startResizeTimer: function() {\r\n\t\t\tthis._stopResizeTimer();\r\n\t\t\tthis._cachedResizeBound = this.parentNode.getBoundingClientRect();\r\n\t\t\tthis._resizeTimer = window.setInterval(function() {\r\n\t\t\t\tif(this._contentAssistMode) {\r\n\t\t\t\t\tvar bound = this.parentNode.getBoundingClientRect();\r\n\t\t\t\t\tif(bound.left === this._cachedResizeBound.left && \r\n\t\t\t\t\t   bound.top === this._cachedResizeBound.top &&\r\n\t\t\t\t\t   bound.width === this._cachedResizeBound.width &&\r\n\t\t\t\t\t   bound.height === this._cachedResizeBound.height) {\r\n\t\t\t\t\t\treturn;   \t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._cachedResizeBound = bound;\r\n\t\t\t\t\tthis._contentAssistMode._showTooltip(true, true);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this), 100);\r\n\t\t},\r\n\t\t/** @private */\r\n\t\t_createNameNode: function(name) {\r\n\t\t\tvar node = document.createElement(\"span\");\r\n\t\t\tnode.classList.add(\"proposal-name\"); //$NON-NLS-0$\r\n\t\t\tnode.appendChild(document.createTextNode(name));\r\n\t\t\treturn node;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * @param tags {Array} The array of tags to display\r\n\t\t * @returns {Object} the dom node for the tags or <code>null</code>\n\t\t */\n\t\t_createTagsNode: function(tags) {\r\n\t\t\tvar tagsNode = null;\r\n\t\t\tif (tags && tags.constructor === Array && tags.length > 0){\r\n\t\t\t\ttagsNode = document.createElement(\"span\");\r\n\t\t\t\tfor (var i=0; i<tags.length; i++) {\r\n\t\t\t\t\tvar tag = tags[i];\r\n\t\t\t\t\tif (tag.content || tag.cssClass || tag.color){\r\n\t\t\t\t\t\tvar tagNode = document.createElement(\"span\");\r\n\t\t\t\t\t\tif (tag.cssClass){\r\n\t\t\t\t\t\t\ttagNode.classList.add(tag.cssClass);\r\n\t\t\t\t\t\t} else if (typeof tag.color === 'string' && tag.color.match(/^[\\w-]*$/)){\r\n\t\t\t\t\t\t\ttagNode.classList.add('colorTag'); //$NON-NLS-1$\r\n\t\t\t\t\t\t\ttagNode.style.backgroundColor = tag.color;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttagNode.classList.add('proposalTag'); //$NON-NLS-1$\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (tag.content){\r\n\t\t\t\t\t\t\ttagNode.textContent = tag.content;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttagsNode.appendChild(tagNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn tagsNode;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * @returns {Object} The proposal represented by the given node.\r\n\t\t */\r\n\t\tgetProposal: function(/**DOMNode*/ node) {\r\n\t\t\tvar proposal = null;\r\n\t\t\t\r\n\t\t\tvar nodeIndex = node.contentAssistProposalIndex;\r\n\t\t\t\r\n\t\t\tif (undefined !== nodeIndex){\r\n\t\t\t\tproposal = this._contentAssistMode.getProposals()[nodeIndex] || null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn proposal;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetTopIndex: function() {\r\n\t\t\tvar nodes = this.parentNode.childNodes;\r\n\t\t\tfor (var i=0; i < nodes.length; i++) {\r\n\t\t\t\tvar child = nodes[i];\r\n\t\t\t\tif (child.offsetTop >= this.parentNode.scrollTop) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tgetBottomIndex: function() {\r\n\t\t\tvar nodes = this.parentNode.childNodes;\r\n\t\t\tfor (var i=0; i < nodes.length; i++) {\r\n\t\t\t\tvar child = nodes[i];\r\n\t\t\t\tif ((child.offsetTop + child.offsetHeight) > (this.parentNode.scrollTop + this.parentNode.clientHeight)) {\r\n\t\t\t\t\treturn Math.max(0, i - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn nodes.length - 1;\r\n\t\t},\r\n\t\t/** @private */\r\n\t\tscrollIndex: function(index, top) {\r\n\t\t\tvar nodeAtIndex = this.parentNode.childNodes[index];\r\n\t\t\tif (nodeAtIndex){\r\n\t\t\t\tnodeAtIndex.scrollIntoView(top);\r\n\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Visually selects the node at the specified nodeIndex\r\n\t\t * by updating its CSS class and scrolling it into view\r\n\t\t * if necessary.\r\n\t\t * @param{Number} nodeIndex The index of the node to select\r\n\t\t */\r\n\t\tselectNode: function(nodeIndex) {\r\n\t\t\tvar node = null;\r\n\t\t\t\r\n\t\t\tif (this._hideTimeout) {\r\n\t\t\t\twindow.clearTimeout(this._hideTimeout);\r\n\t\t\t\tthis._hideTimeout = null;\r\n\t\t\t}\r\n\t\t\tif (this._fadeTimer) {\r\n\t\t\t\twindow.clearTimeout(this._fadeTimer);\r\n\t\t\t\tthis._fadeTimer = null;\r\n\t\t\t}\r\n\t\t\tif (this.previousSelectedNode) {\r\n\t\t\t\tthis.previousSelectedNode.classList.remove(STYLES.selected);\r\n\t\t\t\tthis.previousSelectedNode = null;\r\n\t\t\t\tif (this.previousCloneNode) {\r\n\t\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (-1 !== nodeIndex) {\r\n\t\t\t\tnode = this.parentNode.childNodes[nodeIndex];\r\n\t\t\t\tif (node){\r\n\t\t\t\t\tnode.classList.add(STYLES.selected);\r\n\t\t\t\t\tthis.parentNode.setAttribute(\"aria-activedescendant\", node.id); //$NON-NLS-0$\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t\tif (node.offsetTop < this.parentNode.scrollTop) {\r\n\t\t\t\t\t\tnode.scrollIntoView(true);\r\n\t\t\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t\t\t} else if ((node.offsetTop + node.offsetHeight) > (this.parentNode.scrollTop + this.parentNode.clientHeight)) {\r\n\t\t\t\t\t\tnode.scrollIntoView(false);\r\n\t\t\t\t\t\tthis.preserveCloneThroughScroll = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar textNode = node.firstChild || node;  \r\n\t\t\t\t\tvar textBounds = textNode.getBoundingClientRect();\r\n\t\t\t\t\tvar parentWidth = this.parentNode.clientWidth ? this.parentNode.clientWidth : this.parentNode.getBoundingClientRect(); // Scrollbar can cover text\r\n\t\t\t\t\tvar parentStyle = window.getComputedStyle(this.parentNode);\r\n\t\t\t\t\tvar nodeStyle = window.getComputedStyle(node);\r\n\t\t\t\t\tvar allPadding = parseInt(parentStyle.paddingLeft) + parseInt(parentStyle.paddingRight) + parseInt(nodeStyle.paddingLeft) + parseInt(nodeStyle.paddingRight);\r\n\t\t\t\t\tif (textBounds.width >= (parentWidth - allPadding)) {\r\n\t\t\t\t\t\tvar parentTop = parseInt(parentStyle.top);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// create clone node\r\n\t\t\t\t\t\tvar clone = node.cloneNode(true); // deep clone\r\n\t\t\t\t\t\tclone.classList.add(\"cloneProposal\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tclone.style.top = parentTop + node.offsetTop - this.parentNode.scrollTop + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t\tclone.style.left = parentStyle.left;\r\n\t\t\t\t\t\tclone.setAttribute(\"id\", clone.id + \"_clone\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// try to fit clone node on page horizontally\r\n\t\t\t\t\t\tvar viewportWidth = document.documentElement.clientWidth;\r\n\t\t\t\t\t\tvar horizontalOffset = (textBounds.left + textBounds.width) - parseInt(viewportWidth);\r\n\t\t\t\t\t\tif (horizontalOffset > 0) {\r\n\t\t\t\t\t\t\tvar cloneLeft = parseInt(parentStyle.left) - horizontalOffset;\r\n\t\t\t\t\t\t\tif (0 > cloneLeft) {\r\n\t\t\t\t\t\t\t\tcloneLeft = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclone.style.left = cloneLeft + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t// create wrapper parent node (to replicate css class hierarchy)\r\n\t\t\t\t\t\tvar parentClone = document.createElement(\"div\");\r\n\t\t\t\t\t\tparentClone.id = \"clone_contentassist\";  //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.classList.add(\"contentassist\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.classList.add(\"cloneWrapper\"); //$NON-NLS-0$\r\n\t\t\t\t\t\tparentClone.appendChild(clone);\r\n\t\t\t\t\t\tparentClone.onclick = this.parentNode.onclick;\r\n\t\t\t\t\t\tthis.parentNode.parentNode.insertBefore(parentClone, this.parentNode);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// make all the cloned nodes clickable by setting their contentAssistProposalIndex\r\n\t\t\t\t\t\tvar recursiveSetIndex = function(cloneNode){\r\n\t\t\t\t\t\t\tcloneNode.contentAssistProposalIndex = node.contentAssistProposalIndex;\r\n\t\t\t\t\t\t\tif (cloneNode.hasChildNodes()) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0 ; i < cloneNode.childNodes.length ; i++){\r\n\t\t\t\t\t\t\t\t\trecursiveSetIndex(cloneNode.childNodes[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\trecursiveSetIndex(parentClone);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar self = this;\r\n\t\t\t\t\t\tthis._hideTimeout = window.setTimeout(function() {\r\n\t\t\t\t\t\t\tself._hideTimeout = null;\r\n\t\t\t\t\t\t\tnode.classList.add(STYLES.selected);\r\n\t\t\t\t\t\t\tvar opacity = 1;\r\n\t\t\t\t\t\t\tself._fadeTimer = window.setInterval(function() {\r\n\t\t\t\t\t\t\t\tif (!self.previousCloneNode || opacity <= 0.01){\r\n\t\t\t\t\t\t\t\t\tself._removeCloneNode();\r\n\t\t\t\t\t\t\t\t\twindow.clearInterval(self._fadeTimer);\r\n\t\t\t\t\t\t\t\t\tself._fadeTimer = null;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tparentClone.style.opacity = opacity;\r\n\t\t\t\t\t\t\t\t\tparentClone.style.filter = 'alpha(opacity=' + opacity * 100 + \")\";\r\n\t        \t\t\t\t\t\topacity -= opacity * 0.1;\r\n\t        \t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 50);\r\n\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnode.classList.remove(STYLES.selected);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.previousCloneNode = parentClone;\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.previousSelectedNode = node;\r\n\t\t},\r\n\t\tsetContentAssistMode: function(mode) {\r\n\t\t\tthis._contentAssistMode = mode;\r\n\t\t},\r\n\t\tshow: function() {\r\n\t\t\tvar proposals = this._contentAssistMode.getProposals();\r\n\t\t\tif (proposals.length === 0) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.innerHTML = \"\";\r\n\t\t\t\tfor (var i = 0; i < proposals.length; i++) {\r\n\t\t\t\t\tthis.createDiv(proposals[i], this.parentNode, i);\r\n\t\t\t\t}\r\n\t\t\t\tthis.position();\r\n\t\t\t\tthis.parentNode.onclick = this.onClick.bind(this);\r\n\t\t\t\tthis.isShowing = true;\r\n\t\t\t\t\r\n\t\t\t\tthis._contentAssistMode._showTooltip(false);\r\n\t\t\t\t\r\n\t\t\t\tif(this._useResizeTimer) {\r\n\t\t\t\t\tthis._startResizeTimer();\r\n\t\t\t\t} else if(this._mutationObserver){\r\n\t\t\t\t\tthis._mutationObserver.observe(this.parentNode, {attributes: true});\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.autoDismissFunctionAdded) {\r\n\t\t\t\t\tvar tooltip = mTooltip.Tooltip.getTooltip(this.contentAssist.textView);\r\n\t\t\t\t\tlib.addAutoDismiss([this.parentNode, tooltip._tooltipDiv], this.autoDismissFunction);\r\n\t\t\t\t\tthis.autoDismissFunctionAdded = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tif(this.parentNode.ownerDocument.activeElement === this.parentNode) {\r\n\t\t\t\tthis.textView.focus();\r\n\t\t\t}\r\n\t\t\tthis.parentNode.style.display = \"none\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.onclick = null;\r\n\t\t\tthis.isShowing = false;\r\n\t\t\t\r\n\t\t\tif(this._useResizeTimer) {\r\n\t\t\t\tthis._stopResizeTimer();\r\n\t\t\t} else if(this._mutationObserver){\r\n\t\t\t\tthis._mutationObserver.disconnect();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._contentAssistMode._hideTooltip();\r\n\t\t\t\r\n\t\t\tif (this.autoDismissFunctionAdded) {\r\n\t\t\t\tlib.removeAutoDismiss(this.autoDismissFunction);\r\n\t\t\t\tthis.autoDismissFunctionAdded = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.previousSelectedNode) {\r\n\t\t\t\tthis.previousSelectedNode = null;\r\n\t\t\t\tif (this.previousCloneNode) {\r\n\t\t\t\t\tthis._removeCloneNode();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tposition: function() {\r\n\t\t\tvar contentAssist = this.contentAssist;\r\n\t\t\tvar offset;\r\n\t\t\tvar view = this.textView;\r\n\t\t\tif (contentAssist.offset !== undefined) {\r\n\t\t\t\toffset = contentAssist.offset;\r\n\t\t\t\tvar model = view.getModel();\r\n\t\t\t\tif (model.getBaseModel) {\r\n\t\t\t\t\toffset = model.mapOffset(offset, true);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toffset = this.textView.getCaretOffset();\r\n\t\t\t}\r\n\t\t\tvar caretLocation = view.getLocationAtOffset(offset);\r\n\t\t\tcaretLocation.y += view.getLineHeight();\r\n\t\t\tthis.textView.convert(caretLocation, \"document\", \"page\"); //$NON-NLS-1$ //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.position = \"fixed\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.left = caretLocation.x + \"px\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.top = caretLocation.y + \"px\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.style.display = \"block\"; //$NON-NLS-0$\r\n\t\t\tthis.parentNode.scrollTop = 0;\r\n\r\n\t\t\t// Make sure that the panel is never outside the viewport\r\n\t\t\tvar document = this.parentNode.ownerDocument;\r\n\t\t\tvar viewportWidth = document.documentElement.clientWidth,\r\n\t\t\t    viewportHeight =  document.documentElement.clientHeight;\r\n\t\t\t    \r\n\t\t\tvar spaceBelow = viewportHeight - caretLocation.y;\t\t\t    \r\n\t\t\tif (this.parentNode.offsetHeight > spaceBelow) {\r\n\t\t\t\t// Check if div is too large to fit above\r\n\t\t\t\tvar spaceAbove = caretLocation.y - this.textView.getLineHeight();\r\n\t\t\t\tif (this.parentNode.offsetHeight > spaceAbove){\r\n\t\t\t\t\t// Squeeze the div into the larger area\r\n\t\t\t\t\tif (spaceBelow > spaceAbove) {\r\n\t\t\t\t\t\tthis.parentNode.style.maxHeight = spaceBelow + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.parentNode.style.maxHeight = spaceAbove + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\t\tthis.parentNode.style.top = \"0\"; //$NON-NLS-0$\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Put the div above the line\r\n\t\t\t\t\tthis.parentNode.style.top = (caretLocation.y - this.parentNode.offsetHeight - this.textView.getLineHeight()) + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t\tthis.parentNode.style.maxHeight = spaceAbove + \"px\"; //$NON-NLS-0$\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.style.maxHeight = spaceBelow + \"px\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (caretLocation.x + this.parentNode.offsetWidth > viewportWidth) {\r\n\t\t\t\tvar leftSide = viewportWidth - this.parentNode.offsetWidth;\r\n\t\t\t\tif (leftSide < 0) {\r\n\t\t\t\t\tleftSide = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.parentNode.style.left = leftSide + \"px\"; //$NON-NLS-0$\r\n\t\t\t\tthis.parentNode.style.maxWidth = viewportWidth - leftSide;\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.style.maxWidth = viewportWidth + caretLocation.x + \"px\"; //$NON-NLS-0$\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeCloneNode: function(){\r\n\t\t\tif (this.parentNode.parentNode.contains(this.previousCloneNode)) {\r\n\t\t\t\tthis.parentNode.parentNode.removeChild(this.previousCloneNode);\t\r\n\t\t\t}\r\n\t\t\tthis.previousCloneNode = null;\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tContentAssist: ContentAssist,\r\n\t\tContentAssistMode: ContentAssistMode,\r\n\t\tContentAssistWidget: ContentAssistWidget\r\n\t};\r\n});\r\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2010, 2016 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License v1.0\n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution\n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html).\n *\n * Contributors: IBM Corporation - initial API and implementation\n *               Alex Lakatos - fix for bug#369781\n ******************************************************************************/\n\n/*eslint-env browser, amd*/\ndefine(\"orion/editor/textStyler\", ['orion/editor/annotations', 'orion/editor/eventTarget', 'orion/metrics'], //$NON-NLS-3$ //$NON-NLS-2$ //$NON-NLS-1$ //$NON-NLS-0$\n\tfunction(mAnnotations, mEventTarget, mMetrics) {\n\n\t/*\n\t * Throughout textStyler \"block\" refers to a potentially multi-line token.\n\t * Typical examples are multi-line comments and multi-line strings.\n\t */\n\n\tvar binarySearch = function(array, offset, inclusive, low, high) {\n\t\tvar index;\n\t\tif (low === undefined) { low = -1; }\n\t\tif (high === undefined) { high = array.length; }\n\t\twhile (high - low > 1) {\n\t\t\tindex = Math.floor((high + low) / 2);\n\t\t\tif (offset <= array[index].start) {\n\t\t\t\thigh = index;\n\t\t\t} else if (inclusive && offset < array[index].end) {\n\t\t\t\thigh = index;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tlow = index;\n\t\t\t}\n\t\t}\n\t\treturn high;\n\t};\n\t\n\tfunction copy(object) {\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\n\tvar createPatternBasedAdapter = function(grammars, rootIds, contentType) {\n\t\treturn new PatternBasedAdapter(grammars, rootIds, contentType);\n\t};\n\n\tfunction PatternBasedAdapter(grammars, rootIds, contentType) {\n\t\tthis._patternManager = new PatternManager(grammars, rootIds);\n\t\tthis._contentType = contentType;\n\t}\n\tPatternBasedAdapter.prototype = {\n\t\tblockSpansBeyondEnd: function(block) {\n\t\t\treturn block.pattern.regexEnd === this._eolRegex;\n\t\t},\n\t\tcomputeBlocks: function(model, text, block, offset, startIndex, endIndex, maxBlockCount) {\n\t\t\tif (!text) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tvar results = [];\n\t\t\tvar matches = [];\n\t\t\tvar result;\n\t\t\tstartIndex = startIndex || 0;\n\t\t\tendIndex = endIndex || Infinity;\n\t\t\tmaxBlockCount = maxBlockCount || Infinity;\n\t\t\tblock.blockPatterns.forEach(function(current) {\n\t\t\t\tresult = this._findMatch(current.regexBegin || current.regex, text, startIndex);\n\t\t\t\tif (result) {\n\t\t\t\t\tmatches.push({result: result, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tif (!matches.length) {\n\t\t\t\treturn results;\n\t\t\t}\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\tif (a.result.index < b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index > b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t});\n\n\t\t\tvar index = 0;\n\t\t\twhile (matches.length > 0) {\n\t\t\t\tvar current = matches[0];\n\t\t\t\tmatches.splice(0,1);\n\n\t\t\t\tif (endIndex < current.result.index) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (current.result.index < index) {\n\t\t\t\t\t/* processing of another match has moved index beyond this match */\n\t\t\t\t\tthis._updateMatch(current, text, matches, index, endIndex);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar start = offset + current.result.index;\n\t\t\t\tvar contentStart = current.result.index;\n\t\t\t\tvar resultEnd = null;\n\n\t\t\t\tvar endRegex = current.pattern.regexEnd;\n\t\t\t\tif (!endRegex) {\n\t\t\t\t\tresultEnd = this.createBlock(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\t\tend: start + current.result[0].length,\n\t\t\t\t\t\t\tcontentStart: start,\n\t\t\t\t\t\t\tcontentEnd: start + current.result[0].length\n\t\t\t\t\t\t},\n\t\t\t\t\t\tblock.styler,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tblock,\n\t\t\t\t\t\tcurrent.pattern);\n\t\t\t\t} else {\n\t\t\t\t\tcontentStart += current.result[0].length;\n\t\t\t\t\tvar testPattern = current.pattern;\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end regex contains a capture reference (eg.- \"\\1\") then substitute\n\t\t\t\t\t * the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tvar resolvedEndRegex = this._substituteCaptureValues(endRegex, current.result);\n\t\t\t\t\tif (resolvedEndRegex !== endRegex) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * A substitution was made, so make a copy of the test pattern and set its\n\t\t\t\t\t\t * end regex to the resolved one.  This will cause end-match detection to be\n\t\t\t\t\t\t * performed with this concrete end regex value, but the original pattern\n\t\t\t\t\t\t * definition containing the capture reference will not be affected.\n\t\t\t\t\t\t */\n\t\t\t\t\t\ttestPattern = {\n\t\t\t\t\t\t\tpattern: testPattern.pattern,\n\t\t\t\t\t\t\tregexBegin: testPattern.regexBegin,\n\t\t\t\t\t\t\tregexEnd: resolvedEndRegex\n\t\t\t\t\t\t};\n\t\t\t\t\t\tendRegex = resolvedEndRegex;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar lastIndex = contentStart;\n\t\t\t\t\twhile (!resultEnd) {\n\t\t\t\t\t\tresult = this._findMatch(endRegex, text, lastIndex);\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\t\tresult = this._eolRegex.exec(text);\n\t\t\t\t\t\t\ttestPattern = {\n\t\t\t\t\t\t\t\tpattern: testPattern.pattern,\n\t\t\t\t\t\t\t\tregexBegin: testPattern.regexBegin,\n\t\t\t\t\t\t\t\tregexEnd: this._eolRegex\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar testBlock = this.createBlock(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstart: start,\n\t\t\t\t\t\t\t\tend: offset + result.index + result[0].length,\n\t\t\t\t\t\t\t\tcontentStart: offset + contentStart,\n\t\t\t\t\t\t\t\tcontentEnd: offset + result.index\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tblock.styler,\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\ttestPattern);\n\t\t\t\t\t\tvar subBlocks = testBlock.getBlocks();\n\t\t\t\t\t\tif (!subBlocks.length || subBlocks[subBlocks.length - 1].end <= (result.index + offset)) {\n\t\t\t\t\t\t\tresultEnd = testBlock;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastIndex = result.index + result[0].length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresults.push(resultEnd);\n\t\t\t\tif (results.length === maxBlockCount || endIndex <= resultEnd.end) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tindex = resultEnd.end - offset;\n\t\t\t\tthis._updateMatch(current, text, matches, index, endIndex);\n\t\t\t}\n\t\t\treturn results;\n\t\t},\n\t\tcomputeStyle: function(block, model, offset) {\n\t\t\tif (!block.pattern) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar fullBlock = {\n\t\t\t\tstart: block.start,\n\t\t\t\tend: block.end,\n\t\t\t\tstyle: block.pattern.pattern.name\n\t\t\t};\n\t\t\tif (block.contentStart <= offset && offset < block.contentEnd) {\n\t\t\t\tif (block.pattern.pattern.contentName) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstart: block.contentStart,\n\t\t\t\t\t\tend: block.contentEnd,\n\t\t\t\t\t\tstyle: block.pattern.pattern.contentName\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn fullBlock;\n\t\t\t}\n\n\t\t\tvar regex, captures, testString, index;\n\t\t\tif (offset < block.contentStart) {\n\t\t\t\tcaptures = block.pattern.pattern.beginCaptures || block.pattern.pattern.captures;\n\t\t\t\tif (!captures) {\n\t\t\t\t\treturn fullBlock;\n\t\t\t\t}\n\t\t\t\tregex = block.pattern.regexBegin;\n\t\t\t\ttestString = model.getText(block.start, block.contentStart);\n\t\t\t\tindex = block.start;\n\t\t\t} else {\n\t\t\t\tcaptures = block.pattern.pattern.endCaptures || block.pattern.pattern.captures;\n\t\t\t\tif (!captures) {\n\t\t\t\t\treturn fullBlock;\n\t\t\t\t}\n\t\t\t\tregex = block.pattern.regexEnd;\n\t\t\t\ttestString = model.getText(block.contentEnd, block.end);\n\t\t\t\tindex = block.contentEnd;\n\t\t\t}\n\n\t\t\tregex.lastIndex = 0;\n\t\t\tvar result = regex.exec(testString);\n\t\t\tif (result) {\n\t\t\t\tvar styles = [];\n\t\t\t\tthis._getCaptureStyles(result, captures, index, styles);\n\t\t\t\tvar style = styles[binarySearch(styles, offset, true)];\n\t\t\t\tif (style && style.start <= offset && offset < style.end) {\n\t\t\t\t\treturn style;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn fullBlock;\n\t\t},\n\t\tcreateBlock: function(bounds, styler, model, parent, data) {\n\t\t\t/* for pattern-based matching data is a pattern */\n\t\t\treturn new Block(\n\t\t\t\tbounds,\n\t\t\t\tdata ? data.pattern.name : null,\n\t\t\t\tdata ? data.pattern.id : null,\n\t\t\t\tstyler,\n\t\t\t\tmodel,\n\t\t\t\tparent,\n\t\t\t\tfunction(newBlock) {\n\t\t\t\t\tnewBlock.pattern = data;\n\t\t\t\t\tnewBlock.linePatterns = [];\n\t\t\t\t\tnewBlock.blockPatterns = [];\n\t\t\t\t\tnewBlock.enclosurePatterns = {};\n\t\t\t\t\tthis._initPatterns(this._patternManager, newBlock);\n\t\t\t\t}.bind(this));\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._textModel.removeEventListener(\"Changed\", this._listener); //$NON-NLS-0$\n\t\t},\n\t\tgetBlockCommentDelimiters: function(index) {\n\t\t\tvar languageBlock = this._getLanguageBlock(index);\n\t\t\tvar blockPatterns = languageBlock.blockPatterns;\n\t\t\tif (blockPatterns) {\n\t\t\t\tvar COMMENT_BLOCK = \"comment.block\"; //$NON-NLS-0$\n\t\t\t\tfor (var i = 0; i < blockPatterns.length; i++) {\n\t\t\t\t\tvar current = blockPatterns[i].pattern;\n\t\t\t\t\tvar name = current.name || current.contentName;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_BLOCK) !== -1) {\n\t\t\t\t\t\tif (current.begin && current.end && current.begin.literal && current.end.literal) {\n\t\t\t\t\t\t\treturn [current.begin.literal, current.end.literal];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [\"\", \"\"];\n\t\t},\n\t\tgetBlockContentStyleName: function(block) {\n\t\t\treturn block.pattern.pattern.contentName || block.pattern.pattern.name;\n\t\t},\n\t\tgetBlockEndStyle: function(block, text, endIndex, _styles) {\n\t\t\t/* pattern-defined blocks specify an end style by either a capture or name */\n\t\t\tvar result;\n\t\t\tif (block.pattern.regexEnd) {\n\t\t\t\tresult = this._findMatch(block.pattern.regexEnd, text, 0);\n\t\t\t\tif (result) {\n\t\t\t\t\t/* the end match is still valid */\n\t\t\t\t\tvar captures = block.pattern.pattern.endCaptures || block.pattern.pattern.captures;\n\t\t\t\t\tif (captures) {\n\t\t\t\t\t\tthis._getCaptureStyles(result, captures, endIndex - result[0].length, _styles);\n\t\t\t\t\t} else if (block.pattern.pattern.name) {\n\t\t\t\t\t\t_styles.push({start: endIndex - result[0].length, end: endIndex, style: block.pattern.pattern.name});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result ? result[0] : null;\n\t\t},\n\t\tgetBlockFoldBounds: function(block, model) {\n\t\t\treturn {start: block.start, end: block.end};\n\t\t},\n\t\tgetBlockOverrideStyles: function(block, text, index, _styles) {\n\t\t\t/* if the block's pattern is a single-line regex with capture(s) then compute the styles for the capture(s) */\n\t\t\tif (block.pattern.regex && block.pattern.pattern.captures && this._containsCaptureRegex.test(block.pattern.regex)) {\n\t\t\t\tvar match = this._findMatch(block.pattern.regex, text, 0);\n\t\t\t\tif (match) {\n\t\t\t\t\tthis._getCaptureStyles(match, block.pattern.pattern.captures, index, _styles);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetBlockStartStyle: function(block, text, index, _styles) {\n\t\t\t/* pattern-defined blocks specify a start style by either a capture or name */\n\t\t\tvar result;\n\t\t\tif (block.pattern.regexBegin) {\n\t\t\t\tresult = this._findMatch(block.pattern.regexBegin, text, 0);\n\t\t\t\tif (result) {\n\t\t\t\t\t/* the begin match is still valid */\n\t\t\t\t\tvar captures = block.pattern.pattern.beginCaptures || block.pattern.pattern.captures;\n\t\t\t\t\tif (captures) {\n\t\t\t\t\t\tthis._getCaptureStyles(result, captures, index, _styles);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_styles.push({start: index, end: index + result[0].length, style: block.pattern.pattern.name});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result ? result[0] : null;\n\t\t},\n\t\tgetBracketMatch: function(block, text) {\n\t\t\tvar match;\n\t\t\tvar keys = Object.keys(block.enclosurePatterns);\n\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\tvar current = block.enclosurePatterns[keys[i]];\n\t\t\t\tvar result = this._findMatch(current.regex, text, 0);\n\t\t\t\tif (result && result.index === 0) {\n\t\t\t\t\tmatch = current;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!match) { return null; }\n\n\t\t\tvar closingName;\n\t\t\tvar atStart = false;\n\t\t\tif (match.pattern.name.indexOf(this._PUNCTUATION_SECTION_BEGIN) !== -1) {\n\t\t\t\tatStart = true;\n\t\t\t\tclosingName = match.pattern.name.replace(this._PUNCTUATION_SECTION_BEGIN, this._PUNCTUATION_SECTION_END);\n\t\t\t} else {\n\t\t\t\tclosingName = match.pattern.name.replace(this._PUNCTUATION_SECTION_END, this._PUNCTUATION_SECTION_BEGIN);\n\t\t\t}\n\t\t\tvar closingBracket = block.enclosurePatterns[closingName];\n\t\t\tif (!closingBracket) { return null; }\n\n\t\t\treturn {\n\t\t\t\tbeginName: match.pattern.name,\n\t\t\t\tendName: closingName,\n\t\t\t\tatStart: atStart\n\t\t\t};\n\t\t},\n\t\tgetContentType: function() {\n\t\t\treturn this._contentType;\n\t\t},\n\t\tgetLineCommentDelimiter: function(index) {\n\t\t\tvar COMMENT_LINE = \"comment.line\"; //$NON-NLS-0$\n\t\t\tvar languageBlock = this._getLanguageBlock(index);\n\t\t\tvar linePatterns = languageBlock.linePatterns;\n\t\t\tif (linePatterns) {\n\t\t\t\tfor (var i = 0; i < linePatterns.length; i++) {\n\t\t\t\t\tvar current = linePatterns[i].pattern;\n\t\t\t\t\tvar name = current.name;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_LINE) !== -1) {\n\t\t\t\t\t\tif (current.match && current.match.literal) {\n\t\t\t\t\t\t\treturn current.match.literal;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar blockPatterns = languageBlock.blockPatterns;\n\t\t\tif (blockPatterns) {\n\t\t\t\tfor (i = 0; i < blockPatterns.length; i++) {\n\t\t\t\t\tcurrent = blockPatterns[i].pattern;\n\t\t\t\t\tname = current.name || current.contentName;\n\t\t\t\t\tif (name && name.indexOf(COMMENT_LINE) !== -1) {\n\t\t\t\t\t\tif (current.begin && current.begin.literal) {\n\t\t\t\t\t\t\treturn current.begin.literal;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\t\tparse: function(text, offset, startIndex, block, _styles, ignoreCaptures) {\n\t\t\tif (!text) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar patterns = block.linePatterns;\n\t\t\tif (!patterns) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar matches = [];\n\t\t\tvar result;\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar regex = current.regex || current.regexBegin;\n\t\t\t\tregex.oldLastIndex = regex.lastIndex;\n\t\t\t\tresult = this._findMatch(regex, text, startIndex);\n\t\t\t\tif (result) {\n\t\t\t\t\tmatches.push({result: result, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\tif (a.result.index < b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index > b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t});\n\n\t\t\tvar index = startIndex;\n\t\t\twhile (matches.length > 0) {\n\t\t\t\tvar current = matches[0];\n\t\t\t\tmatches.splice(0,1);\n\n\t\t\t\tif (current.result.index < index) {\n\t\t\t\t\t/* processing of another match has moved index beyond this match */\n\t\t\t\t\tthis._updateMatch(current, text, matches, index);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/* apply the style */\n\t\t\t\tvar start = current.result.index;\n\t\t\t\tvar end;\n\t\t\t\tif (current.pattern.regex) {\t/* line pattern defined by a \"match\" */\n\t\t\t\t\tvar substyles = [];\n\t\t\t\t\tresult = current.result;\n\t\t\t\t\tend = start + result[0].length;\n\t\t\t\t\tvar tokenStyle = {start: offset + start, end: offset + end, style: current.pattern.pattern.name};\n\t\t\t\t\tif (!ignoreCaptures) {\n\t\t\t\t\t\tif (current.pattern.pattern.captures) {\n\t\t\t\t\t\t\tthis._getCaptureStyles(result, current.pattern.pattern.captures, offset + start, substyles);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsubstyles.sort(function(a,b) {\n\t\t\t\t\t\t\tif (a.start < b.start) {\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (a.start > b.start) {\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor (var j = 0; j < substyles.length - 1; j++) {\n\t\t\t\t\t\t\tif (substyles[j + 1].start < substyles[j].end) {\n\t\t\t\t\t\t\t\tvar newStyle = {start: substyles[j + 1].end, end: substyles[j].end, style: substyles[j].style};\n\t\t\t\t\t\t\t\tsubstyles[j].end = substyles[j + 1].start;\n\t\t\t\t\t\t\t\tsubstyles.splice(j + 2, 0, newStyle);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis._mergeStyles(tokenStyle, substyles, _styles);\n\t\t\t\t} else {\t/* pattern defined by a \"begin/end\" pair */\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end match contains a capture reference (eg.- \"\\1\") then update\n\t\t\t\t\t * its regex with the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tvar endRegex = current.pattern.regexEnd;\n\t\t\t\t\tendRegex = this._substituteCaptureValues(endRegex, current.result);\n\n\t\t\t\t\tresult = this._findMatch(endRegex, text, current.result.index + current.result[0].length);\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\tresult = this._eolRegex.exec(text);\n\t\t\t\t\t}\n\t\t\t\t\tend = result.index + result[0].length;\n\t\t\t\t\t_styles.push({start: offset + start, end: offset + end, style: current.pattern.pattern.name});\n\t\t\t\t}\n\t\t\t\tindex = result.index + result[0].length;\n\t\t\t\tthis._updateMatch(current, text, matches, index);\n\t\t\t}\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar regex = current.regex || current.regexBegin;\n\t\t\t\tregex.lastIndex = regex.oldLastIndex;\n\t\t\t});\n\t\t},\n\t\tsetStyler: function(styler) {\n\t\t\tif (this._styler) {\n\t\t\t\tthis._textModel.removeEventListener(\"Changed\", this._listener); //$NON-NLS-0$\n\t\t\t}\n\t\t\tthis._styler = styler;\n\t\t\tthis._listener = this._onModelChanged.bind(this);\n\t\t\tthis._textModel = this._styler.getTextModel();\n\t\t\tthis._textModel.addEventListener(\"Changed\", this._listener); //$NON-NLS-0$\n\t\t\tthis._patternManager.firstLineChanged(this._textModel.getLine(0));\n\t\t},\n\t\tverifyBlock: function(baseModel, text, ancestorBlock, changeCount) {\n\t\t\tvar result = null;\n\t\t\tvar matches = [];\n\t\t\tvar match;\n\t\t\tvar parentBlock = ancestorBlock.parent;\n\t\t\tparentBlock.blockPatterns.forEach(function(current) {\n\t\t\t\tmatch = this._findMatch(current.regexBegin || current.regex, text, 0);\n\t\t\t\tif (match) {\n\t\t\t\t\tmatches.push({result: match, pattern: current});\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tmatches.sort(function(a,b) {\n\t\t\t\t/* ensure that matches at index 0 make it to the front, other matches do not matter */\n\t\t\t\tif (!a.result.index && b.result.index) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.result.index && !b.result.index) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (!a.result.index && !b.result.index) {\n\t\t\t\t\treturn a.pattern.pattern.index < b.pattern.pattern.index ? -1 : 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t\tif (!matches.length || matches[0].result.index !== 0 || matches[0].pattern.pattern.id !== ancestorBlock.pattern.pattern.id) {\n\t\t\t\tresult = false;\n\t\t\t} else {\n\t\t\t\t/* the block start appears to be unchanged, now verify that the block end is unchanged */\n\t\t\t\tmatch = matches[0];\n\t\t\t\tvar endRegex = match.pattern.regexEnd;\n\t\t\t\tif (!endRegex) {\n\t\t\t\t\t/* single-match block, just verify its length */\n\t\t\t\t\tresult = ancestorBlock.start + match.result[0].length === ancestorBlock.end + changeCount;\n\t\t\t\t} else {\n\t\t\t\t\t/* begin/end-match block */\n\n\t\t\t\t\t /*\n\t\t\t\t\t  * Determine whether an earlier match of the block's end pattern has been introduced.\n\t\t\t\t\t  * Verifying that this has NOT happened (the most typical case) can be quickly done by\n\t\t\t\t\t  * verifying that the first occurrence of its end pattern is still at its former location.\n\t\t\t\t\t  * However if a match is found prior to this then the blocks preceding it must be computed\n\t\t\t\t\t  * to verify that it is a valid end match (ie.- it is not contained within another block).\n\t\t\t\t \t  */\n\n\t\t\t\t\t/*\n\t\t\t\t\t * If the end regex contains a capture reference (eg.- \"\\1\") then substitute\n\t\t\t\t\t * the resolved capture values from the begin match.\n\t\t\t\t\t */\n\t\t\t\t\tendRegex = this._substituteCaptureValues(endRegex, match.result);\n\n\t\t\t\t\tvar searchStartIndex = match.result[0].length;\n\t\t\t\t\tvar currentMatch = this._findMatch(endRegex, text, searchStartIndex);\n\t\t\t\t\twhile (result === null && currentMatch && ancestorBlock.start + currentMatch.index !== ancestorBlock.contentEnd + changeCount) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * A match was found preceeding the former end match, so now compute\n\t\t\t\t\t\t * blocks to determine whether it is in fact a valid new end match.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar blocks = this.computeBlocks(baseModel, text, ancestorBlock, ancestorBlock.start, searchStartIndex, currentMatch.index + 1, null);\n\t\t\t\t\t\tif (!blocks.length || blocks[blocks.length - 1].end <= ancestorBlock.start + currentMatch.index) {\n\t\t\t\t\t\t\t/* the match is valid, so the attempt to use ancestorBlock as-is fails */\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t/* the match is not valid, so search for the next potential end match */\n\t\t\t\t\t\t\tif (!blocks.length) {\n\t\t\t\t\t\t\t\tcurrentMatch = null;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearchStartIndex = blocks[blocks.length - 1].end - ancestorBlock.start;\n\t\t\t\t\t\t\t\tcurrentMatch = this._findMatch(endRegex, text, searchStartIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!currentMatch) {\n\t\t\t\t\t\tthis._eolRegex.lastIndex = 0;\n\t\t\t\t\t\tcurrentMatch = this._eolRegex.exec(text);\n\t\t\t\t\t\tresult = ancestorBlock.start + currentMatch.index === ancestorBlock.end + changeCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result !== null ? result : true;\n\t\t},\n\n\t\t/** @private */\n\n\t\t_findMatch: function(regex, text, startIndex, testBeforeMatch) {\n\t\t\t/*\n\t\t\t * testBeforeMatch provides a potential optimization for callers that do not strongly expect to find\n\t\t\t * a match.  If this argument is defined then test() is initially called on the regex, which executes\n\t\t\t * significantly faster than exec().  If a match is found then the regex's lastIndex is reverted to\n\t\t\t * its pre-test() value, and exec() is then invoked on it in order to get the match details.\n\t\t\t */\n\n\t\t\tvar index = startIndex;\n\t\t\tvar initialLastIndex = regex.lastIndex;\n\t\t\tthis._linebreakRegex.lastIndex = startIndex;\n\n\t\t\tvar currentLine = this._linebreakRegex.exec(text);\n\t\t\t/*\n\t\t\t * Processing of the first line is treated specially, as it may not start at the beginning of a logical line, but\n\t\t\t * regex's may be dependent on matching '^'.  To resolve this, compute the full line corresponding to the start\n\t\t\t * of the text, even if it begins prior to startIndex, and adjust the regex's lastIndex accordingly to begin searching\n\t\t\t * for matches at the correct location.\n\t\t\t */\n\t\t\tvar lineString, indexAdjustment;\n\t\t\tregex.lastIndex = 0;\n\t\t\tif (currentLine) {\n\t\t\t\tvar lineStart = currentLine.index;\n\t\t\t\twhile (0 <= --lineStart) {\n\t\t\t\t\tvar char = text.charAt(lineStart);\n\t\t\t\t\tif (char === this._NEWLINE || char === this._CR) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlineString = text.substring(lineStart + 1, currentLine.index + currentLine[1].length);\n\t\t\t\tregex.lastIndex = indexAdjustment = currentLine.index - lineStart - 1;\n\t\t\t}\n\t\t\twhile (currentLine && currentLine.index < text.length) {\n\t\t\t\tvar result;\n\t\t\t\tif (testBeforeMatch) {\n\t\t\t\t\tvar revertIndex = regex.lastIndex;\n\t\t\t\t\tif (regex.test(lineString)) {\n\t\t\t\t\t\tregex.lastIndex = revertIndex;\n\t\t\t\t\t\tresult = regex.exec(lineString);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = regex.exec(lineString);\n\t\t\t\t}\n\t\t\t\tif (result) {\n\t\t\t\t\tresult.index += index;\n\t\t\t\t\tresult.index -= indexAdjustment;\n\t\t\t\t\tregex.lastIndex = initialLastIndex;\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\tindexAdjustment = 0;\n\t\t\t\tindex += currentLine[0].length;\n\t\t\t\tcurrentLine = this._linebreakRegex.exec(text);\n\t\t\t\tif (currentLine) {\n\t\t\t\t\tlineString = currentLine[1];\n\t\t\t\t\tregex.lastIndex = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tregex.lastIndex = initialLastIndex;\n\t\t\treturn null;\n\t\t},\n\t\t_getCaptureStyles: function(result, captures, offset, _styles) {\n\t\t\tif (captures[0]) {\n\t\t\t\t/* capture index 0 is the full result */\n\t\t\t\t_styles.push({start: offset, end: offset + result[0].length, style: captures[0].name});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar stringIndex = 0;\n\t\t\tfor (var i = 1; i < result.length; i++) {\n\t\t\t\tif (result[i]) {\n\t\t\t\t\tvar capture = captures[i];\n\t\t\t\t\tif (capture) {\n\t\t\t\t\t\tvar styleStart = offset + stringIndex;\n\t\t\t\t\t\t_styles.push({start: styleStart, end: styleStart + result[i].length, style: capture.name});\n\t\t\t\t\t}\n\t\t\t\t\tstringIndex += result[i].length;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_getLanguageBlock: function(index) {\n\t\t\t/* Returns the parent block that dictates the language in effect at index */\n\t\t\tvar block = this._styler.getBlockAtIndex(index);\n\t\t\tvar embeddedNameRegex = /^source\\..+\\.embedded/;\n\t\t\twhile (block) {\n\t\t\t\tif (block.pattern) {\n\t\t\t\t\tvar pattern = block.pattern.pattern;\n\t\t\t\t\tif (embeddedNameRegex.test(pattern.name || pattern.contentName)) {\n\t\t\t\t\t\treturn block;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tblock = block.parent;\n\t\t\t}\n\t\t\treturn this._styler.getRootBlock();\n\t\t},\n\t\t_initPatterns: function(patternManager, block) {\n\t\t\tif (block.pattern && block.pattern.pattern.linePatterns) {\n\t\t\t\tblock.linePatterns = block.pattern.pattern.linePatterns;\n\t\t\t\tblock.blockPatterns = block.pattern.pattern.blockPatterns;\n\t\t\t\tblock.enclosurePatterns = block.pattern.pattern.enclosurePatterns;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar patterns = patternManager.getPatterns(block.pattern ? block.pattern.pattern : null);\n\t\t\tvar initRegex = function(match) {\n\t\t\t\tvar matchString = typeof(match) === \"string\" ? match : match.match;\n\t\t\t\tvar result = this._ignoreCaseRegex.exec(matchString);\n\t\t\t\tvar flags = this._FLAGS;\n\t\t\t\tif (result) {\n\t\t\t\t\tmatchString = matchString.substring(result[0].length);\n\t\t\t\t\tflags += \"i\";\n\t\t\t\t}\n\t\t\t\treturn new RegExp(matchString, flags);\n\t\t\t}.bind(this);\n\t\t\tvar lastBlock = -1;\n\t\t\tvar index = 0;\n\t\t\tpatterns.forEach(function(current) {\n\t\t\t\tvar pattern;\n\t\t\t\tif (current.match && !current.begin && !current.end) {\n\t\t\t\t\tpattern = {regex: initRegex(current.match), pattern: current};\n\t\t\t\t\tblock.linePatterns.push(pattern);\n\t\t\t\t\tif (current.name && current.name.indexOf(\"punctuation.section\") === 0 && (current.name.indexOf(this._PUNCTUATION_SECTION_BEGIN) !== -1 || current.name.indexOf(this._PUNCTUATION_SECTION_END) !== -1)) { //$NON-NLS-0$\n\t\t\t\t\t\tblock.enclosurePatterns[current.name] = pattern;\n\t\t\t\t\t}\n\t\t\t\t} else if (!current.match && current.begin && current.end) {\n\t\t\t\t\tlastBlock = index;\n\t\t\t\t\tpattern = {regexBegin: initRegex(current.begin), regexEnd: initRegex(current.end), pattern: current};\n\t\t\t\t\tblock.linePatterns.push(pattern);\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t}.bind(this));\n\t\t\tblock.blockPatterns = block.linePatterns.slice(0, lastBlock + 1);\n\t\t\tif (block.pattern) {\n\t\t\t\tblock.pattern.pattern.enclosurePatterns = block.enclosurePatterns;\n\t\t\t\tblock.pattern.pattern.linePatterns = block.linePatterns;\n\t\t\t\tblock.pattern.pattern.blockPatterns = block.blockPatterns;\n\t\t\t}\n\t\t},\n\t\t_mergeStyles: function(fullStyle, substyles, resultStyles) {\n\t\t\tvar i = fullStyle.start;\n\t\t\tsubstyles.forEach(function(current) {\n\t\t\t\tif (i <= current.start) {\n\t\t\t\t\tresultStyles.push({start: i, end: current.start, style: fullStyle.style});\n\t\t\t\t}\n\t\t\t\tresultStyles.push(current);\n\t\t\t\ti = current.end;\n\t\t\t});\n\t\t\tif (i < fullStyle.end) {\n\t\t\t\tresultStyles.push({start: i, end: fullStyle.end, style: fullStyle.style});\n\t\t\t}\n\t\t},\n\t\t_onModelChanged: function(e) {\n\t\t\tvar startLine = this._textModel.getLineAtOffset(e.start);\n\t\t\tif (startLine === 0) {\n\t\t\t\t/* a change in the first line can change the grammar to be applied throughout */\n\t\t\t\tif (this._patternManager.firstLineChanged(this._textModel.getLine(0))) {\n\t\t\t\t\t/* the grammar has changed */\n\t\t\t\t\tthis._styler.computeRootBlock(this._textModel);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_substituteCaptureValues: function(regex, resolvedResult) {\n\t\t\tvar regexString = regex.toString();\n\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\tif (!this._captureReferenceRegex.test(regexString)) {\n\t\t\t\t/* nothing to do */\n\t\t\t\treturn regex;\n\t\t\t}\n\n\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\tvar result = this._captureReferenceRegex.exec(regexString);\n\t\t\twhile (result) {\n\t\t\t\tregexString = regexString.replace(result[0], resolvedResult[result[1]] || \"\");\n\t\t\t\tthis._captureReferenceRegex.lastIndex = 0;\n\t\t\t\tresult = this._captureReferenceRegex.exec(regexString);\n\t\t\t}\n\t\t\t/* return an updated regex, remove the leading '/' and trailing /FLAGS */\n\t\t\treturn new RegExp(regexString.substring(1, regexString.length - 1 - this._FLAGS.length), this._FLAGS);\n\t\t},\n\t\t_updateMatch: function(match, text, matches, minimumIndex, endIndex) {\n\t\t\tvar regEx = match.pattern.regex ? match.pattern.regex : match.pattern.regexBegin;\n\t\t\tendIndex = endIndex || Infinity;\n\t\t\tvar result = this._findMatch(regEx, text, minimumIndex, true);\n\t\t\tif (result && result.index < endIndex) {\n\t\t\t\tmatch.result = result;\n\t\t\t\tfor (var i = 0; i < matches.length; i++) {\n\t\t\t\t\tif (result.index < matches[i].result.index || (result.index === matches[i].result.index && match.pattern.pattern.index < matches[i].pattern.pattern.index)) {\n\t\t\t\t\t\tmatches.splice(i, 0, match);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmatches.push(match);\n\t\t\t}\n\t\t},\n\t\t_captureReferenceRegex: /\\\\(\\d)/g,\n\t\t_containsCaptureRegex: /\\((?!\\?:)/, //$NON-NLS-0$\n\t\t_eolRegex: /$/,\n\t\t_ignoreCaseRegex: /^\\(\\?i\\)\\s*/,\n\t\t_linebreakRegex: /([\\s\\S]*?)(?:[\\r\\n]|$)/g,\n\t\t_CR: \"\\r\", //$NON-NLS-0$\n\t\t_FLAGS: \"g\", //$NON-NLS-0$\n\t\t_NEWLINE: \"\\n\", //$NON-NLS-0$\n\t\t_PUNCTUATION_SECTION_BEGIN: \".begin\", //$NON-NLS-0$\n\t\t_PUNCTUATION_SECTION_END: \".end\" //$NON-NLS-0$\n\t};\n\n\tfunction PatternManager(grammars, rootIds) {\n\t\tthis._unnamedCounter = 0;\n\t\tthis._patterns = [];\n\t\tthis._firstLineMatches = {};\n\t\tif (!Array.isArray(rootIds)) {\n\t\t\trootIds = [rootIds];\n\t\t}\n\t\tthis._rootIds = rootIds;\n\t\tgrammars.forEach(function(grammar) {\n\t\t\tthis._addRepositoryPatterns(grammar.repository || {}, grammar.id);\n\t\t\tthis._addPatterns(grammar.patterns || [], grammar.id);\n\t\t\tif (grammar.firstLineMatch) {\n\t\t\t\tthis._firstLineMatches[grammar.id] = new RegExp(grammar.firstLineMatch);\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\tPatternManager.prototype = {\n\t\tfirstLineChanged: function(text) {\n\t\t\tvar newId = this._computeRootId(text);\n\t\t\tvar changed = this._rootId !== newId;\n\t\t\tthis._rootId = newId;\n\t\t\treturn changed;\n\t\t},\n\t\tgetPatterns: function(pattern) {\n\t\t\tvar parentId;\n\t\t\tif (!pattern) {\n\t\t\t\tif (!this._rootId) { /* currently no root id */\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\tparentId = this._rootId + \"#\" + this._NO_ID;\n\t\t\t} else {\n\t\t\t\tif (typeof(pattern) === \"string\") { //$NON-NLS-0$\n\t\t\t\t\tparentId = pattern;\n\t\t\t\t} else {\n\t\t\t\t\tparentId = pattern.qualifiedId;\n\t\t\t\t}\n\t\t\t\tparentId += \"#\";\n\t\t\t}\n\t\t\t/* indexes on patterns are used to break ties when multiple patterns match the same start text */\n\t\t\tvar indexCounter = [0];\n\t\t\tvar resultObject = {};\n\t\t\tvar regEx = new RegExp(\"^\" + parentId + \"[^#]+$\"); //$NON-NLS-0$\n\t\t\tthis._patterns.forEach(function(current) {\n\t\t\t\tif (regEx.test(current.qualifiedId)) {\n\t\t\t\t\tif (current.include) {\n\t\t\t\t\t\tthis._processInclude(current, indexCounter, resultObject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar newPattern = copy(current);\n\t\t\t\t\t\tnewPattern.index = indexCounter[0]++;\n\t\t\t\t\t\tresultObject[current.qualifiedId] = newPattern;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\n\t\t\tvar result = [];\n\t\t\tvar keys = Object.keys(resultObject);\n\t\t\tkeys.forEach(function(current) {\n\t\t\t\tresult.push(resultObject[current]);\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\n\t\t/** @private */\n\n\t\t_addPattern: function(pattern, patternId, parentId) {\n\t\t\tpattern.parentId = parentId;\n\t\t\tpattern.id = patternId;\n\t\t\tpattern.qualifiedId = pattern.parentId + \"#\" + pattern.id;\n\t\t\tthis._patterns.push(pattern);\n\t\t\tif (pattern.patterns && !pattern.include) {\n\t\t\t\tthis._addPatterns(pattern.patterns, pattern.qualifiedId);\n\t\t\t}\n\t\t},\n\t\t_addPatterns: function(patterns, parentId) {\n\t\t\tpatterns.forEach(function(pattern) {\n\t\t\t\tthis._addPattern(pattern, this._NO_ID + this._unnamedCounter++, parentId);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_addRepositoryPatterns: function(repository, parentId) {\n\t\t\tvar keys = Object.keys(repository);\n\t\t\tkeys.forEach(function(key) {\n\t\t\t\tthis._addPattern(repository[key], key, parentId);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_computeRootId: function(firstLineText) {\n\t\t\tvar defaultId = null; /* an acceptable fallback if no firstLineMatches are made */\n\t\t\tvar matchId = null;\n\t\t\tfor (var i = 0; i < this._rootIds.length; i++) {\n\t\t\t\tvar firstLineMatch = this._firstLineMatches[this._rootIds[i]]; \n\t\t\t\tif (!firstLineMatch) {\n\t\t\t\t\tdefaultId = this._rootIds[i];\n\t\t\t\t} else if (firstLineMatch.test(firstLineText)) {\n\t\t\t\t\tmatchId = this._rootIds[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn matchId || defaultId; \n\t\t},\n\t\t_processInclude: function(pattern, indexCounter, resultObject) {\n\t\t\tvar searchExp;\n\t\t\tvar index = pattern.include.indexOf(\"#\");\n\t\t\tif (index === 0) {\n\t\t\t\t/* inclusion of pattern from same grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.qualifiedId.substring(0, pattern.qualifiedId.indexOf(\"#\")) + pattern.include + \"$\");\n\t\t\t} else if (index === -1) {\n\t\t\t\t/* inclusion of whole grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.include + \"#\" + this._NO_ID + \"[^#]+$\");\n\t\t\t} else {\n\t\t\t\t/* inclusion of specific pattern from another grammar */\n\t\t\t\tsearchExp = new RegExp(\"^\" + pattern.include + \"$\");\n\t\t\t}\n\t\t\tthis._patterns.forEach(function(current) {\n\t\t\t\tif (searchExp.test(current.qualifiedId)) {\n\t\t\t\t\tif (current.include) {\n\t\t\t\t\t\tthis._processInclude(current, indexCounter, resultObject);\n\t\t\t\t\t} else if (!resultObject[current.qualifiedId]) {\n\t\t\t\t\t\tvar newPattern = copy(current);\n\t\t\t\t\t\tnewPattern.index = indexCounter[0]++;\n\t\t\t\t\t\tresultObject[current.qualifiedId] = newPattern;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\t_NO_ID: \"NoID\"\t//$NON-NLS-0$\n\t};\n\n\tfunction Block(bounds, name, typeId, styler, model, parent, initFn) {\n\t\tthis.start = bounds.start;\n\t\tthis.end = bounds.end;\n\t\tthis.contentStart = bounds.contentStart;\n\t\tthis.contentEnd = bounds.contentEnd;\n\t\tthis.name = name;\n\t\tthis.typeId = typeId;\n\t\tthis.styler = styler;\n\t\tthis.parent = parent;\n\t\tif (initFn) {\n\t\t\tinitFn(this);\n\t\t}\n\t\tthis._subBlocks = styler.computeBlocks(model, model.getText(this.contentStart, this.end), this, this.contentStart, null, null, null);\n\t}\n\tBlock.prototype = {\n\t\tadjustBounds: function(index, value) {\n\t\t\tif (index < this.start) {\n\t\t\t\tthis.start += value;\n\t\t\t}\n\t\t\tif (index < this.contentStart) {\n\t\t\t\tthis.contentStart += value;\n\t\t\t}\n\t\t\tif (index <= this.end) {\n\t\t\t\tthis.end += value;\n\t\t\t}\n\t\t\tif (index <= this.contentEnd) {\n\t\t\t\tthis.contentEnd += value;\n\t\t\t}\n\t\t\tthis._subBlocks.forEach(function(current) {\n\t\t\t\tif (index <= current.end) {\n\t\t\t\t\tcurrent.adjustBounds(index, value);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetBlocks: function() {\n\t\t\treturn this._subBlocks;\n\t\t},\n\t\tgetBlockAtIndex: function(index) {\n\t\t\treturn binarySearch(this.getBlocks(), index, true);\n\t\t},\n\t\tisRenderingWhitespace: function() {\n\t\t\treturn this.styler._isRenderingWhitespace();\n\t\t}\n\t};\n\n\tfunction TextStylerAccessor(styler) {\n\t\tthis._styler = styler;\n\t}\n\tTextStylerAccessor.prototype = {\n\t\tgetBlockCommentDelimiters: function(offset) {\n\t\t\treturn this._styler.getBlockCommentDelimiters(offset);\n\t\t},\n\t\tgetLineCommentDelimiter: function(offset) {\n\t\t\treturn this._styler.getLineCommentDelimiter(offset);\n\t\t},\n\t\tgetStyles: function(offset) {\n\t\t\treturn this._styler.getStyles(offset);\n\t\t}\n\t};\n\n\tfunction TextStyler(view, annotationModel, stylerAdapter) {\t\t\n\t\tthis._whitespacesVisible = false;\n\t\tthis._highlightCaretLine = false;\n\t\tthis._foldingEnabled = true;\n\t\tthis._detectTasks = true;\n\t\tthis._annotationProviders = [];\n\t\tthis._view = view;\n\t\tthis._annotationModel = annotationModel;\n\t\tthis._stylerAdapter = stylerAdapter;\n\t\tthis._stylerAdapter.setStyler(this);\n\t\tthis._accessor = new TextStylerAccessor(this);\n\t\tthis._bracketAnnotations;\n\n\t\tvar self = this;\n\t\tthis._listener = {\n\t\t\tonChanged: function(e) {\n\t\t\t\tself._onModelChanged(e);\n\t\t\t},\n\t\t\tonDestroy: function(e) {\n\t\t\t\tself._onDestroy(e);\n\t\t\t},\n\t\t\tonLineStyle: function(e) {\n\t\t\t\tself._onLineStyle(e);\n\t\t\t},\n\t\t\tonMouseDown: function(e) {\n\t\t\t\tself._onMouseDown(e);\n\t\t\t},\n\t\t\tonSelection: function(e) {\n\t\t\t\tself._onSelection(e);\n\t\t\t}\n\t\t};\n\t\tvar model = view.getModel();\n\t\tif (model.getBaseModel) {\n\t\t\tmodel = model.getBaseModel();\n\t\t}\n\t\tmodel.addEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\tview.addEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\tview.addEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\tview.addEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\tview.addEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\tthis.computeRootBlock(model);\n\t}\n\tTextStyler.prototype = {\n\t\taddAnnotationProvider: function(value) {\n\t\t\tif (typeof value === \"function\") { //$NON-NLS-0$\n\t\t\t\tthis._annotationProviders.push(value);\n\t\t\t}\n\t\t},\n\t\tcomputeBlocks: function(model, text, block, offset, startIndex, endIndex, maxBlockCount) {\n\t\t\treturn this._stylerAdapter.computeBlocks(model, text, block, offset, startIndex, endIndex, maxBlockCount);\n\t\t},\n\t\tcomputeRootBlock: function(model) {\n\t\t\tvar charCount = model.getCharCount();\n\t\t\tvar rootBounds = {start: 0, contentStart: 0, end: charCount, contentEnd: charCount};\n\t\t\tif (charCount >= 50000) {\n\t\t\t\tvar startTime = Date.now();\n\t\t\t}\n\t\t\tthis._rootBlock = this._stylerAdapter.createBlock(rootBounds, this, model, null);\n\t\t\tif (startTime) {\n\t\t\t\tvar interval = Date.now() - startTime;\n\t\t\t\tif (interval > 10) {\n\t\t\t\t\tmMetrics.logTiming(\n\t\t\t\t\t\t\"editor\", //$NON-NLS-0$\n\t\t\t\t\t\t\"styler compute blocks (ms/50000 chars)\", //$NON-NLS-0$\n\t\t\t\t\t\tinterval * 50000 / charCount,\n\t\t\t\t\t\tthis._stylerAdapter.getContentType());\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._annotationModel) {\n\t\t\t\tvar add = [];\n\t\t\t\tthis._annotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_FOLDING);\n\t\t\t\tthis._computeFolding(this._rootBlock.getBlocks(), this._view.getModel(), add);\n\t\t\t\tif (this._detectTasks) {\n\t\t\t\t\tthis._annotationModel.removeAnnotations(mAnnotations.AnnotationType.ANNOTATION_TASK);\n\t\t\t\t\tthis._computeTasks(this._rootBlock, model, add);\n\t\t\t\t}\n\t\t\t\tthis._replaceAnnotations([], add);\n\t\t\t}\n\t\t\tthis._view.redrawLines();\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._stylerAdapter.destroy();\n\t\t\tif (this._view) {\n\t\t\t\tvar model = this._view.getModel();\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmodel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tmodel.removeEventListener(\"Changed\", this._listener.onChanged); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"MouseDown\", this._listener.onMouseDown); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"Selection\", this._listener.onSelection); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"Destroy\", this._listener.onDestroy); //$NON-NLS-0$\n\t\t\t\tthis._view.removeEventListener(\"LineStyle\", this._listener.onLineStyle); //$NON-NLS-0$\n\t\t\t\tthis._view = null;\n\t\t\t}\n\t\t},\n\t\tgetAnnotationModel: function() {\n\t\t\treturn this._annotationModel;\n\t\t},\n\t\tgetBlockAtIndex: function(index) {\n\t\t\treturn this._findBlock(this._rootBlock, index);\n\t\t},\n\t\tgetBlockCommentDelimiters: function(index) {\n\t\t\treturn this._stylerAdapter.getBlockCommentDelimiters(index);\n\t\t},\n\t\tgetLineCommentDelimiter: function(index) {\n\t\t\treturn this._stylerAdapter.getLineCommentDelimiter(index);\n\t\t},\n\t\tgetRootBlock: function() {\n\t\t\treturn this._rootBlock;\n\t\t},\n\t\tgetStyleAccessor: function() {\n\t\t\treturn this._accessor;\n\t\t},\n\t\tgetStyles: function(offset) {\n\t\t\tvar result = [];\n\t\t\tif (this._view) {\n\t\t\t\tvar model = this._view.getModel();\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmodel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tvar block = this._findBlock(this._rootBlock, offset);\n\t\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\t\tvar styles = [];\n\t\t\t\tthis._stylerAdapter.parse(lineText, model.getLineStart(lineIndex), 0, block, styles);\n\t\t\t\tvar style = styles[binarySearch(styles, offset, true)];\n\t\t\t\tif (style && style.start <= offset && offset < style.end) {\n\t\t\t\t\tresult.push(style);\n\t\t\t\t}\n\t\t\t\twhile (block) {\n\t\t\t\t\tstyle = this._stylerAdapter.computeStyle(block, model, offset);\n\t\t\t\t\tif (style) {\n\t\t\t\t\t\tresult.splice(0, 0, style);\n\t\t\t\t\t}\n\t\t\t\t\tblock = block.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tgetTextModel: function() {\n\t\t\tvar model = this._view.getModel();\n\t\t\tif (model.getBaseModel) {\n\t\t\t\tmodel = model.getBaseModel();\n\t\t\t}\n\t\t\treturn model;\n\t\t},\n\t\tremoveAnnotationProvider: function(value) {\n\t\t\tif (typeof value !== \"function\") { //$NON-NLS-0$\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar index = this._annotationProviders.indexOf(value);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis._annotationProviders.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tsetDetectHyperlinks: function() {\n\t\t},\n\t\tsetDetectTasks: function(enabled) {\n\t\t\tthis._detectTasks = enabled;\n\t\t},\n\t\tsetFoldingEnabled: function(enabled) {\n\t\t\tthis._foldingEnabled = enabled;\n\t\t},\n\t\tsetHighlightCaretLine: function(highlight) {\n\t\t\tthis._highlightCaretLine = highlight;\n\t\t},\n\t\tsetWhitespacesVisible: function(visible, redraw) {\n\t\t\tif (this._whitespacesVisible === visible) { return; }\n\t\t\tthis._whitespacesVisible = visible;\n\t\t\tif (redraw) {\n\t\t\t\tthis._view.redraw();\n\t\t\t}\n\t\t},\n\n\t\t/** @private */\n\n\t\t_computeFolding: function(blocks, viewModel, _add) {\n\t\t\tif (!viewModel.getBaseModel) { return; }\n\t\t\tvar baseModel = viewModel.getBaseModel();\n\t\t\tblocks.forEach(function(block) {\n\t\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\t\tvar annotation = this._createFoldingAnnotation(viewModel, baseModel, foldBounds.start, foldBounds.end);\n\t\t\t\tif (annotation) {\n\t\t\t\t\t_add.push(annotation);\n\t\t\t\t}\n\t\t\t\tthis._computeFolding(block.getBlocks(), viewModel, _add);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_computeTasks: function(block, baseModel, annotations, start, end) {\n\t\t\tstart = start || block.start;\n\t\t\tend = end || block.end;\n\t\t\tif (block.start <= end && start <= block.end) {\n\t\t\t\tif (!this._annotationModel) { return; }\n\n\t\t\t\tif (block.name && block.name.indexOf(\"comment\") === 0) {\n\t\t\t\t\tvar substyles = [];\n\t\t\t\t\tvar lineIndex = baseModel.getLineAtOffset(block.contentStart);\n\t\t\t\t\tvar lineStart = baseModel.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(baseModel.getText(lineStart, block.end), lineStart, block.contentStart - lineStart, block, substyles, true);\n\t\t\t\t\tfor (var i = 0; i < substyles.length; i++) {\n\t\t\t\t\t\tif (substyles[i].style === \"meta.annotation.task.todo\" && start <= substyles[i].start && substyles[i].end <= end) {\n\t\t\t\t\t\t\tannotations.push(this._createAnnotation(\n\t\t\t\t\t\t\t\tmAnnotations.AnnotationType.ANNOTATION_TASK,\n\t\t\t\t\t\t\t\tsubstyles[i].start,\n\t\t\t\t\t\t\t\tsubstyles[i].end,\n\t\t\t\t\t\t\t\tbaseModel.getText(substyles[i].start, substyles[i].end)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tblock.getBlocks().forEach(function(current) {\n\t\t\t\t\tthis._computeTasks(current, baseModel, annotations, start, end);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t},\n\t\t_createAnnotation: function(type, start, end, title) {\n\t\t\tvar result = mAnnotations.AnnotationType.createAnnotation(type, start, end, title);\n\t\t\tresult.source = this._TEXTSTYLER;\n\t\t\treturn result;\n\t\t},\n\t\t_createFoldingAnnotation: function(viewModel, baseModel, start, end) {\n\t\t\tvar startLine = baseModel.getLineAtOffset(start);\n\t\t\tvar endLine = baseModel.getLineAtOffset(end);\n\t\t\tif (startLine === endLine) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (startLine + 1 === endLine && baseModel.getLineStart(endLine) === baseModel.getLineEnd(endLine)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this._createAnnotation(mAnnotations.AnnotationType.ANNOTATION_FOLDING, start, end, viewModel);\n\t\t},\n\t\t_findBlock: function(parentBlock, offset) {\n\t\t\tvar blocks = parentBlock.getBlocks();\n\t\t\tif (!blocks.length) {\n\t\t\t\treturn parentBlock;\n\t\t\t}\n\n\t\t\tvar index = binarySearch(blocks, offset, true);\n\t\t\tif (index < blocks.length && blocks[index].start <= offset && offset < blocks[index].end) {\n\t\t\t\treturn this._findBlock(blocks[index], offset);\n\t\t\t}\n\t\t\treturn parentBlock;\n\t\t},\n\t\t_findBrackets: function(model, bracketMatch, block, text, offset, end) {\n\t\t\tvar result = [], styles = [];\n\t\t\tvar start = offset, blocks = block.getBlocks();\n\t\t\tvar startIndex = binarySearch(blocks, offset, true);\n\t\t\tfor (var i = startIndex; i < blocks.length; i++) {\n\t\t\t\tif (blocks[i].start >= end) { break; }\n\t\t\t\tvar blockStart = blocks[i].start;\n\t\t\t\tvar blockEnd = blocks[i].end;\n\t\t\t\tif (start < blockStart) {\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(start);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, blockStart - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\t\tstyles.forEach(function(current) {\n\t\t\t\t\t\tif (current.style) {\n\t\t\t\t\t\t\tif (current.style.indexOf(bracketMatch.beginName) === 0) {\n\t\t\t\t\t\t\t\tresult.push(current.start + 1);\n\t\t\t\t\t\t\t} else if (current.style.indexOf(bracketMatch.endName) === 0) {\n\t\t\t\t\t\t\t\tresult.push(-(current.start + 1));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tstyles = [];\n\t\t\t\t}\n\t\t\t\tstart = blockEnd;\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\tlineIndex = model.getLineAtOffset(start);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, end - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\tstyles.forEach(function(current) {\n\t\t\t\t\tif (current.style) {\n\t\t\t\t\t\tif (current.style.indexOf(bracketMatch.beginName) === 0) {\n\t\t\t\t\t\t\tresult.push(current.start + 1);\n\t\t\t\t\t\t} else if (current.style.indexOf(bracketMatch.endName) === 0) {\n\t\t\t\t\t\t\tresult.push(-(current.start + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_findMatchingBracket: function(model, block, offset) {\n\t\t\tvar lineIndex = model.getLineAtOffset(offset);\n\t\t\tvar lineEnd = model.getLineEnd(lineIndex);\n\t\t\tvar text = model.getText(offset, lineEnd);\n\n\t\t\tvar bracketMatch = this._stylerAdapter.getBracketMatch(block, text);\n\t\t\tif (!bracketMatch) { return -1; }\n\n\t\t\tvar lineText = model.getLine(lineIndex);\n\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\tvar brackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\tfor (var i = 0; i < brackets.length; i++) {\n\t\t\t\tvar sign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\tif (brackets[i] * sign - 1 === offset) {\n\t\t\t\t\tvar level = 1;\n\t\t\t\t\tif (!bracketMatch.atStart) {\n\t\t\t\t\t\ti--;\n\t\t\t\t\t\tfor (; i>=0; i--) {\n\t\t\t\t\t\t\tsign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\treturn brackets[i] * sign - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex -= 1;\n\t\t\t\t\t\twhile (lineIndex >= 0) {\n\t\t\t\t\t\t\tlineText = model.getLine(lineIndex);\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tlineEnd = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\tbrackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\t\t\t\t\tfor (var j = brackets.length - 1; j >= 0; j--) {\n\t\t\t\t\t\t\t\tsign = brackets[j] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\t\treturn brackets[j] * sign - 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\tfor (; i<brackets.length; i++) {\n\t\t\t\t\t\t\tsign = brackets[i] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\treturn brackets[i] * sign - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineIndex += 1;\n\t\t\t\t\t\tvar lineCount = model.getLineCount();\n\t\t\t\t\t\twhile (lineIndex < lineCount) {\n\t\t\t\t\t\t\tlineText = model.getLine(lineIndex);\n\t\t\t\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\t\t\t\tlineEnd = model.getLineEnd(lineIndex);\n\t\t\t\t\t\t\tbrackets = this._findBrackets(model, bracketMatch, block, lineText, lineStart, lineEnd);\n\t\t\t\t\t\t\tfor (var k=0; k<brackets.length; k++) {\n\t\t\t\t\t\t\t\tsign = brackets[k] >= 0 ? 1 : -1;\n\t\t\t\t\t\t\t\tlevel += sign;\n\t\t\t\t\t\t\t\tif (level === 0) {\n\t\t\t\t\t\t\t\t\treturn brackets[k] * sign - 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlineIndex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t\t_getLineStyle: function(lineIndex) {\n\t\t\tif (this._highlightCaretLine) {\n\t\t\t\tvar view = this._view;\n\t\t\t\tvar model = view.getModel();\n\t\t\t\tvar selections = view.getSelections();\n\t\t\t\tvar hasCaret = false;\n\t\t\t\tif (!selections.some(function(selection) {\n\t\t\t\t\tif (selection.start === selection.end) {\n\t\t\t\t\t\thasCaret = hasCaret || model.getLineAtOffset(selection.start) === lineIndex;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}) && hasCaret) return this._caretLineStyle;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_getStyles: function(block, model, text, offset, startIndex) {\n\t\t\tvar end = offset + text.length;\n\n\t\t\tvar styles = [];\n\t\t\tvar start = offset + startIndex, blocks = block.getBlocks();\n\t\t\tvar startBlockIndex = binarySearch(blocks, start, true);\n\t\t\tfor (var i = startBlockIndex; i < blocks.length; i++) {\n\t\t\t\tif (blocks[i].start >= end) { break; }\n\t\t\t\tvar blockStart = blocks[i].start;\n\t\t\t\tvar blockEnd = blocks[i].end;\n\t\t\t\tif (start < blockStart) {\n\t\t\t\t\t/* content on that line that preceeds the start of the block */\n\t\t\t\t\tvar lineIndex = model.getLineAtOffset(start);\n\t\t\t\t\tvar lineStart = model.getLineStart(lineIndex);\n\t\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, blockStart - offset), lineStart, start - lineStart, block, styles);\n\t\t\t\t}\n\t\t\t\tvar s = Math.max(start, blockStart);\n\t\t\t\tif (s === blockStart) {\n\t\t\t\t\t/* currently in the block's \"start\" segment */\n\t\t\t\t\tvar startString = this._stylerAdapter.getBlockStartStyle(blocks[i], text.substring(s - offset), s, styles);\n\t\t\t\t\tif (startString) {\n\t\t\t\t\t\ts += startString.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * Compute the block end now in order to determine the end-bound of the contained content, but do not add\n\t\t\t\t * its styles to the styles array until content styles have been computed, so that ordering is preserved.\n\t\t\t\t */\n\t\t\t\tvar e = Math.min(end, blockEnd);\n\t\t\t\tvar endStyles = [];\n\t\t\t\tif (e === blockEnd) {\n\t\t\t\t\t/* currently in the block's \"end\" segment */\n\t\t\t\t\tvar testString = text.substring(e - start - (blocks[i].end - blocks[i].contentEnd));\n\t\t\t\t\tvar endString = this._stylerAdapter.getBlockEndStyle(blocks[i], testString, e, endStyles);\n\t\t\t\t\tif (endString) {\n\t\t\t\t\t\te -= endString.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlineIndex = model.getLineAtOffset(s);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tvar blockSubstyles = this._getStyles(blocks[i], model, text.substring(lineStart - offset, e - offset), lineStart, s - lineStart);\n\t\t\t\tvar overrideStyles = [];\n\t\t\t\tthis._stylerAdapter.getBlockOverrideStyles(blocks[i], text.substring(s - offset, e - offset), s, overrideStyles);\n\t\t\t\tif (overrideStyles.length) {\n\t\t\t\t\tArray.prototype.push.apply(blockSubstyles, overrideStyles); /* append overrideStyles into blockSubstyles */\n\t\t\t\t\tif (blockSubstyles.length !== overrideStyles.length) {\n\t\t\t\t\t\t/* substyles came from both sources, so they need to be sorted together */\n\t\t\t\t\t\tblockSubstyles.sort(function(a,b) {\n\t\t\t\t\t\t\tif (a.start < b.start) {\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (a.start > b.start) {\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar blockStyleName = this._stylerAdapter.getBlockContentStyleName(blocks[i]);\n\t\t\t\tif (blockStyleName) {\n\t\t\t\t\t/*\n\t\t\t\t\t * If a name was specified for the current block then apply its style throughout its\n\t\t\t\t\t * content wherever a style is not provided by a sub-element.\n\t\t\t\t\t */\n\t\t\t\t\tvar index = s;\n\t\t\t\t\tblockSubstyles.forEach(function(current) {\n\t\t\t\t\t\tif (current.start - index) {\n\t\t\t\t\t\t\tstyles.push({start: index, end: current.start, style: blockStyleName});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (current.mergeable) {\n\t\t\t\t\t\t\tcurrent.style += \",\" + blockStyleName;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyles.push(current);\n\t\t\t\t\t\tindex = current.end;\n\t\t\t\t\t});\n\t\t\t\t\tif (e - index) {\n\t\t\t\t\t\tstyles.push({start: index, end: e, style: blockStyleName});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstyles = styles.concat(blockSubstyles);\n\t\t\t\t}\n\t\t\t\tstyles = styles.concat(endStyles);\n\t\t\t\tstart = blockEnd;\n\t\t\t}\n\t\t\tif (start < end) {\n\t\t\t\t/* content on that line that follows the end of the block */\n\t\t\t\tlineIndex = model.getLineAtOffset(start);\n\t\t\t\tlineStart = model.getLineStart(lineIndex);\n\t\t\t\tthis._stylerAdapter.parse(text.substring(lineStart - offset, end - offset), lineStart, start - lineStart, block, styles);\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\t\t_isRenderingWhitespace: function() {\n\t\t\treturn this._whitespacesVisible;\n\t\t},\n\t\t_onDestroy: function() {\n\t\t\tthis.destroy();\n\t\t},\n\t\t_onLineStyle: function(e) {\n\t\t\tif (this._rootBlock) {\n\t\t\t\tif (e.textView === this._view) {\n\t\t\t\t\te.style = this._getLineStyle(e.lineIndex);\n\t\t\t\t}\n\t\t\t\tvar offset = e.lineStart;\n\t\t\t\tvar model = e.textView.getModel();\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\toffset = model.mapOffset(offset);\n\t\t\t\t\tvar baseModel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\te.ranges = this._getStyles(this._rootBlock, baseModel || model, e.lineText, offset, 0);\n\n\t\t\t\tfor (var i = e.ranges.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar current = e.ranges[i];\n\t\t\t\t\tif (current.style) {\n\t\t\t\t\t\tcurrent.style = {styleClass: current.style.replace(/\\./g, \" \")};\n\t\t\t\t\t\tif (baseModel) {\n\t\t\t\t\t\t\tvar length = current.end - current.start;\n\t\t\t\t\t\t\tcurrent.start = model.mapOffset(current.start, true);\n\t\t\t\t\t\t\tcurrent.end = current.start + length;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.ranges.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\te.ranges = [];\n\t\t\t}\n\n\t\t\tif (this._isRenderingWhitespace()) {\n\t\t\t\tthis._spliceStyles(this._spacePattern, e.ranges, e.lineText, e.lineStart);\n\t\t\t\tthis._spliceStyles(this._tabPattern, e.ranges, e.lineText, e.lineStart);\n\t\t\t}\n\t\t},\n\t\t_onModelChanged: function(e) {\n\t\t\tvar start = e.start;\n\t\t\tvar removedCharCount = e.removedCharCount;\n\t\t\tvar addedCharCount = e.addedCharCount;\n\t\t\tvar changeCount = addedCharCount - removedCharCount;\n\t\t\tvar viewModel = this._view.getModel();\n\t\t\tvar baseModel = viewModel.getBaseModel ? viewModel.getBaseModel() : viewModel;\n\t\t\tvar end = start + removedCharCount;\n\t\t\tvar charCount = baseModel.getCharCount();\n\n\t\t\t/* compute the nearest ancestor block to the start and end indices */\n\t\t\tvar lineStart = baseModel.getLineStart(baseModel.getLineAtOffset(start));\n\t\t\tvar ancestorBlock = this._findBlock(this._rootBlock, start);\n\n\t\t\tvar blockExtended, blocks, parentBlock, redraw, text, te, ts;\n\t\t\tdo {\n\t\t\t\tparentBlock = ancestorBlock.parent;\n\n\t\t\t\t/*\n\t\t\t\t * Determine whether ancestorBlock contains the full range of\n\t\t\t\t * text whose styling may be affected by this model change.\n\t\t\t\t */\n\t\t\t\tif (!blockExtended && parentBlock) {\n\t\t\t\t\t/* verify that ancestorBlock's start and end bounds are not affected by this change */\n\t\t\t\t\tif (changeCount < 0 && ancestorBlock.end - start <= -changeCount) {\n\t\t\t\t\t\t/* the end bound has definitely been affected, no verifyBlock() required, move up to the parent */\n\t\t\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\ttext = baseModel.getText(ancestorBlock.start, Math.min(charCount, ancestorBlock.end + changeCount + 1));\n\t\t\t\t\tif (!this._stylerAdapter.verifyBlock(baseModel, text, ancestorBlock, changeCount)) {\n\t\t\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * The change has not directly changed ancestorBlock's start/end strings, now verify that its end\n\t\t\t\t * bound is still valid (ie.- ensure that a new block is not extending beyond the end bound).\n\t\t\t\t */\n\n\t\t\t\tblocks = ancestorBlock.getBlocks();\n\t\t\t\tvar blockCount = blocks.length;\n\t\t\t\tvar blockStart = binarySearch(blocks, lineStart, true);\n\t\t\t\tvar blockEnd = binarySearch(blocks, end, false, blockStart - 1, blockCount);\n\n\t\t\t\t/*\n\t\t\t\t * If the change immediately follows the preceding block then test whether\n\t\t\t\t * the block should be extended.\n\t\t\t\t */\n\t\t\t\tblockExtended = false;\n\t\t\t\tif (blockStart && blocks.length && blocks[blockStart - 1].end === start) {\n\t\t\t\t\ttext = baseModel.getText(blocks[blockStart - 1].start, Math.min(charCount, start + 1));\n\t\t\t\t\tvar tempBlocks = this.computeBlocks(baseModel, text, ancestorBlock, blocks[blockStart - 1].start, null, null, null);\n\t\t\t\t\tif (tempBlocks.length && tempBlocks[0].end !== blocks[blockStart - 1].end) {\n\t\t\t\t\t\t/* the change has affected the preceding block's end, so include this block */\n\t\t\t\t\t\tblockStart--;\n\t\t\t\t\t\tblockExtended = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (blockStart < blockCount && blocks[blockStart].start <= lineStart && (lineStart < blocks[blockStart].end || blockExtended)) {\n\t\t\t\t\tts = blocks[blockStart].start;\n\t\t\t\t\tif (ts > start) { ts += changeCount; }\n\t\t\t\t} else if (blockStart === blockCount && blockCount > 0 && ancestorBlock.end - changeCount === blocks[blockCount - 1].end) {\n\t\t\t\t\tts = blocks[--blockStart].start;\n\t\t\t\t\tif (ts > start) { ts += changeCount; }\n\t\t\t\t} else {\n\t\t\t\t\tts = Math.max(lineStart, ancestorBlock.contentStart);\n\t\t\t\t}\n\n\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\tte = blocks[blockEnd].end;\n\t\t\t\t} else {\n\t\t\t\t\tte = ancestorBlock.contentEnd;\n\t\t\t\t}\n\t\t\t\tif (start <= te) { te += changeCount; }\n\t\t\t\tte = Math.min(te, charCount - 1);\n\t\t\t\ttext = baseModel.getText(ts, te + 1);\n\t\t\t\tvar newBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\n\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\t/* ensure that blockEnd's end is preserved */\n\t\t\t\t\tif (newBlocks.length && newBlocks[newBlocks.length - 1].end === te && newBlocks[newBlocks.length - 1].typeId === blocks[blockEnd].typeId) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t/*\n\t\t\t\t\t * ancestorBlock's end match is no longer valid because it is being spanned by a block from\n\t\t\t\t\t * within.  Attempt to find a subsequent sibling block with the same type, as its end match\n\t\t\t\t\t * will serve as the end match for this spanning block as well.\n\t\t\t\t\t */\n\t\t\t\t\tif (newBlocks.length && this._stylerAdapter.blockSpansBeyondEnd(newBlocks[newBlocks.length - 1])) {\n\t\t\t\t\t\tblockEnd++;\n\t\t\t\t\t\tvar subBlocks = newBlocks[newBlocks.length - 1].getBlocks();\n\t\t\t\t\t\tvar spanningTypeId = (subBlocks.length ? subBlocks[subBlocks.length - 1] : newBlocks[newBlocks.length - 1]).typeId;\n\t\t\t\t\t\twhile (blockEnd < blockCount) {\n\t\t\t\t\t\t\tif (blocks[blockEnd].typeId === spanningTypeId) {\n\t\t\t\t\t\t\t\t/* found a potential end block, must verify it */\n\t\t\t\t\t\t\t\tvar tempTe = blocks[blockEnd].end + changeCount;\n\t\t\t\t\t\t\t\ttempTe = Math.min(tempTe, charCount - 1);\n\t\t\t\t\t\t\t\ttext = baseModel.getText(ts, tempTe + 1);\n\t\t\t\t\t\t\t\tvar tempNewBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\t\t\t\t\t\t\t\tif (tempNewBlocks.length && tempNewBlocks[tempNewBlocks.length - 1].end === tempTe) {\n\t\t\t\t\t\t\t\t\t/* verified, can now stop looking */\n\t\t\t\t\t\t\t\t\tte = tempTe;\n\t\t\t\t\t\t\t\t\tnewBlocks = tempNewBlocks;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tblockEnd++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (blockEnd < blockCount) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t/* ensure that ancestorBlock's end is preserved */\n\t\t\t\t\tif (!newBlocks.length || newBlocks[newBlocks.length - 1].end <= ancestorBlock.contentEnd + changeCount) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * The end block's end bound is spanned by a block from within, so move up to the ancestor\n\t\t\t\t * block, or extend end to the end of the content if already at the root-level block.\n\t\t\t\t */\n\n\t\t\t\tif (!parentBlock) {\n\t\t\t\t\tte = charCount;\n\t\t\t\t\tblockEnd = blockCount;\n\t\t\t\t\ttext = baseModel.getText(ts, te);\n\t\t\t\t\tnewBlocks = this.computeBlocks(baseModel, text, ancestorBlock, ts, null, null, null);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tancestorBlock = parentBlock;\n\t\t\t\tredraw = true; /* blocks may not appear to be changed in the context of the parent block */\n\t\t\t} while (true);\n\n\t\t\tthis._rootBlock.adjustBounds(start, changeCount);\n\t\t\tblockEnd = Math.min(blockEnd + 1, blockCount);\n\n\t\t\tvar block;\n\t\t\tif (!redraw) {\n\t\t\t\tredraw = (blockEnd - blockStart) !== newBlocks.length;\n\t\t\t}\n\t\t\tif (!redraw) {\n\t\t\t\tfor (var i = 0; i < newBlocks.length; i++) {\n\t\t\t\t\tblock = blocks[blockStart + i];\n\t\t\t\t\tvar newBlock = newBlocks[i];\n\t\t\t\t\tif (block.start !== newBlock.start || block.end !== newBlock.end || block.typeId !== newBlock.typeId) {\n\t\t\t\t\t\tredraw = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!blocks.length && !newBlocks.length) {\n\t\t\t\tvar eventOldBlocks = [ancestorBlock];\n\t\t\t\tvar eventNewBlocks = [ancestorBlock];\n\t\t\t\tthis.dispatchEvent({\n\t\t\t\t\ttype: \"BlocksChanged\", //$NON-NLS-0$\n\t\t\t\t\toldBlocks: eventOldBlocks,\n\t\t\t\t\tnewBlocks: eventNewBlocks\n\t\t\t\t});\n\t\t\t\tancestorBlock = eventNewBlocks[0]; /* enables the markdown styler to return a modified ancestorBlock */\n\t\t\t} else {\n\t\t\t\tthis.dispatchEvent({\n\t\t\t\t\ttype: \"BlocksChanged\", //$NON-NLS-0$\n\t\t\t\t\toldBlocks: blocks.slice(blockStart, blockEnd),\n\t\t\t\t\tnewBlocks: newBlocks\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar args = [blockStart, blockEnd - blockStart].concat(newBlocks);\n\t\t\tArray.prototype.splice.apply(blocks, args);\n\t\t\tif (redraw) {\n\t\t\t\tvar redrawStart = ts;\n\t\t\t\tvar redrawEnd = te;\n\t\t\t\tif (viewModel !== baseModel) {\n\t\t\t\t\tredrawStart = viewModel.mapOffset(redrawStart, true);\n\t\t\t\t\tredrawEnd = viewModel.mapOffset(redrawEnd, true);\n\t\t\t\t}\n\t\t\t\tthis._view.redrawRange(redrawStart, redrawEnd);\n\t\t\t}\n\n\t\t\tif (this._annotationModel) {\n\t\t\t\tvar remove = [], add = [];\n\t\t\t\tvar allFolding = [];\n\t\t\t\tvar iter = this._annotationModel.getAnnotations(ts, te);\n\t\t\t\tvar doFolding = this._foldingEnabled && baseModel !== viewModel;\n\t\t\t\tvar parent = ancestorBlock.parent || ancestorBlock;\n\t\t\t\twhile (iter.hasNext()) {\n\t\t\t\t\tvar annotation = iter.next();\n\t\t\t\t\tif (doFolding && annotation.type === mAnnotations.AnnotationType.ANNOTATION_FOLDING) {\n\t\t\t\t\t\tallFolding.push(annotation);\n\t\t\t\t\t\tblock = this._findBlock(parent, annotation.start);\n\t\t\t\t\t\twhile (block) {\n\t\t\t\t\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\t\t\t\t\tif (annotation.start === foldBounds.start && annotation.end === foldBounds.end) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tblock = block.parent;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (block && annotation.start === foldBounds.start && annotation.end === foldBounds.end) {\n\t\t\t\t\t\t\tvar annotationStart = annotation.start;\n\t\t\t\t\t\t\tvar annotationEnd = annotation.end;\n\t\t\t\t\t\t\tif (annotationStart > start) {\n\t\t\t\t\t\t\t\tannotationStart -= changeCount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (annotationEnd > start) {\n\t\t\t\t\t\t\t\tannotationEnd -= changeCount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (annotationStart <= start && start < annotationEnd && annotationStart <= end && end < annotationEnd) {\n\t\t\t\t\t\t\t\tvar startLine = baseModel.getLineAtOffset(annotation.start);\n\t\t\t\t\t\t\t\tvar endLine = baseModel.getLineAtOffset(annotation.end);\n\t\t\t\t\t\t\t\tif (startLine !== endLine) {\n\t\t\t\t\t\t\t\t\tif (!annotation.expanded) {\n\t\t\t\t\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t\tannotation.expand();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (annotation.type === mAnnotations.AnnotationType.ANNOTATION_TASK) {\n\t\t\t\t\t\tif (ancestorBlock.start <= annotation.start && annotation.end <= ancestorBlock.end) {\n\t\t\t\t\t\t\tremove.push(annotation);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (doFolding) {\n\t\t\t\t\tparent.getBlocks().forEach(function(block) {\n\t\t\t\t\t\tthis._updateFolding(block, baseModel, viewModel, allFolding, add, ts, te);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t\tif (this._detectTasks) {\n\t\t\t\t\tthis._computeTasks(ancestorBlock, baseModel, add, ts, te);\n\t\t\t\t}\n\t\t\t\tthis._annotationProviders.forEach(function(current) {\n\t\t\t\t\tvar providerRemove = [];\n\t\t\t\t\tvar providerAdd = [];\n\t\t\t\t\tcurrent(this._annotationModel, baseModel, ancestorBlock, ts, te, providerRemove, providerAdd);\n\t\t\t\t\tremove = remove.concat(providerRemove);\n\t\t\t\t\tadd = add.concat(providerAdd);\n\t\t\t\t}.bind(this));\n\t\t\t\tthis._replaceAnnotations(remove, add);\n\t\t\t}\n\t\t},\n\t\t_onMouseDown: function(e) {\n\t\t\tif (e.clickCount !== 2) { return; }\n\t\t\tvar model = this._view.getModel();\n\t\t\tvar offset = this._view.getOffsetAtLocation(e.x, e.y);\n\t\t\tif (offset > 0) {\n\t\t\t\tvar mapOffset = offset - 1;\n\t\t\t\tvar baseModel = model;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmapOffset = model.mapOffset(mapOffset);\n\t\t\t\t\tbaseModel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tvar block = this._findBlock(this._rootBlock, mapOffset);\n\t\t\t\tvar bracket = this._findMatchingBracket(baseModel, block, mapOffset);\n\t\t\t\tif (bracket !== -1) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar mapBracket = bracket;\n\t\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\t\tmapBracket = model.mapOffset(mapBracket, true);\n\t\t\t\t\t}\n\t\t\t\t\tif (offset > mapBracket) {\n\t\t\t\t\t\toffset--;\n\t\t\t\t\t\tmapBracket++;\n\t\t\t\t\t}\n\t\t\t\t\tthis._view.setSelection(mapBracket, offset);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_onSelection: function(e) {\n\t\t\tvar oldSelections = Array.isArray(e.oldValue) ? e.oldValue : [e.oldValue];\n\t\t\tvar newSelections = Array.isArray(e.newValue) ? e.newValue : [e.newValue];\n\t\t\tvar view = this._view;\n\t\t\tvar model = view.getModel();\n\t\t\tvar lineIndex;\n\t\t\tif (this._highlightCaretLine) {\n\t\t\t\tfunction getHighlightLines(selections) {\n\t\t\t\t\tvar lines = {};\n\t\t\t\t\tif (selections.some(function(selection) {\n\t\t\t\t\t\tif (selection.isEmpty()) {\n\t\t\t\t\t\t\tlines[model.getLineAtOffset(selection.start).toString()] = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t})) return {};\n\t\t\t\t\treturn lines;\n\t\t\t\t}\n\t\t\t\tvar oldLines = getHighlightLines(oldSelections);\n\t\t\t\tvar newLines = getHighlightLines(newSelections);\n\t\t\t\tfunction redraw(o, n) {\n\t\t\t\t\tfor (var p in o) {\n\t\t\t\t\t\tif (!n[p]) {\n\t\t\t\t\t\t\tlineIndex = p >> 0;\n\t\t\t\t\t\t\tview.redrawLines(lineIndex, lineIndex + 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tredraw(oldLines, newLines);\n\t\t\t\tredraw(newLines, oldLines);\n\t\t\t}\n\t\t\tif (!this._annotationModel) { return; }\n\n\t\t\tvar remove = this._bracketAnnotations, add, caret;\n\t\t\tif (newSelections.length === 1 && newSelections[0].isEmpty() && (caret = newSelections[0].getCaret()) > 0) {\n\t\t\t\tvar mapCaret = caret - 1;\n\t\t\t\tif (model.getBaseModel) {\n\t\t\t\t\tmapCaret = model.mapOffset(mapCaret);\n\t\t\t\t\tmodel = model.getBaseModel();\n\t\t\t\t}\n\t\t\t\tvar block = this._findBlock(this._rootBlock, mapCaret);\n\t\t\t\tvar bracket = this._findMatchingBracket(model, block, mapCaret);\n\t\t\t\tif (bracket !== -1) {\n\t\t\t\t\tadd = [\n\t\t\t\t\t\tthis._createAnnotation(mAnnotations.AnnotationType.ANNOTATION_MATCHING_BRACKET, bracket, bracket + 1),\n\t\t\t\t\t\tthis._createAnnotation(mAnnotations.AnnotationType.ANNOTATION_CURRENT_BRACKET, mapCaret, mapCaret + 1)\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._bracketAnnotations = add;\n\t\t\tthis._replaceAnnotations(remove, add);\n\t\t},\n\t\t_replaceAnnotations: function(remove, add) {\n\t\t\tvar filteredRemove;\n\t\t\tif (remove) {\n\t\t\t\tfilteredRemove = [];\n\t\t\t\tremove.forEach(function(current) {\n\t\t\t\t\tif (current.type !== mAnnotations.AnnotationType.ANNOTATION_FOLDING || current.source === this._TEXTSTYLER) {\n\t\t\t\t\t\tfilteredRemove.push(current);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\tthis._annotationModel.replaceAnnotations(filteredRemove, add);\n\t\t},\n\t\t_spliceStyles: function(whitespacePattern, ranges, text, offset) {\n\t\t\tvar regex = whitespacePattern.regex;\n\t\t\tregex.lastIndex = 0;\n\t\t\tvar rangeIndex = 0;\n\t\t\tvar result = regex.exec(text);\n\t\t\twhile (result) {\n\t\t\t\tvar charIndex = offset + result.index;\n\t\t\t\twhile (rangeIndex < ranges.length) {\n\t\t\t\t\tif (charIndex < ranges[rangeIndex].end) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\trangeIndex++;\n\t\t\t\t}\n\t\t\t\tvar newStyle = {\n\t\t\t\t\tstart: charIndex,\n\t\t\t\t\tend: charIndex + 1,\n\t\t\t\t\tstyle: copy(whitespacePattern.style)\n\t\t\t\t};\n\t\t\t\tif (rangeIndex < ranges.length && ranges[rangeIndex].start <= charIndex) {\n\t\t\t\t\tvar endStyle = {start: charIndex + 1, end: ranges[rangeIndex].end, style: ranges[rangeIndex].style};\n\t\t\t\t\tranges[rangeIndex].end = charIndex;\n\t\t\t\t\tranges.splice(rangeIndex + 1, 0, endStyle);\n\t\t\t\t\tranges.splice(rangeIndex + 1, 0, newStyle);\n\t\t\t\t\trangeIndex += 2;\n\t\t\t\t\tnewStyle.style.styleClass += \" \" + ranges[rangeIndex].style.styleClass; //$NON-NLS-0$\n\t\t\t\t} else {\n\t\t\t\t\tranges.splice(rangeIndex, 0, newStyle);\n\t\t\t\t\trangeIndex++;\n\t\t\t\t}\n\t\t\t\tresult = regex.exec(text);\n\t\t\t}\n\t\t},\n\t\t_updateFolding: function(block, baseModel, viewModel, allFolding, _add, start, end) {\n\t\t\tstart = start || block.start;\n\t\t\tend = end || block.end;\n\t\t\tvar foldBounds = this._stylerAdapter.getBlockFoldBounds(block, baseModel);\n\t\t\tif (!block.doNotFold && foldBounds.start <= end && start <= foldBounds.end) {\n\t\t\t\tvar index = binarySearch(allFolding, foldBounds.start, true);\n\t\t\t\tif (!(index < allFolding.length && allFolding[index].start === foldBounds.start && allFolding[index].end === foldBounds.end)) {\n\t\t\t\t\tvar annotation = this._createFoldingAnnotation(viewModel, baseModel, foldBounds.start, foldBounds.end);\n\t\t\t\t\tif (annotation) {\n\t\t\t\t\t\t_add.push(annotation);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tblock.getBlocks().forEach(function(current) {\n\t\t\t\t\tthis._updateFolding(current, baseModel, viewModel, allFolding, _add, start, end);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t},\n\t\t_caretLineStyle: {styleClass: \"meta annotation currentLine\"}, //$NON-NLS-0$\n\t\t_spacePattern: {regex: /[ ]/g, style: {styleClass: \"punctuation separator space\", unmergeable: true}}, //$NON-NLS-0$\n\t\t_tabPattern: {regex: /\\t/g, style: {styleClass: \"punctuation separator tab\", unmergeable: true}}, //$NON-NLS-0$\n\t\t_TEXTSTYLER: \"textStyler\"\n\t};\n\n\tmEventTarget.EventTarget.addMixin(TextStyler.prototype);\n\n\treturn {\n\t\tTextStyler: TextStyler,\n\t\tBlock: Block,\n\t\tcreatePatternBasedAdapter: createPatternBasedAdapter\n\t};\n});\n\n","/*******************************************************************************\n * @license\n * Copyright (c) 2013, 2015 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials are made \n * available under the terms of the Eclipse Public License v1.0 \n * (http://www.eclipse.org/legal/epl-v10.html), and the Eclipse Distribution \n * License v1.0 (http://www.eclipse.org/org/documents/edl-v10.html). \n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n *******************************************************************************/\n \n/*eslint-env browser, amd*/\ndefine('orion/editor/edit', [ //$NON-NLS-0$\n\t\"require\", //$NON-NLS-0$\n\n\t\"orion/editor/textView\", //$NON-NLS-0$\n\t\"orion/editor/textModel\", //$NON-NLS-0$\n\t\"orion/editor/textTheme\", //$NON-NLS-0$\n\t\"orion/editor/projectionTextModel\", //$NON-NLS-0$\n\t\"orion/editor/editor\", //$NON-NLS-0$\n\t\"orion/editor/editorFeatures\", //$NON-NLS-0$\n\t\n\t\"orion/editor/contentAssist\", //$NON-NLS-0$\n\t\"orion/editor/textStyler\" //$NON-NLS-0$\n\n], function(require, mTextView, mTextModel, mTextTheme, mProjModel, mEditor, mEditorFeatures, mContentAssist, mTextStyler) {\n\n\t/**\t@private */\n\tfunction getDisplay(window, document, element) {\n\t\tvar display;\n\t\tvar temp = element;\n\t\twhile (temp && temp !== document && display !== \"none\") { //$NON-NLS-0$\n\t\t\tif (window.getComputedStyle) {\n\t\t\t\tvar style = window.getComputedStyle(temp, null);\n\t\t\t\tdisplay = style.getPropertyValue(\"display\"); //$NON-NLS-0$\n\t\t\t} else {\n\t\t\t\tdisplay = temp.currentStyle.display;\n\t\t\t}\n\t\t\ttemp = temp.parentNode;\n\t\t}\n\t\tif (!temp || !display) {\n\t\t\treturn \"none\"; //$NON-NLS-0$\n\t\t}\n\t\treturn display;\n\t}\n\n\t/**\t@private */\n\tfunction getTextFromElement(element) {\n\t\tvar firstChild = element.firstChild;\n\t\tif (firstChild && firstChild.tagName === \"TEXTAREA\") { //$NON-NLS-0$\n\t\t\treturn firstChild.value;\n\t\t}\n\t\tvar document = element.ownerDocument;\n\t\tvar window = document.defaultView || document.parentWindow;\n\t\tif (!window.getSelection ||\n\t\t\t(element.childNodes.length === 1 && firstChild.nodeType === Node.TEXT_NODE) ||\n\t\t\tgetDisplay(window, document, element) === \"none\") //$NON-NLS-0$\n\t\t{\n\t\t\treturn element.innerText || element.textContent;\n\t\t}\n\t\tvar newRange = document.createRange();\n\t\tnewRange.selectNode(element);\n\t\tvar selection = window.getSelection();\n\t\tvar oldRanges = [], i;\n\t\tfor (i = 0; i < selection.rangeCount; i++) {\n\t\t\toldRanges.push(selection.getRangeAt(i));\n\t\t}\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(newRange);\n\t\tvar text = selection.toString();\n\t\tselection.removeAllRanges();\n\t\tfor (i = 0; i < oldRanges.length; i++) {\n\t\t\tselection.addRange(oldRanges[i]);\n\t\t}\n\t\treturn text;\n\t}\n\n\t/**\t@private */\t\n\tfunction optionName(name) {\n\t\tvar prefix = \"data-editor-\"; //$NON-NLS-0$\n\t\tif (name.substring(0, prefix.length) === prefix) {\n\t\t\tvar key = name.substring(prefix.length);\n\t\t\tkey = key.replace(/-([a-z])/ig, /* @callback */ function(all, character) {\n\t\t\t\treturn character.toUpperCase();\n\t\t\t});\n\t\t\treturn key;\n\t\t}\n\t\treturn undefined;\n\t}\n\t\n\t/**\t@private */\n\tfunction merge(obj1, obj2) {\n\t\tfor (var p in obj2) {\n\t\t\tif (obj2.hasOwnProperty(p)) {\n\t\t\t\tobj1[p] = obj2[p];\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\t@private */\n\tfunction mergeOptions(parent, defaultOptions) {\n\t\tvar options = {};\n\t\tmerge(options, defaultOptions);\n\t\tfor (var attr, j = 0, attrs = parent.attributes, l = attrs.length; j < l; j++) {\n\t\t\tattr = attrs.item(j);\n\t\t\tvar key = optionName(attr.nodeName);\n\t\t\tif (key) {\n\t\t\t\tvar value = attr.nodeValue;\n\t\t\t\tif (value === \"true\" || value === \"false\") { //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\tvalue = value === \"true\"; //$NON-NLS-0$\n\t\t\t\t}\n\t\t\t\toptions[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n\t\n\t/**\t@private */\n\tfunction getParents(document, className) {\n\t\tif (document.getElementsByClassName) {\n\t\t\treturn document.getElementsByClassName(className);\n\t\t}\n\t\tclassName = className.replace(/ *$/, '');\n\t\tif (document.querySelectorAll) {\n\t\t\treturn document.querySelectorAll((' ' + className).replace(/ +/g, '.')); //$NON-NLS-1$ //$NON-NLS-0$\n\t\t}\n\t\treturn null;\n\t}\n\t\n\t/**\t@private */\n\tfunction getHeight(node) {\n\t\treturn node.clientHeight;\n\t}\n\t\n\t/**\n\t * @class This object describes the options for <code>edit</code>.\n\t * @name orion.editor.EditOptions\n\t *\n\t * @property {String|DOMElement} parent the parent element for the view, it can be either a DOM element or an ID for a DOM element.\n\t * @property {Boolean} [readonly=false] whether or not the view is read-only.\n\t * @property {Boolean} [fullSelection=true] whether or not the view is in full selection mode.\n\t * @property {Boolean} [tabMode=true] whether or not the tab keypress is consumed by the view or is used for focus traversal.\n\t * @property {Boolean} [expandTab=false] whether or not the tab key inserts white spaces.\n\t * @property {String} [themeClass] the CSS class for the view theming.\n\t * @property {Number} [tabSize=4] The number of spaces in a tab.\n\t * @property {Boolean} [singleMode=false] whether or not the editor is in single line mode.\n\t * @property {Boolean} [wrapMode=false] whether or not the view wraps lines.\n\t * @property {Boolean} [wrapable=false] whether or not the view is wrappable.\n\t * @property {Function} [statusReporter] a status reporter.\n\t * @property {Function} [hoverFactory] a factory for hovers.\n\t * @property {String} [title=\"\"] the editor title.\n\t * @property {String} [contents=\"\"] the editor contents.\n\t * @property {String} [lang] @deprecated use contentType instead\n\t * @property {String} [contentType] the type of the content (eg.- application/javascript, text/html, etc.)\n\t * @property {Function} [grammarProvider] a callback for providing grammars for a content type\n\t * @property {Boolean} [showLinesRuler=true] whether or not the lines ruler is shown.\n\t * @property {Boolean} [showAnnotationRuler=true] whether or not the annotation ruler is shown.\n\t * @property {Boolean} [showOverviewRuler=true] whether or not the overview ruler is shown.\n\t * @property {Boolean} [showFoldingRuler=true] whether or not the folding ruler is shown.\n\t * @property {Boolean} [showZoomRuler=false] whether or not the zoom ruler is shown.\n\t * @property {Boolean} [noFocus=false] whether or not to focus the editor on creation.\n\t * @property {Number} [firstLineIndex=1] the line index displayed for the first line of text.\n\t */\n\t/**\n\t * Creates an editor instance configured with the given options.\n\t * \n\t * @param {orion.editor.EditOptions} options the editor options.\n\t */\n\tfunction edit(options) {\n\t\tvar doc = options.document || document;\n\t\tvar parent = options.parent;\n\t\tif (!parent) { parent = \"editor\"; } //$NON-NLS-0$\n\t\tif (typeof(parent) === \"string\") { //$NON-NLS-0$\n\t\t\tparent = doc.getElementById(parent);\n\t\t}\n\t\tif (!parent) {\n\t\t\tif (options.className) {\n\t\t\t\tvar parents = getParents(doc, options.className);\n\t\t\t\tif (parents) {\n\t\t\t\t\toptions.className = undefined;\n\t\t\t\t\t// Do not focus editors by default when creating multiple editors\n\t\t\t\t\tif (parents.length > 1 && options.noFocus === undefined) { options.noFocus = true; }\n\t\t\t\t\tvar editors = [];\n\t\t\t\t\tfor (var i = parents.length - 1; i >= 0; i--) {\n\t\t\t\t\t\toptions.parent = parents[i];\n\t\t\t\t\t\teditors.push(edit(options));\n\t\t\t\t\t}\n\t\t\t\t\treturn editors;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!parent) { throw new Error(\"no parent\"); } //$NON-NLS-0$\n\t\toptions = mergeOptions(parent, options);\n\t\n\t\tif (typeof options.theme === \"string\") { //$NON-NLS-0$\n\t\t\tvar theme = mTextTheme.TextTheme.getTheme(options.theme);\n\t\t\tvar index = options.theme.lastIndexOf(\"/\"); //$NON-NLS-0$\n\t\t\tvar themeClass = options.theme; \n\t\t\tif (index !== -1) {\n\t\t\t\tthemeClass = themeClass.substring(index + 1);\n\t\t\t}\n\t\t\tvar extension = \".css\"; //$NON-NLS-0$\n\t\t\tif (themeClass.substring(themeClass.length - extension.length) === extension) {\n\t\t\t\tthemeClass = themeClass.substring(0, themeClass.length - extension.length);\n\t\t\t}\n\t\t\ttheme.setThemeClass(themeClass, {href: options.theme});\n\t\t\toptions.theme = theme;\n\t\t}\n\t\tvar textViewFactory = function() {\n\t\t\treturn new mTextView.TextView({\n\t\t\t\tparent: parent,\n\t\t\t\tmodel: new mProjModel.ProjectionTextModel(options.model ? options.model : new mTextModel.TextModel(\"\")),\n\t\t\t\ttabSize: options.tabSize ? options.tabSize : 4,\n\t\t\t\treadonly: options.readonly,\n\t\t\t\tfullSelection: options.fullSelection,\n\t\t\t\ttabMode: options.tabMode,\n\t\t\t\texpandTab: options.expandTab,\n\t\t\t\tsingleMode: options.singleMode,\n\t\t\t\tthemeClass: options.themeClass,\n\t\t\t\ttheme: options.theme,\n\t\t\t\twrapMode: options.wrapMode,\n\t\t\t\twrappable: options.wrappable\n\t\t\t});\n\t\t};\n\n\t\tvar contentAssist, contentAssistFactory;\n\t\tif (!options.readonly) {\n\t\t\tcontentAssistFactory = {\n\t\t\t\tcreateContentAssistMode: function(editor) {\n\t\t\t\t\tcontentAssist = new mContentAssist.ContentAssist(editor.getTextView());\n\t\t\t\t\tvar contentAssistWidget = new mContentAssist.ContentAssistWidget(contentAssist);\n\t\t\t\t\tvar result = new mContentAssist.ContentAssistMode(contentAssist, contentAssistWidget);\n\t\t\t\t\tcontentAssist.setMode(result);\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\n\t\tvar syntaxHighlighter = {\n\t\t\tstyler: null, \n\t\t\t\n\t\t\thighlight: function(contentType, grammarProvider, editor) {\n\t\t\t\tif (this.styler && this.styler.destroy) {\n\t\t\t\t\tthis.styler.destroy();\n\t\t\t\t}\n\t\t\t\tthis.styler = null;\n\n\t\t\t\t/* to maintain backwards-compatibility convert previously-supported lang values to types */\n\t\t\t\tif (contentType === \"js\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"application/javascript\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"css\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/css\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"html\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/html\"; //$NON-NLS-0$\n\t\t\t\t} else if (contentType === \"java\") { //$NON-NLS-0$\n\t\t\t\t\tcontentType = \"text/x-java-source\"; //$NON-NLS-0$\n\t\t\t\t}\n\n\t\t\t\tvar textView = editor.getTextView();\n\t\t\t\tvar annotationModel = editor.getAnnotationModel();\n\t\t\t\tvar loadGrammar = function(contentType) {\n\t\t\t\t\t/* attempt to locate an included file containing the grammar for contentType */\n\t\t\t\t\tvar folderName = contentType.replace(/[*|:/\".<>?+]/g, '_');\n\t\t\t\t\trequire([\"./stylers/\" + folderName + \"/syntax\"], //$NON-NLS-1$ //$NON-NLS-0$\n\t\t\t\t\t\tfunction(grammar) {\n\t\t\t\t\t\t\tvar stylerAdapter = new mTextStyler.createPatternBasedAdapter(grammar.grammars, grammar.id, contentType);\n\t\t\t\t\t\t\tthis.styler = new mTextStyler.TextStyler(textView, annotationModel, stylerAdapter);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t/* @callback */ function(error) {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t * A grammar file was not found for the specified contentType, so syntax styling will\n\t\t\t\t\t\t\t * not be shown (the editor will still work fine otherwise).  requireJS has already\n\t\t\t\t\t\t\t * written an error message to the console regarding the missing grammar file.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tif (contentType) {\n\t\t\t\t\tif (grammarProvider && (typeof grammarProvider === \"function\")) { //$NON-NLS-0$\n\t\t\t\t\t\tgrammarProvider(contentType).then(\n\t\t\t\t\t\t\tfunction(result) {\n\t\t\t\t\t\t\t\tif (result && result.grammars && result.id) {\n\t\t\t\t\t\t\t\t\tvar stylerAdapter = new mTextStyler.createPatternBasedAdapter(result.grammars, result.id, contentType);\n\t\t\t\t\t\t\t\t\tthis.styler = new mTextStyler.TextStyler(textView, annotationModel, stylerAdapter);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\t\t/* @callback */ function(error) {\n\t\t\t\t\t\t\t\tloadGrammar(contentType); /* fall back to default grammar file lookup */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tloadGrammar(contentType);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (contentType === \"text/css\") { //$NON-NLS-0$\n\t\t\t\t\teditor.setFoldingRulerVisible(options.showFoldingRuler === undefined || options.showFoldingRuler);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar editor = new mEditor.Editor({\n\t\t\ttextViewFactory: textViewFactory,\n\t\t\tundoStackFactory: new mEditorFeatures.UndoFactory(),\n\t\t\tannotationFactory: new mEditorFeatures.AnnotationFactory(),\n\t\t\tlineNumberRulerFactory: new mEditorFeatures.LineNumberRulerFactory(),\n\t\t\tfoldingRulerFactory: new mEditorFeatures.FoldingRulerFactory(),\n\t\t\ttextDNDFactory: new mEditorFeatures.TextDNDFactory(),\n\t\t\tcontentAssistFactory: contentAssistFactory,\n\t\t\tkeyBindingFactory: new mEditorFeatures.KeyBindingsFactory(), \n\t\t\tstatusReporter: options.statusReporter,\n\t\t\thoverFactory: options.hoverFactory,\n\t\t\tdomNode: parent\n\t\t});\n\t\teditor.addEventListener(\"TextViewInstalled\", function() { //$NON-NLS-0$\n\t\t\tvar ruler = editor.getLineNumberRuler();\n\t\t\tif (ruler && options.firstLineIndex !== undefined) {\n\t\t\t\truler.setFirstLine(options.firstLineIndex);\n\t\t\t}\n\t\t\tvar sourceCodeActions = editor.getSourceCodeActions();\n\t\t\tif (sourceCodeActions) {\n\t\t\t\tsourceCodeActions.setAutoPairParentheses(options.autoPairParentheses);\n\t\t\t\tsourceCodeActions.setAutoPairBraces(options.autoPairBraces);\n\t\t\t\tsourceCodeActions.setAutoPairSquareBrackets(options.autoPairSquareBrackets);\n\t\t\t\tsourceCodeActions.setAutoPairAngleBrackets(options.autoPairAngleBrackets);\n\t\t\t\tsourceCodeActions.setAutoPairQuotations(options.autoPairQuotations);\n\t\t\t\tsourceCodeActions.setAutoCompleteComments(options.autoCompleteComments);\n\t\t\t\tsourceCodeActions.setSmartIndentation(options.smartIndentation);\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar contents = options.contents;\n\t\tif (contents === undefined) {\n\t\t\tcontents = getTextFromElement(parent); \n\t\t}\n\t\tif (!contents) { contents=\"\"; }\n\t\t\n\t\teditor.installTextView();\n\t\teditor.setLineNumberRulerVisible(options.showLinesRuler === undefined || options.showLinesRuler);\n\t\teditor.setAnnotationRulerVisible(options.showAnnotationRuler === undefined || options.showFoldingRuler);\n\t\teditor.setOverviewRulerVisible(options.showOverviewRuler === undefined || options.showOverviewRuler);\n\t\teditor.setZoomRulerVisible(options.showZoomRuler === undefined || options.showZoomRuler);\n\t\teditor.setFoldingRulerVisible(options.showFoldingRuler === undefined || options.showFoldingRuler);\n\t\teditor.setInput(options.title, null, contents, false, options.noFocus);\n\t\t\n\t\tsyntaxHighlighter.highlight(options.contentType || options.lang, options.grammarProvider, editor);\n\t\t/*\n\t\t * The minimum height of the editor is 50px. Do not compute size if the editor is not\n\t\t * attached to the DOM or it is display=none.\n\t\t */\n\t\tvar window = doc.defaultView || doc.parentWindow;\n\t\tif (!options.noComputeSize && getDisplay(window, doc, parent) !== \"none\" && getHeight(parent) <= 50) { //$NON-NLS-0$\n\t\t\tvar height = editor.getTextView().computeSize().height;\n\t\t\tparent.style.height = height + \"px\"; //$NON-NLS-0$\n\t\t}\n\t\treturn editor;\n\t}\n\n\tvar editorNS = window.orion ? window.orion.editor : undefined;\n\tif (editorNS) {\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tmerge(editorNS, arguments[i]);\n\t\t}\n\t\teditorNS.edit = edit;\n\t}\n\n\treturn edit;\n});\n\n\n"]}